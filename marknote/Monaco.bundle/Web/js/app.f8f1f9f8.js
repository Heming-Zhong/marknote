/******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	function webpackJsonpCallback(data) {
/******/ 		var chunkIds = data[0];
/******/ 		var moreModules = data[1];
/******/ 		var executeModules = data[2];
/******/
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, resolves = [];
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 				resolves.push(installedChunks[chunkId][0]);
/******/ 			}
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(data);
/******/
/******/ 		while(resolves.length) {
/******/ 			resolves.shift()();
/******/ 		}
/******/
/******/ 		// add entry modules from loaded chunk to deferred list
/******/ 		deferredModules.push.apply(deferredModules, executeModules || []);
/******/
/******/ 		// run deferred modules when all chunks ready
/******/ 		return checkDeferredModules();
/******/ 	};
/******/ 	function checkDeferredModules() {
/******/ 		var result;
/******/ 		for(var i = 0; i < deferredModules.length; i++) {
/******/ 			var deferredModule = deferredModules[i];
/******/ 			var fulfilled = true;
/******/ 			for(var j = 1; j < deferredModule.length; j++) {
/******/ 				var depId = deferredModule[j];
/******/ 				if(installedChunks[depId] !== 0) fulfilled = false;
/******/ 			}
/******/ 			if(fulfilled) {
/******/ 				deferredModules.splice(i--, 1);
/******/ 				result = __webpack_require__(__webpack_require__.s = deferredModule[0]);
/******/ 			}
/******/ 		}
/******/
/******/ 		return result;
/******/ 	}
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// object to store loaded and loading chunks
/******/ 	// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 	// Promise = chunk loading, 0 = chunk loaded
/******/ 	var installedChunks = {
/******/ 		"app": 0
/******/ 	};
/******/
/******/ 	var deferredModules = [];
/******/
/******/ 	// script path function
/******/ 	function jsonpScriptSrc(chunkId) {
/******/ 		return __webpack_require__.p + "js/" + ({}[chunkId]||chunkId) + "." + {"chunk-2d0a3594":"bf90b30e","chunk-2d0a3b08":"42fbaa5b","chunk-2d0a3c02":"9d60af89","chunk-2d0a3cbd":"74b0b711","chunk-2d0a3cda":"5a5833ca","chunk-2d0a45d1":"8a818811","chunk-2d0a4b8e":"583bc5f8","chunk-2d0a4d2f":"25f41cac","chunk-2d0a4df8":"3b10b5ac","chunk-2d0a4f23":"450967a5","chunk-2d0a4fb8":"c1b340c5","chunk-2d0a500c":"54ea1c71","chunk-2d0a54b7":"1572b643","chunk-2d0aa25f":"9eed929c","chunk-2d0aa76a":"984c9fbb","chunk-2d0aa9ee":"f96d9298","chunk-2d0aab29":"39ff5f73","chunk-2d0aab89":"5a20a50f","chunk-2d0ab05a":"8b9c8c43","chunk-2d0ab098":"bed7271a","chunk-2d0ab2ec":"3226222e","chunk-2d0ab669":"40673407","chunk-2d0abbd0":"069c37cf","chunk-2d0abc1a":"8e8ee0a1","chunk-2d0abdf2":"ca4af038","chunk-2d0abff0":"8b7c39c3","chunk-2d0ac02d":"d67510b1","chunk-2d0ac1fa":"544dd5be","chunk-2d0ac41f":"3fe67bed","chunk-2d0ac5ea":"9d3c9c2d","chunk-2d0ae545":"6c770d46","chunk-2d0aec8c":"2af1ced1","chunk-2d0aecbd":"c94a8846","chunk-2d0af0f9":"6d637fb2","chunk-2d0af43d":"613055d4","chunk-2d0af7b1":"6ba6b4c7","chunk-2d0af83a":"f9ba551a","chunk-2d0b19d6":"56e346fb","chunk-2d0b21d0":"47aff71c","chunk-2d0b21f4":"cea575a8","chunk-2d0b2325":"f6990643","chunk-2d0b290c":"a7a1ff1d","chunk-2d0b307d":"c5191363","chunk-2d0b308b":"3ae97c99","chunk-2d0b30f4":"8a4bfe26","chunk-2d0b3508":"904c15f7","chunk-2d0b366f":"8b78e896","chunk-2d0b3782":"29fa6539","chunk-2d0b37df":"875cfa1b","chunk-2d0b3da1":"c28dab82","chunk-2d0b59b8":"121fb8ac","chunk-2d0b60d0":"b7bd914d","chunk-2d0b614c":"1448fab3","chunk-2d0b6185":"8ab1aaf0","chunk-2d0b61f3":"0dbe7597","chunk-2d0b64b0":"b8ff9e13","chunk-2d0b6917":"1dabd1ce","chunk-2d0b6aa0":"554f6139","chunk-2d0b6ad5":"0560b95b","chunk-2d0b6c2b":"26c47343","chunk-2d0b729c":"e6ae93c8","chunk-2d0b8ed4":"6ea75175","chunk-2d0b91cb":"bcd56f03","chunk-2d0b92df":"ab48b0fb","chunk-2d0b9443":"ac71fba7","chunk-2d0b95d6":"996de23b","chunk-2d0b9610":"2200fcc7","chunk-2d0b9635":"21d175a2","chunk-2d0b97b6":"646070dd","chunk-2d0b97c4":"7ae7496e","chunk-2d0b9a23":"4d5fa3a7","chunk-2d0ba0c1":"81a836f8","chunk-2d0ba184":"76d67f4e","chunk-2d0ba327":"ff75b88b","chunk-2d0ba349":"6e9a0b42","chunk-2d0ba359":"5b011d32","chunk-2d0ba4ba":"8235e83a","chunk-2d0ba4f8":"1c4faeec","chunk-2d0ba534":"b1f0ab8d","chunk-2d0ba70c":"fd69dbcb","chunk-2d0ba8d9":"f113804d","chunk-2d0bac0d":"6827fa32","chunk-2d0bae98":"edda5ac5","chunk-2d0bcea0":"cba90d6a","chunk-2d0bd16e":"86219dcd","chunk-2d0bd1b6":"c0fa6fd2","chunk-2d0bd1ea":"e1d442a5","chunk-2d0bd3c7":"88864d9d","chunk-2d0bd3e6":"8382b4e9","chunk-2d0bd7a9":"a5f1de3b","chunk-2d0bd99a":"0faeee3e","chunk-2d0bdd68":"3911f3db","chunk-2d0be195":"00721684","chunk-2d0be2f7":"6e703689","chunk-2d0c031f":"9885eb71","chunk-2d0c0892":"1519962c","chunk-2d0c0a66":"2d7bec7a","chunk-2d0c0c90":"5bf78c93","chunk-2d0c0ff9":"5b9652c0","chunk-2d0c1054":"73c7d527","chunk-2d0c1244":"4018a2d3","chunk-2d0c1283":"9ab6dd01","chunk-2d0c15a5":"db91f3db","chunk-2d0c17a7":"61e7e2fd","chunk-2d0c17aa":"9f77b7f3","chunk-2d0c191b":"b3328ad8","chunk-2d0c19b6":"adc04a1d","chunk-2d0c1aeb":"374248a8","chunk-2d0c20cd":"56cd454c","chunk-2d0c22bd":"3d2e5a7e","chunk-2d0c22fb":"8a7bb639","chunk-2d0c269b":"99998345","chunk-2d0c42d5":"d3c7e93e","chunk-2d0c4872":"1d870e05","chunk-2d0c48a4":"fac040c4","chunk-2d0c49da":"4b4cbbda","chunk-2d0c4a04":"82b57967","chunk-2d0c4a28":"53e3f28f","chunk-2d0c4c13":"6744d0d8","chunk-2d0c4d69":"5d2e45b7","chunk-2d0c4d86":"8a437115","chunk-2d0c4db6":"c703dd07","chunk-2d0c4dc5":"93f092cd","chunk-2d0c5718":"33337a1d","chunk-2d0c76d6":"f9540d33","chunk-2d0c7cd5":"8e995760","chunk-2d0c81f7":"784487f6","chunk-2d0c847f":"96272887","chunk-2d0c8676":"7bb02cf8","chunk-2d0c86b6":"6e14c9e0","chunk-2d0c8808":"44b82c28","chunk-2d0c8847":"ba9a33c5","chunk-2d0c89ea":"01dcfa51","chunk-2d0c8c34":"76ef3e4c","chunk-2d0c936c":"ac100b28","chunk-2d0c94d8":"d694ea24","chunk-2d0c973a":"1dd94ba7","chunk-2d0cbaa8":"3b7a1063","chunk-2d0cbc95":"cdaedaf3","chunk-2d0cbdeb":"c010bf0c","chunk-2d0cc0e2":"a46f016a","chunk-2d0cc22b":"21439c63","chunk-2d0cc429":"94bff8bc","chunk-2d0cc589":"7714aceb","chunk-2d0cc9eb":"18489677","chunk-2d0cca74":"2215e234","chunk-2d0ccbd6":"2d87801d","chunk-2d0ccf5d":"cca864f7","chunk-2d0ce780":"46f15d12","chunk-2d0ce7c2":"1f61e0db","chunk-2d0ceb84":"795492c3","chunk-2d0ced74":"5cad919c","chunk-2d0ceed8":"b30fd3c6","chunk-2d0cef9f":"dc11c6b1","chunk-2d0cf150":"9eb0ee0a","chunk-2d0cfaa3":"037d5e34","chunk-2d0cfb42":"cf699869","chunk-2d0cfc95":"5d5810a2","chunk-2d0cfdbb":"e69662cb","chunk-2d0cfdbe":"32bf5bcd","chunk-2d0d0178":"52d918a5","chunk-2d0d0206":"631954cf","chunk-2d0d053d":"f3413abf","chunk-2d0d05e9":"3feb3232","chunk-2d0d07bb":"8126b0b8","chunk-2d0d095d":"0328f786","chunk-2d0d0f67":"1e7935c3","chunk-2d0d2b92":"ddbf61a8","chunk-2d0d2bae":"36d778d4","chunk-2d0d30d5":"f00eac54","chunk-2d0d30f6":"9e22e1c5","chunk-2d0d3150":"5f3bd696","chunk-2d0d333d":"c3f8f167","chunk-2d0d335b":"9e1325ff","chunk-2d0d3adf":"ee99fbbe","chunk-2d0d4407":"d3d850eb","chunk-2d0d5c4c":"ec84c937","chunk-2d0d602e":"1d82caa6","chunk-2d0d6067":"c64fa194","chunk-2d0d61ee":"adcd331c","chunk-2d0d639f":"1b2494cb","chunk-2d0d63ec":"f4d9e2ee","chunk-2d0d65bb":"c5d08186","chunk-2d0d67a1":"3ffc8963","chunk-2d0d6ab3":"0644e11f","chunk-2d0d6b05":"4c9b62e1","chunk-2d0d6d54":"a0736d23","chunk-2d0d6e86":"fe45ec45","chunk-2d0d6ef8":"7747c2e2","chunk-2d0d6f7f":"18617480","chunk-2d0d7217":"36467237","chunk-2d0d721c":"d17636b9","chunk-2d0d76d1":"f1186943","chunk-2d0d782b":"c9025998","chunk-2d0d78a7":"7ee1498b","chunk-2d0d79d9":"29e914bd","chunk-2d0d7a94":"ba59a08e","chunk-2d0d7e17":"e92c322d","chunk-2d0d7e81":"d3067758","chunk-2d0d83f8":"e40ada0a","chunk-2d0d9fde":"27317d7d","chunk-2d0da593":"85c616dc","chunk-2d0da703":"2e3992e2","chunk-2d0da725":"7a9f8d5b","chunk-2d0da744":"7e615484","chunk-2d0da956":"66f656d5","chunk-2d0dad30":"1859d05b","chunk-2d0daec7":"831ed78d","chunk-2d0db26a":"64a76e5e","chunk-2d0db7de":"946af713","chunk-2d0db825":"de0a7337","chunk-2d0dcff7":"df3ef89f","chunk-2d0dd022":"9a331103","chunk-2d0dd080":"9c3044ac","chunk-2d0dd118":"177440fd","chunk-2d0dd3d5":"fdacec5d","chunk-2d0dd47e":"8f6ff2d6","chunk-2d0dd7ae":"aedea963","chunk-2d0dd85d":"bb7feb0d","chunk-2d0dda1d":"15f67ea5","chunk-2d0ddbb5":"e26d9bd6","chunk-2d0ddbdf":"de9568d9","chunk-2d0ddc51":"7fb072b1","chunk-2d0ddd85":"f3b330c3","chunk-2d0ddef8":"6b41e0d5","chunk-2d0de4e7":"67668159","chunk-2d0de5b2":"85f32fa9","chunk-2d0de721":"a958a481","chunk-2d0de74f":"8dd165bc","chunk-2d0de77e":"1a840f41","chunk-2d0de8a4":"95192840","chunk-2d0de8ab":"641e6da0","chunk-2d0dece0":"8c44a351","chunk-2d0decff":"b8173882","chunk-2d0dee4a":"39b92b1e","chunk-2d0df045":"fedf3cd6","chunk-2d0df7c9":"ff23aac2","chunk-2d0e13dd":"3c92e608","chunk-2d0e1d57":"48554777","chunk-2d0e1ee9":"bf87f81b","chunk-2d0e1f23":"a9f4eb8a","chunk-2d0e1fe1":"5eb8933e","chunk-2d0e21a1":"56ca5f8d","chunk-2d0e22e6":"d198e769","chunk-2d0e28d1":"a66cd7e2","chunk-2d0e2c5c":"eeb39219","chunk-2d0e447f":"6acd114e","chunk-2d0e490d":"5bcacbf6","chunk-2d0e4c41":"1a2f59ec","chunk-2d0e4c5e":"06b7bd39","chunk-2d0e4ea0":"8524cc25","chunk-2d0e508c":"08dc75f9","chunk-2d0e50da":"0a4a4891","chunk-2d0e53e4":"e33614d1","chunk-2d0e5581":"1d09a42b","chunk-2d0e5758":"ddb58691","chunk-2d0e5f16":"3a36ed61","chunk-2d0e6618":"e1f0b456","chunk-2d0e6669":"c5a73a6c","chunk-2d0e6724":"f23725f8","chunk-2d0e68c7":"8243b678","chunk-2d0e6cd1":"9a7a33af","chunk-2d0e8c5a":"9e9f7345","chunk-2d0e8c7d":"2f28a2cd","chunk-2d0e906b":"69699ec0","chunk-2d0e9376":"5af7a16c","chunk-2d0e95ce":"9e210f84","chunk-2d0e95d0":"3f0bc80a","chunk-2d0e9745":"8cd9de68","chunk-2d0e9801":"1434a936","chunk-2d0e982c":"d96274aa","chunk-2d0e9972":"f4b83b4a","chunk-2d0e9ac9":"9e275c7a","chunk-2d0ea0f1":"ab9da6c1","chunk-2d0efcd0":"bb5db470","chunk-2d0f048f":"f81e13ac","chunk-2d0f07c1":"97c367bc","chunk-2d0f0814":"df64dae4","chunk-2d0f0bc3":"958e10c4","chunk-2d0f0c59":"b7b03426","chunk-2d0f0da2":"6d676bb5","chunk-2d0f0da6":"f6dd05a8","chunk-2d0f1152":"e236bf30","chunk-2d207365":"c9281f2b","chunk-2d2076ef":"ef709957","chunk-2d20797a":"993e0235","chunk-2d2079e4":"652c6e91","chunk-2d207f84":"72570479","chunk-2d207f91":"7d095b39","chunk-2d20809e":"e14e65b4","chunk-2d2080f8":"026c00f7","chunk-2d20829c":"c8df62d2","chunk-2d20849e":"b944cf92","chunk-2d2086ea":"39417a41","chunk-2d208704":"877772b9","chunk-2d20883d":"e963a8c2","chunk-2d20888c":"aa206aa7","chunk-2d208a59":"a39d749a","chunk-2d208c0a":"3199d223","chunk-2d208c2b":"92089017","chunk-2d208d73":"a770e28b","chunk-2d208e58":"21f5872b","chunk-2d208f9f":"10bc60eb","chunk-2d208ffb":"4d27c2a3","chunk-2d209248":"13e8607a","chunk-2d209380":"3c04a4fb","chunk-2d2093f8":"0506ad62","chunk-2d20958d":"9ebf590f","chunk-2d209725":"ef68ba5a","chunk-2d20e7ba":"54c9fb83","chunk-2d20eba2":"4eab3767","chunk-2d20ebe2":"2acd8c0b","chunk-2d20f386":"b0c0c6e2","chunk-2d20f3c6":"2a763c7a","chunk-2d20f5c3":"d24d92be","chunk-2d20f6e6":"7faaacde","chunk-2d20f717":"b8eea1f0","chunk-2d20f739":"56046782","chunk-2d20fd47":"e08cd512","chunk-2d20feb9":"18ac38ac","chunk-2d21022d":"055e9a18","chunk-2d210287":"4f47bd06","chunk-2d2102c8":"92cd7542","chunk-2d210819":"04f34ffd","chunk-2d210956":"ff4de91f","chunk-2d210a4b":"62b555bc","chunk-2d210bbf":"61ecc033","chunk-2d210bef":"010ffed8","chunk-2d210c0e":"70707c6f","chunk-2d212b59":"f8e6ffc7","chunk-2d212b97":"05b0de96","chunk-2d212eda":"970370a3","chunk-2d212f67":"86d4bc1f","chunk-2d213333":"654f35d3","chunk-2d21334a":"a47aa534","chunk-2d213569":"ee4bfb93","chunk-2d213adc":"96b4ede8","chunk-2d213cac":"e230bbdc","chunk-2d213ed9":"e7db4d9f","chunk-2d213f04":"de464937","chunk-2d2163e4":"86ddc5e7","chunk-2d2163f3":"8226eaeb","chunk-2d21647d":"7437c493","chunk-2d216611":"417103d3","chunk-2d216956":"0e0996c6","chunk-2d216d47":"3faaf2e4","chunk-2d2174b6":"5eab6c05","chunk-2d217525":"db3bf87a","chunk-2d217526":"b0ceb9bb","chunk-2d217630":"52a2ac2e","chunk-2d217abb":"eee85de0","chunk-2d217b03":"a17207b2","chunk-2d217ca8":"bae67fba","chunk-2d217e47":"3f938dfb","chunk-2d217ed5":"2bac3305","chunk-2d2183a4":"6ff03773","chunk-2d21a003":"171e6834","chunk-2d21a403":"6f4463ff","chunk-2d21a443":"12092e4b","chunk-2d21a5b6":"96471050","chunk-2d21a817":"3886da04","chunk-2d21b27f":"60d777e3","chunk-2d21b29f":"306968eb","chunk-2d21b2ad":"cb542fac","chunk-2d21d18c":"946dc4a6","chunk-2d21d4c0":"fa784c30","chunk-2d21dabf":"55a12647","chunk-2d21dc09":"29d21da0","chunk-2d21de23":"abbd5f3b","chunk-2d21e202":"074b6825","chunk-2d21e597":"452c534d","chunk-2d21e5a5":"f49ed1fd","chunk-2d21e5c4":"edd5e5b9","chunk-2d21e815":"5417fcdd","chunk-2d21eb0d":"351fcc92","chunk-2d21f2bc":"ddc43649","chunk-2d21f49f":"5accfe65","chunk-2d21f8a8":"db57266e","chunk-2d221835":"5d1022bb","chunk-2d2218a2":"eca2a15e","chunk-2d2219e2":"eee5443c","chunk-2d2219f6":"c5d155cf","chunk-2d221a37":"54852517","chunk-2d221c45":"5d3c164e","chunk-2d221c83":"9474508d","chunk-2d221f87":"ae662244","chunk-2d222006":"0e495805","chunk-2d2226c1":"a5f8eda8","chunk-2d222d2c":"2f034623","chunk-2d224914":"f03c4676","chunk-2d224930":"f42c4124","chunk-2d224ad2":"25f05767","chunk-2d224cf4":"a087bd92","chunk-2d225038":"f45c59aa","chunk-2d2252b1":"2c14de71","chunk-2d2252df":"825d80ef","chunk-2d2255dc":"e4f09488","chunk-2d2259f3":"540d4fb8","chunk-2d225a08":"6c38414f","chunk-2d225dbb":"af64dce8","chunk-2d226032":"a5685d8a","chunk-2d22618a":"f3512df1","chunk-2d2261e4":"2d73a04d","chunk-2d226364":"41feb224","chunk-2d2264dc":"551a9fef","chunk-2d22650b":"aa1cb62a","chunk-2d2266c9":"394e27c7","chunk-2d226744":"93905ae5","chunk-2d226778":"db19a529","chunk-2d2268ca":"422345e7","chunk-2d226ca0":"067ae279","chunk-2d226cc9":"a47cf984","chunk-2d226ccb":"2fa2d782","chunk-2d226d09":"97c4f909","chunk-2d228914":"0a502150","chunk-2d228cd6":"f127759e","chunk-2d228ef3":"5ce24760","chunk-2d229204":"76dd86f6","chunk-2d229436":"8ff8efc6","chunk-2d229442":"71afae68","chunk-2d2295d7":"ac0a38a0","chunk-2d229865":"f2838339","chunk-2d229b4a":"5a95a4d2","chunk-2d229bc4":"67260991","chunk-2d229bf2":"4eb88325","chunk-2d229da8":"93cd4bcd","chunk-2d22b9c0":"d6b8e609","chunk-2d22bce4":"29d89b7a","chunk-2d22bd72":"e6165a57","chunk-2d22bd9b":"66d2bc99","chunk-2d22c120":"3b3eb0be","chunk-2d22c130":"e5310f5d","chunk-2d22c17d":"9e678548","chunk-2d22c55d":"daf47d76","chunk-2d22c6af":"0b0f9d1b","chunk-2d22c6b4":"edbb144c","chunk-2d22c900":"a3ca3184","chunk-2d22cbcb":"3007fcce","chunk-2d22cdf6":"600fcb7e","chunk-2d22ce26":"5e692e88","chunk-2d22d09f":"d46928fb","chunk-2d22d243":"88750d27","chunk-2d22d34b":"452fe620","chunk-2d22d366":"6e3a8772","chunk-2d22d389":"3ab05b4b","chunk-2d22d452":"8d3aabf5","chunk-2d22d5ba":"d102465d","chunk-2d22d785":"fbb2353f","chunk-2d22d7a3":"f0678553","chunk-2d22d833":"6b7e5026","chunk-2d22dacf":"62477973","chunk-2d22db2b":"9cc5b09b","chunk-2d22dbd7":"868310a9","chunk-2d22dc13":"923b4bb8","chunk-2d22dd6a":"65e7e663","chunk-2d22dd85":"26f065b4","chunk-2d22e186":"8e331711","chunk-2d230091":"71cc4286","chunk-2d2300c2":"8991c348","chunk-2d230533":"f9a72c7a","chunk-2d230683":"2ad375c2","chunk-2d230e57":"d3927baf","chunk-2d230fc6":"56e7a86f","chunk-2d23154d":"4bfd5bba","chunk-2d237165":"fa4db177","chunk-2d2374d9":"7d2d5de6","chunk-2d2375df":"60004b30","chunk-2d237713":"77301ba2","chunk-2d237879":"6975a7b4","chunk-2d2378d7":"e03c6253","chunk-2d237b4f":"53387289","chunk-2d2380d4":"985cc9cd","chunk-2d238247":"bff66631","chunk-2d2384a5":"2b98e5c8","chunk-2d238656":"d3cc7a67","chunk-2d238661":"3e2fafbf","chunk-7468efb7":"47eba6a9","chunk-747c1801":"ab287bd4","chunk-74921a61":"9b23ed8e","chunk-77053d12":"ef6239d9"}[chunkId] + ".js"
/******/ 	}
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/ 	// This file contains only the entry chunk.
/******/ 	// The chunk loading function for additional chunks
/******/ 	__webpack_require__.e = function requireEnsure(chunkId) {
/******/ 		var promises = [];
/******/
/******/
/******/ 		// JSONP chunk loading for javascript
/******/
/******/ 		var installedChunkData = installedChunks[chunkId];
/******/ 		if(installedChunkData !== 0) { // 0 means "already installed".
/******/
/******/ 			// a Promise means "currently loading".
/******/ 			if(installedChunkData) {
/******/ 				promises.push(installedChunkData[2]);
/******/ 			} else {
/******/ 				// setup Promise in chunk cache
/******/ 				var promise = new Promise(function(resolve, reject) {
/******/ 					installedChunkData = installedChunks[chunkId] = [resolve, reject];
/******/ 				});
/******/ 				promises.push(installedChunkData[2] = promise);
/******/
/******/ 				// start chunk loading
/******/ 				var script = document.createElement('script');
/******/ 				var onScriptComplete;
/******/
/******/ 				script.charset = 'utf-8';
/******/ 				script.timeout = 120;
/******/ 				if (__webpack_require__.nc) {
/******/ 					script.setAttribute("nonce", __webpack_require__.nc);
/******/ 				}
/******/ 				script.src = jsonpScriptSrc(chunkId);
/******/
/******/ 				// create error before stack unwound to get useful stacktrace later
/******/ 				var error = new Error();
/******/ 				onScriptComplete = function (event) {
/******/ 					// avoid mem leaks in IE.
/******/ 					script.onerror = script.onload = null;
/******/ 					clearTimeout(timeout);
/******/ 					var chunk = installedChunks[chunkId];
/******/ 					if(chunk !== 0) {
/******/ 						if(chunk) {
/******/ 							var errorType = event && (event.type === 'load' ? 'missing' : event.type);
/******/ 							var realSrc = event && event.target && event.target.src;
/******/ 							error.message = 'Loading chunk ' + chunkId + ' failed.\n(' + errorType + ': ' + realSrc + ')';
/******/ 							error.name = 'ChunkLoadError';
/******/ 							error.type = errorType;
/******/ 							error.request = realSrc;
/******/ 							chunk[1](error);
/******/ 						}
/******/ 						installedChunks[chunkId] = undefined;
/******/ 					}
/******/ 				};
/******/ 				var timeout = setTimeout(function(){
/******/ 					onScriptComplete({ type: 'timeout', target: script });
/******/ 				}, 120000);
/******/ 				script.onerror = script.onload = onScriptComplete;
/******/ 				document.head.appendChild(script);
/******/ 			}
/******/ 		}
/******/ 		return Promise.all(promises);
/******/ 	};
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// on error function for async loading
/******/ 	__webpack_require__.oe = function(err) { console.error(err); throw err; };
/******/
/******/ 	var jsonpArray = window["webpackJsonp"] = window["webpackJsonp"] || [];
/******/ 	var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);
/******/ 	jsonpArray.push = webpackJsonpCallback;
/******/ 	jsonpArray = jsonpArray.slice();
/******/ 	for(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);
/******/ 	var parentJsonpFunction = oldJsonpFunction;
/******/
/******/
/******/ 	// add entry module to deferred list
/******/ 	deferredModules.push([0,"chunk-vendors"]);
/******/ 	// run deferred modules when ready
/******/ 	return checkDeferredModules();
/******/ })
/************************************************************************/
/******/ ({

/***/ 0:
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__("56d7");


/***/ }),

/***/ "02a1":
/***/ (function(module) {

module.exports = JSON.parse("[{\"emoji\":\"😀\",\"description\":\"grinning face\",\"category\":\"People\",\"aliases\":[\"grinning\"],\"tags\":[\"smile\",\"happy\"]},{\"emoji\":\"😃\",\"description\":\"smiling face with open mouth\",\"category\":\"People\",\"aliases\":[\"smiley\"],\"tags\":[\"happy\",\"joy\",\"haha\"]},{\"emoji\":\"😄\",\"description\":\"smiling face with open mouth & smiling eyes\",\"category\":\"People\",\"aliases\":[\"smile\"],\"tags\":[\"happy\",\"joy\",\"laugh\",\"pleased\"]},{\"emoji\":\"😁\",\"description\":\"grinning face with smiling eyes\",\"category\":\"People\",\"aliases\":[\"grin\"],\"tags\":[]},{\"emoji\":\"😆\",\"description\":\"smiling face with open mouth & closed eyes\",\"category\":\"People\",\"aliases\":[\"laughing\",\"satisfied\"],\"tags\":[\"happy\",\"haha\"]},{\"emoji\":\"😅\",\"description\":\"smiling face with open mouth & cold sweat\",\"category\":\"People\",\"aliases\":[\"sweat_smile\"],\"tags\":[\"hot\"]},{\"emoji\":\"😂\",\"description\":\"face with tears of joy\",\"category\":\"People\",\"aliases\":[\"joy\"],\"tags\":[\"tears\"]},{\"emoji\":\"🤣\",\"description\":\"rolling on the floor laughing\",\"category\":\"People\",\"aliases\":[\"rofl\"],\"tags\":[\"lol\",\"laughing\"]},{\"emoji\":\"☺️\",\"description\":\"smiling face\",\"category\":\"People\",\"aliases\":[\"relaxed\"],\"tags\":[\"blush\",\"pleased\"]},{\"emoji\":\"😊\",\"description\":\"smiling face with smiling eyes\",\"category\":\"People\",\"aliases\":[\"blush\"],\"tags\":[\"proud\"]},{\"emoji\":\"😇\",\"description\":\"smiling face with halo\",\"category\":\"People\",\"aliases\":[\"innocent\"],\"tags\":[\"angel\"]},{\"emoji\":\"🙂\",\"description\":\"slightly smiling face\",\"category\":\"People\",\"aliases\":[\"slightly_smiling_face\"],\"tags\":[]},{\"emoji\":\"🙃\",\"description\":\"upside-down face\",\"category\":\"People\",\"aliases\":[\"upside_down_face\"],\"tags\":[]},{\"emoji\":\"😉\",\"description\":\"winking face\",\"category\":\"People\",\"aliases\":[\"wink\"],\"tags\":[\"flirt\"]},{\"emoji\":\"😌\",\"description\":\"relieved face\",\"category\":\"People\",\"aliases\":[\"relieved\"],\"tags\":[\"whew\"]},{\"emoji\":\"😍\",\"description\":\"smiling face with heart-eyes\",\"category\":\"People\",\"aliases\":[\"heart_eyes\"],\"tags\":[\"love\",\"crush\"]},{\"emoji\":\"😘\",\"description\":\"face blowing a kiss\",\"category\":\"People\",\"aliases\":[\"kissing_heart\"],\"tags\":[\"flirt\"]},{\"emoji\":\"😗\",\"description\":\"kissing face\",\"category\":\"People\",\"aliases\":[\"kissing\"],\"tags\":[]},{\"emoji\":\"😙\",\"description\":\"kissing face with smiling eyes\",\"category\":\"People\",\"aliases\":[\"kissing_smiling_eyes\"],\"tags\":[]},{\"emoji\":\"😚\",\"description\":\"kissing face with closed eyes\",\"category\":\"People\",\"aliases\":[\"kissing_closed_eyes\"],\"tags\":[]},{\"emoji\":\"😋\",\"description\":\"face savouring delicious food\",\"category\":\"People\",\"aliases\":[\"yum\"],\"tags\":[\"tongue\",\"lick\"]},{\"emoji\":\"😜\",\"description\":\"face with stuck-out tongue & winking eye\",\"category\":\"People\",\"aliases\":[\"stuck_out_tongue_winking_eye\"],\"tags\":[\"prank\",\"silly\"]},{\"emoji\":\"😝\",\"description\":\"face with stuck-out tongue & closed eyes\",\"category\":\"People\",\"aliases\":[\"stuck_out_tongue_closed_eyes\"],\"tags\":[\"prank\"]},{\"emoji\":\"😛\",\"description\":\"face with stuck-out tongue\",\"category\":\"People\",\"aliases\":[\"stuck_out_tongue\"],\"tags\":[]},{\"emoji\":\"🤑\",\"description\":\"money-mouth face\",\"category\":\"People\",\"aliases\":[\"money_mouth_face\"],\"tags\":[\"rich\"]},{\"emoji\":\"🤗\",\"description\":\"hugging face\",\"category\":\"People\",\"aliases\":[\"hugs\"],\"tags\":[]},{\"emoji\":\"🤓\",\"description\":\"nerd face\",\"category\":\"People\",\"aliases\":[\"nerd_face\"],\"tags\":[\"geek\",\"glasses\"]},{\"emoji\":\"😎\",\"description\":\"smiling face with sunglasses\",\"category\":\"People\",\"aliases\":[\"sunglasses\"],\"tags\":[\"cool\"]},{\"emoji\":\"🤡\",\"description\":\"clown face\",\"category\":\"People\",\"aliases\":[\"clown_face\"],\"tags\":[]},{\"emoji\":\"🤠\",\"description\":\"cowboy hat face\",\"category\":\"People\",\"aliases\":[\"cowboy_hat_face\"],\"tags\":[]},{\"emoji\":\"😏\",\"description\":\"smirking face\",\"category\":\"People\",\"aliases\":[\"smirk\"],\"tags\":[\"smug\"]},{\"emoji\":\"😒\",\"description\":\"unamused face\",\"category\":\"People\",\"aliases\":[\"unamused\"],\"tags\":[\"meh\"]},{\"emoji\":\"😞\",\"description\":\"disappointed face\",\"category\":\"People\",\"aliases\":[\"disappointed\"],\"tags\":[\"sad\"]},{\"emoji\":\"😔\",\"description\":\"pensive face\",\"category\":\"People\",\"aliases\":[\"pensive\"],\"tags\":[]},{\"emoji\":\"😟\",\"description\":\"worried face\",\"category\":\"People\",\"aliases\":[\"worried\"],\"tags\":[\"nervous\"]},{\"emoji\":\"😕\",\"description\":\"confused face\",\"category\":\"People\",\"aliases\":[\"confused\"],\"tags\":[]},{\"emoji\":\"🙁\",\"description\":\"slightly frowning face\",\"category\":\"People\",\"aliases\":[\"slightly_frowning_face\"],\"tags\":[]},{\"emoji\":\"☹️\",\"description\":\"frowning face\",\"category\":\"People\",\"aliases\":[\"frowning_face\"],\"tags\":[]},{\"emoji\":\"😣\",\"description\":\"persevering face\",\"category\":\"People\",\"aliases\":[\"persevere\"],\"tags\":[\"struggling\"]},{\"emoji\":\"😖\",\"description\":\"confounded face\",\"category\":\"People\",\"aliases\":[\"confounded\"],\"tags\":[]},{\"emoji\":\"😫\",\"description\":\"tired face\",\"category\":\"People\",\"aliases\":[\"tired_face\"],\"tags\":[\"upset\",\"whine\"]},{\"emoji\":\"😩\",\"description\":\"weary face\",\"category\":\"People\",\"aliases\":[\"weary\"],\"tags\":[\"tired\"]},{\"emoji\":\"😤\",\"description\":\"face with steam from nose\",\"category\":\"People\",\"aliases\":[\"triumph\"],\"tags\":[\"smug\"]},{\"emoji\":\"😠\",\"description\":\"angry face\",\"category\":\"People\",\"aliases\":[\"angry\"],\"tags\":[\"mad\",\"annoyed\"]},{\"emoji\":\"😡\",\"description\":\"pouting face\",\"category\":\"People\",\"aliases\":[\"rage\",\"pout\"],\"tags\":[\"angry\"]},{\"emoji\":\"😶\",\"description\":\"face without mouth\",\"category\":\"People\",\"aliases\":[\"no_mouth\"],\"tags\":[\"mute\",\"silence\"]},{\"emoji\":\"😐\",\"description\":\"neutral face\",\"category\":\"People\",\"aliases\":[\"neutral_face\"],\"tags\":[\"meh\"]},{\"emoji\":\"😑\",\"description\":\"expressionless face\",\"category\":\"People\",\"aliases\":[\"expressionless\"],\"tags\":[]},{\"emoji\":\"😯\",\"description\":\"hushed face\",\"category\":\"People\",\"aliases\":[\"hushed\"],\"tags\":[\"silence\",\"speechless\"]},{\"emoji\":\"😦\",\"description\":\"frowning face with open mouth\",\"category\":\"People\",\"aliases\":[\"frowning\"],\"tags\":[]},{\"emoji\":\"😧\",\"description\":\"anguished face\",\"category\":\"People\",\"aliases\":[\"anguished\"],\"tags\":[\"stunned\"]},{\"emoji\":\"😮\",\"description\":\"face with open mouth\",\"category\":\"People\",\"aliases\":[\"open_mouth\"],\"tags\":[\"surprise\",\"impressed\",\"wow\"]},{\"emoji\":\"😲\",\"description\":\"astonished face\",\"category\":\"People\",\"aliases\":[\"astonished\"],\"tags\":[\"amazed\",\"gasp\"]},{\"emoji\":\"😵\",\"description\":\"dizzy face\",\"category\":\"People\",\"aliases\":[\"dizzy_face\"],\"tags\":[]},{\"emoji\":\"😳\",\"description\":\"flushed face\",\"category\":\"People\",\"aliases\":[\"flushed\"],\"tags\":[]},{\"emoji\":\"😱\",\"description\":\"face screaming in fear\",\"category\":\"People\",\"aliases\":[\"scream\"],\"tags\":[\"horror\",\"shocked\"]},{\"emoji\":\"😨\",\"description\":\"fearful face\",\"category\":\"People\",\"aliases\":[\"fearful\"],\"tags\":[\"scared\",\"shocked\",\"oops\"]},{\"emoji\":\"😰\",\"description\":\"face with open mouth & cold sweat\",\"category\":\"People\",\"aliases\":[\"cold_sweat\"],\"tags\":[\"nervous\"]},{\"emoji\":\"😢\",\"description\":\"crying face\",\"category\":\"People\",\"aliases\":[\"cry\"],\"tags\":[\"sad\",\"tear\"]},{\"emoji\":\"😥\",\"description\":\"disappointed but relieved face\",\"category\":\"People\",\"aliases\":[\"disappointed_relieved\"],\"tags\":[\"phew\",\"sweat\",\"nervous\"]},{\"emoji\":\"🤤\",\"description\":\"drooling face\",\"category\":\"People\",\"aliases\":[\"drooling_face\"],\"tags\":[]},{\"emoji\":\"😭\",\"description\":\"loudly crying face\",\"category\":\"People\",\"aliases\":[\"sob\"],\"tags\":[\"sad\",\"cry\",\"bawling\"]},{\"emoji\":\"😓\",\"description\":\"face with cold sweat\",\"category\":\"People\",\"aliases\":[\"sweat\"],\"tags\":[]},{\"emoji\":\"😪\",\"description\":\"sleepy face\",\"category\":\"People\",\"aliases\":[\"sleepy\"],\"tags\":[\"tired\"]},{\"emoji\":\"😴\",\"description\":\"sleeping face\",\"category\":\"People\",\"aliases\":[\"sleeping\"],\"tags\":[\"zzz\"]},{\"emoji\":\"🙄\",\"description\":\"face with rolling eyes\",\"category\":\"People\",\"aliases\":[\"roll_eyes\"],\"tags\":[]},{\"emoji\":\"🤔\",\"description\":\"thinking face\",\"category\":\"People\",\"aliases\":[\"thinking\"],\"tags\":[]},{\"emoji\":\"🤥\",\"description\":\"lying face\",\"category\":\"People\",\"aliases\":[\"lying_face\"],\"tags\":[\"liar\"]},{\"emoji\":\"😬\",\"description\":\"grimacing face\",\"category\":\"People\",\"aliases\":[\"grimacing\"],\"tags\":[]},{\"emoji\":\"🤐\",\"description\":\"zipper-mouth face\",\"category\":\"People\",\"aliases\":[\"zipper_mouth_face\"],\"tags\":[\"silence\",\"hush\"]},{\"emoji\":\"🤢\",\"description\":\"nauseated face\",\"category\":\"People\",\"aliases\":[\"nauseated_face\"],\"tags\":[\"sick\",\"barf\",\"disgusted\"]},{\"emoji\":\"🤧\",\"description\":\"sneezing face\",\"category\":\"People\",\"aliases\":[\"sneezing_face\"],\"tags\":[\"achoo\",\"sick\"]},{\"emoji\":\"😷\",\"description\":\"face with medical mask\",\"category\":\"People\",\"aliases\":[\"mask\"],\"tags\":[\"sick\",\"ill\"]},{\"emoji\":\"🤒\",\"description\":\"face with thermometer\",\"category\":\"People\",\"aliases\":[\"face_with_thermometer\"],\"tags\":[\"sick\"]},{\"emoji\":\"🤕\",\"description\":\"face with head-bandage\",\"category\":\"People\",\"aliases\":[\"face_with_head_bandage\"],\"tags\":[\"hurt\"]},{\"emoji\":\"😈\",\"description\":\"smiling face with horns\",\"category\":\"People\",\"aliases\":[\"smiling_imp\"],\"tags\":[\"devil\",\"evil\",\"horns\"]},{\"emoji\":\"👿\",\"description\":\"angry face with horns\",\"category\":\"People\",\"aliases\":[\"imp\"],\"tags\":[\"angry\",\"devil\",\"evil\",\"horns\"]},{\"emoji\":\"👹\",\"description\":\"ogre\",\"category\":\"People\",\"aliases\":[\"japanese_ogre\"],\"tags\":[\"monster\"]},{\"emoji\":\"👺\",\"description\":\"goblin\",\"category\":\"People\",\"aliases\":[\"japanese_goblin\"],\"tags\":[]},{\"emoji\":\"💩\",\"description\":\"pile of poo\",\"category\":\"People\",\"aliases\":[\"hankey\",\"poop\",\"shit\"],\"tags\":[\"crap\"]},{\"emoji\":\"👻\",\"description\":\"ghost\",\"category\":\"People\",\"aliases\":[\"ghost\"],\"tags\":[\"halloween\"]},{\"emoji\":\"💀\",\"description\":\"skull\",\"category\":\"People\",\"aliases\":[\"skull\"],\"tags\":[\"dead\",\"danger\",\"poison\"]},{\"emoji\":\"☠️\",\"description\":\"skull and crossbones\",\"category\":\"People\",\"aliases\":[\"skull_and_crossbones\"],\"tags\":[\"danger\",\"pirate\"]},{\"emoji\":\"👽\",\"description\":\"alien\",\"category\":\"People\",\"aliases\":[\"alien\"],\"tags\":[\"ufo\"]},{\"emoji\":\"👾\",\"description\":\"alien monster\",\"category\":\"People\",\"aliases\":[\"space_invader\"],\"tags\":[\"game\",\"retro\"]},{\"emoji\":\"🤖\",\"description\":\"robot face\",\"category\":\"People\",\"aliases\":[\"robot\"],\"tags\":[]},{\"emoji\":\"🎃\",\"description\":\"jack-o-lantern\",\"category\":\"People\",\"aliases\":[\"jack_o_lantern\"],\"tags\":[\"halloween\"]},{\"emoji\":\"😺\",\"description\":\"smiling cat face with open mouth\",\"category\":\"People\",\"aliases\":[\"smiley_cat\"],\"tags\":[]},{\"emoji\":\"😸\",\"description\":\"grinning cat face with smiling eyes\",\"category\":\"People\",\"aliases\":[\"smile_cat\"],\"tags\":[]},{\"emoji\":\"😹\",\"description\":\"cat face with tears of joy\",\"category\":\"People\",\"aliases\":[\"joy_cat\"],\"tags\":[]},{\"emoji\":\"😻\",\"description\":\"smiling cat face with heart-eyes\",\"category\":\"People\",\"aliases\":[\"heart_eyes_cat\"],\"tags\":[]},{\"emoji\":\"😼\",\"description\":\"cat face with wry smile\",\"category\":\"People\",\"aliases\":[\"smirk_cat\"],\"tags\":[]},{\"emoji\":\"😽\",\"description\":\"kissing cat face with closed eyes\",\"category\":\"People\",\"aliases\":[\"kissing_cat\"],\"tags\":[]},{\"emoji\":\"🙀\",\"description\":\"weary cat face\",\"category\":\"People\",\"aliases\":[\"scream_cat\"],\"tags\":[\"horror\"]},{\"emoji\":\"😿\",\"description\":\"crying cat face\",\"category\":\"People\",\"aliases\":[\"crying_cat_face\"],\"tags\":[\"sad\",\"tear\"]},{\"emoji\":\"😾\",\"description\":\"pouting cat face\",\"category\":\"People\",\"aliases\":[\"pouting_cat\"],\"tags\":[]},{\"emoji\":\"👐\",\"description\":\"open hands\",\"category\":\"People\",\"aliases\":[\"open_hands\"],\"tags\":[]},{\"emoji\":\"🙌\",\"description\":\"raising hands\",\"category\":\"People\",\"aliases\":[\"raised_hands\"],\"tags\":[\"hooray\"]},{\"emoji\":\"👏\",\"description\":\"clapping hands\",\"category\":\"People\",\"aliases\":[\"clap\"],\"tags\":[\"praise\",\"applause\"]},{\"emoji\":\"🙏\",\"description\":\"folded hands\",\"category\":\"People\",\"aliases\":[\"pray\"],\"tags\":[\"please\",\"hope\",\"wish\"]},{\"emoji\":\"🤝\",\"description\":\"handshake\",\"category\":\"People\",\"aliases\":[\"handshake\"],\"tags\":[\"deal\"]},{\"emoji\":\"👍\",\"description\":\"thumbs up\",\"category\":\"People\",\"aliases\":[\"+1\",\"thumbsup\"],\"tags\":[\"approve\",\"ok\"]},{\"emoji\":\"👎\",\"description\":\"thumbs down\",\"category\":\"People\",\"aliases\":[\"-1\",\"thumbsdown\"],\"tags\":[\"disapprove\",\"bury\"]},{\"emoji\":\"👊\",\"description\":\"oncoming fist\",\"category\":\"People\",\"aliases\":[\"fist_oncoming\",\"facepunch\",\"punch\"],\"tags\":[\"attack\"]},{\"emoji\":\"✊\",\"description\":\"raised fist\",\"category\":\"People\",\"aliases\":[\"fist_raised\",\"fist\"],\"tags\":[\"power\"]},{\"emoji\":\"🤛\",\"description\":\"left-facing fist\",\"category\":\"People\",\"aliases\":[\"fist_left\"],\"tags\":[]},{\"emoji\":\"🤜\",\"description\":\"right-facing fist\",\"category\":\"People\",\"aliases\":[\"fist_right\"],\"tags\":[]},{\"emoji\":\"🤞\",\"description\":\"crossed fingers\",\"category\":\"People\",\"aliases\":[\"crossed_fingers\"],\"tags\":[\"luck\",\"hopeful\"]},{\"emoji\":\"✌️\",\"description\":\"victory hand\",\"category\":\"People\",\"aliases\":[\"v\"],\"tags\":[\"victory\",\"peace\"]},{\"emoji\":\"🤘\",\"description\":\"sign of the horns\",\"category\":\"People\",\"aliases\":[\"metal\"],\"tags\":[]},{\"emoji\":\"👌\",\"description\":\"OK hand\",\"category\":\"People\",\"aliases\":[\"ok_hand\"],\"tags\":[]},{\"emoji\":\"👈\",\"description\":\"backhand index pointing left\",\"category\":\"People\",\"aliases\":[\"point_left\"],\"tags\":[]},{\"emoji\":\"👉\",\"description\":\"backhand index pointing right\",\"category\":\"People\",\"aliases\":[\"point_right\"],\"tags\":[]},{\"emoji\":\"👆\",\"description\":\"backhand index pointing up\",\"category\":\"People\",\"aliases\":[\"point_up_2\"],\"tags\":[]},{\"emoji\":\"👇\",\"description\":\"backhand index pointing down\",\"category\":\"People\",\"aliases\":[\"point_down\"],\"tags\":[]},{\"emoji\":\"☝️\",\"description\":\"index pointing up\",\"category\":\"People\",\"aliases\":[\"point_up\"],\"tags\":[]},{\"emoji\":\"✋\",\"description\":\"raised hand\",\"category\":\"People\",\"aliases\":[\"hand\",\"raised_hand\"],\"tags\":[\"highfive\",\"stop\"]},{\"emoji\":\"🤚\",\"description\":\"raised back of hand\",\"category\":\"People\",\"aliases\":[\"raised_back_of_hand\"],\"tags\":[]},{\"emoji\":\"🖐\",\"description\":\"raised hand with fingers splayed\",\"category\":\"People\",\"aliases\":[\"raised_hand_with_fingers_splayed\"],\"tags\":[]},{\"emoji\":\"🖖\",\"description\":\"vulcan salute\",\"category\":\"People\",\"aliases\":[\"vulcan_salute\"],\"tags\":[\"prosper\",\"spock\"]},{\"emoji\":\"👋\",\"description\":\"waving hand\",\"category\":\"People\",\"aliases\":[\"wave\"],\"tags\":[\"goodbye\"]},{\"emoji\":\"🤙\",\"description\":\"call me hand\",\"category\":\"People\",\"aliases\":[\"call_me_hand\"],\"tags\":[]},{\"emoji\":\"💪\",\"description\":\"flexed biceps\",\"category\":\"People\",\"aliases\":[\"muscle\"],\"tags\":[\"flex\",\"bicep\",\"strong\",\"workout\"]},{\"emoji\":\"🖕\",\"description\":\"middle finger\",\"category\":\"People\",\"aliases\":[\"middle_finger\",\"fu\"],\"tags\":[]},{\"emoji\":\"✍️\",\"description\":\"writing hand\",\"category\":\"People\",\"aliases\":[\"writing_hand\"],\"tags\":[]},{\"emoji\":\"🤳\",\"description\":\"selfie\",\"category\":\"People\",\"aliases\":[\"selfie\"],\"tags\":[]},{\"emoji\":\"💅\",\"description\":\"nail polish\",\"category\":\"People\",\"aliases\":[\"nail_care\"],\"tags\":[\"beauty\",\"manicure\"]},{\"emoji\":\"💍\",\"description\":\"ring\",\"category\":\"People\",\"aliases\":[\"ring\"],\"tags\":[\"wedding\",\"marriage\",\"engaged\"]},{\"emoji\":\"💄\",\"description\":\"lipstick\",\"category\":\"People\",\"aliases\":[\"lipstick\"],\"tags\":[\"makeup\"]},{\"emoji\":\"💋\",\"description\":\"kiss mark\",\"category\":\"People\",\"aliases\":[\"kiss\"],\"tags\":[\"lipstick\"]},{\"emoji\":\"👄\",\"description\":\"mouth\",\"category\":\"People\",\"aliases\":[\"lips\"],\"tags\":[\"kiss\"]},{\"emoji\":\"👅\",\"description\":\"tongue\",\"category\":\"People\",\"aliases\":[\"tongue\"],\"tags\":[\"taste\"]},{\"emoji\":\"👂\",\"description\":\"ear\",\"category\":\"People\",\"aliases\":[\"ear\"],\"tags\":[\"hear\",\"sound\",\"listen\"]},{\"emoji\":\"👃\",\"description\":\"nose\",\"category\":\"People\",\"aliases\":[\"nose\"],\"tags\":[\"smell\"]},{\"emoji\":\"👣\",\"description\":\"footprints\",\"category\":\"People\",\"aliases\":[\"footprints\"],\"tags\":[\"feet\",\"tracks\"]},{\"emoji\":\"👁\",\"description\":\"eye\",\"category\":\"People\",\"aliases\":[\"eye\"],\"tags\":[]},{\"emoji\":\"👀\",\"description\":\"eyes\",\"category\":\"People\",\"aliases\":[\"eyes\"],\"tags\":[\"look\",\"see\",\"watch\"]},{\"emoji\":\"🗣\",\"description\":\"speaking head\",\"category\":\"People\",\"aliases\":[\"speaking_head\"],\"tags\":[]},{\"emoji\":\"👤\",\"description\":\"bust in silhouette\",\"category\":\"People\",\"aliases\":[\"bust_in_silhouette\"],\"tags\":[\"user\"]},{\"emoji\":\"👥\",\"description\":\"busts in silhouette\",\"category\":\"People\",\"aliases\":[\"busts_in_silhouette\"],\"tags\":[\"users\",\"group\",\"team\"]},{\"emoji\":\"👶\",\"description\":\"baby\",\"category\":\"People\",\"aliases\":[\"baby\"],\"tags\":[\"child\",\"newborn\"]},{\"emoji\":\"👦\",\"description\":\"boy\",\"category\":\"People\",\"aliases\":[\"boy\"],\"tags\":[\"child\"]},{\"emoji\":\"👧\",\"description\":\"girl\",\"category\":\"People\",\"aliases\":[\"girl\"],\"tags\":[\"child\"]},{\"emoji\":\"👨\",\"description\":\"man\",\"category\":\"People\",\"aliases\":[\"man\"],\"tags\":[\"mustache\",\"father\",\"dad\"]},{\"emoji\":\"👩\",\"description\":\"woman\",\"category\":\"People\",\"aliases\":[\"woman\"],\"tags\":[\"girls\"]},{\"emoji\":\"👱‍♀\",\"description\":\"blond-haired woman\",\"category\":\"People\",\"aliases\":[\"blonde_woman\"],\"tags\":[]},{\"emoji\":\"👱\",\"description\":\"blond-haired person\",\"category\":\"People\",\"aliases\":[\"blonde_man\",\"person_with_blond_hair\"],\"tags\":[\"boy\"]},{\"emoji\":\"👴\",\"description\":\"old man\",\"category\":\"People\",\"aliases\":[\"older_man\"],\"tags\":[]},{\"emoji\":\"👵\",\"description\":\"old woman\",\"category\":\"People\",\"aliases\":[\"older_woman\"],\"tags\":[]},{\"emoji\":\"👲\",\"description\":\"man with Chinese cap\",\"category\":\"People\",\"aliases\":[\"man_with_gua_pi_mao\"],\"tags\":[]},{\"emoji\":\"👳‍♀\",\"description\":\"woman wearing turban\",\"category\":\"People\",\"aliases\":[\"woman_with_turban\"],\"tags\":[]},{\"emoji\":\"👳\",\"description\":\"person wearing turban\",\"category\":\"People\",\"aliases\":[\"man_with_turban\"],\"tags\":[]},{\"emoji\":\"👮‍♀\",\"description\":\"woman police officer\",\"category\":\"People\",\"aliases\":[\"policewoman\"],\"tags\":[\"police\",\"law\",\"cop\"]},{\"emoji\":\"👮\",\"description\":\"police officer\",\"category\":\"People\",\"aliases\":[\"policeman\",\"cop\"],\"tags\":[\"police\",\"law\"]},{\"emoji\":\"👷‍♀\",\"description\":\"woman construction worker\",\"category\":\"People\",\"aliases\":[\"construction_worker_woman\"],\"tags\":[]},{\"emoji\":\"👷\",\"description\":\"construction worker\",\"category\":\"People\",\"aliases\":[\"construction_worker_man\",\"construction_worker\"],\"tags\":[\"helmet\"]},{\"emoji\":\"💂‍♀\",\"description\":\"woman guard\",\"category\":\"People\",\"aliases\":[\"guardswoman\"],\"tags\":[]},{\"emoji\":\"💂\",\"description\":\"guard\",\"category\":\"People\",\"aliases\":[\"guardsman\"],\"tags\":[]},{\"emoji\":\"🕵️‍♀️\",\"description\":\"woman detective\",\"category\":\"People\",\"aliases\":[\"female_detective\"],\"tags\":[\"sleuth\"]},{\"emoji\":\"🕵\",\"description\":\"detective\",\"category\":\"People\",\"aliases\":[\"male_detective\",\"detective\"],\"tags\":[\"sleuth\"]},{\"emoji\":\"👩‍⚕\",\"description\":\"woman health worker\",\"category\":\"People\",\"aliases\":[\"woman_health_worker\"],\"tags\":[\"doctor\",\"nurse\"]},{\"emoji\":\"👨‍⚕\",\"description\":\"man health worker\",\"category\":\"People\",\"aliases\":[\"man_health_worker\"],\"tags\":[\"doctor\",\"nurse\"]},{\"emoji\":\"👩‍🌾\",\"description\":\"woman farmer\",\"category\":\"People\",\"aliases\":[\"woman_farmer\"],\"tags\":[]},{\"emoji\":\"👨‍🌾\",\"description\":\"man farmer\",\"category\":\"People\",\"aliases\":[\"man_farmer\"],\"tags\":[]},{\"emoji\":\"👩‍🍳\",\"description\":\"woman cook\",\"category\":\"People\",\"aliases\":[\"woman_cook\"],\"tags\":[\"chef\"]},{\"emoji\":\"👨‍🍳\",\"description\":\"man cook\",\"category\":\"People\",\"aliases\":[\"man_cook\"],\"tags\":[\"chef\"]},{\"emoji\":\"👩‍🎓\",\"description\":\"woman student\",\"category\":\"People\",\"aliases\":[\"woman_student\"],\"tags\":[\"graduation\"]},{\"emoji\":\"👨‍🎓\",\"description\":\"man student\",\"category\":\"People\",\"aliases\":[\"man_student\"],\"tags\":[\"graduation\"]},{\"emoji\":\"👩‍🎤\",\"description\":\"woman singer\",\"category\":\"People\",\"aliases\":[\"woman_singer\"],\"tags\":[\"rockstar\"]},{\"emoji\":\"👨‍🎤\",\"description\":\"man singer\",\"category\":\"People\",\"aliases\":[\"man_singer\"],\"tags\":[\"rockstar\"]},{\"emoji\":\"👩‍🏫\",\"description\":\"woman teacher\",\"category\":\"People\",\"aliases\":[\"woman_teacher\"],\"tags\":[\"school\",\"professor\"]},{\"emoji\":\"👨‍🏫\",\"description\":\"man teacher\",\"category\":\"People\",\"aliases\":[\"man_teacher\"],\"tags\":[\"school\",\"professor\"]},{\"emoji\":\"👩‍🏭\",\"description\":\"woman factory worker\",\"category\":\"People\",\"aliases\":[\"woman_factory_worker\"],\"tags\":[]},{\"emoji\":\"👨‍🏭\",\"description\":\"man factory worker\",\"category\":\"People\",\"aliases\":[\"man_factory_worker\"],\"tags\":[]},{\"emoji\":\"👩‍💻\",\"description\":\"woman technologist\",\"category\":\"People\",\"aliases\":[\"woman_technologist\"],\"tags\":[\"coder\"]},{\"emoji\":\"👨‍💻\",\"description\":\"man technologist\",\"category\":\"People\",\"aliases\":[\"man_technologist\"],\"tags\":[\"coder\"]},{\"emoji\":\"👩‍💼\",\"description\":\"woman office worker\",\"category\":\"People\",\"aliases\":[\"woman_office_worker\"],\"tags\":[\"business\"]},{\"emoji\":\"👨‍💼\",\"description\":\"man office worker\",\"category\":\"People\",\"aliases\":[\"man_office_worker\"],\"tags\":[\"business\"]},{\"emoji\":\"👩‍🔧\",\"description\":\"woman mechanic\",\"category\":\"People\",\"aliases\":[\"woman_mechanic\"],\"tags\":[]},{\"emoji\":\"👨‍🔧\",\"description\":\"man mechanic\",\"category\":\"People\",\"aliases\":[\"man_mechanic\"],\"tags\":[]},{\"emoji\":\"👩‍🔬\",\"description\":\"woman scientist\",\"category\":\"People\",\"aliases\":[\"woman_scientist\"],\"tags\":[\"research\"]},{\"emoji\":\"👨‍🔬\",\"description\":\"man scientist\",\"category\":\"People\",\"aliases\":[\"man_scientist\"],\"tags\":[\"research\"]},{\"emoji\":\"👩‍🎨\",\"description\":\"woman artist\",\"category\":\"People\",\"aliases\":[\"woman_artist\"],\"tags\":[\"painter\"]},{\"emoji\":\"👨‍🎨\",\"description\":\"man artist\",\"category\":\"People\",\"aliases\":[\"man_artist\"],\"tags\":[\"painter\"]},{\"emoji\":\"👩‍🚒\",\"description\":\"woman firefighter\",\"category\":\"People\",\"aliases\":[\"woman_firefighter\"],\"tags\":[]},{\"emoji\":\"👨‍🚒\",\"description\":\"man firefighter\",\"category\":\"People\",\"aliases\":[\"man_firefighter\"],\"tags\":[]},{\"emoji\":\"👩‍✈️\",\"description\":\"woman pilot\",\"category\":\"People\",\"aliases\":[\"woman_pilot\"],\"tags\":[]},{\"emoji\":\"👨‍✈️\",\"description\":\"man pilot\",\"category\":\"People\",\"aliases\":[\"man_pilot\"],\"tags\":[]},{\"emoji\":\"👩‍🚀\",\"description\":\"woman astronaut\",\"category\":\"People\",\"aliases\":[\"woman_astronaut\"],\"tags\":[\"space\"]},{\"emoji\":\"👨‍🚀\",\"description\":\"man astronaut\",\"category\":\"People\",\"aliases\":[\"man_astronaut\"],\"tags\":[\"space\"]},{\"emoji\":\"👩‍⚖️\",\"description\":\"woman judge\",\"category\":\"People\",\"aliases\":[\"woman_judge\"],\"tags\":[\"justice\"]},{\"emoji\":\"👨‍⚖️\",\"description\":\"man judge\",\"category\":\"People\",\"aliases\":[\"man_judge\"],\"tags\":[\"justice\"]},{\"emoji\":\"🤶\",\"description\":\"Mrs. Claus\",\"category\":\"People\",\"aliases\":[\"mrs_claus\"],\"tags\":[\"santa\"]},{\"emoji\":\"🎅\",\"description\":\"Santa Claus\",\"category\":\"People\",\"aliases\":[\"santa\"],\"tags\":[\"christmas\"]},{\"emoji\":\"👸\",\"description\":\"princess\",\"category\":\"People\",\"aliases\":[\"princess\"],\"tags\":[\"blonde\",\"crown\",\"royal\"]},{\"emoji\":\"🤴\",\"description\":\"prince\",\"category\":\"People\",\"aliases\":[\"prince\"],\"tags\":[\"crown\",\"royal\"]},{\"emoji\":\"👰\",\"description\":\"bride with veil\",\"category\":\"People\",\"aliases\":[\"bride_with_veil\"],\"tags\":[\"marriage\",\"wedding\"]},{\"emoji\":\"🤵\",\"description\":\"man in tuxedo\",\"category\":\"People\",\"aliases\":[\"man_in_tuxedo\"],\"tags\":[\"groom\",\"marriage\",\"wedding\"]},{\"emoji\":\"👼\",\"description\":\"baby angel\",\"category\":\"People\",\"aliases\":[\"angel\"],\"tags\":[]},{\"emoji\":\"🤰\",\"description\":\"pregnant woman\",\"category\":\"People\",\"aliases\":[\"pregnant_woman\"],\"tags\":[]},{\"emoji\":\"🙇‍♀\",\"description\":\"woman bowing\",\"category\":\"People\",\"aliases\":[\"bowing_woman\"],\"tags\":[\"respect\",\"thanks\"]},{\"emoji\":\"🙇\",\"description\":\"person bowing\",\"category\":\"People\",\"aliases\":[\"bowing_man\",\"bow\"],\"tags\":[\"respect\",\"thanks\"]},{\"emoji\":\"💁\",\"description\":\"person tipping hand\",\"category\":\"People\",\"aliases\":[\"tipping_hand_woman\",\"information_desk_person\",\"sassy_woman\"],\"tags\":[]},{\"emoji\":\"💁‍♂\",\"description\":\"man tipping hand\",\"category\":\"People\",\"aliases\":[\"tipping_hand_man\",\"sassy_man\"],\"tags\":[\"information\"]},{\"emoji\":\"🙅\",\"description\":\"person gesturing NO\",\"category\":\"People\",\"aliases\":[\"no_good_woman\",\"no_good\",\"ng_woman\"],\"tags\":[\"stop\",\"halt\"]},{\"emoji\":\"🙅‍♂\",\"description\":\"man gesturing NO\",\"category\":\"People\",\"aliases\":[\"no_good_man\",\"ng_man\"],\"tags\":[\"stop\",\"halt\"]},{\"emoji\":\"🙆\",\"description\":\"person gesturing OK\",\"category\":\"People\",\"aliases\":[\"ok_woman\"],\"tags\":[]},{\"emoji\":\"🙆‍♂\",\"description\":\"man gesturing OK\",\"category\":\"People\",\"aliases\":[\"ok_man\"],\"tags\":[]},{\"emoji\":\"🙋\",\"description\":\"person raising hand\",\"category\":\"People\",\"aliases\":[\"raising_hand_woman\",\"raising_hand\"],\"tags\":[]},{\"emoji\":\"🙋‍♂\",\"description\":\"man raising hand\",\"category\":\"People\",\"aliases\":[\"raising_hand_man\"],\"tags\":[]},{\"emoji\":\"🤦‍♀\",\"description\":\"woman facepalming\",\"category\":\"People\",\"aliases\":[\"woman_facepalming\"],\"tags\":[]},{\"emoji\":\"🤦‍♂\",\"description\":\"man facepalming\",\"category\":\"People\",\"aliases\":[\"man_facepalming\"],\"tags\":[]},{\"emoji\":\"🤷‍♀\",\"description\":\"woman shrugging\",\"category\":\"People\",\"aliases\":[\"woman_shrugging\"],\"tags\":[]},{\"emoji\":\"🤷‍♂\",\"description\":\"man shrugging\",\"category\":\"People\",\"aliases\":[\"man_shrugging\"],\"tags\":[]},{\"emoji\":\"🙎\",\"description\":\"person pouting\",\"category\":\"People\",\"aliases\":[\"pouting_woman\",\"person_with_pouting_face\"],\"tags\":[]},{\"emoji\":\"🙎‍♂\",\"description\":\"man pouting\",\"category\":\"People\",\"aliases\":[\"pouting_man\"],\"tags\":[]},{\"emoji\":\"🙍\",\"description\":\"person frowning\",\"category\":\"People\",\"aliases\":[\"frowning_woman\",\"person_frowning\"],\"tags\":[\"sad\"]},{\"emoji\":\"🙍‍♂\",\"description\":\"man frowning\",\"category\":\"People\",\"aliases\":[\"frowning_man\"],\"tags\":[]},{\"emoji\":\"💇\",\"description\":\"person getting haircut\",\"category\":\"People\",\"aliases\":[\"haircut_woman\",\"haircut\"],\"tags\":[\"beauty\"]},{\"emoji\":\"💇‍♂\",\"description\":\"man getting haircut\",\"category\":\"People\",\"aliases\":[\"haircut_man\"],\"tags\":[]},{\"emoji\":\"💆\",\"description\":\"person getting massage\",\"category\":\"People\",\"aliases\":[\"massage_woman\",\"massage\"],\"tags\":[\"spa\"]},{\"emoji\":\"💆‍♂\",\"description\":\"man getting massage\",\"category\":\"People\",\"aliases\":[\"massage_man\"],\"tags\":[\"spa\"]},{\"emoji\":\"🕴\",\"description\":\"man in business suit levitating\",\"category\":\"People\",\"aliases\":[\"business_suit_levitating\"],\"tags\":[]},{\"emoji\":\"💃\",\"description\":\"woman dancing\",\"category\":\"People\",\"aliases\":[\"dancer\"],\"tags\":[\"dress\"]},{\"emoji\":\"🕺\",\"description\":\"man dancing\",\"category\":\"People\",\"aliases\":[\"man_dancing\"],\"tags\":[\"dancer\"]},{\"emoji\":\"👯\",\"description\":\"people with bunny ears partying\",\"category\":\"People\",\"aliases\":[\"dancing_women\",\"dancers\"],\"tags\":[\"bunny\"]},{\"emoji\":\"👯‍♂\",\"description\":\"men with bunny ears partying\",\"category\":\"People\",\"aliases\":[\"dancing_men\"],\"tags\":[\"bunny\"]},{\"emoji\":\"🚶‍♀\",\"description\":\"woman walking\",\"category\":\"People\",\"aliases\":[\"walking_woman\"],\"tags\":[]},{\"emoji\":\"🚶\",\"description\":\"person walking\",\"category\":\"People\",\"aliases\":[\"walking_man\",\"walking\"],\"tags\":[]},{\"emoji\":\"🏃‍♀\",\"description\":\"woman running\",\"category\":\"People\",\"aliases\":[\"running_woman\"],\"tags\":[\"exercise\",\"workout\",\"marathon\"]},{\"emoji\":\"🏃\",\"description\":\"person running\",\"category\":\"People\",\"aliases\":[\"running_man\",\"runner\",\"running\"],\"tags\":[\"exercise\",\"workout\",\"marathon\"]},{\"emoji\":\"👫\",\"description\":\"man and woman holding hands\",\"category\":\"People\",\"aliases\":[\"couple\"],\"tags\":[\"date\"]},{\"emoji\":\"👭\",\"description\":\"two women holding hands\",\"category\":\"People\",\"aliases\":[\"two_women_holding_hands\"],\"tags\":[\"couple\",\"date\"]},{\"emoji\":\"👬\",\"description\":\"two men holding hands\",\"category\":\"People\",\"aliases\":[\"two_men_holding_hands\"],\"tags\":[\"couple\",\"date\"]},{\"emoji\":\"💑\",\"description\":\"couple with heart\",\"category\":\"People\",\"aliases\":[\"couple_with_heart_woman_man\",\"couple_with_heart\"],\"tags\":[]},{\"emoji\":\"👩‍❤️‍👩\",\"description\":\"couple with heart: woman, woman\",\"category\":\"People\",\"aliases\":[\"couple_with_heart_woman_woman\"],\"tags\":[]},{\"emoji\":\"👨‍❤️‍👨\",\"description\":\"couple with heart: man, man\",\"category\":\"People\",\"aliases\":[\"couple_with_heart_man_man\"],\"tags\":[]},{\"emoji\":\"💏\",\"description\":\"kiss\",\"category\":\"People\",\"aliases\":[\"couplekiss_man_woman\"],\"tags\":[]},{\"emoji\":\"👩‍❤️‍💋‍👩\",\"description\":\"kiss: woman, woman\",\"category\":\"People\",\"aliases\":[\"couplekiss_woman_woman\"],\"tags\":[]},{\"emoji\":\"👨‍❤️‍💋‍👨\",\"description\":\"kiss: man, man\",\"category\":\"People\",\"aliases\":[\"couplekiss_man_man\"],\"tags\":[]},{\"emoji\":\"👪\",\"description\":\"family\",\"category\":\"People\",\"aliases\":[\"family_man_woman_boy\",\"family\"],\"tags\":[\"home\",\"parents\",\"child\"]},{\"emoji\":\"👨‍👩‍👧\",\"description\":\"family: man, woman, girl\",\"category\":\"People\",\"aliases\":[\"family_man_woman_girl\"],\"tags\":[]},{\"emoji\":\"👨‍👩‍👧‍👦\",\"description\":\"family: man, woman, girl, boy\",\"category\":\"People\",\"aliases\":[\"family_man_woman_girl_boy\"],\"tags\":[]},{\"emoji\":\"👨‍👩‍👦‍👦\",\"description\":\"family: man, woman, boy, boy\",\"category\":\"People\",\"aliases\":[\"family_man_woman_boy_boy\"],\"tags\":[]},{\"emoji\":\"👨‍👩‍👧‍👧\",\"description\":\"family: man, woman, girl, girl\",\"category\":\"People\",\"aliases\":[\"family_man_woman_girl_girl\"],\"tags\":[]},{\"emoji\":\"👩‍👩‍👦\",\"description\":\"family: woman, woman, boy\",\"category\":\"People\",\"aliases\":[\"family_woman_woman_boy\"],\"tags\":[]},{\"emoji\":\"👩‍👩‍👧\",\"description\":\"family: woman, woman, girl\",\"category\":\"People\",\"aliases\":[\"family_woman_woman_girl\"],\"tags\":[]},{\"emoji\":\"👩‍👩‍👧‍👦\",\"description\":\"family: woman, woman, girl, boy\",\"category\":\"People\",\"aliases\":[\"family_woman_woman_girl_boy\"],\"tags\":[]},{\"emoji\":\"👩‍👩‍👦‍👦\",\"description\":\"family: woman, woman, boy, boy\",\"category\":\"People\",\"aliases\":[\"family_woman_woman_boy_boy\"],\"tags\":[]},{\"emoji\":\"👩‍👩‍👧‍👧\",\"description\":\"family: woman, woman, girl, girl\",\"category\":\"People\",\"aliases\":[\"family_woman_woman_girl_girl\"],\"tags\":[]},{\"emoji\":\"👨‍👨‍👦\",\"description\":\"family: man, man, boy\",\"category\":\"People\",\"aliases\":[\"family_man_man_boy\"],\"tags\":[]},{\"emoji\":\"👨‍👨‍👧\",\"description\":\"family: man, man, girl\",\"category\":\"People\",\"aliases\":[\"family_man_man_girl\"],\"tags\":[]},{\"emoji\":\"👨‍👨‍👧‍👦\",\"description\":\"family: man, man, girl, boy\",\"category\":\"People\",\"aliases\":[\"family_man_man_girl_boy\"],\"tags\":[]},{\"emoji\":\"👨‍👨‍👦‍👦\",\"description\":\"family: man, man, boy, boy\",\"category\":\"People\",\"aliases\":[\"family_man_man_boy_boy\"],\"tags\":[]},{\"emoji\":\"👨‍👨‍👧‍👧\",\"description\":\"family: man, man, girl, girl\",\"category\":\"People\",\"aliases\":[\"family_man_man_girl_girl\"],\"tags\":[]},{\"emoji\":\"👩‍👦\",\"description\":\"family: woman, boy\",\"category\":\"People\",\"aliases\":[\"family_woman_boy\"],\"tags\":[]},{\"emoji\":\"👩‍👧\",\"description\":\"family: woman, girl\",\"category\":\"People\",\"aliases\":[\"family_woman_girl\"],\"tags\":[]},{\"emoji\":\"👩‍👧‍👦\",\"description\":\"family: woman, girl, boy\",\"category\":\"People\",\"aliases\":[\"family_woman_girl_boy\"],\"tags\":[]},{\"emoji\":\"👩‍👦‍👦\",\"description\":\"family: woman, boy, boy\",\"category\":\"People\",\"aliases\":[\"family_woman_boy_boy\"],\"tags\":[]},{\"emoji\":\"👩‍👧‍👧\",\"description\":\"family: woman, girl, girl\",\"category\":\"People\",\"aliases\":[\"family_woman_girl_girl\"],\"tags\":[]},{\"emoji\":\"👨‍👦\",\"description\":\"family: man, boy\",\"category\":\"People\",\"aliases\":[\"family_man_boy\"],\"tags\":[]},{\"emoji\":\"👨‍👧\",\"description\":\"family: man, girl\",\"category\":\"People\",\"aliases\":[\"family_man_girl\"],\"tags\":[]},{\"emoji\":\"👨‍👧‍👦\",\"description\":\"family: man, girl, boy\",\"category\":\"People\",\"aliases\":[\"family_man_girl_boy\"],\"tags\":[]},{\"emoji\":\"👨‍👦‍👦\",\"description\":\"family: man, boy, boy\",\"category\":\"People\",\"aliases\":[\"family_man_boy_boy\"],\"tags\":[]},{\"emoji\":\"👨‍👧‍👧\",\"description\":\"family: man, girl, girl\",\"category\":\"People\",\"aliases\":[\"family_man_girl_girl\"],\"tags\":[]},{\"emoji\":\"👚\",\"description\":\"woman’s clothes\",\"category\":\"People\",\"aliases\":[\"womans_clothes\"],\"tags\":[]},{\"emoji\":\"👕\",\"description\":\"t-shirt\",\"category\":\"People\",\"aliases\":[\"shirt\",\"tshirt\"],\"tags\":[]},{\"emoji\":\"👖\",\"description\":\"jeans\",\"category\":\"People\",\"aliases\":[\"jeans\"],\"tags\":[\"pants\"]},{\"emoji\":\"👔\",\"description\":\"necktie\",\"category\":\"People\",\"aliases\":[\"necktie\"],\"tags\":[\"shirt\",\"formal\"]},{\"emoji\":\"👗\",\"description\":\"dress\",\"category\":\"People\",\"aliases\":[\"dress\"],\"tags\":[]},{\"emoji\":\"👙\",\"description\":\"bikini\",\"category\":\"People\",\"aliases\":[\"bikini\"],\"tags\":[\"beach\"]},{\"emoji\":\"👘\",\"description\":\"kimono\",\"category\":\"People\",\"aliases\":[\"kimono\"],\"tags\":[]},{\"emoji\":\"👠\",\"description\":\"high-heeled shoe\",\"category\":\"People\",\"aliases\":[\"high_heel\"],\"tags\":[\"shoe\"]},{\"emoji\":\"👡\",\"description\":\"woman’s sandal\",\"category\":\"People\",\"aliases\":[\"sandal\"],\"tags\":[\"shoe\"]},{\"emoji\":\"👢\",\"description\":\"woman’s boot\",\"category\":\"People\",\"aliases\":[\"boot\"],\"tags\":[]},{\"emoji\":\"👞\",\"description\":\"man’s shoe\",\"category\":\"People\",\"aliases\":[\"mans_shoe\",\"shoe\"],\"tags\":[]},{\"emoji\":\"👟\",\"description\":\"running shoe\",\"category\":\"People\",\"aliases\":[\"athletic_shoe\"],\"tags\":[\"sneaker\",\"sport\",\"running\"]},{\"emoji\":\"👒\",\"description\":\"woman’s hat\",\"category\":\"People\",\"aliases\":[\"womans_hat\"],\"tags\":[]},{\"emoji\":\"🎩\",\"description\":\"top hat\",\"category\":\"People\",\"aliases\":[\"tophat\"],\"tags\":[\"hat\",\"classy\"]},{\"emoji\":\"🎓\",\"description\":\"graduation cap\",\"category\":\"People\",\"aliases\":[\"mortar_board\"],\"tags\":[\"education\",\"college\",\"university\",\"graduation\"]},{\"emoji\":\"👑\",\"description\":\"crown\",\"category\":\"People\",\"aliases\":[\"crown\"],\"tags\":[\"king\",\"queen\",\"royal\"]},{\"emoji\":\"⛑\",\"description\":\"rescue worker’s helmet\",\"category\":\"People\",\"aliases\":[\"rescue_worker_helmet\"],\"tags\":[]},{\"emoji\":\"🎒\",\"description\":\"school backpack\",\"category\":\"People\",\"aliases\":[\"school_satchel\"],\"tags\":[]},{\"emoji\":\"👝\",\"description\":\"clutch bag\",\"category\":\"People\",\"aliases\":[\"pouch\"],\"tags\":[\"bag\"]},{\"emoji\":\"👛\",\"description\":\"purse\",\"category\":\"People\",\"aliases\":[\"purse\"],\"tags\":[]},{\"emoji\":\"👜\",\"description\":\"handbag\",\"category\":\"People\",\"aliases\":[\"handbag\"],\"tags\":[\"bag\"]},{\"emoji\":\"💼\",\"description\":\"briefcase\",\"category\":\"People\",\"aliases\":[\"briefcase\"],\"tags\":[\"business\"]},{\"emoji\":\"👓\",\"description\":\"glasses\",\"category\":\"People\",\"aliases\":[\"eyeglasses\"],\"tags\":[\"glasses\"]},{\"emoji\":\"🕶\",\"description\":\"sunglasses\",\"category\":\"People\",\"aliases\":[\"dark_sunglasses\"],\"tags\":[]},{\"emoji\":\"🌂\",\"description\":\"closed umbrella\",\"category\":\"People\",\"aliases\":[\"closed_umbrella\"],\"tags\":[\"weather\",\"rain\"]},{\"emoji\":\"☂️\",\"description\":\"umbrella\",\"category\":\"People\",\"aliases\":[\"open_umbrella\"],\"tags\":[]},{\"emoji\":\"🐶\",\"description\":\"dog face\",\"category\":\"Nature\",\"aliases\":[\"dog\"],\"tags\":[\"pet\"]},{\"emoji\":\"🐱\",\"description\":\"cat face\",\"category\":\"Nature\",\"aliases\":[\"cat\"],\"tags\":[\"pet\"]},{\"emoji\":\"🐭\",\"description\":\"mouse face\",\"category\":\"Nature\",\"aliases\":[\"mouse\"],\"tags\":[]},{\"emoji\":\"🐹\",\"description\":\"hamster face\",\"category\":\"Nature\",\"aliases\":[\"hamster\"],\"tags\":[\"pet\"]},{\"emoji\":\"🐰\",\"description\":\"rabbit face\",\"category\":\"Nature\",\"aliases\":[\"rabbit\"],\"tags\":[\"bunny\"]},{\"emoji\":\"🦊\",\"description\":\"fox face\",\"category\":\"Nature\",\"aliases\":[\"fox_face\"],\"tags\":[]},{\"emoji\":\"🐻\",\"description\":\"bear face\",\"category\":\"Nature\",\"aliases\":[\"bear\"],\"tags\":[]},{\"emoji\":\"🐼\",\"description\":\"panda face\",\"category\":\"Nature\",\"aliases\":[\"panda_face\"],\"tags\":[]},{\"emoji\":\"🐨\",\"description\":\"koala\",\"category\":\"Nature\",\"aliases\":[\"koala\"],\"tags\":[]},{\"emoji\":\"🐯\",\"description\":\"tiger face\",\"category\":\"Nature\",\"aliases\":[\"tiger\"],\"tags\":[]},{\"emoji\":\"🦁\",\"description\":\"lion face\",\"category\":\"Nature\",\"aliases\":[\"lion\"],\"tags\":[]},{\"emoji\":\"🐮\",\"description\":\"cow face\",\"category\":\"Nature\",\"aliases\":[\"cow\"],\"tags\":[]},{\"emoji\":\"🐷\",\"description\":\"pig face\",\"category\":\"Nature\",\"aliases\":[\"pig\"],\"tags\":[]},{\"emoji\":\"🐽\",\"description\":\"pig nose\",\"category\":\"Nature\",\"aliases\":[\"pig_nose\"],\"tags\":[]},{\"emoji\":\"🐸\",\"description\":\"frog face\",\"category\":\"Nature\",\"aliases\":[\"frog\"],\"tags\":[]},{\"emoji\":\"🐵\",\"description\":\"monkey face\",\"category\":\"Nature\",\"aliases\":[\"monkey_face\"],\"tags\":[]},{\"emoji\":\"🙈\",\"description\":\"see-no-evil monkey\",\"category\":\"Nature\",\"aliases\":[\"see_no_evil\"],\"tags\":[\"monkey\",\"blind\",\"ignore\"]},{\"emoji\":\"🙉\",\"description\":\"hear-no-evil monkey\",\"category\":\"Nature\",\"aliases\":[\"hear_no_evil\"],\"tags\":[\"monkey\",\"deaf\"]},{\"emoji\":\"🙊\",\"description\":\"speak-no-evil monkey\",\"category\":\"Nature\",\"aliases\":[\"speak_no_evil\"],\"tags\":[\"monkey\",\"mute\",\"hush\"]},{\"emoji\":\"🐒\",\"description\":\"monkey\",\"category\":\"Nature\",\"aliases\":[\"monkey\"],\"tags\":[]},{\"emoji\":\"🐔\",\"description\":\"chicken\",\"category\":\"Nature\",\"aliases\":[\"chicken\"],\"tags\":[]},{\"emoji\":\"🐧\",\"description\":\"penguin\",\"category\":\"Nature\",\"aliases\":[\"penguin\"],\"tags\":[]},{\"emoji\":\"🐦\",\"description\":\"bird\",\"category\":\"Nature\",\"aliases\":[\"bird\"],\"tags\":[]},{\"emoji\":\"🐤\",\"description\":\"baby chick\",\"category\":\"Nature\",\"aliases\":[\"baby_chick\"],\"tags\":[]},{\"emoji\":\"🐣\",\"description\":\"hatching chick\",\"category\":\"Nature\",\"aliases\":[\"hatching_chick\"],\"tags\":[]},{\"emoji\":\"🐥\",\"description\":\"front-facing baby chick\",\"category\":\"Nature\",\"aliases\":[\"hatched_chick\"],\"tags\":[]},{\"emoji\":\"🦆\",\"description\":\"duck\",\"category\":\"Nature\",\"aliases\":[\"duck\"],\"tags\":[]},{\"emoji\":\"🦅\",\"description\":\"eagle\",\"category\":\"Nature\",\"aliases\":[\"eagle\"],\"tags\":[]},{\"emoji\":\"🦉\",\"description\":\"owl\",\"category\":\"Nature\",\"aliases\":[\"owl\"],\"tags\":[]},{\"emoji\":\"🦇\",\"description\":\"bat\",\"category\":\"Nature\",\"aliases\":[\"bat\"],\"tags\":[]},{\"emoji\":\"🐺\",\"description\":\"wolf face\",\"category\":\"Nature\",\"aliases\":[\"wolf\"],\"tags\":[]},{\"emoji\":\"🐗\",\"description\":\"boar\",\"category\":\"Nature\",\"aliases\":[\"boar\"],\"tags\":[]},{\"emoji\":\"🐴\",\"description\":\"horse face\",\"category\":\"Nature\",\"aliases\":[\"horse\"],\"tags\":[]},{\"emoji\":\"🦄\",\"description\":\"unicorn face\",\"category\":\"Nature\",\"aliases\":[\"unicorn\"],\"tags\":[]},{\"emoji\":\"🐝\",\"description\":\"honeybee\",\"category\":\"Nature\",\"aliases\":[\"bee\",\"honeybee\"],\"tags\":[]},{\"emoji\":\"🐛\",\"description\":\"bug\",\"category\":\"Nature\",\"aliases\":[\"bug\"],\"tags\":[]},{\"emoji\":\"🦋\",\"description\":\"butterfly\",\"category\":\"Nature\",\"aliases\":[\"butterfly\"],\"tags\":[]},{\"emoji\":\"🐌\",\"description\":\"snail\",\"category\":\"Nature\",\"aliases\":[\"snail\"],\"tags\":[\"slow\"]},{\"emoji\":\"🐚\",\"description\":\"spiral shell\",\"category\":\"Nature\",\"aliases\":[\"shell\"],\"tags\":[\"sea\",\"beach\"]},{\"emoji\":\"🐞\",\"description\":\"lady beetle\",\"category\":\"Nature\",\"aliases\":[\"beetle\"],\"tags\":[\"bug\"]},{\"emoji\":\"🐜\",\"description\":\"ant\",\"category\":\"Nature\",\"aliases\":[\"ant\"],\"tags\":[]},{\"emoji\":\"🕷\",\"description\":\"spider\",\"category\":\"Nature\",\"aliases\":[\"spider\"],\"tags\":[]},{\"emoji\":\"🕸\",\"description\":\"spider web\",\"category\":\"Nature\",\"aliases\":[\"spider_web\"],\"tags\":[]},{\"emoji\":\"🐢\",\"description\":\"turtle\",\"category\":\"Nature\",\"aliases\":[\"turtle\"],\"tags\":[\"slow\"]},{\"emoji\":\"🐍\",\"description\":\"snake\",\"category\":\"Nature\",\"aliases\":[\"snake\"],\"tags\":[]},{\"emoji\":\"🦎\",\"description\":\"lizard\",\"category\":\"Nature\",\"aliases\":[\"lizard\"],\"tags\":[]},{\"emoji\":\"🦂\",\"description\":\"scorpion\",\"category\":\"Nature\",\"aliases\":[\"scorpion\"],\"tags\":[]},{\"emoji\":\"🦀\",\"description\":\"crab\",\"category\":\"Nature\",\"aliases\":[\"crab\"],\"tags\":[]},{\"emoji\":\"🦑\",\"description\":\"squid\",\"category\":\"Nature\",\"aliases\":[\"squid\"],\"tags\":[]},{\"emoji\":\"🐙\",\"description\":\"octopus\",\"category\":\"Nature\",\"aliases\":[\"octopus\"],\"tags\":[]},{\"emoji\":\"🦐\",\"description\":\"shrimp\",\"category\":\"Nature\",\"aliases\":[\"shrimp\"],\"tags\":[]},{\"emoji\":\"🐠\",\"description\":\"tropical fish\",\"category\":\"Nature\",\"aliases\":[\"tropical_fish\"],\"tags\":[]},{\"emoji\":\"🐟\",\"description\":\"fish\",\"category\":\"Nature\",\"aliases\":[\"fish\"],\"tags\":[]},{\"emoji\":\"🐡\",\"description\":\"blowfish\",\"category\":\"Nature\",\"aliases\":[\"blowfish\"],\"tags\":[]},{\"emoji\":\"🐬\",\"description\":\"dolphin\",\"category\":\"Nature\",\"aliases\":[\"dolphin\",\"flipper\"],\"tags\":[]},{\"emoji\":\"🦈\",\"description\":\"shark\",\"category\":\"Nature\",\"aliases\":[\"shark\"],\"tags\":[]},{\"emoji\":\"🐳\",\"description\":\"spouting whale\",\"category\":\"Nature\",\"aliases\":[\"whale\"],\"tags\":[\"sea\"]},{\"emoji\":\"🐋\",\"description\":\"whale\",\"category\":\"Nature\",\"aliases\":[\"whale2\"],\"tags\":[]},{\"emoji\":\"🐊\",\"description\":\"crocodile\",\"category\":\"Nature\",\"aliases\":[\"crocodile\"],\"tags\":[]},{\"emoji\":\"🐆\",\"description\":\"leopard\",\"category\":\"Nature\",\"aliases\":[\"leopard\"],\"tags\":[]},{\"emoji\":\"🐅\",\"description\":\"tiger\",\"category\":\"Nature\",\"aliases\":[\"tiger2\"],\"tags\":[]},{\"emoji\":\"🐃\",\"description\":\"water buffalo\",\"category\":\"Nature\",\"aliases\":[\"water_buffalo\"],\"tags\":[]},{\"emoji\":\"🐂\",\"description\":\"ox\",\"category\":\"Nature\",\"aliases\":[\"ox\"],\"tags\":[]},{\"emoji\":\"🐄\",\"description\":\"cow\",\"category\":\"Nature\",\"aliases\":[\"cow2\"],\"tags\":[]},{\"emoji\":\"🦌\",\"description\":\"deer\",\"category\":\"Nature\",\"aliases\":[\"deer\"],\"tags\":[]},{\"emoji\":\"🐪\",\"description\":\"camel\",\"category\":\"Nature\",\"aliases\":[\"dromedary_camel\"],\"tags\":[\"desert\"]},{\"emoji\":\"🐫\",\"description\":\"two-hump camel\",\"category\":\"Nature\",\"aliases\":[\"camel\"],\"tags\":[]},{\"emoji\":\"🐘\",\"description\":\"elephant\",\"category\":\"Nature\",\"aliases\":[\"elephant\"],\"tags\":[]},{\"emoji\":\"🦏\",\"description\":\"rhinoceros\",\"category\":\"Nature\",\"aliases\":[\"rhinoceros\"],\"tags\":[]},{\"emoji\":\"🦍\",\"description\":\"gorilla\",\"category\":\"Nature\",\"aliases\":[\"gorilla\"],\"tags\":[]},{\"emoji\":\"🐎\",\"description\":\"horse\",\"category\":\"Nature\",\"aliases\":[\"racehorse\"],\"tags\":[\"speed\"]},{\"emoji\":\"🐖\",\"description\":\"pig\",\"category\":\"Nature\",\"aliases\":[\"pig2\"],\"tags\":[]},{\"emoji\":\"🐐\",\"description\":\"goat\",\"category\":\"Nature\",\"aliases\":[\"goat\"],\"tags\":[]},{\"emoji\":\"🐏\",\"description\":\"ram\",\"category\":\"Nature\",\"aliases\":[\"ram\"],\"tags\":[]},{\"emoji\":\"🐑\",\"description\":\"sheep\",\"category\":\"Nature\",\"aliases\":[\"sheep\"],\"tags\":[]},{\"emoji\":\"🐕\",\"description\":\"dog\",\"category\":\"Nature\",\"aliases\":[\"dog2\"],\"tags\":[]},{\"emoji\":\"🐩\",\"description\":\"poodle\",\"category\":\"Nature\",\"aliases\":[\"poodle\"],\"tags\":[\"dog\"]},{\"emoji\":\"🐈\",\"description\":\"cat\",\"category\":\"Nature\",\"aliases\":[\"cat2\"],\"tags\":[]},{\"emoji\":\"🐓\",\"description\":\"rooster\",\"category\":\"Nature\",\"aliases\":[\"rooster\"],\"tags\":[]},{\"emoji\":\"🦃\",\"description\":\"turkey\",\"category\":\"Nature\",\"aliases\":[\"turkey\"],\"tags\":[\"thanksgiving\"]},{\"emoji\":\"🕊\",\"description\":\"dove\",\"category\":\"Nature\",\"aliases\":[\"dove\"],\"tags\":[\"peace\"]},{\"emoji\":\"🐇\",\"description\":\"rabbit\",\"category\":\"Nature\",\"aliases\":[\"rabbit2\"],\"tags\":[]},{\"emoji\":\"🐁\",\"description\":\"mouse\",\"category\":\"Nature\",\"aliases\":[\"mouse2\"],\"tags\":[]},{\"emoji\":\"🐀\",\"description\":\"rat\",\"category\":\"Nature\",\"aliases\":[\"rat\"],\"tags\":[]},{\"emoji\":\"🐿\",\"description\":\"chipmunk\",\"category\":\"Nature\",\"aliases\":[\"chipmunk\"],\"tags\":[]},{\"emoji\":\"🐾\",\"description\":\"paw prints\",\"category\":\"Nature\",\"aliases\":[\"feet\",\"paw_prints\"],\"tags\":[]},{\"emoji\":\"🐉\",\"description\":\"dragon\",\"category\":\"Nature\",\"aliases\":[\"dragon\"],\"tags\":[]},{\"emoji\":\"🐲\",\"description\":\"dragon face\",\"category\":\"Nature\",\"aliases\":[\"dragon_face\"],\"tags\":[]},{\"emoji\":\"🌵\",\"description\":\"cactus\",\"category\":\"Nature\",\"aliases\":[\"cactus\"],\"tags\":[]},{\"emoji\":\"🎄\",\"description\":\"Christmas tree\",\"category\":\"Nature\",\"aliases\":[\"christmas_tree\"],\"tags\":[]},{\"emoji\":\"🌲\",\"description\":\"evergreen tree\",\"category\":\"Nature\",\"aliases\":[\"evergreen_tree\"],\"tags\":[\"wood\"]},{\"emoji\":\"🌳\",\"description\":\"deciduous tree\",\"category\":\"Nature\",\"aliases\":[\"deciduous_tree\"],\"tags\":[\"wood\"]},{\"emoji\":\"🌴\",\"description\":\"palm tree\",\"category\":\"Nature\",\"aliases\":[\"palm_tree\"],\"tags\":[]},{\"emoji\":\"🌱\",\"description\":\"seedling\",\"category\":\"Nature\",\"aliases\":[\"seedling\"],\"tags\":[\"plant\"]},{\"emoji\":\"🌿\",\"description\":\"herb\",\"category\":\"Nature\",\"aliases\":[\"herb\"],\"tags\":[]},{\"emoji\":\"☘️\",\"description\":\"shamrock\",\"category\":\"Nature\",\"aliases\":[\"shamrock\"],\"tags\":[]},{\"emoji\":\"🍀\",\"description\":\"four leaf clover\",\"category\":\"Nature\",\"aliases\":[\"four_leaf_clover\"],\"tags\":[\"luck\"]},{\"emoji\":\"🎍\",\"description\":\"pine decoration\",\"category\":\"Nature\",\"aliases\":[\"bamboo\"],\"tags\":[]},{\"emoji\":\"🎋\",\"description\":\"tanabata tree\",\"category\":\"Nature\",\"aliases\":[\"tanabata_tree\"],\"tags\":[]},{\"emoji\":\"🍃\",\"description\":\"leaf fluttering in wind\",\"category\":\"Nature\",\"aliases\":[\"leaves\"],\"tags\":[\"leaf\"]},{\"emoji\":\"🍂\",\"description\":\"fallen leaf\",\"category\":\"Nature\",\"aliases\":[\"fallen_leaf\"],\"tags\":[\"autumn\"]},{\"emoji\":\"🍁\",\"description\":\"maple leaf\",\"category\":\"Nature\",\"aliases\":[\"maple_leaf\"],\"tags\":[\"canada\"]},{\"emoji\":\"🍄\",\"description\":\"mushroom\",\"category\":\"Nature\",\"aliases\":[\"mushroom\"],\"tags\":[]},{\"emoji\":\"🌾\",\"description\":\"sheaf of rice\",\"category\":\"Nature\",\"aliases\":[\"ear_of_rice\"],\"tags\":[]},{\"emoji\":\"💐\",\"description\":\"bouquet\",\"category\":\"Nature\",\"aliases\":[\"bouquet\"],\"tags\":[\"flowers\"]},{\"emoji\":\"🌷\",\"description\":\"tulip\",\"category\":\"Nature\",\"aliases\":[\"tulip\"],\"tags\":[\"flower\"]},{\"emoji\":\"🌹\",\"description\":\"rose\",\"category\":\"Nature\",\"aliases\":[\"rose\"],\"tags\":[\"flower\"]},{\"emoji\":\"🥀\",\"description\":\"wilted flower\",\"category\":\"Nature\",\"aliases\":[\"wilted_flower\"],\"tags\":[]},{\"emoji\":\"🌻\",\"description\":\"sunflower\",\"category\":\"Nature\",\"aliases\":[\"sunflower\"],\"tags\":[]},{\"emoji\":\"🌼\",\"description\":\"blossom\",\"category\":\"Nature\",\"aliases\":[\"blossom\"],\"tags\":[]},{\"emoji\":\"🌸\",\"description\":\"cherry blossom\",\"category\":\"Nature\",\"aliases\":[\"cherry_blossom\"],\"tags\":[\"flower\",\"spring\"]},{\"emoji\":\"🌺\",\"description\":\"hibiscus\",\"category\":\"Nature\",\"aliases\":[\"hibiscus\"],\"tags\":[]},{\"emoji\":\"🌎\",\"description\":\"globe showing Americas\",\"category\":\"Nature\",\"aliases\":[\"earth_americas\"],\"tags\":[\"globe\",\"world\",\"international\"]},{\"emoji\":\"🌍\",\"description\":\"globe showing Europe-Africa\",\"category\":\"Nature\",\"aliases\":[\"earth_africa\"],\"tags\":[\"globe\",\"world\",\"international\"]},{\"emoji\":\"🌏\",\"description\":\"globe showing Asia-Australia\",\"category\":\"Nature\",\"aliases\":[\"earth_asia\"],\"tags\":[\"globe\",\"world\",\"international\"]},{\"emoji\":\"🌕\",\"description\":\"full moon\",\"category\":\"Nature\",\"aliases\":[\"full_moon\"],\"tags\":[]},{\"emoji\":\"🌖\",\"description\":\"waning gibbous moon\",\"category\":\"Nature\",\"aliases\":[\"waning_gibbous_moon\"],\"tags\":[]},{\"emoji\":\"🌗\",\"description\":\"last quarter moon\",\"category\":\"Nature\",\"aliases\":[\"last_quarter_moon\"],\"tags\":[]},{\"emoji\":\"🌘\",\"description\":\"waning crescent moon\",\"category\":\"Nature\",\"aliases\":[\"waning_crescent_moon\"],\"tags\":[]},{\"emoji\":\"🌑\",\"description\":\"new moon\",\"category\":\"Nature\",\"aliases\":[\"new_moon\"],\"tags\":[]},{\"emoji\":\"🌒\",\"description\":\"waxing crescent moon\",\"category\":\"Nature\",\"aliases\":[\"waxing_crescent_moon\"],\"tags\":[]},{\"emoji\":\"🌓\",\"description\":\"first quarter moon\",\"category\":\"Nature\",\"aliases\":[\"first_quarter_moon\"],\"tags\":[]},{\"emoji\":\"🌔\",\"description\":\"waxing gibbous moon\",\"category\":\"Nature\",\"aliases\":[\"moon\",\"waxing_gibbous_moon\"],\"tags\":[]},{\"emoji\":\"🌚\",\"description\":\"new moon face\",\"category\":\"Nature\",\"aliases\":[\"new_moon_with_face\"],\"tags\":[]},{\"emoji\":\"🌝\",\"description\":\"full moon with face\",\"category\":\"Nature\",\"aliases\":[\"full_moon_with_face\"],\"tags\":[]},{\"emoji\":\"🌞\",\"description\":\"sun with face\",\"category\":\"Nature\",\"aliases\":[\"sun_with_face\"],\"tags\":[\"summer\"]},{\"emoji\":\"🌛\",\"description\":\"first quarter moon with face\",\"category\":\"Nature\",\"aliases\":[\"first_quarter_moon_with_face\"],\"tags\":[]},{\"emoji\":\"🌜\",\"description\":\"last quarter moon with face\",\"category\":\"Nature\",\"aliases\":[\"last_quarter_moon_with_face\"],\"tags\":[]},{\"emoji\":\"🌙\",\"description\":\"crescent moon\",\"category\":\"Nature\",\"aliases\":[\"crescent_moon\"],\"tags\":[\"night\"]},{\"emoji\":\"💫\",\"description\":\"dizzy\",\"category\":\"Nature\",\"aliases\":[\"dizzy\"],\"tags\":[\"star\"]},{\"emoji\":\"⭐️\",\"description\":\"white medium star\",\"category\":\"Nature\",\"aliases\":[\"star\"],\"tags\":[]},{\"emoji\":\"🌟\",\"description\":\"glowing star\",\"category\":\"Nature\",\"aliases\":[\"star2\"],\"tags\":[]},{\"emoji\":\"✨\",\"description\":\"sparkles\",\"category\":\"Nature\",\"aliases\":[\"sparkles\"],\"tags\":[\"shiny\"]},{\"emoji\":\"⚡️\",\"description\":\"high voltage\",\"category\":\"Nature\",\"aliases\":[\"zap\"],\"tags\":[\"lightning\",\"thunder\"]},{\"emoji\":\"🔥\",\"description\":\"fire\",\"category\":\"Nature\",\"aliases\":[\"fire\"],\"tags\":[\"burn\"]},{\"emoji\":\"💥\",\"description\":\"collision\",\"category\":\"Nature\",\"aliases\":[\"boom\",\"collision\"],\"tags\":[\"explode\"]},{\"emoji\":\"☄\",\"description\":\"comet\",\"category\":\"Nature\",\"aliases\":[\"comet\"],\"tags\":[]},{\"emoji\":\"☀️\",\"description\":\"sun\",\"category\":\"Nature\",\"aliases\":[\"sunny\"],\"tags\":[\"weather\"]},{\"emoji\":\"🌤\",\"description\":\"sun behind small cloud\",\"category\":\"Nature\",\"aliases\":[\"sun_behind_small_cloud\"],\"tags\":[]},{\"emoji\":\"⛅️\",\"description\":\"sun behind cloud\",\"category\":\"Nature\",\"aliases\":[\"partly_sunny\"],\"tags\":[\"weather\",\"cloud\"]},{\"emoji\":\"🌥\",\"description\":\"sun behind large cloud\",\"category\":\"Nature\",\"aliases\":[\"sun_behind_large_cloud\"],\"tags\":[]},{\"emoji\":\"🌦\",\"description\":\"sun behind rain cloud\",\"category\":\"Nature\",\"aliases\":[\"sun_behind_rain_cloud\"],\"tags\":[]},{\"emoji\":\"🌈\",\"description\":\"rainbow\",\"category\":\"Nature\",\"aliases\":[\"rainbow\"],\"tags\":[]},{\"emoji\":\"☁️\",\"description\":\"cloud\",\"category\":\"Nature\",\"aliases\":[\"cloud\"],\"tags\":[]},{\"emoji\":\"🌧\",\"description\":\"cloud with rain\",\"category\":\"Nature\",\"aliases\":[\"cloud_with_rain\"],\"tags\":[]},{\"emoji\":\"⛈\",\"description\":\"cloud with lightning and rain\",\"category\":\"Nature\",\"aliases\":[\"cloud_with_lightning_and_rain\"],\"tags\":[]},{\"emoji\":\"🌩\",\"description\":\"cloud with lightning\",\"category\":\"Nature\",\"aliases\":[\"cloud_with_lightning\"],\"tags\":[]},{\"emoji\":\"🌨\",\"description\":\"cloud with snow\",\"category\":\"Nature\",\"aliases\":[\"cloud_with_snow\"],\"tags\":[]},{\"emoji\":\"☃️\",\"description\":\"snowman\",\"category\":\"Nature\",\"aliases\":[\"snowman_with_snow\"],\"tags\":[\"winter\",\"christmas\"]},{\"emoji\":\"⛄️\",\"description\":\"snowman without snow\",\"category\":\"Nature\",\"aliases\":[\"snowman\"],\"tags\":[\"winter\"]},{\"emoji\":\"❄️\",\"description\":\"snowflake\",\"category\":\"Nature\",\"aliases\":[\"snowflake\"],\"tags\":[\"winter\",\"cold\",\"weather\"]},{\"emoji\":\"🌬\",\"description\":\"wind face\",\"category\":\"Nature\",\"aliases\":[\"wind_face\"],\"tags\":[]},{\"emoji\":\"💨\",\"description\":\"dashing away\",\"category\":\"Nature\",\"aliases\":[\"dash\"],\"tags\":[\"wind\",\"blow\",\"fast\"]},{\"emoji\":\"🌪\",\"description\":\"tornado\",\"category\":\"Nature\",\"aliases\":[\"tornado\"],\"tags\":[]},{\"emoji\":\"🌫\",\"description\":\"fog\",\"category\":\"Nature\",\"aliases\":[\"fog\"],\"tags\":[]},{\"emoji\":\"🌊\",\"description\":\"water wave\",\"category\":\"Nature\",\"aliases\":[\"ocean\"],\"tags\":[\"sea\"]},{\"emoji\":\"💧\",\"description\":\"droplet\",\"category\":\"Nature\",\"aliases\":[\"droplet\"],\"tags\":[\"water\"]},{\"emoji\":\"💦\",\"description\":\"sweat droplets\",\"category\":\"Nature\",\"aliases\":[\"sweat_drops\"],\"tags\":[\"water\",\"workout\"]},{\"emoji\":\"☔️\",\"description\":\"umbrella with rain drops\",\"category\":\"Nature\",\"aliases\":[\"umbrella\"],\"tags\":[\"rain\",\"weather\"]},{\"emoji\":\"🍏\",\"description\":\"green apple\",\"category\":\"Foods\",\"aliases\":[\"green_apple\"],\"tags\":[\"fruit\"]},{\"emoji\":\"🍎\",\"description\":\"red apple\",\"category\":\"Foods\",\"aliases\":[\"apple\"],\"tags\":[]},{\"emoji\":\"🍐\",\"description\":\"pear\",\"category\":\"Foods\",\"aliases\":[\"pear\"],\"tags\":[]},{\"emoji\":\"🍊\",\"description\":\"tangerine\",\"category\":\"Foods\",\"aliases\":[\"tangerine\",\"orange\",\"mandarin\"],\"tags\":[]},{\"emoji\":\"🍋\",\"description\":\"lemon\",\"category\":\"Foods\",\"aliases\":[\"lemon\"],\"tags\":[]},{\"emoji\":\"🍌\",\"description\":\"banana\",\"category\":\"Foods\",\"aliases\":[\"banana\"],\"tags\":[\"fruit\"]},{\"emoji\":\"🍉\",\"description\":\"watermelon\",\"category\":\"Foods\",\"aliases\":[\"watermelon\"],\"tags\":[]},{\"emoji\":\"🍇\",\"description\":\"grapes\",\"category\":\"Foods\",\"aliases\":[\"grapes\"],\"tags\":[]},{\"emoji\":\"🍓\",\"description\":\"strawberry\",\"category\":\"Foods\",\"aliases\":[\"strawberry\"],\"tags\":[\"fruit\"]},{\"emoji\":\"🍈\",\"description\":\"melon\",\"category\":\"Foods\",\"aliases\":[\"melon\"],\"tags\":[]},{\"emoji\":\"🍒\",\"description\":\"cherries\",\"category\":\"Foods\",\"aliases\":[\"cherries\"],\"tags\":[\"fruit\"]},{\"emoji\":\"🍑\",\"description\":\"peach\",\"category\":\"Foods\",\"aliases\":[\"peach\"],\"tags\":[]},{\"emoji\":\"🍍\",\"description\":\"pineapple\",\"category\":\"Foods\",\"aliases\":[\"pineapple\"],\"tags\":[]},{\"emoji\":\"🥝\",\"description\":\"kiwi fruit\",\"category\":\"Foods\",\"aliases\":[\"kiwi_fruit\"],\"tags\":[]},{\"emoji\":\"🥑\",\"description\":\"avocado\",\"category\":\"Foods\",\"aliases\":[\"avocado\"],\"tags\":[]},{\"emoji\":\"🍅\",\"description\":\"tomato\",\"category\":\"Foods\",\"aliases\":[\"tomato\"],\"tags\":[]},{\"emoji\":\"🍆\",\"description\":\"eggplant\",\"category\":\"Foods\",\"aliases\":[\"eggplant\"],\"tags\":[\"aubergine\"]},{\"emoji\":\"🥒\",\"description\":\"cucumber\",\"category\":\"Foods\",\"aliases\":[\"cucumber\"],\"tags\":[]},{\"emoji\":\"🥕\",\"description\":\"carrot\",\"category\":\"Foods\",\"aliases\":[\"carrot\"],\"tags\":[]},{\"emoji\":\"🌽\",\"description\":\"ear of corn\",\"category\":\"Foods\",\"aliases\":[\"corn\"],\"tags\":[]},{\"emoji\":\"🌶\",\"description\":\"hot pepper\",\"category\":\"Foods\",\"aliases\":[\"hot_pepper\"],\"tags\":[\"spicy\"]},{\"emoji\":\"🥔\",\"description\":\"potato\",\"category\":\"Foods\",\"aliases\":[\"potato\"],\"tags\":[]},{\"emoji\":\"🍠\",\"description\":\"roasted sweet potato\",\"category\":\"Foods\",\"aliases\":[\"sweet_potato\"],\"tags\":[]},{\"emoji\":\"🌰\",\"description\":\"chestnut\",\"category\":\"Foods\",\"aliases\":[\"chestnut\"],\"tags\":[]},{\"emoji\":\"🥜\",\"description\":\"peanuts\",\"category\":\"Foods\",\"aliases\":[\"peanuts\"],\"tags\":[]},{\"emoji\":\"🍯\",\"description\":\"honey pot\",\"category\":\"Foods\",\"aliases\":[\"honey_pot\"],\"tags\":[]},{\"emoji\":\"🥐\",\"description\":\"croissant\",\"category\":\"Foods\",\"aliases\":[\"croissant\"],\"tags\":[]},{\"emoji\":\"🍞\",\"description\":\"bread\",\"category\":\"Foods\",\"aliases\":[\"bread\"],\"tags\":[\"toast\"]},{\"emoji\":\"🥖\",\"description\":\"baguette bread\",\"category\":\"Foods\",\"aliases\":[\"baguette_bread\"],\"tags\":[]},{\"emoji\":\"🧀\",\"description\":\"cheese wedge\",\"category\":\"Foods\",\"aliases\":[\"cheese\"],\"tags\":[]},{\"emoji\":\"🥚\",\"description\":\"egg\",\"category\":\"Foods\",\"aliases\":[\"egg\"],\"tags\":[]},{\"emoji\":\"🍳\",\"description\":\"cooking\",\"category\":\"Foods\",\"aliases\":[\"fried_egg\"],\"tags\":[\"breakfast\"]},{\"emoji\":\"🥓\",\"description\":\"bacon\",\"category\":\"Foods\",\"aliases\":[\"bacon\"],\"tags\":[]},{\"emoji\":\"🥞\",\"description\":\"pancakes\",\"category\":\"Foods\",\"aliases\":[\"pancakes\"],\"tags\":[]},{\"emoji\":\"🍤\",\"description\":\"fried shrimp\",\"category\":\"Foods\",\"aliases\":[\"fried_shrimp\"],\"tags\":[\"tempura\"]},{\"emoji\":\"🍗\",\"description\":\"poultry leg\",\"category\":\"Foods\",\"aliases\":[\"poultry_leg\"],\"tags\":[\"meat\",\"chicken\"]},{\"emoji\":\"🍖\",\"description\":\"meat on bone\",\"category\":\"Foods\",\"aliases\":[\"meat_on_bone\"],\"tags\":[]},{\"emoji\":\"🍕\",\"description\":\"pizza\",\"category\":\"Foods\",\"aliases\":[\"pizza\"],\"tags\":[]},{\"emoji\":\"🌭\",\"description\":\"hot dog\",\"category\":\"Foods\",\"aliases\":[\"hotdog\"],\"tags\":[]},{\"emoji\":\"🍔\",\"description\":\"hamburger\",\"category\":\"Foods\",\"aliases\":[\"hamburger\"],\"tags\":[\"burger\"]},{\"emoji\":\"🍟\",\"description\":\"french fries\",\"category\":\"Foods\",\"aliases\":[\"fries\"],\"tags\":[]},{\"emoji\":\"🥙\",\"description\":\"stuffed flatbread\",\"category\":\"Foods\",\"aliases\":[\"stuffed_flatbread\"],\"tags\":[]},{\"emoji\":\"🌮\",\"description\":\"taco\",\"category\":\"Foods\",\"aliases\":[\"taco\"],\"tags\":[]},{\"emoji\":\"🌯\",\"description\":\"burrito\",\"category\":\"Foods\",\"aliases\":[\"burrito\"],\"tags\":[]},{\"emoji\":\"🥗\",\"description\":\"green salad\",\"category\":\"Foods\",\"aliases\":[\"green_salad\"],\"tags\":[]},{\"emoji\":\"🥘\",\"description\":\"shallow pan of food\",\"category\":\"Foods\",\"aliases\":[\"shallow_pan_of_food\"],\"tags\":[\"paella\",\"curry\"]},{\"emoji\":\"🍝\",\"description\":\"spaghetti\",\"category\":\"Foods\",\"aliases\":[\"spaghetti\"],\"tags\":[\"pasta\"]},{\"emoji\":\"🍜\",\"description\":\"steaming bowl\",\"category\":\"Foods\",\"aliases\":[\"ramen\"],\"tags\":[\"noodle\"]},{\"emoji\":\"🍲\",\"description\":\"pot of food\",\"category\":\"Foods\",\"aliases\":[\"stew\"],\"tags\":[]},{\"emoji\":\"🍥\",\"description\":\"fish cake with swirl\",\"category\":\"Foods\",\"aliases\":[\"fish_cake\"],\"tags\":[]},{\"emoji\":\"🍣\",\"description\":\"sushi\",\"category\":\"Foods\",\"aliases\":[\"sushi\"],\"tags\":[]},{\"emoji\":\"🍱\",\"description\":\"bento box\",\"category\":\"Foods\",\"aliases\":[\"bento\"],\"tags\":[]},{\"emoji\":\"🍛\",\"description\":\"curry rice\",\"category\":\"Foods\",\"aliases\":[\"curry\"],\"tags\":[]},{\"emoji\":\"🍚\",\"description\":\"cooked rice\",\"category\":\"Foods\",\"aliases\":[\"rice\"],\"tags\":[]},{\"emoji\":\"🍙\",\"description\":\"rice ball\",\"category\":\"Foods\",\"aliases\":[\"rice_ball\"],\"tags\":[]},{\"emoji\":\"🍘\",\"description\":\"rice cracker\",\"category\":\"Foods\",\"aliases\":[\"rice_cracker\"],\"tags\":[]},{\"emoji\":\"🍢\",\"description\":\"oden\",\"category\":\"Foods\",\"aliases\":[\"oden\"],\"tags\":[]},{\"emoji\":\"🍡\",\"description\":\"dango\",\"category\":\"Foods\",\"aliases\":[\"dango\"],\"tags\":[]},{\"emoji\":\"🍧\",\"description\":\"shaved ice\",\"category\":\"Foods\",\"aliases\":[\"shaved_ice\"],\"tags\":[]},{\"emoji\":\"🍨\",\"description\":\"ice cream\",\"category\":\"Foods\",\"aliases\":[\"ice_cream\"],\"tags\":[]},{\"emoji\":\"🍦\",\"description\":\"soft ice cream\",\"category\":\"Foods\",\"aliases\":[\"icecream\"],\"tags\":[]},{\"emoji\":\"🍰\",\"description\":\"shortcake\",\"category\":\"Foods\",\"aliases\":[\"cake\"],\"tags\":[\"dessert\"]},{\"emoji\":\"🎂\",\"description\":\"birthday cake\",\"category\":\"Foods\",\"aliases\":[\"birthday\"],\"tags\":[\"party\"]},{\"emoji\":\"🍮\",\"description\":\"custard\",\"category\":\"Foods\",\"aliases\":[\"custard\"],\"tags\":[]},{\"emoji\":\"🍭\",\"description\":\"lollipop\",\"category\":\"Foods\",\"aliases\":[\"lollipop\"],\"tags\":[]},{\"emoji\":\"🍬\",\"description\":\"candy\",\"category\":\"Foods\",\"aliases\":[\"candy\"],\"tags\":[\"sweet\"]},{\"emoji\":\"🍫\",\"description\":\"chocolate bar\",\"category\":\"Foods\",\"aliases\":[\"chocolate_bar\"],\"tags\":[]},{\"emoji\":\"🍿\",\"description\":\"popcorn\",\"category\":\"Foods\",\"aliases\":[\"popcorn\"],\"tags\":[]},{\"emoji\":\"🍩\",\"description\":\"doughnut\",\"category\":\"Foods\",\"aliases\":[\"doughnut\"],\"tags\":[]},{\"emoji\":\"🍪\",\"description\":\"cookie\",\"category\":\"Foods\",\"aliases\":[\"cookie\"],\"tags\":[]},{\"emoji\":\"🥛\",\"description\":\"glass of milk\",\"category\":\"Foods\",\"aliases\":[\"milk_glass\"],\"tags\":[]},{\"emoji\":\"🍼\",\"description\":\"baby bottle\",\"category\":\"Foods\",\"aliases\":[\"baby_bottle\"],\"tags\":[\"milk\"]},{\"emoji\":\"☕️\",\"description\":\"hot beverage\",\"category\":\"Foods\",\"aliases\":[\"coffee\"],\"tags\":[\"cafe\",\"espresso\"]},{\"emoji\":\"🍵\",\"description\":\"teacup without handle\",\"category\":\"Foods\",\"aliases\":[\"tea\"],\"tags\":[\"green\",\"breakfast\"]},{\"emoji\":\"🍶\",\"description\":\"sake\",\"category\":\"Foods\",\"aliases\":[\"sake\"],\"tags\":[]},{\"emoji\":\"🍺\",\"description\":\"beer mug\",\"category\":\"Foods\",\"aliases\":[\"beer\"],\"tags\":[\"drink\"]},{\"emoji\":\"🍻\",\"description\":\"clinking beer mugs\",\"category\":\"Foods\",\"aliases\":[\"beers\"],\"tags\":[\"drinks\"]},{\"emoji\":\"🥂\",\"description\":\"clinking glasses\",\"category\":\"Foods\",\"aliases\":[\"clinking_glasses\"],\"tags\":[\"cheers\",\"toast\"]},{\"emoji\":\"🍷\",\"description\":\"wine glass\",\"category\":\"Foods\",\"aliases\":[\"wine_glass\"],\"tags\":[]},{\"emoji\":\"🥃\",\"description\":\"tumbler glass\",\"category\":\"Foods\",\"aliases\":[\"tumbler_glass\"],\"tags\":[\"whisky\"]},{\"emoji\":\"🍸\",\"description\":\"cocktail glass\",\"category\":\"Foods\",\"aliases\":[\"cocktail\"],\"tags\":[\"drink\"]},{\"emoji\":\"🍹\",\"description\":\"tropical drink\",\"category\":\"Foods\",\"aliases\":[\"tropical_drink\"],\"tags\":[\"summer\",\"vacation\"]},{\"emoji\":\"🍾\",\"description\":\"bottle with popping cork\",\"category\":\"Foods\",\"aliases\":[\"champagne\"],\"tags\":[\"bottle\",\"bubbly\",\"celebration\"]},{\"emoji\":\"🥄\",\"description\":\"spoon\",\"category\":\"Foods\",\"aliases\":[\"spoon\"],\"tags\":[]},{\"emoji\":\"🍴\",\"description\":\"fork and knife\",\"category\":\"Foods\",\"aliases\":[\"fork_and_knife\"],\"tags\":[\"cutlery\"]},{\"emoji\":\"🍽\",\"description\":\"fork and knife with plate\",\"category\":\"Foods\",\"aliases\":[\"plate_with_cutlery\"],\"tags\":[\"dining\",\"dinner\"]},{\"emoji\":\"⚽️\",\"description\":\"soccer ball\",\"category\":\"Activity\",\"aliases\":[\"soccer\"],\"tags\":[\"sports\"]},{\"emoji\":\"🏀\",\"description\":\"basketball\",\"category\":\"Activity\",\"aliases\":[\"basketball\"],\"tags\":[\"sports\"]},{\"emoji\":\"🏈\",\"description\":\"american football\",\"category\":\"Activity\",\"aliases\":[\"football\"],\"tags\":[\"sports\"]},{\"emoji\":\"⚾️\",\"description\":\"baseball\",\"category\":\"Activity\",\"aliases\":[\"baseball\"],\"tags\":[\"sports\"]},{\"emoji\":\"🎾\",\"description\":\"tennis\",\"category\":\"Activity\",\"aliases\":[\"tennis\"],\"tags\":[\"sports\"]},{\"emoji\":\"🏐\",\"description\":\"volleyball\",\"category\":\"Activity\",\"aliases\":[\"volleyball\"],\"tags\":[]},{\"emoji\":\"🏉\",\"description\":\"rugby football\",\"category\":\"Activity\",\"aliases\":[\"rugby_football\"],\"tags\":[]},{\"emoji\":\"🎱\",\"description\":\"pool 8 ball\",\"category\":\"Activity\",\"aliases\":[\"8ball\"],\"tags\":[\"pool\",\"billiards\"]},{\"emoji\":\"🏓\",\"description\":\"ping pong\",\"category\":\"Activity\",\"aliases\":[\"ping_pong\"],\"tags\":[]},{\"emoji\":\"🏸\",\"description\":\"badminton\",\"category\":\"Activity\",\"aliases\":[\"badminton\"],\"tags\":[]},{\"emoji\":\"🥅\",\"description\":\"goal net\",\"category\":\"Activity\",\"aliases\":[\"goal_net\"],\"tags\":[]},{\"emoji\":\"🏒\",\"description\":\"ice hockey\",\"category\":\"Activity\",\"aliases\":[\"ice_hockey\"],\"tags\":[]},{\"emoji\":\"🏑\",\"description\":\"field hockey\",\"category\":\"Activity\",\"aliases\":[\"field_hockey\"],\"tags\":[]},{\"emoji\":\"🏏\",\"description\":\"cricket\",\"category\":\"Activity\",\"aliases\":[\"cricket\"],\"tags\":[]},{\"emoji\":\"⛳️\",\"description\":\"flag in hole\",\"category\":\"Activity\",\"aliases\":[\"golf\"],\"tags\":[]},{\"emoji\":\"🏹\",\"description\":\"bow and arrow\",\"category\":\"Activity\",\"aliases\":[\"bow_and_arrow\"],\"tags\":[\"archery\"]},{\"emoji\":\"🎣\",\"description\":\"fishing pole\",\"category\":\"Activity\",\"aliases\":[\"fishing_pole_and_fish\"],\"tags\":[]},{\"emoji\":\"🥊\",\"description\":\"boxing glove\",\"category\":\"Activity\",\"aliases\":[\"boxing_glove\"],\"tags\":[]},{\"emoji\":\"🥋\",\"description\":\"martial arts uniform\",\"category\":\"Activity\",\"aliases\":[\"martial_arts_uniform\"],\"tags\":[]},{\"emoji\":\"⛸\",\"description\":\"ice skate\",\"category\":\"Activity\",\"aliases\":[\"ice_skate\"],\"tags\":[\"skating\"]},{\"emoji\":\"🎿\",\"description\":\"skis\",\"category\":\"Activity\",\"aliases\":[\"ski\"],\"tags\":[]},{\"emoji\":\"⛷\",\"description\":\"skier\",\"category\":\"Activity\",\"aliases\":[\"skier\"],\"tags\":[]},{\"emoji\":\"🏂\",\"description\":\"snowboarder\",\"category\":\"Activity\",\"aliases\":[\"snowboarder\"],\"tags\":[]},{\"emoji\":\"🏋️‍♀️\",\"description\":\"woman lifting weights\",\"category\":\"Activity\",\"aliases\":[\"weight_lifting_woman\"],\"tags\":[\"gym\",\"workout\"]},{\"emoji\":\"🏋\",\"description\":\"person lifting weights\",\"category\":\"Activity\",\"aliases\":[\"weight_lifting_man\"],\"tags\":[\"gym\",\"workout\"]},{\"emoji\":\"🤺\",\"description\":\"person fencing\",\"category\":\"Activity\",\"aliases\":[\"person_fencing\"],\"tags\":[]},{\"emoji\":\"🤼‍♀\",\"description\":\"women wrestling\",\"category\":\"Activity\",\"aliases\":[\"women_wrestling\"],\"tags\":[]},{\"emoji\":\"🤼‍♂\",\"description\":\"men wrestling\",\"category\":\"Activity\",\"aliases\":[\"men_wrestling\"],\"tags\":[]},{\"emoji\":\"🤸‍♀\",\"description\":\"woman cartwheeling\",\"category\":\"Activity\",\"aliases\":[\"woman_cartwheeling\"],\"tags\":[]},{\"emoji\":\"🤸‍♂\",\"description\":\"man cartwheeling\",\"category\":\"Activity\",\"aliases\":[\"man_cartwheeling\"],\"tags\":[]},{\"emoji\":\"⛹️‍♀️\",\"description\":\"woman bouncing ball\",\"category\":\"Activity\",\"aliases\":[\"basketball_woman\"],\"tags\":[]},{\"emoji\":\"⛹\",\"description\":\"person bouncing ball\",\"category\":\"Activity\",\"aliases\":[\"basketball_man\"],\"tags\":[]},{\"emoji\":\"🤾‍♀\",\"description\":\"woman playing handball\",\"category\":\"Activity\",\"aliases\":[\"woman_playing_handball\"],\"tags\":[]},{\"emoji\":\"🤾‍♂\",\"description\":\"man playing handball\",\"category\":\"Activity\",\"aliases\":[\"man_playing_handball\"],\"tags\":[]},{\"emoji\":\"🏌️‍♀️\",\"description\":\"woman golfing\",\"category\":\"Activity\",\"aliases\":[\"golfing_woman\"],\"tags\":[]},{\"emoji\":\"🏌\",\"description\":\"person golfing\",\"category\":\"Activity\",\"aliases\":[\"golfing_man\"],\"tags\":[]},{\"emoji\":\"🏄‍♀\",\"description\":\"woman surfing\",\"category\":\"Activity\",\"aliases\":[\"surfing_woman\"],\"tags\":[]},{\"emoji\":\"🏄\",\"description\":\"person surfing\",\"category\":\"Activity\",\"aliases\":[\"surfing_man\",\"surfer\"],\"tags\":[]},{\"emoji\":\"🏊‍♀\",\"description\":\"woman swimming\",\"category\":\"Activity\",\"aliases\":[\"swimming_woman\"],\"tags\":[]},{\"emoji\":\"🏊\",\"description\":\"person swimming\",\"category\":\"Activity\",\"aliases\":[\"swimming_man\",\"swimmer\"],\"tags\":[]},{\"emoji\":\"🤽‍♀\",\"description\":\"woman playing water polo\",\"category\":\"Activity\",\"aliases\":[\"woman_playing_water_polo\"],\"tags\":[]},{\"emoji\":\"🤽‍♂\",\"description\":\"man playing water polo\",\"category\":\"Activity\",\"aliases\":[\"man_playing_water_polo\"],\"tags\":[]},{\"emoji\":\"🚣‍♀\",\"description\":\"woman rowing boat\",\"category\":\"Activity\",\"aliases\":[\"rowing_woman\"],\"tags\":[]},{\"emoji\":\"🚣\",\"description\":\"person rowing boat\",\"category\":\"Activity\",\"aliases\":[\"rowing_man\",\"rowboat\"],\"tags\":[]},{\"emoji\":\"🏇\",\"description\":\"horse racing\",\"category\":\"Activity\",\"aliases\":[\"horse_racing\"],\"tags\":[]},{\"emoji\":\"🚴‍♀\",\"description\":\"woman biking\",\"category\":\"Activity\",\"aliases\":[\"biking_woman\"],\"tags\":[]},{\"emoji\":\"🚴\",\"description\":\"person biking\",\"category\":\"Activity\",\"aliases\":[\"biking_man\",\"bicyclist\"],\"tags\":[]},{\"emoji\":\"🚵‍♀\",\"description\":\"woman mountain biking\",\"category\":\"Activity\",\"aliases\":[\"mountain_biking_woman\"],\"tags\":[]},{\"emoji\":\"🚵\",\"description\":\"person mountain biking\",\"category\":\"Activity\",\"aliases\":[\"mountain_biking_man\",\"mountain_bicyclist\"],\"tags\":[]},{\"emoji\":\"🎽\",\"description\":\"running shirt\",\"category\":\"Activity\",\"aliases\":[\"running_shirt_with_sash\"],\"tags\":[\"marathon\"]},{\"emoji\":\"🏅\",\"description\":\"sports medal\",\"category\":\"Activity\",\"aliases\":[\"medal_sports\"],\"tags\":[\"gold\",\"winner\"]},{\"emoji\":\"🎖\",\"description\":\"military medal\",\"category\":\"Activity\",\"aliases\":[\"medal_military\"],\"tags\":[]},{\"emoji\":\"🥇\",\"description\":\"1st place medal\",\"category\":\"Activity\",\"aliases\":[\"1st_place_medal\"],\"tags\":[\"gold\"]},{\"emoji\":\"🥈\",\"description\":\"2nd place medal\",\"category\":\"Activity\",\"aliases\":[\"2nd_place_medal\"],\"tags\":[\"silver\"]},{\"emoji\":\"🥉\",\"description\":\"3rd place medal\",\"category\":\"Activity\",\"aliases\":[\"3rd_place_medal\"],\"tags\":[\"bronze\"]},{\"emoji\":\"🏆\",\"description\":\"trophy\",\"category\":\"Activity\",\"aliases\":[\"trophy\"],\"tags\":[\"award\",\"contest\",\"winner\"]},{\"emoji\":\"🏵\",\"description\":\"rosette\",\"category\":\"Activity\",\"aliases\":[\"rosette\"],\"tags\":[]},{\"emoji\":\"🎗\",\"description\":\"reminder ribbon\",\"category\":\"Activity\",\"aliases\":[\"reminder_ribbon\"],\"tags\":[]},{\"emoji\":\"🎫\",\"description\":\"ticket\",\"category\":\"Activity\",\"aliases\":[\"ticket\"],\"tags\":[]},{\"emoji\":\"🎟\",\"description\":\"admission tickets\",\"category\":\"Activity\",\"aliases\":[\"tickets\"],\"tags\":[]},{\"emoji\":\"🎪\",\"description\":\"circus tent\",\"category\":\"Activity\",\"aliases\":[\"circus_tent\"],\"tags\":[]},{\"emoji\":\"🤹‍♀\",\"description\":\"woman juggling\",\"category\":\"Activity\",\"aliases\":[\"woman_juggling\"],\"tags\":[]},{\"emoji\":\"🤹‍♂\",\"description\":\"man juggling\",\"category\":\"Activity\",\"aliases\":[\"man_juggling\"],\"tags\":[]},{\"emoji\":\"🎭\",\"description\":\"performing arts\",\"category\":\"Activity\",\"aliases\":[\"performing_arts\"],\"tags\":[\"theater\",\"drama\"]},{\"emoji\":\"🎨\",\"description\":\"artist palette\",\"category\":\"Activity\",\"aliases\":[\"art\"],\"tags\":[\"design\",\"paint\"]},{\"emoji\":\"🎬\",\"description\":\"clapper board\",\"category\":\"Activity\",\"aliases\":[\"clapper\"],\"tags\":[\"film\"]},{\"emoji\":\"🎤\",\"description\":\"microphone\",\"category\":\"Activity\",\"aliases\":[\"microphone\"],\"tags\":[\"sing\"]},{\"emoji\":\"🎧\",\"description\":\"headphone\",\"category\":\"Activity\",\"aliases\":[\"headphones\"],\"tags\":[\"music\",\"earphones\"]},{\"emoji\":\"🎼\",\"description\":\"musical score\",\"category\":\"Activity\",\"aliases\":[\"musical_score\"],\"tags\":[]},{\"emoji\":\"🎹\",\"description\":\"musical keyboard\",\"category\":\"Activity\",\"aliases\":[\"musical_keyboard\"],\"tags\":[\"piano\"]},{\"emoji\":\"🥁\",\"description\":\"drum\",\"category\":\"Activity\",\"aliases\":[\"drum\"],\"tags\":[]},{\"emoji\":\"🎷\",\"description\":\"saxophone\",\"category\":\"Activity\",\"aliases\":[\"saxophone\"],\"tags\":[]},{\"emoji\":\"🎺\",\"description\":\"trumpet\",\"category\":\"Activity\",\"aliases\":[\"trumpet\"],\"tags\":[]},{\"emoji\":\"🎸\",\"description\":\"guitar\",\"category\":\"Activity\",\"aliases\":[\"guitar\"],\"tags\":[\"rock\"]},{\"emoji\":\"🎻\",\"description\":\"violin\",\"category\":\"Activity\",\"aliases\":[\"violin\"],\"tags\":[]},{\"emoji\":\"🎲\",\"description\":\"game die\",\"category\":\"Activity\",\"aliases\":[\"game_die\"],\"tags\":[\"dice\",\"gambling\"]},{\"emoji\":\"🎯\",\"description\":\"direct hit\",\"category\":\"Activity\",\"aliases\":[\"dart\"],\"tags\":[\"target\"]},{\"emoji\":\"🎳\",\"description\":\"bowling\",\"category\":\"Activity\",\"aliases\":[\"bowling\"],\"tags\":[]},{\"emoji\":\"🎮\",\"description\":\"video game\",\"category\":\"Activity\",\"aliases\":[\"video_game\"],\"tags\":[\"play\",\"controller\",\"console\"]},{\"emoji\":\"🎰\",\"description\":\"slot machine\",\"category\":\"Activity\",\"aliases\":[\"slot_machine\"],\"tags\":[]},{\"emoji\":\"🚗\",\"description\":\"automobile\",\"category\":\"Places\",\"aliases\":[\"car\",\"red_car\"],\"tags\":[]},{\"emoji\":\"🚕\",\"description\":\"taxi\",\"category\":\"Places\",\"aliases\":[\"taxi\"],\"tags\":[]},{\"emoji\":\"🚙\",\"description\":\"sport utility vehicle\",\"category\":\"Places\",\"aliases\":[\"blue_car\"],\"tags\":[]},{\"emoji\":\"🚌\",\"description\":\"bus\",\"category\":\"Places\",\"aliases\":[\"bus\"],\"tags\":[]},{\"emoji\":\"🚎\",\"description\":\"trolleybus\",\"category\":\"Places\",\"aliases\":[\"trolleybus\"],\"tags\":[]},{\"emoji\":\"🏎\",\"description\":\"racing car\",\"category\":\"Places\",\"aliases\":[\"racing_car\"],\"tags\":[]},{\"emoji\":\"🚓\",\"description\":\"police car\",\"category\":\"Places\",\"aliases\":[\"police_car\"],\"tags\":[]},{\"emoji\":\"🚑\",\"description\":\"ambulance\",\"category\":\"Places\",\"aliases\":[\"ambulance\"],\"tags\":[]},{\"emoji\":\"🚒\",\"description\":\"fire engine\",\"category\":\"Places\",\"aliases\":[\"fire_engine\"],\"tags\":[]},{\"emoji\":\"🚐\",\"description\":\"minibus\",\"category\":\"Places\",\"aliases\":[\"minibus\"],\"tags\":[]},{\"emoji\":\"🚚\",\"description\":\"delivery truck\",\"category\":\"Places\",\"aliases\":[\"truck\"],\"tags\":[]},{\"emoji\":\"🚛\",\"description\":\"articulated lorry\",\"category\":\"Places\",\"aliases\":[\"articulated_lorry\"],\"tags\":[]},{\"emoji\":\"🚜\",\"description\":\"tractor\",\"category\":\"Places\",\"aliases\":[\"tractor\"],\"tags\":[]},{\"emoji\":\"🛴\",\"description\":\"kick scooter\",\"category\":\"Places\",\"aliases\":[\"kick_scooter\"],\"tags\":[]},{\"emoji\":\"🚲\",\"description\":\"bicycle\",\"category\":\"Places\",\"aliases\":[\"bike\"],\"tags\":[\"bicycle\"]},{\"emoji\":\"🛵\",\"description\":\"motor scooter\",\"category\":\"Places\",\"aliases\":[\"motor_scooter\"],\"tags\":[]},{\"emoji\":\"🏍\",\"description\":\"motorcycle\",\"category\":\"Places\",\"aliases\":[\"motorcycle\"],\"tags\":[]},{\"emoji\":\"🚨\",\"description\":\"police car light\",\"category\":\"Places\",\"aliases\":[\"rotating_light\"],\"tags\":[\"911\",\"emergency\"]},{\"emoji\":\"🚔\",\"description\":\"oncoming police car\",\"category\":\"Places\",\"aliases\":[\"oncoming_police_car\"],\"tags\":[]},{\"emoji\":\"🚍\",\"description\":\"oncoming bus\",\"category\":\"Places\",\"aliases\":[\"oncoming_bus\"],\"tags\":[]},{\"emoji\":\"🚘\",\"description\":\"oncoming automobile\",\"category\":\"Places\",\"aliases\":[\"oncoming_automobile\"],\"tags\":[]},{\"emoji\":\"🚖\",\"description\":\"oncoming taxi\",\"category\":\"Places\",\"aliases\":[\"oncoming_taxi\"],\"tags\":[]},{\"emoji\":\"🚡\",\"description\":\"aerial tramway\",\"category\":\"Places\",\"aliases\":[\"aerial_tramway\"],\"tags\":[]},{\"emoji\":\"🚠\",\"description\":\"mountain cableway\",\"category\":\"Places\",\"aliases\":[\"mountain_cableway\"],\"tags\":[]},{\"emoji\":\"🚟\",\"description\":\"suspension railway\",\"category\":\"Places\",\"aliases\":[\"suspension_railway\"],\"tags\":[]},{\"emoji\":\"🚃\",\"description\":\"railway car\",\"category\":\"Places\",\"aliases\":[\"railway_car\"],\"tags\":[]},{\"emoji\":\"🚋\",\"description\":\"tram car\",\"category\":\"Places\",\"aliases\":[\"train\"],\"tags\":[]},{\"emoji\":\"🚞\",\"description\":\"mountain railway\",\"category\":\"Places\",\"aliases\":[\"mountain_railway\"],\"tags\":[]},{\"emoji\":\"🚝\",\"description\":\"monorail\",\"category\":\"Places\",\"aliases\":[\"monorail\"],\"tags\":[]},{\"emoji\":\"🚄\",\"description\":\"high-speed train\",\"category\":\"Places\",\"aliases\":[\"bullettrain_side\"],\"tags\":[\"train\"]},{\"emoji\":\"🚅\",\"description\":\"high-speed train with bullet nose\",\"category\":\"Places\",\"aliases\":[\"bullettrain_front\"],\"tags\":[\"train\"]},{\"emoji\":\"🚈\",\"description\":\"light rail\",\"category\":\"Places\",\"aliases\":[\"light_rail\"],\"tags\":[]},{\"emoji\":\"🚂\",\"description\":\"locomotive\",\"category\":\"Places\",\"aliases\":[\"steam_locomotive\"],\"tags\":[\"train\"]},{\"emoji\":\"🚆\",\"description\":\"train\",\"category\":\"Places\",\"aliases\":[\"train2\"],\"tags\":[]},{\"emoji\":\"🚇\",\"description\":\"metro\",\"category\":\"Places\",\"aliases\":[\"metro\"],\"tags\":[]},{\"emoji\":\"🚊\",\"description\":\"tram\",\"category\":\"Places\",\"aliases\":[\"tram\"],\"tags\":[]},{\"emoji\":\"🚉\",\"description\":\"station\",\"category\":\"Places\",\"aliases\":[\"station\"],\"tags\":[]},{\"emoji\":\"🚁\",\"description\":\"helicopter\",\"category\":\"Places\",\"aliases\":[\"helicopter\"],\"tags\":[]},{\"emoji\":\"🛩\",\"description\":\"small airplane\",\"category\":\"Places\",\"aliases\":[\"small_airplane\"],\"tags\":[\"flight\"]},{\"emoji\":\"✈️\",\"description\":\"airplane\",\"category\":\"Places\",\"aliases\":[\"airplane\"],\"tags\":[\"flight\"]},{\"emoji\":\"🛫\",\"description\":\"airplane departure\",\"category\":\"Places\",\"aliases\":[\"flight_departure\"],\"tags\":[]},{\"emoji\":\"🛬\",\"description\":\"airplane arrival\",\"category\":\"Places\",\"aliases\":[\"flight_arrival\"],\"tags\":[]},{\"emoji\":\"🚀\",\"description\":\"rocket\",\"category\":\"Places\",\"aliases\":[\"rocket\"],\"tags\":[\"ship\",\"launch\"]},{\"emoji\":\"🛰\",\"description\":\"satellite\",\"category\":\"Places\",\"aliases\":[\"artificial_satellite\"],\"tags\":[\"orbit\",\"space\"]},{\"emoji\":\"💺\",\"description\":\"seat\",\"category\":\"Places\",\"aliases\":[\"seat\"],\"tags\":[]},{\"emoji\":\"🛶\",\"description\":\"canoe\",\"category\":\"Places\",\"aliases\":[\"canoe\"],\"tags\":[]},{\"emoji\":\"⛵️\",\"description\":\"sailboat\",\"category\":\"Places\",\"aliases\":[\"boat\",\"sailboat\"],\"tags\":[]},{\"emoji\":\"🛥\",\"description\":\"motor boat\",\"category\":\"Places\",\"aliases\":[\"motor_boat\"],\"tags\":[]},{\"emoji\":\"🚤\",\"description\":\"speedboat\",\"category\":\"Places\",\"aliases\":[\"speedboat\"],\"tags\":[\"ship\"]},{\"emoji\":\"🛳\",\"description\":\"passenger ship\",\"category\":\"Places\",\"aliases\":[\"passenger_ship\"],\"tags\":[\"cruise\"]},{\"emoji\":\"⛴\",\"description\":\"ferry\",\"category\":\"Places\",\"aliases\":[\"ferry\"],\"tags\":[]},{\"emoji\":\"🚢\",\"description\":\"ship\",\"category\":\"Places\",\"aliases\":[\"ship\"],\"tags\":[]},{\"emoji\":\"⚓️\",\"description\":\"anchor\",\"category\":\"Places\",\"aliases\":[\"anchor\"],\"tags\":[\"ship\"]},{\"emoji\":\"🚧\",\"description\":\"construction\",\"category\":\"Places\",\"aliases\":[\"construction\"],\"tags\":[\"wip\"]},{\"emoji\":\"⛽️\",\"description\":\"fuel pump\",\"category\":\"Places\",\"aliases\":[\"fuelpump\"],\"tags\":[]},{\"emoji\":\"🚏\",\"description\":\"bus stop\",\"category\":\"Places\",\"aliases\":[\"busstop\"],\"tags\":[]},{\"emoji\":\"🚦\",\"description\":\"vertical traffic light\",\"category\":\"Places\",\"aliases\":[\"vertical_traffic_light\"],\"tags\":[\"semaphore\"]},{\"emoji\":\"🚥\",\"description\":\"horizontal traffic light\",\"category\":\"Places\",\"aliases\":[\"traffic_light\"],\"tags\":[]},{\"emoji\":\"🗺\",\"description\":\"world map\",\"category\":\"Places\",\"aliases\":[\"world_map\"],\"tags\":[\"travel\"]},{\"emoji\":\"🗿\",\"description\":\"moai\",\"category\":\"Places\",\"aliases\":[\"moyai\"],\"tags\":[\"stone\"]},{\"emoji\":\"🗽\",\"description\":\"Statue of Liberty\",\"category\":\"Places\",\"aliases\":[\"statue_of_liberty\"],\"tags\":[]},{\"emoji\":\"⛲️\",\"description\":\"fountain\",\"category\":\"Places\",\"aliases\":[\"fountain\"],\"tags\":[]},{\"emoji\":\"🗼\",\"description\":\"Tokyo tower\",\"category\":\"Places\",\"aliases\":[\"tokyo_tower\"],\"tags\":[]},{\"emoji\":\"🏰\",\"description\":\"castle\",\"category\":\"Places\",\"aliases\":[\"european_castle\"],\"tags\":[]},{\"emoji\":\"🏯\",\"description\":\"Japanese castle\",\"category\":\"Places\",\"aliases\":[\"japanese_castle\"],\"tags\":[]},{\"emoji\":\"🏟\",\"description\":\"stadium\",\"category\":\"Places\",\"aliases\":[\"stadium\"],\"tags\":[]},{\"emoji\":\"🎡\",\"description\":\"ferris wheel\",\"category\":\"Places\",\"aliases\":[\"ferris_wheel\"],\"tags\":[]},{\"emoji\":\"🎢\",\"description\":\"roller coaster\",\"category\":\"Places\",\"aliases\":[\"roller_coaster\"],\"tags\":[]},{\"emoji\":\"🎠\",\"description\":\"carousel horse\",\"category\":\"Places\",\"aliases\":[\"carousel_horse\"],\"tags\":[]},{\"emoji\":\"⛱\",\"description\":\"umbrella on ground\",\"category\":\"Places\",\"aliases\":[\"parasol_on_ground\"],\"tags\":[\"beach_umbrella\"]},{\"emoji\":\"🏖\",\"description\":\"beach with umbrella\",\"category\":\"Places\",\"aliases\":[\"beach_umbrella\"],\"tags\":[]},{\"emoji\":\"🏝\",\"description\":\"desert island\",\"category\":\"Places\",\"aliases\":[\"desert_island\"],\"tags\":[]},{\"emoji\":\"⛰\",\"description\":\"mountain\",\"category\":\"Places\",\"aliases\":[\"mountain\"],\"tags\":[]},{\"emoji\":\"🏔\",\"description\":\"snow-capped mountain\",\"category\":\"Places\",\"aliases\":[\"mountain_snow\"],\"tags\":[]},{\"emoji\":\"🗻\",\"description\":\"mount fuji\",\"category\":\"Places\",\"aliases\":[\"mount_fuji\"],\"tags\":[]},{\"emoji\":\"🌋\",\"description\":\"volcano\",\"category\":\"Places\",\"aliases\":[\"volcano\"],\"tags\":[]},{\"emoji\":\"🏜\",\"description\":\"desert\",\"category\":\"Places\",\"aliases\":[\"desert\"],\"tags\":[]},{\"emoji\":\"🏕\",\"description\":\"camping\",\"category\":\"Places\",\"aliases\":[\"camping\"],\"tags\":[]},{\"emoji\":\"⛺️\",\"description\":\"tent\",\"category\":\"Places\",\"aliases\":[\"tent\"],\"tags\":[\"camping\"]},{\"emoji\":\"🛤\",\"description\":\"railway track\",\"category\":\"Places\",\"aliases\":[\"railway_track\"],\"tags\":[]},{\"emoji\":\"🛣\",\"description\":\"motorway\",\"category\":\"Places\",\"aliases\":[\"motorway\"],\"tags\":[]},{\"emoji\":\"🏗\",\"description\":\"building construction\",\"category\":\"Places\",\"aliases\":[\"building_construction\"],\"tags\":[]},{\"emoji\":\"🏭\",\"description\":\"factory\",\"category\":\"Places\",\"aliases\":[\"factory\"],\"tags\":[]},{\"emoji\":\"🏠\",\"description\":\"house\",\"category\":\"Places\",\"aliases\":[\"house\"],\"tags\":[]},{\"emoji\":\"🏡\",\"description\":\"house with garden\",\"category\":\"Places\",\"aliases\":[\"house_with_garden\"],\"tags\":[]},{\"emoji\":\"🏘\",\"description\":\"house\",\"category\":\"Places\",\"aliases\":[\"houses\"],\"tags\":[]},{\"emoji\":\"🏚\",\"description\":\"derelict house\",\"category\":\"Places\",\"aliases\":[\"derelict_house\"],\"tags\":[]},{\"emoji\":\"🏢\",\"description\":\"office building\",\"category\":\"Places\",\"aliases\":[\"office\"],\"tags\":[]},{\"emoji\":\"🏬\",\"description\":\"department store\",\"category\":\"Places\",\"aliases\":[\"department_store\"],\"tags\":[]},{\"emoji\":\"🏣\",\"description\":\"Japanese post office\",\"category\":\"Places\",\"aliases\":[\"post_office\"],\"tags\":[]},{\"emoji\":\"🏤\",\"description\":\"post office\",\"category\":\"Places\",\"aliases\":[\"european_post_office\"],\"tags\":[]},{\"emoji\":\"🏥\",\"description\":\"hospital\",\"category\":\"Places\",\"aliases\":[\"hospital\"],\"tags\":[]},{\"emoji\":\"🏦\",\"description\":\"bank\",\"category\":\"Places\",\"aliases\":[\"bank\"],\"tags\":[]},{\"emoji\":\"🏨\",\"description\":\"hotel\",\"category\":\"Places\",\"aliases\":[\"hotel\"],\"tags\":[]},{\"emoji\":\"🏪\",\"description\":\"convenience store\",\"category\":\"Places\",\"aliases\":[\"convenience_store\"],\"tags\":[]},{\"emoji\":\"🏫\",\"description\":\"school\",\"category\":\"Places\",\"aliases\":[\"school\"],\"tags\":[]},{\"emoji\":\"🏩\",\"description\":\"love hotel\",\"category\":\"Places\",\"aliases\":[\"love_hotel\"],\"tags\":[]},{\"emoji\":\"💒\",\"description\":\"wedding\",\"category\":\"Places\",\"aliases\":[\"wedding\"],\"tags\":[\"marriage\"]},{\"emoji\":\"🏛\",\"description\":\"classical building\",\"category\":\"Places\",\"aliases\":[\"classical_building\"],\"tags\":[]},{\"emoji\":\"⛪️\",\"description\":\"church\",\"category\":\"Places\",\"aliases\":[\"church\"],\"tags\":[]},{\"emoji\":\"🕌\",\"description\":\"mosque\",\"category\":\"Places\",\"aliases\":[\"mosque\"],\"tags\":[]},{\"emoji\":\"🕍\",\"description\":\"synagogue\",\"category\":\"Places\",\"aliases\":[\"synagogue\"],\"tags\":[]},{\"emoji\":\"🕋\",\"description\":\"kaaba\",\"category\":\"Places\",\"aliases\":[\"kaaba\"],\"tags\":[]},{\"emoji\":\"⛩\",\"description\":\"shinto shrine\",\"category\":\"Places\",\"aliases\":[\"shinto_shrine\"],\"tags\":[]},{\"emoji\":\"🗾\",\"description\":\"map of Japan\",\"category\":\"Places\",\"aliases\":[\"japan\"],\"tags\":[]},{\"emoji\":\"🎑\",\"description\":\"moon viewing ceremony\",\"category\":\"Places\",\"aliases\":[\"rice_scene\"],\"tags\":[]},{\"emoji\":\"🏞\",\"description\":\"national park\",\"category\":\"Places\",\"aliases\":[\"national_park\"],\"tags\":[]},{\"emoji\":\"🌅\",\"description\":\"sunrise\",\"category\":\"Places\",\"aliases\":[\"sunrise\"],\"tags\":[]},{\"emoji\":\"🌄\",\"description\":\"sunrise over mountains\",\"category\":\"Places\",\"aliases\":[\"sunrise_over_mountains\"],\"tags\":[]},{\"emoji\":\"🌠\",\"description\":\"shooting star\",\"category\":\"Places\",\"aliases\":[\"stars\"],\"tags\":[]},{\"emoji\":\"🎇\",\"description\":\"sparkler\",\"category\":\"Places\",\"aliases\":[\"sparkler\"],\"tags\":[]},{\"emoji\":\"🎆\",\"description\":\"fireworks\",\"category\":\"Places\",\"aliases\":[\"fireworks\"],\"tags\":[\"festival\",\"celebration\"]},{\"emoji\":\"🌇\",\"description\":\"sunset\",\"category\":\"Places\",\"aliases\":[\"city_sunrise\"],\"tags\":[]},{\"emoji\":\"🌆\",\"description\":\"cityscape at dusk\",\"category\":\"Places\",\"aliases\":[\"city_sunset\"],\"tags\":[]},{\"emoji\":\"🏙\",\"description\":\"cityscape\",\"category\":\"Places\",\"aliases\":[\"cityscape\"],\"tags\":[\"skyline\"]},{\"emoji\":\"🌃\",\"description\":\"night with stars\",\"category\":\"Places\",\"aliases\":[\"night_with_stars\"],\"tags\":[]},{\"emoji\":\"🌌\",\"description\":\"milky way\",\"category\":\"Places\",\"aliases\":[\"milky_way\"],\"tags\":[]},{\"emoji\":\"🌉\",\"description\":\"bridge at night\",\"category\":\"Places\",\"aliases\":[\"bridge_at_night\"],\"tags\":[]},{\"emoji\":\"🌁\",\"description\":\"foggy\",\"category\":\"Places\",\"aliases\":[\"foggy\"],\"tags\":[\"karl\"]},{\"emoji\":\"⌚️\",\"description\":\"watch\",\"category\":\"Objects\",\"aliases\":[\"watch\"],\"tags\":[\"time\"]},{\"emoji\":\"📱\",\"description\":\"mobile phone\",\"category\":\"Objects\",\"aliases\":[\"iphone\"],\"tags\":[\"smartphone\",\"mobile\"]},{\"emoji\":\"📲\",\"description\":\"mobile phone with arrow\",\"category\":\"Objects\",\"aliases\":[\"calling\"],\"tags\":[\"call\",\"incoming\"]},{\"emoji\":\"💻\",\"description\":\"laptop computer\",\"category\":\"Objects\",\"aliases\":[\"computer\"],\"tags\":[\"desktop\",\"screen\"]},{\"emoji\":\"⌨️\",\"description\":\"keyboard\",\"category\":\"Objects\",\"aliases\":[\"keyboard\"],\"tags\":[]},{\"emoji\":\"🖥\",\"description\":\"desktop computer\",\"category\":\"Objects\",\"aliases\":[\"desktop_computer\"],\"tags\":[]},{\"emoji\":\"🖨\",\"description\":\"printer\",\"category\":\"Objects\",\"aliases\":[\"printer\"],\"tags\":[]},{\"emoji\":\"🖱\",\"description\":\"computer mouse\",\"category\":\"Objects\",\"aliases\":[\"computer_mouse\"],\"tags\":[]},{\"emoji\":\"🖲\",\"description\":\"trackball\",\"category\":\"Objects\",\"aliases\":[\"trackball\"],\"tags\":[]},{\"emoji\":\"🕹\",\"description\":\"joystick\",\"category\":\"Objects\",\"aliases\":[\"joystick\"],\"tags\":[]},{\"emoji\":\"🗜\",\"description\":\"clamp\",\"category\":\"Objects\",\"aliases\":[\"clamp\"],\"tags\":[]},{\"emoji\":\"💽\",\"description\":\"computer disk\",\"category\":\"Objects\",\"aliases\":[\"minidisc\"],\"tags\":[]},{\"emoji\":\"💾\",\"description\":\"floppy disk\",\"category\":\"Objects\",\"aliases\":[\"floppy_disk\"],\"tags\":[\"save\"]},{\"emoji\":\"💿\",\"description\":\"optical disk\",\"category\":\"Objects\",\"aliases\":[\"cd\"],\"tags\":[]},{\"emoji\":\"📀\",\"description\":\"dvd\",\"category\":\"Objects\",\"aliases\":[\"dvd\"],\"tags\":[]},{\"emoji\":\"📼\",\"description\":\"videocassette\",\"category\":\"Objects\",\"aliases\":[\"vhs\"],\"tags\":[]},{\"emoji\":\"📷\",\"description\":\"camera\",\"category\":\"Objects\",\"aliases\":[\"camera\"],\"tags\":[\"photo\"]},{\"emoji\":\"📸\",\"description\":\"camera with flash\",\"category\":\"Objects\",\"aliases\":[\"camera_flash\"],\"tags\":[\"photo\"]},{\"emoji\":\"📹\",\"description\":\"video camera\",\"category\":\"Objects\",\"aliases\":[\"video_camera\"],\"tags\":[]},{\"emoji\":\"🎥\",\"description\":\"movie camera\",\"category\":\"Objects\",\"aliases\":[\"movie_camera\"],\"tags\":[\"film\",\"video\"]},{\"emoji\":\"📽\",\"description\":\"film projector\",\"category\":\"Objects\",\"aliases\":[\"film_projector\"],\"tags\":[]},{\"emoji\":\"🎞\",\"description\":\"film frames\",\"category\":\"Objects\",\"aliases\":[\"film_strip\"],\"tags\":[]},{\"emoji\":\"📞\",\"description\":\"telephone receiver\",\"category\":\"Objects\",\"aliases\":[\"telephone_receiver\"],\"tags\":[\"phone\",\"call\"]},{\"emoji\":\"☎️\",\"description\":\"telephone\",\"category\":\"Objects\",\"aliases\":[\"phone\",\"telephone\"],\"tags\":[]},{\"emoji\":\"📟\",\"description\":\"pager\",\"category\":\"Objects\",\"aliases\":[\"pager\"],\"tags\":[]},{\"emoji\":\"📠\",\"description\":\"fax machine\",\"category\":\"Objects\",\"aliases\":[\"fax\"],\"tags\":[]},{\"emoji\":\"📺\",\"description\":\"television\",\"category\":\"Objects\",\"aliases\":[\"tv\"],\"tags\":[]},{\"emoji\":\"📻\",\"description\":\"radio\",\"category\":\"Objects\",\"aliases\":[\"radio\"],\"tags\":[\"podcast\"]},{\"emoji\":\"🎙\",\"description\":\"studio microphone\",\"category\":\"Objects\",\"aliases\":[\"studio_microphone\"],\"tags\":[\"podcast\"]},{\"emoji\":\"🎚\",\"description\":\"level slider\",\"category\":\"Objects\",\"aliases\":[\"level_slider\"],\"tags\":[]},{\"emoji\":\"🎛\",\"description\":\"control knobs\",\"category\":\"Objects\",\"aliases\":[\"control_knobs\"],\"tags\":[]},{\"emoji\":\"⏱\",\"description\":\"stopwatch\",\"category\":\"Objects\",\"aliases\":[\"stopwatch\"],\"tags\":[]},{\"emoji\":\"⏲\",\"description\":\"timer clock\",\"category\":\"Objects\",\"aliases\":[\"timer_clock\"],\"tags\":[]},{\"emoji\":\"⏰\",\"description\":\"alarm clock\",\"category\":\"Objects\",\"aliases\":[\"alarm_clock\"],\"tags\":[\"morning\"]},{\"emoji\":\"🕰\",\"description\":\"mantelpiece clock\",\"category\":\"Objects\",\"aliases\":[\"mantelpiece_clock\"],\"tags\":[]},{\"emoji\":\"⌛️\",\"description\":\"hourglass\",\"category\":\"Objects\",\"aliases\":[\"hourglass\"],\"tags\":[\"time\"]},{\"emoji\":\"⏳\",\"description\":\"hourglass with flowing sand\",\"category\":\"Objects\",\"aliases\":[\"hourglass_flowing_sand\"],\"tags\":[\"time\"]},{\"emoji\":\"📡\",\"description\":\"satellite antenna\",\"category\":\"Objects\",\"aliases\":[\"satellite\"],\"tags\":[\"signal\"]},{\"emoji\":\"🔋\",\"description\":\"battery\",\"category\":\"Objects\",\"aliases\":[\"battery\"],\"tags\":[\"power\"]},{\"emoji\":\"🔌\",\"description\":\"electric plug\",\"category\":\"Objects\",\"aliases\":[\"electric_plug\"],\"tags\":[]},{\"emoji\":\"💡\",\"description\":\"light bulb\",\"category\":\"Objects\",\"aliases\":[\"bulb\"],\"tags\":[\"idea\",\"light\"]},{\"emoji\":\"🔦\",\"description\":\"flashlight\",\"category\":\"Objects\",\"aliases\":[\"flashlight\"],\"tags\":[]},{\"emoji\":\"🕯\",\"description\":\"candle\",\"category\":\"Objects\",\"aliases\":[\"candle\"],\"tags\":[]},{\"emoji\":\"🗑\",\"description\":\"wastebasket\",\"category\":\"Objects\",\"aliases\":[\"wastebasket\"],\"tags\":[\"trash\"]},{\"emoji\":\"🛢\",\"description\":\"oil drum\",\"category\":\"Objects\",\"aliases\":[\"oil_drum\"],\"tags\":[]},{\"emoji\":\"💸\",\"description\":\"money with wings\",\"category\":\"Objects\",\"aliases\":[\"money_with_wings\"],\"tags\":[\"dollar\"]},{\"emoji\":\"💵\",\"description\":\"dollar banknote\",\"category\":\"Objects\",\"aliases\":[\"dollar\"],\"tags\":[\"money\"]},{\"emoji\":\"💴\",\"description\":\"yen banknote\",\"category\":\"Objects\",\"aliases\":[\"yen\"],\"tags\":[]},{\"emoji\":\"💶\",\"description\":\"euro banknote\",\"category\":\"Objects\",\"aliases\":[\"euro\"],\"tags\":[]},{\"emoji\":\"💷\",\"description\":\"pound banknote\",\"category\":\"Objects\",\"aliases\":[\"pound\"],\"tags\":[]},{\"emoji\":\"💰\",\"description\":\"money bag\",\"category\":\"Objects\",\"aliases\":[\"moneybag\"],\"tags\":[\"dollar\",\"cream\"]},{\"emoji\":\"💳\",\"description\":\"credit card\",\"category\":\"Objects\",\"aliases\":[\"credit_card\"],\"tags\":[\"subscription\"]},{\"emoji\":\"💎\",\"description\":\"gem stone\",\"category\":\"Objects\",\"aliases\":[\"gem\"],\"tags\":[\"diamond\"]},{\"emoji\":\"⚖️\",\"description\":\"balance scale\",\"category\":\"Objects\",\"aliases\":[\"balance_scale\"],\"tags\":[]},{\"emoji\":\"🔧\",\"description\":\"wrench\",\"category\":\"Objects\",\"aliases\":[\"wrench\"],\"tags\":[\"tool\"]},{\"emoji\":\"🔨\",\"description\":\"hammer\",\"category\":\"Objects\",\"aliases\":[\"hammer\"],\"tags\":[\"tool\"]},{\"emoji\":\"⚒\",\"description\":\"hammer and pick\",\"category\":\"Objects\",\"aliases\":[\"hammer_and_pick\"],\"tags\":[]},{\"emoji\":\"🛠\",\"description\":\"hammer and wrench\",\"category\":\"Objects\",\"aliases\":[\"hammer_and_wrench\"],\"tags\":[]},{\"emoji\":\"⛏\",\"description\":\"pick\",\"category\":\"Objects\",\"aliases\":[\"pick\"],\"tags\":[]},{\"emoji\":\"🔩\",\"description\":\"nut and bolt\",\"category\":\"Objects\",\"aliases\":[\"nut_and_bolt\"],\"tags\":[]},{\"emoji\":\"⚙️\",\"description\":\"gear\",\"category\":\"Objects\",\"aliases\":[\"gear\"],\"tags\":[]},{\"emoji\":\"⛓\",\"description\":\"chains\",\"category\":\"Objects\",\"aliases\":[\"chains\"],\"tags\":[]},{\"emoji\":\"🔫\",\"description\":\"pistol\",\"category\":\"Objects\",\"aliases\":[\"gun\"],\"tags\":[\"shoot\",\"weapon\"]},{\"emoji\":\"💣\",\"description\":\"bomb\",\"category\":\"Objects\",\"aliases\":[\"bomb\"],\"tags\":[\"boom\"]},{\"emoji\":\"🔪\",\"description\":\"kitchen knife\",\"category\":\"Objects\",\"aliases\":[\"hocho\",\"knife\"],\"tags\":[\"cut\",\"chop\"]},{\"emoji\":\"🗡\",\"description\":\"dagger\",\"category\":\"Objects\",\"aliases\":[\"dagger\"],\"tags\":[]},{\"emoji\":\"⚔️\",\"description\":\"crossed swords\",\"category\":\"Objects\",\"aliases\":[\"crossed_swords\"],\"tags\":[]},{\"emoji\":\"🛡\",\"description\":\"shield\",\"category\":\"Objects\",\"aliases\":[\"shield\"],\"tags\":[]},{\"emoji\":\"🚬\",\"description\":\"cigarette\",\"category\":\"Objects\",\"aliases\":[\"smoking\"],\"tags\":[\"cigarette\"]},{\"emoji\":\"⚰️\",\"description\":\"coffin\",\"category\":\"Objects\",\"aliases\":[\"coffin\"],\"tags\":[\"funeral\"]},{\"emoji\":\"⚱️\",\"description\":\"funeral urn\",\"category\":\"Objects\",\"aliases\":[\"funeral_urn\"],\"tags\":[]},{\"emoji\":\"🏺\",\"description\":\"amphora\",\"category\":\"Objects\",\"aliases\":[\"amphora\"],\"tags\":[]},{\"emoji\":\"🔮\",\"description\":\"crystal ball\",\"category\":\"Objects\",\"aliases\":[\"crystal_ball\"],\"tags\":[\"fortune\"]},{\"emoji\":\"📿\",\"description\":\"prayer beads\",\"category\":\"Objects\",\"aliases\":[\"prayer_beads\"],\"tags\":[]},{\"emoji\":\"💈\",\"description\":\"barber pole\",\"category\":\"Objects\",\"aliases\":[\"barber\"],\"tags\":[]},{\"emoji\":\"⚗️\",\"description\":\"alembic\",\"category\":\"Objects\",\"aliases\":[\"alembic\"],\"tags\":[]},{\"emoji\":\"🔭\",\"description\":\"telescope\",\"category\":\"Objects\",\"aliases\":[\"telescope\"],\"tags\":[]},{\"emoji\":\"🔬\",\"description\":\"microscope\",\"category\":\"Objects\",\"aliases\":[\"microscope\"],\"tags\":[\"science\",\"laboratory\",\"investigate\"]},{\"emoji\":\"🕳\",\"description\":\"hole\",\"category\":\"Objects\",\"aliases\":[\"hole\"],\"tags\":[]},{\"emoji\":\"💊\",\"description\":\"pill\",\"category\":\"Objects\",\"aliases\":[\"pill\"],\"tags\":[\"health\",\"medicine\"]},{\"emoji\":\"💉\",\"description\":\"syringe\",\"category\":\"Objects\",\"aliases\":[\"syringe\"],\"tags\":[\"health\",\"hospital\",\"needle\"]},{\"emoji\":\"🌡\",\"description\":\"thermometer\",\"category\":\"Objects\",\"aliases\":[\"thermometer\"],\"tags\":[]},{\"emoji\":\"🚽\",\"description\":\"toilet\",\"category\":\"Objects\",\"aliases\":[\"toilet\"],\"tags\":[\"wc\"]},{\"emoji\":\"🚰\",\"description\":\"potable water\",\"category\":\"Objects\",\"aliases\":[\"potable_water\"],\"tags\":[]},{\"emoji\":\"🚿\",\"description\":\"shower\",\"category\":\"Objects\",\"aliases\":[\"shower\"],\"tags\":[\"bath\"]},{\"emoji\":\"🛁\",\"description\":\"bathtub\",\"category\":\"Objects\",\"aliases\":[\"bathtub\"],\"tags\":[]},{\"emoji\":\"🛀\",\"description\":\"person taking bath\",\"category\":\"Objects\",\"aliases\":[\"bath\"],\"tags\":[\"shower\"]},{\"emoji\":\"🛎\",\"description\":\"bellhop bell\",\"category\":\"Objects\",\"aliases\":[\"bellhop_bell\"],\"tags\":[]},{\"emoji\":\"🔑\",\"description\":\"key\",\"category\":\"Objects\",\"aliases\":[\"key\"],\"tags\":[\"lock\",\"password\"]},{\"emoji\":\"🗝\",\"description\":\"old key\",\"category\":\"Objects\",\"aliases\":[\"old_key\"],\"tags\":[]},{\"emoji\":\"🚪\",\"description\":\"door\",\"category\":\"Objects\",\"aliases\":[\"door\"],\"tags\":[]},{\"emoji\":\"🛋\",\"description\":\"couch and lamp\",\"category\":\"Objects\",\"aliases\":[\"couch_and_lamp\"],\"tags\":[]},{\"emoji\":\"🛏\",\"description\":\"bed\",\"category\":\"Objects\",\"aliases\":[\"bed\"],\"tags\":[]},{\"emoji\":\"🛌\",\"description\":\"person in bed\",\"category\":\"Objects\",\"aliases\":[\"sleeping_bed\"],\"tags\":[]},{\"emoji\":\"🖼\",\"description\":\"framed picture\",\"category\":\"Objects\",\"aliases\":[\"framed_picture\"],\"tags\":[]},{\"emoji\":\"🛍\",\"description\":\"shopping bags\",\"category\":\"Objects\",\"aliases\":[\"shopping\"],\"tags\":[\"bags\"]},{\"emoji\":\"🛒\",\"description\":\"shopping cart\",\"category\":\"Objects\",\"aliases\":[\"shopping_cart\"],\"tags\":[]},{\"emoji\":\"🎁\",\"description\":\"wrapped gift\",\"category\":\"Objects\",\"aliases\":[\"gift\"],\"tags\":[\"present\",\"birthday\",\"christmas\"]},{\"emoji\":\"🎈\",\"description\":\"balloon\",\"category\":\"Objects\",\"aliases\":[\"balloon\"],\"tags\":[\"party\",\"birthday\"]},{\"emoji\":\"🎏\",\"description\":\"carp streamer\",\"category\":\"Objects\",\"aliases\":[\"flags\"],\"tags\":[]},{\"emoji\":\"🎀\",\"description\":\"ribbon\",\"category\":\"Objects\",\"aliases\":[\"ribbon\"],\"tags\":[]},{\"emoji\":\"🎊\",\"description\":\"confetti ball\",\"category\":\"Objects\",\"aliases\":[\"confetti_ball\"],\"tags\":[]},{\"emoji\":\"🎉\",\"description\":\"party popper\",\"category\":\"Objects\",\"aliases\":[\"tada\"],\"tags\":[\"hooray\",\"party\"]},{\"emoji\":\"🎎\",\"description\":\"Japanese dolls\",\"category\":\"Objects\",\"aliases\":[\"dolls\"],\"tags\":[]},{\"emoji\":\"🏮\",\"description\":\"red paper lantern\",\"category\":\"Objects\",\"aliases\":[\"izakaya_lantern\",\"lantern\"],\"tags\":[]},{\"emoji\":\"🎐\",\"description\":\"wind chime\",\"category\":\"Objects\",\"aliases\":[\"wind_chime\"],\"tags\":[]},{\"emoji\":\"✉️\",\"description\":\"envelope\",\"category\":\"Objects\",\"aliases\":[\"email\",\"envelope\"],\"tags\":[\"letter\"]},{\"emoji\":\"📩\",\"description\":\"envelope with arrow\",\"category\":\"Objects\",\"aliases\":[\"envelope_with_arrow\"],\"tags\":[]},{\"emoji\":\"📨\",\"description\":\"incoming envelope\",\"category\":\"Objects\",\"aliases\":[\"incoming_envelope\"],\"tags\":[]},{\"emoji\":\"📧\",\"description\":\"e-mail\",\"category\":\"Objects\",\"aliases\":[\"e-mail\"],\"tags\":[]},{\"emoji\":\"💌\",\"description\":\"love letter\",\"category\":\"Objects\",\"aliases\":[\"love_letter\"],\"tags\":[\"email\",\"envelope\"]},{\"emoji\":\"📥\",\"description\":\"inbox tray\",\"category\":\"Objects\",\"aliases\":[\"inbox_tray\"],\"tags\":[]},{\"emoji\":\"📤\",\"description\":\"outbox tray\",\"category\":\"Objects\",\"aliases\":[\"outbox_tray\"],\"tags\":[]},{\"emoji\":\"📦\",\"description\":\"package\",\"category\":\"Objects\",\"aliases\":[\"package\"],\"tags\":[\"shipping\"]},{\"emoji\":\"🏷\",\"description\":\"label\",\"category\":\"Objects\",\"aliases\":[\"label\"],\"tags\":[\"tag\"]},{\"emoji\":\"📪\",\"description\":\"closed mailbox with lowered flag\",\"category\":\"Objects\",\"aliases\":[\"mailbox_closed\"],\"tags\":[]},{\"emoji\":\"📫\",\"description\":\"closed mailbox with raised flag\",\"category\":\"Objects\",\"aliases\":[\"mailbox\"],\"tags\":[]},{\"emoji\":\"📬\",\"description\":\"open mailbox with raised flag\",\"category\":\"Objects\",\"aliases\":[\"mailbox_with_mail\"],\"tags\":[]},{\"emoji\":\"📭\",\"description\":\"open mailbox with lowered flag\",\"category\":\"Objects\",\"aliases\":[\"mailbox_with_no_mail\"],\"tags\":[]},{\"emoji\":\"📮\",\"description\":\"postbox\",\"category\":\"Objects\",\"aliases\":[\"postbox\"],\"tags\":[]},{\"emoji\":\"📯\",\"description\":\"postal horn\",\"category\":\"Objects\",\"aliases\":[\"postal_horn\"],\"tags\":[]},{\"emoji\":\"📜\",\"description\":\"scroll\",\"category\":\"Objects\",\"aliases\":[\"scroll\"],\"tags\":[\"document\"]},{\"emoji\":\"📃\",\"description\":\"page with curl\",\"category\":\"Objects\",\"aliases\":[\"page_with_curl\"],\"tags\":[]},{\"emoji\":\"📄\",\"description\":\"page facing up\",\"category\":\"Objects\",\"aliases\":[\"page_facing_up\"],\"tags\":[\"document\"]},{\"emoji\":\"📑\",\"description\":\"bookmark tabs\",\"category\":\"Objects\",\"aliases\":[\"bookmark_tabs\"],\"tags\":[]},{\"emoji\":\"📊\",\"description\":\"bar chart\",\"category\":\"Objects\",\"aliases\":[\"bar_chart\"],\"tags\":[\"stats\",\"metrics\"]},{\"emoji\":\"📈\",\"description\":\"chart increasing\",\"category\":\"Objects\",\"aliases\":[\"chart_with_upwards_trend\"],\"tags\":[\"graph\",\"metrics\"]},{\"emoji\":\"📉\",\"description\":\"chart decreasing\",\"category\":\"Objects\",\"aliases\":[\"chart_with_downwards_trend\"],\"tags\":[\"graph\",\"metrics\"]},{\"emoji\":\"🗒\",\"description\":\"spiral notepad\",\"category\":\"Objects\",\"aliases\":[\"spiral_notepad\"],\"tags\":[]},{\"emoji\":\"🗓\",\"description\":\"spiral calendar\",\"category\":\"Objects\",\"aliases\":[\"spiral_calendar\"],\"tags\":[]},{\"emoji\":\"📆\",\"description\":\"tear-off calendar\",\"category\":\"Objects\",\"aliases\":[\"calendar\"],\"tags\":[\"schedule\"]},{\"emoji\":\"📅\",\"description\":\"calendar\",\"category\":\"Objects\",\"aliases\":[\"date\"],\"tags\":[\"calendar\",\"schedule\"]},{\"emoji\":\"📇\",\"description\":\"card index\",\"category\":\"Objects\",\"aliases\":[\"card_index\"],\"tags\":[]},{\"emoji\":\"🗃\",\"description\":\"card file box\",\"category\":\"Objects\",\"aliases\":[\"card_file_box\"],\"tags\":[]},{\"emoji\":\"🗳\",\"description\":\"ballot box with ballot\",\"category\":\"Objects\",\"aliases\":[\"ballot_box\"],\"tags\":[]},{\"emoji\":\"🗄\",\"description\":\"file cabinet\",\"category\":\"Objects\",\"aliases\":[\"file_cabinet\"],\"tags\":[]},{\"emoji\":\"📋\",\"description\":\"clipboard\",\"category\":\"Objects\",\"aliases\":[\"clipboard\"],\"tags\":[]},{\"emoji\":\"📁\",\"description\":\"file folder\",\"category\":\"Objects\",\"aliases\":[\"file_folder\"],\"tags\":[\"directory\"]},{\"emoji\":\"📂\",\"description\":\"open file folder\",\"category\":\"Objects\",\"aliases\":[\"open_file_folder\"],\"tags\":[]},{\"emoji\":\"🗂\",\"description\":\"card index dividers\",\"category\":\"Objects\",\"aliases\":[\"card_index_dividers\"],\"tags\":[]},{\"emoji\":\"🗞\",\"description\":\"rolled-up newspaper\",\"category\":\"Objects\",\"aliases\":[\"newspaper_roll\"],\"tags\":[\"press\"]},{\"emoji\":\"📰\",\"description\":\"newspaper\",\"category\":\"Objects\",\"aliases\":[\"newspaper\"],\"tags\":[\"press\"]},{\"emoji\":\"📓\",\"description\":\"notebook\",\"category\":\"Objects\",\"aliases\":[\"notebook\"],\"tags\":[]},{\"emoji\":\"📔\",\"description\":\"notebook with decorative cover\",\"category\":\"Objects\",\"aliases\":[\"notebook_with_decorative_cover\"],\"tags\":[]},{\"emoji\":\"📒\",\"description\":\"ledger\",\"category\":\"Objects\",\"aliases\":[\"ledger\"],\"tags\":[]},{\"emoji\":\"📕\",\"description\":\"closed book\",\"category\":\"Objects\",\"aliases\":[\"closed_book\"],\"tags\":[]},{\"emoji\":\"📗\",\"description\":\"green book\",\"category\":\"Objects\",\"aliases\":[\"green_book\"],\"tags\":[]},{\"emoji\":\"📘\",\"description\":\"blue book\",\"category\":\"Objects\",\"aliases\":[\"blue_book\"],\"tags\":[]},{\"emoji\":\"📙\",\"description\":\"orange book\",\"category\":\"Objects\",\"aliases\":[\"orange_book\"],\"tags\":[]},{\"emoji\":\"📚\",\"description\":\"books\",\"category\":\"Objects\",\"aliases\":[\"books\"],\"tags\":[\"library\"]},{\"emoji\":\"📖\",\"description\":\"open book\",\"category\":\"Objects\",\"aliases\":[\"book\",\"open_book\"],\"tags\":[]},{\"emoji\":\"🔖\",\"description\":\"bookmark\",\"category\":\"Objects\",\"aliases\":[\"bookmark\"],\"tags\":[]},{\"emoji\":\"🔗\",\"description\":\"link\",\"category\":\"Objects\",\"aliases\":[\"link\"],\"tags\":[]},{\"emoji\":\"📎\",\"description\":\"paperclip\",\"category\":\"Objects\",\"aliases\":[\"paperclip\"],\"tags\":[]},{\"emoji\":\"🖇\",\"description\":\"linked paperclips\",\"category\":\"Objects\",\"aliases\":[\"paperclips\"],\"tags\":[]},{\"emoji\":\"📐\",\"description\":\"triangular ruler\",\"category\":\"Objects\",\"aliases\":[\"triangular_ruler\"],\"tags\":[]},{\"emoji\":\"📏\",\"description\":\"straight ruler\",\"category\":\"Objects\",\"aliases\":[\"straight_ruler\"],\"tags\":[]},{\"emoji\":\"📌\",\"description\":\"pushpin\",\"category\":\"Objects\",\"aliases\":[\"pushpin\"],\"tags\":[\"location\"]},{\"emoji\":\"📍\",\"description\":\"round pushpin\",\"category\":\"Objects\",\"aliases\":[\"round_pushpin\"],\"tags\":[\"location\"]},{\"emoji\":\"✂️\",\"description\":\"scissors\",\"category\":\"Objects\",\"aliases\":[\"scissors\"],\"tags\":[\"cut\"]},{\"emoji\":\"🖊\",\"description\":\"pen\",\"category\":\"Objects\",\"aliases\":[\"pen\"],\"tags\":[]},{\"emoji\":\"🖋\",\"description\":\"fountain pen\",\"category\":\"Objects\",\"aliases\":[\"fountain_pen\"],\"tags\":[]},{\"emoji\":\"✒️\",\"description\":\"black nib\",\"category\":\"Objects\",\"aliases\":[\"black_nib\"],\"tags\":[]},{\"emoji\":\"🖌\",\"description\":\"paintbrush\",\"category\":\"Objects\",\"aliases\":[\"paintbrush\"],\"tags\":[]},{\"emoji\":\"🖍\",\"description\":\"crayon\",\"category\":\"Objects\",\"aliases\":[\"crayon\"],\"tags\":[]},{\"emoji\":\"📝\",\"description\":\"memo\",\"category\":\"Objects\",\"aliases\":[\"memo\",\"pencil\"],\"tags\":[\"document\",\"note\"]},{\"emoji\":\"✏️\",\"description\":\"pencil\",\"category\":\"Objects\",\"aliases\":[\"pencil2\"],\"tags\":[]},{\"emoji\":\"🔍\",\"description\":\"left-pointing magnifying glass\",\"category\":\"Objects\",\"aliases\":[\"mag\"],\"tags\":[\"search\",\"zoom\"]},{\"emoji\":\"🔎\",\"description\":\"right-pointing magnifying glass\",\"category\":\"Objects\",\"aliases\":[\"mag_right\"],\"tags\":[]},{\"emoji\":\"🔏\",\"description\":\"locked with pen\",\"category\":\"Objects\",\"aliases\":[\"lock_with_ink_pen\"],\"tags\":[]},{\"emoji\":\"🔐\",\"description\":\"locked with key\",\"category\":\"Objects\",\"aliases\":[\"closed_lock_with_key\"],\"tags\":[\"security\"]},{\"emoji\":\"🔒\",\"description\":\"locked\",\"category\":\"Objects\",\"aliases\":[\"lock\"],\"tags\":[\"security\",\"private\"]},{\"emoji\":\"🔓\",\"description\":\"unlocked\",\"category\":\"Objects\",\"aliases\":[\"unlock\"],\"tags\":[\"security\"]},{\"emoji\":\"❤️\",\"description\":\"red heart\",\"category\":\"Symbols\",\"aliases\":[\"heart\"],\"tags\":[\"love\"]},{\"emoji\":\"💛\",\"description\":\"yellow heart\",\"category\":\"Symbols\",\"aliases\":[\"yellow_heart\"],\"tags\":[]},{\"emoji\":\"💚\",\"description\":\"green heart\",\"category\":\"Symbols\",\"aliases\":[\"green_heart\"],\"tags\":[]},{\"emoji\":\"💙\",\"description\":\"blue heart\",\"category\":\"Symbols\",\"aliases\":[\"blue_heart\"],\"tags\":[]},{\"emoji\":\"💜\",\"description\":\"purple heart\",\"category\":\"Symbols\",\"aliases\":[\"purple_heart\"],\"tags\":[]},{\"emoji\":\"🖤\",\"description\":\"black heart\",\"category\":\"Symbols\",\"aliases\":[\"black_heart\"],\"tags\":[]},{\"emoji\":\"💔\",\"description\":\"broken heart\",\"category\":\"Symbols\",\"aliases\":[\"broken_heart\"],\"tags\":[]},{\"emoji\":\"❣️\",\"description\":\"heavy heart exclamation\",\"category\":\"Symbols\",\"aliases\":[\"heavy_heart_exclamation\"],\"tags\":[]},{\"emoji\":\"💕\",\"description\":\"two hearts\",\"category\":\"Symbols\",\"aliases\":[\"two_hearts\"],\"tags\":[]},{\"emoji\":\"💞\",\"description\":\"revolving hearts\",\"category\":\"Symbols\",\"aliases\":[\"revolving_hearts\"],\"tags\":[]},{\"emoji\":\"💓\",\"description\":\"beating heart\",\"category\":\"Symbols\",\"aliases\":[\"heartbeat\"],\"tags\":[]},{\"emoji\":\"💗\",\"description\":\"growing heart\",\"category\":\"Symbols\",\"aliases\":[\"heartpulse\"],\"tags\":[]},{\"emoji\":\"💖\",\"description\":\"sparkling heart\",\"category\":\"Symbols\",\"aliases\":[\"sparkling_heart\"],\"tags\":[]},{\"emoji\":\"💘\",\"description\":\"heart with arrow\",\"category\":\"Symbols\",\"aliases\":[\"cupid\"],\"tags\":[\"love\",\"heart\"]},{\"emoji\":\"💝\",\"description\":\"heart with ribbon\",\"category\":\"Symbols\",\"aliases\":[\"gift_heart\"],\"tags\":[\"chocolates\"]},{\"emoji\":\"💟\",\"description\":\"heart decoration\",\"category\":\"Symbols\",\"aliases\":[\"heart_decoration\"],\"tags\":[]},{\"emoji\":\"☮️\",\"description\":\"peace symbol\",\"category\":\"Symbols\",\"aliases\":[\"peace_symbol\"],\"tags\":[]},{\"emoji\":\"✝️\",\"description\":\"latin cross\",\"category\":\"Symbols\",\"aliases\":[\"latin_cross\"],\"tags\":[]},{\"emoji\":\"☪️\",\"description\":\"star and crescent\",\"category\":\"Symbols\",\"aliases\":[\"star_and_crescent\"],\"tags\":[]},{\"emoji\":\"🕉\",\"description\":\"om\",\"category\":\"Symbols\",\"aliases\":[\"om\"],\"tags\":[]},{\"emoji\":\"☸️\",\"description\":\"wheel of dharma\",\"category\":\"Symbols\",\"aliases\":[\"wheel_of_dharma\"],\"tags\":[]},{\"emoji\":\"✡️\",\"description\":\"star of David\",\"category\":\"Symbols\",\"aliases\":[\"star_of_david\"],\"tags\":[]},{\"emoji\":\"🔯\",\"description\":\"dotted six-pointed star\",\"category\":\"Symbols\",\"aliases\":[\"six_pointed_star\"],\"tags\":[]},{\"emoji\":\"🕎\",\"description\":\"menorah\",\"category\":\"Symbols\",\"aliases\":[\"menorah\"],\"tags\":[]},{\"emoji\":\"☯️\",\"description\":\"yin yang\",\"category\":\"Symbols\",\"aliases\":[\"yin_yang\"],\"tags\":[]},{\"emoji\":\"☦️\",\"description\":\"orthodox cross\",\"category\":\"Symbols\",\"aliases\":[\"orthodox_cross\"],\"tags\":[]},{\"emoji\":\"🛐\",\"description\":\"place of worship\",\"category\":\"Symbols\",\"aliases\":[\"place_of_worship\"],\"tags\":[]},{\"emoji\":\"⛎\",\"description\":\"Ophiuchus\",\"category\":\"Symbols\",\"aliases\":[\"ophiuchus\"],\"tags\":[]},{\"emoji\":\"♈️\",\"description\":\"Aries\",\"category\":\"Symbols\",\"aliases\":[\"aries\"],\"tags\":[]},{\"emoji\":\"♉️\",\"description\":\"Taurus\",\"category\":\"Symbols\",\"aliases\":[\"taurus\"],\"tags\":[]},{\"emoji\":\"♊️\",\"description\":\"Gemini\",\"category\":\"Symbols\",\"aliases\":[\"gemini\"],\"tags\":[]},{\"emoji\":\"♋️\",\"description\":\"Cancer\",\"category\":\"Symbols\",\"aliases\":[\"cancer\"],\"tags\":[]},{\"emoji\":\"♌️\",\"description\":\"Leo\",\"category\":\"Symbols\",\"aliases\":[\"leo\"],\"tags\":[]},{\"emoji\":\"♍️\",\"description\":\"Virgo\",\"category\":\"Symbols\",\"aliases\":[\"virgo\"],\"tags\":[]},{\"emoji\":\"♎️\",\"description\":\"Libra\",\"category\":\"Symbols\",\"aliases\":[\"libra\"],\"tags\":[]},{\"emoji\":\"♏️\",\"description\":\"Scorpius\",\"category\":\"Symbols\",\"aliases\":[\"scorpius\"],\"tags\":[]},{\"emoji\":\"♐️\",\"description\":\"Sagittarius\",\"category\":\"Symbols\",\"aliases\":[\"sagittarius\"],\"tags\":[]},{\"emoji\":\"♑️\",\"description\":\"Capricorn\",\"category\":\"Symbols\",\"aliases\":[\"capricorn\"],\"tags\":[]},{\"emoji\":\"♒️\",\"description\":\"Aquarius\",\"category\":\"Symbols\",\"aliases\":[\"aquarius\"],\"tags\":[]},{\"emoji\":\"♓️\",\"description\":\"Pisces\",\"category\":\"Symbols\",\"aliases\":[\"pisces\"],\"tags\":[]},{\"emoji\":\"🆔\",\"description\":\"ID button\",\"category\":\"Symbols\",\"aliases\":[\"id\"],\"tags\":[]},{\"emoji\":\"⚛️\",\"description\":\"atom symbol\",\"category\":\"Symbols\",\"aliases\":[\"atom_symbol\"],\"tags\":[]},{\"emoji\":\"🉑\",\"description\":\"Japanese “acceptable” button\",\"category\":\"Symbols\",\"aliases\":[\"accept\"],\"tags\":[]},{\"emoji\":\"☢️\",\"description\":\"radioactive\",\"category\":\"Symbols\",\"aliases\":[\"radioactive\"],\"tags\":[]},{\"emoji\":\"☣️\",\"description\":\"biohazard\",\"category\":\"Symbols\",\"aliases\":[\"biohazard\"],\"tags\":[]},{\"emoji\":\"📴\",\"description\":\"mobile phone off\",\"category\":\"Symbols\",\"aliases\":[\"mobile_phone_off\"],\"tags\":[\"mute\",\"off\"]},{\"emoji\":\"📳\",\"description\":\"vibration mode\",\"category\":\"Symbols\",\"aliases\":[\"vibration_mode\"],\"tags\":[]},{\"emoji\":\"🈶\",\"description\":\"Japanese “not free of charge” button\",\"category\":\"Symbols\",\"aliases\":[\"u6709\"],\"tags\":[]},{\"emoji\":\"🈚️\",\"description\":\"Japanese “free of charge” button\",\"category\":\"Symbols\",\"aliases\":[\"u7121\"],\"tags\":[]},{\"emoji\":\"🈸\",\"description\":\"Japanese “application” button\",\"category\":\"Symbols\",\"aliases\":[\"u7533\"],\"tags\":[]},{\"emoji\":\"🈺\",\"description\":\"Japanese “open for business” button\",\"category\":\"Symbols\",\"aliases\":[\"u55b6\"],\"tags\":[]},{\"emoji\":\"🈷️\",\"description\":\"Japanese “monthly amount” button\",\"category\":\"Symbols\",\"aliases\":[\"u6708\"],\"tags\":[]},{\"emoji\":\"✴️\",\"description\":\"eight-pointed star\",\"category\":\"Symbols\",\"aliases\":[\"eight_pointed_black_star\"],\"tags\":[]},{\"emoji\":\"🆚\",\"description\":\"VS button\",\"category\":\"Symbols\",\"aliases\":[\"vs\"],\"tags\":[]},{\"emoji\":\"💮\",\"description\":\"white flower\",\"category\":\"Symbols\",\"aliases\":[\"white_flower\"],\"tags\":[]},{\"emoji\":\"🉐\",\"description\":\"Japanese “bargain” button\",\"category\":\"Symbols\",\"aliases\":[\"ideograph_advantage\"],\"tags\":[]},{\"emoji\":\"㊙️\",\"description\":\"Japanese “secret” button\",\"category\":\"Symbols\",\"aliases\":[\"secret\"],\"tags\":[]},{\"emoji\":\"㊗️\",\"description\":\"Japanese “congratulations” button\",\"category\":\"Symbols\",\"aliases\":[\"congratulations\"],\"tags\":[]},{\"emoji\":\"🈴\",\"description\":\"Japanese “passing grade” button\",\"category\":\"Symbols\",\"aliases\":[\"u5408\"],\"tags\":[]},{\"emoji\":\"🈵\",\"description\":\"Japanese “no vacancy” button\",\"category\":\"Symbols\",\"aliases\":[\"u6e80\"],\"tags\":[]},{\"emoji\":\"🈹\",\"description\":\"Japanese “discount” button\",\"category\":\"Symbols\",\"aliases\":[\"u5272\"],\"tags\":[]},{\"emoji\":\"🈲\",\"description\":\"Japanese “prohibited” button\",\"category\":\"Symbols\",\"aliases\":[\"u7981\"],\"tags\":[]},{\"emoji\":\"🅰️\",\"description\":\"A button (blood type)\",\"category\":\"Symbols\",\"aliases\":[\"a\"],\"tags\":[]},{\"emoji\":\"🅱️\",\"description\":\"B button (blood type)\",\"category\":\"Symbols\",\"aliases\":[\"b\"],\"tags\":[]},{\"emoji\":\"🆎\",\"description\":\"AB button (blood type)\",\"category\":\"Symbols\",\"aliases\":[\"ab\"],\"tags\":[]},{\"emoji\":\"🆑\",\"description\":\"CL button\",\"category\":\"Symbols\",\"aliases\":[\"cl\"],\"tags\":[]},{\"emoji\":\"🅾️\",\"description\":\"O button (blood type)\",\"category\":\"Symbols\",\"aliases\":[\"o2\"],\"tags\":[]},{\"emoji\":\"🆘\",\"description\":\"SOS button\",\"category\":\"Symbols\",\"aliases\":[\"sos\"],\"tags\":[\"help\",\"emergency\"]},{\"emoji\":\"❌\",\"description\":\"cross mark\",\"category\":\"Symbols\",\"aliases\":[\"x\"],\"tags\":[]},{\"emoji\":\"⭕️\",\"description\":\"heavy large circle\",\"category\":\"Symbols\",\"aliases\":[\"o\"],\"tags\":[]},{\"emoji\":\"🛑\",\"description\":\"stop sign\",\"category\":\"Symbols\",\"aliases\":[\"stop_sign\"],\"tags\":[]},{\"emoji\":\"⛔️\",\"description\":\"no entry\",\"category\":\"Symbols\",\"aliases\":[\"no_entry\"],\"tags\":[\"limit\"]},{\"emoji\":\"📛\",\"description\":\"name badge\",\"category\":\"Symbols\",\"aliases\":[\"name_badge\"],\"tags\":[]},{\"emoji\":\"🚫\",\"description\":\"prohibited\",\"category\":\"Symbols\",\"aliases\":[\"no_entry_sign\"],\"tags\":[\"block\",\"forbidden\"]},{\"emoji\":\"💯\",\"description\":\"hundred points\",\"category\":\"Symbols\",\"aliases\":[\"100\"],\"tags\":[\"score\",\"perfect\"]},{\"emoji\":\"💢\",\"description\":\"anger symbol\",\"category\":\"Symbols\",\"aliases\":[\"anger\"],\"tags\":[\"angry\"]},{\"emoji\":\"♨️\",\"description\":\"hot springs\",\"category\":\"Symbols\",\"aliases\":[\"hotsprings\"],\"tags\":[]},{\"emoji\":\"🚷\",\"description\":\"no pedestrians\",\"category\":\"Symbols\",\"aliases\":[\"no_pedestrians\"],\"tags\":[]},{\"emoji\":\"🚯\",\"description\":\"no littering\",\"category\":\"Symbols\",\"aliases\":[\"do_not_litter\"],\"tags\":[]},{\"emoji\":\"🚳\",\"description\":\"no bicycles\",\"category\":\"Symbols\",\"aliases\":[\"no_bicycles\"],\"tags\":[]},{\"emoji\":\"🚱\",\"description\":\"non-potable water\",\"category\":\"Symbols\",\"aliases\":[\"non-potable_water\"],\"tags\":[]},{\"emoji\":\"🔞\",\"description\":\"no one under eighteen\",\"category\":\"Symbols\",\"aliases\":[\"underage\"],\"tags\":[]},{\"emoji\":\"📵\",\"description\":\"no mobile phones\",\"category\":\"Symbols\",\"aliases\":[\"no_mobile_phones\"],\"tags\":[]},{\"emoji\":\"🚭\",\"description\":\"no smoking\",\"category\":\"Symbols\",\"aliases\":[\"no_smoking\"],\"tags\":[]},{\"emoji\":\"❗️\",\"description\":\"exclamation mark\",\"category\":\"Symbols\",\"aliases\":[\"exclamation\",\"heavy_exclamation_mark\"],\"tags\":[\"bang\"]},{\"emoji\":\"❕\",\"description\":\"white exclamation mark\",\"category\":\"Symbols\",\"aliases\":[\"grey_exclamation\"],\"tags\":[]},{\"emoji\":\"❓\",\"description\":\"question mark\",\"category\":\"Symbols\",\"aliases\":[\"question\"],\"tags\":[\"confused\"]},{\"emoji\":\"❔\",\"description\":\"white question mark\",\"category\":\"Symbols\",\"aliases\":[\"grey_question\"],\"tags\":[]},{\"emoji\":\"‼️\",\"description\":\"double exclamation mark\",\"category\":\"Symbols\",\"aliases\":[\"bangbang\"],\"tags\":[]},{\"emoji\":\"⁉️\",\"description\":\"exclamation question mark\",\"category\":\"Symbols\",\"aliases\":[\"interrobang\"],\"tags\":[]},{\"emoji\":\"🔅\",\"description\":\"dim button\",\"category\":\"Symbols\",\"aliases\":[\"low_brightness\"],\"tags\":[]},{\"emoji\":\"🔆\",\"description\":\"bright button\",\"category\":\"Symbols\",\"aliases\":[\"high_brightness\"],\"tags\":[]},{\"emoji\":\"〽️\",\"description\":\"part alternation mark\",\"category\":\"Symbols\",\"aliases\":[\"part_alternation_mark\"],\"tags\":[]},{\"emoji\":\"⚠️\",\"description\":\"warning\",\"category\":\"Symbols\",\"aliases\":[\"warning\"],\"tags\":[\"wip\"]},{\"emoji\":\"🚸\",\"description\":\"children crossing\",\"category\":\"Symbols\",\"aliases\":[\"children_crossing\"],\"tags\":[]},{\"emoji\":\"🔱\",\"description\":\"trident emblem\",\"category\":\"Symbols\",\"aliases\":[\"trident\"],\"tags\":[]},{\"emoji\":\"⚜️\",\"description\":\"fleur-de-lis\",\"category\":\"Symbols\",\"aliases\":[\"fleur_de_lis\"],\"tags\":[]},{\"emoji\":\"🔰\",\"description\":\"Japanese symbol for beginner\",\"category\":\"Symbols\",\"aliases\":[\"beginner\"],\"tags\":[]},{\"emoji\":\"♻️\",\"description\":\"recycling symbol\",\"category\":\"Symbols\",\"aliases\":[\"recycle\"],\"tags\":[\"environment\",\"green\"]},{\"emoji\":\"✅\",\"description\":\"white heavy check mark\",\"category\":\"Symbols\",\"aliases\":[\"white_check_mark\"],\"tags\":[]},{\"emoji\":\"🈯️\",\"description\":\"Japanese “reserved” button\",\"category\":\"Symbols\",\"aliases\":[\"u6307\"],\"tags\":[]},{\"emoji\":\"💹\",\"description\":\"chart increasing with yen\",\"category\":\"Symbols\",\"aliases\":[\"chart\"],\"tags\":[]},{\"emoji\":\"❇️\",\"description\":\"sparkle\",\"category\":\"Symbols\",\"aliases\":[\"sparkle\"],\"tags\":[]},{\"emoji\":\"✳️\",\"description\":\"eight-spoked asterisk\",\"category\":\"Symbols\",\"aliases\":[\"eight_spoked_asterisk\"],\"tags\":[]},{\"emoji\":\"❎\",\"description\":\"cross mark button\",\"category\":\"Symbols\",\"aliases\":[\"negative_squared_cross_mark\"],\"tags\":[]},{\"emoji\":\"🌐\",\"description\":\"globe with meridians\",\"category\":\"Symbols\",\"aliases\":[\"globe_with_meridians\"],\"tags\":[\"world\",\"global\",\"international\"]},{\"emoji\":\"💠\",\"description\":\"diamond with a dot\",\"category\":\"Symbols\",\"aliases\":[\"diamond_shape_with_a_dot_inside\"],\"tags\":[]},{\"emoji\":\"Ⓜ️\",\"description\":\"circled M\",\"category\":\"Symbols\",\"aliases\":[\"m\"],\"tags\":[]},{\"emoji\":\"🌀\",\"description\":\"cyclone\",\"category\":\"Symbols\",\"aliases\":[\"cyclone\"],\"tags\":[\"swirl\"]},{\"emoji\":\"💤\",\"description\":\"zzz\",\"category\":\"Symbols\",\"aliases\":[\"zzz\"],\"tags\":[\"sleeping\"]},{\"emoji\":\"🏧\",\"description\":\"ATM sign\",\"category\":\"Symbols\",\"aliases\":[\"atm\"],\"tags\":[]},{\"emoji\":\"🚾\",\"description\":\"water closet\",\"category\":\"Symbols\",\"aliases\":[\"wc\"],\"tags\":[\"toilet\",\"restroom\"]},{\"emoji\":\"♿️\",\"description\":\"wheelchair symbol\",\"category\":\"Symbols\",\"aliases\":[\"wheelchair\"],\"tags\":[\"accessibility\"]},{\"emoji\":\"🅿️\",\"description\":\"P button\",\"category\":\"Symbols\",\"aliases\":[\"parking\"],\"tags\":[]},{\"emoji\":\"🈳\",\"description\":\"Japanese “vacancy” button\",\"category\":\"Symbols\",\"aliases\":[\"u7a7a\"],\"tags\":[]},{\"emoji\":\"🈂️\",\"description\":\"Japanese “service charge” button\",\"category\":\"Symbols\",\"aliases\":[\"sa\"],\"tags\":[]},{\"emoji\":\"🛂\",\"description\":\"passport control\",\"category\":\"Symbols\",\"aliases\":[\"passport_control\"],\"tags\":[]},{\"emoji\":\"🛃\",\"description\":\"customs\",\"category\":\"Symbols\",\"aliases\":[\"customs\"],\"tags\":[]},{\"emoji\":\"🛄\",\"description\":\"baggage claim\",\"category\":\"Symbols\",\"aliases\":[\"baggage_claim\"],\"tags\":[\"airport\"]},{\"emoji\":\"🛅\",\"description\":\"left luggage\",\"category\":\"Symbols\",\"aliases\":[\"left_luggage\"],\"tags\":[]},{\"emoji\":\"🚹\",\"description\":\"men’s room\",\"category\":\"Symbols\",\"aliases\":[\"mens\"],\"tags\":[]},{\"emoji\":\"🚺\",\"description\":\"women’s room\",\"category\":\"Symbols\",\"aliases\":[\"womens\"],\"tags\":[]},{\"emoji\":\"🚼\",\"description\":\"baby symbol\",\"category\":\"Symbols\",\"aliases\":[\"baby_symbol\"],\"tags\":[]},{\"emoji\":\"🚻\",\"description\":\"restroom\",\"category\":\"Symbols\",\"aliases\":[\"restroom\"],\"tags\":[\"toilet\"]},{\"emoji\":\"🚮\",\"description\":\"litter in bin sign\",\"category\":\"Symbols\",\"aliases\":[\"put_litter_in_its_place\"],\"tags\":[]},{\"emoji\":\"🎦\",\"description\":\"cinema\",\"category\":\"Symbols\",\"aliases\":[\"cinema\"],\"tags\":[\"film\",\"movie\"]},{\"emoji\":\"📶\",\"description\":\"antenna bars\",\"category\":\"Symbols\",\"aliases\":[\"signal_strength\"],\"tags\":[\"wifi\"]},{\"emoji\":\"🈁\",\"description\":\"Japanese “here” button\",\"category\":\"Symbols\",\"aliases\":[\"koko\"],\"tags\":[]},{\"emoji\":\"🔣\",\"description\":\"input symbols\",\"category\":\"Symbols\",\"aliases\":[\"symbols\"],\"tags\":[]},{\"emoji\":\"ℹ️\",\"description\":\"information\",\"category\":\"Symbols\",\"aliases\":[\"information_source\"],\"tags\":[]},{\"emoji\":\"🔤\",\"description\":\"input latin letters\",\"category\":\"Symbols\",\"aliases\":[\"abc\"],\"tags\":[\"alphabet\"]},{\"emoji\":\"🔡\",\"description\":\"input latin lowercase\",\"category\":\"Symbols\",\"aliases\":[\"abcd\"],\"tags\":[]},{\"emoji\":\"🔠\",\"description\":\"input latin uppercase\",\"category\":\"Symbols\",\"aliases\":[\"capital_abcd\"],\"tags\":[\"letters\"]},{\"emoji\":\"🆖\",\"description\":\"NG button\",\"category\":\"Symbols\",\"aliases\":[\"ng\"],\"tags\":[]},{\"emoji\":\"🆗\",\"description\":\"OK button\",\"category\":\"Symbols\",\"aliases\":[\"ok\"],\"tags\":[\"yes\"]},{\"emoji\":\"🆙\",\"description\":\"UP! button\",\"category\":\"Symbols\",\"aliases\":[\"up\"],\"tags\":[]},{\"emoji\":\"🆒\",\"description\":\"COOL button\",\"category\":\"Symbols\",\"aliases\":[\"cool\"],\"tags\":[]},{\"emoji\":\"🆕\",\"description\":\"NEW button\",\"category\":\"Symbols\",\"aliases\":[\"new\"],\"tags\":[\"fresh\"]},{\"emoji\":\"🆓\",\"description\":\"FREE button\",\"category\":\"Symbols\",\"aliases\":[\"free\"],\"tags\":[]},{\"emoji\":\"0️⃣\",\"description\":\"keycap: 0\",\"category\":\"Symbols\",\"aliases\":[\"zero\"],\"tags\":[]},{\"emoji\":\"1️⃣\",\"description\":\"keycap: 1\",\"category\":\"Symbols\",\"aliases\":[\"one\"],\"tags\":[]},{\"emoji\":\"2️⃣\",\"description\":\"keycap: 2\",\"category\":\"Symbols\",\"aliases\":[\"two\"],\"tags\":[]},{\"emoji\":\"3️⃣\",\"description\":\"keycap: 3\",\"category\":\"Symbols\",\"aliases\":[\"three\"],\"tags\":[]},{\"emoji\":\"4️⃣\",\"description\":\"keycap: 4\",\"category\":\"Symbols\",\"aliases\":[\"four\"],\"tags\":[]},{\"emoji\":\"5️⃣\",\"description\":\"keycap: 5\",\"category\":\"Symbols\",\"aliases\":[\"five\"],\"tags\":[]},{\"emoji\":\"6️⃣\",\"description\":\"keycap: 6\",\"category\":\"Symbols\",\"aliases\":[\"six\"],\"tags\":[]},{\"emoji\":\"7️⃣\",\"description\":\"keycap: 7\",\"category\":\"Symbols\",\"aliases\":[\"seven\"],\"tags\":[]},{\"emoji\":\"8️⃣\",\"description\":\"keycap: 8\",\"category\":\"Symbols\",\"aliases\":[\"eight\"],\"tags\":[]},{\"emoji\":\"9️⃣\",\"description\":\"keycap: 9\",\"category\":\"Symbols\",\"aliases\":[\"nine\"],\"tags\":[]},{\"emoji\":\"🔟\",\"description\":\"keycap 10\",\"category\":\"Symbols\",\"aliases\":[\"keycap_ten\"],\"tags\":[]},{\"emoji\":\"🔢\",\"description\":\"input numbers\",\"category\":\"Symbols\",\"aliases\":[\"1234\"],\"tags\":[\"numbers\"]},{\"emoji\":\"#️⃣\",\"description\":\"keycap: #\",\"category\":\"Symbols\",\"aliases\":[\"hash\"],\"tags\":[\"number\"]},{\"emoji\":\"*️⃣\",\"description\":\"keycap: *\",\"category\":\"Symbols\",\"aliases\":[\"asterisk\"],\"tags\":[]},{\"emoji\":\"▶️\",\"description\":\"play button\",\"category\":\"Symbols\",\"aliases\":[\"arrow_forward\"],\"tags\":[]},{\"emoji\":\"⏸\",\"description\":\"pause button\",\"category\":\"Symbols\",\"aliases\":[\"pause_button\"],\"tags\":[]},{\"emoji\":\"⏯\",\"description\":\"play or pause button\",\"category\":\"Symbols\",\"aliases\":[\"play_or_pause_button\"],\"tags\":[]},{\"emoji\":\"⏹\",\"description\":\"stop button\",\"category\":\"Symbols\",\"aliases\":[\"stop_button\"],\"tags\":[]},{\"emoji\":\"⏺\",\"description\":\"record button\",\"category\":\"Symbols\",\"aliases\":[\"record_button\"],\"tags\":[]},{\"emoji\":\"⏭\",\"description\":\"next track button\",\"category\":\"Symbols\",\"aliases\":[\"next_track_button\"],\"tags\":[]},{\"emoji\":\"⏮\",\"description\":\"last track button\",\"category\":\"Symbols\",\"aliases\":[\"previous_track_button\"],\"tags\":[]},{\"emoji\":\"⏩\",\"description\":\"fast-forward button\",\"category\":\"Symbols\",\"aliases\":[\"fast_forward\"],\"tags\":[]},{\"emoji\":\"⏪\",\"description\":\"fast reverse button\",\"category\":\"Symbols\",\"aliases\":[\"rewind\"],\"tags\":[]},{\"emoji\":\"⏫\",\"description\":\"fast up button\",\"category\":\"Symbols\",\"aliases\":[\"arrow_double_up\"],\"tags\":[]},{\"emoji\":\"⏬\",\"description\":\"fast down button\",\"category\":\"Symbols\",\"aliases\":[\"arrow_double_down\"],\"tags\":[]},{\"emoji\":\"◀️\",\"description\":\"reverse button\",\"category\":\"Symbols\",\"aliases\":[\"arrow_backward\"],\"tags\":[]},{\"emoji\":\"🔼\",\"description\":\"up button\",\"category\":\"Symbols\",\"aliases\":[\"arrow_up_small\"],\"tags\":[]},{\"emoji\":\"🔽\",\"description\":\"down button\",\"category\":\"Symbols\",\"aliases\":[\"arrow_down_small\"],\"tags\":[]},{\"emoji\":\"➡️\",\"description\":\"right arrow\",\"category\":\"Symbols\",\"aliases\":[\"arrow_right\"],\"tags\":[]},{\"emoji\":\"⬅️\",\"description\":\"left arrow\",\"category\":\"Symbols\",\"aliases\":[\"arrow_left\"],\"tags\":[]},{\"emoji\":\"⬆️\",\"description\":\"up arrow\",\"category\":\"Symbols\",\"aliases\":[\"arrow_up\"],\"tags\":[]},{\"emoji\":\"⬇️\",\"description\":\"down arrow\",\"category\":\"Symbols\",\"aliases\":[\"arrow_down\"],\"tags\":[]},{\"emoji\":\"↗️\",\"description\":\"up-right arrow\",\"category\":\"Symbols\",\"aliases\":[\"arrow_upper_right\"],\"tags\":[]},{\"emoji\":\"↘️\",\"description\":\"down-right arrow\",\"category\":\"Symbols\",\"aliases\":[\"arrow_lower_right\"],\"tags\":[]},{\"emoji\":\"↙️\",\"description\":\"down-left arrow\",\"category\":\"Symbols\",\"aliases\":[\"arrow_lower_left\"],\"tags\":[]},{\"emoji\":\"↖️\",\"description\":\"up-left arrow\",\"category\":\"Symbols\",\"aliases\":[\"arrow_upper_left\"],\"tags\":[]},{\"emoji\":\"↕️\",\"description\":\"up-down arrow\",\"category\":\"Symbols\",\"aliases\":[\"arrow_up_down\"],\"tags\":[]},{\"emoji\":\"↔️\",\"description\":\"left-right arrow\",\"category\":\"Symbols\",\"aliases\":[\"left_right_arrow\"],\"tags\":[]},{\"emoji\":\"↪️\",\"description\":\"left arrow curving right\",\"category\":\"Symbols\",\"aliases\":[\"arrow_right_hook\"],\"tags\":[]},{\"emoji\":\"↩️\",\"description\":\"right arrow curving left\",\"category\":\"Symbols\",\"aliases\":[\"leftwards_arrow_with_hook\"],\"tags\":[\"return\"]},{\"emoji\":\"⤴️\",\"description\":\"right arrow curving up\",\"category\":\"Symbols\",\"aliases\":[\"arrow_heading_up\"],\"tags\":[]},{\"emoji\":\"⤵️\",\"description\":\"right arrow curving down\",\"category\":\"Symbols\",\"aliases\":[\"arrow_heading_down\"],\"tags\":[]},{\"emoji\":\"🔀\",\"description\":\"shuffle tracks button\",\"category\":\"Symbols\",\"aliases\":[\"twisted_rightwards_arrows\"],\"tags\":[\"shuffle\"]},{\"emoji\":\"🔁\",\"description\":\"repeat button\",\"category\":\"Symbols\",\"aliases\":[\"repeat\"],\"tags\":[\"loop\"]},{\"emoji\":\"🔂\",\"description\":\"repeat single button\",\"category\":\"Symbols\",\"aliases\":[\"repeat_one\"],\"tags\":[]},{\"emoji\":\"🔄\",\"description\":\"anticlockwise arrows button\",\"category\":\"Symbols\",\"aliases\":[\"arrows_counterclockwise\"],\"tags\":[\"sync\"]},{\"emoji\":\"🔃\",\"description\":\"clockwise vertical arrows\",\"category\":\"Symbols\",\"aliases\":[\"arrows_clockwise\"],\"tags\":[]},{\"emoji\":\"🎵\",\"description\":\"musical note\",\"category\":\"Symbols\",\"aliases\":[\"musical_note\"],\"tags\":[]},{\"emoji\":\"🎶\",\"description\":\"musical notes\",\"category\":\"Symbols\",\"aliases\":[\"notes\"],\"tags\":[\"music\"]},{\"emoji\":\"➕\",\"description\":\"heavy plus sign\",\"category\":\"Symbols\",\"aliases\":[\"heavy_plus_sign\"],\"tags\":[]},{\"emoji\":\"➖\",\"description\":\"heavy minus sign\",\"category\":\"Symbols\",\"aliases\":[\"heavy_minus_sign\"],\"tags\":[]},{\"emoji\":\"➗\",\"description\":\"heavy division sign\",\"category\":\"Symbols\",\"aliases\":[\"heavy_division_sign\"],\"tags\":[]},{\"emoji\":\"✖️\",\"description\":\"heavy multiplication x\",\"category\":\"Symbols\",\"aliases\":[\"heavy_multiplication_x\"],\"tags\":[]},{\"emoji\":\"💲\",\"description\":\"heavy dollar sign\",\"category\":\"Symbols\",\"aliases\":[\"heavy_dollar_sign\"],\"tags\":[]},{\"emoji\":\"💱\",\"description\":\"currency exchange\",\"category\":\"Symbols\",\"aliases\":[\"currency_exchange\"],\"tags\":[]},{\"emoji\":\"™️\",\"description\":\"trade mark\",\"category\":\"Symbols\",\"aliases\":[\"tm\"],\"tags\":[\"trademark\"]},{\"emoji\":\"©️\",\"description\":\"copyright\",\"category\":\"Symbols\",\"aliases\":[\"copyright\"],\"tags\":[]},{\"emoji\":\"®️\",\"description\":\"registered\",\"category\":\"Symbols\",\"aliases\":[\"registered\"],\"tags\":[]},{\"emoji\":\"〰️\",\"description\":\"wavy dash\",\"category\":\"Symbols\",\"aliases\":[\"wavy_dash\"],\"tags\":[]},{\"emoji\":\"➰\",\"description\":\"curly loop\",\"category\":\"Symbols\",\"aliases\":[\"curly_loop\"],\"tags\":[]},{\"emoji\":\"➿\",\"description\":\"double curly loop\",\"category\":\"Symbols\",\"aliases\":[\"loop\"],\"tags\":[]},{\"emoji\":\"🔚\",\"description\":\"END arrow\",\"category\":\"Symbols\",\"aliases\":[\"end\"],\"tags\":[]},{\"emoji\":\"🔙\",\"description\":\"BACK arrow\",\"category\":\"Symbols\",\"aliases\":[\"back\"],\"tags\":[]},{\"emoji\":\"🔛\",\"description\":\"ON! arrow\",\"category\":\"Symbols\",\"aliases\":[\"on\"],\"tags\":[]},{\"emoji\":\"🔝\",\"description\":\"TOP arrow\",\"category\":\"Symbols\",\"aliases\":[\"top\"],\"tags\":[]},{\"emoji\":\"🔜\",\"description\":\"SOON arrow\",\"category\":\"Symbols\",\"aliases\":[\"soon\"],\"tags\":[]},{\"emoji\":\"✔️\",\"description\":\"heavy check mark\",\"category\":\"Symbols\",\"aliases\":[\"heavy_check_mark\"],\"tags\":[]},{\"emoji\":\"☑️\",\"description\":\"ballot box with check\",\"category\":\"Symbols\",\"aliases\":[\"ballot_box_with_check\"],\"tags\":[]},{\"emoji\":\"🔘\",\"description\":\"radio button\",\"category\":\"Symbols\",\"aliases\":[\"radio_button\"],\"tags\":[]},{\"emoji\":\"⚪️\",\"description\":\"white circle\",\"category\":\"Symbols\",\"aliases\":[\"white_circle\"],\"tags\":[]},{\"emoji\":\"⚫️\",\"description\":\"black circle\",\"category\":\"Symbols\",\"aliases\":[\"black_circle\"],\"tags\":[]},{\"emoji\":\"🔴\",\"description\":\"red circle\",\"category\":\"Symbols\",\"aliases\":[\"red_circle\"],\"tags\":[]},{\"emoji\":\"🔵\",\"description\":\"blue circle\",\"category\":\"Symbols\",\"aliases\":[\"large_blue_circle\"],\"tags\":[]},{\"emoji\":\"🔺\",\"description\":\"red triangle pointed up\",\"category\":\"Symbols\",\"aliases\":[\"small_red_triangle\"],\"tags\":[]},{\"emoji\":\"🔻\",\"description\":\"red triangle pointed down\",\"category\":\"Symbols\",\"aliases\":[\"small_red_triangle_down\"],\"tags\":[]},{\"emoji\":\"🔸\",\"description\":\"small orange diamond\",\"category\":\"Symbols\",\"aliases\":[\"small_orange_diamond\"],\"tags\":[]},{\"emoji\":\"🔹\",\"description\":\"small blue diamond\",\"category\":\"Symbols\",\"aliases\":[\"small_blue_diamond\"],\"tags\":[]},{\"emoji\":\"🔶\",\"description\":\"large orange diamond\",\"category\":\"Symbols\",\"aliases\":[\"large_orange_diamond\"],\"tags\":[]},{\"emoji\":\"🔷\",\"description\":\"large blue diamond\",\"category\":\"Symbols\",\"aliases\":[\"large_blue_diamond\"],\"tags\":[]},{\"emoji\":\"🔳\",\"description\":\"white square button\",\"category\":\"Symbols\",\"aliases\":[\"white_square_button\"],\"tags\":[]},{\"emoji\":\"🔲\",\"description\":\"black square button\",\"category\":\"Symbols\",\"aliases\":[\"black_square_button\"],\"tags\":[]},{\"emoji\":\"▪️\",\"description\":\"black small square\",\"category\":\"Symbols\",\"aliases\":[\"black_small_square\"],\"tags\":[]},{\"emoji\":\"▫️\",\"description\":\"white small square\",\"category\":\"Symbols\",\"aliases\":[\"white_small_square\"],\"tags\":[]},{\"emoji\":\"◾️\",\"description\":\"black medium-small square\",\"category\":\"Symbols\",\"aliases\":[\"black_medium_small_square\"],\"tags\":[]},{\"emoji\":\"◽️\",\"description\":\"white medium-small square\",\"category\":\"Symbols\",\"aliases\":[\"white_medium_small_square\"],\"tags\":[]},{\"emoji\":\"◼️\",\"description\":\"black medium square\",\"category\":\"Symbols\",\"aliases\":[\"black_medium_square\"],\"tags\":[]},{\"emoji\":\"◻️\",\"description\":\"white medium square\",\"category\":\"Symbols\",\"aliases\":[\"white_medium_square\"],\"tags\":[]},{\"emoji\":\"⬛️\",\"description\":\"black large square\",\"category\":\"Symbols\",\"aliases\":[\"black_large_square\"],\"tags\":[]},{\"emoji\":\"⬜️\",\"description\":\"white large square\",\"category\":\"Symbols\",\"aliases\":[\"white_large_square\"],\"tags\":[]},{\"emoji\":\"🔈\",\"description\":\"speaker low volume\",\"category\":\"Symbols\",\"aliases\":[\"speaker\"],\"tags\":[]},{\"emoji\":\"🔇\",\"description\":\"muted speaker\",\"category\":\"Symbols\",\"aliases\":[\"mute\"],\"tags\":[\"sound\",\"volume\"]},{\"emoji\":\"🔉\",\"description\":\"speaker medium volume\",\"category\":\"Symbols\",\"aliases\":[\"sound\"],\"tags\":[\"volume\"]},{\"emoji\":\"🔊\",\"description\":\"speaker high volume\",\"category\":\"Symbols\",\"aliases\":[\"loud_sound\"],\"tags\":[\"volume\"]},{\"emoji\":\"🔔\",\"description\":\"bell\",\"category\":\"Symbols\",\"aliases\":[\"bell\"],\"tags\":[\"sound\",\"notification\"]},{\"emoji\":\"🔕\",\"description\":\"bell with slash\",\"category\":\"Symbols\",\"aliases\":[\"no_bell\"],\"tags\":[\"volume\",\"off\"]},{\"emoji\":\"📣\",\"description\":\"megaphone\",\"category\":\"Symbols\",\"aliases\":[\"mega\"],\"tags\":[]},{\"emoji\":\"📢\",\"description\":\"loudspeaker\",\"category\":\"Symbols\",\"aliases\":[\"loudspeaker\"],\"tags\":[\"announcement\"]},{\"emoji\":\"👁‍🗨\",\"description\":\"eye in speech bubble\",\"category\":\"Symbols\",\"aliases\":[\"eye_speech_bubble\"],\"tags\":[]},{\"emoji\":\"💬\",\"description\":\"speech balloon\",\"category\":\"Symbols\",\"aliases\":[\"speech_balloon\"],\"tags\":[\"comment\"]},{\"emoji\":\"💭\",\"description\":\"thought balloon\",\"category\":\"Symbols\",\"aliases\":[\"thought_balloon\"],\"tags\":[\"thinking\"]},{\"emoji\":\"🗯\",\"description\":\"right anger bubble\",\"category\":\"Symbols\",\"aliases\":[\"right_anger_bubble\"],\"tags\":[]},{\"emoji\":\"♠️\",\"description\":\"spade suit\",\"category\":\"Symbols\",\"aliases\":[\"spades\"],\"tags\":[]},{\"emoji\":\"♣️\",\"description\":\"club suit\",\"category\":\"Symbols\",\"aliases\":[\"clubs\"],\"tags\":[]},{\"emoji\":\"♥️\",\"description\":\"heart suit\",\"category\":\"Symbols\",\"aliases\":[\"hearts\"],\"tags\":[]},{\"emoji\":\"♦️\",\"description\":\"diamond suit\",\"category\":\"Symbols\",\"aliases\":[\"diamonds\"],\"tags\":[]},{\"emoji\":\"🃏\",\"description\":\"joker\",\"category\":\"Symbols\",\"aliases\":[\"black_joker\"],\"tags\":[]},{\"emoji\":\"🎴\",\"description\":\"flower playing cards\",\"category\":\"Symbols\",\"aliases\":[\"flower_playing_cards\"],\"tags\":[]},{\"emoji\":\"🀄️\",\"description\":\"mahjong red dragon\",\"category\":\"Symbols\",\"aliases\":[\"mahjong\"],\"tags\":[]},{\"emoji\":\"🕐\",\"description\":\"one o’clock\",\"category\":\"Symbols\",\"aliases\":[\"clock1\"],\"tags\":[]},{\"emoji\":\"🕑\",\"description\":\"two o’clock\",\"category\":\"Symbols\",\"aliases\":[\"clock2\"],\"tags\":[]},{\"emoji\":\"🕒\",\"description\":\"three o’clock\",\"category\":\"Symbols\",\"aliases\":[\"clock3\"],\"tags\":[]},{\"emoji\":\"🕓\",\"description\":\"four o’clock\",\"category\":\"Symbols\",\"aliases\":[\"clock4\"],\"tags\":[]},{\"emoji\":\"🕔\",\"description\":\"five o’clock\",\"category\":\"Symbols\",\"aliases\":[\"clock5\"],\"tags\":[]},{\"emoji\":\"🕕\",\"description\":\"six o’clock\",\"category\":\"Symbols\",\"aliases\":[\"clock6\"],\"tags\":[]},{\"emoji\":\"🕖\",\"description\":\"seven o’clock\",\"category\":\"Symbols\",\"aliases\":[\"clock7\"],\"tags\":[]},{\"emoji\":\"🕗\",\"description\":\"eight o’clock\",\"category\":\"Symbols\",\"aliases\":[\"clock8\"],\"tags\":[]},{\"emoji\":\"🕘\",\"description\":\"nine o’clock\",\"category\":\"Symbols\",\"aliases\":[\"clock9\"],\"tags\":[]},{\"emoji\":\"🕙\",\"description\":\"ten o’clock\",\"category\":\"Symbols\",\"aliases\":[\"clock10\"],\"tags\":[]},{\"emoji\":\"🕚\",\"description\":\"eleven o’clock\",\"category\":\"Symbols\",\"aliases\":[\"clock11\"],\"tags\":[]},{\"emoji\":\"🕛\",\"description\":\"twelve o’clock\",\"category\":\"Symbols\",\"aliases\":[\"clock12\"],\"tags\":[]},{\"emoji\":\"🕜\",\"description\":\"one-thirty\",\"category\":\"Symbols\",\"aliases\":[\"clock130\"],\"tags\":[]},{\"emoji\":\"🕝\",\"description\":\"two-thirty\",\"category\":\"Symbols\",\"aliases\":[\"clock230\"],\"tags\":[]},{\"emoji\":\"🕞\",\"description\":\"three-thirty\",\"category\":\"Symbols\",\"aliases\":[\"clock330\"],\"tags\":[]},{\"emoji\":\"🕟\",\"description\":\"four-thirty\",\"category\":\"Symbols\",\"aliases\":[\"clock430\"],\"tags\":[]},{\"emoji\":\"🕠\",\"description\":\"five-thirty\",\"category\":\"Symbols\",\"aliases\":[\"clock530\"],\"tags\":[]},{\"emoji\":\"🕡\",\"description\":\"six-thirty\",\"category\":\"Symbols\",\"aliases\":[\"clock630\"],\"tags\":[]},{\"emoji\":\"🕢\",\"description\":\"seven-thirty\",\"category\":\"Symbols\",\"aliases\":[\"clock730\"],\"tags\":[]},{\"emoji\":\"🕣\",\"description\":\"eight-thirty\",\"category\":\"Symbols\",\"aliases\":[\"clock830\"],\"tags\":[]},{\"emoji\":\"🕤\",\"description\":\"nine-thirty\",\"category\":\"Symbols\",\"aliases\":[\"clock930\"],\"tags\":[]},{\"emoji\":\"🕥\",\"description\":\"ten-thirty\",\"category\":\"Symbols\",\"aliases\":[\"clock1030\"],\"tags\":[]},{\"emoji\":\"🕦\",\"description\":\"eleven-thirty\",\"category\":\"Symbols\",\"aliases\":[\"clock1130\"],\"tags\":[]},{\"emoji\":\"🕧\",\"description\":\"twelve-thirty\",\"category\":\"Symbols\",\"aliases\":[\"clock1230\"],\"tags\":[]},{\"emoji\":\"🏳️\",\"description\":\"white flag\",\"category\":\"Flags\",\"aliases\":[\"white_flag\"],\"tags\":[]},{\"emoji\":\"🏴\",\"description\":\"black flag\",\"category\":\"Flags\",\"aliases\":[\"black_flag\"],\"tags\":[]},{\"emoji\":\"🏁\",\"description\":\"chequered flag\",\"category\":\"Flags\",\"aliases\":[\"checkered_flag\"],\"tags\":[\"milestone\",\"finish\"]},{\"emoji\":\"🚩\",\"description\":\"triangular flag\",\"category\":\"Flags\",\"aliases\":[\"triangular_flag_on_post\"],\"tags\":[]},{\"emoji\":\"🏳️‍🌈\",\"description\":\"rainbow flag\",\"category\":\"Flags\",\"aliases\":[\"rainbow_flag\"],\"tags\":[\"pride\"]},{\"emoji\":\"🇦🇫\",\"description\":\"Afghanistan\",\"category\":\"Flags\",\"aliases\":[\"afghanistan\"],\"tags\":[]},{\"emoji\":\"🇦🇽\",\"description\":\"Åland Islands\",\"category\":\"Flags\",\"aliases\":[\"aland_islands\"],\"tags\":[]},{\"emoji\":\"🇦🇱\",\"description\":\"Albania\",\"category\":\"Flags\",\"aliases\":[\"albania\"],\"tags\":[]},{\"emoji\":\"🇩🇿\",\"description\":\"Algeria\",\"category\":\"Flags\",\"aliases\":[\"algeria\"],\"tags\":[]},{\"emoji\":\"🇦🇸\",\"description\":\"American Samoa\",\"category\":\"Flags\",\"aliases\":[\"american_samoa\"],\"tags\":[]},{\"emoji\":\"🇦🇩\",\"description\":\"Andorra\",\"category\":\"Flags\",\"aliases\":[\"andorra\"],\"tags\":[]},{\"emoji\":\"🇦🇴\",\"description\":\"Angola\",\"category\":\"Flags\",\"aliases\":[\"angola\"],\"tags\":[]},{\"emoji\":\"🇦🇮\",\"description\":\"Anguilla\",\"category\":\"Flags\",\"aliases\":[\"anguilla\"],\"tags\":[]},{\"emoji\":\"🇦🇶\",\"description\":\"Antarctica\",\"category\":\"Flags\",\"aliases\":[\"antarctica\"],\"tags\":[]},{\"emoji\":\"🇦🇬\",\"description\":\"Antigua & Barbuda\",\"category\":\"Flags\",\"aliases\":[\"antigua_barbuda\"],\"tags\":[]},{\"emoji\":\"🇦🇷\",\"description\":\"Argentina\",\"category\":\"Flags\",\"aliases\":[\"argentina\"],\"tags\":[]},{\"emoji\":\"🇦🇲\",\"description\":\"Armenia\",\"category\":\"Flags\",\"aliases\":[\"armenia\"],\"tags\":[]},{\"emoji\":\"🇦🇼\",\"description\":\"Aruba\",\"category\":\"Flags\",\"aliases\":[\"aruba\"],\"tags\":[]},{\"emoji\":\"🇦🇺\",\"description\":\"Australia\",\"category\":\"Flags\",\"aliases\":[\"australia\"],\"tags\":[]},{\"emoji\":\"🇦🇹\",\"description\":\"Austria\",\"category\":\"Flags\",\"aliases\":[\"austria\"],\"tags\":[]},{\"emoji\":\"🇦🇿\",\"description\":\"Azerbaijan\",\"category\":\"Flags\",\"aliases\":[\"azerbaijan\"],\"tags\":[]},{\"emoji\":\"🇧🇸\",\"description\":\"Bahamas\",\"category\":\"Flags\",\"aliases\":[\"bahamas\"],\"tags\":[]},{\"emoji\":\"🇧🇭\",\"description\":\"Bahrain\",\"category\":\"Flags\",\"aliases\":[\"bahrain\"],\"tags\":[]},{\"emoji\":\"🇧🇩\",\"description\":\"Bangladesh\",\"category\":\"Flags\",\"aliases\":[\"bangladesh\"],\"tags\":[]},{\"emoji\":\"🇧🇧\",\"description\":\"Barbados\",\"category\":\"Flags\",\"aliases\":[\"barbados\"],\"tags\":[]},{\"emoji\":\"🇧🇾\",\"description\":\"Belarus\",\"category\":\"Flags\",\"aliases\":[\"belarus\"],\"tags\":[]},{\"emoji\":\"🇧🇪\",\"description\":\"Belgium\",\"category\":\"Flags\",\"aliases\":[\"belgium\"],\"tags\":[]},{\"emoji\":\"🇧🇿\",\"description\":\"Belize\",\"category\":\"Flags\",\"aliases\":[\"belize\"],\"tags\":[]},{\"emoji\":\"🇧🇯\",\"description\":\"Benin\",\"category\":\"Flags\",\"aliases\":[\"benin\"],\"tags\":[]},{\"emoji\":\"🇧🇲\",\"description\":\"Bermuda\",\"category\":\"Flags\",\"aliases\":[\"bermuda\"],\"tags\":[]},{\"emoji\":\"🇧🇹\",\"description\":\"Bhutan\",\"category\":\"Flags\",\"aliases\":[\"bhutan\"],\"tags\":[]},{\"emoji\":\"🇧🇴\",\"description\":\"Bolivia\",\"category\":\"Flags\",\"aliases\":[\"bolivia\"],\"tags\":[]},{\"emoji\":\"🇧🇶\",\"description\":\"Caribbean Netherlands\",\"category\":\"Flags\",\"aliases\":[\"caribbean_netherlands\"],\"tags\":[]},{\"emoji\":\"🇧🇦\",\"description\":\"Bosnia & Herzegovina\",\"category\":\"Flags\",\"aliases\":[\"bosnia_herzegovina\"],\"tags\":[]},{\"emoji\":\"🇧🇼\",\"description\":\"Botswana\",\"category\":\"Flags\",\"aliases\":[\"botswana\"],\"tags\":[]},{\"emoji\":\"🇧🇷\",\"description\":\"Brazil\",\"category\":\"Flags\",\"aliases\":[\"brazil\"],\"tags\":[]},{\"emoji\":\"🇮🇴\",\"description\":\"British Indian Ocean Territory\",\"category\":\"Flags\",\"aliases\":[\"british_indian_ocean_territory\"],\"tags\":[]},{\"emoji\":\"🇻🇬\",\"description\":\"British Virgin Islands\",\"category\":\"Flags\",\"aliases\":[\"british_virgin_islands\"],\"tags\":[]},{\"emoji\":\"🇧🇳\",\"description\":\"Brunei\",\"category\":\"Flags\",\"aliases\":[\"brunei\"],\"tags\":[]},{\"emoji\":\"🇧🇬\",\"description\":\"Bulgaria\",\"category\":\"Flags\",\"aliases\":[\"bulgaria\"],\"tags\":[]},{\"emoji\":\"🇧🇫\",\"description\":\"Burkina Faso\",\"category\":\"Flags\",\"aliases\":[\"burkina_faso\"],\"tags\":[]},{\"emoji\":\"🇧🇮\",\"description\":\"Burundi\",\"category\":\"Flags\",\"aliases\":[\"burundi\"],\"tags\":[]},{\"emoji\":\"🇨🇻\",\"description\":\"Cape Verde\",\"category\":\"Flags\",\"aliases\":[\"cape_verde\"],\"tags\":[]},{\"emoji\":\"🇰🇭\",\"description\":\"Cambodia\",\"category\":\"Flags\",\"aliases\":[\"cambodia\"],\"tags\":[]},{\"emoji\":\"🇨🇲\",\"description\":\"Cameroon\",\"category\":\"Flags\",\"aliases\":[\"cameroon\"],\"tags\":[]},{\"emoji\":\"🇨🇦\",\"description\":\"Canada\",\"category\":\"Flags\",\"aliases\":[\"canada\"],\"tags\":[]},{\"emoji\":\"🇮🇨\",\"description\":\"Canary Islands\",\"category\":\"Flags\",\"aliases\":[\"canary_islands\"],\"tags\":[]},{\"emoji\":\"🇰🇾\",\"description\":\"Cayman Islands\",\"category\":\"Flags\",\"aliases\":[\"cayman_islands\"],\"tags\":[]},{\"emoji\":\"🇨🇫\",\"description\":\"Central African Republic\",\"category\":\"Flags\",\"aliases\":[\"central_african_republic\"],\"tags\":[]},{\"emoji\":\"🇹🇩\",\"description\":\"Chad\",\"category\":\"Flags\",\"aliases\":[\"chad\"],\"tags\":[]},{\"emoji\":\"🇨🇱\",\"description\":\"Chile\",\"category\":\"Flags\",\"aliases\":[\"chile\"],\"tags\":[]},{\"emoji\":\"🇨🇳\",\"description\":\"China\",\"category\":\"Flags\",\"aliases\":[\"cn\"],\"tags\":[\"china\"]},{\"emoji\":\"🇨🇽\",\"description\":\"Christmas Island\",\"category\":\"Flags\",\"aliases\":[\"christmas_island\"],\"tags\":[]},{\"emoji\":\"🇨🇨\",\"description\":\"Cocos (Keeling) Islands\",\"category\":\"Flags\",\"aliases\":[\"cocos_islands\"],\"tags\":[\"keeling\"]},{\"emoji\":\"🇨🇴\",\"description\":\"Colombia\",\"category\":\"Flags\",\"aliases\":[\"colombia\"],\"tags\":[]},{\"emoji\":\"🇰🇲\",\"description\":\"Comoros\",\"category\":\"Flags\",\"aliases\":[\"comoros\"],\"tags\":[]},{\"emoji\":\"🇨🇬\",\"description\":\"Congo - Brazzaville\",\"category\":\"Flags\",\"aliases\":[\"congo_brazzaville\"],\"tags\":[]},{\"emoji\":\"🇨🇩\",\"description\":\"Congo - Kinshasa\",\"category\":\"Flags\",\"aliases\":[\"congo_kinshasa\"],\"tags\":[]},{\"emoji\":\"🇨🇰\",\"description\":\"Cook Islands\",\"category\":\"Flags\",\"aliases\":[\"cook_islands\"],\"tags\":[]},{\"emoji\":\"🇨🇷\",\"description\":\"Costa Rica\",\"category\":\"Flags\",\"aliases\":[\"costa_rica\"],\"tags\":[]},{\"emoji\":\"🇨🇮\",\"description\":\"Côte d’Ivoire\",\"category\":\"Flags\",\"aliases\":[\"cote_divoire\"],\"tags\":[\"ivory\"]},{\"emoji\":\"🇭🇷\",\"description\":\"Croatia\",\"category\":\"Flags\",\"aliases\":[\"croatia\"],\"tags\":[]},{\"emoji\":\"🇨🇺\",\"description\":\"Cuba\",\"category\":\"Flags\",\"aliases\":[\"cuba\"],\"tags\":[]},{\"emoji\":\"🇨🇼\",\"description\":\"Curaçao\",\"category\":\"Flags\",\"aliases\":[\"curacao\"],\"tags\":[]},{\"emoji\":\"🇨🇾\",\"description\":\"Cyprus\",\"category\":\"Flags\",\"aliases\":[\"cyprus\"],\"tags\":[]},{\"emoji\":\"🇨🇿\",\"description\":\"Czech Republic\",\"category\":\"Flags\",\"aliases\":[\"czech_republic\"],\"tags\":[]},{\"emoji\":\"🇩🇰\",\"description\":\"Denmark\",\"category\":\"Flags\",\"aliases\":[\"denmark\"],\"tags\":[]},{\"emoji\":\"🇩🇯\",\"description\":\"Djibouti\",\"category\":\"Flags\",\"aliases\":[\"djibouti\"],\"tags\":[]},{\"emoji\":\"🇩🇲\",\"description\":\"Dominica\",\"category\":\"Flags\",\"aliases\":[\"dominica\"],\"tags\":[]},{\"emoji\":\"🇩🇴\",\"description\":\"Dominican Republic\",\"category\":\"Flags\",\"aliases\":[\"dominican_republic\"],\"tags\":[]},{\"emoji\":\"🇪🇨\",\"description\":\"Ecuador\",\"category\":\"Flags\",\"aliases\":[\"ecuador\"],\"tags\":[]},{\"emoji\":\"🇪🇬\",\"description\":\"Egypt\",\"category\":\"Flags\",\"aliases\":[\"egypt\"],\"tags\":[]},{\"emoji\":\"🇸🇻\",\"description\":\"El Salvador\",\"category\":\"Flags\",\"aliases\":[\"el_salvador\"],\"tags\":[]},{\"emoji\":\"🇬🇶\",\"description\":\"Equatorial Guinea\",\"category\":\"Flags\",\"aliases\":[\"equatorial_guinea\"],\"tags\":[]},{\"emoji\":\"🇪🇷\",\"description\":\"Eritrea\",\"category\":\"Flags\",\"aliases\":[\"eritrea\"],\"tags\":[]},{\"emoji\":\"🇪🇪\",\"description\":\"Estonia\",\"category\":\"Flags\",\"aliases\":[\"estonia\"],\"tags\":[]},{\"emoji\":\"🇪🇹\",\"description\":\"Ethiopia\",\"category\":\"Flags\",\"aliases\":[\"ethiopia\"],\"tags\":[]},{\"emoji\":\"🇪🇺\",\"description\":\"European Union\",\"category\":\"Flags\",\"aliases\":[\"eu\",\"european_union\"],\"tags\":[]},{\"emoji\":\"🇫🇰\",\"description\":\"Falkland Islands\",\"category\":\"Flags\",\"aliases\":[\"falkland_islands\"],\"tags\":[]},{\"emoji\":\"🇫🇴\",\"description\":\"Faroe Islands\",\"category\":\"Flags\",\"aliases\":[\"faroe_islands\"],\"tags\":[]},{\"emoji\":\"🇫🇯\",\"description\":\"Fiji\",\"category\":\"Flags\",\"aliases\":[\"fiji\"],\"tags\":[]},{\"emoji\":\"🇫🇮\",\"description\":\"Finland\",\"category\":\"Flags\",\"aliases\":[\"finland\"],\"tags\":[]},{\"emoji\":\"🇫🇷\",\"description\":\"France\",\"category\":\"Flags\",\"aliases\":[\"fr\"],\"tags\":[\"france\",\"french\"]},{\"emoji\":\"🇬🇫\",\"description\":\"French Guiana\",\"category\":\"Flags\",\"aliases\":[\"french_guiana\"],\"tags\":[]},{\"emoji\":\"🇵🇫\",\"description\":\"French Polynesia\",\"category\":\"Flags\",\"aliases\":[\"french_polynesia\"],\"tags\":[]},{\"emoji\":\"🇹🇫\",\"description\":\"French Southern Territories\",\"category\":\"Flags\",\"aliases\":[\"french_southern_territories\"],\"tags\":[]},{\"emoji\":\"🇬🇦\",\"description\":\"Gabon\",\"category\":\"Flags\",\"aliases\":[\"gabon\"],\"tags\":[]},{\"emoji\":\"🇬🇲\",\"description\":\"Gambia\",\"category\":\"Flags\",\"aliases\":[\"gambia\"],\"tags\":[]},{\"emoji\":\"🇬🇪\",\"description\":\"Georgia\",\"category\":\"Flags\",\"aliases\":[\"georgia\"],\"tags\":[]},{\"emoji\":\"🇩🇪\",\"description\":\"Germany\",\"category\":\"Flags\",\"aliases\":[\"de\"],\"tags\":[\"flag\",\"germany\"]},{\"emoji\":\"🇬🇭\",\"description\":\"Ghana\",\"category\":\"Flags\",\"aliases\":[\"ghana\"],\"tags\":[]},{\"emoji\":\"🇬🇮\",\"description\":\"Gibraltar\",\"category\":\"Flags\",\"aliases\":[\"gibraltar\"],\"tags\":[]},{\"emoji\":\"🇬🇷\",\"description\":\"Greece\",\"category\":\"Flags\",\"aliases\":[\"greece\"],\"tags\":[]},{\"emoji\":\"🇬🇱\",\"description\":\"Greenland\",\"category\":\"Flags\",\"aliases\":[\"greenland\"],\"tags\":[]},{\"emoji\":\"🇬🇩\",\"description\":\"Grenada\",\"category\":\"Flags\",\"aliases\":[\"grenada\"],\"tags\":[]},{\"emoji\":\"🇬🇵\",\"description\":\"Guadeloupe\",\"category\":\"Flags\",\"aliases\":[\"guadeloupe\"],\"tags\":[]},{\"emoji\":\"🇬🇺\",\"description\":\"Guam\",\"category\":\"Flags\",\"aliases\":[\"guam\"],\"tags\":[]},{\"emoji\":\"🇬🇹\",\"description\":\"Guatemala\",\"category\":\"Flags\",\"aliases\":[\"guatemala\"],\"tags\":[]},{\"emoji\":\"🇬🇬\",\"description\":\"Guernsey\",\"category\":\"Flags\",\"aliases\":[\"guernsey\"],\"tags\":[]},{\"emoji\":\"🇬🇳\",\"description\":\"Guinea\",\"category\":\"Flags\",\"aliases\":[\"guinea\"],\"tags\":[]},{\"emoji\":\"🇬🇼\",\"description\":\"Guinea-Bissau\",\"category\":\"Flags\",\"aliases\":[\"guinea_bissau\"],\"tags\":[]},{\"emoji\":\"🇬🇾\",\"description\":\"Guyana\",\"category\":\"Flags\",\"aliases\":[\"guyana\"],\"tags\":[]},{\"emoji\":\"🇭🇹\",\"description\":\"Haiti\",\"category\":\"Flags\",\"aliases\":[\"haiti\"],\"tags\":[]},{\"emoji\":\"🇭🇳\",\"description\":\"Honduras\",\"category\":\"Flags\",\"aliases\":[\"honduras\"],\"tags\":[]},{\"emoji\":\"🇭🇰\",\"description\":\"Hong Kong SAR China\",\"category\":\"Flags\",\"aliases\":[\"hong_kong\"],\"tags\":[]},{\"emoji\":\"🇭🇺\",\"description\":\"Hungary\",\"category\":\"Flags\",\"aliases\":[\"hungary\"],\"tags\":[]},{\"emoji\":\"🇮🇸\",\"description\":\"Iceland\",\"category\":\"Flags\",\"aliases\":[\"iceland\"],\"tags\":[]},{\"emoji\":\"🇮🇳\",\"description\":\"India\",\"category\":\"Flags\",\"aliases\":[\"india\"],\"tags\":[]},{\"emoji\":\"🇮🇩\",\"description\":\"Indonesia\",\"category\":\"Flags\",\"aliases\":[\"indonesia\"],\"tags\":[]},{\"emoji\":\"🇮🇷\",\"description\":\"Iran\",\"category\":\"Flags\",\"aliases\":[\"iran\"],\"tags\":[]},{\"emoji\":\"🇮🇶\",\"description\":\"Iraq\",\"category\":\"Flags\",\"aliases\":[\"iraq\"],\"tags\":[]},{\"emoji\":\"🇮🇪\",\"description\":\"Ireland\",\"category\":\"Flags\",\"aliases\":[\"ireland\"],\"tags\":[]},{\"emoji\":\"🇮🇲\",\"description\":\"Isle of Man\",\"category\":\"Flags\",\"aliases\":[\"isle_of_man\"],\"tags\":[]},{\"emoji\":\"🇮🇱\",\"description\":\"Israel\",\"category\":\"Flags\",\"aliases\":[\"israel\"],\"tags\":[]},{\"emoji\":\"🇮🇹\",\"description\":\"Italy\",\"category\":\"Flags\",\"aliases\":[\"it\"],\"tags\":[\"italy\"]},{\"emoji\":\"🇯🇲\",\"description\":\"Jamaica\",\"category\":\"Flags\",\"aliases\":[\"jamaica\"],\"tags\":[]},{\"emoji\":\"🇯🇵\",\"description\":\"Japan\",\"category\":\"Flags\",\"aliases\":[\"jp\"],\"tags\":[\"japan\"]},{\"emoji\":\"🎌\",\"description\":\"crossed flags\",\"category\":\"Flags\",\"aliases\":[\"crossed_flags\"],\"tags\":[]},{\"emoji\":\"🇯🇪\",\"description\":\"Jersey\",\"category\":\"Flags\",\"aliases\":[\"jersey\"],\"tags\":[]},{\"emoji\":\"🇯🇴\",\"description\":\"Jordan\",\"category\":\"Flags\",\"aliases\":[\"jordan\"],\"tags\":[]},{\"emoji\":\"🇰🇿\",\"description\":\"Kazakhstan\",\"category\":\"Flags\",\"aliases\":[\"kazakhstan\"],\"tags\":[]},{\"emoji\":\"🇰🇪\",\"description\":\"Kenya\",\"category\":\"Flags\",\"aliases\":[\"kenya\"],\"tags\":[]},{\"emoji\":\"🇰🇮\",\"description\":\"Kiribati\",\"category\":\"Flags\",\"aliases\":[\"kiribati\"],\"tags\":[]},{\"emoji\":\"🇽🇰\",\"description\":\"Kosovo\",\"category\":\"Flags\",\"aliases\":[\"kosovo\"],\"tags\":[]},{\"emoji\":\"🇰🇼\",\"description\":\"Kuwait\",\"category\":\"Flags\",\"aliases\":[\"kuwait\"],\"tags\":[]},{\"emoji\":\"🇰🇬\",\"description\":\"Kyrgyzstan\",\"category\":\"Flags\",\"aliases\":[\"kyrgyzstan\"],\"tags\":[]},{\"emoji\":\"🇱🇦\",\"description\":\"Laos\",\"category\":\"Flags\",\"aliases\":[\"laos\"],\"tags\":[]},{\"emoji\":\"🇱🇻\",\"description\":\"Latvia\",\"category\":\"Flags\",\"aliases\":[\"latvia\"],\"tags\":[]},{\"emoji\":\"🇱🇧\",\"description\":\"Lebanon\",\"category\":\"Flags\",\"aliases\":[\"lebanon\"],\"tags\":[]},{\"emoji\":\"🇱🇸\",\"description\":\"Lesotho\",\"category\":\"Flags\",\"aliases\":[\"lesotho\"],\"tags\":[]},{\"emoji\":\"🇱🇷\",\"description\":\"Liberia\",\"category\":\"Flags\",\"aliases\":[\"liberia\"],\"tags\":[]},{\"emoji\":\"🇱🇾\",\"description\":\"Libya\",\"category\":\"Flags\",\"aliases\":[\"libya\"],\"tags\":[]},{\"emoji\":\"🇱🇮\",\"description\":\"Liechtenstein\",\"category\":\"Flags\",\"aliases\":[\"liechtenstein\"],\"tags\":[]},{\"emoji\":\"🇱🇹\",\"description\":\"Lithuania\",\"category\":\"Flags\",\"aliases\":[\"lithuania\"],\"tags\":[]},{\"emoji\":\"🇱🇺\",\"description\":\"Luxembourg\",\"category\":\"Flags\",\"aliases\":[\"luxembourg\"],\"tags\":[]},{\"emoji\":\"🇲🇴\",\"description\":\"Macau SAR China\",\"category\":\"Flags\",\"aliases\":[\"macau\"],\"tags\":[]},{\"emoji\":\"🇲🇰\",\"description\":\"Macedonia\",\"category\":\"Flags\",\"aliases\":[\"macedonia\"],\"tags\":[]},{\"emoji\":\"🇲🇬\",\"description\":\"Madagascar\",\"category\":\"Flags\",\"aliases\":[\"madagascar\"],\"tags\":[]},{\"emoji\":\"🇲🇼\",\"description\":\"Malawi\",\"category\":\"Flags\",\"aliases\":[\"malawi\"],\"tags\":[]},{\"emoji\":\"🇲🇾\",\"description\":\"Malaysia\",\"category\":\"Flags\",\"aliases\":[\"malaysia\"],\"tags\":[]},{\"emoji\":\"🇲🇻\",\"description\":\"Maldives\",\"category\":\"Flags\",\"aliases\":[\"maldives\"],\"tags\":[]},{\"emoji\":\"🇲🇱\",\"description\":\"Mali\",\"category\":\"Flags\",\"aliases\":[\"mali\"],\"tags\":[]},{\"emoji\":\"🇲🇹\",\"description\":\"Malta\",\"category\":\"Flags\",\"aliases\":[\"malta\"],\"tags\":[]},{\"emoji\":\"🇲🇭\",\"description\":\"Marshall Islands\",\"category\":\"Flags\",\"aliases\":[\"marshall_islands\"],\"tags\":[]},{\"emoji\":\"🇲🇶\",\"description\":\"Martinique\",\"category\":\"Flags\",\"aliases\":[\"martinique\"],\"tags\":[]},{\"emoji\":\"🇲🇷\",\"description\":\"Mauritania\",\"category\":\"Flags\",\"aliases\":[\"mauritania\"],\"tags\":[]},{\"emoji\":\"🇲🇺\",\"description\":\"Mauritius\",\"category\":\"Flags\",\"aliases\":[\"mauritius\"],\"tags\":[]},{\"emoji\":\"🇾🇹\",\"description\":\"Mayotte\",\"category\":\"Flags\",\"aliases\":[\"mayotte\"],\"tags\":[]},{\"emoji\":\"🇲🇽\",\"description\":\"Mexico\",\"category\":\"Flags\",\"aliases\":[\"mexico\"],\"tags\":[]},{\"emoji\":\"🇫🇲\",\"description\":\"Micronesia\",\"category\":\"Flags\",\"aliases\":[\"micronesia\"],\"tags\":[]},{\"emoji\":\"🇲🇩\",\"description\":\"Moldova\",\"category\":\"Flags\",\"aliases\":[\"moldova\"],\"tags\":[]},{\"emoji\":\"🇲🇨\",\"description\":\"Monaco\",\"category\":\"Flags\",\"aliases\":[\"monaco\"],\"tags\":[]},{\"emoji\":\"🇲🇳\",\"description\":\"Mongolia\",\"category\":\"Flags\",\"aliases\":[\"mongolia\"],\"tags\":[]},{\"emoji\":\"🇲🇪\",\"description\":\"Montenegro\",\"category\":\"Flags\",\"aliases\":[\"montenegro\"],\"tags\":[]},{\"emoji\":\"🇲🇸\",\"description\":\"Montserrat\",\"category\":\"Flags\",\"aliases\":[\"montserrat\"],\"tags\":[]},{\"emoji\":\"🇲🇦\",\"description\":\"Morocco\",\"category\":\"Flags\",\"aliases\":[\"morocco\"],\"tags\":[]},{\"emoji\":\"🇲🇿\",\"description\":\"Mozambique\",\"category\":\"Flags\",\"aliases\":[\"mozambique\"],\"tags\":[]},{\"emoji\":\"🇲🇲\",\"description\":\"Myanmar (Burma)\",\"category\":\"Flags\",\"aliases\":[\"myanmar\"],\"tags\":[\"burma\"]},{\"emoji\":\"🇳🇦\",\"description\":\"Namibia\",\"category\":\"Flags\",\"aliases\":[\"namibia\"],\"tags\":[]},{\"emoji\":\"🇳🇷\",\"description\":\"Nauru\",\"category\":\"Flags\",\"aliases\":[\"nauru\"],\"tags\":[]},{\"emoji\":\"🇳🇵\",\"description\":\"Nepal\",\"category\":\"Flags\",\"aliases\":[\"nepal\"],\"tags\":[]},{\"emoji\":\"🇳🇱\",\"description\":\"Netherlands\",\"category\":\"Flags\",\"aliases\":[\"netherlands\"],\"tags\":[]},{\"emoji\":\"🇳🇨\",\"description\":\"New Caledonia\",\"category\":\"Flags\",\"aliases\":[\"new_caledonia\"],\"tags\":[]},{\"emoji\":\"🇳🇿\",\"description\":\"New Zealand\",\"category\":\"Flags\",\"aliases\":[\"new_zealand\"],\"tags\":[]},{\"emoji\":\"🇳🇮\",\"description\":\"Nicaragua\",\"category\":\"Flags\",\"aliases\":[\"nicaragua\"],\"tags\":[]},{\"emoji\":\"🇳🇪\",\"description\":\"Niger\",\"category\":\"Flags\",\"aliases\":[\"niger\"],\"tags\":[]},{\"emoji\":\"🇳🇬\",\"description\":\"Nigeria\",\"category\":\"Flags\",\"aliases\":[\"nigeria\"],\"tags\":[]},{\"emoji\":\"🇳🇺\",\"description\":\"Niue\",\"category\":\"Flags\",\"aliases\":[\"niue\"],\"tags\":[]},{\"emoji\":\"🇳🇫\",\"description\":\"Norfolk Island\",\"category\":\"Flags\",\"aliases\":[\"norfolk_island\"],\"tags\":[]},{\"emoji\":\"🇲🇵\",\"description\":\"Northern Mariana Islands\",\"category\":\"Flags\",\"aliases\":[\"northern_mariana_islands\"],\"tags\":[]},{\"emoji\":\"🇰🇵\",\"description\":\"North Korea\",\"category\":\"Flags\",\"aliases\":[\"north_korea\"],\"tags\":[]},{\"emoji\":\"🇳🇴\",\"description\":\"Norway\",\"category\":\"Flags\",\"aliases\":[\"norway\"],\"tags\":[]},{\"emoji\":\"🇴🇲\",\"description\":\"Oman\",\"category\":\"Flags\",\"aliases\":[\"oman\"],\"tags\":[]},{\"emoji\":\"🇵🇰\",\"description\":\"Pakistan\",\"category\":\"Flags\",\"aliases\":[\"pakistan\"],\"tags\":[]},{\"emoji\":\"🇵🇼\",\"description\":\"Palau\",\"category\":\"Flags\",\"aliases\":[\"palau\"],\"tags\":[]},{\"emoji\":\"🇵🇸\",\"description\":\"Palestinian Territories\",\"category\":\"Flags\",\"aliases\":[\"palestinian_territories\"],\"tags\":[]},{\"emoji\":\"🇵🇦\",\"description\":\"Panama\",\"category\":\"Flags\",\"aliases\":[\"panama\"],\"tags\":[]},{\"emoji\":\"🇵🇬\",\"description\":\"Papua New Guinea\",\"category\":\"Flags\",\"aliases\":[\"papua_new_guinea\"],\"tags\":[]},{\"emoji\":\"🇵🇾\",\"description\":\"Paraguay\",\"category\":\"Flags\",\"aliases\":[\"paraguay\"],\"tags\":[]},{\"emoji\":\"🇵🇪\",\"description\":\"Peru\",\"category\":\"Flags\",\"aliases\":[\"peru\"],\"tags\":[]},{\"emoji\":\"🇵🇭\",\"description\":\"Philippines\",\"category\":\"Flags\",\"aliases\":[\"philippines\"],\"tags\":[]},{\"emoji\":\"🇵🇳\",\"description\":\"Pitcairn Islands\",\"category\":\"Flags\",\"aliases\":[\"pitcairn_islands\"],\"tags\":[]},{\"emoji\":\"🇵🇱\",\"description\":\"Poland\",\"category\":\"Flags\",\"aliases\":[\"poland\"],\"tags\":[]},{\"emoji\":\"🇵🇹\",\"description\":\"Portugal\",\"category\":\"Flags\",\"aliases\":[\"portugal\"],\"tags\":[]},{\"emoji\":\"🇵🇷\",\"description\":\"Puerto Rico\",\"category\":\"Flags\",\"aliases\":[\"puerto_rico\"],\"tags\":[]},{\"emoji\":\"🇶🇦\",\"description\":\"Qatar\",\"category\":\"Flags\",\"aliases\":[\"qatar\"],\"tags\":[]},{\"emoji\":\"🇷🇪\",\"description\":\"Réunion\",\"category\":\"Flags\",\"aliases\":[\"reunion\"],\"tags\":[]},{\"emoji\":\"🇷🇴\",\"description\":\"Romania\",\"category\":\"Flags\",\"aliases\":[\"romania\"],\"tags\":[]},{\"emoji\":\"🇷🇺\",\"description\":\"Russia\",\"category\":\"Flags\",\"aliases\":[\"ru\"],\"tags\":[\"russia\"]},{\"emoji\":\"🇷🇼\",\"description\":\"Rwanda\",\"category\":\"Flags\",\"aliases\":[\"rwanda\"],\"tags\":[]},{\"emoji\":\"🇧🇱\",\"description\":\"St. Barthélemy\",\"category\":\"Flags\",\"aliases\":[\"st_barthelemy\"],\"tags\":[]},{\"emoji\":\"🇸🇭\",\"description\":\"St. Helena\",\"category\":\"Flags\",\"aliases\":[\"st_helena\"],\"tags\":[]},{\"emoji\":\"🇰🇳\",\"description\":\"St. Kitts & Nevis\",\"category\":\"Flags\",\"aliases\":[\"st_kitts_nevis\"],\"tags\":[]},{\"emoji\":\"🇱🇨\",\"description\":\"St. Lucia\",\"category\":\"Flags\",\"aliases\":[\"st_lucia\"],\"tags\":[]},{\"emoji\":\"🇵🇲\",\"description\":\"St. Pierre & Miquelon\",\"category\":\"Flags\",\"aliases\":[\"st_pierre_miquelon\"],\"tags\":[]},{\"emoji\":\"🇻🇨\",\"description\":\"St. Vincent & Grenadines\",\"category\":\"Flags\",\"aliases\":[\"st_vincent_grenadines\"],\"tags\":[]},{\"emoji\":\"🇼🇸\",\"description\":\"Samoa\",\"category\":\"Flags\",\"aliases\":[\"samoa\"],\"tags\":[]},{\"emoji\":\"🇸🇲\",\"description\":\"San Marino\",\"category\":\"Flags\",\"aliases\":[\"san_marino\"],\"tags\":[]},{\"emoji\":\"🇸🇹\",\"description\":\"São Tomé & Príncipe\",\"category\":\"Flags\",\"aliases\":[\"sao_tome_principe\"],\"tags\":[]},{\"emoji\":\"🇸🇦\",\"description\":\"Saudi Arabia\",\"category\":\"Flags\",\"aliases\":[\"saudi_arabia\"],\"tags\":[]},{\"emoji\":\"🇸🇳\",\"description\":\"Senegal\",\"category\":\"Flags\",\"aliases\":[\"senegal\"],\"tags\":[]},{\"emoji\":\"🇷🇸\",\"description\":\"Serbia\",\"category\":\"Flags\",\"aliases\":[\"serbia\"],\"tags\":[]},{\"emoji\":\"🇸🇨\",\"description\":\"Seychelles\",\"category\":\"Flags\",\"aliases\":[\"seychelles\"],\"tags\":[]},{\"emoji\":\"🇸🇱\",\"description\":\"Sierra Leone\",\"category\":\"Flags\",\"aliases\":[\"sierra_leone\"],\"tags\":[]},{\"emoji\":\"🇸🇬\",\"description\":\"Singapore\",\"category\":\"Flags\",\"aliases\":[\"singapore\"],\"tags\":[]},{\"emoji\":\"🇸🇽\",\"description\":\"Sint Maarten\",\"category\":\"Flags\",\"aliases\":[\"sint_maarten\"],\"tags\":[]},{\"emoji\":\"🇸🇰\",\"description\":\"Slovakia\",\"category\":\"Flags\",\"aliases\":[\"slovakia\"],\"tags\":[]},{\"emoji\":\"🇸🇮\",\"description\":\"Slovenia\",\"category\":\"Flags\",\"aliases\":[\"slovenia\"],\"tags\":[]},{\"emoji\":\"🇸🇧\",\"description\":\"Solomon Islands\",\"category\":\"Flags\",\"aliases\":[\"solomon_islands\"],\"tags\":[]},{\"emoji\":\"🇸🇴\",\"description\":\"Somalia\",\"category\":\"Flags\",\"aliases\":[\"somalia\"],\"tags\":[]},{\"emoji\":\"🇿🇦\",\"description\":\"South Africa\",\"category\":\"Flags\",\"aliases\":[\"south_africa\"],\"tags\":[]},{\"emoji\":\"🇬🇸\",\"description\":\"South Georgia & South Sandwich Islands\",\"category\":\"Flags\",\"aliases\":[\"south_georgia_south_sandwich_islands\"],\"tags\":[]},{\"emoji\":\"🇰🇷\",\"description\":\"South Korea\",\"category\":\"Flags\",\"aliases\":[\"kr\"],\"tags\":[\"korea\"]},{\"emoji\":\"🇸🇸\",\"description\":\"South Sudan\",\"category\":\"Flags\",\"aliases\":[\"south_sudan\"],\"tags\":[]},{\"emoji\":\"🇪🇸\",\"description\":\"Spain\",\"category\":\"Flags\",\"aliases\":[\"es\"],\"tags\":[\"spain\"]},{\"emoji\":\"🇱🇰\",\"description\":\"Sri Lanka\",\"category\":\"Flags\",\"aliases\":[\"sri_lanka\"],\"tags\":[]},{\"emoji\":\"🇸🇩\",\"description\":\"Sudan\",\"category\":\"Flags\",\"aliases\":[\"sudan\"],\"tags\":[]},{\"emoji\":\"🇸🇷\",\"description\":\"Suriname\",\"category\":\"Flags\",\"aliases\":[\"suriname\"],\"tags\":[]},{\"emoji\":\"🇸🇿\",\"description\":\"Swaziland\",\"category\":\"Flags\",\"aliases\":[\"swaziland\"],\"tags\":[]},{\"emoji\":\"🇸🇪\",\"description\":\"Sweden\",\"category\":\"Flags\",\"aliases\":[\"sweden\"],\"tags\":[]},{\"emoji\":\"🇨🇭\",\"description\":\"Switzerland\",\"category\":\"Flags\",\"aliases\":[\"switzerland\"],\"tags\":[]},{\"emoji\":\"🇸🇾\",\"description\":\"Syria\",\"category\":\"Flags\",\"aliases\":[\"syria\"],\"tags\":[]},{\"emoji\":\"🇹🇼\",\"description\":\"Taiwan\",\"category\":\"Flags\",\"aliases\":[\"taiwan\"],\"tags\":[]},{\"emoji\":\"🇹🇯\",\"description\":\"Tajikistan\",\"category\":\"Flags\",\"aliases\":[\"tajikistan\"],\"tags\":[]},{\"emoji\":\"🇹🇿\",\"description\":\"Tanzania\",\"category\":\"Flags\",\"aliases\":[\"tanzania\"],\"tags\":[]},{\"emoji\":\"🇹🇭\",\"description\":\"Thailand\",\"category\":\"Flags\",\"aliases\":[\"thailand\"],\"tags\":[]},{\"emoji\":\"🇹🇱\",\"description\":\"Timor-Leste\",\"category\":\"Flags\",\"aliases\":[\"timor_leste\"],\"tags\":[]},{\"emoji\":\"🇹🇬\",\"description\":\"Togo\",\"category\":\"Flags\",\"aliases\":[\"togo\"],\"tags\":[]},{\"emoji\":\"🇹🇰\",\"description\":\"Tokelau\",\"category\":\"Flags\",\"aliases\":[\"tokelau\"],\"tags\":[]},{\"emoji\":\"🇹🇴\",\"description\":\"Tonga\",\"category\":\"Flags\",\"aliases\":[\"tonga\"],\"tags\":[]},{\"emoji\":\"🇹🇹\",\"description\":\"Trinidad & Tobago\",\"category\":\"Flags\",\"aliases\":[\"trinidad_tobago\"],\"tags\":[]},{\"emoji\":\"🇹🇳\",\"description\":\"Tunisia\",\"category\":\"Flags\",\"aliases\":[\"tunisia\"],\"tags\":[]},{\"emoji\":\"🇹🇷\",\"description\":\"Turkey\",\"category\":\"Flags\",\"aliases\":[\"tr\"],\"tags\":[\"turkey\"]},{\"emoji\":\"🇹🇲\",\"description\":\"Turkmenistan\",\"category\":\"Flags\",\"aliases\":[\"turkmenistan\"],\"tags\":[]},{\"emoji\":\"🇹🇨\",\"description\":\"Turks & Caicos Islands\",\"category\":\"Flags\",\"aliases\":[\"turks_caicos_islands\"],\"tags\":[]},{\"emoji\":\"🇹🇻\",\"description\":\"Tuvalu\",\"category\":\"Flags\",\"aliases\":[\"tuvalu\"],\"tags\":[]},{\"emoji\":\"🇺🇬\",\"description\":\"Uganda\",\"category\":\"Flags\",\"aliases\":[\"uganda\"],\"tags\":[]},{\"emoji\":\"🇺🇦\",\"description\":\"Ukraine\",\"category\":\"Flags\",\"aliases\":[\"ukraine\"],\"tags\":[]},{\"emoji\":\"🇦🇪\",\"description\":\"United Arab Emirates\",\"category\":\"Flags\",\"aliases\":[\"united_arab_emirates\"],\"tags\":[]},{\"emoji\":\"🇬🇧\",\"description\":\"United Kingdom\",\"category\":\"Flags\",\"aliases\":[\"gb\",\"uk\"],\"tags\":[\"flag\",\"british\"]},{\"emoji\":\"🇺🇸\",\"description\":\"United States\",\"category\":\"Flags\",\"aliases\":[\"us\"],\"tags\":[\"flag\",\"united\",\"america\"]},{\"emoji\":\"🇻🇮\",\"description\":\"U.S. Virgin Islands\",\"category\":\"Flags\",\"aliases\":[\"us_virgin_islands\"],\"tags\":[]},{\"emoji\":\"🇺🇾\",\"description\":\"Uruguay\",\"category\":\"Flags\",\"aliases\":[\"uruguay\"],\"tags\":[]},{\"emoji\":\"🇺🇿\",\"description\":\"Uzbekistan\",\"category\":\"Flags\",\"aliases\":[\"uzbekistan\"],\"tags\":[]},{\"emoji\":\"🇻🇺\",\"description\":\"Vanuatu\",\"category\":\"Flags\",\"aliases\":[\"vanuatu\"],\"tags\":[]},{\"emoji\":\"🇻🇦\",\"description\":\"Vatican City\",\"category\":\"Flags\",\"aliases\":[\"vatican_city\"],\"tags\":[]},{\"emoji\":\"🇻🇪\",\"description\":\"Venezuela\",\"category\":\"Flags\",\"aliases\":[\"venezuela\"],\"tags\":[]},{\"emoji\":\"🇻🇳\",\"description\":\"Vietnam\",\"category\":\"Flags\",\"aliases\":[\"vietnam\"],\"tags\":[]},{\"emoji\":\"🇼🇫\",\"description\":\"Wallis & Futuna\",\"category\":\"Flags\",\"aliases\":[\"wallis_futuna\"],\"tags\":[]},{\"emoji\":\"🇪🇭\",\"description\":\"Western Sahara\",\"category\":\"Flags\",\"aliases\":[\"western_sahara\"],\"tags\":[]},{\"emoji\":\"🇾🇪\",\"description\":\"Yemen\",\"category\":\"Flags\",\"aliases\":[\"yemen\"],\"tags\":[]},{\"emoji\":\"🇿🇲\",\"description\":\"Zambia\",\"category\":\"Flags\",\"aliases\":[\"zambia\"],\"tags\":[]},{\"emoji\":\"🇿🇼\",\"description\":\"Zimbabwe\",\"category\":\"Flags\",\"aliases\":[\"zimbabwe\"],\"tags\":[]}]");

/***/ }),

/***/ "034f":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("64a9");
/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__);
/* unused harmony reexport * */


/***/ }),

/***/ "03fc":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAABPNJREFUWAntV2toXEUUPjN3N1bTUGNfWDTVH32INRpEi1GDzz8iNkWMUDFQhYJ00yRkk9U89Nrd2Da7KZJsxPrsHwuGqqhoIW1EG2k1LUWroFREG9TSJhUlbWiy9874zZpb7mtvNwn9twPJnDmv/ebMmTPnEhVGIQKFCBQicFkjwGbifUtz+woh2IOSyVLO2CkiOdSbTPw6Ex+6rodGz1M5SXMl7JcTY2c5035ceBUNQybcvvIC2NKyo2RCjL8updxgd8AYE5JoL4VDHX3b9BN2mZuORpPFF+jfKEn5HGyWuuUAchpg29KpxNt22SUB9vf3aweHjw8A3AN2QwfN2BmAvDcXyPqmtiqTsffg4zqHnXchuRau7O3Sv7FE3CJyzUNHjm8KBKcMpVxCU8aB+tZOT2QiTR2bDKIv8gCnPDEyjbsVYY1LApSSGi3l4FleLyYnEnadSFN7oySxCzzNzg+kOTtqlwcCjMQ6bsHOV9gNkHdT2GcP8uWkna9oZPjGLVF9jaLrmjtqJcluRfsMEz4+ZYyn4G+AEfsn+8cp1puMf2XXD8zBSLR9IwC+YzeA44/7Up3VDc/rN2SMzHckaYFbznn4FSmMIdgWOWRYANBh5Osz6W36z3YZdCFiuD/OERhBRKDUqY6VpGOK9+p2/XdOvN0jJ3pUmMZHOcDtWTQ/dJ8bnPLhB07xAwFqFB6AjqkUp0dGY+EPrQWVLX4T9J8X14qQKt/kMgdPLRjrB7inUeumPLIARmDyfnvoyzNrK+8/whhdix3+pnFW15PaesjyN7xvn7n2nqoigHrI4vnNyKNhvnzpY12xGC70zEZgDubjKtKiL5NmZgS6OTbLxrgWqkBt+yMff26dwCN2K/ut0136Xzg/x82z9BB1wTk9NVtwys+cASKn5jGSN1qg7DMAJvBWqzye9ZgzwLFzxi7UBl+AhqBPZo1s2nBOADdHOxpQTmpzgdCYXJ9Lli9/1gA3t7z4MEmRCvwhKR8PlOchnBXA+pb2VcwU/fCf4+b+/8s4+tX1Ub08Dxw5VWYMsEnXF5mCPsMrc7WPV2fRhoJJRrOPXt6sGdVBdWNHx41BvBSVPr8wyDn7QAj5mktmshCvSO+I/2Dn18f0MsM0kvC1kiT/fHGJ9hL8ewp53hFUjevYucweP3DY5YmS8PwnFhaH3kVpcRdkTZry/QZdvxjxaFRfYhqZ/egja/AK3YY+qHV03HzZvgGLzhnByAv6ajLEzTgkToKX4jtkHRw+YhlaM55BfFOwu3qSiV8UDx3Qs7jZb1lyawbwEdBvQKbhXd4AX6ssmZrh51g61Xm7nafokJuh1nXNba1iKpMAOb0BdHqeRigrnERPt74nGc+CU7ZVd5bvPjj8PcoPZftCxVMDwMowKZ9qkZ3s/9Bt/WRfW7TniGOx7QuEoK1QyBndaWPJGa9FgzlkOVNzTU0NPj9YNSIyaucH0WhW/55Hss1PxwNwQl4ogWJg+VCOGPFITyquSo1nqE9RSXwdQJ73CN0MRuPQe7K7u/OkW6TWHoDqYUfo9vspKx5kpzWmVae74+7b6jDpS8UPF11BNyG59joEjgX7OsTZHb2pxAEH27bwPcbGnTuvzJw6W0eS3YrcQx8uJ2Gj+sGj1xSHBvzKgc2nh8x+p8hMhSC+hrgMI99GmEaD7tLjMSwwChEoRKAQgcsfgf8Ahra2B/WXUvsAAAAASUVORK5CYII="

/***/ }),

/***/ "0bdc":
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ 1:
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ "16db":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAABPlJREFUWAntV2toHFUUPvfOTB9mY6qk1oLY0mpRWipIW7EVhUKJRVQoJEVpfVQQNdkYze62kAdjHmK6G9pks2h8UpDmR62tjwrB4g+1KgpCWwnYHy3RgtXaEmu2bToz9/rdNbPdzuyTbH6IubC55557zrnffOecOxOimTHDwAwD/20GmBd+MNz2ihTyUa++5DWj+ECs652S/TwOumdNQohbobvLqy91zYgtLdUnmz3PpiyPTlaWI46PQeJsP5P0hJQyDR51MCEZXcx3IBiryvQhYtMDMBHt+rQh3LKdJEUzAI1xbqyK7zRPZ+iuEU3TnHM+aa93hExgYzF+ZQGYZinztIFodwzrd12dJFoghXVAgXB13hl7l/ujXZ8xxtYrxkmWJ8VZAarD51cazxNjX7pApKRVZ8ftN911rhmdewoPNIT96WNQHQ5GrpBx3SaIJ9U6NaTcWh9qedld5po1zvbJMtWg7x70HtoUab3TEvJb1GTV5J5DmrYxsbPjc6+tu45EeiqTcnxzItr5ttKFQtGKCfnXcwBdrTFtqC9mHnNtQYR+NkkrdWYnd/d0nkCJIAFXR0GAyrRhe3uNtJ1DEDW1RseeNwx99a7XzKvsqo0co6G5da8k+ZjaxoGXJDfuS0TNH19sbrnfJnoP6iUpV0afJGLdj6TkyT85azDTaKCnY5gz3uTqcNiNlm19hKcPuLpcs2ITqGoZoyR+SD3NJWHH6yPtGxzGVBaWoNZHsTeCBz/jjVMUQOUUj3UOINDrbgA0zYo/x+09uPvyZkEILmA7BrODc2je0wByjkiuJcfZB99ZnFjigTUrlw7EupejwZ5147tz0QCVw/yA3ogaOew644BNDaHWNnedbY7Fwkm+6KZbEr1dW5QMNlVK1agCYx/3xzqDdXV1zr8q/9+SACKlth7Qa8Hkz24oxmmhK+ea442NE+k9STekZElOwKh4ytsUabtJoSSAyme3aY7hEj6iZOR2uLrCCCq5mBEMtT+EdG+DLRqatKSYuL2Qn/9dXMAjGGoNo6i2oZZ+YgGjTrFawCW1/dIO8zbLst/HAqSxIyiPdVLYqmO/rw+13ctI1lQH9FcR70pmvLwFnmmoZLyjN0tBQ3D6YzbRPb293aNeG+96cHDQGDn520LHtobRwXcA3IeaJnfZNn2FGrzAmb5OSGs/9pZxMpbHe82RzBhFp1jdWSRoD8Bd1og/XAy4JtOcd/zEr2ds2xpV4JDWY2Dpyb6e7q8B7iCuq+sF2UcVOJURLzgFtCiA6m1iM0JAmoXAW/p6O3/IfMpcsjVBawHqOFg7jcR+wLixESkcV/bVlfpWgDqAVHMFjgyjNlucgikOh82bL0r7OzTGIkSKxGNdmZ9h2WKmdMGIuQZfQF/gfst7mQf7+2df0+WeiHkZxNMGLknrkAIHFt4qFpw6QzpWB6ZTnvN8y3zglHFOgACn4/MKtz3dDXCHUTsv+KLnUKCZdqAcavArCDBHiLQ65zWD19gbYO5B1MDvuLTaz/1Ny4LNZtpRCZpmS8fRGWdOpcPEYkl8BXxq8F/h6knD6QGoXl8o3mfUIWBhAUnxjUALe4dIvaAsEjBShuSz4VMG6EtxQ6jtcYBT9TPloRErP0ApxYYpI5sMIDRZ1PdivvN8DOYzLnWveq42ZQZ9TcI5/wVFfrRUMD57RhfcS9m3N6OYYWCGgf8RA/8AfbLThxllE9cAAAAASUVORK5CYII="

/***/ }),

/***/ "188e":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAlBJREFUWAntWD1IHEEUnrd7prGwEETBFDaSOoUgIpYhhbWphFjYnIJwl8LEk0U0FtHubAQJpE7gwEIsVVSwSZ8mzRUBq5T+3D7f22Pk7e7czi4HGwJzzbx5733f+/bNzC2zSrmf64DrwP/dAbDJX6ltvlUQHkZ56C0397dObJiseFG+ShZZFCNxiDjONnSFvrRishIK8nlZXBzT4pK2DdcrXpTPKrBXobL8TmC/nXYddB3stwP94t0eLKODKIvQm8D6/pb50jZgY9wyV9v2JQa41ck8rn36PCLnRewUNsFt4rIKBIVtCezc3b2W8yJ2EpvkNnFZBRLoKgaEcDE2LzJJY+PcBi6rQADvu8TRPlqo1hvT0pfHZgxjZW6SW8a0bRU4POhfgIKfGkAjAIY/VuobE8KXaXIuYxirE5mTufW812gVGARB6CtckwR09MYQ1c1qfXNe+k0253AuY2ScOZlb+kz28xOZgtJXrTV2lAo/Sh/bAHCpEL75Pp4NhEPRgXrw/o53OjCnABdpWWcMmJ3m3vZG0m+a5xbI/2GrHxpHNL43EeX10QN9JXFLefOtS6yJiBiZ2FNQJ/tR+/OOjGFsEXHM7ectoPNurs+vp2bnWhBGe+qV9meNdCBaqgLvml+2W1l5pljuJTaBq+vBpHf/OI8K39AhmKAdOdrNwz9E/JuEnYYvKscHu8EvE975yuhAaon1zZ9Oa3RZL0ME16BD1FaGLxfpUyxu/mWJ4zpRQ7pfLmJl0wJj4X8/SQukNkftLlmbXuKSy7pyrgPWDjwBZlPFnRrgVMgAAAAASUVORK5CYII="

/***/ }),

/***/ "24e1":
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "2f0d":
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./locale": "c020",
	"./locale.js": "c020"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "2f0d";

/***/ }),

/***/ "2ffe":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAABcJJREFUWAntWF9sFEUYn9m9a0u9WtoCGh/0RQkxBY2JNChCiQ/6ggYSUUj891QT7gpJ71qRFhZ6im2vie0diSQajSSoNdGHvmCMghUxlURCIcQgLyYkamlLoYW23O2Ov++usze796fXoyGadJN2vv/z229mvv3mGFt8/gcZOHLkiDfQ21taDFRejFMhPoHgvs2CWTuYEJsEYyvgwznjY4KLn3XBvlpf99ixbdu2mXPFWnCAjaHWR0zBjgJYXb7JMfElwbU3Dkfaf5nDLp96frrG5n2bLNP6WjCxtBBPzvltwfjrAPlFLvsFyyDAPWuZZj+Wc4l7MgCxILOEEJ4sOgJZnyuTmtuhGD4XOAA7CUQbl/k8lfzBFT4P09ZiH36pzgHQJVxYn/b19emqXNIZbyQVhY65wOFIvB3tau8ESCTVfs6AesUfbP0OwD6SUhisPDV4bgf4o1ImxzvKYC5wGtd2HY6EO1zg5JwsFgl/7M6kydlLtoFCFA3Qv8dYlToQzj1H4KKR9l5ljqykzni3S7HexSfZogAahqGx24k+nNZ71aCFgiOfqgr9PDKcsP0Fq8pWzIvag6O34tuxb1bbwUFojAcLyZziQ3OrCRK1paV02h2PauBQ5GOExV9z6Dk/Hu0Ou5fMYeJmrk3En8BBsedHvRtuaGiIu+1sA7ciF4/lpTevV/U684QkD31Jc3NHheSzjQDGTc4POHScn3Dws8y8AV6Pe+6j2pUOxierfewi8f6Wfc+NTCSu3rImxlFK9qdtnJQ/1NaMGPWqlDPtmMpLet4AE7eny6QzjegAbiBrqb2TsN6lg0NLhz8DIN9UbYn2h1oD+E6/75BzPhiNHOx3yGaZvACbDGNZINT2DACUS+dSUfm3pGkEkAeCQYO6FaBlo8lR/hPsg5173quR7K6gsYZBJnkaUQ/Hdc5eVWUqnRMgFeHpyfhly7IGRibiZwOGkSwpkUjoJrJ2QQ0yJeJvJXmdBzHaG52yqSWmGqWtYOYqyq7kcTCmNF3b2tsV/kPK3KNtrCoADl2J2Y+3rSQ5fYr4pPl82oZ/k6Zpmflef0vb6lhH+3nIw6pOCGur5IVPPw7bFBjOrmu6vrm382DWwyF9MgBSP+f+QiCoxZn+u3QS3vIeLM0Nm6dDY4oI8Uu490Mpp1EIVhsMdt1DdNQwbqBxeFzTtA1lPu/DAPc9yfM9GQCp2czo5zjb3RMxhmSgw4feGcXm2S355ChYcq9FIsYwlu4vVTfDr98veeznW2gifuo2jBEpyzc6AFKbntEJoyuJdYWj7iD44H+CzBqp7CKbHm0v2QCAhv7OUQc9JWXTbv9CeQfA5B1C8cTkJ2NomRSRgwTIA+VaxdJlFZ7lsY6D35JybJI9ioX1SUNkc6bSm/hH8vMdnd9iXHDUALoQ+wESZyT309nZMqFqTZboUnmcoB+R1XRT4FDOzdgZpKshkKTqGfxo6aoqvL/NHSJtEWhqbcIWUU474mjis7TF/Ckb4IWZGaKxIvZjjVZX2zXNluYgAsG2RoulTrJtwtlQTbn3c5svgrABRhsbZwDvmoyBgurR/ry6RvL5xiQ4YfWoNlSGuNf7MpY3o4VS7eaibYCzhqdUB5OJJpXPRmcHx6bwsltihwy7dmbzLUTmuEmtW7fBg324RXGsrXt645VfTw+cVWRJEhnmIzfNFoyOPhB7BJ8vfTNq3Q9un2J4dc8xuvoNDJ67CJAr1WB0waE7hPXQ8qGasTEvNZvUzwFcvdMuBa6QL4Tql492ACTDncG2dZyJk5hc6flSIXCyqVxQK+XeGnS6kplbSHA0q2OJSXDm9MCVJ5/aeBkdywtZ9O6TTi4Ax8exrC8C3IIsazLo7L+MTJCcfiuhnyOQlUuqcVYazaamsbUAdyKr/g6FGUusxqM9STf+2Uv1evRdVdALOA2jkp+gNj1XJ6zGuWs0aloZfXHu2oSLEy1m4D+QgX8Bs2gZfO/L3zAAAAAASUVORK5CYII="

/***/ }),

/***/ "31d2":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAANtJREFUWAntlTEOwjAMReOegwtxESY2dgZ2NiYuwoU4R0Nb1VLkj8WQKCbS75R+J/HPi5SfEj8SIIGxCYi1f75cj0nm56bn6fS4317lHK3nnA+lXjsWkXf60m+CjRdza/PNgBotJ+31Umox9vqhwRbdGu6BBhfMK25FDr32OuiVgtuvcl8uJwESIIHRCYRlsT7MNustUEySTlnsZe9vg3ZG8D8S7JTFesXB52d7EiABEvh7AmFZ7JHRB1wzGpOkUxZ7Bm1Go0FvZZCOBjtlsXdevWKvTp0ESGA0Ah+DRYoW4AJEJAAAAABJRU5ErkJggg=="

/***/ }),

/***/ "3866":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAsRJREFUWAntmM9rE0EUx9/sxhTEnwie9FARlIJo/QEeRC9e/AdyFbTUgmlRYlolJiy2AW1crW2ktOChBy/5B7wJzUVsNdoKvSlIe9GLSKvQ7u6Mb5K8zbCSXyZuFDaXee/NzHsfvvNrCUDwCxTorAKMykdjqUvA+GzRF1p/1rz3gvqaaduVh2qGyJBwQogD0mcl0INuXzNGu/KUa2pUm+Ckr9rU32irzlXtRud7x7mA3o5/xQ8AW12JQMFAwVYVaHV+sAdbVbDy1HkyXY8lhCfUEbcq4N+iGZyc7BKrXwZBsB61Bj6LUpD8UzM9p8Z9BxSrXwcEhwy++CoH2VduxI2liYzxngL+HxIB56m4t8Vvv02dW9/UeFUFUWr3W1GdUM+uv3fFUcrBGEuhvSZ9tAVwfcE0jc/UL9uqgOqgdtm5XE7PLywfpuXdru2cGB8fWa+V31fAV4WVbjwL4RIQ2/jprPdFY8kfQtPfXDjTsxSJRBwvrK97cMux3eVFFXcIEI9wXWeAW2/zr5cXoyPJYx0F1Dgc8QKQj7C9YPPfIH1VEDS2i4CAwXc8GM/wJM5KW8bx4ukCW8zJvUrjfAXkIf05A/YOwV5qjJ3KPhzry5rpa+HQtpMVSNE7v7hyvCOAIW7tZxrLTmVGL05lxj4SxOP7xicEz5HPuHOabN9O8eCwcdZx7HkhuDYUT+5DAHxN6v98W2LNscJ4xRTrcRB3orfudhPezdvGITwkEfLltUO2C4j7Yo2Cqk2xRlt1rmo/MdN5XMYPxTwC9uKJKETjieloLDGzZVsF9HfLPrlH5Z1I9VxAwL87ZMJiUrRpQNNtjTw6sKuIsCFzomJ78KNhAE9ufwUONiHELqsX9h+9t01DKxPkXuTcmkaoE0q4qJyEyz4YLalc7vQdUNbFvciGhlPnUEH5cti1nroyZ9AECgQK/LcK/AJvDAImXQtbwAAAAABJRU5ErkJggg=="

/***/ }),

/***/ "429e":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAkVJREFUWAljYBgFoyEwsCHACLM+p7jOk4Hx3yww/z9T2pTepu0wOVJoapkDs5MFxgA57v///zIgPiPEobJwOVIY1DIHaicTzG6Y40B8ZDZMnlgaWS8ym1j96OrgDkSXGCz8UQdSGhOjITgagpSGAKX6R9MgpSGIqOrQTMourv6PJkQzbnZlgxorO8OrCQ0NH9AtGfAoBgZEHcOv3zd/f/lzvaysk3dQOTCnpMYJ6KAGsKP+/5f4wfDVZNA4sKKiXRDYmFgEdBC8yff/3z9mdAfiTINTe1vhGtE14eMTm3Y///kKantK4zMLJDcgaRAYtYnANl0IIccNiAMLKxpU/v9nmESM4+juwIaGBpZff/4sATaJecAOZGS8DkyCx/A5lq5R/Prr33pg1JqDHMTIyPiLiYUxmpGR4dugcGB+ebUNw79/lXDHMP6vntzRfB7Ox8GgSwiWl3fw//nLCIxaBnAxAgy9f8B0aJddUr0BGN36MLf9+8/QmFNcsyyvuNYYJoazmIEpoAb97e/XWGDUysPMApZ/oIDxBfFR69P/VkC+1T/G/+pAKbAj6RKC/5kZb2O4BeQ6nIDxFkyKLg6c0tm0k42FSZeZkTkAHTMyMF6EOQZI1zMwM7vpqsrGwcTgUQxMF09g/VgQG6aAVBqXOf2dzVeBZoEwCsgprs6GCTAzMx+d1NW0F8YH0YgQBA53gAwHOw7IRlZEEptEc4Bp7gjYfEaGj2z/mC6TZBe9FGeX1FoWVLVK0su+UXtGQ2A0BEZDACkEAOpuuw0oUK1IAAAAAElFTkSuQmCC"

/***/ }),

/***/ "43b5":
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "448d":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAA71JREFUWAntmM9rE0EUx2d2628FL60gov4BggeR2iq0KAhFW/zRgqAnEU9Jipi2KE0pSVEs6aFJTqI3EfEHihUKQiv20GJFRPDkzR+otRcPalvT7Phe27e83e4km+z2Ip3LvHk78+aT78yb2Y0Qq+U/V0CuxO+LdPZuV1a+Swq5TygxLaR8lEun7lQyV+iAsc6eI1bBeqiE2sqBAPaJ3FVzJhuLzXF/KTtUwEW4wpASYoPXxFKKYblz28lyIEMDLAVHwOVCGjQwSK2Dk1L2ANB7Hlsp0aQ+TT2OZjLruF9nBwbUwRnSaM+l+1JyzabDQSADLXExuGw6lSFVoleuVav871FQbw/5sPaz3BUD+oUjoEohK1ricuEQMnv96rR2uT/+uEc/xF2XDVgJHE2qhRTqRCSeOEf9eF0WYBA4mlQHKZQ6TX147RtwAc5afghjtvKE4MF1NkJCitx3PJei2tFeavgCXFLuGWSh44aoBA7njcYTMaVUkgPB1fiGt8muIkNX23BCrOd9gsBZyhrkseCe/imMqhvcR3ZRBdmec8DBYCWk+EVB/Nao3HI4MWOYRmuuv/erVxzTy4k+BudY1qX+Epao5cChxs+T42NvdTG4Xw9nNmf6kyO8L7c9AXVwcLfOw2BS3TdkpXAISpPZ0Do43HNSGKcA8q/dGVLRsqxb0Y7EeeZzmEHgMJBDwWhXYq8qWCPu9zlKiMnxlx9q6xvfwf7DM4vGapUMCoeADgXVvLqtg8POWLLp5BAo2VpKyTDgcD77ZSEe762ZUfkpdFIh5ajN62i8p1kJeLVXai3zK8MwLkCOb/bO1uIJweLYpq3gnJzfYnvRkPKPocSEw8caqCTo3+alZFhwCxg0JyghIx2J73An1pAPD1BTyKODA6nX5HPXkc7uFmGJBy4l7W6wRHDOla8cBbAVBCUUAF2iB1jjl1lBqOftlxP7uZ/buf6+p0tK4hHkKBBzNggcBrMBsQHfrnchaAptKn4gpSV3g4KOaxOUy8N+PF7sEKY5itV0VNh94GZ4UXuwAf0NthPuYcjutrr6htFXE2OOK0mTrXlQrikoHM6/DBCdfiG94CC5Zk3TPBYGHLLYxww23CUS707C0iW4nxLHkqIuzGzlc3C7KCB29ILEIwiyfaMrUKBs5bG4XRIQO3tC8igh2JCcX4QyLuYGksM8nCOL+QNuwwc4/EPgzG7+PAwbttIOePW46Y7lCxAHLUIaZ8EsuIOsZNs3IEIsnJPCbIZ98S1sKFrisOOuxltVIKgC/wCZrR8COXDCfwAAAABJRU5ErkJggg=="

/***/ }),

/***/ "44c1":
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "499f":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAulJREFUWAntWEFoE0EU/TOJta1KoRQEURAFlYhoRAsetF69CUJ6EPEWRbeCrNRCqCxqQYWgYHqweBFBMIgnwbN60rYWKwp68KInpYdikdTdzPj/mL/ZbIkmJG487MB2/p/58//jzfw/kwLELWagswwIDm/Zl46AUFNG1zJbyF9+ynPN9O3ywzGTLBA4rfVG0sVvoJv8uWaEdvmpxJQcm8GRHpR5vtE+uDYoN7o+bOcDDE/8L3oMsNWdiBmMGWyVgVbXx2ewVQarV13I01k7p0NDbVPPjzlbXM87ARr24L31FYR8MbA28cBxHBUOEvkWj4zmjrueO4/XoKNBH0UWslqr+9+W3Flr1NnQUYAjtpNSStzVGtaEgRg2lfcIWawhrUZZsajNA0p45/Al0k1uBYg5CeIYSHkVn08lGkNWDyyUyrtJ5lb3DE7mJ/y3Ihs30v/p7AoNg3ywRSJ5+vYN5xX6fGxdyPXj+Bnjv6x2YD/HseoCZIN29lrAdtxK03pF9wf2LYW4hdmRxrmFHrHuCY9THxlA23EGSt/dXhNcwOKSKm217PF9pJchMTM0mDqYyWTKZj7wJ7IzuPwDNvtxNXSBcmc1qDv0kfz85fy0dXF8l29TESIDKJRaHwjeE5CNiCUnDZ5aATI6gBL6a0DhNmMWTtGHKb1Ic3g8V4On7xWLxQTbRgZQK9jJQRHUcldy1d5CfuIUfSRXQer0s+n3fqmJDKACvY0BYqF+d/Oa84l1krEEPWRdqLJJHtIjAyhBf2QAUsJnlv/WRwZQiWSRwWDNO0wPBtZJxho5zLqWiRmW/ToohPjCv2NJZoNm+3p+hvan3mApmTPZqqHvp+e+tuyc2VaUhzFD+igWXYGH0HayErjKIP67g5wbcCg3C8y3r+PHFOGkOEkJYmwREGZtlr4qOJxDm2DBRvtomynGWEoMk4HQxByBK1y/8jYwjIx2oFGdo1LC2Upnjo5AkLkOwIpDxgzEDPwTBn4BaCYeXVBQ+j8AAAAASUVORK5CYII="

/***/ }),

/***/ "4cbd":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAqpJREFUWAntl79rFEEUx9+b3YsgSeGPFKLY2WojWKmHgpDK0n9Aq2hQ46UwP1hyXsCcMZKggqYXS7EQBMFfpa2VnT+w8FeRI5Dc7YzvHe7dzLnO7HLuiHDb7PvOm533uTczb+YABs8gA/82A+gKf35ybgxQ3lNK7XP1Nf3YQFTvKcDTMBBry9erb01/NuUGvDLzIT+cGRwRJSq4u2skvBxF0ZbptSthdwP0C8fj0xhCghr/2mg9IcAhV0zd7wTUO/drE+iJb+utm3nGcU7x+OS00ge8vVRzfsP9L16t7YmbG2WlcFGfBZ7uUoAHs67JwjJ4a2H682q99qA0HB4iqI/Jj+TpbsXybKJd78IAk8DLUfSddvNUovlNU3JK1za7cEAOHpS2P9chaNr369pmewG0Abh8XgB5s+ggXMB1bbMLB7wURTt5J+sQfLro2maHNmc/vqTMNBut38pMGOBa1rFzA/bWxT8Fam5u/HIZZRT4yMtaA3mAwqfY+AEIPwDiO0abQ/gFVLBDonh9oTJ71MHVcfsF5LAMqeSjicrMgQ6Fxci9BrOexRyzvVG2Ng8rkBU64rpZY0iA+9SlzP1sT6EZbJ/HN+Yf7x4Oy7TcF3QQAj4+MTV3Um9LswsFTALSHVCOjgSzdGl4lbTxW0p5RtdpthdADsyQCKKuQ1ABOqbrNNsbIAcPhra9MSAU7DV0ivAKmBLf2eQVMKYdbRAhfDJ0ivAGSGtQcLnRGejS8FLXaXbuOpg2iKuN4b6sx1Wq0t1aSB8JIR66vi0UMCnU9HeTMmfCUcl5sbI4/+yvA2a9zXDg7o2mB4MuDQLhXE9rqvS2BjvR23Di9Er92rtOm8XwCsjTGiAeWa1XjRPFwgeFrkEAbACVEt6tvCGyrDkb7MA3yMAgA/9jBn4CoCrXeOGpEMIAAAAASUVORK5CYII="

/***/ }),

/***/ "554c":
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./prism-abap": [
		"5e92",
		"chunk-2d0d3adf"
	],
	"./prism-abap.js": [
		"5e92",
		"chunk-2d0d3adf"
	],
	"./prism-abap.min": [
		"2f8c",
		"chunk-2d0be195"
	],
	"./prism-abap.min.js": [
		"2f8c",
		"chunk-2d0be195"
	],
	"./prism-abnf": [
		"11b5",
		"chunk-2d0aab29"
	],
	"./prism-abnf.js": [
		"11b5",
		"chunk-2d0aab29"
	],
	"./prism-abnf.min": [
		"a0fe",
		"chunk-2d2079e4"
	],
	"./prism-abnf.min.js": [
		"a0fe",
		"chunk-2d2079e4"
	],
	"./prism-actionscript": [
		"a593",
		"chunk-2d208704"
	],
	"./prism-actionscript.js": [
		"a593",
		"chunk-2d208704"
	],
	"./prism-actionscript.min": [
		"c3ab",
		"chunk-2d216d47"
	],
	"./prism-actionscript.min.js": [
		"c3ab",
		"chunk-2d216d47"
	],
	"./prism-ada": [
		"2e65",
		"chunk-2d0bdd68"
	],
	"./prism-ada.js": [
		"2e65",
		"chunk-2d0bdd68"
	],
	"./prism-ada.min": [
		"35e6",
		"chunk-2d0ba349"
	],
	"./prism-ada.min.js": [
		"35e6",
		"chunk-2d0ba349"
	],
	"./prism-agda": [
		"6fa9",
		"chunk-2d0db7de"
	],
	"./prism-agda.js": [
		"6fa9",
		"chunk-2d0db7de"
	],
	"./prism-agda.min": [
		"d94e",
		"chunk-2d21f2bc"
	],
	"./prism-agda.min.js": [
		"d94e",
		"chunk-2d21f2bc"
	],
	"./prism-al": [
		"7783",
		"chunk-2d0d76d1"
	],
	"./prism-al.js": [
		"7783",
		"chunk-2d0d76d1"
	],
	"./prism-al.min": [
		"c23a",
		"chunk-2d2163f3"
	],
	"./prism-al.min.js": [
		"c23a",
		"chunk-2d2163f3"
	],
	"./prism-antlr4": [
		"7607",
		"chunk-2d0d721c"
	],
	"./prism-antlr4.js": [
		"7607",
		"chunk-2d0d721c"
	],
	"./prism-antlr4.min": [
		"b7d2",
		"chunk-2d210819"
	],
	"./prism-antlr4.min.js": [
		"b7d2",
		"chunk-2d210819"
	],
	"./prism-apacheconf": [
		"881e",
		"chunk-2d0dee4a"
	],
	"./prism-apacheconf.js": [
		"881e",
		"chunk-2d0dee4a"
	],
	"./prism-apacheconf.min": [
		"fb8e",
		"chunk-2d2375df"
	],
	"./prism-apacheconf.min.js": [
		"fb8e",
		"chunk-2d2375df"
	],
	"./prism-apex": [
		"b00f",
		"chunk-2d20e7ba"
	],
	"./prism-apex.js": [
		"b00f",
		"chunk-2d20e7ba"
	],
	"./prism-apex.min": [
		"2bbe",
		"chunk-2d0bd7a9"
	],
	"./prism-apex.min.js": [
		"2bbe",
		"chunk-2d0bd7a9"
	],
	"./prism-apl": [
		"f850",
		"chunk-2d22d7a3"
	],
	"./prism-apl.js": [
		"f850",
		"chunk-2d22d7a3"
	],
	"./prism-apl.min": [
		"e15c",
		"chunk-2d224930"
	],
	"./prism-apl.min.js": [
		"e15c",
		"chunk-2d224930"
	],
	"./prism-applescript": [
		"b762",
		"chunk-2d210287"
	],
	"./prism-applescript.js": [
		"b762",
		"chunk-2d210287"
	],
	"./prism-applescript.min": [
		"11e8",
		"chunk-2d0aab89"
	],
	"./prism-applescript.min.js": [
		"11e8",
		"chunk-2d0aab89"
	],
	"./prism-aql": [
		"bb7d",
		"chunk-2d21a443"
	],
	"./prism-aql.js": [
		"bb7d",
		"chunk-2d21a443"
	],
	"./prism-aql.min": [
		"e2fb",
		"chunk-2d2252df"
	],
	"./prism-aql.min.js": [
		"e2fb",
		"chunk-2d2252df"
	],
	"./prism-arduino": [
		"54e7",
		"chunk-2d0c8847"
	],
	"./prism-arduino.js": [
		"54e7",
		"chunk-2d0c8847"
	],
	"./prism-arduino.min": [
		"5a5e",
		"chunk-2d0d2b92"
	],
	"./prism-arduino.min.js": [
		"5a5e",
		"chunk-2d0d2b92"
	],
	"./prism-arff": [
		"f24b",
		"chunk-2d22c130"
	],
	"./prism-arff.js": [
		"f24b",
		"chunk-2d22c130"
	],
	"./prism-arff.min": [
		"69e3",
		"chunk-2d0d0f67"
	],
	"./prism-arff.min.js": [
		"69e3",
		"chunk-2d0d0f67"
	],
	"./prism-asciidoc": [
		"8ce2",
		"chunk-2d0e95ce"
	],
	"./prism-asciidoc.js": [
		"8ce2",
		"chunk-2d0e95ce"
	],
	"./prism-asciidoc.min": [
		"98e7",
		"chunk-2d0e68c7"
	],
	"./prism-asciidoc.min.js": [
		"98e7",
		"chunk-2d0e68c7"
	],
	"./prism-asm6502": [
		"89b4",
		"chunk-2d0df7c9"
	],
	"./prism-asm6502.js": [
		"89b4",
		"chunk-2d0df7c9"
	],
	"./prism-asm6502.min": [
		"e2f4",
		"chunk-2d2252b1"
	],
	"./prism-asm6502.min.js": [
		"e2f4",
		"chunk-2d2252b1"
	],
	"./prism-aspnet": [
		"76b8",
		"chunk-2d0d782b"
	],
	"./prism-aspnet.js": [
		"76b8",
		"chunk-2d0d782b"
	],
	"./prism-aspnet.min": [
		"7175",
		"chunk-2d0d602e"
	],
	"./prism-aspnet.min.js": [
		"7175",
		"chunk-2d0d602e"
	],
	"./prism-autohotkey": [
		"32ab",
		"chunk-2d0b97b6"
	],
	"./prism-autohotkey.js": [
		"32ab",
		"chunk-2d0b97b6"
	],
	"./prism-autohotkey.min": [
		"0e1c",
		"chunk-2d0af43d"
	],
	"./prism-autohotkey.min.js": [
		"0e1c",
		"chunk-2d0af43d"
	],
	"./prism-autoit": [
		"43bf",
		"chunk-2d0c0ff9"
	],
	"./prism-autoit.js": [
		"43bf",
		"chunk-2d0c0ff9"
	],
	"./prism-autoit.min": [
		"b431",
		"chunk-2d20f6e6"
	],
	"./prism-autoit.min.js": [
		"b431",
		"chunk-2d20f6e6"
	],
	"./prism-bash": [
		"8009",
		"chunk-2d0dcff7"
	],
	"./prism-bash.js": [
		"8009",
		"chunk-2d0dcff7"
	],
	"./prism-bash.min": [
		"55ec",
		"chunk-2d0c8c34"
	],
	"./prism-bash.min.js": [
		"55ec",
		"chunk-2d0c8c34"
	],
	"./prism-basic": [
		"a954",
		"chunk-2d20958d"
	],
	"./prism-basic.js": [
		"a954",
		"chunk-2d20958d"
	],
	"./prism-basic.min": [
		"b785",
		"chunk-2d2102c8"
	],
	"./prism-basic.min.js": [
		"b785",
		"chunk-2d2102c8"
	],
	"./prism-batch": [
		"c243",
		"chunk-2d2163e4"
	],
	"./prism-batch.js": [
		"c243",
		"chunk-2d2163e4"
	],
	"./prism-batch.min": [
		"c891",
		"chunk-2d217b03"
	],
	"./prism-batch.min.js": [
		"c891",
		"chunk-2d217b03"
	],
	"./prism-bbcode": [
		"1dd0",
		"chunk-2d0b6ad5"
	],
	"./prism-bbcode.js": [
		"1dd0",
		"chunk-2d0b6ad5"
	],
	"./prism-bbcode.min": [
		"b735",
		"chunk-2d21022d"
	],
	"./prism-bbcode.min.js": [
		"b735",
		"chunk-2d21022d"
	],
	"./prism-birb": [
		"b8df",
		"chunk-2d210c0e"
	],
	"./prism-birb.js": [
		"b8df",
		"chunk-2d210c0e"
	],
	"./prism-birb.min": [
		"a38a",
		"chunk-2d207f91"
	],
	"./prism-birb.min.js": [
		"a38a",
		"chunk-2d207f91"
	],
	"./prism-bison": [
		"48be",
		"chunk-2d0c22bd"
	],
	"./prism-bison.js": [
		"48be",
		"chunk-2d0c22bd"
	],
	"./prism-bison.min": [
		"9daf",
		"chunk-2d0f0da6"
	],
	"./prism-bison.min.js": [
		"9daf",
		"chunk-2d0f0da6"
	],
	"./prism-bnf": [
		"a64b",
		"chunk-2d208a59"
	],
	"./prism-bnf.js": [
		"a64b",
		"chunk-2d208a59"
	],
	"./prism-bnf.min": [
		"5af4",
		"chunk-2d0d3150"
	],
	"./prism-bnf.min.js": [
		"5af4",
		"chunk-2d0d3150"
	],
	"./prism-brainfuck": [
		"b365",
		"chunk-2d20f386"
	],
	"./prism-brainfuck.js": [
		"b365",
		"chunk-2d20f386"
	],
	"./prism-brainfuck.min": [
		"8399",
		"chunk-2d0ddc51"
	],
	"./prism-brainfuck.min.js": [
		"8399",
		"chunk-2d0ddc51"
	],
	"./prism-brightscript": [
		"c5b0",
		"chunk-2d2174b6"
	],
	"./prism-brightscript.js": [
		"c5b0",
		"chunk-2d2174b6"
	],
	"./prism-brightscript.min": [
		"c950",
		"chunk-2d217e47"
	],
	"./prism-brightscript.min.js": [
		"c950",
		"chunk-2d217e47"
	],
	"./prism-bro": [
		"e7a5",
		"chunk-2d2264dc"
	],
	"./prism-bro.js": [
		"e7a5",
		"chunk-2d2264dc"
	],
	"./prism-bro.min": [
		"51be",
		"chunk-2d0c7cd5"
	],
	"./prism-bro.min.js": [
		"51be",
		"chunk-2d0c7cd5"
	],
	"./prism-bsl": [
		"943f",
		"chunk-2d0e53e4"
	],
	"./prism-bsl.js": [
		"943f",
		"chunk-2d0e53e4"
	],
	"./prism-bsl.min": [
		"2905",
		"chunk-2d0b3782"
	],
	"./prism-bsl.min.js": [
		"2905",
		"chunk-2d0b3782"
	],
	"./prism-c": [
		"86e1",
		"chunk-2d0dece0"
	],
	"./prism-c.js": [
		"86e1",
		"chunk-2d0dece0"
	],
	"./prism-c.min": [
		"997e",
		"chunk-2d0e6724"
	],
	"./prism-c.min.js": [
		"997e",
		"chunk-2d0e6724"
	],
	"./prism-cil": [
		"2781",
		"chunk-2d0b30f4"
	],
	"./prism-cil.js": [
		"2781",
		"chunk-2d0b30f4"
	],
	"./prism-cil.min": [
		"e9c9",
		"chunk-2d226ca0"
	],
	"./prism-cil.min.js": [
		"e9c9",
		"chunk-2d226ca0"
	],
	"./prism-clike": [
		"cb55",
		"chunk-2d221835"
	],
	"./prism-clike.js": [
		"cb55",
		"chunk-2d221835"
	],
	"./prism-clike.min": [
		"083c",
		"chunk-2d0a4b8e"
	],
	"./prism-clike.min.js": [
		"083c",
		"chunk-2d0a4b8e"
	],
	"./prism-clojure": [
		"390a",
		"chunk-2d0bac0d"
	],
	"./prism-clojure.js": [
		"390a",
		"chunk-2d0bac0d"
	],
	"./prism-clojure.min": [
		"41cb",
		"chunk-2d0c0892"
	],
	"./prism-clojure.min.js": [
		"41cb",
		"chunk-2d0c0892"
	],
	"./prism-cmake": [
		"8348",
		"chunk-2d0ddbb5"
	],
	"./prism-cmake.js": [
		"8348",
		"chunk-2d0ddbb5"
	],
	"./prism-cmake.min": [
		"e932",
		"chunk-2d2266c9"
	],
	"./prism-cmake.min.js": [
		"e932",
		"chunk-2d2266c9"
	],
	"./prism-coffeescript": [
		"35de",
		"chunk-2d0ba359"
	],
	"./prism-coffeescript.js": [
		"35de",
		"chunk-2d0ba359"
	],
	"./prism-coffeescript.min": [
		"a3c9",
		"chunk-2d20849e"
	],
	"./prism-coffeescript.min.js": [
		"a3c9",
		"chunk-2d20849e"
	],
	"./prism-concurnas": [
		"b909",
		"chunk-2d210956"
	],
	"./prism-concurnas.js": [
		"b909",
		"chunk-2d210956"
	],
	"./prism-concurnas.min": [
		"7e35",
		"chunk-2d0e22e6"
	],
	"./prism-concurnas.min.js": [
		"7e35",
		"chunk-2d0e22e6"
	],
	"./prism-core": [
		"8c7a",
		"chunk-2d0e906b"
	],
	"./prism-core.js": [
		"8c7a",
		"chunk-2d0e906b"
	],
	"./prism-core.min": [
		"f77b",
		"chunk-2d22d452"
	],
	"./prism-core.min.js": [
		"f77b",
		"chunk-2d22d452"
	],
	"./prism-cpp": [
		"91f8",
		"chunk-2d0e4ea0"
	],
	"./prism-cpp.js": [
		"91f8",
		"chunk-2d0e4ea0"
	],
	"./prism-cpp.min": [
		"9d22",
		"chunk-2d0f07c1"
	],
	"./prism-cpp.min.js": [
		"9d22",
		"chunk-2d0f07c1"
	],
	"./prism-crystal": [
		"9e90",
		"chunk-2d0f0c59"
	],
	"./prism-crystal.js": [
		"9e90",
		"chunk-2d0f0c59"
	],
	"./prism-crystal.min": [
		"2b48",
		"chunk-2d0bd1ea"
	],
	"./prism-crystal.min.js": [
		"2b48",
		"chunk-2d0bd1ea"
	],
	"./prism-csharp": [
		"9528",
		"chunk-2d0e5758"
	],
	"./prism-csharp.js": [
		"9528",
		"chunk-2d0e5758"
	],
	"./prism-csharp.min": [
		"320f",
		"chunk-2d0b91cb"
	],
	"./prism-csharp.min.js": [
		"320f",
		"chunk-2d0b91cb"
	],
	"./prism-csp": [
		"d4db",
		"chunk-2d21e5c4"
	],
	"./prism-csp.js": [
		"d4db",
		"chunk-2d21e5c4"
	],
	"./prism-csp.min": [
		"02f6",
		"chunk-2d0a3b08"
	],
	"./prism-csp.min.js": [
		"02f6",
		"chunk-2d0a3b08"
	],
	"./prism-css": [
		"6605",
		"chunk-2d0cfdbb"
	],
	"./prism-css-extras": [
		"289e",
		"chunk-2d0b3508"
	],
	"./prism-css-extras.js": [
		"289e",
		"chunk-2d0b3508"
	],
	"./prism-css-extras.min": [
		"38da",
		"chunk-2d0bae98"
	],
	"./prism-css-extras.min.js": [
		"38da",
		"chunk-2d0bae98"
	],
	"./prism-css.js": [
		"6605",
		"chunk-2d0cfdbb"
	],
	"./prism-css.min": [
		"5577",
		"chunk-2d0c8676"
	],
	"./prism-css.min.js": [
		"5577",
		"chunk-2d0c8676"
	],
	"./prism-cypher": [
		"35d3",
		"chunk-2d0ba327"
	],
	"./prism-cypher.js": [
		"35d3",
		"chunk-2d0ba327"
	],
	"./prism-cypher.min": [
		"db79",
		"chunk-2d228cd6"
	],
	"./prism-cypher.min.js": [
		"db79",
		"chunk-2d228cd6"
	],
	"./prism-d": [
		"864a",
		"chunk-2d0de721"
	],
	"./prism-d.js": [
		"864a",
		"chunk-2d0de721"
	],
	"./prism-d.min": [
		"e971",
		"chunk-2d226744"
	],
	"./prism-d.min.js": [
		"e971",
		"chunk-2d226744"
	],
	"./prism-dart": [
		"a2d5",
		"chunk-2d2080f8"
	],
	"./prism-dart.js": [
		"a2d5",
		"chunk-2d2080f8"
	],
	"./prism-dart.min": [
		"31e4",
		"chunk-2d0b9443"
	],
	"./prism-dart.min.js": [
		"31e4",
		"chunk-2d0b9443"
	],
	"./prism-dataweave": [
		"1a2d",
		"chunk-2d0b59b8"
	],
	"./prism-dataweave.js": [
		"1a2d",
		"chunk-2d0b59b8"
	],
	"./prism-dataweave.min": [
		"81e3",
		"chunk-2d0dda1d"
	],
	"./prism-dataweave.min.js": [
		"81e3",
		"chunk-2d0dda1d"
	],
	"./prism-dax": [
		"900b",
		"chunk-2d0e447f"
	],
	"./prism-dax.js": [
		"900b",
		"chunk-2d0e447f"
	],
	"./prism-dax.min": [
		"cacf",
		"chunk-2d221a37"
	],
	"./prism-dax.min.js": [
		"cacf",
		"chunk-2d221a37"
	],
	"./prism-dhall": [
		"673b",
		"chunk-2d0d0206"
	],
	"./prism-dhall.js": [
		"673b",
		"chunk-2d0d0206"
	],
	"./prism-dhall.min": [
		"a4cf",
		"chunk-2d20888c"
	],
	"./prism-dhall.min.js": [
		"a4cf",
		"chunk-2d20888c"
	],
	"./prism-diff": [
		"183f",
		"chunk-2d0abff0"
	],
	"./prism-diff.js": [
		"183f",
		"chunk-2d0abff0"
	],
	"./prism-diff.min": [
		"5920",
		"chunk-2d0c94d8"
	],
	"./prism-diff.min.js": [
		"5920",
		"chunk-2d0c94d8"
	],
	"./prism-django": [
		"1c63",
		"chunk-2d0b6185"
	],
	"./prism-django.js": [
		"1c63",
		"chunk-2d0b6185"
	],
	"./prism-django.min": [
		"3771",
		"chunk-2d0ba534"
	],
	"./prism-django.min.js": [
		"3771",
		"chunk-2d0ba534"
	],
	"./prism-dns-zone-file": [
		"7fb9",
		"chunk-2d0e2c5c"
	],
	"./prism-dns-zone-file.js": [
		"7fb9",
		"chunk-2d0e2c5c"
	],
	"./prism-dns-zone-file.min": [
		"a7b6",
		"chunk-2d209380"
	],
	"./prism-dns-zone-file.min.js": [
		"a7b6",
		"chunk-2d209380"
	],
	"./prism-docker": [
		"d9eb",
		"chunk-2d21f8a8"
	],
	"./prism-docker.js": [
		"d9eb",
		"chunk-2d21f8a8"
	],
	"./prism-docker.min": [
		"8dd4",
		"chunk-2d0e9972"
	],
	"./prism-docker.min.js": [
		"8dd4",
		"chunk-2d0e9972"
	],
	"./prism-ebnf": [
		"c706",
		"chunk-2d217630"
	],
	"./prism-ebnf.js": [
		"c706",
		"chunk-2d217630"
	],
	"./prism-ebnf.min": [
		"dcac",
		"chunk-2d2295d7"
	],
	"./prism-ebnf.min.js": [
		"dcac",
		"chunk-2d2295d7"
	],
	"./prism-editorconfig": [
		"07fa",
		"chunk-2d0a4df8"
	],
	"./prism-editorconfig.js": [
		"07fa",
		"chunk-2d0a4df8"
	],
	"./prism-editorconfig.min": [
		"73df",
		"chunk-2d0d6d54"
	],
	"./prism-editorconfig.min.js": [
		"73df",
		"chunk-2d0d6d54"
	],
	"./prism-eiffel": [
		"61cb",
		"chunk-2d0cf150"
	],
	"./prism-eiffel.js": [
		"61cb",
		"chunk-2d0cf150"
	],
	"./prism-eiffel.min": [
		"684e",
		"chunk-2d0d05e9"
	],
	"./prism-eiffel.min.js": [
		"684e",
		"chunk-2d0d05e9"
	],
	"./prism-ejs": [
		"a894",
		"chunk-2d209248"
	],
	"./prism-ejs.js": [
		"a894",
		"chunk-2d209248"
	],
	"./prism-ejs.min": [
		"e3a9",
		"chunk-2d2255dc"
	],
	"./prism-ejs.min.js": [
		"e3a9",
		"chunk-2d2255dc"
	],
	"./prism-elixir": [
		"f506",
		"chunk-2d22cbcb"
	],
	"./prism-elixir.js": [
		"f506",
		"chunk-2d22cbcb"
	],
	"./prism-elixir.min": [
		"e79c",
		"chunk-2d226032"
	],
	"./prism-elixir.min.js": [
		"e79c",
		"chunk-2d226032"
	],
	"./prism-elm": [
		"7885",
		"chunk-2d0d7a94"
	],
	"./prism-elm.js": [
		"7885",
		"chunk-2d0d7a94"
	],
	"./prism-elm.min": [
		"46a4",
		"chunk-2d0c1aeb"
	],
	"./prism-elm.min.js": [
		"46a4",
		"chunk-2d0c1aeb"
	],
	"./prism-erb": [
		"d348",
		"chunk-2d21dc09"
	],
	"./prism-erb.js": [
		"d348",
		"chunk-2d21dc09"
	],
	"./prism-erb.min": [
		"3aee",
		"chunk-2d0c48a4"
	],
	"./prism-erb.min.js": [
		"3aee",
		"chunk-2d0c48a4"
	],
	"./prism-erlang": [
		"9eb2",
		"chunk-2d0f1152"
	],
	"./prism-erlang.js": [
		"9eb2",
		"chunk-2d0f1152"
	],
	"./prism-erlang.min": [
		"daff",
		"chunk-2d228ef3"
	],
	"./prism-erlang.min.js": [
		"daff",
		"chunk-2d228ef3"
	],
	"./prism-etlua": [
		"9c5d",
		"chunk-2d0f048f"
	],
	"./prism-etlua.js": [
		"9c5d",
		"chunk-2d0f048f"
	],
	"./prism-etlua.min": [
		"7d97",
		"chunk-2d0e1fe1"
	],
	"./prism-etlua.min.js": [
		"7d97",
		"chunk-2d0e1fe1"
	],
	"./prism-excel-formula": [
		"d1fb",
		"chunk-2d21dabf"
	],
	"./prism-excel-formula.js": [
		"d1fb",
		"chunk-2d21dabf"
	],
	"./prism-excel-formula.min": [
		"2ed2",
		"chunk-2d0be2f7"
	],
	"./prism-excel-formula.min.js": [
		"2ed2",
		"chunk-2d0be2f7"
	],
	"./prism-factor": [
		"8f16",
		"chunk-2d0e9ac9"
	],
	"./prism-factor.js": [
		"8f16",
		"chunk-2d0e9ac9"
	],
	"./prism-factor.min": [
		"76f8",
		"chunk-2d0d78a7"
	],
	"./prism-factor.min.js": [
		"76f8",
		"chunk-2d0d78a7"
	],
	"./prism-firestore-security-rules": [
		"13d8",
		"chunk-2d0ab2ec"
	],
	"./prism-firestore-security-rules.js": [
		"13d8",
		"chunk-2d0ab2ec"
	],
	"./prism-firestore-security-rules.min": [
		"a7f2",
		"chunk-2d2093f8"
	],
	"./prism-firestore-security-rules.min.js": [
		"a7f2",
		"chunk-2d2093f8"
	],
	"./prism-flow": [
		"7411",
		"chunk-2d0d6ab3"
	],
	"./prism-flow.js": [
		"7411",
		"chunk-2d0d6ab3"
	],
	"./prism-flow.min": [
		"1c8c",
		"chunk-2d0b61f3"
	],
	"./prism-flow.min.js": [
		"1c8c",
		"chunk-2d0b61f3"
	],
	"./prism-fortran": [
		"fe76",
		"chunk-2d2380d4"
	],
	"./prism-fortran.js": [
		"fe76",
		"chunk-2d2380d4"
	],
	"./prism-fortran.min": [
		"2370",
		"chunk-2d0b21d0"
	],
	"./prism-fortran.min.js": [
		"2370",
		"chunk-2d0b21d0"
	],
	"./prism-fsharp": [
		"3d42",
		"chunk-2d0c4dc5"
	],
	"./prism-fsharp.js": [
		"3d42",
		"chunk-2d0c4dc5"
	],
	"./prism-fsharp.min": [
		"ef2a",
		"chunk-2d230fc6"
	],
	"./prism-fsharp.min.js": [
		"ef2a",
		"chunk-2d230fc6"
	],
	"./prism-ftl": [
		"f114",
		"chunk-2d22bce4"
	],
	"./prism-ftl.js": [
		"f114",
		"chunk-2d22bce4"
	],
	"./prism-ftl.min": [
		"babc",
		"chunk-2d21a5b6"
	],
	"./prism-ftl.min.js": [
		"babc",
		"chunk-2d21a5b6"
	],
	"./prism-gcode": [
		"434e",
		"chunk-2d0c0a66"
	],
	"./prism-gcode.js": [
		"434e",
		"chunk-2d0c0a66"
	],
	"./prism-gcode.min": [
		"9902",
		"chunk-2d0e6618"
	],
	"./prism-gcode.min.js": [
		"9902",
		"chunk-2d0e6618"
	],
	"./prism-gdscript": [
		"67bf",
		"chunk-2d0d07bb"
	],
	"./prism-gdscript.js": [
		"67bf",
		"chunk-2d0d07bb"
	],
	"./prism-gdscript.min": [
		"ec98",
		"chunk-2d230533"
	],
	"./prism-gdscript.min.js": [
		"ec98",
		"chunk-2d230533"
	],
	"./prism-gedcom": [
		"aa25",
		"chunk-2d212b59"
	],
	"./prism-gedcom.js": [
		"aa25",
		"chunk-2d212b59"
	],
	"./prism-gedcom.min": [
		"e97e",
		"chunk-2d226778"
	],
	"./prism-gedcom.min.js": [
		"e97e",
		"chunk-2d226778"
	],
	"./prism-gherkin": [
		"3c42",
		"chunk-2d0c4a04"
	],
	"./prism-gherkin.js": [
		"3c42",
		"chunk-2d0c4a04"
	],
	"./prism-gherkin.min": [
		"c291",
		"chunk-2d21647d"
	],
	"./prism-gherkin.min.js": [
		"c291",
		"chunk-2d21647d"
	],
	"./prism-git": [
		"07a3",
		"chunk-2d0a4d2f"
	],
	"./prism-git.js": [
		"07a3",
		"chunk-2d0a4d2f"
	],
	"./prism-git.min": [
		"b2fc",
		"chunk-2d20f5c3"
	],
	"./prism-git.min.js": [
		"b2fc",
		"chunk-2d20f5c3"
	],
	"./prism-glsl": [
		"df1c",
		"chunk-2d229b4a"
	],
	"./prism-glsl.js": [
		"df1c",
		"chunk-2d229b4a"
	],
	"./prism-glsl.min": [
		"dd5a",
		"chunk-2d229442"
	],
	"./prism-glsl.min.js": [
		"dd5a",
		"chunk-2d229442"
	],
	"./prism-gml": [
		"8117",
		"chunk-2d0dd3d5"
	],
	"./prism-gml.js": [
		"8117",
		"chunk-2d0dd3d5"
	],
	"./prism-gml.min": [
		"fa2f",
		"chunk-2d237165"
	],
	"./prism-gml.min.js": [
		"fa2f",
		"chunk-2d237165"
	],
	"./prism-go": [
		"1989",
		"chunk-2d0ac41f"
	],
	"./prism-go.js": [
		"1989",
		"chunk-2d0ac41f"
	],
	"./prism-go.min": [
		"253f",
		"chunk-2d0b290c"
	],
	"./prism-go.min.js": [
		"253f",
		"chunk-2d0b290c"
	],
	"./prism-graphql": [
		"63ad7",
		"chunk-74921a61"
	],
	"./prism-graphql.js": [
		"63ad7",
		"chunk-74921a61"
	],
	"./prism-graphql.min": [
		"0981",
		"chunk-2d0a4fb8"
	],
	"./prism-graphql.min.js": [
		"0981",
		"chunk-2d0a4fb8"
	],
	"./prism-groovy": [
		"e25f",
		"chunk-2d224cf4"
	],
	"./prism-groovy.js": [
		"e25f",
		"chunk-2d224cf4"
	],
	"./prism-groovy.min": [
		"723a",
		"chunk-2d0d639f"
	],
	"./prism-groovy.min.js": [
		"723a",
		"chunk-2d0d639f"
	],
	"./prism-haml": [
		"c1e2",
		"chunk-2d216611"
	],
	"./prism-haml.js": [
		"c1e2",
		"chunk-2d216611"
	],
	"./prism-haml.min": [
		"ab3c",
		"chunk-2d212f67"
	],
	"./prism-haml.min.js": [
		"ab3c",
		"chunk-2d212f67"
	],
	"./prism-handlebars": [
		"e5d9",
		"chunk-2d225dbb"
	],
	"./prism-handlebars.js": [
		"e5d9",
		"chunk-2d225dbb"
	],
	"./prism-handlebars.min": [
		"3d2a",
		"chunk-2d0c4db6"
	],
	"./prism-handlebars.min.js": [
		"3d2a",
		"chunk-2d0c4db6"
	],
	"./prism-haskell": [
		"4fc8",
		"chunk-2d0ccf5d"
	],
	"./prism-haskell.js": [
		"4fc8",
		"chunk-2d0ccf5d"
	],
	"./prism-haskell.min": [
		"42ea",
		"chunk-2d0c0c90"
	],
	"./prism-haskell.min.js": [
		"42ea",
		"chunk-2d0c0c90"
	],
	"./prism-haxe": [
		"d163",
		"chunk-2d21d4c0"
	],
	"./prism-haxe.js": [
		"d163",
		"chunk-2d21d4c0"
	],
	"./prism-haxe.min": [
		"f253",
		"chunk-2d22c120"
	],
	"./prism-haxe.min.js": [
		"f253",
		"chunk-2d22c120"
	],
	"./prism-hcl": [
		"f692",
		"chunk-2d22d09f"
	],
	"./prism-hcl.js": [
		"f692",
		"chunk-2d22d09f"
	],
	"./prism-hcl.min": [
		"4f69",
		"chunk-2d0cc9eb"
	],
	"./prism-hcl.min.js": [
		"4f69",
		"chunk-2d0cc9eb"
	],
	"./prism-hlsl": [
		"659f",
		"chunk-2d0cfb42"
	],
	"./prism-hlsl.js": [
		"659f",
		"chunk-2d0cfb42"
	],
	"./prism-hlsl.min": [
		"798a",
		"chunk-2d0d7e81"
	],
	"./prism-hlsl.min.js": [
		"798a",
		"chunk-2d0d7e81"
	],
	"./prism-hpkp": [
		"cc8e",
		"chunk-2d221c83"
	],
	"./prism-hpkp.js": [
		"cc8e",
		"chunk-2d221c83"
	],
	"./prism-hpkp.min": [
		"8b60",
		"chunk-2d0e8c5a"
	],
	"./prism-hpkp.min.js": [
		"8b60",
		"chunk-2d0e8c5a"
	],
	"./prism-hsts": [
		"c5da",
		"chunk-2d217525"
	],
	"./prism-hsts.js": [
		"c5da",
		"chunk-2d217525"
	],
	"./prism-hsts.min": [
		"6608",
		"chunk-2d0cfdbe"
	],
	"./prism-hsts.min.js": [
		"6608",
		"chunk-2d0cfdbe"
	],
	"./prism-http": [
		"9187",
		"chunk-2d0e490d"
	],
	"./prism-http.js": [
		"9187",
		"chunk-2d0e490d"
	],
	"./prism-http.min": [
		"53e0",
		"chunk-2d0c847f"
	],
	"./prism-http.min.js": [
		"53e0",
		"chunk-2d0c847f"
	],
	"./prism-ichigojam": [
		"48de",
		"chunk-2d0c22fb"
	],
	"./prism-ichigojam.js": [
		"48de",
		"chunk-2d0c22fb"
	],
	"./prism-ichigojam.min": [
		"fbeb",
		"chunk-2d237b4f"
	],
	"./prism-ichigojam.min.js": [
		"fbeb",
		"chunk-2d237b4f"
	],
	"./prism-icon": [
		"758c",
		"chunk-2d0d6f7f"
	],
	"./prism-icon.js": [
		"758c",
		"chunk-2d0d6f7f"
	],
	"./prism-icon.min": [
		"ebc3",
		"chunk-2d230683"
	],
	"./prism-icon.min.js": [
		"ebc3",
		"chunk-2d230683"
	],
	"./prism-iecst": [
		"742d",
		"chunk-2d0d6b05"
	],
	"./prism-iecst.js": [
		"742d",
		"chunk-2d0d6b05"
	],
	"./prism-iecst.min": [
		"1401",
		"chunk-2d0ab05a"
	],
	"./prism-iecst.min.js": [
		"1401",
		"chunk-2d0ab05a"
	],
	"./prism-ignore": [
		"d2cb",
		"chunk-2d21de23"
	],
	"./prism-ignore.js": [
		"d2cb",
		"chunk-2d21de23"
	],
	"./prism-ignore.min": [
		"a6d4",
		"chunk-2d208ffb"
	],
	"./prism-ignore.min.js": [
		"a6d4",
		"chunk-2d208ffb"
	],
	"./prism-inform7": [
		"eddf",
		"chunk-2d230e57"
	],
	"./prism-inform7.js": [
		"eddf",
		"chunk-2d230e57"
	],
	"./prism-inform7.min": [
		"3c1e",
		"chunk-2d0c49da"
	],
	"./prism-inform7.min.js": [
		"3c1e",
		"chunk-2d0c49da"
	],
	"./prism-ini": [
		"bf2e",
		"chunk-2d21b2ad"
	],
	"./prism-ini.js": [
		"bf2e",
		"chunk-2d21b2ad"
	],
	"./prism-ini.min": [
		"add7",
		"chunk-2d213cac"
	],
	"./prism-ini.min 2": [
		"c85e",
		"chunk-2d217abb"
	],
	"./prism-ini.min 2.js": [
		"c85e",
		"chunk-2d217abb"
	],
	"./prism-ini.min.js": [
		"add7",
		"chunk-2d213cac"
	],
	"./prism-io": [
		"0c1e",
		"chunk-2d0aecbd"
	],
	"./prism-io.js": [
		"0c1e",
		"chunk-2d0aecbd"
	],
	"./prism-io.min": [
		"347c",
		"chunk-2d0b9a23"
	],
	"./prism-io.min.js": [
		"347c",
		"chunk-2d0b9a23"
	],
	"./prism-j": [
		"f171",
		"chunk-2d22bd9b"
	],
	"./prism-j.js": [
		"f171",
		"chunk-2d22bd9b"
	],
	"./prism-j.min": [
		"3864",
		"chunk-2d0ba8d9"
	],
	"./prism-j.min.js": [
		"3864",
		"chunk-2d0ba8d9"
	],
	"./prism-java": [
		"922d",
		"chunk-2d0e4c41"
	],
	"./prism-java.js": [
		"922d",
		"chunk-2d0e4c41"
	],
	"./prism-java.min": [
		"d8d9",
		"chunk-2d21f49f"
	],
	"./prism-java.min.js": [
		"d8d9",
		"chunk-2d21f49f"
	],
	"./prism-javadoc": [
		"3d13",
		"chunk-2d0c4d69"
	],
	"./prism-javadoc.js": [
		"3d13",
		"chunk-2d0c4d69"
	],
	"./prism-javadoc.min": [
		"85a2",
		"chunk-2d0de8a4"
	],
	"./prism-javadoc.min.js": [
		"85a2",
		"chunk-2d0de8a4"
	],
	"./prism-javadoclike": [
		"735d",
		"chunk-2d0d67a1"
	],
	"./prism-javadoclike.js": [
		"735d",
		"chunk-2d0d67a1"
	],
	"./prism-javadoclike.min": [
		"84a6",
		"chunk-2d0de4e7"
	],
	"./prism-javadoclike.min.js": [
		"84a6",
		"chunk-2d0de4e7"
	],
	"./prism-javascript": [
		"416b",
		"chunk-2d0c031f"
	],
	"./prism-javascript.js": [
		"416b",
		"chunk-2d0c031f"
	],
	"./prism-javascript.min": [
		"17ca",
		"chunk-2d0ac1fa"
	],
	"./prism-javascript.min.js": [
		"17ca",
		"chunk-2d0ac1fa"
	],
	"./prism-javastacktrace": [
		"b64c",
		"chunk-2d20feb9"
	],
	"./prism-javastacktrace.js": [
		"b64c",
		"chunk-2d20feb9"
	],
	"./prism-javastacktrace.min": [
		"9e45",
		"chunk-2d0f0bc3"
	],
	"./prism-javastacktrace.min.js": [
		"9e45",
		"chunk-2d0f0bc3"
	],
	"./prism-jolie": [
		"ff6e",
		"chunk-2d2384a5"
	],
	"./prism-jolie.js": [
		"ff6e",
		"chunk-2d2384a5"
	],
	"./prism-jolie.min": [
		"4ee4",
		"chunk-2d0ccbd6"
	],
	"./prism-jolie.min.js": [
		"4ee4",
		"chunk-2d0ccbd6"
	],
	"./prism-jq": [
		"b986",
		"chunk-2d210a4b"
	],
	"./prism-jq.js": [
		"b986",
		"chunk-2d210a4b"
	],
	"./prism-jq.min": [
		"366a",
		"chunk-2d0ba184"
	],
	"./prism-jq.min.js": [
		"366a",
		"chunk-2d0ba184"
	],
	"./prism-js-extras": [
		"f97e",
		"chunk-2d22dbd7"
	],
	"./prism-js-extras.js": [
		"f97e",
		"chunk-2d22dbd7"
	],
	"./prism-js-extras.min": [
		"0f3a",
		"chunk-2d0af83a"
	],
	"./prism-js-extras.min.js": [
		"0f3a",
		"chunk-2d0af83a"
	],
	"./prism-js-templates": [
		"3bd2",
		"chunk-2d0c4c13"
	],
	"./prism-js-templates.js": [
		"3bd2",
		"chunk-2d0c4c13"
	],
	"./prism-js-templates.min": [
		"3188",
		"chunk-2d0b8ed4"
	],
	"./prism-js-templates.min.js": [
		"3188",
		"chunk-2d0b8ed4"
	],
	"./prism-jsdoc": [
		"9384",
		"chunk-2d0e508c"
	],
	"./prism-jsdoc.js": [
		"9384",
		"chunk-2d0e508c"
	],
	"./prism-jsdoc.min": [
		"1ff7",
		"chunk-2d0b729c"
	],
	"./prism-jsdoc.min.js": [
		"1ff7",
		"chunk-2d0b729c"
	],
	"./prism-json": [
		"f393",
		"chunk-2d22c55d"
	],
	"./prism-json.js": [
		"f393",
		"chunk-2d22c55d"
	],
	"./prism-json.min": [
		"f14e",
		"chunk-2d22bd72"
	],
	"./prism-json.min.js": [
		"f14e",
		"chunk-2d22bd72"
	],
	"./prism-json5": [
		"4785",
		"chunk-2d0c19b6"
	],
	"./prism-json5.js": [
		"4785",
		"chunk-2d0c19b6"
	],
	"./prism-json5.min": [
		"6805",
		"chunk-2d0d053d"
	],
	"./prism-json5.min.js": [
		"6805",
		"chunk-2d0d053d"
	],
	"./prism-jsonp": [
		"32c2",
		"chunk-2d0b97c4"
	],
	"./prism-jsonp.js": [
		"32c2",
		"chunk-2d0b97c4"
	],
	"./prism-jsonp.min": [
		"803e",
		"chunk-2d0dd080"
	],
	"./prism-jsonp.min.js": [
		"803e",
		"chunk-2d0dd080"
	],
	"./prism-jsstacktrace": [
		"22a0",
		"chunk-2d0b2325"
	],
	"./prism-jsstacktrace.js": [
		"22a0",
		"chunk-2d0b2325"
	],
	"./prism-jsstacktrace.min": [
		"dee6",
		"chunk-2d229da8"
	],
	"./prism-jsstacktrace.min.js": [
		"dee6",
		"chunk-2d229da8"
	],
	"./prism-jsx": [
		"0a31",
		"chunk-2d0ae545"
	],
	"./prism-jsx.js": [
		"0a31",
		"chunk-2d0ae545"
	],
	"./prism-jsx.min": [
		"b387",
		"chunk-2d20f3c6"
	],
	"./prism-jsx.min.js": [
		"b387",
		"chunk-2d20f3c6"
	],
	"./prism-julia": [
		"e4cf",
		"chunk-2d225a08"
	],
	"./prism-julia.js": [
		"e4cf",
		"chunk-2d225a08"
	],
	"./prism-julia.min": [
		"654b",
		"chunk-2d0cfaa3"
	],
	"./prism-julia.min.js": [
		"654b",
		"chunk-2d0cfaa3"
	],
	"./prism-keyman": [
		"493e",
		"chunk-2d0c20cd"
	],
	"./prism-keyman.js": [
		"493e",
		"chunk-2d0c20cd"
	],
	"./prism-keyman.min": [
		"4ac5",
		"chunk-2d0cbc95"
	],
	"./prism-keyman.min.js": [
		"4ac5",
		"chunk-2d0cbc95"
	],
	"./prism-kotlin": [
		"64cd",
		"chunk-2d0cfc95"
	],
	"./prism-kotlin.js": [
		"64cd",
		"chunk-2d0cfc95"
	],
	"./prism-kotlin.min": [
		"c7db",
		"chunk-2d217ca8"
	],
	"./prism-kotlin.min.js": [
		"c7db",
		"chunk-2d217ca8"
	],
	"./prism-latex": [
		"bb5b",
		"chunk-2d21a403"
	],
	"./prism-latex.js": [
		"bb5b",
		"chunk-2d21a403"
	],
	"./prism-latex.min": [
		"f066",
		"chunk-2d22b9c0"
	],
	"./prism-latex.min.js": [
		"f066",
		"chunk-2d22b9c0"
	],
	"./prism-latte": [
		"563f",
		"chunk-2d0c89ea"
	],
	"./prism-latte.js": [
		"563f",
		"chunk-2d0c89ea"
	],
	"./prism-latte.min": [
		"3eb2",
		"chunk-2d0c5718"
	],
	"./prism-latte.min.js": [
		"3eb2",
		"chunk-2d0c5718"
	],
	"./prism-less": [
		"f9fc",
		"chunk-2d22e186"
	],
	"./prism-less.js": [
		"f9fc",
		"chunk-2d22e186"
	],
	"./prism-less.min": [
		"f88c",
		"chunk-2d22d833"
	],
	"./prism-less.min.js": [
		"f88c",
		"chunk-2d22d833"
	],
	"./prism-lilypond": [
		"1c08",
		"chunk-2d0b60d0"
	],
	"./prism-lilypond.js": [
		"1c08",
		"chunk-2d0b60d0"
	],
	"./prism-lilypond.min": [
		"ac50",
		"chunk-2d213333"
	],
	"./prism-lilypond.min.js": [
		"ac50",
		"chunk-2d213333"
	],
	"./prism-liquid": [
		"cf19",
		"chunk-2d2226c1"
	],
	"./prism-liquid.js": [
		"cf19",
		"chunk-2d2226c1"
	],
	"./prism-liquid.min": [
		"750b",
		"chunk-2d0d6e86"
	],
	"./prism-liquid.min.js": [
		"750b",
		"chunk-2d0d6e86"
	],
	"./prism-lisp": [
		"f484",
		"chunk-2d22c900"
	],
	"./prism-lisp.js": [
		"f484",
		"chunk-2d22c900"
	],
	"./prism-lisp.min": [
		"cd6e",
		"chunk-2d222006"
	],
	"./prism-lisp.min.js": [
		"cd6e",
		"chunk-2d222006"
	],
	"./prism-livescript": [
		"3a5f",
		"chunk-2d0c42d5"
	],
	"./prism-livescript.js": [
		"3a5f",
		"chunk-2d0c42d5"
	],
	"./prism-livescript.min": [
		"3753",
		"chunk-2d0ba4f8"
	],
	"./prism-livescript.min.js": [
		"3753",
		"chunk-2d0ba4f8"
	],
	"./prism-llvm": [
		"5126",
		"chunk-2d0c76d6"
	],
	"./prism-llvm.js": [
		"5126",
		"chunk-2d0c76d6"
	],
	"./prism-llvm.min": [
		"8b74",
		"chunk-2d0e8c7d"
	],
	"./prism-llvm.min.js": [
		"8b74",
		"chunk-2d0e8c7d"
	],
	"./prism-lolcode": [
		"8672",
		"chunk-2d0de74f"
	],
	"./prism-lolcode.js": [
		"8672",
		"chunk-2d0de74f"
	],
	"./prism-lolcode.min": [
		"3344",
		"chunk-2d0b95d6"
	],
	"./prism-lolcode.min.js": [
		"3344",
		"chunk-2d0b95d6"
	],
	"./prism-lua": [
		"6701",
		"chunk-2d0d0178"
	],
	"./prism-lua.js": [
		"6701",
		"chunk-2d0d0178"
	],
	"./prism-lua.min": [
		"aa45",
		"chunk-2d212b97"
	],
	"./prism-lua.min.js": [
		"aa45",
		"chunk-2d212b97"
	],
	"./prism-makefile": [
		"0d5d",
		"chunk-2d0af0f9"
	],
	"./prism-makefile.js": [
		"0d5d",
		"chunk-2d0af0f9"
	],
	"./prism-makefile.min": [
		"7ed1",
		"chunk-2d0e28d1"
	],
	"./prism-makefile.min.js": [
		"7ed1",
		"chunk-2d0e28d1"
	],
	"./prism-markdown": [
		"826c",
		"chunk-2d0dd85d"
	],
	"./prism-markdown.js": [
		"826c",
		"chunk-2d0dd85d"
	],
	"./prism-markdown.min": [
		"f6c7",
		"chunk-2d22d5ba"
	],
	"./prism-markdown.min.js": [
		"f6c7",
		"chunk-2d22d5ba"
	],
	"./prism-markup": [
		"6cf3",
		"chunk-2d0dad30"
	],
	"./prism-markup-templating": [
		"6217",
		"chunk-2d0ceed8"
	],
	"./prism-markup-templating.js": [
		"6217",
		"chunk-2d0ceed8"
	],
	"./prism-markup-templating.min": [
		"d69f",
		"chunk-2d21e815"
	],
	"./prism-markup-templating.min.js": [
		"d69f",
		"chunk-2d21e815"
	],
	"./prism-markup.js": [
		"6cf3",
		"chunk-2d0dad30"
	],
	"./prism-markup.min": [
		"fc37",
		"chunk-2d2378d7"
	],
	"./prism-markup.min.js": [
		"fc37",
		"chunk-2d2378d7"
	],
	"./prism-matlab": [
		"d4d5",
		"chunk-2d21e597"
	],
	"./prism-matlab.js": [
		"d4d5",
		"chunk-2d21e597"
	],
	"./prism-matlab.min": [
		"5a6b",
		"chunk-2d0d2bae"
	],
	"./prism-matlab.min.js": [
		"5a6b",
		"chunk-2d0d2bae"
	],
	"./prism-mel": [
		"f99c",
		"chunk-2d22dc13"
	],
	"./prism-mel.js": [
		"f99c",
		"chunk-2d22dc13"
	],
	"./prism-mel.min": [
		"b8c6",
		"chunk-2d210bbf"
	],
	"./prism-mel.min.js": [
		"b8c6",
		"chunk-2d210bbf"
	],
	"./prism-mizar": [
		"45e5",
		"chunk-2d0c17a7"
	],
	"./prism-mizar.js": [
		"45e5",
		"chunk-2d0c17a7"
	],
	"./prism-mizar.min": [
		"d09c",
		"chunk-2d21d18c"
	],
	"./prism-mizar.min.js": [
		"d09c",
		"chunk-2d21d18c"
	],
	"./prism-mongodb": [
		"2aac",
		"chunk-2d0bd3c7"
	],
	"./prism-mongodb.js": [
		"2aac",
		"chunk-2d0bd3c7"
	],
	"./prism-mongodb.min": [
		"5413",
		"chunk-2d0c81f7"
	],
	"./prism-mongodb.min.js": [
		"5413",
		"chunk-2d0c81f7"
	],
	"./prism-monkey": [
		"05b8",
		"chunk-2d0a45d1"
	],
	"./prism-monkey.js": [
		"05b8",
		"chunk-2d0a45d1"
	],
	"./prism-monkey.min": [
		"4b48",
		"chunk-2d0cbaa8"
	],
	"./prism-monkey.min.js": [
		"4b48",
		"chunk-2d0cbaa8"
	],
	"./prism-moonscript": [
		"e8ab",
		"chunk-2d2268ca"
	],
	"./prism-moonscript.js": [
		"e8ab",
		"chunk-2d2268ca"
	],
	"./prism-moonscript.min": [
		"626c",
		"chunk-2d0cef9f"
	],
	"./prism-moonscript.min.js": [
		"626c",
		"chunk-2d0cef9f"
	],
	"./prism-n1ql": [
		"60bf",
		"chunk-2d0ced74"
	],
	"./prism-n1ql.js": [
		"60bf",
		"chunk-2d0ced74"
	],
	"./prism-n1ql.min": [
		"a5bc",
		"chunk-2d208c2b"
	],
	"./prism-n1ql.min.js": [
		"a5bc",
		"chunk-2d208c2b"
	],
	"./prism-n4js": [
		"7602",
		"chunk-2d0d7217"
	],
	"./prism-n4js.js": [
		"7602",
		"chunk-2d0d7217"
	],
	"./prism-n4js.min": [
		"4e13",
		"chunk-2d0cc589"
	],
	"./prism-n4js.min.js": [
		"4e13",
		"chunk-2d0cc589"
	],
	"./prism-nand2tetris-hdl": [
		"8e35",
		"chunk-2d0e9745"
	],
	"./prism-nand2tetris-hdl.js": [
		"8e35",
		"chunk-2d0e9745"
	],
	"./prism-nand2tetris-hdl.min": [
		"0295",
		"chunk-2d0a3594"
	],
	"./prism-nand2tetris-hdl.min.js": [
		"0295",
		"chunk-2d0a3594"
	],
	"./prism-naniscript": [
		"efa7",
		"chunk-2d23154d"
	],
	"./prism-naniscript.js": [
		"efa7",
		"chunk-2d23154d"
	],
	"./prism-naniscript.min": [
		"a76b",
		"chunk-2d208e58"
	],
	"./prism-naniscript.min.js": [
		"a76b",
		"chunk-2d208e58"
	],
	"./prism-nasm": [
		"87b2",
		"chunk-2d0df045"
	],
	"./prism-nasm.js": [
		"87b2",
		"chunk-2d0df045"
	],
	"./prism-nasm.min": [
		"b4fe",
		"chunk-2d20fd47"
	],
	"./prism-nasm.min.js": [
		"b4fe",
		"chunk-2d20fd47"
	],
	"./prism-neon": [
		"6c33",
		"chunk-2d0da703"
	],
	"./prism-neon.js": [
		"6c33",
		"chunk-2d0da703"
	],
	"./prism-neon.min": [
		"6f48",
		"chunk-2d0db26a"
	],
	"./prism-neon.min.js": [
		"6f48",
		"chunk-2d0db26a"
	],
	"./prism-nginx": [
		"a0d9",
		"chunk-2d20797a"
	],
	"./prism-nginx.js": [
		"a0d9",
		"chunk-2d20797a"
	],
	"./prism-nginx.min": [
		"de8f",
		"chunk-2d229865"
	],
	"./prism-nginx.min.js": [
		"de8f",
		"chunk-2d229865"
	],
	"./prism-nim": [
		"f2c0",
		"chunk-2d22c6af"
	],
	"./prism-nim.js": [
		"f2c0",
		"chunk-2d22c6af"
	],
	"./prism-nim.min": [
		"f724",
		"chunk-2d22d389"
	],
	"./prism-nim.min.js": [
		"f724",
		"chunk-2d22d389"
	],
	"./prism-nix": [
		"af86",
		"chunk-2d213ed9"
	],
	"./prism-nix.js": [
		"af86",
		"chunk-2d213ed9"
	],
	"./prism-nix.min": [
		"18f3",
		"chunk-2d0ac5ea"
	],
	"./prism-nix.min.js": [
		"18f3",
		"chunk-2d0ac5ea"
	],
	"./prism-nsis": [
		"4d49",
		"chunk-2d0cc22b"
	],
	"./prism-nsis.js": [
		"4d49",
		"chunk-2d0cc22b"
	],
	"./prism-nsis.min": [
		"a6a5",
		"chunk-2d208f9f"
	],
	"./prism-nsis.min.js": [
		"a6a5",
		"chunk-2d208f9f"
	],
	"./prism-objectivec": [
		"4cbf",
		"chunk-2d0cc429"
	],
	"./prism-objectivec.js": [
		"4cbf",
		"chunk-2d0cc429"
	],
	"./prism-objectivec.min": [
		"bf38",
		"chunk-2d21b29f"
	],
	"./prism-objectivec.min.js": [
		"bf38",
		"chunk-2d21b29f"
	],
	"./prism-ocaml": [
		"6c46",
		"chunk-2d0da725"
	],
	"./prism-ocaml.js": [
		"6c46",
		"chunk-2d0da725"
	],
	"./prism-ocaml.min": [
		"1421",
		"chunk-2d0ab098"
	],
	"./prism-ocaml.min.js": [
		"1421",
		"chunk-2d0ab098"
	],
	"./prism-opencl": [
		"613f",
		"chunk-2d0ceb84"
	],
	"./prism-opencl.js": [
		"613f",
		"chunk-2d0ceb84"
	],
	"./prism-opencl.min": [
		"0c14",
		"chunk-2d0aec8c"
	],
	"./prism-opencl.min.js": [
		"0c14",
		"chunk-2d0aec8c"
	],
	"./prism-oz": [
		"f710",
		"chunk-2d22d366"
	],
	"./prism-oz.js": [
		"f710",
		"chunk-2d22d366"
	],
	"./prism-oz.min": [
		"7d17",
		"chunk-2d0e1ee9"
	],
	"./prism-oz.min.js": [
		"7d17",
		"chunk-2d0e1ee9"
	],
	"./prism-parigp": [
		"185e",
		"chunk-2d0ac02d"
	],
	"./prism-parigp.js": [
		"185e",
		"chunk-2d0ac02d"
	],
	"./prism-parigp.min": [
		"9dab",
		"chunk-2d0f0da2"
	],
	"./prism-parigp.min.js": [
		"9dab",
		"chunk-2d0f0da2"
	],
	"./prism-parser": [
		"c5db",
		"chunk-2d217526"
	],
	"./prism-parser.js": [
		"c5db",
		"chunk-2d217526"
	],
	"./prism-parser.min": [
		"f8ce",
		"chunk-2d22dd6a"
	],
	"./prism-parser.min.js": [
		"f8ce",
		"chunk-2d22dd6a"
	],
	"./prism-pascal": [
		"36e8",
		"chunk-2d0ba70c"
	],
	"./prism-pascal.js": [
		"36e8",
		"chunk-2d0ba70c"
	],
	"./prism-pascal.min": [
		"3733",
		"chunk-2d0ba4ba"
	],
	"./prism-pascal.min.js": [
		"3733",
		"chunk-2d0ba4ba"
	],
	"./prism-pascaligo": [
		"1742",
		"chunk-2d0abc1a"
	],
	"./prism-pascaligo.js": [
		"1742",
		"chunk-2d0abc1a"
	],
	"./prism-pascaligo.min": [
		"d3da",
		"chunk-2d21e202"
	],
	"./prism-pascaligo.min.js": [
		"d3da",
		"chunk-2d21e202"
	],
	"./prism-pcaxis": [
		"800d",
		"chunk-2d0dd022"
	],
	"./prism-pcaxis.js": [
		"800d",
		"chunk-2d0dd022"
	],
	"./prism-pcaxis.min": [
		"7a30",
		"chunk-2d0e13dd"
	],
	"./prism-pcaxis.min.js": [
		"7a30",
		"chunk-2d0e13dd"
	],
	"./prism-peoplecode": [
		"e7ad",
		"chunk-2d22650b"
	],
	"./prism-peoplecode.js": [
		"e7ad",
		"chunk-2d22650b"
	],
	"./prism-peoplecode.min": [
		"2b1a",
		"chunk-2d0bd1b6"
	],
	"./prism-peoplecode.min.js": [
		"2b1a",
		"chunk-2d0bd1b6"
	],
	"./prism-perl": [
		"991d",
		"chunk-2d0e6669"
	],
	"./prism-perl.js": [
		"991d",
		"chunk-2d0e6669"
	],
	"./prism-perl.min": [
		"c98a",
		"chunk-2d217ed5"
	],
	"./prism-perl.min.js": [
		"c98a",
		"chunk-2d217ed5"
	],
	"./prism-php": [
		"8e9b",
		"chunk-2d0e982c"
	],
	"./prism-php-extras": [
		"5599",
		"chunk-2d0c86b6"
	],
	"./prism-php-extras.js": [
		"5599",
		"chunk-2d0c86b6"
	],
	"./prism-php-extras.min": [
		"d748",
		"chunk-2d21eb0d"
	],
	"./prism-php-extras.min.js": [
		"d748",
		"chunk-2d21eb0d"
	],
	"./prism-php.js": [
		"8e9b",
		"chunk-2d0e982c"
	],
	"./prism-php.min": [
		"ae68",
		"chunk-2d213adc"
	],
	"./prism-php.min.js": [
		"ae68",
		"chunk-2d213adc"
	],
	"./prism-phpdoc": [
		"a42e",
		"chunk-2d20829c"
	],
	"./prism-phpdoc.js": [
		"a42e",
		"chunk-2d20829c"
	],
	"./prism-phpdoc.min": [
		"14b2",
		"chunk-2d0ab669"
	],
	"./prism-phpdoc.min.js": [
		"14b2",
		"chunk-2d0ab669"
	],
	"./prism-plsql": [
		"e0c4",
		"chunk-2d224ad2"
	],
	"./prism-plsql.js": [
		"e0c4",
		"chunk-2d224ad2"
	],
	"./prism-plsql.min": [
		"0f05",
		"chunk-2d0af7b1"
	],
	"./prism-plsql.min.js": [
		"0f05",
		"chunk-2d0af7b1"
	],
	"./prism-powerquery": [
		"c2a2",
		"chunk-2d216956"
	],
	"./prism-powerquery.js": [
		"c2a2",
		"chunk-2d216956"
	],
	"./prism-powerquery.min": [
		"7824",
		"chunk-2d0d79d9"
	],
	"./prism-powerquery.min.js": [
		"7824",
		"chunk-2d0d79d9"
	],
	"./prism-powershell": [
		"3ae3",
		"chunk-2d0c4872"
	],
	"./prism-powershell.js": [
		"3ae3",
		"chunk-2d0c4872"
	],
	"./prism-powershell.min": [
		"1290",
		"chunk-2d0aa9ee"
	],
	"./prism-powershell.min.js": [
		"1290",
		"chunk-2d0aa9ee"
	],
	"./prism-processing": [
		"f283",
		"chunk-2d22c17d"
	],
	"./prism-processing.js": [
		"f283",
		"chunk-2d22c17d"
	],
	"./prism-processing.min": [
		"82b7",
		"chunk-2d0ddd85"
	],
	"./prism-processing.min.js": [
		"82b7",
		"chunk-2d0ddd85"
	],
	"./prism-prolog": [
		"4735",
		"chunk-2d0c191b"
	],
	"./prism-prolog.js": [
		"4735",
		"chunk-2d0c191b"
	],
	"./prism-prolog.min": [
		"939c",
		"chunk-2d0e50da"
	],
	"./prism-prolog.min.js": [
		"939c",
		"chunk-2d0e50da"
	],
	"./prism-promql": [
		"6be9",
		"chunk-2d0da956"
	],
	"./prism-promql.js": [
		"6be9",
		"chunk-2d0da956"
	],
	"./prism-promql.min": [
		"16b9",
		"chunk-2d0abdf2"
	],
	"./prism-promql.min.js": [
		"16b9",
		"chunk-2d0abdf2"
	],
	"./prism-properties": [
		"f704",
		"chunk-2d22d34b"
	],
	"./prism-properties.js": [
		"f704",
		"chunk-2d22d34b"
	],
	"./prism-properties.min": [
		"4bfd",
		"chunk-2d0cc0e2"
	],
	"./prism-properties.min.js": [
		"4bfd",
		"chunk-2d0cc0e2"
	],
	"./prism-protobuf": [
		"459e",
		"chunk-2d0c1283"
	],
	"./prism-protobuf.js": [
		"459e",
		"chunk-2d0c1283"
	],
	"./prism-protobuf.min": [
		"bc99",
		"chunk-2d21a817"
	],
	"./prism-protobuf.min.js": [
		"bc99",
		"chunk-2d21a817"
	],
	"./prism-pug": [
		"7559",
		"chunk-2d0d6ef8"
	],
	"./prism-pug.js": [
		"7559",
		"chunk-2d0d6ef8"
	],
	"./prism-pug.min": [
		"8406",
		"chunk-2d0ddef8"
	],
	"./prism-pug.min.js": [
		"8406",
		"chunk-2d0ddef8"
	],
	"./prism-puppet": [
		"bf27",
		"chunk-2d21b27f"
	],
	"./prism-puppet.js": [
		"bf27",
		"chunk-2d21b27f"
	],
	"./prism-puppet.min": [
		"a109",
		"chunk-2d2076ef"
	],
	"./prism-puppet.min.js": [
		"a109",
		"chunk-2d2076ef"
	],
	"./prism-pure": [
		"57d8",
		"chunk-2d0c936c"
	],
	"./prism-pure.js": [
		"57d8",
		"chunk-2d0c936c"
	],
	"./prism-pure.min": [
		"85a9",
		"chunk-2d0de8ab"
	],
	"./prism-pure.min.js": [
		"85a9",
		"chunk-2d0de8ab"
	],
	"./prism-purebasic": [
		"43ed",
		"chunk-2d0c1054"
	],
	"./prism-purebasic.js": [
		"43ed",
		"chunk-2d0c1054"
	],
	"./prism-purebasic.min": [
		"5ac7",
		"chunk-2d0d30f6"
	],
	"./prism-purebasic.min.js": [
		"5ac7",
		"chunk-2d0d30f6"
	],
	"./prism-purescript": [
		"df5a",
		"chunk-2d229bc4"
	],
	"./prism-purescript.js": [
		"df5a",
		"chunk-2d229bc4"
	],
	"./prism-purescript.min": [
		"808b",
		"chunk-2d0dd118"
	],
	"./prism-purescript.min.js": [
		"808b",
		"chunk-2d0dd118"
	],
	"./prism-python": [
		"3d21",
		"chunk-2d0c4d86"
	],
	"./prism-python.js": [
		"3d21",
		"chunk-2d0c4d86"
	],
	"./prism-python.min": [
		"8fd1",
		"chunk-2d0ea0f1"
	],
	"./prism-python.min.js": [
		"8fd1",
		"chunk-2d0ea0f1"
	],
	"./prism-q": [
		"6937",
		"chunk-2d0d095d"
	],
	"./prism-q.js": [
		"6937",
		"chunk-2d0d095d"
	],
	"./prism-q.min": [
		"df82",
		"chunk-2d229bf2"
	],
	"./prism-q.min.js": [
		"df82",
		"chunk-2d229bf2"
	],
	"./prism-qml": [
		"29ae",
		"chunk-2d0b3da1"
	],
	"./prism-qml.js": [
		"29ae",
		"chunk-2d0b3da1"
	],
	"./prism-qml.min": [
		"93a2",
		"chunk-2d0e5581"
	],
	"./prism-qml.min.js": [
		"93a2",
		"chunk-2d0e5581"
	],
	"./prism-qore": [
		"faac",
		"chunk-2d237713"
	],
	"./prism-qore.js": [
		"faac",
		"chunk-2d237713"
	],
	"./prism-qore.min": [
		"27e9",
		"chunk-2d0b366f"
	],
	"./prism-qore.min.js": [
		"27e9",
		"chunk-2d0b366f"
	],
	"./prism-r": [
		"49cc",
		"chunk-2d0c269b"
	],
	"./prism-r.js": [
		"49cc",
		"chunk-2d0c269b"
	],
	"./prism-r.min": [
		"2a83",
		"chunk-2d0bcea0"
	],
	"./prism-r.min.js": [
		"2a83",
		"chunk-2d0bcea0"
	],
	"./prism-racket": [
		"f5db",
		"chunk-2d22d243"
	],
	"./prism-racket.js": [
		"f5db",
		"chunk-2d22d243"
	],
	"./prism-racket.min": [
		"9746",
		"chunk-2d0e5f16"
	],
	"./prism-racket.min.js": [
		"9746",
		"chunk-2d0e5f16"
	],
	"./prism-reason": [
		"603e",
		"chunk-2d0ce7c2"
	],
	"./prism-reason.js": [
		"603e",
		"chunk-2d0ce7c2"
	],
	"./prism-reason.min": [
		"464a",
		"chunk-2d0c15a5"
	],
	"./prism-reason.min.js": [
		"464a",
		"chunk-2d0c15a5"
	],
	"./prism-regex": [
		"b8cf",
		"chunk-2d210bef"
	],
	"./prism-regex.js": [
		"b8cf",
		"chunk-2d210bef"
	],
	"./prism-regex.min": [
		"923b",
		"chunk-2d0e4c5e"
	],
	"./prism-regex.min.js": [
		"923b",
		"chunk-2d0e4c5e"
	],
	"./prism-renpy": [
		"3619",
		"chunk-2d0ba0c1"
	],
	"./prism-renpy.js": [
		"3619",
		"chunk-2d0ba0c1"
	],
	"./prism-renpy.min": [
		"99fa",
		"chunk-2d0e6cd1"
	],
	"./prism-renpy.min.js": [
		"99fa",
		"chunk-2d0e6cd1"
	],
	"./prism-rest": [
		"6fba",
		"chunk-2d0db825"
	],
	"./prism-rest.js": [
		"6fba",
		"chunk-2d0db825"
	],
	"./prism-rest.min": [
		"a2a8",
		"chunk-2d20809e"
	],
	"./prism-rest.min.js": [
		"a2a8",
		"chunk-2d20809e"
	],
	"./prism-rip": [
		"107a",
		"chunk-2d0aa25f"
	],
	"./prism-rip.js": [
		"107a",
		"chunk-2d0aa25f"
	],
	"./prism-rip.min": [
		"7bb8",
		"chunk-2d0e1d57"
	],
	"./prism-rip.min.js": [
		"7bb8",
		"chunk-2d0e1d57"
	],
	"./prism-roboconf": [
		"e861",
		"chunk-2d226364"
	],
	"./prism-roboconf.js": [
		"e861",
		"chunk-2d226364"
	],
	"./prism-roboconf.min": [
		"2385",
		"chunk-2d0b21f4"
	],
	"./prism-roboconf.min.js": [
		"2385",
		"chunk-2d0b21f4"
	],
	"./prism-robotframework": [
		"71e0",
		"chunk-2d0d65bb"
	],
	"./prism-robotframework.js": [
		"71e0",
		"chunk-2d0d65bb"
	],
	"./prism-robotframework.min": [
		"2abc",
		"chunk-2d0bd3e6"
	],
	"./prism-robotframework.min.js": [
		"2abc",
		"chunk-2d0bd3e6"
	],
	"./prism-ruby": [
		"b130",
		"chunk-2d20eba2"
	],
	"./prism-ruby.js": [
		"b130",
		"chunk-2d20eba2"
	],
	"./prism-ruby.min": [
		"3376",
		"chunk-2d0b9635"
	],
	"./prism-ruby.min.js": [
		"3376",
		"chunk-2d0b9635"
	],
	"./prism-rust": [
		"0477",
		"chunk-2d0a3cda"
	],
	"./prism-rust.js": [
		"0477",
		"chunk-2d0a3cda"
	],
	"./prism-rust.min": [
		"ab03",
		"chunk-2d212eda"
	],
	"./prism-rust.min.js": [
		"ab03",
		"chunk-2d212eda"
	],
	"./prism-sas": [
		"f2c5",
		"chunk-2d22c6b4"
	],
	"./prism-sas.js": [
		"f2c5",
		"chunk-2d22c6b4"
	],
	"./prism-sas.min": [
		"cc6e",
		"chunk-2d221c45"
	],
	"./prism-sas.min.js": [
		"cc6e",
		"chunk-2d221c45"
	],
	"./prism-sass": [
		"7965",
		"chunk-2d0d7e17"
	],
	"./prism-sass.js": [
		"7965",
		"chunk-2d0d7e17"
	],
	"./prism-sass.min": [
		"1e5b",
		"chunk-2d0b6917"
	],
	"./prism-sass.min.js": [
		"1e5b",
		"chunk-2d0b6917"
	],
	"./prism-scala": [
		"2935",
		"chunk-2d0b37df"
	],
	"./prism-scala.js": [
		"2935",
		"chunk-2d0b37df"
	],
	"./prism-scala.min": [
		"a8a9",
		"chunk-2d209725"
	],
	"./prism-scala.min.js": [
		"a8a9",
		"chunk-2d209725"
	],
	"./prism-scheme": [
		"7190",
		"chunk-2d0d6067"
	],
	"./prism-scheme.js": [
		"7190",
		"chunk-2d0d6067"
	],
	"./prism-scheme.min": [
		"10b7",
		"chunk-2d0aa76a"
	],
	"./prism-scheme.min.js": [
		"10b7",
		"chunk-2d0aa76a"
	],
	"./prism-scss": [
		"867a",
		"chunk-2d0de77e"
	],
	"./prism-scss.js": [
		"867a",
		"chunk-2d0de77e"
	],
	"./prism-scss.min": [
		"70cb",
		"chunk-2d0d61ee"
	],
	"./prism-scss.min.js": [
		"70cb",
		"chunk-2d0d61ee"
	],
	"./prism-shell-session": [
		"abf8",
		"chunk-2d213569"
	],
	"./prism-shell-session.js": [
		"abf8",
		"chunk-2d213569"
	],
	"./prism-shell-session.min": [
		"eb20",
		"chunk-2d230091"
	],
	"./prism-shell-session.min.js": [
		"eb20",
		"chunk-2d230091"
	],
	"./prism-smali": [
		"45e8",
		"chunk-2d0c17aa"
	],
	"./prism-smali.js": [
		"45e8",
		"chunk-2d0c17aa"
	],
	"./prism-smali.min": [
		"8e97",
		"chunk-2d0e9801"
	],
	"./prism-smali.min.js": [
		"8e97",
		"chunk-2d0e9801"
	],
	"./prism-smalltalk": [
		"7272",
		"chunk-2d0d63ec"
	],
	"./prism-smalltalk.js": [
		"7272",
		"chunk-2d0d63ec"
	],
	"./prism-smalltalk.min": [
		"6a63",
		"chunk-2d0d9fde"
	],
	"./prism-smalltalk.min.js": [
		"6a63",
		"chunk-2d0d9fde"
	],
	"./prism-smarty": [
		"f841",
		"chunk-2d22d785"
	],
	"./prism-smarty.js": [
		"f841",
		"chunk-2d22d785"
	],
	"./prism-smarty.min": [
		"58cd",
		"chunk-2d0c973a"
	],
	"./prism-smarty.min.js": [
		"58cd",
		"chunk-2d0c973a"
	],
	"./prism-sml": [
		"ba3a",
		"chunk-2d21a003"
	],
	"./prism-sml.js": [
		"ba3a",
		"chunk-2d21a003"
	],
	"./prism-sml.min": [
		"273c",
		"chunk-2d0b308b"
	],
	"./prism-sml.min.js": [
		"273c",
		"chunk-2d0b308b"
	],
	"./prism-solidity": [
		"815d",
		"chunk-2d0dd47e"
	],
	"./prism-solidity.js": [
		"815d",
		"chunk-2d0dd47e"
	],
	"./prism-solidity.min": [
		"ac4f",
		"chunk-2d21334a"
	],
	"./prism-solidity.min.js": [
		"ac4f",
		"chunk-2d21334a"
	],
	"./prism-solution-file": [
		"fecd",
		"chunk-2d238656"
	],
	"./prism-solution-file.js": [
		"fecd",
		"chunk-2d238656"
	],
	"./prism-solution-file.min": [
		"3360",
		"chunk-2d0b9610"
	],
	"./prism-solution-file.min.js": [
		"3360",
		"chunk-2d0b9610"
	],
	"./prism-soy": [
		"e9cd",
		"chunk-2d226ccb"
	],
	"./prism-soy.js": [
		"e9cd",
		"chunk-2d226ccb"
	],
	"./prism-soy.min": [
		"8220",
		"chunk-2d0dd7ae"
	],
	"./prism-soy.min.js": [
		"8220",
		"chunk-2d0dd7ae"
	],
	"./prism-sparql": [
		"7063",
		"chunk-2d0d5c4c"
	],
	"./prism-sparql.js": [
		"7063",
		"chunk-2d0d5c4c"
	],
	"./prism-sparql.min": [
		"e9ed",
		"chunk-2d226d09"
	],
	"./prism-sparql.min.js": [
		"e9ed",
		"chunk-2d226d09"
	],
	"./prism-splunk-spl": [
		"ac6a5",
		"chunk-77053d12"
	],
	"./prism-splunk-spl.js": [
		"ac6a5",
		"chunk-77053d12"
	],
	"./prism-splunk-spl.min": [
		"1d18",
		"chunk-2d0b64b0"
	],
	"./prism-splunk-spl.min.js": [
		"1d18",
		"chunk-2d0b64b0"
	],
	"./prism-sqf": [
		"dbb2",
		"chunk-2d229204"
	],
	"./prism-sqf.js": [
		"dbb2",
		"chunk-2d229204"
	],
	"./prism-sqf.min": [
		"9d3f",
		"chunk-2d0f0814"
	],
	"./prism-sqf.min.js": [
		"9d3f",
		"chunk-2d0f0814"
	],
	"./prism-sql": [
		"af8a",
		"chunk-2d213f04"
	],
	"./prism-sql.js": [
		"af8a",
		"chunk-2d213f04"
	],
	"./prism-sql.min": [
		"a395",
		"chunk-2d207f84"
	],
	"./prism-sql.min.js": [
		"a395",
		"chunk-2d207f84"
	],
	"./prism-stan": [
		"86f1",
		"chunk-2d0decff"
	],
	"./prism-stan.js": [
		"86f1",
		"chunk-2d0decff"
	],
	"./prism-stan.min": [
		"eb2a",
		"chunk-2d2300c2"
	],
	"./prism-stan.min.js": [
		"eb2a",
		"chunk-2d2300c2"
	],
	"./prism-stylus": [
		"37298",
		"chunk-7468efb7"
	],
	"./prism-stylus.js": [
		"37298",
		"chunk-7468efb7"
	],
	"./prism-stylus.min": [
		"0408",
		"chunk-2d0a3c02"
	],
	"./prism-stylus.min.js": [
		"0408",
		"chunk-2d0a3c02"
	],
	"./prism-swift": [
		"e9cb",
		"chunk-2d226cc9"
	],
	"./prism-swift.js": [
		"e9cb",
		"chunk-2d226cc9"
	],
	"./prism-swift.min": [
		"0469",
		"chunk-2d0a3cbd"
	],
	"./prism-swift.min.js": [
		"0469",
		"chunk-2d0a3cbd"
	],
	"./prism-t4-cs": [
		"4c06",
		"chunk-2d0cbdeb"
	],
	"./prism-t4-cs.js": [
		"4c06",
		"chunk-2d0cbdeb"
	],
	"./prism-t4-cs.min": [
		"fdb5",
		"chunk-2d238247"
	],
	"./prism-t4-cs.min.js": [
		"fdb5",
		"chunk-2d238247"
	],
	"./prism-t4-templating": [
		"0937",
		"chunk-2d0a4f23"
	],
	"./prism-t4-templating.js": [
		"0937",
		"chunk-2d0a4f23"
	],
	"./prism-t4-templating.min": [
		"5fdd",
		"chunk-2d0d4407"
	],
	"./prism-t4-templating.min.js": [
		"5fdd",
		"chunk-2d0d4407"
	],
	"./prism-t4-vb": [
		"cab0",
		"chunk-2d2219e2"
	],
	"./prism-t4-vb.js": [
		"cab0",
		"chunk-2d2219e2"
	],
	"./prism-t4-vb.min": [
		"f4ac",
		"chunk-2d22ce26"
	],
	"./prism-t4-vb.min.js": [
		"f4ac",
		"chunk-2d22ce26"
	],
	"./prism-tap": [
		"b152",
		"chunk-2d20ebe2"
	],
	"./prism-tap.js": [
		"b152",
		"chunk-2d20ebe2"
	],
	"./prism-tap.min": [
		"170d",
		"chunk-2d0abbd0"
	],
	"./prism-tap.min.js": [
		"170d",
		"chunk-2d0abbd0"
	],
	"./prism-tcl": [
		"da78",
		"chunk-2d228914"
	],
	"./prism-tcl.js": [
		"da78",
		"chunk-2d228914"
	],
	"./prism-tcl.min": [
		"a5aa",
		"chunk-2d208c0a"
	],
	"./prism-tcl.min.js": [
		"a5aa",
		"chunk-2d208c0a"
	],
	"./prism-textile": [
		"8ce4",
		"chunk-2d0e95d0"
	],
	"./prism-textile.js": [
		"8ce4",
		"chunk-2d0e95d0"
	],
	"./prism-textile.min": [
		"a4b6",
		"chunk-2d20883d"
	],
	"./prism-textile.min.js": [
		"a4b6",
		"chunk-2d20883d"
	],
	"./prism-toml": [
		"fee1",
		"chunk-2d238661"
	],
	"./prism-toml.js": [
		"fee1",
		"chunk-2d238661"
	],
	"./prism-toml.min": [
		"1c48",
		"chunk-2d0b614c"
	],
	"./prism-toml.min.js": [
		"1c48",
		"chunk-2d0b614c"
	],
	"./prism-tsx": [
		"a588",
		"chunk-2d2086ea"
	],
	"./prism-tsx 2": [
		"834b",
		"chunk-2d0ddbdf"
	],
	"./prism-tsx 2.js": [
		"834b",
		"chunk-2d0ddbdf"
	],
	"./prism-tsx.js": [
		"a588",
		"chunk-2d2086ea"
	],
	"./prism-tsx.min": [
		"e4d2",
		"chunk-2d2259f3"
	],
	"./prism-tsx.min 2": [
		"84ff",
		"chunk-2d0de5b2"
	],
	"./prism-tsx.min 2.js": [
		"84ff",
		"chunk-2d0de5b2"
	],
	"./prism-tsx.min.js": [
		"e4d2",
		"chunk-2d2259f3"
	],
	"./prism-tt2": [
		"caac",
		"chunk-2d2219f6"
	],
	"./prism-tt2.js": [
		"caac",
		"chunk-2d2219f6"
	],
	"./prism-tt2.min": [
		"2d4f",
		"chunk-2d0bd99a"
	],
	"./prism-tt2.min.js": [
		"2d4f",
		"chunk-2d0bd99a"
	],
	"./prism-turtle": [
		"5c90",
		"chunk-2d0d335b"
	],
	"./prism-turtle.js": [
		"5c90",
		"chunk-2d0d335b"
	],
	"./prism-turtle.min": [
		"3a5f6",
		"chunk-747c1801"
	],
	"./prism-turtle.min.js": [
		"3a5f6",
		"chunk-747c1801"
	],
	"./prism-twig": [
		"f4a3",
		"chunk-2d22cdf6"
	],
	"./prism-twig.js": [
		"f4a3",
		"chunk-2d22cdf6"
	],
	"./prism-twig.min": [
		"1db9",
		"chunk-2d0b6aa0"
	],
	"./prism-twig.min.js": [
		"1db9",
		"chunk-2d0b6aa0"
	],
	"./prism-typescript": [
		"5c81",
		"chunk-2d0d333d"
	],
	"./prism-typescript.js": [
		"5c81",
		"chunk-2d0d333d"
	],
	"./prism-typescript.min": [
		"1f11",
		"chunk-2d0b6c2b"
	],
	"./prism-typescript.min.js": [
		"1f11",
		"chunk-2d0b6c2b"
	],
	"./prism-typoscript": [
		"c9a9",
		"chunk-2d2183a4"
	],
	"./prism-typoscript.js": [
		"c9a9",
		"chunk-2d2183a4"
	],
	"./prism-typoscript.min": [
		"2746",
		"chunk-2d0b307d"
	],
	"./prism-typoscript.min.js": [
		"2746",
		"chunk-2d0b307d"
	],
	"./prism-unrealscript": [
		"5ab5",
		"chunk-2d0d30d5"
	],
	"./prism-unrealscript.js": [
		"5ab5",
		"chunk-2d0d30d5"
	],
	"./prism-unrealscript.min": [
		"6ae7",
		"chunk-2d0da593"
	],
	"./prism-unrealscript.min.js": [
		"6ae7",
		"chunk-2d0da593"
	],
	"./prism-vala": [
		"54c6",
		"chunk-2d0c8808"
	],
	"./prism-vala.js": [
		"54c6",
		"chunk-2d0c8808"
	],
	"./prism-vala.min": [
		"b44e",
		"chunk-2d20f739"
	],
	"./prism-vala.min.js": [
		"b44e",
		"chunk-2d20f739"
	],
	"./prism-vbnet": [
		"d4cb",
		"chunk-2d21e5a5"
	],
	"./prism-vbnet.js": [
		"d4cb",
		"chunk-2d21e5a5"
	],
	"./prism-vbnet.min": [
		"e31e",
		"chunk-2d225038"
	],
	"./prism-vbnet.min.js": [
		"e31e",
		"chunk-2d225038"
	],
	"./prism-velocity": [
		"8d1e",
		"chunk-2d0e9376"
	],
	"./prism-velocity.js": [
		"8d1e",
		"chunk-2d0e9376"
	],
	"./prism-velocity.min": [
		"09a9",
		"chunk-2d0a54b7"
	],
	"./prism-velocity.min.js": [
		"09a9",
		"chunk-2d0a54b7"
	],
	"./prism-verilog": [
		"b43b",
		"chunk-2d20f717"
	],
	"./prism-verilog.js": [
		"b43b",
		"chunk-2d20f717"
	],
	"./prism-verilog.min": [
		"099f",
		"chunk-2d0a500c"
	],
	"./prism-verilog.min.js": [
		"099f",
		"chunk-2d0a500c"
	],
	"./prism-vhdl": [
		"3c57",
		"chunk-2d0c4a28"
	],
	"./prism-vhdl.js": [
		"3c57",
		"chunk-2d0c4a28"
	],
	"./prism-vhdl.min": [
		"6c56",
		"chunk-2d0da744"
	],
	"./prism-vhdl.min.js": [
		"6c56",
		"chunk-2d0da744"
	],
	"./prism-vim": [
		"7ced",
		"chunk-2d0e21a1"
	],
	"./prism-vim.js": [
		"7ced",
		"chunk-2d0e21a1"
	],
	"./prism-vim.min": [
		"4f9e",
		"chunk-2d0cca74"
	],
	"./prism-vim.min.js": [
		"4f9e",
		"chunk-2d0cca74"
	],
	"./prism-visual-basic": [
		"6e57",
		"chunk-2d0daec7"
	],
	"./prism-visual-basic.js": [
		"6e57",
		"chunk-2d0daec7"
	],
	"./prism-visual-basic.min": [
		"e14f",
		"chunk-2d224914"
	],
	"./prism-visual-basic.min.js": [
		"e14f",
		"chunk-2d224914"
	],
	"./prism-warpscript": [
		"a707",
		"chunk-2d208d73"
	],
	"./prism-warpscript.js": [
		"a707",
		"chunk-2d208d73"
	],
	"./prism-warpscript.min": [
		"dd66",
		"chunk-2d229436"
	],
	"./prism-warpscript.min.js": [
		"dd66",
		"chunk-2d229436"
	],
	"./prism-wasm": [
		"2134",
		"chunk-2d0b19d6"
	],
	"./prism-wasm.js": [
		"2134",
		"chunk-2d0b19d6"
	],
	"./prism-wasm.min": [
		"e6fc",
		"chunk-2d2261e4"
	],
	"./prism-wasm.min.js": [
		"e6fc",
		"chunk-2d2261e4"
	],
	"./prism-wiki": [
		"a022",
		"chunk-2d207365"
	],
	"./prism-wiki.js": [
		"a022",
		"chunk-2d207365"
	],
	"./prism-wiki.min": [
		"cb7d",
		"chunk-2d2218a2"
	],
	"./prism-wiki.min.js": [
		"cb7d",
		"chunk-2d2218a2"
	],
	"./prism-xeora": [
		"fb18",
		"chunk-2d2374d9"
	],
	"./prism-xeora.js": [
		"fb18",
		"chunk-2d2374d9"
	],
	"./prism-xeora.min": [
		"7d33",
		"chunk-2d0e1f23"
	],
	"./prism-xeora.min.js": [
		"7d33",
		"chunk-2d0e1f23"
	],
	"./prism-xml-doc": [
		"601a",
		"chunk-2d0ce780"
	],
	"./prism-xml-doc.js": [
		"601a",
		"chunk-2d0ce780"
	],
	"./prism-xml-doc.min": [
		"79ee",
		"chunk-2d0d83f8"
	],
	"./prism-xml-doc.min.js": [
		"79ee",
		"chunk-2d0d83f8"
	],
	"./prism-xojo": [
		"cff9",
		"chunk-2d222d2c"
	],
	"./prism-xojo.js": [
		"cff9",
		"chunk-2d222d2c"
	],
	"./prism-xojo.min": [
		"2b08",
		"chunk-2d0bd16e"
	],
	"./prism-xojo.min.js": [
		"2b08",
		"chunk-2d0bd16e"
	],
	"./prism-xquery": [
		"f8da",
		"chunk-2d22dd85"
	],
	"./prism-xquery.js": [
		"f8da",
		"chunk-2d22dd85"
	],
	"./prism-xquery.min": [
		"f906",
		"chunk-2d22dacf"
	],
	"./prism-xquery.min.js": [
		"f906",
		"chunk-2d22dacf"
	],
	"./prism-yaml": [
		"457d",
		"chunk-2d0c1244"
	],
	"./prism-yaml.js": [
		"457d",
		"chunk-2d0c1244"
	],
	"./prism-yaml.min": [
		"cd2b",
		"chunk-2d221f87"
	],
	"./prism-yaml.min.js": [
		"cd2b",
		"chunk-2d221f87"
	],
	"./prism-yang": [
		"f935",
		"chunk-2d22db2b"
	],
	"./prism-yang.js": [
		"f935",
		"chunk-2d22db2b"
	],
	"./prism-yang.min": [
		"e6cf",
		"chunk-2d22618a"
	],
	"./prism-yang.min.js": [
		"e6cf",
		"chunk-2d22618a"
	],
	"./prism-zig": [
		"fc06",
		"chunk-2d237879"
	],
	"./prism-zig.js": [
		"fc06",
		"chunk-2d237879"
	],
	"./prism-zig.min": [
		"9a3e",
		"chunk-2d0efcd0"
	],
	"./prism-zig.min.js": [
		"9a3e",
		"chunk-2d0efcd0"
	]
};
function webpackAsyncContext(req) {
	if(!__webpack_require__.o(map, req)) {
		return Promise.resolve().then(function() {
			var e = new Error("Cannot find module '" + req + "'");
			e.code = 'MODULE_NOT_FOUND';
			throw e;
		});
	}

	var ids = map[req], id = ids[0];
	return __webpack_require__.e(ids[1]).then(function() {
		return __webpack_require__.t(id, 7);
	});
}
webpackAsyncContext.keys = function webpackAsyncContextKeys() {
	return Object.keys(map);
};
webpackAsyncContext.id = "554c";
module.exports = webpackAsyncContext;

/***/ }),

/***/ "56d7":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.array.iterator.js
var es6_array_iterator = __webpack_require__("cadf");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.promise.js
var es6_promise = __webpack_require__("551c");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.object.assign.js
var es6_object_assign = __webpack_require__("f751");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es7.promise.finally.js
var es7_promise_finally = __webpack_require__("097d");

// EXTERNAL MODULE: ./node_modules/vue/dist/vue.runtime.esm.js
var vue_runtime_esm = __webpack_require__("2b0e");

// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"2d89a08b-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./src/App.vue?vue&type=template&id=c9252176&
var Appvue_type_template_id_c9252176_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{"id":"app"}},[_c('div',{ref:"editor",attrs:{"id":"edit"}})])}
var staticRenderFns = []


// CONCATENATED MODULE: ./src/App.vue?vue&type=template&id=c9252176&

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.regexp.replace.js
var es6_regexp_replace = __webpack_require__("a481");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es7.symbol.async-iterator.js
var es7_symbol_async_iterator = __webpack_require__("ac4d");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.symbol.js
var es6_symbol = __webpack_require__("8a81");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.regexp.to-string.js
var es6_regexp_to_string = __webpack_require__("6b54");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.function.name.js
var es6_function_name = __webpack_require__("7f7f");

// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom.iterable.js
var web_dom_iterable = __webpack_require__("ac6a");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.array.find.js
var es6_array_find = __webpack_require__("7514");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.regexp.search.js
var es6_regexp_search = __webpack_require__("386d");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.string.iterator.js
var es6_string_iterator = __webpack_require__("5df3");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.array.from.js
var es6_array_from = __webpack_require__("1c4c");

// EXTERNAL MODULE: ./node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck.js
var classCallCheck = __webpack_require__("d225");

// EXTERNAL MODULE: ./node_modules/@babel/runtime-corejs2/helpers/esm/createClass.js
var createClass = __webpack_require__("b0b4");

// EXTERNAL MODULE: ./node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty.js
var defineProperty = __webpack_require__("bd86");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.array.find-index.js
var es6_array_find_index = __webpack_require__("20d6");

// EXTERNAL MODULE: ./node_modules/@babel/runtime-corejs2/helpers/esm/slicedToArray.js + 3 modules
var slicedToArray = __webpack_require__("768b");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.set.js
var es6_set = __webpack_require__("4f7f");

// EXTERNAL MODULE: ./node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray.js + 3 modules
var toConsumableArray = __webpack_require__("75fc");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.regexp.split.js
var es6_regexp_split = __webpack_require__("28a5");

// EXTERNAL MODULE: ./node_modules/regenerator-runtime/runtime.js
var runtime = __webpack_require__("96cf");

// EXTERNAL MODULE: ./node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator.js
var asyncToGenerator = __webpack_require__("3b8d");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.object.keys.js
var es6_object_keys = __webpack_require__("456d");

// EXTERNAL MODULE: ./node_modules/@babel/runtime-corejs2/helpers/esm/typeof.js
var esm_typeof = __webpack_require__("7618");

// EXTERNAL MODULE: ./node_modules/dompurify/dist/purify.js
var purify = __webpack_require__("c0c4");
var purify_default = /*#__PURE__*/__webpack_require__.n(purify);

// CONCATENATED MODULE: ./src/muya/lib/utils/index.js









// DOTO: Don't use Node API in editor folder, remove `path` @jocs


var ID_PREFIX = 'ag-';
var utils_id = 0;
var getUniqueId = function getUniqueId() {
  return "".concat(ID_PREFIX).concat(utils_id++);
};
var getLongUniqueId = function getLongUniqueId() {
  return "".concat(getUniqueId(), "-").concat((+new Date()).toString(32));
};
var isMetaKey = function isMetaKey(_ref) {
  var key = _ref.key;
  return key === 'Shift' || key === 'Control' || key === 'Alt' || key === 'Meta';
};
var noop = function noop() {};
var identity = function identity(i) {
  return i;
};
var isOdd = function isOdd(number) {
  return Math.abs(number) % 2 === 1;
};
var isEven = function isEven(number) {
  return Math.abs(number) % 2 === 0;
};
var isLengthEven = function isLengthEven() {
  var str = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
  return str.length % 2 === 0;
};
var snakeToCamel = function snakeToCamel(name) {
  return name.replace(/_([a-z])/g, function (p0, p1) {
    return p1.toUpperCase();
  });
};
var camelToSnake = function camelToSnake(name) {
  return name.replace(/([A-Z])/g, function (_, p) {
    return "-".concat(p.toLowerCase());
  });
};
/**
 *  Are two arrays have intersection
 */

var conflict = function conflict(arr1, arr2) {
  return !(arr1[1] < arr2[0] || arr2[1] < arr1[0]);
};
var union = function union(_ref2, _ref3) {
  var tStart = _ref2.start,
      tEnd = _ref2.end;
  var lStart = _ref3.start,
      lEnd = _ref3.end,
      active = _ref3.active;

  if (!(tEnd <= lStart || lEnd <= tStart)) {
    if (lStart < tStart) {
      return {
        start: tStart,
        end: tEnd < lEnd ? tEnd : lEnd,
        active: active
      };
    } else {
      return {
        start: lStart,
        end: tEnd < lEnd ? tEnd : lEnd,
        active: active
      };
    }
  }

  return null;
}; // https://github.com/jashkenas/underscore

var throttle = function throttle(func) {
  var wait = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 50;
  var context;
  var args;
  var result;
  var timeout = null;
  var previous = 0;

  var later = function later() {
    previous = Date.now();
    timeout = null;
    result = func.apply(context, args);

    if (!timeout) {
      context = args = null;
    }
  };

  return function () {
    var now = Date.now();
    var remaining = wait - (now - previous);
    context = this;
    args = arguments;

    if (remaining <= 0 || remaining > wait) {
      if (timeout) {
        clearTimeout(timeout);
        timeout = null;
      }

      previous = now;
      result = func.apply(context, args);

      if (!timeout) {
        context = args = null;
      }
    } else if (!timeout) {
      timeout = setTimeout(later, remaining);
    }

    return result;
  };
}; // simple implementation...

var debounce = function debounce(func) {
  var wait = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 50;
  var timer = null;
  return function () {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    if (timer) clearTimeout(timer);
    timer = setTimeout(function () {
      func.apply(void 0, args);
    }, wait);
  };
};
var utils_deepCopyArray = function deepCopyArray(array) {
  var result = [];
  var len = array.length;
  var i;

  for (i = 0; i < len; i++) {
    if (Object(esm_typeof["a" /* default */])(array[i]) === 'object' && array[i] !== null) {
      if (Array.isArray(array[i])) {
        result.push(deepCopyArray(array[i]));
      } else {
        result.push(utils_deepCopy(array[i]));
      }
    } else {
      result.push(array[i]);
    }
  }

  return result;
}; // TODO: @jocs rewrite deepCopy

var utils_deepCopy = function deepCopy(object) {
  var obj = {};
  Object.keys(object).forEach(function (key) {
    if (Object(esm_typeof["a" /* default */])(object[key]) === 'object' && object[key] !== null) {
      if (Array.isArray(object[key])) {
        obj[key] = utils_deepCopyArray(object[key]);
      } else {
        obj[key] = deepCopy(object[key]);
      }
    } else {
      obj[key] = object[key];
    }
  });
  return obj;
};
var loadImage = /*#__PURE__*/function () {
  var _ref4 = Object(asyncToGenerator["a" /* default */])( /*#__PURE__*/regeneratorRuntime.mark(function _callee(url) {
    var detectContentType,
        isImage,
        _args = arguments;
    return regeneratorRuntime.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            detectContentType = _args.length > 1 && _args[1] !== undefined ? _args[1] : false;

            if (!detectContentType) {
              _context.next = 7;
              break;
            }

            _context.next = 4;
            return checkImageContentType(url);

          case 4:
            isImage = _context.sent;

            if (isImage) {
              _context.next = 7;
              break;
            }

            throw new Error('not an image');

          case 7:
            return _context.abrupt("return", new Promise(function (resolve, reject) {
              var image = new Image();

              image.onload = function () {
                resolve(url);
              };

              image.onerror = function (err) {
                reject(err);
              };

              image.src = url;
            }));

          case 8:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  }));

  return function loadImage(_x) {
    return _ref4.apply(this, arguments);
  };
}();
var checkImageContentType = function checkImageContentType(url) {
  var req = new XMLHttpRequest();
  var settle;
  var promise = new Promise(function (resolve, reject) {
    settle = resolve;
  });

  var handler = function handler() {
    if (req.readyState === XMLHttpRequest.DONE) {
      if (req.status === 200) {
        var contentType = req.getResponseHeader('Content-Type');

        if (/^image\/(?:jpeg|png|gif|svg\+xml|webp)$/.test(contentType)) {
          settle(true);
        } else {
          settle(false);
        }
      } else {
        settle(false);
      }
    }
  };

  var handleError = function handleError() {
    settle(false);
  };

  req.open('HEAD', url);
  req.onreadystatechange = handler;
  req.onerror = handleError;
  req.send();
  return promise;
};
/**
 * Return image information and correct the relative image path if needed.
 *
 * @param {string} src Image url
 * @param {string} baseUrl Base path; used on desktop to fix the relative image path.
 */

var utils_getImageInfo = function getImageInfo(src) {
  var baseUrl = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window.DIRNAME;
  var EXT_REG = /\.(jpeg|jpg|png|gif|svg|webp)(?=\?|$)/i; // data:[<MIME-type>][;charset=<encoding>][;base64],<data>

  var DATA_URL_REG = /^data:image\/[\w+-]+(;[\w-]+=[\w-]+|;base64)*,[a-zA-Z0-9+/]+={0,2}$/;
  var imageExtension = EXT_REG.test(src);
  var isUrl = URL_REG.test(src); // Treat an URL with valid extension as image

  if (imageExtension) {
    var isAbsoluteLocal = /^(?:\/|\\\\|[a-zA-Z]:\\).+/.test(src);

    if (isUrl || !isAbsoluteLocal && !baseUrl) {
      if (!isUrl && !baseUrl && isInElectron) {
        console.warn('"baseUrl" is not defined!');
      }

      return {
        isUnknownType: false,
        src: src
      };
    } else if (isInElectron) {
      // Correct relative path on desktop. If we resolve a absolute path "path.resolve" doesn't do anything.
      return {
        isUnknownType: false,
        src: 'file://' + __webpack_require__("df7c").resolve(baseUrl, src)
      };
    } // else: Forbid the request due absolute or relative path in browser

  } else if (isUrl && !imageExtension) {
    // Assume it's a valid image and make a http request later
    return {
      isUnknownType: true,
      src: src
    };
  } // Data url


  if (DATA_URL_REG.test(src)) {
    return {
      isUnknownType: false,
      src: src
    };
  } // Url type is unknown


  return {
    isUnknownType: false,
    src: ''
  };
};
var escapeHtml = function escapeHtml(html) {
  return html.replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/'/g, '&#39;');
};
var unescapeHtml = function unescapeHtml(text) {
  return text.replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '"').replace(/&#39;/g, "'");
};
var escapeInBlockHtml = function escapeInBlockHtml(html) {
  return html.replace(/(<(style|script|title)[^<>]*>)([\s\S]*?)(<\/\2>)/g, function (m, p1, p2, p3, p4) {
    return "".concat(escapeHtml(p1)).concat(p3).concat(escapeHtml(p4));
  });
};
var wordCount = function wordCount(markdown) {
  var paragraph = markdown.split(/\n{2,}/).filter(function (line) {
    return line;
  }).length;
  var word = 0;
  var character = 0;
  var all = 0;
  var removedChinese = markdown.replace(/[\u4e00-\u9fa5]/g, '');
  var tokens = removedChinese.split(/[\s\n]+/).filter(function (t) {
    return t;
  });
  var chineseWordLength = markdown.length - removedChinese.length;
  word += chineseWordLength + tokens.length;
  character += tokens.reduce(function (acc, t) {
    return acc + t.length;
  }, 0) + chineseWordLength;
  all += markdown.length;
  return {
    word: word,
    paragraph: paragraph,
    character: character,
    all: all
  };
};
/**
 * [genUpper2LowerKeyHash generate constants map hash, the value is lowercase of the key,
 * also translate `_` to `-`]
 */

var utils_genUpper2LowerKeyHash = function genUpper2LowerKeyHash(keys) {
  return keys.reduce(function (acc, key) {
    var value = key.toLowerCase().replace(/_/g, '-');
    return Object.assign(acc, Object(defineProperty["a" /* default */])({}, key, value));
  }, {});
};
/**
 * generate constants map, the value is the key.
 */

var utils_generateKeyHash = function generateKeyHash(keys) {
  return keys.reduce(function (acc, key) {
    return Object.assign(acc, Object(defineProperty["a" /* default */])({}, key, key));
  }, {});
}; // mixins

var mixins = function mixins(constructor) {
  for (var _len2 = arguments.length, object = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
    object[_key2 - 1] = arguments[_key2];
  }

  return Object.assign.apply(Object, [constructor.prototype].concat(object));
};
var utils_sanitize = function sanitize(html, options) {
  var DOMPurify = purify_default()(window);
  return DOMPurify.sanitize(escapeInBlockHtml(html), options);
};
var getParagraphReference = function getParagraphReference(ele, id) {
  var _ele$getBoundingClien = ele.getBoundingClientRect(),
      x = _ele$getBoundingClien.x,
      y = _ele$getBoundingClien.y,
      left = _ele$getBoundingClien.left,
      top = _ele$getBoundingClien.top,
      bottom = _ele$getBoundingClien.bottom,
      height = _ele$getBoundingClien.height;

  return {
    getBoundingClientRect: function getBoundingClientRect() {
      return {
        x: x,
        y: y,
        left: left,
        top: top,
        bottom: bottom,
        height: height,
        width: 0,
        right: left
      };
    },
    clientWidth: 0,
    clientHeight: height,
    id: id
  };
};
var verticalPositionInRect = function verticalPositionInRect(event, rect) {
  var clientY = event.clientY;
  var top = rect.top,
      height = rect.height;
  return clientY - top > height / 2 ? 'down' : 'up';
};
// EXTERNAL MODULE: ./node_modules/html-tags/index.js
var html_tags = __webpack_require__("b560");
var html_tags_default = /*#__PURE__*/__webpack_require__.n(html_tags);

// EXTERNAL MODULE: ./node_modules/html-tags/void.js
var html_tags_void = __webpack_require__("e49d");
var void_default = /*#__PURE__*/__webpack_require__.n(html_tags_void);

// CONCATENATED MODULE: ./src/muya/lib/config/index.js







 // [0.25, 0.5, 1, 2, 4, 8] <—?—> [256M, 500M/768M, 1G/1000M, 2G, 4G, 8G]
// Electron 2.0.2 not support yet! So give a default value 4

var DEVICE_MEMORY = navigator.deviceMemory || 4; // Get the divice memory number(Chrome >= 63)

var UNDO_DEPTH = DEVICE_MEMORY >= 4 ? 100 : 50;
var HAS_TEXT_BLOCK_REG = /^(span|th|td)/i;
var VOID_HTML_TAGS = void_default.a;
var HTML_TAGS = html_tags_default.a; // TYPE1 ~ TYPE7 according to https://github.github.com/gfm/#html-blocks

var BLOCK_TYPE1 = ['script', 'pre', 'style'];
var BLOCK_TYPE2_REG = /^<!--(?=\s).*\s+-->$/;
var BLOCK_TYPE6 = ['address', 'article', 'aside', 'base', 'basefont', 'blockquote', 'body', 'caption', 'center', 'col', 'colgroup', 'dd', 'details', 'dialog', 'dir', 'div', 'dl', 'dt', 'fieldset', 'figcaption', 'figure', 'footer', 'form', 'frame', 'frameset', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hr', 'html', 'iframe', 'legend', 'li', 'link', 'main', 'menu', 'menuitem', 'meta', 'nav', 'noframes', 'ol', 'optgroup', 'option', 'p', 'param', 'section', 'source', 'summary', 'table', 'tbody', 'td', 'tfoot', 'th', 'thead', 'title', 'tr', 'track', 'ul'];
var BLOCK_TYPE7 = html_tags_default.a.filter(function (tag) {
  return !BLOCK_TYPE1.find(function (t) {
    return t === tag;
  }) && !BLOCK_TYPE6.find(function (t) {
    return t === tag;
  });
});
var IMAGE_EXT_REG = /\.(jpeg|jpg|png|gif|svg|webp)(?=\?|$)/i;
var PARAGRAPH_TYPES = ['p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'blockquote', 'pre', 'ul', 'ol', 'li', 'figure'];
var blockContainerElementNames = [].concat(PARAGRAPH_TYPES, [// all other known block elements
'address', 'article', 'aside', 'audio', 'canvas', 'dd', 'dl', 'dt', 'fieldset', 'figcaption', 'footer', 'form', 'header', 'hgroup', 'main', 'nav', 'noscript', 'output', 'section', 'video', 'table', 'thead', 'tbody', 'tfoot', 'tr', 'th', 'td']);
var emptyElementNames = ['br', 'col', 'colgroup', 'hr', 'img', 'input', 'source', 'wbr'];
var EVENT_KEYS = utils_generateKeyHash(['Enter', 'Backspace', 'Space', 'Delete', 'ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'Tab', 'Escape']);
var LOWERCASE_TAGS = utils_generateKeyHash([].concat(Object(toConsumableArray["a" /* default */])(blockContainerElementNames), emptyElementNames, ['div']));
var CLASS_OR_ID = utils_genUpper2LowerKeyHash(['AG_ACTIVE', 'AG_BACKLASH', 'AG_BUG', 'AG_BULLET_LIST', 'AG_BULLET_LIST_ITEM', 'AG_CHECKBOX_CHECKED', 'AG_CODE_LINE', 'AG_CODE_LINE_ADD', 'AG_CODE_LINE_MINUS', 'AG_CONTAINER_BLOCK', 'AG_CONTAINER_PREVIEW', 'AG_CONTAINER_ICON', 'AG_COPY_REMOVE', 'AG_EDITOR_ID', 'AG_EMOJI_MARKED_TEXT', 'AG_EMOJI_MARKER', 'AG_EMPTY', 'AG_FENCE_CODE', 'AG_FLOWCHART', 'AG_FOCUS_MODE', 'AG_FRONT_MATTER', 'AG_FRONT_ICON', 'AG_GRAY', 'AG_HARD_LINE_BREAK', 'AG_HARD_LINE_BREAK_SPACE', 'AG_LINE_END', 'AG_HEADER_TIGHT_SPACE', 'AG_HIDE', 'AG_HIGHLIGHT', 'AG_HTML_BLOCK', 'AG_HTML_ESCAPE', 'AG_HTML_PREVIEW', 'AG_HTML_TAG', 'AG_IMAGE_FAIL', 'AG_IMAGE_LOADING', 'AG_EMPTY_IMAGE', 'AG_IMAGE_MARKED_TEXT', 'AG_IMAGE_SRC', 'AG_IMAGE_CONTAINER', 'AG_INLINE_IMAGE', 'AG_IMAGE_SUCCESS', 'AG_IMAGE_UPLOADING', 'AG_INLINE_IMAGE_SELECTED', 'AG_INLINE_IMAGE_IS_EDIT', 'AG_INDENT_CODE', 'AG_INLINE_RULE', 'AG_LANGUAGE', 'AG_LANGUAGE_INPUT', 'AG_LINK', 'AG_LINK_IN_BRACKET', 'AG_LIST_ITEM', 'AG_LOOSE_LIST_ITEM', 'AG_MATH', 'AG_MATH_TEXT', 'AG_MATH_RENDER', 'AG_RUBY', 'AG_RUBY_TEXT', 'AG_RUBY_RENDER', 'AG_SELECTED', 'AG_SOFT_LINE_BREAK', 'AG_MATH_ERROR', 'AG_MATH_MARKER', 'AG_MATH_RENDER', 'AG_MATH_TEXT', 'AG_MERMAID', 'AG_MULTIPLE_MATH', 'AG_NOTEXT_LINK', 'AG_ORDER_LIST', 'AG_ORDER_LIST_ITEM', 'AG_OUTPUT_REMOVE', 'AG_PARAGRAPH', 'AG_REFERENCE_LABEL', 'AG_REFERENCE_LINK', 'AG_REFERENCE_MARKER', 'AG_REFERENCE_TITLE', 'AG_REMOVE', 'AG_RUBY', 'AG_RUBY_RENDER', 'AG_RUBY_TEXT', 'AG_SELECTION', 'AG_SEQUENCE', 'AG_SHOW_PREVIEW', 'AG_SOFT_LINE_BREAK', 'AG_TASK_LIST', 'AG_TASK_LIST_ITEM', 'AG_TASK_LIST_ITEM_CHECKBOX', 'AG_TIGHT_LIST_ITEM', 'AG_TOOL_BAR', 'AG_VEGA_LITE', 'AG_WARN']);
var DAED_REMOVE_SELECTOR = new Set(['.ag-image-marked-text::before', '.ag-image-marked-text.ag-image-fail::before', '.ag-hide', '.ag-gray', '.ag-warn']);
var CURSOR_ANCHOR_DNA = getLongUniqueId();
var CURSOR_FOCUS_DNA = getLongUniqueId();
var DEFAULT_TURNDOWN_CONFIG = {
  headingStyle: 'atx',
  // setext or atx
  hr: '---',
  bulletListMarker: '-',
  // -, +, or *
  codeBlockStyle: 'fenced',
  // fenced or indented
  fence: '```',
  // ``` or ~~~
  emDelimiter: '*',
  // _ or *
  strongDelimiter: '**',
  // ** or __
  linkStyle: 'inlined',
  linkReferenceStyle: 'full',
  blankReplacement: function blankReplacement(content, node, options) {
    if (node && node.classList.contains('ag-soft-line-break')) {
      return LINE_BREAK;
    } else if (node && node.classList.contains('ag-hard-line-break')) {
      return '  ' + LINE_BREAK;
    } else if (node && node.classList.contains('ag-hard-line-break-sapce')) {
      return '';
    } else {
      return node.isBlock ? '\n\n' : '';
    }
  }
};
var FORMAT_MARKER_MAP = {
  'em': '*',
  'inline_code': '`',
  'strong': '**',
  'del': '~~',
  'inline_math': '$',
  'u': {
    open: '<u>',
    close: '</u>'
  },
  'sub': {
    open: '<sub>',
    close: '</sub>'
  },
  'sup': {
    open: '<sup>',
    close: '</sup>'
  }
};
var FORMAT_TYPES = ['strong', 'em', 'del', 'inline_code', 'link', 'image', 'inline_math'];
var LINE_BREAK = '\n';
var PREVIEW_DOMPURIFY_CONFIG = {
  // do not forbit `class` because `code` element use class to present language
  FORBID_ATTR: ['style', 'contenteditable'],
  ALLOW_DATA_ATTR: false,
  USE_PROFILES: {
    html: true,
    svg: true,
    svgFilters: true,
    mathMl: true
  }
};
var EXPORT_DOMPURIFY_CONFIG = {
  FORBID_ATTR: ['contenteditable'],
  ALLOW_DATA_ATTR: false,
  USE_PROFILES: {
    html: true,
    svg: true,
    svgFilters: true,
    mathMl: true
  }
};
var MUYA_DEFAULT_OPTION = {
  focusMode: false,
  markdown: '',
  preferLooseListItem: true,
  autoPairBracket: true,
  autoPairMarkdownSyntax: true,
  autoPairQuote: true,
  bulletListMarker: '-',
  orderListDelimiter: '.',
  tabSize: 4,
  // bullet/list marker width + listIndentation, tab or Daring Fireball Markdown (4 spaces) --> list indentation
  listIndentation: 1,
  sequenceTheme: 'hand',
  // hand or simple
  mermaidTheme: 'default',
  // dark / forest / default
  vegaTheme: 'latimes',
  // excel / ggplot2 / quartz / vox / fivethirtyeight / dark / latimes
  hideQuickInsertHint: false,
  // transform the image to local folder, cloud or just return the local path
  imageAction: null,
  // Call Electron open dialog or input element type is file.
  imagePathPicker: null,
  clipboardFilePath: function clipboardFilePath() {},
  // image path auto completed when you input in image selector.
  imagePathAutoComplete: function imagePathAutoComplete() {
    return [];
  }
}; // export const DIAGRAM_TEMPLATE = {
//   'mermaid': `graph LR;\nYou-->|Mark Text|Me;`
// }

var isInElectron = window && window.process && window.process.type === 'renderer';
var isOsx = window && window.navigator && /Mac/.test(window.navigator.platform);
var isWin = window && window.navigator.userAgent && /win32|wow32|win64|wow64/i.test(window.navigator.userAgent); // http[s] (domain or IPv4 or localhost or IPv6) [port] /not-white-space

var URL_REG = /^http(s)?:\/\/([a-z0-9\-._~]+\.[a-z]{2,}|[0-9.]+|localhost|\[[a-f0-9.:]+\])(:[0-9]{1,5})?\/[\S]+/i; // The smallest transparent gif base64 image.

var SMALLEST_BASE64 = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';
var isIOS = /(?:iPhone|iPad|iPod|iOS)/i.test(window.navigator.userAgent);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.string.anchor.js
var es6_string_anchor = __webpack_require__("8449");

// CONCATENATED MODULE: ./src/muya/lib/selection/dom.js








function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }


var CHOP_TEXT_REG = /(\*{1,3})([^*]+)(\1)/g;
var getTextContent = function getTextContent(node, blackList) {
  if (node.nodeType === 3) {
    return node.textContent;
  } else if (!blackList) {
    return node.textContent;
  }

  var text = '';

  if (blackList.some(function (className) {
    return node.classList && node.classList.contains(className);
  })) {
    return text;
  }

  if (node.nodeType === 3) {
    text += node.textContent;
  } else if (node.nodeType === 1 && node.classList.contains('ag-inline-image')) {
    // handle inline image
    var raw = node.getAttribute('data-raw');
    var imageContainer = node.querySelector('.ag-image-container');
    var hasImg = imageContainer.querySelector('img');
    var childNodes = imageContainer.childNodes;

    if (childNodes.length && hasImg) {
      var _iterator = _createForOfIteratorHelper(childNodes),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var child = _step.value;

          if (child.nodeType === 1 && child.nodeName === 'IMG') {
            text += raw;
          } else if (child.nodeType === 3) {
            text += child.textContent;
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    } else {
      text += raw;
    }
  } else {
    var _childNodes = node.childNodes;

    var _iterator2 = _createForOfIteratorHelper(_childNodes),
        _step2;

    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        var n = _step2.value;
        text += getTextContent(n, blackList);
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }
  }

  return text;
};
var dom_getOffsetOfParagraph = function getOffsetOfParagraph(node, paragraph) {
  var offset = 0;
  var preSibling = node;
  if (node === paragraph) return offset;

  do {
    preSibling = preSibling.previousSibling;

    if (preSibling) {
      offset += getTextContent(preSibling, [CLASS_OR_ID['AG_MATH_RENDER'], CLASS_OR_ID['AG_RUBY_RENDER']]).length;
    }
  } while (preSibling);

  return node === paragraph || node.parentNode === paragraph ? offset : offset + getOffsetOfParagraph(node.parentNode, paragraph);
};
var findNearestParagraph = function findNearestParagraph(node) {
  if (!node) {
    return null;
  }

  do {
    if (dom_isAganippeParagraph(node)) return node;
    node = node.parentNode;
  } while (node);

  return null;
};
var findOutMostParagraph = function findOutMostParagraph(node) {
  do {
    var parentNode = node.parentNode;
    if (dom_isMuyaEditorElement(parentNode) && dom_isAganippeParagraph(node)) return node;
    node = parentNode;
  } while (node);
};
var dom_isAganippeParagraph = function isAganippeParagraph(element) {
  return element && element.classList && element.classList.contains(CLASS_OR_ID['AG_PARAGRAPH']);
};
var dom_isBlockContainer = function isBlockContainer(element) {
  return element && element.nodeType !== 3 && blockContainerElementNames.indexOf(element.nodeName.toLowerCase()) !== -1;
};
var dom_isMuyaEditorElement = function isMuyaEditorElement(element) {
  return element && element.id === CLASS_OR_ID['AG_EDITOR_ID'];
};
var traverseUp = function traverseUp(current, testElementFunction) {
  if (!current) {
    return false;
  }

  do {
    if (current.nodeType === 1) {
      if (testElementFunction(current)) {
        return current;
      } // do not traverse upwards past the nearest containing editor


      if (dom_isMuyaEditorElement(current)) {
        return false;
      }
    }

    current = current.parentNode;
  } while (current);

  return false;
};
var dom_getFirstSelectableLeafNode = function getFirstSelectableLeafNode(element) {
  while (element && element.firstChild) {
    element = element.firstChild;
  } // We don't want to set the selection to an element that can't have children, this messes up Gecko.


  element = traverseUp(element, function (el) {
    return emptyElementNames.indexOf(el.nodeName.toLowerCase()) === -1;
  }); // Selecting at the beginning of a table doesn't work in PhantomJS.

  if (element.nodeName.toLowerCase() === LOWERCASE_TAGS.table) {
    var firstCell = element.querySelector('th, td');

    if (firstCell) {
      element = firstCell;
    }
  }

  return element;
};
var getClosestBlockContainer = function getClosestBlockContainer(node) {
  return traverseUp(node, function (node) {
    return dom_isBlockContainer(node) || dom_isMuyaEditorElement(node);
  });
};
var getCursorPositionWithinMarkedText = function getCursorPositionWithinMarkedText(markedText, cursorOffset) {
  var chunks = [];
  var match;
  var result = {
    type: 'OUT'
  };

  do {
    match = CHOP_TEXT_REG.exec(markedText);

    if (match) {
      chunks.push({
        index: match.index + match[1].length,
        leftSymbol: match[1],
        rightSymbol: match[3],
        lastIndex: CHOP_TEXT_REG.lastIndex - match[3].length
      });
    }
  } while (match);

  chunks.forEach(function (chunk) {
    var index = chunk.index,
        leftSymbol = chunk.leftSymbol,
        rightSymbol = chunk.rightSymbol,
        lastIndex = chunk.lastIndex;

    if (cursorOffset > index && cursorOffset < lastIndex) {
      result = {
        type: 'IN',
        info: leftSymbol
      }; // rightSymbol is also ok
    } else if (cursorOffset === index) {
      result = {
        type: 'LEFT',
        info: leftSymbol.length
      };
    } else if (cursorOffset === lastIndex) {
      result = {
        type: 'RIGHT',
        info: rightSymbol.length
      };
    }
  });
  return result;
};
var compareParagraphsOrder = function compareParagraphsOrder(paragraph1, paragraph2) {
  return paragraph1.compareDocumentPosition(paragraph2) & Node.DOCUMENT_POSITION_FOLLOWING;
};
// CONCATENATED MODULE: ./src/muya/lib/selection/cursor.js




var cursor_Cursor = // You need to provide either `anchor`&&`focus` or `start`&&`end` or all.
function Cursor(_ref) {
  var anchor = _ref.anchor,
      focus = _ref.focus,
      start = _ref.start,
      end = _ref.end,
      _ref$noHistory = _ref.noHistory,
      noHistory = _ref$noHistory === void 0 ? false : _ref$noHistory;

  Object(classCallCheck["a" /* default */])(this, Cursor);

  if (anchor && focus && start && end) {
    this.anchor = anchor;
    this.focus = focus;
    this.start = start;
    this.end = end;
  } else if (anchor && focus) {
    this.anchor = anchor;
    this.focus = focus;

    if (anchor.key === focus.key) {
      if (anchor.offset <= focus.offset) {
        this.start = this.anchor;
        this.end = this.focus;
      } else {
        this.start = this.focus;
        this.end = this.anchor;
      }
    } else {
      var anchorParagraph = document.querySelector("#".concat(anchor.key));
      var focusParagraph = document.querySelector("#".concat(focus.key));
      var order = true;

      if (anchorParagraph && focusParagraph) {
        order = compareParagraphsOrder(anchorParagraph, focusParagraph);
      }

      if (order) {
        this.start = this.anchor;
        this.end = this.focus;
      } else {
        this.start = this.focus;
        this.end = this.anchor;
      }
    }
  } else {
    this.anchor = this.start = start;
    this.focus = this.end = end;
  }

  this.noHistory = noHistory;
};

/* harmony default export */ var selection_cursor = (cursor_Cursor);
// CONCATENATED MODULE: ./src/muya/lib/selection/index.js





/**
 * This file is copy from [medium-editor](https://github.com/yabwe/medium-editor)
 * and customize for specialized use.
 */




var selection_filterOnlyParentElements = function filterOnlyParentElements(node) {
  return dom_isBlockContainer(node) ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;
};

var selection_Selection = /*#__PURE__*/function () {
  function Selection(doc) {
    Object(classCallCheck["a" /* default */])(this, Selection);

    this.doc = doc; // document
  }

  Object(createClass["a" /* default */])(Selection, [{
    key: "findMatchingSelectionParent",
    value: function findMatchingSelectionParent(testElementFunction, contentWindow) {
      var selection = contentWindow.getSelection();
      var range;
      var current;

      if (selection.rangeCount === 0) {
        return false;
      }

      range = selection.getRangeAt(0);
      current = range.commonAncestorContainer;
      return traverseUp(current, testElementFunction);
    } // https://stackoverflow.com/questions/17678843/cant-restore-selection-after-html-modify-even-if-its-the-same-html
    // Tim Down
    //
    // {object} selectionState - the selection to import
    // {DOMElement} root - the root element the selection is being restored inside of
    // {boolean} [favorLaterSelectionAnchor] - defaults to false. If true, import the cursor immediately
    //      subsequent to an anchor tag if it would otherwise be placed right at the trailing edge inside the
    //      anchor. This cursor positioning, even though visually equivalent to the user, can affect behavior
    //      in MS IE.

  }, {
    key: "importSelection",
    value: function importSelection(selectionState, root, favorLaterSelectionAnchor) {
      if (!selectionState || !root) {
        throw new Error('your must provide a [selectionState] and a [root] element');
      }

      var range = this.doc.createRange();
      range.setStart(root, 0);
      range.collapse(true);
      var node = root;
      var nodeStack = [];
      var charIndex = 0;
      var foundStart = false;
      var foundEnd = false;
      var trailingImageCount = 0;
      var stop = false;
      var nextCharIndex;
      var allowRangeToStartAtEndOfNode = false;
      var lastTextNode = null; // When importing selection, the start of the selection may lie at the end of an element
      // or at the beginning of an element.  Since visually there is no difference between these 2
      // we will try to move the selection to the beginning of an element since this is generally
      // what users will expect and it's a more predictable behavior.
      //
      // However, there are some specific cases when we don't want to do this:
      //  1) We're attempting to move the cursor outside of the end of an anchor [favorLaterSelectionAnchor = true]
      //  2) The selection starts with an image, which is special since an image doesn't have any 'content'
      //     as far as selection and ranges are concerned
      //  3) The selection starts after a specified number of empty block elements (selectionState.emptyBlocksIndex)
      //
      // For these cases, we want the selection to start at a very specific location, so we should NOT
      // automatically move the cursor to the beginning of the first actual chunk of text

      if (favorLaterSelectionAnchor || selectionState.startsWithImage || typeof selectionState.emptyBlocksIndex !== 'undefined') {
        allowRangeToStartAtEndOfNode = true;
      }

      while (!stop && node) {
        // Only iterate over elements and text nodes
        if (node.nodeType > 3) {
          node = nodeStack.pop();
          continue;
        } // If we hit a text node, we need to add the amount of characters to the overall count


        if (node.nodeType === 3 && !foundEnd) {
          nextCharIndex = charIndex + node.length; // Check if we're at or beyond the start of the selection we're importing

          if (!foundStart && selectionState.start >= charIndex && selectionState.start <= nextCharIndex) {
            // NOTE: We only want to allow a selection to start at the END of an element if
            //  allowRangeToStartAtEndOfNode is true
            if (allowRangeToStartAtEndOfNode || selectionState.start < nextCharIndex) {
              range.setStart(node, selectionState.start - charIndex);
              foundStart = true;
            } else {
              // We're at the end of a text node where the selection could start but we shouldn't
              // make the selection start here because allowRangeToStartAtEndOfNode is false.
              // However, we should keep a reference to this node in case there aren't any more
              // text nodes after this, so that we have somewhere to import the selection to
              lastTextNode = node;
            }
          } // We've found the start of the selection, check if we're at or beyond the end of the selection we're importing


          if (foundStart && selectionState.end >= charIndex && selectionState.end <= nextCharIndex) {
            if (!selectionState.trailingImageCount) {
              range.setEnd(node, selectionState.end - charIndex);
              stop = true;
            } else {
              foundEnd = true;
            }
          }

          charIndex = nextCharIndex;
        } else {
          if (selectionState.trailingImageCount && foundEnd) {
            if (node.nodeName.toLowerCase() === 'img') {
              trailingImageCount++;
            }

            if (trailingImageCount === selectionState.trailingImageCount) {
              // Find which index the image is in its parent's children
              var endIndex = 0;

              while (node.parentNode.childNodes[endIndex] !== node) {
                endIndex++;
              }

              range.setEnd(node.parentNode, endIndex + 1);
              stop = true;
            }
          }

          if (!stop && node.nodeType === 1) {
            // this is an element
            // add all its children to the stack
            var i = node.childNodes.length - 1;

            while (i >= 0) {
              nodeStack.push(node.childNodes[i]);
              i -= 1;
            }
          }
        }

        if (!stop) {
          node = nodeStack.pop();
        }
      } // If we've gone through the entire text but didn't find the beginning of a text node
      // to make the selection start at, we should fall back to starting the selection
      // at the END of the last text node we found


      if (!foundStart && lastTextNode) {
        range.setStart(lastTextNode, lastTextNode.length);
        range.setEnd(lastTextNode, lastTextNode.length);
      }

      if (typeof selectionState.emptyBlocksIndex !== 'undefined') {
        range = this.importSelectionMoveCursorPastBlocks(root, selectionState.emptyBlocksIndex, range);
      } // If the selection is right at the ending edge of a link, put it outside the anchor tag instead of inside.


      if (favorLaterSelectionAnchor) {
        range = this.importSelectionMoveCursorPastAnchor(selectionState, range);
      }

      this.selectRange(range);
    } // Utility method called from importSelection only

  }, {
    key: "importSelectionMoveCursorPastAnchor",
    value: function importSelectionMoveCursorPastAnchor(selectionState, range) {
      var nodeInsideAnchorTagFunction = function nodeInsideAnchorTagFunction(node) {
        return node.nodeName.toLowerCase() === 'a';
      };

      if (selectionState.start === selectionState.end && range.startContainer.nodeType === 3 && range.startOffset === range.startContainer.nodeValue.length && traverseUp(range.startContainer, nodeInsideAnchorTagFunction)) {
        var prevNode = range.startContainer;
        var currentNode = range.startContainer.parentNode;

        while (currentNode !== null && currentNode.nodeName.toLowerCase() !== 'a') {
          if (currentNode.childNodes[currentNode.childNodes.length - 1] !== prevNode) {
            currentNode = null;
          } else {
            prevNode = currentNode;
            currentNode = currentNode.parentNode;
          }
        }

        if (currentNode !== null && currentNode.nodeName.toLowerCase() === 'a') {
          var currentNodeIndex = null;

          for (var i = 0; currentNodeIndex === null && i < currentNode.parentNode.childNodes.length; i++) {
            if (currentNode.parentNode.childNodes[i] === currentNode) {
              currentNodeIndex = i;
            }
          }

          range.setStart(currentNode.parentNode, currentNodeIndex + 1);
          range.collapse(true);
        }
      }

      return range;
    } // Uses the emptyBlocksIndex calculated by getIndexRelativeToAdjacentEmptyBlocks
    // to move the cursor back to the start of the correct paragraph

  }, {
    key: "importSelectionMoveCursorPastBlocks",
    value: function importSelectionMoveCursorPastBlocks(root) {
      var index = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
      var range = arguments.length > 2 ? arguments[2] : undefined;
      var treeWalker = this.doc.createTreeWalker(root, NodeFilter.SHOW_ELEMENT, selection_filterOnlyParentElements, false);
      var startContainer = range.startContainer;
      var startBlock;
      var targetNode;
      var currIndex = 0; // If index is 0, we still want to move to the next block
      // Chrome counts newlines and spaces that separate block elements as actual elements.
      // If the selection is inside one of these text nodes, and it has a previous sibling
      // which is a block element, we want the treewalker to start at the previous sibling
      // and NOT at the parent of the textnode

      if (startContainer.nodeType === 3 && dom_isBlockContainer(startContainer.previousSibling)) {
        startBlock = startContainer.previousSibling;
      } else {
        startBlock = getClosestBlockContainer(startContainer);
      } // Skip over empty blocks until we hit the block we want the selection to be in


      while (treeWalker.nextNode()) {
        if (!targetNode) {
          // Loop through all blocks until we hit the starting block element
          if (startBlock === treeWalker.currentNode) {
            targetNode = treeWalker.currentNode;
          }
        } else {
          targetNode = treeWalker.currentNode;
          currIndex++; // We hit the target index, bail

          if (currIndex === index) {
            break;
          } // If we find a non-empty block, ignore the emptyBlocksIndex and just put selection here


          if (targetNode.textContent.length > 0) {
            break;
          }
        }
      }

      if (!targetNode) {
        targetNode = startBlock;
      } // We're selecting a high-level block node, so make sure the cursor gets moved into the deepest
      // element at the beginning of the block


      range.setStart(dom_getFirstSelectableLeafNode(targetNode), 0);
      return range;
    } // https://stackoverflow.com/questions/4176923/html-of-selected-text
    // by Tim Down

  }, {
    key: "getSelectionHtml",
    value: function getSelectionHtml() {
      var sel = this.doc.getSelection();
      var i;
      var html = '';
      var len;
      var container;

      if (sel.rangeCount) {
        container = this.doc.createElement('div');

        for (i = 0, len = sel.rangeCount; i < len; i += 1) {
          container.appendChild(sel.getRangeAt(i).cloneContents());
        }

        html = container.innerHTML;
      }

      return html;
    }
  }, {
    key: "chopHtmlByCursor",
    value: function chopHtmlByCursor(root) {
      var _this$getCaretOffsets = this.getCaretOffsets(root),
          left = _this$getCaretOffsets.left;

      var markedText = root.textContent;

      var _getCursorPositionWit = getCursorPositionWithinMarkedText(markedText, left),
          type = _getCursorPositionWit.type,
          info = _getCursorPositionWit.info;

      var pre = markedText.slice(0, left);
      var post = markedText.slice(left);

      switch (type) {
        case 'OUT':
          return {
            pre: pre,
            post: post
          };

        case 'IN':
          return {
            pre: "".concat(pre).concat(info),
            post: "".concat(info).concat(post)
          };

        case 'LEFT':
          return {
            pre: markedText.slice(0, left - info),
            post: markedText.slice(left - info)
          };

        case 'RIGHT':
          return {
            pre: markedText.slice(0, left + info),
            post: markedText.slice(left + info)
          };
      }
    }
    /**
     *  Find the caret position within an element irrespective of any inline tags it may contain.
     *
     *  @param {DOMElement} An element containing the cursor to find offsets relative to.
     *  @param {Range} A Range representing cursor position. Will window.getSelection if none is passed.
     *  @return {Object} 'left' and 'right' attributes contain offsets from beginning and end of Element
     */

  }, {
    key: "getCaretOffsets",
    value: function getCaretOffsets(element, range) {
      var preCaretRange;
      var postCaretRange;

      if (!range) {
        range = window.getSelection().getRangeAt(0);
      }

      preCaretRange = range.cloneRange();
      postCaretRange = range.cloneRange();
      preCaretRange.selectNodeContents(element);
      preCaretRange.setEnd(range.endContainer, range.endOffset);
      postCaretRange.selectNodeContents(element);
      postCaretRange.setStart(range.endContainer, range.endOffset);
      return {
        left: preCaretRange.toString().length,
        right: postCaretRange.toString().length
      };
    }
  }, {
    key: "selectNode",
    value: function selectNode(node) {
      var range = this.doc.createRange();
      range.selectNodeContents(node);
      this.selectRange(range);
    }
  }, {
    key: "select",
    value: function select(startNode, startOffset, endNode, endOffset) {
      var range = this.doc.createRange();
      range.setStart(startNode, startOffset);

      if (endNode) {
        range.setEnd(endNode, endOffset);
      } else {
        range.collapse(true);
      }

      this.selectRange(range);
      return range;
    }
  }, {
    key: "setFocus",
    value: function setFocus(focusNode, focusOffset) {
      var selection = this.doc.getSelection();
      selection.extend(focusNode, focusOffset);
    }
    /**
     *  Clear the current highlighted selection and set the caret to the start or the end of that prior selection, defaults to end.
     *
     *  @param {boolean} moveCursorToStart  A boolean representing whether or not to set the caret to the beginning of the prior selection.
     */

  }, {
    key: "clearSelection",
    value: function clearSelection(moveCursorToStart) {
      var _this$doc$getSelectio = this.doc.getSelection(),
          rangeCount = _this$doc$getSelectio.rangeCount;

      if (!rangeCount) return;

      if (moveCursorToStart) {
        this.doc.getSelection().collapseToStart();
      } else {
        this.doc.getSelection().collapseToEnd();
      }
    }
    /**
     * Move cursor to the given node with the given offset.
     *
     * @param  {DomElement}  node    Element where to jump
     * @param  {integer}     offset  Where in the element should we jump, 0 by default
     */

  }, {
    key: "moveCursor",
    value: function moveCursor(node, offset) {
      this.select(node, offset);
    }
  }, {
    key: "getSelectionRange",
    value: function getSelectionRange() {
      var selection = this.doc.getSelection();

      if (selection.rangeCount === 0) {
        return null;
      }

      return selection.getRangeAt(0);
    }
  }, {
    key: "selectRange",
    value: function selectRange(range) {
      var selection = this.doc.getSelection();
      selection.removeAllRanges();
      selection.addRange(range);
    } // https://stackoverflow.com/questions/1197401/
    // how-can-i-get-the-element-the-caret-is-in-with-javascript-when-using-contenteditable
    // by You

  }, {
    key: "getSelectionStart",
    value: function getSelectionStart() {
      var node = this.doc.getSelection().anchorNode;
      var startNode = node && node.nodeType === 3 ? node.parentNode : node;
      return startNode;
    }
  }, {
    key: "setCursorRange",
    value: function setCursorRange(cursorRange) {
      var anchor = cursorRange.anchor,
          focus = cursorRange.focus;
      var anchorParagraph = document.querySelector("#".concat(anchor.key));
      var focusParagraph = document.querySelector("#".concat(focus.key));

      var getNodeAndOffset = function getNodeAndOffset(node, offset) {
        if (node.nodeType === 3) {
          return {
            node: node,
            offset: offset
          };
        }

        var childNodes = node.childNodes;
        var len = childNodes.length;
        var i;
        var count = 0;

        for (i = 0; i < len; i++) {
          var child = childNodes[i];
          var textLength = getTextContent(child, [CLASS_OR_ID['AG_MATH_RENDER'], CLASS_OR_ID['AG_RUBY_RENDER']]).length;
          if (child.classList && child.classList.contains(CLASS_OR_ID['AG_FRONT_ICON'])) continue;

          if (count + textLength >= offset) {
            if (child.classList && child.classList.contains('ag-inline-image')) {
              var imageContainer = child.querySelector('.ag-image-container');
              var hasImg = imageContainer.querySelector('img');

              if (!hasImg) {
                return {
                  node: child,
                  offset: 0
                };
              }

              if (count + textLength === offset) {
                if (child.nextElementSibling) {
                  return {
                    node: child.nextElementSibling,
                    offset: 0
                  };
                } else {
                  return {
                    node: imageContainer,
                    offset: 3
                  };
                }
              } else if (count === offset && count === 0) {
                return {
                  node: imageContainer,
                  offset: 2
                };
              } else {
                return {
                  node: child,
                  offset: 0
                };
              }
            } else {
              return getNodeAndOffset(child, offset - count);
            }
          } else {
            count += textLength;
          }
        }

        return {
          node: node,
          offset: offset
        };
      };

      var _getNodeAndOffset = getNodeAndOffset(anchorParagraph, anchor.offset),
          anchorNode = _getNodeAndOffset.node,
          anchorOffset = _getNodeAndOffset.offset;

      var _getNodeAndOffset2 = getNodeAndOffset(focusParagraph, focus.offset),
          focusNode = _getNodeAndOffset2.node,
          focusOffset = _getNodeAndOffset2.offset;

      if (anchorNode.nodeType === 3 || anchorNode.nodeType === 1 && !anchorNode.classList.contains('ag-image-container')) {
        anchorOffset = Math.min(anchorOffset, anchorNode.textContent.length);
        focusOffset = Math.min(focusOffset, focusNode.textContent.length);
      } // First set the anchor node and anchor offset, make it collapsed


      this.select(anchorNode, anchorOffset); // Secondly, set the focus node and focus offset.

      this.setFocus(focusNode, focusOffset);
    }
  }, {
    key: "isValidCursorNode",
    value: function isValidCursorNode(node) {
      if (!node) return false;

      if (node.nodeType === 3) {
        node = node.parentNode;
      }

      return node.closest('span.ag-paragraph') || node.closest('th.ag-paragraph') || node.closest('td.ag-paragraph');
    }
  }, {
    key: "getCursorRange",
    value: function getCursorRange() {
      var _this$doc$getSelectio2 = this.doc.getSelection(),
          anchorNode = _this$doc$getSelectio2.anchorNode,
          anchorOffset = _this$doc$getSelectio2.anchorOffset,
          focusNode = _this$doc$getSelectio2.focusNode,
          focusOffset = _this$doc$getSelectio2.focusOffset;

      var isAnchorValid = this.isValidCursorNode(anchorNode);
      var isFocusValid = this.isValidCursorNode(focusNode);
      var needFix = false;

      if (!isAnchorValid && isFocusValid) {
        needFix = true;
        anchorNode = focusNode;
        anchorOffset = focusOffset;
      } else if (isAnchorValid && !isFocusValid) {
        needFix = true;
        focusNode = anchorNode;
        focusOffset = anchorOffset;
      } else if (!isAnchorValid && !isFocusValid) {
        var noNeedBlur = anchorNode.nodeType === 1 && !!anchorNode.querySelector('br') && anchorOffset === 1;

        if (!isIOS || !noNeedBlur) {
          var editor = document.querySelector('#ag-editor-id').parentNode;
          editor.blur();
        }

        return new selection_cursor({
          start: null,
          end: null,
          anchor: null,
          focus: null
        });
      } // fix bug click empty line, the cursor will jump to the end of pre line.


      if (anchorNode === focusNode && anchorOffset === focusOffset && anchorNode.textContent === '\n' && focusOffset === 0) {
        focusOffset = anchorOffset = 1;
      }

      var anchorParagraph = findNearestParagraph(anchorNode);
      var focusParagraph = findNearestParagraph(focusNode);
      var aOffset = dom_getOffsetOfParagraph(anchorNode, anchorParagraph) + anchorOffset;
      var fOffset = dom_getOffsetOfParagraph(focusNode, focusParagraph) + focusOffset; // fix input after image.

      if (anchorNode === focusNode && anchorOffset === focusOffset && anchorNode.parentNode.classList.contains('ag-image-container') && anchorNode.previousElementSibling && anchorNode.previousElementSibling.nodeName === 'IMG') {
        var imageWrapper = anchorNode.parentNode.parentNode;
        var preElement = imageWrapper.previousElementSibling;
        aOffset = 0;

        if (preElement) {
          aOffset += dom_getOffsetOfParagraph(preElement, anchorParagraph);
          aOffset += getTextContent(preElement, [CLASS_OR_ID['AG_MATH_RENDER'], CLASS_OR_ID['AG_RUBY_RENDER']]).length;
        }

        aOffset += getTextContent(imageWrapper, [CLASS_OR_ID['AG_MATH_RENDER'], CLASS_OR_ID['AG_RUBY_RENDER']]).length;
        fOffset = aOffset;
      }

      if (anchorNode === focusNode && anchorNode.nodeType === 1 && anchorNode.classList.contains('ag-image-container')) {
        var _imageWrapper = anchorNode.parentNode;
        var _preElement = _imageWrapper.previousElementSibling;
        aOffset = 0;

        if (_preElement) {
          aOffset += dom_getOffsetOfParagraph(_preElement, anchorParagraph);
          aOffset += getTextContent(_preElement, [CLASS_OR_ID['AG_MATH_RENDER'], CLASS_OR_ID['AG_RUBY_RENDER']]).length;
        }

        if (anchorOffset === 3) {
          aOffset += getTextContent(_imageWrapper, [CLASS_OR_ID['AG_MATH_RENDER'], CLASS_OR_ID['AG_RUBY_RENDER']]).length;
        }

        fOffset = aOffset;
      }

      var anchor = {
        key: anchorParagraph.id,
        offset: aOffset
      };
      var focus = {
        key: focusParagraph.id,
        offset: fOffset
      };
      var result = new selection_cursor({
        anchor: anchor,
        focus: focus
      });

      if (needFix) {
        this.setCursorRange(result);
      }

      return result;
    } // topOffset is the line counts above cursor, and bottomOffset is line counts bellow cursor.

  }, {
    key: "getCursorYOffset",
    value: function getCursorYOffset(paragraph) {
      var _this$getCursorCoords = this.getCursorCoords(),
          y = _this$getCursorCoords.y;

      var _paragraph$getBoundin = paragraph.getBoundingClientRect(),
          height = _paragraph$getBoundin.height,
          top = _paragraph$getBoundin.top;

      var lineHeight = parseFloat(getComputedStyle(paragraph).lineHeight);
      var topOffset = Math.round((y - top) / lineHeight);
      var bottomOffset = Math.round((top + height - lineHeight - y) / lineHeight);
      return {
        topOffset: topOffset,
        bottomOffset: bottomOffset
      };
    }
  }, {
    key: "getCursorCoords",
    value: function getCursorCoords() {
      var sel = this.doc.getSelection();
      var range;
      var x = 0;
      var y = 0;

      if (sel.rangeCount) {
        range = sel.getRangeAt(0).cloneRange();

        if (range.getClientRects) {
          range.collapse(true);
          var rects = range.getClientRects();

          if (rects.length === 0) {
            rects = range.startContainer && range.startContainer.nodeType === Node.ELEMENT_NODE ? range.startContainer.getClientRects() : [];
          }

          if (rects.length) {
            var _rects$ = rects[0],
                left = _rects$.left,
                top = _rects$.top,
                rectX = _rects$.x,
                rectY = _rects$.y;
            x = rectX || left;
            y = rectY || top;
          }
        }
      }

      return {
        x: x,
        y: y
      };
    }
  }, {
    key: "getSelectionEnd",
    value: function getSelectionEnd() {
      var node = this.doc.getSelection().focusNode;
      var endNode = node && node.nodeType === 3 ? node.parentNode : node;
      return endNode;
    }
  }]);

  return Selection;
}();

/* harmony default export */ var lib_selection = (new selection_Selection(document));
// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.map.js
var es6_map = __webpack_require__("f400");

// EXTERNAL MODULE: ./node_modules/mermaid/dist/mermaid.core.js
var mermaid_core = __webpack_require__("fbdb");
var mermaid_core_default = /*#__PURE__*/__webpack_require__.n(mermaid_core);

// EXTERNAL MODULE: ./node_modules/flowchart.js/index.js
var flowchart_js = __webpack_require__("d8e3");
var flowchart_js_default = /*#__PURE__*/__webpack_require__.n(flowchart_js);

// EXTERNAL MODULE: ./src/muya/lib/assets/libs/sequence-diagram.js
var sequence_diagram = __webpack_require__("812a");

// EXTERNAL MODULE: ./src/muya/lib/assets/styles/sequence-diagram.css
var styles_sequence_diagram = __webpack_require__("0bdc");

// CONCATENATED MODULE: ./src/muya/lib/parser/render/sequence.js


/* harmony default export */ var sequence = (sequence_diagram["a" /* default */]);
// EXTERNAL MODULE: ./node_modules/vega-embed/build/src/embed.js + 626 modules
var src_embed = __webpack_require__("7ad3");

// CONCATENATED MODULE: ./src/muya/lib/parser/render/snabbdom.js
// import virtualize from 'snabbdom-virtualize/strings'
var snabbdom = __webpack_require__("dd7b");

var patch = snabbdom.init([// Init patch function with chosen modules
__webpack_require__("f923").default, // makes it easy to toggle classes
__webpack_require__("ff70").default, __webpack_require__("9016").default, // handles styling on elements with support for animations
__webpack_require__("6af2").default, // for setting properties on DOM elements
__webpack_require__("4455").default, __webpack_require__("6907").default // attaches event listeners
]);
var snabbdom_h = __webpack_require__("2eed").default; // helper function for creating vnodes

var toHTML = __webpack_require__("bdf4"); // helper function for convert vnode to HTML string

var toVNode = __webpack_require__("77bb").default; // helper function for convert DOM to vnode

var htmlToVNode = function htmlToVNode(html) {
  // helper function for convert html to vnode
  var wrapper = document.createElement('div');
  wrapper.innerHTML = html;
  return toVNode(wrapper).children;
};
// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.regexp.constructor.js
var es6_regexp_constructor = __webpack_require__("3b2b");

// CONCATENATED MODULE: ./src/muya/lib/parser/escapeCharacter.js

// special character
var charachers = ['"', '&', '<', '>', ' ', ' ', ' ', ' ', '<', '>', '&', '"', '©', '®', '™', '×', '÷', ' ', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '­', '®', '¯', '°', '±', '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', 'À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'â', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ', 'ÿ', 'ƒ', 'Α', 'Β', 'Γ', 'Δ', 'Ε', 'Ζ', 'Η', 'Θ', 'Ι', 'Κ', 'Λ', 'Μ', 'Ν', 'Ξ', 'Ο', 'Π', 'Ρ', 'Σ', 'Τ', 'Υ', 'Φ', 'Χ', 'Ψ', 'Ω', 'α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ', 'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'ς', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω', 'ϑ', 'ϒ', 'ϖ', '•', '…', '′', '″', '‾', '⁄', '℘', 'ℑ', 'ℜ', '™', 'ℵ', '←', '↑', '→', '↓', '↔', '↵', '⇐', '⇑', '⇒', '⇓', '⇔', '∀', '∂', '∃', '∅', '∇', '∈', '∉', '∋', '∏', '∑', '−', '∗', '√', '∝', '∞', '∠', '∧', '∨', '∩', '∪', '∫', '∴', '∼', '≅', '≈', '≠', '≡', '≤', '≥', '⊂', '⊃', '⊄', '⊆', '⊇', '⊕', '⊗', '⊥', '⋅', '⌈', '⌉', '⌊', '⌋', '⟨', '⟩', '◊', '♠', '♣', '♥', '♦', '"', '&', '<', '>', 'Œ', 'œ', 'Š', 'š', 'Ÿ', 'ˆ', '˜', ' ', ' ', ' ', '‌', '‍', '‎', '‏', '–', '—', '‘', '’', '‚', '“', '”', '„', '†', '‡', '‰', '‹', '›', '€'];
var escapeCharacters = ['&quot;', '&amp;', '&lt;', '&gt;', '&nbsp;', '&ensp;', '&emsp;', '&nbsp;', '&lt;', '&gt;', '&amp;', '&quot;', '&copy;', '&reg;', '&trade;', '&times;', '&divide;', '&nbsp;', '&iexcl;', '&cent;', '&pound;', '&curren;', '&yen;', '&brvbar;', '&sect;', '&uml;', '&copy;', '&ordf;', '&laquo;', '&not;', '&shy;', '&reg;', '&macr;', '&deg;', '&plusmn;', '&sup2;', '&sup3;', '&acute;', '&micro;', '&para;', '&middot;', '&cedil;', '&sup1;', '&ordm;', '&raquo;', '&frac14;', '&frac12;', '&frac34;', '&iquest;', '&Agrave;', '&Aacute;', '&Acirc;', '&Atilde;', '&Auml;', '&Aring;', '&AElig;', '&Ccedil;', '&Egrave;', '&Eacute;', '&Ecirc;', '&Euml;', '&Igrave;', '&Iacute;', '&Icirc;', '&Iuml;', '&ETH;', '&Ntilde;', '&Ograve;', '&Oacute;', '&Ocirc;', '&Otilde;', '&Ouml;', '&times;', '&Oslash;', '&Ugrave;', '&Uacute;', '&Ucirc;', '&Uuml;', '&Yacute;', '&THORN;', '&szlig;', '&agrave;', '&aacute;', '&acirc;', '&atilde;', '&auml;', '&aring;', '&aelig;', '&ccedil;', '&egrave;', '&eacute;', '&ecirc;', '&euml;', '&igrave;', '&iacute;', '&icirc;', '&iuml;', '&eth;', '&ntilde;', '&ograve;', '&oacute;', '&ocirc;', '&otilde;', '&ouml;', '&divide;', '&oslash;', '&ugrave;', '&uacute;', '&ucirc;', '&uuml;', '&yacute;', '&thorn;', '&yuml;', '&fnof;', '&Alpha;', '&Beta;', '&Gamma;', '&Delta;', '&Epsilon;', '&Zeta;', '&Eta;', '&Theta;', '&Iota;', '&Kappa;', '&Lambda;', '&Mu;', '&Nu;', '&Xi;', '&Omicron;', '&Pi;', '&Rho;', '&Sigma;', '&Tau;', '&Upsilon;', '&Phi;', '&Chi;', '&Psi;', '&Omega;', '&alpha;', '&beta;', '&gamma;', '&delta;', '&epsilon;', '&zeta;', '&eta;', '&theta;', '&iota;', '&kappa;', '&lambda;', '&mu;', '&nu;', '&xi;', '&omicron;', '&pi;', '&rho;', '&sigmaf;', '&sigma;', '&tau;', '&upsilon;', '&phi;', '&chi;', '&psi;', '&omega;', '&thetasym;', '&upsih;', '&piv;', '&bull;', '&hellip;', '&prime;', '&Prime;', '&oline;', '&frasl;', '&weierp;', '&image;', '&real;', '&trade;', '&alefsym;', '&larr;', '&uarr;', '&rarr;', '&darr;', '&harr;', '&crarr;', '&lArr;', '&uArr;', '&rArr;', '&dArr;', '&hArr;', '&forall;', '&part;', '&exist;', '&empty;', '&nabla;', '&isin;', '&notin;', '&ni;', '&prod;', '&sum;', '&minus;', '&lowast;', '&radic;', '&prop;', '&infin;', '&ang;', '&and;', '&or;', '&cap;', '&cup;', '&int;', '&there4;', '&sim;', '&cong;', '&asymp;', '&ne;', '&equiv;', '&le;', '&ge;', '&sub;', '&sup;', '&nsub;', '&sube;', '&supe;', '&oplus;', '&otimes;', '&perp;', '&sdot;', '&lceil;', '&rceil;', '&lfloor;', '&rfloor;', '&lang;', '&rang;', '&loz;', '&spades;', '&clubs;', '&hearts;', '&diams;', '&quot;', '&amp;', '&lt;', '&gt;', '&OElig;', '&oelig;', '&Scaron;', '&scaron;', '&Yuml;', '&circ;', '&tilde;', '&ensp;', '&emsp;', '&thinsp;', '&zwnj;', '&zwj;', '&lrm;', '&rlm;', '&ndash;', '&mdash;', '&lsquo;', '&rsquo;', '&sbquo;', '&ldquo;', '&rdquo;', '&bdquo;', '&dagger;', '&Dagger;', '&permil;', '&lsaquo;', '&rsaquo;', '&euro;'];
var escapeCharactersMap = escapeCharacters.reduce(function (acc, escapeCharacter, index) {
  return Object.assign(acc, Object(defineProperty["a" /* default */])({}, escapeCharacter, charachers[index]));
}, {});
/* harmony default export */ var parser_escapeCharacter = (escapeCharactersMap);
// CONCATENATED MODULE: ./src/muya/lib/parser/rules.js


/* eslint-disable no-useless-escape */

var rules_beginRules = {
  'hr': /^(\*{3,}$|^\-{3,}$|^\_{3,}$)/,
  'code_fense': /^(`{3,})([^`]*)$/,
  'header': /(^ {0,3}#{1,6}(\s{1,}|$))/,
  'reference_definition': /^( {0,3}\[)([^\]]+?)(\\*)(\]: *)(<?)([^\s>]+)(>?)(?:( +)(["'(]?)([^\n"'\(\)]+)\9)?( *)$/,
  // extra syntax (not belogs to GFM)
  'multiple_math': /^(\$\$)$/
};
var rules_inlineRules = {
  'strong': /^(\*\*|__)(?=\S)([\s\S]*?[^\s\\])(\\*)\1(?!(\*|_))/,
  // can nest
  'em': /^(\*|_)(?=\S)([\s\S]*?[^\s\*\\])(\\*)\1(?!\1)/,
  // can nest
  'inline_code': /^(`{1,3})([^`]+?|.{2,})\1/,
  'image': /^(\!\[)(.*?)(\\*)\]\((.*?)(\\*)\)/,
  'link': /^(\[)((?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*?)(\\*)\]\((.*?)(\\*)\)/,
  // can nest
  'emoji': /^(:)([a-z_\d+-]+?)\1/,
  'del': /^(~{2})(?=\S)([\s\S]*?\S)(\\*)\1/,
  // can nest
  'auto_link': /^(https?:\/\/[^\s]+)(?=\s|$)/,
  'reference_link': /^\[([^\]]+?)(\\*)\](?:\[([^\]]*?)(\\*)\])?/,
  'reference_image': /^\!\[([^\]]+?)(\\*)\](?:\[([^\]]*?)(\\*)\])?/,
  'tail_header': /^(\s{1,}#{1,})(\s*)$/,
  'html_tag': /^(<!--[\s\S]*?-->|(<([a-zA-Z]{1}[a-zA-Z\d-]*) *[_\.\-/:a-zA-Z\d='";\? *]* *(?:\/)?>)(?:([\s\S]*?)(<\/\3 *>))?)/,
  // raw html
  'html_escape': new RegExp("^(".concat(escapeCharacters.join('|'), ")"), 'i'),
  'soft_line_break': /^(\n)(?!\n)/,
  'hard_line_break': /^( {2,})(\n)(?!\n)/,
  // patched math marker `$`
  'backlash': /^(\\)([\\`*{}\[\]()#+\-.!_>~:\|\<\>$]{1})/,
  // extra (not belongs to GFM)
  'inline_math': /^(\$)([^\$]*?[^\$\\])(\\*)\1(?!\1)/
};
/* eslint-enable no-useless-escape */
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/backlashInToken.js


 // TODO HIGHLIGHT

function backlashInToken(h, backlashes, outerClass, start, token) {
  var _token$highlights = token.highlights,
      highlights = _token$highlights === void 0 ? [] : _token$highlights;
  var chunks = backlashes.split('');
  var len = chunks.length;
  var result = [];
  var i;

  for (i = 0; i < len; i++) {
    var chunk = chunks[i];
    var light = highlights.filter(function (light) {
      return union({
        start: start + i,
        end: start + i + 1
      }, light);
    });
    var selector = 'span';

    if (light.length) {
      var className = this.getHighlightClassName(light[0].active);
      selector += ".".concat(className);
    }

    if (isEven(i)) {
      result.push(h("".concat(selector, ".").concat(outerClass), chunk));
    } else {
      result.push(h("".concat(selector, ".").concat(CLASS_OR_ID['AG_BACKLASH']), chunk));
    }
  }

  return result;
}
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/backlash.js

function backlash_backlash(h, cursor, block, token, outerClass) {
  var className = this.getClassName(outerClass, block, token, cursor);
  var _token$range = token.range,
      start = _token$range.start,
      end = _token$range.end;
  var content = this.highlight(h, block, start, end, token);
  return [h("span.".concat(className, ".").concat(CLASS_OR_ID['AG_REMOVE']), content)];
}
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/highlight.js








function highlight_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = highlight_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function highlight_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return highlight_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return highlight_arrayLikeToArray(o, minLen); }

function highlight_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

 // change text to highlight vdom

function highlight_highlight(h, block, rStart, rEnd, token) {
  var text = block.text;
  var highlights = token.highlights;
  var result = [];
  var unions = [];
  var pos = rStart;

  if (highlights) {
    var _iterator = highlight_createForOfIteratorHelper(highlights),
        _step;

    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var light = _step.value;
        var un = union({
          start: rStart,
          end: rEnd
        }, light);
        if (un) unions.push(un);
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
  }

  if (unions.length) {
    var _iterator2 = highlight_createForOfIteratorHelper(unions),
        _step2;

    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        var u = _step2.value;
        var start = u.start,
            end = u.end,
            active = u.active;
        var className = this.getHighlightClassName(active);

        if (pos < start) {
          result.push(text.substring(pos, start));
        }

        result.push(h("span.".concat(className), text.substring(start, end)));
        pos = end;
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }

    if (pos < rEnd) {
      result.push(block.text.substring(pos, rEnd));
    }
  } else {
    result = [text.substring(rStart, rEnd)];
  }

  return result;
}
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/header.js

function header_header(h, cursor, block, token, outerClass) {
  var content = token.content;
  var _token$range = token.range,
      start = _token$range.start,
      end = _token$range.end;
  var className = this.getClassName(outerClass, block, {
    range: {
      start: start,
      end: end - content.length
    }
  }, cursor);
  var markerVnode = this.highlight(h, block, start, end - content.length, token);
  var contentVnode = this.highlight(h, block, end - content.length, end, token);
  var spaceSelector = className === CLASS_OR_ID['AG_HIDE'] ? "span.".concat(CLASS_OR_ID['AG_HEADER_TIGHT_SPACE'], ".").concat(CLASS_OR_ID['AG_REMOVE']) : "span.".concat(CLASS_OR_ID['AG_GRAY'], ".").concat(CLASS_OR_ID['AG_REMOVE']);
  return [h("span.".concat(className, ".").concat(CLASS_OR_ID['AG_REMOVE']), markerVnode), h(spaceSelector, contentVnode)];
}
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/link.js



 // 'link': /^(\[)((?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*?)(\\*)\]\((.*?)(\\*)\)/, // can nest

function link_link(h, cursor, block, token, outerClass) {
  var _this = this;

  var className = this.getClassName(outerClass, block, token, cursor);
  var linkClassName = className === CLASS_OR_ID['AG_HIDE'] ? className : CLASS_OR_ID['AG_LINK_IN_BRACKET'];
  var _token$range = token.range,
      start = _token$range.start,
      end = _token$range.end;
  var firstMiddleBracket = this.highlight(h, block, start, start + 3, token);
  var firstBracket = this.highlight(h, block, start, start + 1, token);
  var middleBracket = this.highlight(h, block, start + 1 + token.anchor.length + token.backlash.first.length, start + 1 + token.anchor.length + token.backlash.first.length + 2, token);
  var hrefContent = this.highlight(h, block, start + 1 + token.anchor.length + token.backlash.first.length + 2, start + 1 + token.anchor.length + token.backlash.first.length + 2 + token.hrefAndTitle.length, token);
  var middleHref = this.highlight(h, block, start + 1 + token.anchor.length + token.backlash.first.length, block, start + 1 + token.anchor.length + token.backlash.first.length + 2 + token.hrefAndTitle.length, token);
  var lastBracket = this.highlight(h, block, end - 1, end, token);
  var firstBacklashStart = start + 1 + token.anchor.length;
  var secondBacklashStart = end - 1 - token.backlash.second.length;

  if (isLengthEven(token.backlash.first) && isLengthEven(token.backlash.second)) {
    if (!token.children.length && !token.backlash.first) {
      // no-text-link
      return [h("span.".concat(CLASS_OR_ID['AG_GRAY'], ".").concat(CLASS_OR_ID['AG_REMOVE']), firstMiddleBracket), h("a.".concat(CLASS_OR_ID['AG_NOTEXT_LINK'], ".").concat(CLASS_OR_ID['AG_INLINE_RULE']), {
        props: {
          href: token.href + encodeURI(token.backlash.second),
          target: '_blank',
          title: token.title
        }
      }, [].concat(Object(toConsumableArray["a" /* default */])(hrefContent), Object(toConsumableArray["a" /* default */])(this.backlashInToken(h, token.backlash.second, className, secondBacklashStart, token)))), h("span.".concat(CLASS_OR_ID['AG_GRAY'], ".").concat(CLASS_OR_ID['AG_REMOVE']), lastBracket)];
    } else {
      // has children
      return [h("span.".concat(className, ".").concat(CLASS_OR_ID['AG_REMOVE']), firstBracket), h("a.".concat(CLASS_OR_ID['AG_INLINE_RULE']), {
        props: {
          href: token.href + encodeURI(token.backlash.second),
          target: '_blank',
          title: token.title
        }
      }, [].concat(Object(toConsumableArray["a" /* default */])(token.children.reduce(function (acc, to) {
        var chunk = _this[snakeToCamel(to.type)](h, cursor, block, to, className);

        return Array.isArray(chunk) ? [].concat(Object(toConsumableArray["a" /* default */])(acc), Object(toConsumableArray["a" /* default */])(chunk)) : [].concat(Object(toConsumableArray["a" /* default */])(acc), [chunk]);
      }, [])), Object(toConsumableArray["a" /* default */])(this.backlashInToken(h, token.backlash.first, className, firstBacklashStart, token)))), h("span.".concat(className, ".").concat(CLASS_OR_ID['AG_REMOVE']), middleBracket), h("span.".concat(linkClassName, ".").concat(CLASS_OR_ID['AG_REMOVE']), [].concat(Object(toConsumableArray["a" /* default */])(hrefContent), Object(toConsumableArray["a" /* default */])(this.backlashInToken(h, token.backlash.second, className, secondBacklashStart, token)))), h("span.".concat(className, ".").concat(CLASS_OR_ID['AG_REMOVE']), lastBracket)];
    }
  } else {
    return [].concat(Object(toConsumableArray["a" /* default */])(firstBracket), Object(toConsumableArray["a" /* default */])(token.children.reduce(function (acc, to) {
      var chunk = _this[snakeToCamel(to.type)](h, cursor, block, to, className);

      return Array.isArray(chunk) ? [].concat(Object(toConsumableArray["a" /* default */])(acc), Object(toConsumableArray["a" /* default */])(chunk)) : [].concat(Object(toConsumableArray["a" /* default */])(acc), [chunk]);
    }, [])), Object(toConsumableArray["a" /* default */])(this.backlashInToken(h, token.backlash.first, className, firstBacklashStart, token)), Object(toConsumableArray["a" /* default */])(middleHref), Object(toConsumableArray["a" /* default */])(this.backlashInToken(h, token.backlash.second, className, secondBacklashStart, token)), Object(toConsumableArray["a" /* default */])(lastBracket));
  }
}
// EXTERNAL MODULE: ./node_modules/core-js/modules/es7.array.includes.js
var es7_array_includes = __webpack_require__("6762");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.string.includes.js
var es6_string_includes = __webpack_require__("2fdb");

// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/htmlTag.js













function htmlTag_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = htmlTag_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function htmlTag_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return htmlTag_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return htmlTag_arrayLikeToArray(o, minLen); }

function htmlTag_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }



function htmlTag(h, cursor, block, token, outerClass) {
  var _this = this;

  var tag = token.tag,
      openTag = token.openTag,
      closeTag = token.closeTag,
      children = token.children,
      attrs = token.attrs;
  var className = children ? this.getClassName(outerClass, block, token, cursor) : CLASS_OR_ID['AG_GRAY'];
  var tagClassName = className === CLASS_OR_ID['AG_HIDE'] ? className : CLASS_OR_ID['AG_HTML_TAG'];
  var _token$range = token.range,
      start = _token$range.start,
      end = _token$range.end;
  var openContent = this.highlight(h, block, start, start + openTag.length, token);
  var closeContent = closeTag ? this.highlight(h, block, end - closeTag.length, end, token) : '';
  var anchor = Array.isArray(children) && tag !== 'ruby' // important
  ? children.reduce(function (acc, to) {
    var chunk = _this[snakeToCamel(to.type)](h, cursor, block, to, className);

    return Array.isArray(chunk) ? [].concat(Object(toConsumableArray["a" /* default */])(acc), Object(toConsumableArray["a" /* default */])(chunk)) : [].concat(Object(toConsumableArray["a" /* default */])(acc), [chunk]);
  }, []) : '';

  switch (tag) {
    case 'img':
      {
        return this.htmlImage(h, cursor, block, token, outerClass);
      }

    case 'br':
      {
        return [h("span.".concat(CLASS_OR_ID['AG_HTML_TAG']), [].concat(Object(toConsumableArray["a" /* default */])(openContent), [h(tag)]))];
      }

    default:
      // handle void html tag
      if (!closeTag) {
        return [h("span.".concat(CLASS_OR_ID['AG_HTML_TAG']), openContent)];
      } else if (tag === 'ruby') {
        return this.htmlRuby(h, cursor, block, token, outerClass);
      } else {
        // if  tag is a block level element, use a inline element `span` to instead.
        // Because we can not nest a block level element in span element(line is span element)
        // we also recommand user not use block level element in paragraph. use block element in html block.
        var selector = BLOCK_TYPE6.includes(tag) ? 'span' : tag;
        selector += ".".concat(CLASS_OR_ID['AG_INLINE_RULE']);
        var data = {
          attrs: {},
          dataset: {}
        };

        if (attrs.id) {
          selector += "#".concat(attrs.id);
        }

        if (attrs.class && /\S/.test(attrs.class)) {
          var classNames = attrs.class.split(/\s+/);

          var _iterator = htmlTag_createForOfIteratorHelper(classNames),
              _step;

          try {
            for (_iterator.s(); !(_step = _iterator.n()).done;) {
              var _className = _step.value;
              selector += ".".concat(_className);
            }
          } catch (err) {
            _iterator.e(err);
          } finally {
            _iterator.f();
          }
        }

        for (var _i = 0, _Object$keys = Object.keys(attrs); _i < _Object$keys.length; _i++) {
          var attr = _Object$keys[_i];

          if (attr !== 'id' && attr !== 'class') {
            data.attrs[attr] = attrs[attr];
          }
        }

        return [h("span.".concat(tagClassName, ".").concat(CLASS_OR_ID['AG_OUTPUT_REMOVE']), openContent), h("".concat(selector), data, anchor), h("span.".concat(tagClassName, ".").concat(CLASS_OR_ID['AG_OUTPUT_REMOVE']), closeContent)];
      }

  }
}
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/hr.js

function hr_hr(h, cursor, block, token, outerClass) {
  var _token$range = token.range,
      start = _token$range.start,
      end = _token$range.end;
  var content = this.highlight(h, block, start, end, token);
  return [h("span.".concat(CLASS_OR_ID['AG_GRAY'], ".").concat(CLASS_OR_ID['AG_REMOVE']), content)];
}
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/tailHeader.js
function tailHeader(h, cursor, block, token, outerClass) {
  var className = this.getClassName(outerClass, block, token, cursor);
  var _token$range = token.range,
      start = _token$range.start,
      end = _token$range.end;
  var content = this.highlight(h, block, start, end, token);

  if (/^h\d$/.test(block.type)) {
    return [h("span.".concat(className), content)];
  } else {
    return content;
  }
}
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/hardLineBreak.js

function softLineBreak(h, cursor, block, token, outerClass) {
  var spaces = token.spaces,
      lineBreak = token.lineBreak,
      isAtEnd = token.isAtEnd;
  var className = CLASS_OR_ID['AG_HARD_LINE_BREAK'];
  var spaceClass = CLASS_OR_ID['AG_HARD_LINE_BREAK_SPACE'];

  if (isAtEnd) {
    return [h("span.".concat(className), h("span.".concat(spaceClass), spaces)), h("span.".concat(CLASS_OR_ID['AG_LINE_END']), lineBreak)];
  } else {
    return [h("span.".concat(className), [h("span.".concat(spaceClass), spaces), lineBreak])];
  }
}
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/softLineBreak.js

function hardLineBreak(h, cursor, block, token, outerClass) {
  var lineBreak = token.lineBreak,
      isAtEnd = token.isAtEnd;
  var selector = "span.".concat(CLASS_OR_ID['AG_SOFT_LINE_BREAK']);

  if (isAtEnd) {
    selector += ".".concat(CLASS_OR_ID['AG_LINE_END']);
  }

  return [h(selector, lineBreak)];
}
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/codeFense.js

function codeFense(h, cursor, block, token, outerClass) {
  var _token$range = token.range,
      start = _token$range.start,
      end = _token$range.end;
  var marker = token.marker;
  var markerContent = this.highlight(h, block, start, start + marker.length, token);
  var content = this.highlight(h, block, start + marker.length, end, token);
  return [h("span.".concat(CLASS_OR_ID['AG_GRAY']), markerContent), h("span.".concat(CLASS_OR_ID['AG_LANGUAGE']), content)];
}
// EXTERNAL MODULE: ./node_modules/katex/dist/katex.js
var katex = __webpack_require__("3b2f");
var katex_default = /*#__PURE__*/__webpack_require__.n(katex);

// EXTERNAL MODULE: ./node_modules/katex/dist/katex.min.css
var katex_min = __webpack_require__("be0f");

// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/inlineMath.js




function displayMath(h, cursor, block, token, outerClass) {
  var className = this.getClassName(outerClass, block, token, cursor);
  var mathSelector = className === CLASS_OR_ID['AG_HIDE'] ? "span.".concat(className, ".").concat(CLASS_OR_ID['AG_MATH']) : "span.".concat(CLASS_OR_ID['AG_MATH']);
  var _token$range = token.range,
      start = _token$range.start,
      end = _token$range.end;
  var marker = token.marker;
  var startMarker = this.highlight(h, block, start, start + marker.length, token);
  var endMarker = this.highlight(h, block, end - marker.length, end, token);
  var content = this.highlight(h, block, start + marker.length, end - marker.length, token);
  var math = token.content,
      type = token.type;
  var loadMathMap = this.loadMathMap;
  var displayMode = false;
  var key = "".concat(math, "_").concat(type);
  var mathVnode = null;
  var previewSelector = "span.".concat(CLASS_OR_ID['AG_MATH_RENDER']);

  if (loadMathMap.has(key)) {
    mathVnode = loadMathMap.get(key);
  } else {
    try {
      var html = katex_default.a.renderToString(math, {
        displayMode: displayMode
      });
      mathVnode = htmlToVNode(html);
      loadMathMap.set(key, mathVnode);
    } catch (err) {
      mathVnode = '< Invalid Mathematical Formula >';
      previewSelector += ".".concat(CLASS_OR_ID['AG_MATH_ERROR']);
    }
  }

  return [h("span.".concat(className, ".").concat(CLASS_OR_ID['AG_MATH_MARKER']), startMarker), h(mathSelector, [h("span.".concat(CLASS_OR_ID['AG_INLINE_RULE'], ".").concat(CLASS_OR_ID['AG_MATH_TEXT']), content), h(previewSelector, {
    attrs: {
      contenteditable: 'false'
    }
  }, mathVnode)]), h("span.".concat(className, ".").concat(CLASS_OR_ID['AG_MATH_MARKER']), endMarker)];
}
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/autoLink.js
 // render auto_link to vdom

function autoLink(h, cursor, block, token, outerClass) {
  var _token$range = token.range,
      start = _token$range.start,
      end = _token$range.end;
  var content = this.highlight(h, block, start, end, token);
  return [h("a.".concat(CLASS_OR_ID['AG_INLINE_RULE']), {
    props: {
      href: token.href,
      target: '_blank'
    }
  }, content)];
}
// CONCATENATED MODULE: ./src/muya/lib/utils/domManipulate.js
/**
 * [description `add` or `remove` className of element
 */
var operateClassName = function operateClassName(element, ctrl, className) {
  element.classList[ctrl](className);
};
var insertBefore = function insertBefore(newNode, originNode) {
  var parentNode = originNode.parentNode;
  parentNode.insertBefore(newNode, originNode);
}; // DOM operations

var insertAfter = function insertAfter(newNode, originNode) {
  var parentNode = originNode.parentNode;

  if (originNode.nextSibling) {
    parentNode.insertBefore(newNode, originNode.nextSibling);
  } else {
    parentNode.appendChild(newNode);
  }
};
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/loadImageAsync.js




function loadImageAsync(imageInfo, alt, className, imageClass) {
  var _this = this;

  var src = imageInfo.src,
      isUnknownType = imageInfo.isUnknownType;
  var id;
  var isSuccess;

  if (!this.loadImageMap.has(src)) {
    id = getUniqueId();
    loadImage(src, isUnknownType).then(function (url) {
      var imageText = document.querySelector("#".concat(id));
      var img = document.createElement('img');
      img.src = url;
      if (alt) img.alt = alt.replace(/[`*{}[\]()#+\-.!_>~:|<>$]/g, '');

      if (imageClass) {
        img.classList.add(imageClass);
      }

      if (imageText) {
        if (imageText.classList.contains('ag-inline-image')) {
          var imageContainer = imageText.querySelector('.ag-image-container');
          var oldImage = imageContainer.querySelector('img');

          if (oldImage) {
            oldImage.remove();
          }

          imageContainer.appendChild(img);
          imageText.classList.remove('ag-image-loading');
          imageText.classList.add('ag-image-success');
        } else {
          insertAfter(img, imageText);
          operateClassName(imageText, 'add', className);
        }
      }

      if (_this.urlMap.has(src)) {
        _this.urlMap.delete(src);
      }

      _this.loadImageMap.set(src, {
        id: id,
        isSuccess: true
      });
    }).catch(function () {
      var imageText = document.querySelector("#".concat(id));

      if (imageText) {
        operateClassName(imageText, 'remove', CLASS_OR_ID['AG_IMAGE_LOADING']);
        operateClassName(imageText, 'add', CLASS_OR_ID['AG_IMAGE_FAIL']);
        var image = imageText.querySelector('img');

        if (image) {
          image.remove();
        }
      }

      if (_this.urlMap.has(src)) {
        _this.urlMap.delete(src);
      }

      _this.loadImageMap.set(src, {
        id: id,
        isSuccess: false
      });
    });
  } else {
    var _imageInfo = this.loadImageMap.get(src);

    id = _imageInfo.id;
    isSuccess = _imageInfo.isSuccess;
  }

  return {
    id: id,
    isSuccess: isSuccess
  };
}
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/htmlImage.js

 // html_image

function htmlImage(h, cursor, block, token, outerClass) {
  var className = this.getClassName(outerClass, block, token, cursor);
  var imageClass = CLASS_OR_ID['AG_IMAGE_MARKED_TEXT'];
  var _token$range = token.range,
      start = _token$range.start,
      end = _token$range.end;
  var tag = this.highlight(h, block, start, end, token);
  var _token$attrs = token.attrs,
      rawSrc = _token$attrs.src,
      _token$attrs$alt = _token$attrs.alt,
      alt = _token$attrs$alt === void 0 ? '' : _token$attrs$alt,
      width = _token$attrs.width,
      height = _token$attrs.height;
  var imageInfo = utils_getImageInfo(rawSrc);
  var src = imageInfo.src;
  var id;
  var isSuccess;
  var selector;

  if (src) {
    var _this$loadImageAsync = this.loadImageAsync(imageInfo, alt, className, CLASS_OR_ID['AG_COPY_REMOVE']);

    id = _this$loadImageAsync.id;
    isSuccess = _this$loadImageAsync.isSuccess;
  }

  selector = id ? "span#".concat(id, ".").concat(imageClass, ".").concat(CLASS_OR_ID['AG_HTML_TAG']) : "span.".concat(imageClass, ".").concat(CLASS_OR_ID['AG_HTML_TAG']);
  selector += ".".concat(CLASS_OR_ID['AG_OUTPUT_REMOVE']);

  if (isSuccess) {
    selector += ".".concat(className);
  } else {
    selector += ".".concat(CLASS_OR_ID['AG_IMAGE_FAIL']);
  }

  var props = {
    alt: alt,
    src: src
  };

  if (typeof width === 'number') {
    props.width = width;
  }

  if (typeof height === 'number') {
    props.height = height;
  }

  return isSuccess ? [h(selector, tag), h("img.".concat(CLASS_OR_ID['AG_COPY_REMOVE']), {
    props: props
  })] : [h(selector, tag)];
}
// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.string.starts-with.js
var es6_string_starts_with = __webpack_require__("f559");

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/image/2.png
var _2 = __webpack_require__("c69d");
var _2_default = /*#__PURE__*/__webpack_require__.n(_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/image_fail/2.png
var image_fail_2 = __webpack_require__("7bd5");
var image_fail_2_default = /*#__PURE__*/__webpack_require__.n(image_fail_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/imageEdit/2.png
var imageEdit_2 = __webpack_require__("aae6");
var imageEdit_2_default = /*#__PURE__*/__webpack_require__.n(imageEdit_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/delete/delete@2x.png
var delete_2x = __webpack_require__("b282");
var delete_2x_default = /*#__PURE__*/__webpack_require__.n(delete_2x);

// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/image.js









var renderIcon = function renderIcon(h, className, icon) {
  var selector = "a.".concat(className);
  var iconVnode = h('i.icon', h("i.icon-inner", {
    style: {
      background: "url(".concat(icon, ") no-repeat"),
      'background-size': '100%'
    }
  }, ''));
  return h(selector, {
    attrs: {
      contenteditable: 'false'
    }
  }, iconVnode);
}; // I dont want operate dom directly, is there any better method? need help!


function image_image(h, cursor, block, token, outerClass) {
  var imageInfo = utils_getImageInfo(token.src + encodeURI(token.backlash.second));
  var selectedImage = this.muya.contentState.selectedImage;
  var data = {
    dataset: {
      raw: token.raw
    },
    attrs: {
      contenteditable: 'true'
    }
  };
  var id;
  var isSuccess;
  var src = imageInfo.src;
  var alt = token.alt + encodeURI(token.backlash.first);
  var title = token.title;

  if (src) {
    var _this$loadImageAsync = this.loadImageAsync(imageInfo, alt);

    id = _this$loadImageAsync.id;
    isSuccess = _this$loadImageAsync.isSuccess;
  }

  var wrapperSelector = id ? "span#".concat(id, ".").concat(CLASS_OR_ID['AG_INLINE_IMAGE']) : "span.".concat(CLASS_OR_ID['AG_INLINE_IMAGE']);
  var imageIcons = [renderIcon(h, 'ag-image-icon-success', _2_default.a), renderIcon(h, 'ag-image-icon-fail', image_fail_2_default.a), renderIcon(h, 'ag-image-icon-close', delete_2x_default.a)];
  var toolIcons = [renderIcon(h, 'ag-image-icon-turninto', imageEdit_2_default.a), renderIcon(h, 'ag-image-icon-delete', delete_2x_default.a)];

  var renderImageContainer = function renderImageContainer() {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    return h("span.".concat(CLASS_OR_ID['AG_IMAGE_CONTAINER']), {
      attrs: {
        contenteditable: 'true'
      }
    }, args);
  }; // the src image is still loading, so use the url Map base64.


  if (this.urlMap.has(src)) {
    // fix: it will generate a new id if the image is not loaded.
    var _selectedImage = this.muya.contentState.selectedImage;

    if (_selectedImage && _selectedImage.token.src === src && _selectedImage.imageId !== id) {
      _selectedImage.imageId = id;
    }

    src = this.urlMap.get(src);
    isSuccess = true;
  }

  if (alt.startsWith('loading-')) {
    wrapperSelector += ".".concat(CLASS_OR_ID['AG_IMAGE_UPLOADING']);
    Object.assign(data.dataset, {
      id: alt
    });

    if (this.urlMap.has(alt)) {
      src = this.urlMap.get(alt);
      isSuccess = true;
    }
  }

  if (src) {
    // image is loading...
    if (typeof isSuccess === 'undefined') {
      wrapperSelector += ".".concat(CLASS_OR_ID['AG_IMAGE_LOADING']);
    } else if (isSuccess === true) {
      wrapperSelector += ".".concat(CLASS_OR_ID['AG_IMAGE_SUCCESS']);
    } else {
      wrapperSelector += ".".concat(CLASS_OR_ID['AG_IMAGE_FAIL']);
    }

    if (selectedImage) {
      var key = selectedImage.key,
          selectToken = selectedImage.token;

      if (key === block.key && selectToken.range.start === token.range.start && selectToken.range.end === token.range.end) {
        wrapperSelector += ".".concat(CLASS_OR_ID['AG_INLINE_IMAGE_SELECTED']);
      }
    }

    return isSuccess ? [h(wrapperSelector, data, [].concat(imageIcons, [renderImageContainer.apply(void 0, toolIcons.concat([// An image description has inline elements as its contents.
    // When an image is rendered to HTML, this is standardly used as the image’s alt attribute.
    h('img', {
      props: {
        alt: alt.replace(/[`*{}[\]()#+\-.!_>~:|<>$]/g, ''),
        src: src,
        title: title
      }
    })]))]))] : [h(wrapperSelector, data, [].concat(imageIcons, [renderImageContainer.apply(void 0, toolIcons)]))];
  } else {
    wrapperSelector += ".".concat(CLASS_OR_ID['AG_EMPTY_IMAGE']);
    return [h(wrapperSelector, data, [].concat(imageIcons, [renderImageContainer.apply(void 0, toolIcons)]))];
  }
}
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/delEmStringFactory.js


 // render factory of `del`,`em`,`strong`

function delEmStrongFac(type, h, cursor, block, token, outerClass) {
  var _this = this;

  var className = this.getClassName(outerClass, block, token, cursor);
  var COMMON_MARKER = "span.".concat(className, ".").concat(CLASS_OR_ID['AG_REMOVE']);
  var marker = token.marker;
  var _token$range = token.range,
      start = _token$range.start,
      end = _token$range.end;
  var backlashStart = end - marker.length - token.backlash.length;
  var content = [].concat(Object(toConsumableArray["a" /* default */])(token.children.reduce(function (acc, to) {
    var chunk = _this[snakeToCamel(to.type)](h, cursor, block, to, className);

    return Array.isArray(chunk) ? [].concat(Object(toConsumableArray["a" /* default */])(acc), Object(toConsumableArray["a" /* default */])(chunk)) : [].concat(Object(toConsumableArray["a" /* default */])(acc), [chunk]);
  }, [])), Object(toConsumableArray["a" /* default */])(this.backlashInToken(h, token.backlash, className, backlashStart, token)));
  var startMarker = this.highlight(h, block, start, start + marker.length, token);
  var endMarker = this.highlight(h, block, end - marker.length, end, token);
  return [h(COMMON_MARKER, startMarker), h("".concat(type, ".").concat(CLASS_OR_ID['AG_INLINE_RULE']), content), h(COMMON_MARKER, endMarker)];
}
// EXTERNAL MODULE: ./node_modules/fuzzaldrin/lib/fuzzaldrin.js
var fuzzaldrin = __webpack_require__("3d69");

// EXTERNAL MODULE: ./src/muya/lib/ui/emojis/emojisJson.json
var emojisJson = __webpack_require__("02a1");

// CONCATENATED MODULE: ./src/muya/lib/ui/emojis/index.js
















function emojis_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = emojis_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function emojis_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return emojis_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return emojis_arrayLikeToArray(o, minLen); }

function emojis_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }




var emojisForSearch = {};

var emojis_iterator = emojis_createForOfIteratorHelper(emojisJson),
    emojis_step;

try {
  for (emojis_iterator.s(); !(emojis_step = emojis_iterator.n()).done;) {
    var emojis_emoji = emojis_step.value;
    var newEmoji = Object.assign({}, emojis_emoji, {
      search: [].concat(Object(toConsumableArray["a" /* default */])(emojis_emoji.aliases), Object(toConsumableArray["a" /* default */])(emojis_emoji.tags)).join(' ')
    });

    if (emojisForSearch[newEmoji.category]) {
      emojisForSearch[newEmoji.category].push(newEmoji);
    } else {
      emojisForSearch[newEmoji.category] = [newEmoji];
    }
  }
  /**
   * check if one emoji code is in emojis, return undefined or found emoji
   */

} catch (err) {
  emojis_iterator.e(err);
} finally {
  emojis_iterator.f();
}

var emojis_validEmoji = function validEmoji(text) {
  return emojisJson.find(function (emoji) {
    return emoji.aliases.includes(text);
  });
};
/**
 * check edit emoji
 */

var emojis_checkEditEmoji = function checkEditEmoji(node) {
  if (node && node.classList.contains(CLASS_OR_ID['AG_EMOJI_MARKED_TEXT'])) {
    return node;
  }

  return false;
};

var emojis_Emoji = /*#__PURE__*/function () {
  function Emoji() {
    Object(classCallCheck["a" /* default */])(this, Emoji);

    this.cache = new Map();
  }

  Object(createClass["a" /* default */])(Emoji, [{
    key: "search",
    value: function search(text) {
      var cache = this.cache;
      if (cache.has(text)) return cache.get(text);
      var result = {};
      Object.keys(emojisForSearch).forEach(function (category) {
        var list = Object(fuzzaldrin["filter"])(emojisForSearch[category], text, {
          key: 'search'
        });

        if (list.length) {
          result[category] = list;
        }
      });
      cache.set(text, result);
      return result;
    }
  }, {
    key: "destroy",
    value: function destroy() {
      return this.cache.clear();
    }
  }]);

  return Emoji;
}();

/* harmony default export */ var ui_emojis = (emojis_Emoji);
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/emoji.js








function emoji_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = emoji_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function emoji_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return emoji_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return emoji_arrayLikeToArray(o, minLen); }

function emoji_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }


 // render token of emoji to vdom

function emoji_emoji(h, cursor, block, token, outerClass) {
  var _token$range = token.range,
      rStart = _token$range.start,
      rEnd = _token$range.end;
  var className = this.getClassName(outerClass, block, token, cursor);
  var validation = emojis_validEmoji(token.content);
  var finalClass = validation ? className : CLASS_OR_ID['AG_WARN'];
  var contentSelector = finalClass !== CLASS_OR_ID['AG_GRAY'] ? "span.".concat(finalClass, ".").concat(CLASS_OR_ID['AG_INLINE_RULE'], ".").concat(CLASS_OR_ID['AG_EMOJI_MARKED_TEXT']) : "span.".concat(CLASS_OR_ID['AG_INLINE_RULE'], ".").concat(CLASS_OR_ID['AG_EMOJI_MARKED_TEXT']);
  var startMarkerSelector = "span.".concat(finalClass, ".").concat(CLASS_OR_ID['AG_EMOJI_MARKER']);
  var endMarkerSelector = startMarkerSelector;
  var content = token.content;
  var pos = rStart + token.marker.length;

  if (token.highlights && token.highlights.length) {
    content = [];

    var _iterator = emoji_createForOfIteratorHelper(token.highlights),
        _step;

    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var light = _step.value;
        var start = light.start,
            end = light.end,
            active = light.active;
        var HIGHLIGHT_CLASSNAME = this.getHighlightClassName(active);

        if (start === rStart) {
          startMarkerSelector += ".".concat(HIGHLIGHT_CLASSNAME);
          start++;
        }

        if (end === rEnd) {
          endMarkerSelector += ".".concat(HIGHLIGHT_CLASSNAME);
          end--;
        }

        if (pos < start) {
          content.push(block.text.substring(pos, start));
        }

        if (start < end) {
          content.push(h("span.".concat(HIGHLIGHT_CLASSNAME), block.text.substring(start, end)));
        }

        pos = end;
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }

    if (pos < rEnd - token.marker.length) {
      content.push(block.text.substring(pos, rEnd - 1));
    }
  }

  var emojiVdom = validation ? h(contentSelector, {
    dataset: {
      emoji: validation.emoji
    }
  }, content) : h(contentSelector, content);
  return [h(startMarkerSelector, token.marker), emojiVdom, h(endMarkerSelector, token.marker)];
}
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/inlineCode.js

function inlineCode(h, cursor, block, token, outerClass) {
  var className = this.getClassName(outerClass, block, token, cursor);
  var marker = token.marker;
  var _token$range = token.range,
      start = _token$range.start,
      end = _token$range.end;
  var startMarker = this.highlight(h, block, start, start + marker.length, token);
  var endMarker = this.highlight(h, block, end - marker.length, end, token);
  var content = this.highlight(h, block, start + marker.length, end - marker.length, token);
  return [h("span.".concat(className, ".").concat(CLASS_OR_ID['AG_REMOVE']), startMarker), h("code.".concat(CLASS_OR_ID['AG_INLINE_RULE']), content), h("span.".concat(className, ".").concat(CLASS_OR_ID['AG_REMOVE']), endMarker)];
}
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/text.js
// render token of text type to vdom.
function text_text(h, cursor, block, token) {
  var _token$range = token.range,
      start = _token$range.start,
      end = _token$range.end;
  return [h('span.ag-plain-text', this.highlight(h, block, start, end, token))];
}
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/del.js
function del(h, cursor, block, token, outerClass) {
  return this.delEmStrongFac('del', h, cursor, block, token, outerClass);
}
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/em.js
function em(h, cursor, block, token, outerClass) {
  return this.delEmStrongFac('em', h, cursor, block, token, outerClass);
}
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/strong.js
function strong(h, cursor, block, token, outerClass) {
  return this.delEmStrongFac('strong', h, cursor, block, token, outerClass);
}
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/htmlEscape.js


function htmlEscape(h, cursor, block, token, outerClass) {
  var className = this.getClassName(outerClass, block, token, cursor);
  var escapeCharacter = token.escapeCharacter;
  var _token$range = token.range,
      start = _token$range.start,
      end = _token$range.end;
  var content = this.highlight(h, block, start, end, token);
  return [h("span.".concat(className, ".").concat(CLASS_OR_ID['AG_HTML_ESCAPE']), {
    dataset: {
      character: parser_escapeCharacter[escapeCharacter]
    }
  }, content)];
}
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/multipleMath.js

function multipleMath(h, cursor, block, token, outerClass) {
  var _token$range = token.range,
      start = _token$range.start,
      end = _token$range.end;
  var content = this.highlight(h, block, start, end, token);
  return [h("span.".concat(CLASS_OR_ID['AG_GRAY'], ".").concat(CLASS_OR_ID['AG_REMOVE']), content)];
}
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/referenceDefinition.js


function referenceDefinition(h, cursor, block, token, outerClass) {
  var className = CLASS_OR_ID['AG_REFERENCE_MARKER'];
  var leftBracket = token.leftBracket,
      label = token.label,
      backlash = token.backlash,
      titleMarker = token.titleMarker,
      title = token.title,
      rightTitleSpace = token.rightTitleSpace;
  var _token$range = token.range,
      start = _token$range.start,
      end = _token$range.end;
  var leftBracketContent = this.highlight(h, block, start, start + leftBracket.length, token);
  var labelContent = this.highlight(h, block, start + leftBracket.length, start + leftBracket.length + label.length, token);
  var middleContent = this.highlight(h, block, start + leftBracket.length + label.length + backlash.length, end - rightTitleSpace.length - titleMarker.length - title.length, token);
  var titleContent = this.highlight(h, block, end - rightTitleSpace.length - titleMarker.length - title.length, end - titleMarker.length - rightTitleSpace.length, token);
  var rightContent = this.highlight(h, block, end - titleMarker.length - rightTitleSpace.length, end, token);
  var backlashStart = start + leftBracket.length + label.length;
  return [h("span.".concat(className), leftBracketContent), h("span.".concat(CLASS_OR_ID['AG_REFERENCE_LABEL']), labelContent)].concat(Object(toConsumableArray["a" /* default */])(this.backlashInToken(h, backlash, CLASS_OR_ID['AG_GRAY'], backlashStart, token)), [h("span.".concat(className), middleContent), h("span.".concat(CLASS_OR_ID['AG_REFERENCE_TITLE']), titleContent), h("span.".concat(className), rightContent)]);
}
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/htmlRuby.js


function htmlRuby(h, cursor, block, token, outerClass) {
  var className = this.getClassName(outerClass, block, token, cursor);
  var children = token.children;
  var _token$range = token.range,
      start = _token$range.start,
      end = _token$range.end;
  var content = this.highlight(h, block, start, end, token);
  var vNode = htmlToVNode(token.raw);
  var previewSelector = "span.".concat(CLASS_OR_ID['AG_RUBY_RENDER']);
  return children ? [h("span.".concat(className, ".").concat(CLASS_OR_ID['AG_RUBY']), [h("span.".concat(CLASS_OR_ID['AG_INLINE_RULE'], ".").concat(CLASS_OR_ID['AG_RUBY_TEXT']), content), h(previewSelector, {
    attrs: {
      contenteditable: 'false'
    }
  }, vNode)]) // if children is empty string, no need to render ruby charactors...
  ] : [h("span.".concat(className, ".").concat(CLASS_OR_ID['AG_RUBY']), [h("span.".concat(CLASS_OR_ID['AG_INLINE_RULE'], ".").concat(CLASS_OR_ID['AG_RUBY_TEXT']), content)])];
}
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/referenceLink.js




function referenceLink(h, cursor, block, token, outerClass) {
  var _this = this;

  var className = this.getClassName(outerClass, block, token, cursor);
  var labelClass = className === CLASS_OR_ID['AG_GRAY'] ? CLASS_OR_ID['AG_REFERENCE_LABEL'] : className;
  var _token$range = token.range,
      start = _token$range.start,
      end = _token$range.end;
  var anchor = token.anchor,
      children = token.children,
      backlash = token.backlash,
      isFullLink = token.isFullLink,
      label = token.label;
  var MARKER = '[';
  var key = (label + backlash.second).toLowerCase();
  var backlashStart = start + MARKER.length + anchor.length;
  var content = [].concat(Object(toConsumableArray["a" /* default */])(children.reduce(function (acc, to) {
    var chunk = _this[snakeToCamel(to.type)](h, cursor, block, to, className);

    return Array.isArray(chunk) ? [].concat(Object(toConsumableArray["a" /* default */])(acc), Object(toConsumableArray["a" /* default */])(chunk)) : [].concat(Object(toConsumableArray["a" /* default */])(acc), [chunk]);
  }, [])), Object(toConsumableArray["a" /* default */])(this.backlashInToken(h, backlash.first, className, backlashStart, token)));

  var _this$labels$get = this.labels.get(key),
      href = _this$labels$get.href,
      title = _this$labels$get.title;

  var startMarker = this.highlight(h, block, start, start + MARKER.length, token);
  var endMarker = this.highlight(h, block, start + MARKER.length + anchor.length + backlash.first.length, end, token);
  var anchorSelector = href ? "a.".concat(CLASS_OR_ID['AG_INLINE_RULE']) : "span.".concat(CLASS_OR_ID['AG_REFERENCE_LINK']);
  var dataSet = {
    props: {
      title: title
    }
  };

  if (href) {
    Object.assign(dataSet.props, {
      href: href
    });
  }

  if (isFullLink) {
    var labelContent = this.highlight(h, block, start + 3 * MARKER.length + anchor.length + backlash.first.length, end - MARKER.length - backlash.second.length, token);
    var middleMarker = this.highlight(h, block, start + MARKER.length + anchor.length + backlash.first.length, start + 3 * MARKER.length + anchor.length + backlash.first.length, token);
    var lastMarker = this.highlight(h, block, end - MARKER.length, end, token);
    var secondBacklashStart = end - MARKER.length - backlash.second.length;
    return [h("span.".concat(className), startMarker), h(anchorSelector, dataSet, content), h("span.".concat(className), middleMarker), h("span.".concat(labelClass), labelContent)].concat(Object(toConsumableArray["a" /* default */])(this.backlashInToken(h, backlash.second, className, secondBacklashStart, token)), [h("span.".concat(className), lastMarker)]);
  } else {
    return [h("span.".concat(className), startMarker), h(anchorSelector, dataSet, content), h("span.".concat(className), endMarker)];
  }
}
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/referenceImage.js

 // reference_image

function referenceImage_htmlImage(h, cursor, block, token, outerClass) {
  var className = this.getClassName(outerClass, block, token, cursor);
  var imageClass = CLASS_OR_ID['AG_IMAGE_MARKED_TEXT'];
  var _token$range = token.range,
      start = _token$range.start,
      end = _token$range.end;
  var tag = this.highlight(h, block, start, end, token);
  var label = token.label,
      backlash = token.backlash,
      alt = token.alt;
  var rawSrc = label + backlash.second;
  var href = '';
  var title = '';

  if (this.labels.has(rawSrc.toLowerCase())) {
    var _this$labels$get = this.labels.get(rawSrc.toLowerCase());

    href = _this$labels$get.href;
    title = _this$labels$get.title;
  }

  var imageInfo = utils_getImageInfo(href);
  var src = imageInfo.src;
  var id;
  var isSuccess;
  var selector;

  if (src) {
    var _this$loadImageAsync = this.loadImageAsync(imageInfo, alt, className, CLASS_OR_ID['AG_COPY_REMOVE']);

    id = _this$loadImageAsync.id;
    isSuccess = _this$loadImageAsync.isSuccess;
  }

  selector = id ? "span#".concat(id, ".").concat(imageClass) : "span.".concat(imageClass);
  selector += ".".concat(CLASS_OR_ID['AG_OUTPUT_REMOVE']);

  if (isSuccess) {
    selector += ".".concat(className);
  } else {
    selector += ".".concat(CLASS_OR_ID['AG_IMAGE_FAIL']);
  }

  return isSuccess ? [h(selector, tag), h("img.".concat(CLASS_OR_ID['AG_COPY_REMOVE']), {
    props: {
      alt: alt,
      src: src,
      title: title
    }
  })] : [h(selector, tag)];
}
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderInlines/index.js





























/* harmony default export */ var renderInlines = ({
  backlashInToken: backlashInToken,
  backlash: backlash_backlash,
  highlight: highlight_highlight,
  header: header_header,
  link: link_link,
  htmlTag: htmlTag,
  hr: hr_hr,
  tailHeader: tailHeader,
  hardLineBreak: softLineBreak,
  softLineBreak: hardLineBreak,
  codeFense: codeFense,
  inlineMath: displayMath,
  autoLink: autoLink,
  loadImageAsync: loadImageAsync,
  htmlImage: htmlImage,
  image: image_image,
  delEmStrongFac: delEmStrongFac,
  emoji: emoji_emoji,
  inlineCode: inlineCode,
  text: text_text,
  del: del,
  em: em,
  strong: strong,
  htmlEscape: htmlEscape,
  multipleMath: multipleMath,
  referenceDefinition: referenceDefinition,
  htmlRuby: htmlRuby,
  referenceLink: referenceLink,
  referenceImage: referenceImage_htmlImage
});
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderBlock/renderBlock.js
/**
 * [renderBlock render one block, no matter it is a container block or text block]
 */
function renderBlock(block, activeBlocks, matches) {
  var useCache = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;
  var method = Array.isArray(block.children) && block.children.length > 0 ? 'renderContainerBlock' : 'renderLeafBlock';
  return this[method](block, activeBlocks, matches, useCache);
}
// EXTERNAL MODULE: ./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js
var es7_object_get_own_property_descriptors = __webpack_require__("8e6e");

// EXTERNAL MODULE: ./node_modules/prismjs/prism.js
var prism = __webpack_require__("c197");
var prism_default = /*#__PURE__*/__webpack_require__.n(prism);

// EXTERNAL MODULE: ./src/muya/lib/prism/languages.json
var languages = __webpack_require__("7f92");

// CONCATENATED MODULE: ./src/muya/lib/prism/loadLanguage.js
















function loadLanguage_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = loadLanguage_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function loadLanguage_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return loadLanguage_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return loadLanguage_arrayLikeToArray(o, minLen); }

function loadLanguage_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }


var loadLanguage_peerDependentsMap = null;
var loadedCache = new Set(['markup', 'css', 'clike', 'javascript']);

function getPeerDependentsMap() {
  var peerDependentsMap = {};
  Object.keys(languages).forEach(function (language) {
    if (language === 'meta') {
      return false;
    }

    if (languages[language].peerDependencies) {
      var peerDependencies = languages[language].peerDependencies;

      if (!Array.isArray(peerDependencies)) {
        peerDependencies = [peerDependencies];
      }

      peerDependencies.forEach(function (peerDependency) {
        if (!peerDependentsMap[peerDependency]) {
          peerDependentsMap[peerDependency] = [];
        }

        peerDependentsMap[peerDependency].push(language);
      });
    }
  });
  return peerDependentsMap;
}

function getPeerDependents(mainLanguage) {
  if (!loadLanguage_peerDependentsMap) {
    loadLanguage_peerDependentsMap = getPeerDependentsMap();
  }

  return loadLanguage_peerDependentsMap[mainLanguage] || [];
} // Look for the origin languge by alias


var loadLanguage_transfromAliasToOrigin = function transfromAliasToOrigin(arr) {
  var result = [];

  var _iterator = loadLanguage_createForOfIteratorHelper(arr),
      _step;

  try {
    var _loop = function _loop() {
      var lang = _step.value;

      if (languages[lang]) {
        result.push(lang);
      } else {
        var language = Object.keys(languages).find(function (name) {
          var l = languages[name];

          if (l.alias) {
            return l.alias === lang || Array.isArray(l.alias) && l.alias.includes(lang);
          }

          return false;
        });

        if (language) {
          result.push(language);
        } else {
          // The lang is not exist, the will handle in `initLoadLanguage`
          result.push(lang);
        }
      }
    };

    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      _loop();
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }

  return result;
};

function initLoadLanguage(Prism) {
  return /*#__PURE__*/function () {
    var _loadLanguages = Object(asyncToGenerator["a" /* default */])( /*#__PURE__*/regeneratorRuntime.mark(function _callee(arr, withoutDependencies) {
      var promises, transformedLangs, _iterator2, _step2, language, results, dependents, _results;

      return regeneratorRuntime.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              // If no argument is passed, load all components
              if (!arr) {
                arr = Object.keys(languages).filter(function (language) {
                  return language !== 'meta';
                });
              }

              if (!(arr && !arr.length)) {
                _context.next = 3;
                break;
              }

              return _context.abrupt("return", Promise.reject('The first parameter should be a list of load languages or single language.'));

            case 3:
              if (!Array.isArray(arr)) {
                arr = [arr];
              }

              promises = [];
              transformedLangs = loadLanguage_transfromAliasToOrigin(arr);
              _iterator2 = loadLanguage_createForOfIteratorHelper(transformedLangs);
              _context.prev = 7;

              _iterator2.s();

            case 9:
              if ((_step2 = _iterator2.n()).done) {
                _context.next = 35;
                break;
              }

              language = _step2.value;

              if (languages[language]) {
                _context.next = 14;
                break;
              }

              promises.push(Promise.resolve({
                lang: language,
                status: 'noexist'
              }));
              return _context.abrupt("continue", 33);

            case 14:
              if (!loadedCache.has(language)) {
                _context.next = 17;
                break;
              }

              promises.push(Promise.resolve({
                lang: language,
                status: 'cached'
              }));
              return _context.abrupt("continue", 33);

            case 17:
              if (!(!withoutDependencies && languages[language].require)) {
                _context.next = 22;
                break;
              }

              _context.next = 20;
              return loadLanguages(languages[language].require);

            case 20:
              results = _context.sent;
              promises.push.apply(promises, Object(toConsumableArray["a" /* default */])(results));

            case 22:
              delete Prism.languages[language];
              _context.next = 25;
              return __webpack_require__("554c")("./prism-" + language);

            case 25:
              loadedCache.add(language);
              promises.push(Promise.resolve({
                status: 'loaded',
                lang: language
              })); // Reload dependents

              dependents = getPeerDependents(language).filter(function (dependent) {
                // If dependent language was already loaded,
                // we want to reload it.
                if (Prism.languages[dependent]) {
                  delete Prism.languages[dependent];
                  return true;
                }

                return false;
              });

              if (!dependents.length) {
                _context.next = 33;
                break;
              }

              _context.next = 31;
              return loadLanguages(dependents, true);

            case 31:
              _results = _context.sent;
              promises.push.apply(promises, Object(toConsumableArray["a" /* default */])(_results));

            case 33:
              _context.next = 9;
              break;

            case 35:
              _context.next = 40;
              break;

            case 37:
              _context.prev = 37;
              _context.t0 = _context["catch"](7);

              _iterator2.e(_context.t0);

            case 40:
              _context.prev = 40;

              _iterator2.f();

              return _context.finish(40);

            case 43:
              return _context.abrupt("return", Promise.all(promises));

            case 44:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[7, 37, 40, 43]]);
    }));

    function loadLanguages(_x, _x2) {
      return _loadLanguages.apply(this, arguments);
    }

    return loadLanguages;
  }();
}

/* harmony default export */ var loadLanguage = (initLoadLanguage);
// CONCATENATED MODULE: ./src/muya/lib/prism/index.js







function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { Object(defineProperty["a" /* default */])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }





var prism_prism = prism_default.a;
window.Prism = prism_default.a;
__webpack_require__.e(/* import() */ "chunk-2d0b92df").then(__webpack_require__.t.bind(null, "329c", 7));
var langs = [];

var prism_loop = function _loop() {
  var name = prism_Object$keys[prism_i];
  var lang = languages[name];
  langs.push(_objectSpread({
    name: name
  }, lang));

  if (lang.alias) {
    if (typeof lang.alias === 'string') {
      langs.push(_objectSpread({
        name: lang.alias
      }, lang));
    } else if (Array.isArray(lang.alias)) {
      langs.push.apply(langs, Object(toConsumableArray["a" /* default */])(lang.alias.map(function (a) {
        return _objectSpread({
          name: a
        }, lang);
      })));
    }
  }
};

for (var prism_i = 0, prism_Object$keys = Object.keys(languages); prism_i < prism_Object$keys.length; prism_i++) {
  prism_loop();
}

var prism_loadLanguage = loadLanguage(prism_default.a);

var prism_search = function search(text) {
  return Object(fuzzaldrin["filter"])(langs, text, {
    key: 'name'
  });
}; // pre load latex and yaml and html for `math block` \ `front matter` and `html block`


prism_loadLanguage('latex');
prism_loadLanguage('yaml');

/* harmony default export */ var lib_prism = (prism_prism);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.string.link.js
var es6_string_link = __webpack_require__("b54a");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.regexp.match.js
var es6_regexp_match = __webpack_require__("4917");

// CONCATENATED MODULE: ./src/muya/lib/parser/utils.js














function utils_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = utils_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function utils_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return utils_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return utils_arrayLikeToArray(o, minLen); }

function utils_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

// ASCII PUNCTUATION character
// export const punctuation = ['!', '"', '#', '$', '%', '&', "'", '(', ')', '*', '+', ',', '-', '.', '/', ':', ';', '<', '=', '>', '?', '@', '[', '\\', ']', '^', '_', '`', '{', '|', '}', '~']

/* eslint-disable no-useless-escape */
var PUNCTUATION_REG = new RegExp(/[!"#$%&'()*+,\-./:;<=>?@\[\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/);
/* eslint-enable no-useless-escape */
// selected from https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes

var WHITELIST_ATTRIBUTES = ['align', 'alt', 'checked', 'class', 'color', 'dir', 'disabled', 'for', 'height', 'hidden', 'href', 'id', 'lang', 'lazyload', 'rel', 'spellcheck', 'src', 'srcset', 'start', 'style', 'target', 'title', 'type', 'value', 'width']; // export const unicodeZsCategory = [
//   '\u0020', '\u00A0', '\u1680', '\u2000', '\u2001', '\u2001',
//   '\u2002', '\u2003', '\u2004', '\u2005', '\u2006', '\u2007',
//   '\u2008', '\u2009', '\u200A', '\u202F', '\u205F', '\u3000'
// ]
// export const space = ['\u0020'] // space
// export const whitespaceCharacter = [
//   ...space, // space
//   '\u0009', // tab
//   '\u000A', // newline
//   '\u000B', // tabulation
//   '\u000C', // form feed
//   '\u000D' // carriage return
// ]
// export const unicodeWhitespaceCharacter = [
//   ...unicodeZsCategory,
//   '\u0009', // tab
//   '\u000D', // carriage return
//   '\u000A', // newline
//   '\u000C' // form feed
// ]

var UNICODE_WHITESPACE_REG = /^\s/;

var validWidthAndHeight = function validWidthAndHeight(value) {
  if (!/^\d{1,}$/.test(value)) return '';
  value = parseInt(value);
  return value >= 0 ? value : '';
};

var lowerPriority = function lowerPriority(src, offset, rules) {
  var i;
  var ignoreIndex = [];

  for (i = 0; i < offset; i++) {
    if (ignoreIndex.includes(i)) {
      continue;
    }

    var text = src.substring(i);

    for (var _i = 0, _Object$keys = Object.keys(rules); _i < _Object$keys.length; _i++) {
      var rule = _Object$keys[_i];
      var to = rules[rule].exec(text);

      if (to && to[0].length <= offset - i) {
        ignoreIndex.push(i + to[0].length - 1);
      }

      if (to && to[0].length > offset - i) {
        return false;
      }
    }
  }

  return true;
};
var getAttributes = function getAttributes(html) {
  var parser = new DOMParser();
  var doc = parser.parseFromString(html, 'text/html');
  var target = doc.querySelector('body').firstElementChild;
  if (!target) return null;
  var attrs = {};

  var _iterator = utils_createForOfIteratorHelper(target.getAttributeNames()),
      _step;

  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var attr = _step.value;
      if (!WHITELIST_ATTRIBUTES.includes(attr)) continue;

      if (/width|height/.test(attr)) {
        attrs[attr] = validWidthAndHeight(target.getAttribute(attr));
      } else {
        attrs[attr] = target.getAttribute(attr);
      }
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }

  return attrs;
};
var parseSrcAndTitle = function parseSrcAndTitle() {
  var text = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
  var parts = text.split(/\s+/);

  if (parts.length === 1) {
    return {
      src: text.trim(),
      title: ''
    };
  }

  var rawTitle = parts.pop();
  var src = '';
  var TITLE_REG = /^('|")(.*?)\1$/; // we only support use `'` and `"` to indicate a title now.

  var title = '';

  if (rawTitle && TITLE_REG.test(rawTitle)) {
    title = rawTitle.replace(TITLE_REG, '$2');
  }

  if (title) {
    src = text.substring(0, text.length - rawTitle.length).trim();
  } else {
    src = text.trim();
  }

  return {
    src: src,
    title: title
  };
};

var canOpenEmphasis = function canOpenEmphasis(src, marker, pending) {
  var precededChar = pending.charAt(pending.length - 1) || '\n';
  var followedChar = src[marker.length]; // not followed by Unicode whitespace, 

  if (UNICODE_WHITESPACE_REG.test(followedChar)) {
    return false;
  } // and either (2a) not followed by a punctuation character,
  // or (2b) followed by a punctuation character and preceded by Unicode whitespace or a punctuation character.
  // For purposes of this definition, the beginning and the end of the line count as Unicode whitespace.


  if (PUNCTUATION_REG.test(followedChar) && !(UNICODE_WHITESPACE_REG.test(precededChar) || PUNCTUATION_REG.test(precededChar))) {
    return false;
  }

  if (/_/.test(marker) && !(UNICODE_WHITESPACE_REG.test(precededChar) || PUNCTUATION_REG.test(precededChar))) {
    return false;
  }

  return true;
};

var canCloseEmphasis = function canCloseEmphasis(src, offset, marker) {
  var precededChar = src[offset - marker.length - 1];
  var followedChar = src[offset] || '\n'; // not preceded by Unicode whitespace, 

  if (UNICODE_WHITESPACE_REG.test(precededChar)) {
    return false;
  } // either (2a) not preceded by a punctuation character,
  // or (2b) preceded by a punctuation character and followed by Unicode whitespace or a punctuation character.


  if (PUNCTUATION_REG.test(precededChar) && !(UNICODE_WHITESPACE_REG.test(followedChar) || PUNCTUATION_REG.test(followedChar))) {
    return false;
  }

  if (/_/.test(marker) && !(UNICODE_WHITESPACE_REG.test(followedChar) || PUNCTUATION_REG.test(followedChar))) {
    return false;
  }

  return true;
};

var validateEmphasize = function validateEmphasize(src, offset, marker, pending, rules) {
  if (!canOpenEmphasis(src, marker, pending)) {
    return false;
  }

  if (!canCloseEmphasis(src, offset, marker)) {
    return false;
  }
  /**
   * 16.When there are two potential emphasis or strong emphasis spans with the same closing delimiter,
   * the shorter one (the one that opens later) takes precedence. Thus, for example, **foo **bar baz**
   * is parsed as **foo <strong>bar baz</strong> rather than <strong>foo **bar baz</strong>.
   */


  var mLen = marker.length;
  var emphasizeText = src.substring(mLen, offset - mLen);
  var SHORTER_REG = new RegExp(" \\".concat(marker.split('').join('\\'), "[^\\").concat(marker.charAt(0), "]"));
  var CLOSE_REG = new RegExp("[^\\".concat(marker.charAt(0), "]\\").concat(marker.split('').join('\\')));

  if (emphasizeText.match(SHORTER_REG) && !emphasizeText.match(CLOSE_REG)) {
    return false;
  }
  /**
   * 17.Inline code spans, links, images, and HTML tags group more tightly than emphasis.
   * So, when there is a choice between an interpretation that contains one of these elements
   * and one that does not, the former always wins. Thus, for example, *[foo*](bar) is parsed
   * as *<a href="bar">foo*</a> rather than as <em>[foo</em>](bar).
   */


  return lowerPriority(src, offset, rules);
};
// CONCATENATED MODULE: ./src/muya/lib/parser/index.js










function parser_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = parser_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function parser_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return parser_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return parser_arrayLikeToArray(o, minLen); }

function parser_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }



 // const CAN_NEST_RULES = ['strong', 'em', 'link', 'del', 'a_link', 'reference_link', 'html_tag']
// disallowed html tags in https://github.github.com/gfm/#raw-html

var disallowedHtmlTag = /(?:title|textarea|style|xmp|iframe|noembed|noframes|script|plaintext)/i;
var validateRules = Object.assign({}, rules_inlineRules);
delete validateRules.em;
delete validateRules.strong;
delete validateRules['tail_header'];
delete validateRules['backlash'];

var parser_tokenizerFac = function tokenizerFac(src, beginRules, inlineRules) {
  var pos = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;
  var top = arguments.length > 4 ? arguments[4] : undefined;
  var labels = arguments.length > 5 ? arguments[5] : undefined;
  var tokens = [];
  var pending = '';
  var pendingStartPos = pos;

  var pushPending = function pushPending() {
    if (pending) {
      tokens.push({
        type: 'text',
        raw: pending,
        content: pending,
        range: {
          start: pendingStartPos,
          end: pos
        }
      });
    }

    pendingStartPos = pos;
    pending = '';
  };

  if (beginRules && pos === 0) {
    var beginRuleList = ['header', 'hr', 'code_fense', 'multiple_math'];

    for (var _i = 0, _beginRuleList = beginRuleList; _i < _beginRuleList.length; _i++) {
      var ruleName = _beginRuleList[_i];
      var to = beginRules[ruleName].exec(src);

      if (to) {
        var token = {
          type: ruleName,
          raw: to[0],
          parent: tokens,
          marker: to[1],
          content: to[2] || '',
          backlash: to[3] || '',
          range: {
            start: pos,
            end: pos + to[0].length
          }
        };
        tokens.push(token);
        src = src.substring(to[0].length);
        pos = pos + to[0].length;
        break;
      }
    }

    var def = beginRules['reference_definition'].exec(src);

    if (def && isLengthEven(def[3])) {
      var _token = {
        type: 'reference_definition',
        parent: tokens,
        leftBracket: def[1],
        label: def[2],
        backlash: def[3] || '',
        rightBracket: def[4],
        leftHrefMarker: def[5] || '',
        href: def[6],
        rightHrefMarker: def[7] || '',
        leftTitlespace: def[8],
        titleMarker: def[9] || '',
        title: def[10] || '',
        rightTitleSpace: def[11] || '',
        raw: def[0],
        range: {
          start: pos,
          end: pos + def[0].length
        }
      };
      tokens.push(_token);
      src = src.substring(def[0].length);
      pos = pos + def[0].length;
    }
  }

  while (src.length) {
    // backlash
    var backTo = inlineRules.backlash.exec(src);

    if (backTo) {
      pushPending();
      tokens.push({
        type: 'backlash',
        raw: backTo[1],
        marker: backTo[1],
        parent: tokens,
        content: '',
        range: {
          start: pos,
          end: pos + backTo[1].length
        }
      });
      pending += pending + backTo[2];
      pendingStartPos = pos + backTo[1].length;
      src = src.substring(backTo[0].length);
      pos = pos + backTo[0].length;
      continue;
    } // strong | em


    var emRules = ['strong', 'em'];
    var inChunk = void 0;

    for (var _i2 = 0, _emRules = emRules; _i2 < _emRules.length; _i2++) {
      var rule = _emRules[_i2];

      var _to = inlineRules[rule].exec(src);

      if (_to && isLengthEven(_to[3])) {
        var isValid = validateEmphasize(src, _to[0].length, _to[1], pending, validateRules);

        if (isValid) {
          inChunk = true;
          pushPending();
          var range = {
            start: pos,
            end: pos + _to[0].length
          };
          var marker = _to[1];
          tokens.push({
            type: rule,
            raw: _to[0],
            range: range,
            marker: marker,
            parent: tokens,
            children: tokenizerFac(_to[2], undefined, inlineRules, pos + _to[1].length, false, labels),
            backlash: _to[3]
          });
          src = src.substring(_to[0].length);
          pos = pos + _to[0].length;
        }

        break;
      }
    }

    if (inChunk) continue; // strong | em | emoji | inline_code | del | inline_math

    var chunks = ['inline_code', 'del', 'emoji', 'inline_math'];

    for (var _i3 = 0, _chunks = chunks; _i3 < _chunks.length; _i3++) {
      var _rule = _chunks[_i3];

      var _to2 = inlineRules[_rule].exec(src);

      if (_to2 && isLengthEven(_to2[3])) {
        if (_rule === 'emoji' && !lowerPriority(src, _to2[0].length, validateRules)) break;
        inChunk = true;
        pushPending();
        var _range = {
          start: pos,
          end: pos + _to2[0].length
        };
        var _marker = _to2[1];

        if (_rule === 'inline_code' || _rule === 'emoji' || _rule === 'inline_math') {
          tokens.push({
            type: _rule,
            raw: _to2[0],
            range: _range,
            marker: _marker,
            parent: tokens,
            content: _to2[2],
            backlash: _to2[3]
          });
        } else {
          tokens.push({
            type: _rule,
            raw: _to2[0],
            range: _range,
            marker: _marker,
            parent: tokens,
            children: tokenizerFac(_to2[2], undefined, inlineRules, pos + _to2[1].length, false, labels),
            backlash: _to2[3]
          });
        }

        src = src.substring(_to2[0].length);
        pos = pos + _to2[0].length;
        break;
      }
    }

    if (inChunk) continue; // image

    var imageTo = inlineRules.image.exec(src);

    if (imageTo && isLengthEven(imageTo[3]) && isLengthEven(imageTo[5])) {
      var _parseSrcAndTitle = parseSrcAndTitle(imageTo[4]),
          imageSrc = _parseSrcAndTitle.src,
          title = _parseSrcAndTitle.title;

      pushPending();
      tokens.push({
        type: 'image',
        raw: imageTo[0],
        marker: imageTo[1],
        srcAndTitle: imageTo[4],
        src: imageSrc,
        title: title,
        parent: tokens,
        range: {
          start: pos,
          end: pos + imageTo[0].length
        },
        alt: imageTo[2],
        backlash: {
          first: imageTo[3],
          second: imageTo[5]
        }
      });
      src = src.substring(imageTo[0].length);
      pos = pos + imageTo[0].length;
      continue;
    } // link


    var linkTo = inlineRules.link.exec(src);

    if (linkTo && isLengthEven(linkTo[3]) && isLengthEven(linkTo[5])) {
      var _parseSrcAndTitle2 = parseSrcAndTitle(linkTo[4]),
          href = _parseSrcAndTitle2.src,
          _title = _parseSrcAndTitle2.title;

      pushPending();
      tokens.push({
        type: 'link',
        raw: linkTo[0],
        marker: linkTo[1],
        hrefAndTitle: linkTo[4],
        href: href,
        title: _title,
        parent: tokens,
        anchor: linkTo[2],
        range: {
          start: pos,
          end: pos + linkTo[0].length
        },
        children: tokenizerFac(linkTo[2], undefined, inlineRules, pos + linkTo[1].length, false, labels),
        backlash: {
          first: linkTo[3],
          second: linkTo[5]
        }
      });
      src = src.substring(linkTo[0].length);
      pos = pos + linkTo[0].length;
      continue;
    }

    var rLinkTo = inlineRules['reference_link'].exec(src);

    if (rLinkTo && labels.has(rLinkTo[3] || rLinkTo[1]) && isLengthEven(rLinkTo[2]) && isLengthEven(rLinkTo[4])) {
      pushPending();
      tokens.push({
        type: 'reference_link',
        raw: rLinkTo[0],
        isFullLink: !!rLinkTo[3],
        parent: tokens,
        anchor: rLinkTo[1],
        backlash: {
          first: rLinkTo[2],
          second: rLinkTo[4] || ''
        },
        label: rLinkTo[3] || rLinkTo[1],
        range: {
          start: pos,
          end: pos + rLinkTo[0].length
        },
        children: tokenizerFac(rLinkTo[1], undefined, inlineRules, pos + 1, false, labels)
      });
      src = src.substring(rLinkTo[0].length);
      pos = pos + rLinkTo[0].length;
      continue;
    }

    var rImageTo = inlineRules['reference_image'].exec(src);

    if (rImageTo && labels.has(rImageTo[3] || rImageTo[1]) && isLengthEven(rImageTo[2]) && isLengthEven(rImageTo[4])) {
      pushPending();
      tokens.push({
        type: 'reference_image',
        raw: rImageTo[0],
        isFullLink: !!rImageTo[3],
        parent: tokens,
        alt: rImageTo[1],
        backlash: {
          first: rImageTo[2],
          second: rImageTo[4] || ''
        },
        label: rImageTo[3] || rImageTo[1],
        range: {
          start: pos,
          end: pos + rImageTo[0].length
        }
      });
      src = src.substring(rImageTo[0].length);
      pos = pos + rImageTo[0].length;
      continue;
    } // html escape


    var htmlEscapeTo = inlineRules['html_escape'].exec(src);

    if (htmlEscapeTo) {
      var len = htmlEscapeTo[0].length;
      pushPending();
      tokens.push({
        type: 'html_escape',
        raw: htmlEscapeTo[0],
        escapeCharacter: htmlEscapeTo[1],
        parent: tokens,
        range: {
          start: pos,
          end: pos + len
        }
      });
      src = src.substring(len);
      pos = pos + len;
      continue;
    } // html-tag


    var htmlTo = inlineRules['html_tag'].exec(src);
    var attrs = void 0; // handle comment

    if (htmlTo && htmlTo[1] && !htmlTo[3]) {
      var _len = htmlTo[0].length;
      pushPending();
      tokens.push({
        type: 'html_tag',
        raw: htmlTo[0],
        tag: '<!---->',
        openTag: htmlTo[1],
        parent: tokens,
        attrs: {},
        range: {
          start: pos,
          end: pos + _len
        }
      });
      src = src.substring(_len);
      pos = pos + _len;
      continue;
    }

    if (htmlTo && !disallowedHtmlTag.test(htmlTo[3]) && (attrs = getAttributes(htmlTo[0]))) {
      var tag = htmlTo[3];
      var html = htmlTo[0];
      var _len2 = htmlTo[0].length;
      pushPending();
      tokens.push({
        type: 'html_tag',
        raw: html,
        tag: tag,
        openTag: htmlTo[2],
        closeTag: htmlTo[5],
        parent: tokens,
        attrs: attrs,
        content: htmlTo[4],
        children: htmlTo[4] ? tokenizerFac(htmlTo[4], undefined, inlineRules, pos + htmlTo[2].length, false, labels) : '',
        range: {
          start: pos,
          end: pos + _len2
        }
      });
      src = src.substring(_len2);
      pos = pos + _len2;
      continue;
    } // auto link


    var autoLTo = inlineRules['auto_link'].exec(src);

    if (autoLTo) {
      pushPending();
      tokens.push({
        type: 'auto_link',
        raw: autoLTo[0],
        href: autoLTo[0],
        parent: tokens,
        range: {
          start: pos,
          end: pos + autoLTo[0].length
        }
      });
      src = src.substring(autoLTo[0].length);
      pos = pos + autoLTo[0].length;
      continue;
    } // soft line break


    var softTo = inlineRules['soft_line_break'].exec(src);

    if (softTo) {
      var _len3 = softTo[0].length;
      pushPending();
      tokens.push({
        type: 'soft_line_break',
        raw: softTo[0],
        lineBreak: softTo[1],
        isAtEnd: softTo.input.length === softTo[0].length,
        parent: tokens,
        range: {
          start: pos,
          end: pos + _len3
        }
      });
      src = src.substring(_len3);
      pos += _len3;
      continue;
    } // hard line break


    var hardTo = inlineRules['hard_line_break'].exec(src);

    if (hardTo) {
      var _len4 = hardTo[0].length;
      pushPending();
      tokens.push({
        type: 'hard_line_break',
        raw: hardTo[0],
        spaces: hardTo[1],
        // The space in hard line break
        lineBreak: hardTo[2],
        // \n
        isAtEnd: hardTo.input.length === hardTo[0].length,
        parent: tokens,
        range: {
          start: pos,
          end: pos + _len4
        }
      });
      src = src.substring(_len4);
      pos += _len4;
      continue;
    } // tail header


    var tailTo = inlineRules['tail_header'].exec(src);

    if (tailTo && top) {
      pushPending();
      tokens.push({
        type: 'tail_header',
        raw: tailTo[1],
        marker: tailTo[1],
        parent: tokens,
        range: {
          start: pos,
          end: pos + tailTo[1].length
        }
      });
      src = src.substring(tailTo[1].length);
      pos += tailTo[1].length;
      continue;
    }

    if (!pending) pendingStartPos = pos;
    pending += src[0];
    src = src.substring(1);
    pos++;
  }

  pushPending();
  return tokens;
};

var parser_tokenizer = function tokenizer(src) {
  var highlights = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
  var hasBeginRules = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
  var labels = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : new Map();
  var tokens = parser_tokenizerFac(src, hasBeginRules ? rules_beginRules : null, rules_inlineRules, 0, true, labels);

  var postTokenizer = function postTokenizer(tokens) {
    var _iterator = parser_createForOfIteratorHelper(tokens),
        _step;

    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var token = _step.value;

        var _iterator2 = parser_createForOfIteratorHelper(highlights),
            _step2;

        try {
          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
            var light = _step2.value;
            var highlight = union(token.range, light);

            if (highlight) {
              if (token.highlights && Array.isArray(token.highlights)) {
                token.highlights.push(highlight);
              } else {
                token.highlights = [highlight];
              }
            }
          }
        } catch (err) {
          _iterator2.e(err);
        } finally {
          _iterator2.f();
        }

        if (token.children && Array.isArray(token.children)) {
          postTokenizer(token.children);
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
  };

  if (highlights.length) {
    postTokenizer(tokens);
  }

  return tokens;
}; // transform `tokens` to text ignore the range of token
// the opposite of tokenizer

var generator = function generator(tokens) {
  var result = '';

  var _iterator3 = parser_createForOfIteratorHelper(tokens),
      _step3;

  try {
    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
      var token = _step3.value;
      result += token.raw;
    }
  } catch (err) {
    _iterator3.e(err);
  } finally {
    _iterator3.f();
  }

  return result;
};
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderBlock/renderLeafBlock.js











function renderLeafBlock_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = renderLeafBlock_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function renderLeafBlock_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return renderLeafBlock_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return renderLeafBlock_arrayLikeToArray(o, minLen); }

function renderLeafBlock_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }







 // todo@jocs any better solutions?

var MARKER_HASK = {
  '<': "%".concat(getLongUniqueId(), "%"),
  '>': "%".concat(getLongUniqueId(), "%"),
  '"': "%".concat(getLongUniqueId(), "%"),
  "'": "%".concat(getLongUniqueId(), "%")
};

var getHighlightHtml = function getHighlightHtml(text, highlights) {
  var escape = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
  var code = '';
  var pos = 0;

  var _iterator = renderLeafBlock_createForOfIteratorHelper(highlights),
      _step;

  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var highlight = _step.value;
      var start = highlight.start,
          end = highlight.end,
          active = highlight.active;
      code += text.substring(pos, start);
      var className = active ? 'ag-highlight' : 'ag-selection';
      code += escape ? "".concat(MARKER_HASK['<'], "span class=").concat(MARKER_HASK['"']).concat(className).concat(MARKER_HASK['"']).concat(MARKER_HASK['>']).concat(text.substring(start, end)).concat(MARKER_HASK['<'], "/span").concat(MARKER_HASK['>']) : "<span class=\"".concat(className, "\">").concat(text.substring(start, end), "</span>");
      pos = end;
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }

  if (pos !== text.length) {
    code += text.substring(pos);
  }

  return code;
};

var hasReferenceToken = function hasReferenceToken(tokens) {
  var result = false;

  var travel = function travel(tokens) {
    var _iterator2 = renderLeafBlock_createForOfIteratorHelper(tokens),
        _step2;

    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        var token = _step2.value;

        if (/reference_image|reference_link/.test(token.type)) {
          result = true;
          break;
        }

        if (Array.isArray(token.children) && token.children.length) {
          travel(token.children);
        }
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }
  };

  travel(tokens);
  return result;
};

function renderLeafBlock(block, activeBlocks, matches) {
  var _this = this;

  var useCache = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;
  var loadMathMap = this.loadMathMap;
  var cursor = this.muya.contentState.cursor;
  var selector = this.getSelector(block, activeBlocks); // highlight search key in block

  var highlights = matches.filter(function (m) {
    return m.key === block.key;
  });
  var text = block.text,
      type = block.type,
      align = block.align,
      checked = block.checked,
      key = block.key,
      lang = block.lang,
      functionType = block.functionType,
      editable = block.editable;
  var data = {
    props: {},
    attrs: {},
    dataset: {},
    style: {}
  };
  var children = '';

  if (text) {
    var tokens = [];

    if (highlights.length === 0 && this.tokenCache.has(text)) {
      tokens = this.tokenCache.get(text);
    } else if (HAS_TEXT_BLOCK_REG.test(type) && functionType !== 'codeLine' && functionType !== 'languageInput') {
      var hasBeginRules = type === 'span';
      tokens = parser_tokenizer(text, highlights, hasBeginRules, this.labels);
      var hasReferenceTokens = hasReferenceToken(tokens);

      if (highlights.length === 0 && useCache && DEVICE_MEMORY >= 4 && !hasReferenceTokens) {
        this.tokenCache.set(text, tokens);
      }
    }

    children = tokens.reduce(function (acc, token) {
      return [].concat(Object(toConsumableArray["a" /* default */])(acc), Object(toConsumableArray["a" /* default */])(_this[snakeToCamel(token.type)](snabbdom_h, cursor, block, token)));
    }, []);
  }

  if (editable === false) {
    Object.assign(data.attrs, {
      contenteditable: 'false'
    });
  }

  if (/th|td/.test(type) && align) {
    Object.assign(data.attrs, {
      style: "text-align:".concat(align)
    });
  } else if (type === 'div') {
    var code = this.codeCache.get(block.preSibling);

    switch (functionType) {
      case 'html':
        {
          selector += ".".concat(CLASS_OR_ID['AG_HTML_PREVIEW']);
          var htmlContent = utils_sanitize(code, PREVIEW_DOMPURIFY_CONFIG); // handle empty html bock

          if (/^<([a-z][a-z\d]*)[^>]*?>(\s*)<\/\1>$/.test(htmlContent.trim())) {
            children = htmlToVNode('<div class="ag-empty">&lt;Empty HTML Block&gt;</div>');
          } else {
            var parser = new DOMParser();
            var doc = parser.parseFromString(htmlContent, 'text/html');
            var imgs = doc.documentElement.querySelectorAll('img');

            var _iterator3 = renderLeafBlock_createForOfIteratorHelper(imgs),
                _step3;

            try {
              for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
                var img = _step3.value;
                var src = img.getAttribute('src');
                var imageInfo = utils_getImageInfo(src);
                img.setAttribute('src', imageInfo.src);
              }
            } catch (err) {
              _iterator3.e(err);
            } finally {
              _iterator3.f();
            }

            children = htmlToVNode(doc.documentElement.querySelector('body').innerHTML);
          }

          break;
        }

      case 'multiplemath':
        {
          var _key = "".concat(code, "_display_math");

          selector += ".".concat(CLASS_OR_ID['AG_CONTAINER_PREVIEW']);

          if (code === '') {
            children = '< Empty Mathematical Formula >';
            selector += ".".concat(CLASS_OR_ID['AG_EMPTY']);
          } else if (loadMathMap.has(_key)) {
            children = loadMathMap.get(_key);
          } else {
            try {
              var html = katex_default.a.renderToString(code, {
                displayMode: true
              });
              children = htmlToVNode(html);
              loadMathMap.set(_key, children);
            } catch (err) {
              children = '< Invalid Mathematical Formula >';
              selector += ".".concat(CLASS_OR_ID['AG_MATH_ERROR']);
            }
          }

          break;
        }

      case 'mermaid':
        {
          selector += ".".concat(CLASS_OR_ID['AG_CONTAINER_PREVIEW']);

          if (code === '') {
            children = '< Empty Mermaid Block >';
            selector += ".".concat(CLASS_OR_ID['AG_EMPTY']);
          } else {
            try {
              mermaid_core_default.a.parse(code);
              children = code;
              this.mermaidCache.add("#".concat(block.key));
            } catch (err) {
              children = '< Invalid Mermaid Codes >';
              selector += ".".concat(CLASS_OR_ID['AG_MATH_ERROR']);
            }
          }

          break;
        }

      case 'flowchart':
      case 'sequence':
      case 'vega-lite':
        {
          selector += ".".concat(CLASS_OR_ID['AG_CONTAINER_PREVIEW']);

          if (code === '') {
            children = '< Empty Diagram Block >';
            selector += ".".concat(CLASS_OR_ID['AG_EMPTY']);
          } else {
            children = '';
            this.diagramCache.set("#".concat(block.key), {
              code: code,
              functionType: functionType
            });
          }

          break;
        }
    }
  } else if (type === 'input') {
    Object.assign(data.attrs, {
      type: 'checkbox'
    });
    selector = "".concat(type, "#").concat(key, ".").concat(CLASS_OR_ID['AG_TASK_LIST_ITEM_CHECKBOX']);

    if (checked) {
      Object.assign(data.attrs, {
        checked: true
      });
      selector += ".".concat(CLASS_OR_ID['AG_CHECKBOX_CHECKED']);
    }

    children = '';
  } else if (type === 'span' && functionType === 'codeLine') {
    var _code = escapeHtml(getHighlightHtml(text, highlights, true)).replace(new RegExp(MARKER_HASK['<'], 'g'), '<').replace(new RegExp(MARKER_HASK['>'], 'g'), '>').replace(new RegExp(MARKER_HASK['"'], 'g'), '"').replace(new RegExp(MARKER_HASK["'"], 'g'), "'"); // transfrom alias to original language


    var transformedLang = loadLanguage_transfromAliasToOrigin([lang])[0];

    if (transformedLang && /\S/.test(_code) && loadedCache.has(transformedLang)) {
      var wrapper = document.createElement('div');
      wrapper.classList.add("language-".concat(transformedLang));
      wrapper.innerHTML = _code;
      lib_prism.highlightElement(wrapper, false, function () {
        var highlightedCode = this.innerHTML;
        selector += ".language-".concat(transformedLang);
        children = htmlToVNode(highlightedCode);
      });
    } else {
      children = htmlToVNode(_code);
    }
  } else if (type === 'span' && functionType === 'languageInput') {
    var _html = getHighlightHtml(text, highlights);

    children = htmlToVNode(_html);
  }

  if (!block.parent) {
    return snabbdom_h(selector, data, [this.renderIcon(block)].concat(Object(toConsumableArray["a" /* default */])(children)));
  } else {
    return snabbdom_h(selector, data, children);
  }
}
// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/table/table@2x.png
var table_2x = __webpack_require__("fc6d");
var table_2x_default = /*#__PURE__*/__webpack_require__.n(table_2x);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/algin_left/algin_left@2x.png
var algin_left_2x = __webpack_require__("63f6");
var algin_left_2x_default = /*#__PURE__*/__webpack_require__.n(algin_left_2x);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/algin_right/algin_right@2x.png
var algin_right_2x = __webpack_require__("f7ab");
var algin_right_2x_default = /*#__PURE__*/__webpack_require__.n(algin_right_2x);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/algin_center/algin_center@2x.png
var algin_center_2x = __webpack_require__("6284");
var algin_center_2x_default = /*#__PURE__*/__webpack_require__.n(algin_center_2x);

// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderBlock/renderToolBar.js
// used for render table tookbar or others.







var TABLE_TOOLS = [{
  label: 'table',
  title: 'Resize Table',
  icon: table_2x_default.a
}, {
  label: 'left',
  title: 'Align Left',
  icon: algin_left_2x_default.a
}, {
  label: 'center',
  title: 'Align Center',
  icon: algin_center_2x_default.a
}, {
  label: 'right',
  title: 'Align Right',
  icon: algin_right_2x_default.a
}, {
  label: 'delete',
  title: 'Delete Table',
  icon: delete_2x_default.a
}];

var renderToolBar_renderToolBar = function renderToolBar(type, tools, activeBlocks) {
  var children = tools.map(function (tool) {
    var label = tool.label,
        title = tool.title,
        icon = tool.icon;
    var align = activeBlocks[0].align;
    var selector = 'li';

    if (align && label === align) {
      selector += '.active';
    }

    var iconVnode = snabbdom_h('i.icon', snabbdom_h("i.icon-".concat(label), {
      style: {
        background: "url(".concat(icon, ") no-repeat"),
        'background-size': '100%'
      }
    }, ''));
    return snabbdom_h(selector, {
      dataset: {
        label: label,
        tooltip: title
      }
    }, iconVnode);
  });
  var selector = "div.ag-tool-".concat(type, ".").concat(CLASS_OR_ID['AG_TOOL_BAR']);
  return snabbdom_h(selector, {
    attrs: {
      contenteditable: false
    }
  }, snabbdom_h('ul', children));
};

var renderTableTools = function renderTableTools(activeBlocks) {
  return renderToolBar_renderToolBar('table', TABLE_TOOLS, activeBlocks);
};
// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/html/2.png
var html_2 = __webpack_require__("8af1");
var html_2_default = /*#__PURE__*/__webpack_require__.n(html_2);

// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderBlock/renderContainerEditIcon.js



var renderContainerEditIcon_renderEditIcon = function renderEditIcon() {
  var selector = "a.".concat(CLASS_OR_ID['AG_CONTAINER_ICON']);
  var iconVnode = snabbdom_h('i.icon', snabbdom_h("i.icon-inner", {
    style: {
      background: "url(".concat(html_2_default.a, ") no-repeat"),
      'background-size': '100%'
    }
  }, ''));
  return snabbdom_h(selector, {
    attrs: {
      contenteditable: 'false'
    }
  }, iconVnode);
};
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderBlock/renderContainerBlock.js




var PRE_BLOCK_HASH = {
  'fencecode': ".".concat(CLASS_OR_ID['AG_FENCE_CODE']),
  'indentcode': ".".concat(CLASS_OR_ID['AG_INDENT_CODE']),
  'html': ".".concat(CLASS_OR_ID['AG_HTML_BLOCK']),
  'frontmatter': ".".concat(CLASS_OR_ID['AG_FRONT_MATTER']),
  'multiplemath': ".".concat(CLASS_OR_ID['AG_MULTIPLE_MATH']),
  'flowchart': ".".concat(CLASS_OR_ID['AG_FLOWCHART']),
  'sequence': ".".concat(CLASS_OR_ID['AG_SEQUENCE']),
  'mermaid': ".".concat(CLASS_OR_ID['AG_MERMAID']),
  'vega-lite': ".".concat(CLASS_OR_ID['AG_VEGA_LITE'])
};
function renderContainerBlock(block, activeBlocks, matches) {
  var _this = this;

  var useCache = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;
  var selector = this.getSelector(block, activeBlocks);
  var type = block.type,
      headingStyle = block.headingStyle,
      editable = block.editable,
      functionType = block.functionType,
      listType = block.listType,
      listItemType = block.listItemType,
      bulletMarkerOrDelimiter = block.bulletMarkerOrDelimiter,
      isLooseListItem = block.isLooseListItem,
      lang = block.lang;
  var children = block.children.map(function (child) {
    return _this.renderBlock(child, activeBlocks, matches, useCache);
  });
  var data = {
    attrs: {},
    dataset: {}
  };

  if (editable === false) {
    Object.assign(data.attrs, {
      contenteditable: 'false'
    });
  }

  if (/code|pre/.test(type) && typeof lang === 'string' && !!lang) {
    selector += ".language-".concat(lang);
  }

  if (/^h/.test(type)) {
    if (/^h\d$/.test(type)) {
      // TODO: This should be the best place to create and update the TOC.
      //       Cache `block.key` and title and update only if necessary.
      Object.assign(data.dataset, {
        head: type
      });
      selector += ".".concat(headingStyle);
    }

    Object.assign(data.dataset, {
      role: type
    });
  } else if (type === 'figure') {
    if (functionType) {
      Object.assign(data.dataset, {
        role: functionType.toUpperCase()
      });

      if (functionType === 'table') {
        children.unshift(renderTableTools(activeBlocks));
      } else {
        children.unshift(renderContainerEditIcon_renderEditIcon());
      }
    }

    if (/html|multiplemath|flowchart|mermaid|sequence|vega-lite/.test(functionType)) {
      selector += ".".concat(CLASS_OR_ID['AG_CONTAINER_BLOCK']);
    }
  } else if (/ul|ol/.test(type) && listType) {
    selector += ".ag-".concat(listType, "-list");

    if (type === 'ol') {
      Object.assign(data.attrs, {
        start: block.start
      });
    }
  } else if (type === 'li' && listItemType) {
    Object.assign(data.dataset, {
      marker: bulletMarkerOrDelimiter
    });
    selector += ".".concat(CLASS_OR_ID['AG_LIST_ITEM']);
    selector += ".ag-".concat(listItemType, "-list-item");
    selector += isLooseListItem ? ".".concat(CLASS_OR_ID['AG_LOOSE_LIST_ITEM']) : ".".concat(CLASS_OR_ID['AG_TIGHT_LIST_ITEM']);
  } else if (type === 'pre') {
    Object.assign(data.dataset, {
      role: functionType
    });
    selector += PRE_BLOCK_HASH[block.functionType];

    if (/html|multiplemath|mermaid|flowchart|wega-lite|sequence/.test(functionType)) {
      var codeBlock = block.children[0];
      var code = codeBlock.children.map(function (line) {
        return line.text;
      }).join('\n');
      this.codeCache.set(block.key, code);
    }
  }

  if (!block.parent) {
    children.unshift(this.renderIcon(block));
  }

  return snabbdom_h(selector, data, children);
}
// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/paragraph/2.png
var paragraph_2 = __webpack_require__("94ec");
var paragraph_2_default = /*#__PURE__*/__webpack_require__.n(paragraph_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/horizontal_line/2.png
var horizontal_line_2 = __webpack_require__("5e6e");
var horizontal_line_2_default = /*#__PURE__*/__webpack_require__.n(horizontal_line_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/front_matter/2.png
var front_matter_2 = __webpack_require__("93ed");
var front_matter_2_default = /*#__PURE__*/__webpack_require__.n(front_matter_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/heading_1/2.png
var heading_1_2 = __webpack_require__("c1ec");
var heading_1_2_default = /*#__PURE__*/__webpack_require__.n(heading_1_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/heading_2/2.png
var heading_2_2 = __webpack_require__("dc27");
var heading_2_2_default = /*#__PURE__*/__webpack_require__.n(heading_2_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/heading_3/2.png
var heading_3_2 = __webpack_require__("76d2");
var heading_3_2_default = /*#__PURE__*/__webpack_require__.n(heading_3_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/heading_4/2.png
var heading_4_2 = __webpack_require__("429e");
var heading_4_2_default = /*#__PURE__*/__webpack_require__.n(heading_4_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/heading_5/2.png
var heading_5_2 = __webpack_require__("3866");
var heading_5_2_default = /*#__PURE__*/__webpack_require__.n(heading_5_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/heading_6/2.png
var heading_6_2 = __webpack_require__("499f");
var heading_6_2_default = /*#__PURE__*/__webpack_require__.n(heading_6_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/new_table/2.png
var new_table_2 = __webpack_require__("f2fc");
var new_table_2_default = /*#__PURE__*/__webpack_require__.n(new_table_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/bullet_list/2.png
var bullet_list_2 = __webpack_require__("31d2");
var bullet_list_2_default = /*#__PURE__*/__webpack_require__.n(bullet_list_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/code/2.png
var code_2 = __webpack_require__("c3ac");
var code_2_default = /*#__PURE__*/__webpack_require__.n(code_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/quote_block/2.png
var quote_block_2 = __webpack_require__("bb64");
var quote_block_2_default = /*#__PURE__*/__webpack_require__.n(quote_block_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/todolist/2.png
var todolist_2 = __webpack_require__("c68f");
var todolist_2_default = /*#__PURE__*/__webpack_require__.n(todolist_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/math/2.png
var math_2 = __webpack_require__("16db");
var math_2_default = /*#__PURE__*/__webpack_require__.n(math_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/order_list/2.png
var order_list_2 = __webpack_require__("a9cf");
var order_list_2_default = /*#__PURE__*/__webpack_require__.n(order_list_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/flowchart/2.png
var flowchart_2 = __webpack_require__("8ad6");
var flowchart_2_default = /*#__PURE__*/__webpack_require__.n(flowchart_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/sequence/2.png
var sequence_2 = __webpack_require__("8df1");
var sequence_2_default = /*#__PURE__*/__webpack_require__.n(sequence_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/mermaid/2.png
var mermaid_2 = __webpack_require__("f423");
var mermaid_2_default = /*#__PURE__*/__webpack_require__.n(mermaid_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/chart/2.png
var chart_2 = __webpack_require__("6c1e");
var chart_2_default = /*#__PURE__*/__webpack_require__.n(chart_2);

// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderBlock/renderIcon.js























var FUNCTION_TYPE_HASH = {
  'mermaid': mermaid_2_default.a,
  'flowchart': flowchart_2_default.a,
  'sequence': sequence_2_default.a,
  'vega-lite': chart_2_default.a,
  'table': new_table_2_default.a,
  'html': html_2_default.a,
  'multiplemath': math_2_default.a,
  'fencecode': code_2_default.a,
  'indentcode': code_2_default.a,
  'frontmatter': front_matter_2_default.a
};
function renderIcon_renderIcon(block) {
  if (block.parent) {
    console.error('Only top most block can render front icon button.');
  }

  var type = block.type,
      functionType = block.functionType,
      listType = block.listType;
  var selector = "a.".concat(CLASS_OR_ID['AG_FRONT_ICON']);
  var icon = null;

  switch (type) {
    case 'p':
      {
        icon = paragraph_2_default.a;
        break;
      }

    case 'figure':
    case 'pre':
      {
        icon = FUNCTION_TYPE_HASH[functionType];

        if (!icon) {
          console.warn("Unhandled functionType ".concat(functionType));
          icon = paragraph_2_default.a;
        }

        break;
      }

    case 'ul':
      {
        if (listType === 'task') {
          icon = todolist_2_default.a;
        } else {
          icon = bullet_list_2_default.a;
        }

        break;
      }

    case 'ol':
      {
        icon = order_list_2_default.a;
        break;
      }

    case 'blockquote':
      {
        icon = quote_block_2_default.a;
        break;
      }

    case 'h1':
      {
        icon = heading_1_2_default.a;
        break;
      }

    case 'h2':
      {
        icon = heading_2_2_default.a;
        break;
      }

    case 'h3':
      {
        icon = heading_3_2_default.a;
        break;
      }

    case 'h4':
      {
        icon = heading_4_2_default.a;
        break;
      }

    case 'h5':
      {
        icon = heading_5_2_default.a;
        break;
      }

    case 'h6':
      {
        icon = heading_6_2_default.a;
        break;
      }

    case 'hr':
      {
        icon = horizontal_line_2_default.a;
        break;
      }

    default:
      icon = paragraph_2_default.a;
      break;
  }

  var iconVnode = snabbdom_h('i.icon', snabbdom_h("i.icon-inner", {
    style: {
      background: "url(".concat(icon, ") no-repeat"),
      'background-size': '100%'
    }
  }, ''));
  return snabbdom_h(selector, {
    attrs: {
      contenteditable: 'false'
    }
  }, iconVnode);
}
// CONCATENATED MODULE: ./src/muya/lib/parser/render/renderBlock/index.js




/* harmony default export */ var render_renderBlock = ({
  renderBlock: renderBlock,
  renderLeafBlock: renderLeafBlock,
  renderContainerBlock: renderContainerBlock,
  renderIcon: renderIcon_renderIcon
});
// CONCATENATED MODULE: ./src/muya/lib/parser/render/index.js
















function render_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = render_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function render_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return render_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return render_arrayLikeToArray(o, minLen); }

function render_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }












var render_StateRender = /*#__PURE__*/function () {
  function StateRender(muya) {
    Object(classCallCheck["a" /* default */])(this, StateRender);

    this.muya = muya;
    this.eventCenter = muya.eventCenter;
    this.codeCache = new Map();
    this.loadImageMap = new Map();
    this.loadMathMap = new Map();
    this.mermaidCache = new Set();
    this.diagramCache = new Map();
    this.tokenCache = new Map();
    this.labels = new Map();
    this.urlMap = new Map();
    this.container = null;
  }

  Object(createClass["a" /* default */])(StateRender, [{
    key: "setContainer",
    value: function setContainer(container) {
      this.container = container;
    } // collect link reference definition

  }, {
    key: "collectLabels",
    value: function collectLabels(blocks) {
      var _this = this;

      this.labels.clear();

      var travel = function travel(block) {
        var text = block.text,
            children = block.children;

        if (children && children.length) {
          children.forEach(function (c) {
            return travel(c);
          });
        } else if (text) {
          var tokens = rules_beginRules['reference_definition'].exec(text);

          if (tokens) {
            var key = (tokens[2] + tokens[3]).toLowerCase();

            if (!_this.labels.has(key)) {
              _this.labels.set(key, {
                href: tokens[6],
                title: tokens[10] || ''
              });
            }
          }
        }
      };

      blocks.forEach(function (b) {
        return travel(b);
      });
    }
  }, {
    key: "checkConflicted",
    value: function checkConflicted(block, token, cursor) {
      var start = cursor.start,
          end = cursor.end;
      var key = block.key;
      var _token$range = token.range,
          tokenStart = _token$range.start,
          tokenEnd = _token$range.end;

      if (key !== start.key && key !== end.key) {
        return false;
      } else if (key === start.key && key !== end.key) {
        return conflict([tokenStart, tokenEnd], [start.offset, start.offset]);
      } else if (key !== start.key && key === end.key) {
        return conflict([tokenStart, tokenEnd], [end.offset, end.offset]);
      } else {
        return conflict([tokenStart, tokenEnd], [start.offset, start.offset]) || conflict([tokenStart, tokenEnd], [end.offset, end.offset]);
      }
    }
  }, {
    key: "getClassName",
    value: function getClassName(outerClass, block, token, cursor) {
      return outerClass || (this.checkConflicted(block, token, cursor) ? CLASS_OR_ID['AG_GRAY'] : CLASS_OR_ID['AG_HIDE']);
    }
  }, {
    key: "getHighlightClassName",
    value: function getHighlightClassName(active) {
      return active ? CLASS_OR_ID['AG_HIGHLIGHT'] : CLASS_OR_ID['AG_SELECTION'];
    }
  }, {
    key: "getSelector",
    value: function getSelector(block, activeBlocks) {
      var _this$muya$contentSta = this.muya.contentState,
          cursor = _this$muya$contentSta.cursor,
          selectedBlock = _this$muya$contentSta.selectedBlock;
      var type = block.type === 'hr' ? 'p' : block.type;
      var isActive = activeBlocks.some(function (b) {
        return b.key === block.key;
      }) || block.key === cursor.start.key;
      var selector = "".concat(type, "#").concat(block.key, ".").concat(CLASS_OR_ID['AG_PARAGRAPH']);

      if (isActive) {
        selector += ".".concat(CLASS_OR_ID['AG_ACTIVE']);
      }

      if (type === 'span') {
        selector += ".ag-".concat(camelToSnake(block.functionType));
      }

      if (!block.parent && selectedBlock && block.key === selectedBlock.key) {
        selector += ".".concat(CLASS_OR_ID['AG_SELECTED']);
      }

      return selector;
    }
  }, {
    key: "renderMermaid",
    value: function renderMermaid() {
      if (this.mermaidCache.size) {
        mermaid_core_default.a.initialize({
          theme: this.muya.options.mermaidTheme
        });
        mermaid_core_default.a.init(undefined, document.querySelectorAll(Array.from(this.mermaidCache).join(', ')));
        this.mermaidCache.clear();
      }
    }
  }, {
    key: "renderDiagram",
    value: function () {
      var _renderDiagram = Object(asyncToGenerator["a" /* default */])( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
        var cache, RENDER_MAP, _iterator, _step, _step$value, key, value, target, code, functionType, render, options, diagram;

        return regeneratorRuntime.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                cache = this.diagramCache;
                RENDER_MAP = {
                  'flowchart': flowchart_js_default.a,
                  'sequence': sequence,
                  'vega-lite': src_embed["a" /* default */]
                };

                if (!cache.size) {
                  _context.next = 40;
                  break;
                }

                _iterator = render_createForOfIteratorHelper(cache.entries());
                _context.prev = 4;

                _iterator.s();

              case 6:
                if ((_step = _iterator.n()).done) {
                  _context.next = 31;
                  break;
                }

                _step$value = Object(slicedToArray["a" /* default */])(_step.value, 2), key = _step$value[0], value = _step$value[1];
                target = document.querySelector(key);
                code = value.code, functionType = value.functionType;
                render = RENDER_MAP[functionType];
                options = {};

                if (functionType === 'sequence') {
                  Object.assign(options, {
                    theme: this.muya.options.sequenceTheme
                  });
                } else if (functionType === 'vega-lite') {
                  Object.assign(options, {
                    actions: false,
                    tooltip: false,
                    renderer: 'svg',
                    theme: this.muya.options.vegaTheme
                  });
                }

                _context.prev = 13;

                if (!(functionType === 'flowchart' || functionType === 'sequence')) {
                  _context.next = 20;
                  break;
                }

                diagram = render.parse(code);
                target.innerHTML = '';
                diagram.drawSVG(target, options);
                _context.next = 23;
                break;

              case 20:
                if (!(functionType === 'vega-lite')) {
                  _context.next = 23;
                  break;
                }

                _context.next = 23;
                return render(key, JSON.parse(code), options);

              case 23:
                _context.next = 29;
                break;

              case 25:
                _context.prev = 25;
                _context.t0 = _context["catch"](13);
                target.innerHTML = "< Invalid ".concat(functionType === 'flowchart' ? 'Flow Chart' : 'Sequence', " Codes >");
                target.classList.add(CLASS_OR_ID['AG_MATH_ERROR']);

              case 29:
                _context.next = 6;
                break;

              case 31:
                _context.next = 36;
                break;

              case 33:
                _context.prev = 33;
                _context.t1 = _context["catch"](4);

                _iterator.e(_context.t1);

              case 36:
                _context.prev = 36;

                _iterator.f();

                return _context.finish(36);

              case 39:
                this.diagramCache.clear();

              case 40:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this, [[4, 33, 36, 39], [13, 25]]);
      }));

      function renderDiagram() {
        return _renderDiagram.apply(this, arguments);
      }

      return renderDiagram;
    }()
  }, {
    key: "render",
    value: function render(blocks, activeBlocks, matches) {
      var _this2 = this;

      var selector = "div#".concat(CLASS_OR_ID['AG_EDITOR_ID']);
      var children = blocks.map(function (block) {
        return _this2.renderBlock(block, activeBlocks, matches, true);
      });
      var newVdom = snabbdom_h(selector, children);
      var rootDom = document.querySelector(selector) || this.container;
      var oldVdom = toVNode(rootDom);
      patch(oldVdom, newVdom);
      this.renderMermaid();
      this.renderDiagram();
      this.codeCache.clear();
    } // Only render the blocks which you updated

  }, {
    key: "partialRender",
    value: function partialRender(blocks, activeBlocks, matches, startKey, endKey) {
      var _this3 = this;

      var cursorOutMostBlock = activeBlocks[activeBlocks.length - 1]; // If cursor is not in render blocks, need to render cursor block independently

      var needRenderCursorBlock = blocks.indexOf(cursorOutMostBlock) === -1;
      var newVnode = snabbdom_h('section', blocks.map(function (block) {
        return _this3.renderBlock(block, activeBlocks, matches);
      }));
      var html = toHTML(newVnode).replace(/^<section>([\s\S]+?)<\/section>$/, '$1');
      var needToRemoved = [];
      var firstOldDom = startKey ? document.querySelector("#".concat(startKey)) : document.querySelector("div#".concat(CLASS_OR_ID['AG_EDITOR_ID'])).firstElementChild;

      if (!firstOldDom) {
        // TODO@Jocs Just for fix #541, Because I'll rewrite block and render method, it will nolonger have this issue.
        return;
      }

      needToRemoved.push(firstOldDom);
      var nextSibling = firstOldDom.nextElementSibling;

      while (nextSibling && nextSibling.id !== endKey) {
        needToRemoved.push(nextSibling);
        nextSibling = nextSibling.nextElementSibling;
      }

      nextSibling && needToRemoved.push(nextSibling);
      firstOldDom.insertAdjacentHTML('beforebegin', html);
      Array.from(needToRemoved).forEach(function (dom) {
        return dom.remove();
      }); // Render cursor block independently

      if (needRenderCursorBlock) {
        var key = cursorOutMostBlock.key;
        var cursorDom = document.querySelector("#".concat(key));

        if (cursorDom) {
          var oldCursorVnode = toVNode(cursorDom);
          var newCursorVnode = this.renderBlock(cursorOutMostBlock, activeBlocks, matches);
          patch(oldCursorVnode, newCursorVnode);
        }
      }

      this.renderMermaid();
      this.renderDiagram();
      this.codeCache.clear();
    }
    /**
     * Only render one block.
     * 
     * @param {object} block 
     * @param {array} activeBlocks 
     * @param {array} matches 
     */

  }, {
    key: "singleRender",
    value: function singleRender(block, activeBlocks, matches) {
      var selector = "#".concat(block.key);
      var newVdom = this.renderBlock(block, activeBlocks, matches, true);
      var rootDom = document.querySelector(selector);
      var oldVdom = toVNode(rootDom);
      patch(oldVdom, newVdom);
      this.renderMermaid();
      this.renderDiagram();
      this.codeCache.clear();
    }
  }]);

  return StateRender;
}();

mixins(render_StateRender, renderInlines, render_renderBlock);
/* harmony default export */ var parser_render = (render_StateRender);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.string.repeat.js
var es6_string_repeat = __webpack_require__("14b9");

// EXTERNAL MODULE: ./node_modules/@babel/runtime-corejs2/helpers/esm/objectWithoutProperties.js + 1 modules
var objectWithoutProperties = __webpack_require__("a8db");

// CONCATENATED MODULE: ./src/muya/lib/contentState/enterCtrl.js







var checkAutoIndent = function checkAutoIndent(text, offset) {
  var pairStr = text.substring(offset - 1, offset + 1);
  return /^(\{\}|\[\]|\(\)|><)$/.test(pairStr);
};

var getIndentSpace = function getIndentSpace(text) {
  var match = /^(\s*)\S/.exec(text);
  return match ? match[1] : '';
};

var enterCtrl_enterCtrl = function enterCtrl(ContentState) {
  // TODO@jocs this function need opti.
  ContentState.prototype.chopBlockByCursor = function (block, key, offset) {
    var newBlock = this.createBlock('p');
    var children = block.children;
    var index = children.findIndex(function (child) {
      return child.key === key;
    });
    var activeLine = this.getBlock(key);
    var text = activeLine.text;
    newBlock.children = children.splice(index + 1);
    newBlock.children.forEach(function (c) {
      return c.parent = newBlock.key;
    });
    children[index].nextSibling = null;

    if (newBlock.children.length) {
      newBlock.children[0].preSibling = null;
    }

    if (offset === 0) {
      this.removeBlock(activeLine, children);
      this.prependChild(newBlock, activeLine);
    } else if (offset < text.length) {
      activeLine.text = text.substring(0, offset);
      var newLine = this.createBlock('span', {
        text: text.substring(offset)
      });
      this.prependChild(newBlock, newLine);
    }

    return newBlock;
  };

  ContentState.prototype.chopBlock = function (block) {
    var _this = this;

    var parent = this.getParent(block);
    var type = parent.type;
    var container = this.createBlock(type);
    var index = this.findIndex(parent.children, block);
    var partChildren = parent.children.splice(index + 1);
    block.nextSibling = null;
    partChildren.forEach(function (b) {
      _this.appendChild(container, b);
    });
    this.insertAfter(container, parent);
    return container;
  };

  ContentState.prototype.createRow = function (row) {
    var trBlock = this.createBlock('tr');
    var len = row.children.length;
    var i;

    for (i = 0; i < len; i++) {
      var tdBlock = this.createBlock('td');
      var preChild = row.children[i];
      tdBlock.column = i;
      tdBlock.align = preChild.align;
      this.appendChild(trBlock, tdBlock);
    }

    return trBlock;
  };

  ContentState.prototype.createBlockLi = function (paragraphInListItem) {
    var liBlock = this.createBlock('li');

    if (!paragraphInListItem) {
      paragraphInListItem = this.createBlockP();
    }

    this.appendChild(liBlock, paragraphInListItem);
    return liBlock;
  };

  ContentState.prototype.createTaskItemBlock = function (paragraphInListItem) {
    var checked = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    var listItem = this.createBlock('li');
    var checkboxInListItem = this.createBlock('input');
    listItem.listItemType = 'task';
    checkboxInListItem.checked = checked;

    if (!paragraphInListItem) {
      paragraphInListItem = this.createBlockP();
    }

    this.appendChild(listItem, checkboxInListItem);
    this.appendChild(listItem, paragraphInListItem);
    return listItem;
  };

  ContentState.prototype.enterInEmptyParagraph = function (block) {
    var _this2 = this;

    if (block.type === 'span') block = this.getParent(block);
    var parent = this.getParent(block);
    var newBlock = null;

    if (parent && /ul|ol|blockquote/.test(parent.type)) {
      newBlock = this.createBlockP();

      if (this.isOnlyChild(block)) {
        this.insertAfter(newBlock, parent);
        this.removeBlock(parent);
      } else if (this.isFirstChild(block)) {
        this.insertBefore(newBlock, parent);
      } else if (this.isLastChild(block)) {
        this.insertAfter(newBlock, parent);
      } else {
        this.chopBlock(block);
        this.insertAfter(newBlock, parent);
      }

      this.removeBlock(block);
    } else if (parent && parent.type === 'li') {
      if (parent.listItemType === 'task') {
        var checked = parent.children[0].checked;
        newBlock = this.createTaskItemBlock(null, checked);
      } else {
        newBlock = this.createBlockLi();
        newBlock.listItemType = parent.listItemType;
        newBlock.bulletMarkerOrDelimiter = parent.bulletMarkerOrDelimiter;
      }

      newBlock.isLooseListItem = parent.isLooseListItem;
      this.insertAfter(newBlock, parent);
      var index = this.findIndex(parent.children, block);
      var blocksInListItem = parent.children.splice(index + 1);
      blocksInListItem.forEach(function (b) {
        return _this2.appendChild(newBlock, b);
      });
      this.removeBlock(block);
      newBlock = newBlock.listItemType === 'task' ? newBlock.children[1] : newBlock.children[0];
    } else {
      newBlock = this.createBlockP();

      if (block.type === 'li') {
        this.insertAfter(newBlock, parent);
        this.removeBlock(block);
      } else {
        this.insertAfter(newBlock, block);
      }
    }

    var key = newBlock.children[0].key;
    var offset = 0;
    this.cursor = {
      start: {
        key: key,
        offset: offset
      },
      end: {
        key: key,
        offset: offset
      }
    };
    return this.partialRender();
  };

  ContentState.prototype.docEnterHandler = function (event) {
    var eventCenter = this.muya.eventCenter;
    var selectedImage = this.selectedImage; // Show image selector when you press Enter key and there is already one image selected.

    if (selectedImage) {
      event.preventDefault();
      event.stopPropagation();

      var imageId = selectedImage.imageId,
          imageInfo = Object(objectWithoutProperties["a" /* default */])(selectedImage, ["imageId"]);

      var imageWrapper = document.querySelector("#".concat(imageId));
      var rect = imageWrapper.getBoundingClientRect();
      var reference = {
        getBoundingClientRect: function getBoundingClientRect() {
          rect.height = 0; // Put image selector bellow the top border of image.

          return rect;
        }
      };
      eventCenter.dispatch('muya-image-selector', {
        reference: reference,
        imageInfo: imageInfo,
        cb: function cb() {}
      });
      this.selectedImage = null;
      return;
    }
  };

  ContentState.prototype.enterHandler = function (event) {
    var _this3 = this;

    var _selection$getCursorR = lib_selection.getCursorRange(),
        start = _selection$getCursorR.start,
        end = _selection$getCursorR.end;

    if (!start || !end) {
      return event.preventDefault();
    }

    var block = this.getBlock(start.key);
    var _block = block,
        text = _block.text;
    var endBlock = this.getBlock(end.key);
    var parent = this.getParent(block);
    event.preventDefault(); // Don't allow new lines in language identifiers (GH#569)

    if (block.functionType && block.functionType === 'languageInput') {
      // Jump inside the code block and update code language if necessary
      this.updateCodeLanguage(block, block.text.trim());
      return;
    } // handle select multiple blocks


    if (start.key !== end.key) {
      var _key = start.key;
      var _offset = start.offset;
      var startRemainText = block.text.substring(0, start.offset);
      var endRemainText = endBlock.text.substring(end.offset);
      block.text = startRemainText + endRemainText;
      this.removeBlocks(block, endBlock);
      this.cursor = {
        start: {
          key: _key,
          offset: _offset
        },
        end: {
          key: _key,
          offset: _offset
        }
      };
      this.partialRender();
      return this.enterHandler(event);
    } // handle select multiple charactors


    if (start.key === end.key && start.offset !== end.offset) {
      var _key2 = start.key;
      var _offset2 = start.offset;
      block.text = block.text.substring(0, start.offset) + block.text.substring(end.offset);
      this.cursor = {
        start: {
          key: _key2,
          offset: _offset2
        },
        end: {
          key: _key2,
          offset: _offset2
        }
      };
      this.partialRender();
      return this.enterHandler(event);
    } // handle `shift + enter` insert `soft line break` or `hard line break`
    // only cursor in `line block` can create `soft line break` and `hard line break`
    // handle line in code block


    if (event.shiftKey && block.type === 'span' && block.functionType === 'paragraphContent') {
      var _offset3 = start.offset;
      var _block2 = block,
          _text = _block2.text,
          _key3 = _block2.key;
      var indent = getIndentSpace(_text);
      block.text = _text.substring(0, _offset3) + '\n' + indent + _text.substring(_offset3);
      _offset3 += 1 + indent.length;
      this.cursor = {
        start: {
          key: _key3,
          offset: _offset3
        },
        end: {
          key: _key3,
          offset: _offset3
        }
      };
      return this.partialRender();
    } else if (block.type === 'span' && block.functionType === 'codeLine') {
      var _block3 = block,
          _text2 = _block3.text;

      var newLineText = _text2.substring(start.offset);

      var autoIndent = checkAutoIndent(_text2, start.offset);

      var _indent = getIndentSpace(_text2);

      block.text = _text2.substring(0, start.offset);
      var newLine = this.createBlock('span', {
        text: "".concat(_indent).concat(newLineText),
        functionType: block.functionType,
        lang: block.lang
      });
      this.insertAfter(newLine, block);
      var _key4 = newLine.key;
      var _offset4 = _indent.length;

      if (autoIndent) {
        var emptyLine = this.createBlock('span', {
          text: _indent + ' '.repeat(this.tabSize)
        });
        emptyLine.functionType = block.functionType;
        emptyLine.lang = block.lang;
        this.insertAfter(emptyLine, block);
        _key4 = emptyLine.key;
        _offset4 = _indent.length + this.tabSize;
      }

      this.cursor = {
        start: {
          key: _key4,
          offset: _offset4
        },
        end: {
          key: _key4,
          offset: _offset4
        }
      };
      return this.partialRender();
    } // Insert `<br/>` in table cell if you want to open a new line.
    // Why not use `soft line break` or `hard line break` ?
    // Becasuse table cell only have one line.


    if (event.shiftKey && /th|td/.test(block.type)) {
      var _block4 = block,
          _text3 = _block4.text,
          _key5 = _block4.key;
      var brTag = '<br/>';
      block.text = _text3.substring(0, start.offset) + brTag + _text3.substring(start.offset);

      var _offset5 = start.offset + brTag.length;

      this.cursor = {
        start: {
          key: _key5,
          offset: _offset5
        },
        end: {
          key: _key5,
          offset: _offset5
        }
      };
      return this.partialRender([block]);
    }

    var getFirstBlockInNextRow = function getFirstBlockInNextRow(row) {
      var nextSibling = _this3.getBlock(row.nextSibling);

      if (!nextSibling) {
        var rowContainer = _this3.getBlock(row.parent);

        var table = _this3.getBlock(rowContainer.parent);

        var figure = _this3.getBlock(table.parent);

        if (rowContainer.type === 'thead') {
          nextSibling = table.children[1];
        } else if (figure.nextSibling) {
          nextSibling = _this3.getBlock(figure.nextSibling);
        } else {
          nextSibling = _this3.createBlockP();

          _this3.insertAfter(nextSibling, figure);
        }
      }

      return _this3.firstInDescendant(nextSibling);
    }; // handle enter in table


    if (/th|td/.test(block.type)) {
      var row = this.getBlock(block.parent);
      var rowContainer = this.getBlock(row.parent);
      var table = this.getBlock(rowContainer.parent);

      if (isOsx && event.metaKey || !isOsx && event.ctrlKey) {
        var nextRow = this.createRow(row);

        if (rowContainer.type === 'thead') {
          var tBody = this.getBlock(rowContainer.nextSibling);
          this.insertBefore(nextRow, tBody.children[0]);
        } else {
          this.insertAfter(nextRow, row);
        }

        table.row++;
      }

      var _getFirstBlockInNextR = getFirstBlockInNextRow(row),
          _key6 = _getFirstBlockInNextR.key;

      var _offset6 = 0;
      this.cursor = {
        start: {
          key: _key6,
          offset: _offset6
        },
        end: {
          key: _key6,
          offset: _offset6
        }
      };
      return this.partialRender();
    }

    if (block.type === 'span') {
      block = parent;
      parent = this.getParent(block);
    }

    var paragraph = document.querySelector("#".concat(block.key));

    if (parent && parent.type === 'li' && this.isOnlyChild(block) || parent && parent.type === 'li' && parent.listItemType === 'task' && parent.children.length === 2 // one `input` and one `p`
    ) {
        block = parent;
        parent = this.getParent(block);
      }

    var left = start.offset;
    var right = text.length - left;
    var type = block.type;
    var newBlock;

    switch (true) {
      case left !== 0 && right !== 0:
        {
          // cursor in the middle
          var _selection$chopHtmlBy = lib_selection.chopHtmlByCursor(paragraph),
              pre = _selection$chopHtmlBy.pre,
              post = _selection$chopHtmlBy.post;

          if (/^h\d$/.test(block.type)) {
            if (block.headingStyle === 'atx') {
              var PREFIX = /^#+/.exec(pre)[0];
              post = "".concat(PREFIX, " ").concat(post);
            }

            block.text = pre;
            newBlock = this.createBlock(type, {
              headingStyle: block.headingStyle
            });
            var headerContent = this.createBlock('span', {
              text: post,
              functionType: block.headingStyle === 'atx' ? 'atxLine' : 'paragraphContent'
            });
            this.appendChild(newBlock, headerContent);

            if (block.marker) {
              newBlock.marker = block.marker;
            }
          } else if (block.type === 'p') {
            newBlock = this.chopBlockByCursor(block, start.key, start.offset);
          } else if (type === 'li') {
            // handle task item
            if (block.listItemType === 'task') {
              var checked = block.children[0].checked; // block.children[0] is input[type=checkbox]

              newBlock = this.chopBlockByCursor(block.children[1], start.key, start.offset);
              newBlock = this.createTaskItemBlock(newBlock, checked);
            } else {
              newBlock = this.chopBlockByCursor(block.children[0], start.key, start.offset);
              newBlock = this.createBlockLi(newBlock);
              newBlock.listItemType = block.listItemType;
              newBlock.bulletMarkerOrDelimiter = block.bulletMarkerOrDelimiter;
            }

            newBlock.isLooseListItem = block.isLooseListItem;
          }

          this.insertAfter(newBlock, block);
          break;
        }

      case left === 0 && right === 0:
        {
          // paragraph is empty
          return this.enterInEmptyParagraph(block);
        }

      case left !== 0 && right === 0:
      case left === 0 && right !== 0:
        {
          // cursor at end of paragraph or at begin of paragraph
          if (type === 'li') {
            if (block.listItemType === 'task') {
              var _checked = block.children[0].checked;
              newBlock = this.createTaskItemBlock(null, _checked);
            } else {
              newBlock = this.createBlockLi();
              newBlock.listItemType = block.listItemType;
              newBlock.bulletMarkerOrDelimiter = block.bulletMarkerOrDelimiter;
            }

            newBlock.isLooseListItem = block.isLooseListItem;
          } else {
            newBlock = this.createBlockP();
          }

          if (left === 0 && right !== 0) {
            this.insertBefore(newBlock, block);
            newBlock = block;
          } else {
            if (block.type === 'p') {
              var lastLine = block.children[block.children.length - 1];

              if (lastLine.text === '') {
                this.removeBlock(lastLine);
              }
            }

            this.insertAfter(newBlock, block);
          }

          break;
        }

      default:
        {
          newBlock = this.createBlockP();
          this.insertAfter(newBlock, block);
          break;
        }
    }

    var getParagraphBlock = function getParagraphBlock(block) {
      if (block.type === 'li') {
        return block.listItemType === 'task' ? block.children[1] : block.children[0];
      } else {
        return block;
      }
    };

    this.codeBlockUpdate(getParagraphBlock(newBlock)); // If block is pre block when updated, need to focus it.

    var preParagraphBlock = getParagraphBlock(block);
    var blockNeedFocus = this.codeBlockUpdate(preParagraphBlock);
    var tableNeedFocus = this.tableBlockUpdate(preParagraphBlock);
    var htmlNeedFocus = this.updateHtmlBlock(preParagraphBlock);
    var mathNeedFocus = this.updateMathBlock(preParagraphBlock);
    var cursorBlock;

    switch (true) {
      case !!blockNeedFocus:
        cursorBlock = block;
        break;

      case !!tableNeedFocus:
        cursorBlock = tableNeedFocus;
        break;

      case !!htmlNeedFocus:
        cursorBlock = htmlNeedFocus.children[0].children[1]; // the second line

        break;

      case !!mathNeedFocus:
        cursorBlock = mathNeedFocus;
        break;

      default:
        cursorBlock = newBlock;
        break;
    }

    cursorBlock = getParagraphBlock(cursorBlock);
    var key = cursorBlock.type === 'p' ? cursorBlock.children[0].key : cursorBlock.key;
    var offset = 0;
    this.cursor = {
      start: {
        key: key,
        offset: offset
      },
      end: {
        key: key,
        offset: offset
      }
    };
    this.partialRender();
  };
};

/* harmony default export */ var contentState_enterCtrl = (enterCtrl_enterCtrl);
// CONCATENATED MODULE: ./src/muya/lib/contentState/updateCtrl.js















function updateCtrl_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = updateCtrl_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function updateCtrl_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return updateCtrl_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return updateCtrl_arrayLikeToArray(o, minLen); }

function updateCtrl_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }




var INLINE_UPDATE_FRAGMENTS = ['(?:^|\n) {0,3}([*+-] {1,4})', // Bullet list
'(?:^|\n)(\\[[x ]{1}\\] {1,4})', // Task list
'(?:^|\n) {0,3}(\\d{1,9}(?:\\.|\\)) {1,4})', // Order list
'(?:^|\n) {0,3}(#{1,6})(?=\\s{1,}|$)', // ATX headings
'^(?:[\\s\\S]+?)\\n {0,3}(\\={3,}|\\-{3,})(?= {1,}|$)', // Setext headings **match from beginning**
'(?:^|\n) {0,3}(>).+', // Block quote
'^( {4,})', // Indent code **match from beginning**
'(?:^|\n) {0,3}((?:\\* *\\* *\\*|- *- *-|_ *_ *_)[ \\*\\-\\_]*)$' // Thematic break
];
var INLINE_UPDATE_REG = new RegExp(INLINE_UPDATE_FRAGMENTS.join('|'), 'i');

var updateCtrl_updateCtrl = function updateCtrl(ContentState) {
  // handle task list item checkbox click
  ContentState.prototype.listItemCheckBoxClick = function (checkbox) {
    var checked = checkbox.checked,
        id = checkbox.id;
    var block = this.getBlock(id);
    block.checked = checked;
    checkbox.classList.toggle(CLASS_OR_ID['AG_CHECKBOX_CHECKED']);
  };

  ContentState.prototype.checkSameMarkerOrDelimiter = function (list, markerOrDelimiter) {
    if (!/ol|ul/.test(list.type)) return false;
    return list.children[0].bulletMarkerOrDelimiter === markerOrDelimiter;
  };

  ContentState.prototype.checkNeedRender = function () {
    var cursor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.cursor;
    var labels = this.stateRender.labels;
    var cStart = cursor.start,
        cEnd = cursor.end,
        anchor = cursor.anchor,
        focus = cursor.focus;
    var startBlock = this.getBlock(cStart ? cStart.key : anchor.key);
    var endBlock = this.getBlock(cEnd ? cEnd.key : focus.key);
    var startOffset = cStart ? cStart.offset : anchor.offset;
    var endOffset = cEnd ? cEnd.offset : focus.offset;
    var NO_NEED_TOKEN_REG = /text|hard_line_break|soft_line_break/;

    var _iterator = updateCtrl_createForOfIteratorHelper(parser_tokenizer(startBlock.text, undefined, undefined, labels)),
        _step;

    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var token = _step.value;
        if (NO_NEED_TOKEN_REG.test(token.type)) continue;
        var _token$range = token.range,
            start = _token$range.start,
            end = _token$range.end;
        var textLen = startBlock.text.length;

        if (conflict([Math.max(0, start - 1), Math.min(textLen, end + 1)], [startOffset, startOffset])) {
          return true;
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }

    var _iterator2 = updateCtrl_createForOfIteratorHelper(parser_tokenizer(endBlock.text, undefined, undefined, labels)),
        _step2;

    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        var _token = _step2.value;
        if (NO_NEED_TOKEN_REG.test(_token.type)) continue;
        var _token$range2 = _token.range,
            _start = _token$range2.start,
            _end = _token$range2.end;
        var _textLen = endBlock.text.length;

        if (conflict([Math.max(0, _start - 1), Math.min(_textLen, _end + 1)], [endOffset, endOffset])) {
          return true;
        }
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }

    return false;
  };
  /**
   * block must be span block.
   */


  ContentState.prototype.checkInlineUpdate = function (block) {
    // table cell can not have blocks in it
    if (/th|td|figure/.test(block.type)) return false;
    if (/codeLine|languageInput/.test(block.functionType)) return false;
    var line = null;
    var _block = block,
        text = _block.text;

    if (block.type === 'span') {
      line = block;
      block = this.getParent(block);
    }

    var listItem = this.getParent(block);

    var _ref = text.match(INLINE_UPDATE_REG) || [],
        _ref2 = Object(slicedToArray["a" /* default */])(_ref, 9),
        match = _ref2[0],
        bullet = _ref2[1],
        tasklist = _ref2[2],
        order = _ref2[3],
        atxHeader = _ref2[4],
        setextHeader = _ref2[5],
        blockquote = _ref2[6],
        indentCode = _ref2[7],
        hr = _ref2[8];

    switch (true) {
      case !!hr && new Set(hr.split('').filter(function (i) {
        return /\S/.test(i);
      })).size === 1:
        return this.updateHr(block, hr, line);

      case !!bullet:
        return this.updateList(block, 'bullet', bullet, line);
      // only `bullet` list item can be update to `task` list item

      case !!tasklist && listItem && listItem.listItemType === 'bullet':
        return this.updateTaskListItem(block, 'tasklist', tasklist);

      case !!order:
        return this.updateList(block, 'order', order, line);

      case !!atxHeader:
        return this.updateAtxHeader(block, atxHeader, line);

      case !!setextHeader:
        return this.updateSetextHeader(block, setextHeader, line);

      case !!blockquote:
        return this.updateBlockQuote(block, line);

      case !!indentCode:
        return this.updateIndentCode(block, line);

      case !match:
      default:
        return this.updateToParagraph(block, line);
    }
  }; // Thematic break


  ContentState.prototype.updateHr = function (block, marker, line) {
    // If the block is already thematic break, no need to update.
    if (block.type === 'hr') return null;
    var text = line.text;
    var lines = text.split('\n');
    var preParagraphLines = [];
    var thematicLine = '';
    var postParagraphLines = [];
    var thematicLineHasPushed = false;

    var _iterator3 = updateCtrl_createForOfIteratorHelper(lines),
        _step3;

    try {
      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
        var l = _step3.value;

        if (/ {0,3}(?:\\* *\\* *\\*|- *- *-|_ *_ *_)[ \\*\\-\\_]*$/.test(l) && !thematicLineHasPushed) {
          thematicLine = l;
          thematicLineHasPushed = true;
        } else if (!thematicLineHasPushed) {
          preParagraphLines.push(l);
        } else {
          postParagraphLines.push(l);
        }
      }
    } catch (err) {
      _iterator3.e(err);
    } finally {
      _iterator3.f();
    }

    var thematicBlock = this.createBlock('hr');
    var thematicLineBlock = this.createBlock('span', {
      text: thematicLine,
      functionType: 'thematicBreakLine'
    });
    this.appendChild(thematicBlock, thematicLineBlock);
    this.insertBefore(thematicBlock, block);

    if (preParagraphLines.length) {
      var preBlock = this.createBlockP(preParagraphLines.join('\n'));
      this.insertBefore(preBlock, thematicBlock);
    }

    if (postParagraphLines.length) {
      var postBlock = this.createBlockP(postParagraphLines.join('\n'));
      this.insertAfter(postBlock, thematicBlock);
    }

    this.removeBlock(block);
    var _this$cursor = this.cursor,
        start = _this$cursor.start,
        end = _this$cursor.end;
    var key = thematicBlock.children[0].key;
    this.cursor = {
      start: {
        key: key,
        offset: start.offset
      },
      end: {
        key: key,
        offset: end.offset
      }
    };
    return thematicBlock;
  };

  ContentState.prototype.updateList = function (block, type) {
    var _this = this;

    var marker = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';
    var line = arguments.length > 3 ? arguments[3] : undefined;
    var cleanMarker = marker ? marker.trim() : null;
    var preferLooseListItem = this.muya.options.preferLooseListItem;
    var wrapperTag = type === 'order' ? 'ol' : 'ul'; // `bullet` => `ul` and `order` => `ol`

    var _this$cursor2 = this.cursor,
        start = _this$cursor2.start,
        end = _this$cursor2.end;
    var startOffset = start.offset;
    var endOffset = end.offset;
    var newListItemBlock = this.createBlock('li');
    var LIST_ITEM_REG = /^ {0,3}(?:[*+-]|\d{1,9}(?:\.|\))) {0,4}/;
    var text = line.text;
    var lines = text.split('\n');
    var preParagraphLines = [];
    var listItemLines = [];
    var isPushedListItemLine = false;

    if (marker) {
      var _iterator4 = updateCtrl_createForOfIteratorHelper(lines),
          _step4;

      try {
        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
          var l = _step4.value;

          if (LIST_ITEM_REG.test(l) && !isPushedListItemLine) {
            listItemLines.push(l.replace(LIST_ITEM_REG, ''));
            isPushedListItemLine = true;
          } else if (!isPushedListItemLine) {
            preParagraphLines.push(l);
          } else {
            listItemLines.push(l);
          }
        }
      } catch (err) {
        _iterator4.e(err);
      } finally {
        _iterator4.f();
      }
    } else {
      // From front menu click.
      listItemLines = lines;
    }

    var pBlock = this.createBlockP(listItemLines.join('\n'));
    this.insertBefore(pBlock, block);

    if (preParagraphLines.length > 0) {
      var preParagraphBlock = this.createBlockP(preParagraphLines.join('\n'));
      this.insertBefore(preParagraphBlock, pBlock);
    }

    this.removeBlock(block); // important!

    block = pBlock;
    var preSibling = this.getPreSibling(block);
    var nextSibling = this.getNextSibling(block);
    newListItemBlock.listItemType = type;
    newListItemBlock.isLooseListItem = preferLooseListItem;
    var bulletMarkerOrDelimiter;

    if (type === 'order') {
      bulletMarkerOrDelimiter = cleanMarker && cleanMarker.length >= 2 ? cleanMarker.slice(-1) : '.';
    } else {
      var bulletListMarker = this.muya.options.bulletListMarker;
      bulletMarkerOrDelimiter = marker ? marker.charAt(0) : bulletListMarker;
    }

    newListItemBlock.bulletMarkerOrDelimiter = bulletMarkerOrDelimiter; // Special cases for CommonMark 264 and 265: Changing the bullet or ordered list delimiter starts a new list.
    // Same list type or new list

    if (preSibling && this.checkSameMarkerOrDelimiter(preSibling, bulletMarkerOrDelimiter) && nextSibling && this.checkSameMarkerOrDelimiter(nextSibling, bulletMarkerOrDelimiter)) {
      this.appendChild(preSibling, newListItemBlock);
      var partChildren = nextSibling.children.splice(0);
      partChildren.forEach(function (b) {
        return _this.appendChild(preSibling, b);
      });
      this.removeBlock(nextSibling);
      this.removeBlock(block);
      var isLooseListItem = preSibling.children.some(function (c) {
        return c.isLooseListItem;
      });
      preSibling.children.forEach(function (c) {
        return c.isLooseListItem = isLooseListItem;
      });
    } else if (preSibling && this.checkSameMarkerOrDelimiter(preSibling, bulletMarkerOrDelimiter)) {
      this.appendChild(preSibling, newListItemBlock);
      this.removeBlock(block);

      var _isLooseListItem = preSibling.children.some(function (c) {
        return c.isLooseListItem;
      });

      preSibling.children.forEach(function (c) {
        return c.isLooseListItem = _isLooseListItem;
      });
    } else if (nextSibling && this.checkSameMarkerOrDelimiter(nextSibling, bulletMarkerOrDelimiter)) {
      this.insertBefore(newListItemBlock, nextSibling.children[0]);
      this.removeBlock(block);

      var _isLooseListItem2 = nextSibling.children.some(function (c) {
        return c.isLooseListItem;
      });

      nextSibling.children.forEach(function (c) {
        return c.isLooseListItem = _isLooseListItem2;
      });
    } else {
      // Create a new list when changing list type, bullet or list delimiter
      var listBlock = this.createBlock(wrapperTag, {
        listType: type
      });

      if (wrapperTag === 'ol') {
        var _start2 = cleanMarker ? cleanMarker.slice(0, -1) : 1;

        listBlock.start = /^\d+$/.test(_start2) ? _start2 : 1;
      }

      this.appendChild(listBlock, newListItemBlock);
      this.insertBefore(listBlock, block);
      this.removeBlock(block);
    } // key point


    this.appendChild(newListItemBlock, block);
    var TASK_LIST_REG = /^\[[x ]\] {1,4}/i;
    var listItemText = block.children[0].text;
    var key = block.children[0].key;
    var delta = marker.length + preParagraphLines.join('\n').length + 1;
    this.cursor = {
      start: {
        key: key,
        offset: Math.max(0, startOffset - delta)
      },
      end: {
        key: key,
        offset: Math.max(0, endOffset - delta)
      }
    };

    if (TASK_LIST_REG.test(listItemText)) {
      var _ref3 = listItemText.match(INLINE_UPDATE_REG) || [],
          _ref4 = Object(slicedToArray["a" /* default */])(_ref3, 6),
          tasklist = _ref4[2];

      return this.updateTaskListItem(block, 'tasklist', tasklist);
    } else {
      return block;
    }
  };

  ContentState.prototype.updateTaskListItem = function (block, type) {
    var marker = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';
    var preferLooseListItem = this.muya.options.preferLooseListItem;
    var parent = this.getParent(block);
    var grandpa = this.getParent(parent);
    var checked = /\[x\]\s/i.test(marker); // use `i` flag to ignore upper case or lower case

    var checkbox = this.createBlock('input', {
      checked: checked
    });
    var _this$cursor3 = this.cursor,
        start = _this$cursor3.start,
        end = _this$cursor3.end;
    this.insertBefore(checkbox, block);
    block.children[0].text = block.children[0].text.substring(marker.length);
    parent.listItemType = 'task';
    parent.isLooseListItem = preferLooseListItem;
    var taskListWrapper;

    if (this.isOnlyChild(parent)) {
      grandpa.listType = 'task';
    } else if (this.isFirstChild(parent) || this.isLastChild(parent)) {
      taskListWrapper = this.createBlock('ul', {
        listType: 'task'
      });
      this.isFirstChild(parent) ? this.insertBefore(taskListWrapper, grandpa) : this.insertAfter(taskListWrapper, grandpa);
      this.removeBlock(parent);
      this.appendChild(taskListWrapper, parent);
    } else {
      taskListWrapper = this.createBlock('ul', {
        listType: 'task'
      });
      var bulletListWrapper = this.createBlock('ul', {
        listType: 'bullet'
      });
      var preSibling = this.getPreSibling(parent);

      while (preSibling) {
        this.removeBlock(preSibling);

        if (bulletListWrapper.children.length) {
          var firstChild = bulletListWrapper.children[0];
          this.insertBefore(preSibling, firstChild);
        } else {
          this.appendChild(bulletListWrapper, preSibling);
        }

        preSibling = this.getPreSibling(preSibling);
      }

      this.removeBlock(parent);
      this.appendChild(taskListWrapper, parent);
      this.insertBefore(taskListWrapper, grandpa);
      this.insertBefore(bulletListWrapper, taskListWrapper);
    }

    this.cursor = {
      start: {
        key: start.key,
        offset: Math.max(0, start.offset - marker.length)
      },
      end: {
        key: end.key,
        offset: Math.max(0, end.offset - marker.length)
      }
    };
    return taskListWrapper || grandpa;
  }; // ATX heading doesn't support soft line break and hard line break.


  ContentState.prototype.updateAtxHeader = function (block, header, line) {
    var newType = "h".concat(header.length);
    var headingStyle = 'atx';

    if (block.type === newType && block.headingStyle === headingStyle) {
      return null;
    }

    var text = line.text;
    var lines = text.split('\n');
    var preParagraphLines = [];
    var atxLine = '';
    var postParagraphLines = [];
    var atxLineHasPushed = false;

    var _iterator5 = updateCtrl_createForOfIteratorHelper(lines),
        _step5;

    try {
      for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
        var l = _step5.value;

        if (/^ {0,3}#{1,6}(?=\s{1,}|$)/.test(l) && !atxLineHasPushed) {
          atxLine = l;
          atxLineHasPushed = true;
        } else if (!atxLineHasPushed) {
          preParagraphLines.push(l);
        } else {
          postParagraphLines.push(l);
        }
      }
    } catch (err) {
      _iterator5.e(err);
    } finally {
      _iterator5.f();
    }

    var atxBlock = this.createBlock(newType, {
      headingStyle: headingStyle
    });
    var atxLineBlock = this.createBlock('span', {
      text: atxLine,
      functionType: 'atxLine'
    });
    this.appendChild(atxBlock, atxLineBlock);
    this.insertBefore(atxBlock, block);

    if (preParagraphLines.length) {
      var preBlock = this.createBlockP(preParagraphLines.join('\n'));
      this.insertBefore(preBlock, atxBlock);
    }

    if (postParagraphLines.length) {
      var postBlock = this.createBlockP(postParagraphLines.join('\n'));
      this.insertAfter(postBlock, atxBlock);
    }

    this.removeBlock(block);
    var _this$cursor4 = this.cursor,
        start = _this$cursor4.start,
        end = _this$cursor4.end;
    var key = atxBlock.children[0].key;
    this.cursor = {
      start: {
        key: key,
        offset: start.offset
      },
      end: {
        key: key,
        offset: end.offset
      }
    };
    return atxBlock;
  };

  ContentState.prototype.updateSetextHeader = function (block, marker, line) {
    var newType = /=/.test(marker) ? 'h1' : 'h2';
    var headingStyle = 'setext';

    if (block.type === newType && block.headingStyle === headingStyle) {
      return null;
    }

    var text = line.text;
    var lines = text.split('\n');
    var setextLines = [];
    var postParagraphLines = [];
    var setextLineHasPushed = false;

    var _iterator6 = updateCtrl_createForOfIteratorHelper(lines),
        _step6;

    try {
      for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
        var l = _step6.value;

        if (/^ {0,3}(?:={3,}|-{3,})(?= {1,}|$)/.test(l) && !setextLineHasPushed) {
          setextLineHasPushed = true;
        } else if (!setextLineHasPushed) {
          setextLines.push(l);
        } else {
          postParagraphLines.push(l);
        }
      }
    } catch (err) {
      _iterator6.e(err);
    } finally {
      _iterator6.f();
    }

    var setextBlock = this.createBlock(newType, {
      headingStyle: headingStyle,
      marker: marker
    });
    var setextLineBlock = this.createBlock('span', {
      text: setextLines.join('\n'),
      functionType: 'paragraphContent'
    });
    this.appendChild(setextBlock, setextLineBlock);
    this.insertBefore(setextBlock, block);

    if (postParagraphLines.length) {
      var postBlock = this.createBlockP(postParagraphLines.join('\n'));
      this.insertAfter(postBlock, setextBlock);
    }

    this.removeBlock(block);
    var key = setextBlock.children[0].key;
    var offset = setextBlock.children[0].text.length;
    this.cursor = {
      start: {
        key: key,
        offset: offset
      },
      end: {
        key: key,
        offset: offset
      }
    };
    return setextBlock;
  };

  ContentState.prototype.updateBlockQuote = function (block, line) {
    var text = line.text;
    var lines = text.split('\n');
    var preParagraphLines = [];
    var quoteLines = [];
    var quoteLinesHasPushed = false;

    var _iterator7 = updateCtrl_createForOfIteratorHelper(lines),
        _step7;

    try {
      for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {
        var l = _step7.value;

        if (/^ {0,3}>/.test(l) && !quoteLinesHasPushed) {
          quoteLinesHasPushed = true;
          quoteLines.push(l.trimStart().substring(1).trimStart());
        } else if (!quoteLinesHasPushed) {
          preParagraphLines.push(l);
        } else {
          quoteLines.push(l);
        }
      }
    } catch (err) {
      _iterator7.e(err);
    } finally {
      _iterator7.f();
    }

    var quoteParagraphBlock;

    if (/^h\d/.test(block.type)) {
      quoteParagraphBlock = this.createBlock(block.type, {
        headingStyle: block.headingStyle
      });

      if (block.headingStyle === 'setext') {
        quoteParagraphBlock.marker = block.marker;
      }

      var headerContent = this.createBlock('span', {
        text: quoteLines.join('\n'),
        functionType: block.headingStyle === 'setext' ? 'paragraphContent' : 'atxLine'
      });
      this.appendChild(quoteParagraphBlock, headerContent);
    } else {
      quoteParagraphBlock = this.createBlockP(quoteLines.join('\n'));
    }

    var quoteBlock = this.createBlock('blockquote');
    this.appendChild(quoteBlock, quoteParagraphBlock);
    this.insertBefore(quoteBlock, block);

    if (preParagraphLines.length) {
      var preParagraphBlock = this.createBlockP(preParagraphLines.join('\n'));
      this.insertBefore(preParagraphBlock, quoteBlock);
    }

    this.removeBlock(block);
    var key = quoteParagraphBlock.children[0].key;
    var _this$cursor5 = this.cursor,
        start = _this$cursor5.start,
        end = _this$cursor5.end;
    this.cursor = {
      start: {
        key: key,
        offset: start.offset - 1
      },
      end: {
        key: key,
        offset: end.offset - 1
      }
    };
    return quoteBlock;
  };

  ContentState.prototype.updateIndentCode = function (block, line) {
    var _this2 = this;

    var codeBlock = this.createBlock('code', {
      lang: ''
    });
    var inputBlock = this.createBlock('span', {
      functionType: 'languageInput'
    });
    var preBlock = this.createBlock('pre', {
      functionType: 'indentcode',
      lang: ''
    });
    var text = line ? line.text : block.text;
    var lines = text.split('\n');
    var codeLines = [];
    var paragraphLines = [];
    var canBeCodeLine = true;

    var _iterator8 = updateCtrl_createForOfIteratorHelper(lines),
        _step8;

    try {
      for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {
        var l = _step8.value;

        if (/^ {4,}/.test(l) && canBeCodeLine) {
          codeLines.push(l.replace(/^ {4}/, ''));
        } else {
          canBeCodeLine = false;
          paragraphLines.push(l);
        }
      }
    } catch (err) {
      _iterator8.e(err);
    } finally {
      _iterator8.f();
    }

    codeLines.forEach(function (text) {
      var codeLine = _this2.createBlock('span', {
        text: text,
        functionType: 'codeLine',
        lang: ''
      });

      _this2.appendChild(codeBlock, codeLine);
    });
    this.appendChild(preBlock, inputBlock);
    this.appendChild(preBlock, codeBlock);
    this.insertBefore(preBlock, block);

    if (paragraphLines.length > 0 && line) {
      var newLine = this.createBlock('span', {
        text: paragraphLines.join('\n')
      });
      this.insertBefore(newLine, line);
      this.removeBlock(line);
    } else {
      this.removeBlock(block);
    }

    var key = codeBlock.children[0].key;
    var _this$cursor6 = this.cursor,
        start = _this$cursor6.start,
        end = _this$cursor6.end;
    this.cursor = {
      start: {
        key: key,
        offset: start.offset - 4
      },
      end: {
        key: key,
        offset: end.offset - 4
      }
    };
    return preBlock;
  };

  ContentState.prototype.updateToParagraph = function (block, line) {
    if (/^h\d$/.test(block.type) && block.headingStyle === 'setext') {
      return null;
    }

    var newType = 'p';

    if (block.type !== newType) {
      var newBlock = this.createBlockP(line.text);
      this.insertBefore(newBlock, block);
      this.removeBlock(block);
      var _this$cursor7 = this.cursor,
          start = _this$cursor7.start,
          end = _this$cursor7.end;
      var key = newBlock.children[0].key;
      this.cursor = {
        start: {
          key: key,
          offset: start.offset
        },
        end: {
          key: key,
          offset: end.offset
        }
      };
      return block;
    }

    return null;
  };
};

/* harmony default export */ var contentState_updateCtrl = (updateCtrl_updateCtrl);
// CONCATENATED MODULE: ./src/muya/lib/utils/getImageInfo.js


var getImageInfo_getImageInfo = function getImageInfo(image) {
  var paragraph = findNearestParagraph(image);
  var raw = image.getAttribute('data-raw');
  var offset = dom_getOffsetOfParagraph(image, paragraph);
  var tokens = parser_tokenizer(raw);
  var token = tokens[0];
  token.range = {
    start: offset,
    end: offset + raw.length
  };
  return {
    key: paragraph.id,
    token: token,
    imageId: image.id
  };
};
// CONCATENATED MODULE: ./src/muya/lib/contentState/backspaceCtrl.js








function backspaceCtrl_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = backspaceCtrl_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function backspaceCtrl_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return backspaceCtrl_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return backspaceCtrl_arrayLikeToArray(o, minLen); }

function backspaceCtrl_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }






var backspaceCtrl_backspaceCtrl = function backspaceCtrl(ContentState) {
  ContentState.prototype.checkBackspaceCase = function () {
    var node = lib_selection.getSelectionStart();
    var paragraph = findNearestParagraph(node);
    var outMostParagraph = findOutMostParagraph(node);
    var block = this.getBlock(paragraph.id);

    if (block.type === 'span' && block.preSibling) {
      return false;
    }

    if (block.type === 'span') {
      block = this.getParent(block);
    }

    var preBlock = this.getPreSibling(block);
    var outBlock = this.findOutMostBlock(block);
    var parent = this.getParent(block);

    var _selection$getCaretOf = lib_selection.getCaretOffsets(outMostParagraph),
        outLeft = _selection$getCaretOf.left;

    var _selection$getCaretOf2 = lib_selection.getCaretOffsets(paragraph),
        inLeft = _selection$getCaretOf2.left;

    if (parent && parent.type === 'li' && inLeft === 0 && this.isFirstChild(block) || parent && parent.type === 'li' && inLeft === 0 && parent.listItemType === 'task' && preBlock.type === 'input' // handle task item
    ) {
        if (this.isOnlyChild(parent)) {
          /**
           * <ul>
           *   <li>
           *     <p>|text</p>
           *     <p>maybe has other paragraph</p>
           *   </li>
           * <ul>
           * ===>
           * <p>|text</p>
           * <p>maybe has other paragraph</p>
           */
          return {
            type: 'LI',
            info: 'REPLACEMENT'
          };
        } else if (this.isFirstChild(parent)) {
          /**
           * <ul>
           *   <li>
           *     <p>|text</p>
           *     <p>maybe has other paragraph</p>
           *   </li>
           *   <li>
           *     <p>other list item</p>
           *   </li>
           * <ul>
           * ===>
           * <p>|text</p>
           * <p>maybe has other paragraph</p>
           * <ul>
           *   <li>
           *     <p>other list item</p>
           *   </li>
           * <ul>
           */
          return {
            type: 'LI',
            info: 'REMOVE_INSERT_BEFORE'
          };
        } else {
          /**
           * <ul>
           *   <li>
           *     <p>other list item</p>
           *   </li>
           *   <li>
           *     <p>|text</p>
           *     <p>maybe has other paragraph</p>
           *   </li>
           *   <li>
           *     <p>other list item</p>
           *   </li>
           * <ul>
           * ===>
           * <ul>
           *   <li>
           *     <p>other list item</p>
           *     <p>|text</p>
           *     <p>maybe has other paragraph</p>
           *   </li>
           *   <li>
           *     <p>other list item</p>
           *   </li>
           * <ul>
           */
          return {
            type: 'LI',
            info: 'INSERT_PRE_LIST_ITEM'
          };
        }
      }

    if (parent && parent.type === 'blockquote' && inLeft === 0) {
      if (this.isOnlyChild(block)) {
        return {
          type: 'BLOCKQUOTE',
          info: 'REPLACEMENT'
        };
      } else if (this.isFirstChild(block)) {
        return {
          type: 'BLOCKQUOTE',
          info: 'INSERT_BEFORE'
        };
      }
    }

    if (!outBlock.preSibling && outLeft === 0) {
      return {
        type: 'STOP'
      };
    }
  };

  ContentState.prototype.docBackspaceHandler = function (event) {
    // handle delete selected image
    if (this.selectedImage) {
      event.preventDefault();
      return this.deleteImage(this.selectedImage);
    }
  };

  ContentState.prototype.backspaceHandler = function (event) {
    var _this = this;

    var _selection$getCursorR = lib_selection.getCursorRange(),
        start = _selection$getCursorR.start,
        end = _selection$getCursorR.end;

    if (!start || !end) {
      return;
    }

    var startBlock = this.getBlock(start.key);
    var endBlock = this.getBlock(end.key);
    var maybeLastRow = this.getParent(endBlock);
    var startOutmostBlock = this.findOutMostBlock(startBlock);
    var endOutmostBlock = this.findOutMostBlock(endBlock); // Just for fix delete the last `#` or all the atx heading cause error @fixme

    if (start.key === end.key && startBlock.type === 'span' && startBlock.functionType === 'atxLine') {
      if (start.offset === 0 && end.offset === startBlock.text.length || start.offset === end.offset && start.offset === 1 && startBlock.text === '#') {
        event.preventDefault();
        startBlock.text = '';
        this.cursor = {
          start: {
            key: start.key,
            offset: 0
          },
          end: {
            key: end.key,
            offset: 0
          }
        };
        this.updateToParagraph(this.getParent(startBlock), startBlock);
        return this.partialRender();
      }
    } // fix: #897


    var text = startBlock.text;
    var tokens = parser_tokenizer(text);
    var needRender = false;
    var preToken = null;

    var _iterator = backspaceCtrl_createForOfIteratorHelper(tokens),
        _step;

    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var token = _step.value;

        // handle delete the second $ in inline_math.
        if (token.range.end === start.offset && token.type === 'inline_math') {
          needRender = true;
          token.raw = token.raw.substr(0, token.raw.length - 1);
          break;
        } // handle pre token is a <ruby> html tag, need preventdefault.


        if (token.range.start + 1 === start.offset && preToken && preToken.type === 'html_tag' && preToken.tag === 'ruby') {
          needRender = true;
          token.raw = token.raw.substr(1);
          break;
        }

        preToken = token;
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }

    if (needRender) {
      startBlock.text = generator(tokens);
      event.preventDefault();
      start.offset--;
      end.offset--;
      this.cursor = {
        start: start,
        end: end
      };
      return this.partialRender();
    } // fix bug when the first block is table, these two ways will cause bugs.
    // 1. one paragraph bollow table, selectAll, press backspace.
    // 2. select table from the first cell to the last cell, press backsapce.


    if (/th/.test(startBlock.type) && start.offset === 0 && !startBlock.preSibling) {
      if (end.offset === endBlock.text.length && startOutmostBlock === endOutmostBlock && !endBlock.nextSibling && !maybeLastRow.nextSibling || startOutmostBlock !== endOutmostBlock) {
        event.preventDefault(); // need remove the figure block.

        var figureBlock = this.getBlock(this.findFigure(startBlock)); // if table is the only block, need create a p block.

        var p = this.createBlockP(endBlock.text.substring(end.offset));
        this.insertBefore(p, figureBlock);
        var cursorBlock = p.children[0];

        if (startOutmostBlock !== endOutmostBlock) {
          this.removeBlocks(figureBlock, endBlock);
        }

        this.removeBlock(figureBlock);
        var key = cursorBlock.key;
        var offset = 0;
        this.cursor = {
          start: {
            key: key,
            offset: offset
          },
          end: {
            key: key,
            offset: offset
          }
        };
        return this.render();
      }
    } // If select multiple paragraph or multiple characters in one paragraph, just let
    // inputCtrl to handle this case.


    if (start.key !== end.key || start.offset !== end.offset) {
      return;
    }

    var node = lib_selection.getSelectionStart();
    var preEleSibling = node && node.nodeType === 1 ? node.previousElementSibling : null;
    var paragraph = findNearestParagraph(node);
    var id = paragraph.id;
    var block = this.getBlock(id);
    var parent = this.getBlock(block.parent);
    var preBlock = this.findPreBlockInLocation(block);

    var _selection$getCaretOf3 = lib_selection.getCaretOffsets(paragraph),
        left = _selection$getCaretOf3.left,
        right = _selection$getCaretOf3.right;

    var inlineDegrade = this.checkBackspaceCase(); // Handle backspace when the previous is an inline image.

    if (preEleSibling && preEleSibling.classList.contains('ag-inline-image')) {
      if (lib_selection.getCaretOffsets(node).left === 0) {
        event.preventDefault();
        event.stopPropagation();
        var imageInfo = getImageInfo_getImageInfo(preEleSibling);
        return this.selectImage(imageInfo);
      }

      if (lib_selection.getCaretOffsets(node).left === 1 && right === 0) {
        event.stopPropagation();
        event.preventDefault();
        var _key = startBlock.key;
        var _text = startBlock.text;
        startBlock.text = _text.substring(0, start.offset - 1) + _text.substring(start.offset);

        var _offset = start.offset - 1;

        this.cursor = {
          start: {
            key: _key,
            offset: _offset
          },
          end: {
            key: _key,
            offset: _offset
          }
        };
        return this.singleRender(startBlock);
      }
    } // handle backspace when cursor at the end of inline image.


    if (node.classList.contains('ag-image-container')) {
      var imageWrapper = node.parentNode;

      var _imageInfo = getImageInfo_getImageInfo(imageWrapper);

      if (start.offset === _imageInfo.token.range.end) {
        event.preventDefault();
        event.stopPropagation();
        return this.selectImage(_imageInfo);
      }
    }

    var tableHasContent = function tableHasContent(table) {
      var tHead = table.children[0];
      var tBody = table.children[1];
      var tHeadHasContent = tHead.children[0].children.some(function (th) {
        return th.text.trim();
      });
      var tBodyHasContent = tBody.children.some(function (row) {
        return row.children.some(function (td) {
          return td.text.trim();
        });
      });
      return tHeadHasContent || tBodyHasContent;
    };

    if (block.type === 'span' && block.functionType === 'codeLine' && left === 0 && !block.preSibling) {
      event.preventDefault();
      event.stopPropagation();

      if (!block.nextSibling) {
        var _preBlock = this.getParent(parent);

        var pBlock = this.createBlock('p');
        var lineBlock = this.createBlock('span', {
          text: block.text
        });
        var _key2 = lineBlock.key;
        var _offset2 = 0;
        this.appendChild(pBlock, lineBlock);
        var referenceBlock = null;

        switch (_preBlock.functionType) {
          case 'fencecode':
          case 'indentcode':
          case 'frontmatter':
            referenceBlock = _preBlock;
            break;

          case 'multiplemath':
          case 'flowchart':
          case 'mermaid':
          case 'sequence':
          case 'vega-lite':
          case 'html':
            referenceBlock = this.getParent(_preBlock);
            break;
        }

        this.insertBefore(pBlock, referenceBlock);
        this.removeBlock(referenceBlock);
        this.cursor = {
          start: {
            key: _key2,
            offset: _offset2
          },
          end: {
            key: _key2,
            offset: _offset2
          }
        };
        this.partialRender();
      }
    } else if (left === 0 && /th|td/.test(block.type)) {
      event.preventDefault();
      event.stopPropagation();
      var tHead = this.getBlock(parent.parent);
      var table = this.getBlock(tHead.parent);
      var figure = this.getBlock(table.parent);
      var hasContent = tableHasContent(table);

      var _key3;

      var _offset3;

      if ((!preBlock || !/th|td/.test(preBlock.type)) && !hasContent) {
        var newLine = this.createBlock('span');
        delete figure.functionType;
        figure.children = [];
        this.appendChild(figure, newLine);
        figure.text = '';
        figure.type = 'p';
        _key3 = newLine.key;
        _offset3 = 0;
      } else if (preBlock) {
        _key3 = preBlock.key;
        _offset3 = preBlock.text.length;
      }

      if (_key3 !== undefined && _offset3 !== undefined) {
        this.cursor = {
          start: {
            key: _key3,
            offset: _offset3
          },
          end: {
            key: _key3,
            offset: _offset3
          }
        };
        this.partialRender();
      }
    } else if (inlineDegrade) {
      event.preventDefault();

      if (block.type === 'span') {
        block = this.getParent(block);
        parent = this.getParent(parent);
      }

      switch (inlineDegrade.type) {
        case 'STOP':
          // Cursor at begin of article and nothing need to do
          break;

        case 'LI':
          {
            if (inlineDegrade.info === 'REPLACEMENT') {
              var children = parent.children;
              var grandpa = this.getBlock(parent.parent);

              if (children[0].type === 'input') {
                this.removeBlock(children[0]);
              }

              children.forEach(function (child) {
                _this.insertBefore(child, grandpa);
              });
              this.removeBlock(grandpa);
            } else if (inlineDegrade.info === 'REMOVE_INSERT_BEFORE') {
              var _children = parent.children;

              var _grandpa = this.getBlock(parent.parent);

              if (_children[0].type === 'input') {
                this.removeBlock(_children[0]);
              }

              _children.forEach(function (child) {
                _this.insertBefore(child, _grandpa);
              });

              this.removeBlock(parent);
            } else if (inlineDegrade.info === 'INSERT_PRE_LIST_ITEM') {
              var parPre = this.getBlock(parent.preSibling);
              var _children2 = parent.children;

              if (_children2[0].type === 'input') {
                this.removeBlock(_children2[0]);
              }

              _children2.forEach(function (child) {
                _this.appendChild(parPre, child);
              });

              this.removeBlock(parent);
            }

            break;
          }

        case 'BLOCKQUOTE':
          if (inlineDegrade.info === 'REPLACEMENT') {
            this.insertBefore(block, parent);
            this.removeBlock(parent);
          } else if (inlineDegrade.info === 'INSERT_BEFORE') {
            this.removeBlock(block);
            this.insertBefore(block, parent);
          }

          break;
      }

      var _key4 = block.type === 'p' ? block.children[0].key : block.key;

      var _offset4 = 0;
      this.cursor = {
        start: {
          key: _key4,
          offset: _offset4
        },
        end: {
          key: _key4,
          offset: _offset4
        }
      };

      if (inlineDegrade.type !== 'STOP') {
        this.partialRender();
      }
    } else if (left === 0 && preBlock) {
      event.preventDefault();
      var _block = block,
          _text2 = _block.text;
      var _key5 = preBlock.key;
      var _offset5 = preBlock.text.length;
      preBlock.text += _text2; // If block is a line block and its parent paragraph only has one text line,
      // also need to remove the paragrah

      if (this.isOnlyChild(block) && block.type === 'span') {
        this.removeBlock(parent);
      } else {
        this.removeBlock(block);
      }

      this.cursor = {
        start: {
          key: _key5,
          offset: _offset5
        },
        end: {
          key: _key5,
          offset: _offset5
        }
      };
      this.partialRender();
    }
  };
};

/* harmony default export */ var contentState_backspaceCtrl = (backspaceCtrl_backspaceCtrl);
// CONCATENATED MODULE: ./src/muya/lib/contentState/deleteCtrl.js



var deleteCtrl_deleteCtrl = function deleteCtrl(ContentState) {
  ContentState.prototype.deleteHandler = function (event) {
    var _this = this;

    var _selection$getCursorR = lib_selection.getCursorRange(),
        start = _selection$getCursorR.start,
        end = _selection$getCursorR.end;

    if (!start || !end) {
      return;
    }

    var startBlock = this.getBlock(start.key);
    var nextBlock = this.findNextBlockInLocation(startBlock); // TODO: @jocs It will delete all the editor and cause error in console when there is only one empty table. same as #67

    if (startBlock.type === 'figure') event.preventDefault(); // If select multiple paragraph or multiple characters in one paragraph, just let
    // updateCtrl to handle this case.

    if (start.key !== end.key || start.offset !== end.offset) {
      return;
    } // Only handle h1~h6 span block


    var type = startBlock.type,
        text = startBlock.text,
        key = startBlock.key;

    if (/h\d|span/.test(type) && start.offset === text.length) {
      event.preventDefault();

      if (nextBlock && /h\d|span/.test(nextBlock.type)) {
        if (nextBlock.functionType === 'codeLine' && nextBlock.nextSibling) {
          // if code block more than one line, do nothing!
          return;
        }

        startBlock.text += nextBlock.text;
        var toBeRemoved = [nextBlock];
        var parent = this.getParent(nextBlock);
        var target = nextBlock;

        while (this.isOnlyRemoveableChild(target)) {
          toBeRemoved.push(parent);
          target = parent;
          parent = this.getParent(parent);
        }

        toBeRemoved.forEach(function (b) {
          return _this.removeBlock(b);
        });
        var offset = start.offset;
        this.cursor = {
          start: {
            key: key,
            offset: offset
          },
          end: {
            key: key,
            offset: offset
          }
        };
        this.render();
      }
    }
  };
};

/* harmony default export */ var contentState_deleteCtrl = (deleteCtrl_deleteCtrl);
// CONCATENATED MODULE: ./src/muya/lib/contentState/codeBlockCtrl.js





var CODE_UPDATE_REP = /^`{3,}(.*)/;

var codeBlockCtrl_codeBlockCtrl = function codeBlockCtrl(ContentState) {
  /**
  * check edit language
  */
  ContentState.prototype.checkEditLanguage = function () {
    var _selection$getCursorR = lib_selection.getCursorRange(),
        start = _selection$getCursorR.start;

    if (!start) {
      return {
        lang: '',
        paragraph: null
      };
    }

    var startBlock = this.getBlock(start.key);
    var paragraph = document.querySelector("#".concat(start.key));
    var lang = '';
    var text = startBlock.text;

    if (startBlock.type === 'span') {
      if (startBlock.functionType === 'languageInput') {
        lang = text.trim();
      } else if (startBlock.functionType === 'paragraphContent') {
        var token = text.match(/(^`{3,})([^`]+)/);

        if (token) {
          var len = token[1].length;

          if (start.offset >= len) {
            lang = token[2].trim();
          }
        }
      }
    }

    return {
      lang: lang,
      paragraph: paragraph
    };
  };

  ContentState.prototype.selectLanguage = function (paragraph, lang) {
    var block = this.getBlock(paragraph.id);
    this.updateCodeLanguage(block, lang);
  };
  /**
   * Update the code block language or creates a new code block.
   *
   * @param block Language-input block or paragraph
   * @param lang Language identifier
   */


  ContentState.prototype.updateCodeLanguage = function (block, lang) {
    prism_loadLanguage(lang);

    if (block.functionType === 'languageInput') {
      var preBlock = this.getParent(block);
      var nextSibling = this.getNextSibling(block); // Only update code language if necessary

      if (block.text !== lang || preBlock.text !== lang || nextSibling.text !== lang) {
        block.text = lang;
        preBlock.lang = lang;
        preBlock.functionType = 'fencecode';
        nextSibling.lang = lang;
        nextSibling.children.forEach(function (c) {
          return c.lang = lang;
        });
      } // Set cursor at the first line


      var key = nextSibling.children[0].key;
      var offset = 0;
      this.cursor = {
        start: {
          key: key,
          offset: offset
        },
        end: {
          key: key,
          offset: offset
        }
      };
    } else {
      block.text = block.text.replace(/^(`+)([^`]+$)/g, "$1".concat(lang));
      this.codeBlockUpdate(block);
    }

    this.partialRender();
  };
  /**
   * [codeBlockUpdate if block updated to `pre` return true, else return false]
   */


  ContentState.prototype.codeBlockUpdate = function (block) {
    var code = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
    var lang = arguments.length > 2 ? arguments[2] : undefined;

    if (block.type === 'span') {
      block = this.getParent(block);
    } // if it's not a p block, no need to update


    if (block.type !== 'p') return false; // if p block's children are more than one, no need to update

    if (block.children.length !== 1) return false;
    var text = block.children[0].text;
    var match = CODE_UPDATE_REP.exec(text);

    if (match || lang) {
      var codeBlock = this.createBlock('code');
      var firstLine = this.createBlock('span', {
        text: code
      });
      var language = lang || (match ? match[1] : '');
      var inputBlock = this.createBlock('span', {
        text: language
      });
      prism_loadLanguage(language);
      inputBlock.functionType = 'languageInput';
      block.type = 'pre';
      block.functionType = 'fencecode';
      block.lang = language;
      block.text = '';
      block.history = null;
      block.children = [];
      codeBlock.lang = language;
      firstLine.lang = language;
      firstLine.functionType = 'codeLine';
      this.appendChild(codeBlock, firstLine);
      this.appendChild(block, inputBlock);
      this.appendChild(block, codeBlock);
      var key = firstLine.key;
      var offset = code.length;
      this.cursor = {
        start: {
          key: key,
          offset: offset
        },
        end: {
          key: key,
          offset: offset
        }
      };
      return true;
    }

    return false;
  };
};

/* harmony default export */ var contentState_codeBlockCtrl = (codeBlockCtrl_codeBlockCtrl);
// CONCATENATED MODULE: ./src/muya/lib/contentState/tableBlockCtrl.js






var TABLE_BLOCK_REG = /^\|.*?(\\*)\|.*?(\\*)\|/;

var tableBlockCtrl_tableBlockCtrl = function tableBlockCtrl(ContentState) {
  ContentState.prototype.createTableInFigure = function (_ref, headerTexts) {
    var rows = _ref.rows,
        columns = _ref.columns;
    var table = this.createBlock('table');
    var tHead = this.createBlock('thead');
    var tBody = this.createBlock('tbody');
    this.appendChild(table, tHead);
    this.appendChild(table, tBody);
    table.row = rows - 1; // zero base

    table.column = columns - 1; // zero base

    var i;
    var j;

    for (i = 0; i < rows; i++) {
      var rowBlock = this.createBlock('tr');
      i === 0 ? this.appendChild(tHead, rowBlock) : this.appendChild(tBody, rowBlock);

      for (j = 0; j < columns; j++) {
        var cell = this.createBlock(i === 0 ? 'th' : 'td', {
          text: headerTexts && i === 0 ? headerTexts[j] : ''
        });
        this.appendChild(rowBlock, cell);
        cell.align = '';
        cell.column = j;
      }
    }

    return table;
  };

  ContentState.prototype.closest = function (block, type) {
    if (!block) {
      return null;
    }

    if (block.type === type) {
      return block;
    } else {
      var parent = this.getParent(block);
      return this.closest(parent, type);
    }
  };

  ContentState.prototype.getAnchor = function (block) {
    var type = block.type,
        functionType = block.functionType;

    switch (type) {
      case 'span':
        if (functionType === 'codeLine') {
          return this.closest(block, 'figure') || this.closest(block, 'pre');
        } else {
          return this.getParent(block);
        }

      case 'th':
      case 'td':
        return this.closest(block, 'figure');

      default:
        return null;
    }
  };

  ContentState.prototype.createFigure = function (_ref2) {
    var rows = _ref2.rows,
        columns = _ref2.columns;
    var end = this.cursor.end;
    var table = this.createTableInFigure({
      rows: rows,
      columns: columns
    });
    var figureBlock = this.createBlock('figure');
    figureBlock.functionType = 'table';
    var endBlock = this.getBlock(end.key);
    var anchor = this.getAnchor(endBlock);
    if (!anchor) return;
    this.insertAfter(figureBlock, anchor);

    if (/p|h\d/.test(anchor.type) && !endBlock.text) {
      this.removeBlock(anchor);
    }

    this.appendChild(figureBlock, table);
    var key = table.children[0].children[0].children[0].key; // fist cell key in thead

    var offset = 0;
    this.cursor = {
      start: {
        key: key,
        offset: offset
      },
      end: {
        key: key,
        offset: offset
      }
    };
    this.muya.eventCenter.dispatch('stateChange');
    this.partialRender();
  };

  ContentState.prototype.createTable = function (tableChecker) {
    var eventCenter = this.muya.eventCenter;
    this.createFigure(tableChecker);
    var selectionChanges = this.selectionChange();
    eventCenter.dispatch('selectionChange', selectionChanges);
  };

  ContentState.prototype.initTable = function (block) {
    var text = block.children[0].text;
    var rowHeader = [];
    var len = text.length;
    var i;

    for (i = 0; i < len; i++) {
      var char = text[i];

      if (/^[^|]$/.test(char)) {
        rowHeader[rowHeader.length - 1] += char;
      }

      if (/\\/.test(char)) {
        rowHeader[rowHeader.length - 1] += text[++i];
      }

      if (/\|/.test(char) && i !== len - 1) {
        rowHeader.push('');
      }
    }

    var columns = rowHeader.length;
    var rows = 2;
    var table = this.createTableInFigure({
      rows: rows,
      columns: columns
    }, rowHeader);
    block.type = 'figure';
    block.text = '';
    block.children = [];
    block.functionType = 'table';
    this.appendChild(block, table);
    return table.children[1].children[0].children[0]; // first cell in tbody
  };

  ContentState.prototype.tableToolBarClick = function (type) {
    var _this = this;

    var key = this.cursor.start.key;
    var block = this.getBlock(key);
    if (!/td|th/.test(block.type)) throw new Error('table is not active');
    var column = block.column,
        align = block.align;

    var getTable = function getTable(td) {
      var row = _this.getBlock(block.parent);

      var rowContainer = _this.getBlock(row.parent);

      return _this.getBlock(rowContainer.parent);
    };

    var table = getTable(block);
    var figure = this.getBlock(table.parent);

    switch (type) {
      case 'left':
      case 'center':
      case 'right':
        {
          var newAlign = align === type ? '' : type;
          table.children.forEach(function (rowContainer) {
            rowContainer.children.forEach(function (row) {
              row.children[column].align = newAlign;
            });
          });
          this.muya.eventCenter.dispatch('stateChange');
          this.partialRender();
          break;
        }

      case 'delete':
        {
          var newLine = this.createBlock('span');
          figure.children = [];
          this.appendChild(figure, newLine);
          figure.type = 'p';
          figure.text = '';
          var _key = newLine.key;
          var offset = 0;
          this.cursor = {
            start: {
              key: _key,
              offset: offset
            },
            end: {
              key: _key,
              offset: offset
            }
          };
          this.muya.eventCenter.dispatch('stateChange');
          this.partialRender();
          break;
        }

      case 'table':
        {
          var eventCenter = this.muya.eventCenter;
          var figureKey = figure.key;
          var tableLable = document.querySelector("#".concat(figureKey, " [data-label=table]"));

          var _table$row = table.row,
              row = _table$row === void 0 ? 1 : _table$row,
              _table$column = table.column,
              _column = _table$column === void 0 ? 1 : _table$column; // zero base


          var handler = function handler(row, column) {
            var oldRow = table.row,
                oldColumn = table.column;
            var tBody = table.children[1];
            var tHead = table.children[0];
            var headerRow = tHead.children[0];
            var bodyRows = tBody.children;
            var i;

            if (column > oldColumn) {
              for (i = oldColumn + 1; i <= column; i++) {
                var th = _this.createBlock('th');

                th.column = i;
                th.align = '';

                _this.appendChild(headerRow, th);

                bodyRows.forEach(function (bodyRow) {
                  var td = _this.createBlock('td');

                  td.column = i;
                  td.align = '';

                  _this.appendChild(bodyRow, td);
                });
              }
            } else if (column < oldColumn) {
              var rows = [headerRow].concat(Object(toConsumableArray["a" /* default */])(bodyRows));
              rows.forEach(function (row) {
                while (row.children.length > column + 1) {
                  var lastChild = row.children[row.children.length - 1];

                  _this.removeBlock(lastChild);
                }
              });
            }

            if (row < oldRow) {
              while (tBody.children.length > row) {
                var lastRow = tBody.children[tBody.children.length - 1];

                _this.removeBlock(lastRow);
              }
            } else if (row > oldRow) {
              var oneRowInBody = bodyRows[0];

              for (i = oldRow + 1; i <= row; i++) {
                var bodyRow = _this.createRow(oneRowInBody);

                _this.appendChild(tBody, bodyRow);
              }
            }

            Object.assign(table, {
              row: row,
              column: column
            });
            var cursorBlock = headerRow.children[0];
            var key = cursorBlock.key;
            var offset = cursorBlock.text.length;
            _this.cursor = {
              start: {
                key: key,
                offset: offset
              },
              end: {
                key: key,
                offset: offset
              }
            };

            _this.muya.eventCenter.dispatch('stateChange');

            _this.partialRender();
          };

          var reference = getParagraphReference(tableLable, tableLable.id);
          eventCenter.dispatch('muya-table-picker', {
            row: row,
            column: _column
          }, reference, handler.bind(this));
        }
    }
  }; // insert/remove row/column


  ContentState.prototype.editTable = function (_ref3) {
    var _this2 = this;

    var location = _ref3.location,
        action = _ref3.action,
        target = _ref3.target;
    var _this$cursor = this.cursor,
        start = _this$cursor.start,
        end = _this$cursor.end;
    var block = this.getBlock(start.key);

    if (start.key !== end.key || !/th|td/.test(block.type)) {
      throw new Error('Cursor is not in table block, so you can not insert/edit row/column');
    }

    var currentRow = this.getParent(block);
    var rowContainer = this.getParent(currentRow); // tbody or thead

    var table = this.getParent(rowContainer);
    var thead = table.children[0];
    var tbody = table.children[1];
    var column = table.column;
    var columnIndex = currentRow.children.indexOf(block);
    var cursorBlock;

    var createRow = function createRow(column, isHeader) {
      var tr = _this2.createBlock('tr');

      var i;

      for (i = 0; i <= column; i++) {
        var cell = _this2.createBlock(isHeader ? 'th' : 'td');

        cell.align = currentRow.children[i].align;
        cell.column = i;

        _this2.appendChild(tr, cell);
      }

      return tr;
    };

    if (target === 'row') {
      if (action === 'insert') {
        var _newRow = location === 'previous' && block.type === 'th' ? createRow(column, true) : createRow(column, false);

        if (location === 'previous') {
          this.insertBefore(_newRow, currentRow);

          if (block.type === 'th') {
            this.removeBlock(currentRow);
            currentRow.children.forEach(function (cell) {
              return cell.type = 'td';
            });
            var firstRow = tbody.children[0];
            this.insertBefore(currentRow, firstRow);
          }
        } else {
          if (block.type === 'th') {
            var _firstRow = tbody.children[0];
            this.insertBefore(_newRow, _firstRow);
          } else {
            this.insertAfter(_newRow, currentRow);
          }
        }

        cursorBlock = _newRow.children[columnIndex]; // handle remove row
      } else {
        if (location === 'previous') {
          if (block.type === 'th') return;

          if (!currentRow.preSibling) {
            var headRow = thead.children[0];
            if (!currentRow.nextSibling) return;
            this.removeBlock(headRow);
            this.removeBlock(currentRow);
            currentRow.children.forEach(function (cell) {
              return cell.type = 'th';
            });
            this.appendChild(thead, currentRow);
          } else {
            var preRow = this.getPreSibling(currentRow);
            this.removeBlock(preRow);
          }
        } else if (location === 'current') {
          if (block.type === 'th' && tbody.children.length >= 2) {
            var _firstRow2 = tbody.children[0];
            this.removeBlock(currentRow);
            this.removeBlock(_firstRow2);
            this.appendChild(thead, _firstRow2);

            _firstRow2.children.forEach(function (cell) {
              return cell.type = 'th';
            });

            cursorBlock = _firstRow2.children[columnIndex];
          }

          if (block.type === 'td' && (currentRow.preSibling || currentRow.nextSibling)) {
            cursorBlock = (this.getNextSibling(currentRow) || this.getPreSibling(currentRow)).children[columnIndex];
            this.removeBlock(currentRow);
          }
        } else {
          if (block.type === 'th') {
            if (tbody.children.length >= 2) {
              var _firstRow3 = tbody.children[0];
              this.removeBlock(_firstRow3);
            } else {
              return;
            }
          } else {
            var nextRow = this.getNextSibling(currentRow);
            if (nextRow) this.removeBlock(nextRow);
          }
        }
      }
    } else if (target === 'column') {
      if (action === 'insert') {
        [].concat(Object(toConsumableArray["a" /* default */])(thead.children), Object(toConsumableArray["a" /* default */])(tbody.children)).forEach(function (tableRow) {
          var targetCell = tableRow.children[columnIndex];

          var cell = _this2.createBlock(targetCell.type);

          cell.align = '';

          if (location === 'left') {
            _this2.insertBefore(cell, targetCell);
          } else {
            _this2.insertAfter(cell, targetCell);
          }

          tableRow.children.forEach(function (cell, i) {
            cell.column = i;
          });
        });
        cursorBlock = location === 'left' ? this.getPreSibling(block) : this.getNextSibling(block); // handle remove column
      } else {
        if (currentRow.children.length <= 2) return;
        [].concat(Object(toConsumableArray["a" /* default */])(thead.children), Object(toConsumableArray["a" /* default */])(tbody.children)).forEach(function (tableRow) {
          var targetCell = tableRow.children[columnIndex];
          var removeCell = location === 'left' ? _this2.getPreSibling(targetCell) : location === 'current' ? targetCell : _this2.getNextSibling(targetCell);

          if (removeCell === block) {
            cursorBlock = _this2.findNextBlockInLocation(block);
          }

          if (removeCell) _this2.removeBlock(removeCell);
          tableRow.children.forEach(function (cell, i) {
            cell.column = i;
          });
        });
      }
    }

    var newColum = thead.children[0].children.length - 1;
    var newRow = thead.children.length + tbody.children.length - 1;
    Object.assign(table, {
      row: newRow,
      column: newColum
    });

    if (cursorBlock) {
      var _cursorBlock = cursorBlock,
          key = _cursorBlock.key;
      var offset = 0;
      this.cursor = {
        start: {
          key: key,
          offset: offset
        },
        end: {
          key: key,
          offset: offset
        }
      };
    } else {
      this.cursor = {
        start: start,
        end: end
      };
    }

    this.partialRender();
    this.muya.eventCenter.dispatch('stateChange');
  };

  ContentState.prototype.getTableBlock = function () {
    var _this$cursor2 = this.cursor,
        start = _this$cursor2.start,
        end = _this$cursor2.end;
    var startBlock = this.getBlock(start.key);
    var endBlock = this.getBlock(end.key);
    var startParents = this.getParents(startBlock);
    var endParents = this.getParents(endBlock);
    var affiliation = startParents.filter(function (p) {
      return endParents.includes(p);
    });

    if (affiliation.length) {
      var table = affiliation.find(function (p) {
        return p.type === 'figure';
      });
      return table;
    }
  };

  ContentState.prototype.tableBlockUpdate = function (block) {
    var type = block.type;
    if (type !== 'p') return false;
    var text = block.children[0].text;
    var match = TABLE_BLOCK_REG.exec(text);
    return match && isLengthEven(match[1]) && isLengthEven(match[2]) ? this.initTable(block) : false;
  };
};

/* harmony default export */ var contentState_tableBlockCtrl = (tableBlockCtrl_tableBlockCtrl);
// CONCATENATED MODULE: ./src/muya/lib/contentState/selectionCtrl.js
var selectionCtrl = function selectionCtrl(ContentState) {
  // Returns the table from the table cell:
  //   table <-- thead or tbody <-- tr <-- th or td (cell)
  ContentState.prototype.getTableFromTableCell = function (block) {
    var table = this.getParent(this.getParent(this.getParent(block)));

    if (table && table.type !== 'table') {
      return null;
    }

    return table;
  };

  ContentState.prototype.tableCellHandler = function (event) {
    var _this$cursor = this.cursor,
        start = _this$cursor.start,
        end = _this$cursor.end;
    var startBlock = this.getBlock(start.key);
    var endBlock = this.getBlock(end.key);
    var startType = startBlock.type;
    var endType = endBlock.type;

    if (/th|td/.test(startType) && /th|td/.test(endType)) {
      if (start.key === end.key) {
        var text = startBlock.text,
            key = startBlock.key;
        this.cursor = {
          start: {
            key: key,
            offset: 0
          },
          end: {
            key: key,
            offset: text.length
          }
        };
      } else {
        var startTable = this.getTableFromTableCell(startBlock);
        var endTable = this.getTableFromTableCell(endBlock); // Check whether both blocks are in the same table.

        if (!startTable || !endTable) {
          console.error('No table found or invalid type.');
          return;
        } else if (startTable.key !== endTable.key) {
          // Select entire document
          return;
        }

        var firstTableCell = this.firstInDescendant(startTable);
        var lastTableCell = this.lastInDescendant(startTable);

        if (!firstTableCell || !/th|td/.test(firstTableCell.type) || !lastTableCell || !/th|td/.test(lastTableCell.type)) {
          console.error('No table cell found or invalid type.');
          return;
        }

        var startKey = firstTableCell.key;
        var endKey = lastTableCell.key,
            _text = lastTableCell.text;
        this.cursor = {
          start: {
            key: startKey,
            offset: 0
          },
          end: {
            key: endKey,
            offset: _text.length
          }
        };
      }

      event.preventDefault();
      event.stopPropagation();
      this.partialRender();
    }
  };
};

/* harmony default export */ var contentState_selectionCtrl = (selectionCtrl);
// CONCATENATED MODULE: ./src/muya/lib/contentState/history.js





var history_History = /*#__PURE__*/function () {
  function History(contentState) {
    Object(classCallCheck["a" /* default */])(this, History);

    this.stack = [];
    this.index = -1;
    this.contentState = contentState;
  }

  Object(createClass["a" /* default */])(History, [{
    key: "undo",
    value: function undo() {
      if (this.index > 0) {
        this.index = this.index - 1;
        var state = utils_deepCopy(this.stack[this.index]);
        var blocks = state.blocks,
            cursor = state.cursor,
            renderRange = state.renderRange;
        cursor.noHistory = true;
        this.contentState.blocks = blocks;
        this.contentState.renderRange = renderRange;
        this.contentState.cursor = cursor;
        this.contentState.render();
      }
    }
  }, {
    key: "redo",
    value: function redo() {
      var index = this.index,
          stack = this.stack;
      var len = stack.length;

      if (index < len - 1) {
        this.index = index + 1;
        var state = utils_deepCopy(stack[this.index]);
        var blocks = state.blocks,
            cursor = state.cursor,
            renderRange = state.renderRange;
        cursor.noHistory = true;
        this.contentState.blocks = blocks;
        this.contentState.renderRange = renderRange;
        this.contentState.cursor = cursor;
        this.contentState.render();
      }
    }
  }, {
    key: "push",
    value: function push(state) {
      this.stack.splice(this.index + 1);
      var copyState = utils_deepCopy(state);
      this.stack.push(copyState);

      if (this.stack.length > UNDO_DEPTH) {
        this.stack.shift();
        this.index = this.index - 1;
      }

      this.index = this.index + 1;
    }
  }, {
    key: "clearHistory",
    value: function clearHistory() {
      this.stack = [];
      this.index = -1;
    }
  }]);

  return History;
}();

/* harmony default export */ var contentState_history = (history_History);
// CONCATENATED MODULE: ./src/muya/lib/contentState/arrowCtrl.js


 // If the next block is header, put cursor after the `#{1,6} *` 

var arrowCtrl_adjustOffset = function adjustOffset(offset, block, event) {
  if (/^span$/.test(block.type) && block.functionType === 'atxLine' && event.key === EVENT_KEYS.ArrowDown) {
    var match = /^\s{0,3}(?:#{1,6})(?:\s{1,}|$)/.exec(block.text);

    if (match) {
      return match[0].length;
    }
  }

  return offset;
};

var arrowCtrl_arrowCtrl = function arrowCtrl(ContentState) {
  ContentState.prototype.findNextRowCell = function (cell) {
    if (!/th|td/.test(cell.type)) {
      throw new Error("block with type ".concat(cell && cell.type, " is not a table cell"));
    }

    var row = this.getParent(cell);
    var rowContainer = this.getParent(row); // thead or tbody

    var column = row.children.indexOf(cell);

    if (rowContainer.type === 'thead') {
      var tbody = this.getNextSibling(rowContainer);

      if (tbody && tbody.children.length) {
        return tbody.children[0].children[column];
      }
    } else if (rowContainer.type === 'tbody') {
      var nextRow = this.getNextSibling(row);

      if (nextRow) {
        return nextRow.children[column];
      }
    }

    return null;
  };

  ContentState.prototype.findPrevRowCell = function (cell) {
    if (!/th|td/.test(cell.type)) throw new Error("block with type ".concat(cell && cell.type, " is not a table cell"));
    var row = this.getParent(cell);
    var rowContainer = this.getParent(row); // thead or tbody

    var rowIndex = rowContainer.children.indexOf(row);
    var column = row.children.indexOf(cell);

    if (rowContainer.type === 'tbody') {
      if (rowIndex === 0 && rowContainer.preSibling) {
        var thead = this.getPreSibling(rowContainer);
        return thead.children[0].children[column];
      } else if (rowIndex > 0) {
        return this.getPreSibling(row).children[column];
      }

      return null;
    }

    return null;
  };

  ContentState.prototype.docArrowHandler = function (event) {
    var selectedImage = this.selectedImage;

    if (selectedImage) {
      var key = selectedImage.key,
          token = selectedImage.token;
      var _token$range = token.range,
          start = _token$range.start,
          end = _token$range.end;
      event.preventDefault();
      event.stopPropagation();
      var block = this.getBlock(key);

      switch (event.key) {
        case EVENT_KEYS.ArrowUp:
        case EVENT_KEYS.ArrowLeft:
          {
            this.cursor = {
              start: {
                key: key,
                offset: start
              },
              end: {
                key: key,
                offset: start
              }
            };
            break;
          }

        case EVENT_KEYS.ArrowDown:
        case EVENT_KEYS.ArrowRight:
          {
            this.cursor = {
              start: {
                key: key,
                offset: end
              },
              end: {
                key: key,
                offset: end
              }
            };
            break;
          }
      }

      return this.singleRender(block);
    }
  };

  ContentState.prototype.arrowHandler = function (event) {
    var node = lib_selection.getSelectionStart();
    var paragraph = findNearestParagraph(node);
    var id = paragraph.id;
    var block = this.getBlock(id);
    var preBlock = this.findPreBlockInLocation(block);
    var nextBlock = this.findNextBlockInLocation(block);

    var _selection$getCursorR = lib_selection.getCursorRange(),
        start = _selection$getCursorR.start,
        end = _selection$getCursorR.end;

    var _selection$getCursorY = lib_selection.getCursorYOffset(paragraph),
        topOffset = _selection$getCursorY.topOffset,
        bottomOffset = _selection$getCursorY.bottomOffset;

    if (!start || !end) {
      return;
    } // fix #101


    if (event.key === EVENT_KEYS.ArrowRight && node && node.classList && node.classList.contains(CLASS_OR_ID['AG_MATH_TEXT'])) {
      var _selection$getCaretOf = lib_selection.getCaretOffsets(node),
          right = _selection$getCaretOf.right;

      if (right === 0 && start.key === end.key && start.offset === end.offset) {
        // It's not recommended to use such lower API, but it's work well.
        return lib_selection.select(node.parentNode.nextElementSibling, 0);
      }
    } // Just do nothing if the cursor is not collapsed or `shiftKey` pressed


    if (start.key === end.key && start.offset !== end.offset || start.key !== end.key || event.shiftKey) {
      return;
    }

    if (event.key === EVENT_KEYS.ArrowUp && topOffset > 0 || event.key === EVENT_KEYS.ArrowDown && bottomOffset > 0) {
      if (!/pre|th|td/.test(block.type)) {
        return;
      }
    }

    if (/th|td/.test(block.type)) {
      var activeBlock;
      var cellInNextRow = this.findNextRowCell(block);
      var cellInPrevRow = this.findPrevRowCell(block);

      if (event.key === EVENT_KEYS.ArrowUp) {
        if (cellInPrevRow) {
          activeBlock = cellInPrevRow;
        } else {
          activeBlock = this.findPreBlockInLocation(this.getTableBlock());
        }
      }

      if (event.key === EVENT_KEYS.ArrowDown) {
        if (cellInNextRow) {
          activeBlock = cellInNextRow;
        } else {
          activeBlock = this.findNextBlockInLocation(this.getTableBlock());
        }
      }

      if (activeBlock) {
        event.preventDefault();
        event.stopPropagation();
        var offset = activeBlock.type === 'p' ? 0 : event.key === EVENT_KEYS.ArrowUp ? activeBlock.text.length : 0;
        offset = arrowCtrl_adjustOffset(offset, activeBlock, event);
        var key = activeBlock.type === 'p' ? activeBlock.children[0].key : activeBlock.key;
        this.cursor = {
          start: {
            key: key,
            offset: offset
          },
          end: {
            key: key,
            offset: offset
          }
        };
        return this.partialRender();
      }
    }

    if (event.key === EVENT_KEYS.ArrowUp || event.key === EVENT_KEYS.ArrowLeft && start.offset === 0) {
      event.preventDefault();
      event.stopPropagation();
      if (!preBlock) return;
      var _key = preBlock.key;
      var _offset = preBlock.text.length;
      this.cursor = {
        start: {
          key: _key,
          offset: _offset
        },
        end: {
          key: _key,
          offset: _offset
        }
      };
      return this.partialRender();
    } else if (event.key === EVENT_KEYS.ArrowDown || event.key === EVENT_KEYS.ArrowRight && start.offset === block.text.length) {
      event.preventDefault();
      event.stopPropagation();

      var _key2;

      var newBlock;

      if (nextBlock) {
        _key2 = nextBlock.key;
      } else {
        newBlock = this.createBlockP();
        var lastBlock = this.blocks[this.blocks.length - 1];
        this.insertAfter(newBlock, lastBlock);
        _key2 = newBlock.children[0].key;
      }

      var _offset2 = arrowCtrl_adjustOffset(0, nextBlock || newBlock, event);

      this.cursor = {
        start: {
          key: _key2,
          offset: _offset2
        },
        end: {
          key: _key2,
          offset: _offset2
        }
      };
      return this.partialRender();
    }
  };
};

/* harmony default export */ var contentState_arrowCtrl = (arrowCtrl_arrowCtrl);
// CONCATENATED MODULE: ./src/muya/lib/contentState/pasteCtrl.js













var LIST_REG = /ul|ol/;
var LINE_BREAKS_REG = /\n/;

var pasteCtrl_pasteCtrl = function pasteCtrl(ContentState) {
  // check paste type: `MERGE` or `NEWLINE`
  ContentState.prototype.checkPasteType = function (start, fragment) {
    var fragmentType = fragment.type;
    var parent = this.getParent(start);

    if (fragmentType === 'p') {
      return 'MERGE';
    } else if (/^h\d/.test(fragmentType)) {
      if (start.text) {
        return 'MERGE';
      } else {
        return 'NEWLINE';
      }
    } else if (LIST_REG.test(fragmentType)) {
      var listItem = this.getParent(parent);
      var list = listItem && listItem.type === 'li' ? this.getParent(listItem) : null;

      if (list) {
        if (list.listType === fragment.listType && listItem.bulletMarkerOrDelimiter === fragment.children[0].bulletMarkerOrDelimiter) {
          return 'MERGE';
        } else {
          return 'NEWLINE';
        }
      } else {
        return 'NEWLINE';
      }
    } else {
      return 'NEWLINE';
    }
  };

  ContentState.prototype.checkCopyType = function (html, text) {
    var type = 'normal';

    if (!html && text) {
      type = 'copyAsMarkdown';
      var match = /^<([a-zA-Z\d-]+)(?=\s|>).*?>[\s\S]+?<\/[a-zA-Z\d-]+>$/.exec(text.trim());

      if (match && match[1]) {
        var tag = match[1];
        type = PARAGRAPH_TYPES.find(function (type) {
          return type === tag;
        }) ? 'copyAsHtml' : type;
      }
    }

    return type;
  };

  ContentState.prototype.standardizeHTML = function (html) {
    var sanitizedHtml = utils_sanitize(html, PREVIEW_DOMPURIFY_CONFIG);
    var tempWrapper = document.createElement('div');
    tempWrapper.innerHTML = sanitizedHtml; // special process for Number app in macOs

    var tables = Array.from(tempWrapper.querySelectorAll('table'));

    for (var _i = 0, _tables = tables; _i < _tables.length; _i++) {
      var table = _tables[_i];
      var row = table.querySelector('tr');

      if (row.firstElementChild.tagName !== 'TH') {
        Object(toConsumableArray["a" /* default */])(row.children).forEach(function (cell) {
          var th = document.createElement('th');
          th.innerHTML = cell.innerHTML;
          cell.replaceWith(th);
        });
      }

      var paragraphs = Array.from(table.querySelectorAll('p'));

      for (var _i2 = 0, _paragraphs = paragraphs; _i2 < _paragraphs.length; _i2++) {
        var p = _paragraphs[_i2];
        var span = document.createElement('span');
        span.innerHTML = p.innerHTML;
        p.replaceWith(span);
      }
    }

    return tempWrapper.innerHTML;
  };

  ContentState.prototype.pasteImage = /*#__PURE__*/function () {
    var _ref = Object(asyncToGenerator["a" /* default */])( /*#__PURE__*/regeneratorRuntime.mark(function _callee(event) {
      var _this = this;

      var imagePath, id, nSrc, _getImageSrc, src, imageWrapper, imageInfo, items, file, i, _id, reader, _nSrc, base64, _imageWrapper, _imageInfo;

      return regeneratorRuntime.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              // Try to guess the clipboard file path.
              imagePath = this.muya.options.clipboardFilePath();

              if (!(imagePath && typeof imagePath === 'string' && IMAGE_EXT_REG.test(imagePath))) {
                _context.next = 12;
                break;
              }

              id = "loading-".concat(getUniqueId());

              if (this.selectedImage) {
                this.replaceImage(this.selectedImage, {
                  alt: id,
                  src: imagePath
                });
              } else {
                this.insertImage({
                  alt: id,
                  src: imagePath
                });
              }

              _context.next = 6;
              return this.muya.options.imageAction(imagePath);

            case 6:
              nSrc = _context.sent;
              _getImageSrc = utils_getImageInfo(imagePath), src = _getImageSrc.src;

              if (src) {
                this.stateRender.urlMap.set(nSrc, src);
              }

              imageWrapper = this.muya.container.querySelector("span[data-id=".concat(id, "]"));

              if (imageWrapper) {
                imageInfo = getImageInfo_getImageInfo(imageWrapper);
                this.replaceImage(imageInfo, {
                  src: nSrc
                });
              }

              return _context.abrupt("return", imagePath);

            case 12:
              items = event.clipboardData && event.clipboardData.items;
              file = null;

              if (!(items && items.length)) {
                _context.next = 23;
                break;
              }

              i = 0;

            case 16:
              if (!(i < items.length)) {
                _context.next = 23;
                break;
              }

              if (!(items[i].type.indexOf('image') !== -1)) {
                _context.next = 20;
                break;
              }

              file = items[i].getAsFile();
              return _context.abrupt("break", 23);

            case 20:
              i++;
              _context.next = 16;
              break;

            case 23:
              if (!file) {
                _context.next = 37;
                break;
              }

              _id = "loading-".concat(getUniqueId());

              if (this.selectedImage) {
                this.replaceImage(this.selectedImage, {
                  alt: _id,
                  src: ''
                });
              } else {
                this.insertImage({
                  alt: _id,
                  src: ''
                });
              }

              reader = new FileReader();

              reader.onload = function (event) {
                var base64 = event.target.result;

                var imageWrapper = _this.muya.container.querySelector("span[data-id=".concat(_id, "]"));

                var imageContainer = _this.muya.container.querySelector("span[data-id=".concat(_id, "] .ag-image-container"));

                _this.stateRender.urlMap.set(_id, base64);

                if (imageContainer) {
                  imageWrapper.classList.remove('ag-empty-image');
                  imageWrapper.classList.add('ag-image-success');
                  var image = document.createElement('img');
                  image.src = base64;
                  imageContainer.appendChild(image);
                }
              };

              reader.readAsDataURL(file);
              _context.next = 31;
              return this.muya.options.imageAction(file);

            case 31:
              _nSrc = _context.sent;
              base64 = this.stateRender.urlMap.get(_id);

              if (base64) {
                this.stateRender.urlMap.set(_nSrc, base64);
                this.stateRender.urlMap.delete(_id);
              }

              _imageWrapper = this.muya.container.querySelector("span[data-id=".concat(_id, "]"));

              if (_imageWrapper) {
                _imageInfo = getImageInfo_getImageInfo(_imageWrapper);
                this.replaceImage(_imageInfo, {
                  src: _nSrc
                });
              }

              return _context.abrupt("return", file);

            case 37:
              return _context.abrupt("return", null);

            case 38:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, this);
    }));

    return function (_x) {
      return _ref.apply(this, arguments);
    };
  }();

  ContentState.prototype.docPasteHandler = /*#__PURE__*/function () {
    var _ref2 = Object(asyncToGenerator["a" /* default */])( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(event) {
      var file;
      return regeneratorRuntime.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.next = 2;
              return this.pasteImage(event);

            case 2:
              file = _context2.sent;

              if (!file) {
                _context2.next = 5;
                break;
              }

              return _context2.abrupt("return", event.preventDefault());

            case 5:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, this);
    }));

    return function (_x2) {
      return _ref2.apply(this, arguments);
    };
  }(); // handle `normal` and `pasteAsPlainText` paste


  ContentState.prototype.pasteHandler = /*#__PURE__*/function () {
    var _ref3 = Object(asyncToGenerator["a" /* default */])( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(event) {
      var _this2 = this;

      var type,
          rawText,
          rawHtml,
          text,
          html,
          copyType,
          _this$cursor,
          start,
          end,
          startBlock,
          endBlock,
          parent,
          file,
          appendHtml,
          language,
          oldLanguageLength,
          _offset,
          prePartText,
          postPartText,
          _key,
          eventCenter,
          referenceBlock,
          blockText,
          _prePartText,
          _postPartText,
          textList,
          _key3,
          _offset3,
          pendingText,
          _key4,
          _offset4,
          htmlBlock,
          lines,
          _htmlBlock,
          stateFragments,
          cacheText,
          firstFragment,
          tailFragments,
          pasteType,
          getLastBlock,
          lastBlock,
          key,
          offset,
          listItems,
          firstListItem,
          liChildren,
          originListItem,
          originList,
          targetListType,
          originListType,
          tail,
          firstFragmentTail,
          target,
          _text,
          _lines,
          _target,
          pBlock,
          _target2,
          cursorBlock,
          _args3 = arguments;

      return regeneratorRuntime.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              type = _args3.length > 1 && _args3[1] !== undefined ? _args3[1] : 'normal';
              rawText = _args3.length > 2 ? _args3[2] : undefined;
              rawHtml = _args3.length > 3 ? _args3[3] : undefined;
              event.preventDefault();
              event.stopPropagation();
              text = rawText || event.clipboardData.getData('text/plain');
              html = rawHtml || event.clipboardData.getData('text/html');
              html = this.standardizeHTML(html);
              copyType = this.checkCopyType(html, text);
              _this$cursor = this.cursor, start = _this$cursor.start, end = _this$cursor.end;
              startBlock = this.getBlock(start.key);
              endBlock = this.getBlock(end.key);
              parent = this.getParent(startBlock);

              if (!(start.key !== end.key)) {
                _context3.next = 16;
                break;
              }

              this.cutHandler();
              return _context3.abrupt("return", this.pasteHandler(event, type));

            case 16:
              _context3.next = 18;
              return this.pasteImage(event);

            case 18:
              file = _context3.sent;

              if (!file) {
                _context3.next = 21;
                break;
              }

              return _context3.abrupt("return");

            case 21:
              appendHtml = function appendHtml(text) {
                startBlock.text = startBlock.text.substring(0, start.offset) + text + startBlock.text.substring(start.offset);
                var key = start.key;
                var offset = start.offset + text.length;
                _this2.cursor = {
                  start: {
                    key: key,
                    offset: offset
                  },
                  end: {
                    key: key,
                    offset: offset
                  }
                };
              }; // Extract the first line from the language identifier (GH#553)


              if (!(startBlock.type === 'span' && startBlock.functionType === 'languageInput')) {
                _context3.next = 34;
                break;
              }

              language = text.trim().match(/^.*$/m)[0] || '';
              oldLanguageLength = startBlock.text.length;
              _offset = 0;

              if (start.offset !== 0 || end.offset !== oldLanguageLength) {
                prePartText = startBlock.text.substring(0, start.offset);
                postPartText = startBlock.text.substring(end.offset); // Expect that the language doesn't contain new lines

                language = prePartText + language + postPartText;
                _offset = prePartText.length + language.length;
              } else {
                _offset = language.length;
              }

              startBlock.text = language;
              _key = startBlock.key;
              this.cursor = {
                start: {
                  key: _key,
                  offset: _offset
                },
                end: {
                  key: _key,
                  offset: _offset
                }
              }; // Hide code picker float box

              eventCenter = this.muya.eventCenter;
              eventCenter.dispatch('muya-code-picker', {
                reference: null
              }); // Update code block language and render

              this.updateCodeLanguage(startBlock, language);
              return _context3.abrupt("return");

            case 34:
              if (!(startBlock.type === 'span' && startBlock.functionType === 'codeLine')) {
                _context3.next = 42;
                break;
              }

              referenceBlock = startBlock;
              blockText = startBlock.text;
              _prePartText = blockText.substring(0, start.offset);
              _postPartText = blockText.substring(end.offset);
              textList = text.split(LINE_BREAKS_REG);

              if (textList.length > 1) {
                textList.forEach(function (line, i) {
                  if (i === 0) {
                    startBlock.text = _prePartText + line;
                  } else {
                    line = i === textList.length - 1 ? line + _postPartText : line;

                    var lineBlock = _this2.createBlock('span', {
                      text: line
                    });

                    lineBlock.functionType = startBlock.functionType;
                    lineBlock.lang = startBlock.lang;

                    _this2.insertAfter(lineBlock, referenceBlock);

                    referenceBlock = lineBlock;

                    if (i === textList.length - 1) {
                      var _key2 = lineBlock.key;
                      var _offset2 = line.length;
                      _this2.cursor = {
                        start: {
                          key: _key2,
                          offset: _offset2
                        },
                        end: {
                          key: _key2,
                          offset: _offset2
                        }
                      };
                    }
                  }
                });
              } else {
                startBlock.text = _prePartText + text + _postPartText;
                _key3 = startBlock.key;
                _offset3 = start.offset + text.length;
                this.cursor = {
                  start: {
                    key: _key3,
                    offset: _offset3
                  },
                  end: {
                    key: _key3,
                    offset: _offset3
                  }
                };
              }

              return _context3.abrupt("return", this.partialRender());

            case 42:
              if (!/th|td/.test(startBlock.type)) {
                _context3.next = 49;
                break;
              }

              pendingText = text.trim().replace(/\n/g, '<br/>');
              startBlock.text = startBlock.text.substring(0, start.offset) + pendingText + startBlock.text.substring(end.offset);
              _key4 = startBlock.key;
              _offset4 = start.offset + pendingText.length;
              this.cursor = {
                start: {
                  key: _key4,
                  offset: _offset4
                },
                end: {
                  key: _key4,
                  offset: _offset4
                }
              };
              return _context3.abrupt("return", this.partialRender());

            case 49:
              if (!(copyType === 'copyAsHtml')) {
                _context3.next = 65;
                break;
              }

              _context3.t0 = type;
              _context3.next = _context3.t0 === 'normal' ? 53 : _context3.t0 === 'pasteAsPlainText' ? 58 : 64;
              break;

            case 53:
              htmlBlock = this.createBlockP(text.trim());
              this.insertAfter(htmlBlock, parent);
              this.removeBlock(parent); // handler heading

              this.insertHtmlBlock(htmlBlock);
              return _context3.abrupt("break", 64);

            case 58:
              lines = text.trim().split(LINE_BREAKS_REG);
              _htmlBlock = null;

              if (!startBlock.text || lines.length > 1) {
                _htmlBlock = this.createBlockP((startBlock.text ? lines.slice(1) : lines).join('\n'));
              }

              if (_htmlBlock) {
                this.insertAfter(_htmlBlock, parent);
                this.insertHtmlBlock(_htmlBlock);
              }

              if (startBlock.text) {
                appendHtml(lines[0]);
              } else {
                this.removeBlock(parent);
              }

              return _context3.abrupt("break", 64);

            case 64:
              return _context3.abrupt("return", this.partialRender());

            case 65:
              stateFragments = type === 'pasteAsPlainText' || copyType === 'copyAsMarkdown' ? this.markdownToState(text) : this.html2State(html);

              if (!(stateFragments.length <= 0)) {
                _context3.next = 68;
                break;
              }

              return _context3.abrupt("return");

            case 68:
              // step 1: if select content, cut the content, and chop the block text into two part by the cursor.
              cacheText = endBlock.text.substring(end.offset);
              startBlock.text = startBlock.text.substring(0, start.offset); // step 2: when insert the fragments, check begin a new block, or insert into pre block.

              firstFragment = stateFragments[0];
              tailFragments = stateFragments.slice(1);
              pasteType = this.checkPasteType(startBlock, firstFragment);

              getLastBlock = function getLastBlock(blocks) {
                var len = blocks.length;
                var lastBlock = blocks[len - 1];

                if (lastBlock.children.length === 0 && HAS_TEXT_BLOCK_REG.test(lastBlock.type)) {
                  return lastBlock;
                } else {
                  if (lastBlock.editable === false) {
                    return getLastBlock(blocks[len - 2].children);
                  } else {
                    return getLastBlock(lastBlock.children);
                  }
                }
              };

              lastBlock = getLastBlock(stateFragments);
              key = lastBlock.key;
              offset = lastBlock.text.length;
              lastBlock.text += cacheText;
              _context3.t1 = pasteType;
              _context3.next = _context3.t1 === 'MERGE' ? 81 : _context3.t1 === 'NEWLINE' ? 83 : 87;
              break;

            case 81:
              if (LIST_REG.test(firstFragment.type)) {
                listItems = firstFragment.children;
                firstListItem = listItems[0];
                liChildren = firstListItem.children;
                originListItem = this.getParent(parent);
                originList = this.getParent(originListItem);
                targetListType = firstFragment.children[0].isLooseListItem;
                originListType = originList.children[0].isLooseListItem; // No matter copy loose list to tight list or vice versa, the result is one loose list.

                if (targetListType !== originListType) {
                  if (!targetListType) {
                    firstFragment.children.forEach(function (item) {
                      return item.isLooseListItem = true;
                    });
                  } else {
                    originList.children.forEach(function (item) {
                      return item.isLooseListItem = true;
                    });
                  }
                }

                if (liChildren[0].type === 'p') {
                  // TODO @JOCS
                  startBlock.text += liChildren[0].children[0].text;
                  tail = liChildren.slice(1);

                  if (tail.length) {
                    tail.forEach(function (t) {
                      _this2.appendChild(originListItem, t);
                    });
                  }

                  firstFragmentTail = listItems.slice(1);

                  if (firstFragmentTail.length) {
                    firstFragmentTail.forEach(function (t) {
                      _this2.appendChild(originList, t);
                    });
                  }
                } else {
                  listItems.forEach(function (c) {
                    _this2.appendChild(originList, c);
                  });
                }

                target = originList;
                tailFragments.forEach(function (block) {
                  _this2.insertAfter(block, target);

                  target = block;
                });
              } else if (firstFragment.type === 'p' || /^h\d/.test(firstFragment.type)) {
                _text = firstFragment.children[0].text;
                _lines = _text.split('\n');
                _target = parent;

                if (parent.headingStyle === 'atx') {
                  startBlock.text += _lines[0];

                  if (_lines.length > 1) {
                    pBlock = this.createBlockP(_lines.slice(1).join('\n'));
                    this.insertAfter(parent, pBlock);
                    _target = pBlock;
                  }
                } else {
                  startBlock.text += _text;
                }

                tailFragments.forEach(function (block) {
                  _this2.insertAfter(block, _target);

                  _target = block;
                });
              }

              return _context3.abrupt("break", 88);

            case 83:
              _target2 = parent;
              stateFragments.forEach(function (block) {
                _this2.insertAfter(block, _target2);

                _target2 = block;
              });

              if (startBlock.text.length === 0) {
                this.removeBlock(parent);
              }

              return _context3.abrupt("break", 88);

            case 87:
              throw new Error('unknown paste type');

            case 88:
              // step 3: set cursor and render
              cursorBlock = this.getBlock(key);

              if (!cursorBlock) {
                key = startBlock.key;
                offset = startBlock.text.length - cacheText.length;
                cursorBlock = startBlock;
              }

              this.cursor = {
                start: {
                  key: key,
                  offset: offset
                },
                end: {
                  key: key,
                  offset: offset
                }
              };
              this.checkInlineUpdate(cursorBlock);
              this.partialRender();

            case 93:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3, this);
    }));

    return function (_x3) {
      return _ref3.apply(this, arguments);
    };
  }();
};

/* harmony default export */ var contentState_pasteCtrl = (pasteCtrl_pasteCtrl);
// CONCATENATED MODULE: ./src/muya/lib/parser/marked/options.js
/* harmony default export */ var marked_options = ({
  baseUrl: null,
  breaks: false,
  gfm: true,
  // TODO: We set weather to support `emoji`, `math`, `frontMatter` default value to `true`
  // After we add user setting, we maybe set math and frontMatter default value to false.
  // User need to enable them in the user setting.
  emoji: true,
  math: true,
  frontMatter: true,
  headerIds: true,
  headerPrefix: '',
  highlight: null,
  mathRenderer: null,
  emojiRenderer: null,
  langPrefix: 'language-',
  mangle: true,
  pedantic: false,
  renderer: null,
  // new Renderer(),
  sanitize: false,
  sanitizer: null,
  silent: false,
  smartLists: false,
  smartypants: false,
  tables: true,
  xhtml: false,
  disableInline: false
});
// CONCATENATED MODULE: ./src/muya/lib/parser/marked/utils.js




/**
 * Helpers
 */
var utils_escape = function escape(html, encode) {
  if (encode) {
    if (escape.escapeTest.test(html)) {
      return html.replace(escape.escapeReplace, function (ch) {
        return escape.replacements[ch];
      });
    }
  } else {
    if (escape.escapeTestNoEncode.test(html)) {
      return html.replace(escape.escapeReplaceNoEncode, function (ch) {
        return escape.replacements[ch];
      });
    }
  }

  return html;
};
utils_escape.escapeTest = /[&<>"']/;
utils_escape.escapeReplace = /[&<>"']/g;
utils_escape.replacements = {
  '&': '&amp;',
  '<': '&lt;',
  '>': '&gt;',
  '"': '&quot;',
  "'": '&#39;'
};
utils_escape.escapeTestNoEncode = /[<>"']|&(?!#?\w+;)/;
utils_escape.escapeReplaceNoEncode = /[<>"']|&(?!#?\w+;)/g;
var utils_unescape = function unescape(html) {
  // explicitly match decimal, hex, and named HTML entities
  return html.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig, function (_, n) {
    n = n.toLowerCase();
    if (n === 'colon') return ':';

    if (n.charAt(0) === '#') {
      return n.charAt(1) === 'x' ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1));
    }

    return '';
  });
};
var edit = function edit(regex, opt) {
  regex = regex.source || regex;
  opt = opt || '';
  return {
    replace: function replace(name, val) {
      val = val.source || val;
      val = val.replace(/(^|[^\[])\^/g, '$1'); // eslint-disable-line no-useless-escape

      regex = regex.replace(name, val);
      return this;
    },
    getRegex: function getRegex() {
      return new RegExp(regex, opt);
    }
  };
};
var cleanUrl = function cleanUrl(sanitize, base, href) {
  if (sanitize) {
    var prot = '';

    try {
      prot = decodeURIComponent(utils_unescape(href)).replace(/[^\w:]/g, '').toLowerCase();
    } catch (e) {
      return null;
    }

    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {
      return null;
    }
  }

  if (base && !originIndependentUrl.test(href)) {
    href = resolveUrl(base, href);
  }

  try {
    href = encodeURI(href).replace(/%25/g, '%');
  } catch (e) {
    return null;
  }

  return href;
};

var resolveUrl = function resolveUrl(base, href) {
  if (!baseUrls[' ' + base]) {
    // we can ignore everything in base after the last slash of its path component,
    // but we might need to add _that_
    // https://tools.ietf.org/html/rfc3986#section-3
    if (/^[^:]+:\/*[^/]*$/.test(base)) {
      baseUrls[' ' + base] = base + '/';
    } else {
      baseUrls[' ' + base] = rtrim(base, '/', true);
    }
  }

  base = baseUrls[' ' + base];

  if (href.slice(0, 2) === '//') {
    return base.replace(/:[\s\S]*/, ':') + href;
  } else if (href.charAt(0) === '/') {
    return base.replace(/(:\/*[^/]*)[\s\S]*/, '$1') + href;
  } else {
    return base + href;
  }
};

var baseUrls = {};
var originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;
var utils_noop = function noop() {};
utils_noop.exec = utils_noop;
var splitCells = function splitCells(tableRow, count) {
  // ensure that every cell-delimiting pipe has a space
  // before it to distinguish it from an escaped pipe
  var row = tableRow.replace(/\|/g, function (match, offset, str) {
    var escaped = false,
        curr = offset;

    while (--curr >= 0 && str[curr] === '\\') {
      escaped = !escaped;
    }

    if (escaped) {
      // odd number of slashes means | is escaped
      // so we leave it alone
      return '|';
    } else {
      // add space before unescaped |
      return ' |';
    }
  }),
      cells = row.split(/ \|/),
      i = 0;

  if (cells.length > count) {
    cells.splice(count);
  } else {
    while (cells.length < count) {
      cells.push('');
    }
  }

  for (; i < cells.length; i++) {
    // leading or trailing whitespace is ignored per the gfm spec
    cells[i] = cells[i].trim().replace(/\\\|/g, '|');
  }

  return cells;
}; // Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').
// /c*$/ is vulnerable to REDOS.
// invert: Remove suffix of non-c chars instead. Default falsey.

var rtrim = function rtrim(str, c, invert) {
  if (str.length === 0) {
    return '';
  } // Length of suffix matching the invert condition.


  var suffLen = 0; // Step left until we fail to match the invert condition.

  while (suffLen < str.length) {
    var currChar = str.charAt(str.length - suffLen - 1);

    if (currChar === c && !invert) {
      suffLen++;
    } else if (currChar !== c && invert) {
      suffLen++;
    } else {
      break;
    }
  }

  return str.substr(0, str.length - suffLen);
};
var findClosingBracket = function findClosingBracket(str, b) {
  if (str.indexOf(b[1]) === -1) {
    return -1;
  }

  var level = 0;

  for (var i = 0; i < str.length; i++) {
    if (str[i] === '\\') {
      i++;
    } else if (str[i] === b[0]) {
      level++;
    } else if (str[i] === b[1]) {
      level--;

      if (level < 0) {
        return i;
      }
    }
  }

  return -1;
};
// CONCATENATED MODULE: ./src/muya/lib/parser/marked/renderer.js




/**
 * Renderer
 */

function Renderer() {
  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  this.options = options || marked_options;
}

Renderer.prototype.frontmatter = function (text) {
  return "<pre class=\"front-matter\">\n".concat(text, "</pre>\n");
};

Renderer.prototype.multiplemath = function (text) {
  var output = '';

  if (this.options.mathRenderer) {
    var displayMode = true;
    output = this.options.mathRenderer(text, displayMode);
  }

  return output || "<pre class=\"multiple-math\">\n".concat(text, "</pre>\n");
};

Renderer.prototype.inlineMath = function (math) {
  var output = '';

  if (this.options.mathRenderer) {
    var displayMode = false;
    output = this.options.mathRenderer(math, displayMode);
  }

  return output || math;
};

Renderer.prototype.emoji = function (text, emoji) {
  if (this.options.emojiRenderer) {
    return this.options.emojiRenderer(emoji);
  } else {
    return text;
  }
};

Renderer.prototype.code = function (code, infostring, escaped, codeBlockStyle) {
  var lang = (infostring || '').match(/\S*/)[0];

  if (this.options.highlight) {
    var out = this.options.highlight(code, lang);

    if (out !== null && out !== code) {
      escaped = true;
      code = out;
    }
  }

  var className = codeBlockStyle === 'fenced' ? 'fenced-code-block' : 'indented-code-block';
  className = lang ? "".concat(className, " ").concat(this.options.langPrefix).concat(utils_escape(lang, true)) : className;
  return '<pre><code class="' + className + '">' + (escaped ? code : utils_escape(code, true)) + '\n</code></pre>\n';
};

Renderer.prototype.blockquote = function (quote) {
  return '<blockquote>\n' + quote + '</blockquote>\n';
};

Renderer.prototype.html = function (html) {
  return html;
};

Renderer.prototype.heading = function (text, level, raw, slugger, headingStyle) {
  if (this.options.headerIds) {
    return '<h' + level + ' id="' + this.options.headerPrefix + slugger.slug(raw) + '" class="' + headingStyle + '">' + text + '</h' + level + '>\n';
  } // ignore IDs


  return '<h' + level + '>' + text + '</h' + level + '>\n';
};

Renderer.prototype.hr = function () {
  return this.options.xhtml ? '<hr/>\n' : '<hr>\n';
};

Renderer.prototype.list = function (body, ordered, start, taskList) {
  var type = ordered ? 'ol' : 'ul';
  var startatt = ordered && start !== 1 ? ' start="' + start + '"' : '';
  return '<' + type + startatt + '>\n' + body + '</' + type + '>\n';
};

Renderer.prototype.listitem = function (text, checked) {
  // normal list
  if (checked === undefined) {
    return '<li>' + text + '</li>\n';
  } // task list


  return '<li class="task-list-item"><input type="checkbox"' + (checked ? ' checked=""' : '') + ' disabled=""' + (this.options.xhtml ? ' /' : '') + '> ' + text + '</li>\n';
};

Renderer.prototype.paragraph = function (text) {
  return '<p>' + text + '</p>\n';
};

Renderer.prototype.table = function (header, body) {
  if (body) body = '<tbody>' + body + '</tbody>';
  return '<table>\n' + '<thead>\n' + header + '</thead>\n' + body + '</table>\n';
};

Renderer.prototype.tablerow = function (content) {
  return '<tr>\n' + content + '</tr>\n';
};

Renderer.prototype.tablecell = function (content, flags) {
  var type = flags.header ? 'th' : 'td';
  var tag = flags.align ? '<' + type + ' align="' + flags.align + '">' : '<' + type + '>';
  return tag + content + '</' + type + '>\n';
}; // span level renderer


Renderer.prototype.strong = function (text) {
  return '<strong>' + text + '</strong>';
};

Renderer.prototype.em = function (text) {
  return '<em>' + text + '</em>';
};

Renderer.prototype.codespan = function (text) {
  return '<code>' + text + '</code>';
};

Renderer.prototype.br = function () {
  return this.options.xhtml ? '<br/>' : '<br>';
};

Renderer.prototype.del = function (text) {
  return '<del>' + text + '</del>';
};

Renderer.prototype.link = function (href, title, text) {
  href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);

  if (href === null) {
    return text;
  }

  var out = '<a href="' + utils_escape(href) + '"';

  if (title) {
    out += ' title="' + title + '"';
  }

  out += '>' + text + '</a>';
  return out;
};

Renderer.prototype.image = function (href, title, text) {
  href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);

  if (href === null) {
    return text;
  }

  var out = '<img src="' + href + '" alt="' + text.replace(/\*/g, '') + '"';

  if (title) {
    out += ' title="' + title + '"';
  }

  out += this.options.xhtml ? '/>' : '>';
  return out;
};

Renderer.prototype.text = function (text) {
  return text;
};

/* harmony default export */ var renderer = (Renderer);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.string.ends-with.js
var es6_string_ends_with = __webpack_require__("aef6");

// CONCATENATED MODULE: ./src/muya/lib/parser/marked/blockRules.js


/* eslint-disable no-useless-escape */

/**
 * Block-Level Rules
 */

var blockRules_block = {
  newline: /^\n+/,
  code: /^( {4}[^\n]+\n*)+/,
  fences: utils_noop,
  hr: /^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,
  heading: /^ {0,3}(#{1,6})(?: +([^\n]*?)( *#+ *)?(?:\n+|$)|(?:\n+|$))/,
  nptable: utils_noop,
  blockquote: /^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,
  list: /^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,
  html: '^ {0,3}(?:' // optional indentation
  + '<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)' // (1)
  + '|comment[^\\n]*(\\n+|$)' // (2)
  + '|<\\?[\\s\\S]*?\\?>\\n*' // (3)
  + '|<![A-Z][\\s\\S]*?>\\n*' // (4)
  + '|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*' // (5)
  + '|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)' // (6)
  + '|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=\\h*\\n)[\\s\\S]*?(?:\\n{2,}|$)' // (7) open tag
  + '|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=\\h*\\n)[\\s\\S]*?(?:\\n{2,}|$)' // (7) closing tag
  + ')',
  def: /^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,
  table: utils_noop,
  lheading: /^([^\n]+)\n {0,3}(=|-){2,} *(?:\n+|$)/,
  paragraph: /^([^\n]+(?:\n(?!hr|heading|lheading| {0,3}>|<\/?(?:tag)(?: +|\n|\/?>)|<(?:script|pre|style|!--))[^\n]+)*)/,
  text: /^[^\n]+/,
  // extra
  frontmatter: /^---\n([\s\S]+?)---(?:\n+|$)/,
  multiplemath: /^\$\$\n([\s\S]+?)\n\$\$(?:\n+|$)/
};
blockRules_block._label = /(?!\s*\])(?:\\[\[\]]|[^\[\]])+/;
blockRules_block._title = /(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;
blockRules_block.def = edit(blockRules_block.def).replace('label', blockRules_block._label).replace('title', blockRules_block._title).getRegex();
blockRules_block.checkbox = /^\[([ xX])\] +/;
blockRules_block.bullet = /(?:[*+-]|\d{1,9}(?:\.|\)))/; // patched: support "(" as ordered list delimiter too
// patched: fix https://github.com/marktext/marktext/issues/831#issuecomment-477719256
// block.item = /^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/

blockRules_block.item = /^(( {0,3})(bull) [^\n]*(?:\n(?!(\2bull |\2bull\n))[^\n]*)*|( {0,3})(bull)(?:\n(?!(\2bull |\2bull\n)))*)/;
blockRules_block.item = edit(blockRules_block.item, 'gm').replace(/bull/g, blockRules_block.bullet).getRegex();
blockRules_block.list = edit(blockRules_block.list).replace(/bull/g, blockRules_block.bullet).replace('hr', '\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))').replace('def', '\\n+(?=' + blockRules_block.def.source + ')').getRegex();
blockRules_block._tag = 'address|article|aside|base|basefont|blockquote|body|caption' + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption' + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe' + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option' + '|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr' + '|track|ul';
blockRules_block._comment = /<!--(?!-?>)[\s\S]*?-->/;
blockRules_block.html = edit(blockRules_block.html, 'i').replace('comment', blockRules_block._comment).replace('tag', blockRules_block._tag).replace('attribute', / +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();
blockRules_block.paragraph = edit(blockRules_block.paragraph).replace('hr', blockRules_block.hr).replace('heading', blockRules_block.heading).replace('lheading', blockRules_block.lheading).replace('tag', blockRules_block._tag) // pars can be interrupted by type (6) html blocks
.getRegex();
blockRules_block.blockquote = edit(blockRules_block.blockquote).replace('paragraph', blockRules_block.paragraph).getRegex();
/**
 * Normal Block Grammar
 */

var normal = Object.assign({}, blockRules_block);
/**
 * GFM Block Grammar
 */

var blockRules_gfm = Object.assign({}, normal, {
  fences: /^ {0,3}(`{3,}|~{3,})([^`\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,
  paragraph: /^/
});
blockRules_gfm.paragraph = edit(blockRules_block.paragraph).replace('(?!', '(?!' + blockRules_gfm.fences.source.replace('\\1', '\\2') + '|' + blockRules_block.list.source.replace('\\1', '\\3') + '|').getRegex();
/**
 * GFM + Tables Block Grammar
 */

var blockRules_tables = Object.assign({}, blockRules_gfm, {
  nptable: /^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,
  table: /^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/
});
/**
 * Pedantic grammar
 */

var pedantic = Object.assign({}, normal, {
  html: edit('^ *(?:comment *(?:\\n|\\s*$)' + '|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)' // closed tag
  + '|<tag(?:"[^"]*"|\'[^\']*\'|\\s[^\'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))').replace('comment', blockRules_block._comment).replace(/tag/g, '(?!(?:' + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub' + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)' + '\\b)\\w+(?!:|[^\\w\\s@]*@)\\b').getRegex(),
  def: /^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/
});
/* eslint-ensable no-useless-escape */
// CONCATENATED MODULE: ./src/muya/lib/parser/marked/lexer.js














function lexer_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = lexer_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function lexer_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return lexer_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return lexer_arrayLikeToArray(o, minLen); }

function lexer_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }




/**
 * Block Lexer
 */

function Lexer(opts) {
  this.tokens = [];
  this.tokens.links = Object.create(null);
  this.options = Object.assign({}, marked_options, opts);
  this.rules = normal;

  if (this.options.pedantic) {
    this.rules = pedantic;
  } else if (this.options.gfm) {
    if (this.options.tables) {
      this.rules = blockRules_tables;
    } else {
      this.rules = blockRules_gfm;
    }
  }
}
/**
 * Preprocessing
 */


Lexer.prototype.lex = function (src) {
  src = src.replace(/\r\n|\r/g, '\n') // replace `\t` to four space.
  .replace(/\t/g, '    ') // .replace(/\u00a0/g, ' ')
  .replace(/\u2424/g, '\n');
  this.checkFrontmatter = true;
  return this.token(src, true);
};
/**
 * Lexing
 */


Lexer.prototype.token = function (src, top) {
  var _this$options = this.options,
      frontMatter = _this$options.frontMatter,
      math = _this$options.math;
  src = src.replace(/^ +$/gm, '');
  var loose;
  var cap;
  var bull;
  var b;
  var item;
  var space;
  var i;
  var tag;
  var l;
  var checked; // Only check front matter at the begining of a markdown file.
  // Why "checkFrontmatter" and "top"? See note in "blockquote".

  if (frontMatter) {
    cap = this.rules.frontmatter.exec(src);

    if (this.checkFrontmatter && top && cap) {
      src = src.substring(cap[0].length);
      this.tokens.push({
        type: 'frontmatter',
        text: cap[1]
      });
    }

    this.checkFrontmatter = false;
  }

  while (src) {
    // newline
    cap = this.rules.newline.exec(src);

    if (cap) {
      src = src.substring(cap[0].length);

      if (cap[0].length > 1) {
        this.tokens.push({
          type: 'space'
        });
      }
    } // code
    // An indented code block cannot interrupt a paragraph.


    cap = this.rules.code.exec(src);

    if (cap) {
      var lastToken = this.tokens[this.tokens.length - 1];
      src = src.substring(cap[0].length);

      if (lastToken && lastToken.type === 'paragraph') {
        lastToken.text += "\n".concat(cap[0].trimRight());
      } else {
        cap = cap[0].replace(/^ {4}/gm, '');
        this.tokens.push({
          type: 'code',
          codeBlockStyle: 'indented',
          text: !this.options.pedantic ? rtrim(cap, '\n') : cap
        });
      }

      continue;
    } // multiple line math


    if (math) {
      cap = this.rules.multiplemath.exec(src);

      if (cap) {
        src = src.substring(cap[0].length);
        this.tokens.push({
          type: 'multiplemath',
          text: cap[1]
        });
        continue;
      }
    } // fences (gfm)


    cap = this.rules.fences.exec(src);

    if (cap) {
      src = src.substring(cap[0].length);
      this.tokens.push({
        type: 'code',
        codeBlockStyle: 'fenced',
        lang: cap[2] ? cap[2].trim() : cap[2],
        text: cap[3] || ''
      });
      continue;
    } // heading


    cap = this.rules.heading.exec(src);

    if (cap) {
      src = src.substring(cap[0].length);
      var text = cap[2] || '';

      if (cap[3] && !cap[3].startsWith(' ') && !/ +#+ *(?:\n+|$)/.test(cap[0])) {
        text = (text + cap[3]).trim();
      }

      this.tokens.push({
        type: 'heading',
        headingStyle: 'atx',
        depth: cap[1].length,
        text: text
      });
      continue;
    } // table no leading pipe (gfm)


    cap = this.rules.nptable.exec(src);

    if (cap) {
      item = {
        type: 'table',
        header: splitCells(cap[1].replace(/^ *| *\| *$/g, '')),
        align: cap[2].replace(/^ *|\| *$/g, '').split(/ *\| */),
        cells: cap[3] ? cap[3].replace(/\n$/, '').split('\n') : []
      };

      if (item.header.length === item.align.length) {
        src = src.substring(cap[0].length);

        for (i = 0; i < item.align.length; i++) {
          if (/^ *-+: *$/.test(item.align[i])) {
            item.align[i] = 'right';
          } else if (/^ *:-+: *$/.test(item.align[i])) {
            item.align[i] = 'center';
          } else if (/^ *:-+ *$/.test(item.align[i])) {
            item.align[i] = 'left';
          } else {
            item.align[i] = null;
          }
        }

        for (i = 0; i < item.cells.length; i++) {
          item.cells[i] = splitCells(item.cells[i], item.header.length);
        }

        this.tokens.push(item);
        continue;
      }
    } // hr


    cap = this.rules.hr.exec(src);

    if (cap) {
      var marker = cap[0].replace(/\n*$/, '');
      src = src.substring(cap[0].length);
      this.tokens.push({
        type: 'hr',
        marker: marker
      });
      continue;
    } // blockquote


    cap = this.rules.blockquote.exec(src);

    if (cap) {
      src = src.substring(cap[0].length);
      this.tokens.push({
        type: 'blockquote_start'
      });
      cap = cap[0].replace(/^ *> ?/gm, ''); // Pass `top` to keep the current
      // "toplevel" state. This is exactly
      // how markdown.pl works.

      this.token(cap, top);
      this.tokens.push({
        type: 'blockquote_end'
      });
      continue;
    } // NOTE: Complete list lexer part is a custom implementation based on an older marked.js version.
    // list


    cap = this.rules.list.exec(src);

    if (cap) {
      src = src.substring(cap[0].length);
      bull = cap[2];
      var isOrdered = bull.length > 1;
      this.tokens.push({
        type: 'list_start',
        ordered: isOrdered,
        listType: bull.length > 1 ? 'order' : /^( {0,3})([-*+]) \[[xX ]\]/.test(cap[0]) ? 'task' : 'bullet',
        start: isOrdered ? +bull.slice(0, -1) : ''
      });
      var next = false;
      var prevNext = true;
      var listItemIndices = [];
      var isTaskList = false; // Get each top-level item.

      cap = cap[0].match(this.rules.item);
      l = cap.length;
      i = 0;

      for (; i < l; i++) {
        var itemWithBullet = cap[i];
        item = itemWithBullet;
        var newIsTaskListItem = false; // Remove the list item's bullet
        // so it is seen as the next token.

        space = item.length;
        var newBull = void 0;
        item = item.replace(/^ *([*+-]|\d+(?:\.|\))) {0,4}/, function (m, p1) {
          // Get and remove list item bullet
          newBull = p1 || bull;
          return '';
        });
        var newIsOrdered = bull.length > 1 && /\d{1,9}/.test(newBull);

        if (!newIsOrdered && this.options.gfm) {
          checked = this.rules.checkbox.exec(item);

          if (checked) {
            checked = checked[1] === 'x' || checked[1] === 'X';
            item = item.replace(this.rules.checkbox, '');
            newIsTaskListItem = true;
          } else {
            checked = undefined;
          }
        }

        if (i === 0) {
          isTaskList = newIsTaskListItem;
        } else if ( // Changing the bullet or ordered list delimiter starts a new list (CommonMark 264 and 265)
        //   - unordered, unordered --> bull !== newBull --> new list (e.g "-" --> "*")
        //   - ordered, ordered --> lastChar !== lastChar --> new list (e.g "." --> ")")
        //   - else --> new list (e.g. ordered --> unordered)
        i !== 0 && (!isOrdered && !newIsOrdered && bull !== newBull || isOrdered && newIsOrdered && bull.slice(-1) !== newBull.slice(-1) || isOrdered !== newIsOrdered || // Changing to/from task list item from/to bullet, starts a new list(work for marktext issue #870)
        // Because we distinguish between task list and bullet list in Mark Text,
        // the parsing here is somewhat different from the commonmark Spec,
        // and the task list needs to be a separate list.
        isTaskList !== newIsTaskListItem)) {
          this.tokens.push({
            type: 'list_end'
          }); // Start a new list

          bull = newBull;
          isOrdered = newIsOrdered;
          isTaskList = newIsTaskListItem;
          this.tokens.push({
            type: 'list_start',
            ordered: isOrdered,
            listType: bull.length > 1 ? 'order' : /^( {0,3})([-*+]) \[[xX ]\]/.test(itemWithBullet) ? 'task' : 'bullet',
            start: isOrdered ? +bull.slice(0, -1) : ''
          });
        } // Outdent whatever the
        // list item contains. Hacky.


        if (~item.indexOf('\n ')) {
          space -= item.length;
          item = !this.options.pedantic ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '') : item.replace(/^ {1,4}/gm, '');
        } // Determine whether the next list item belongs here.
        // Backpedal if it does not belong in this list.


        if (i !== l - 1) {
          b = this.rules.bullet.exec(cap[i + 1])[0];

          if (bull.length > 1 ? b.length === 1 : b.length > 1 || this.options.smartLists && b !== bull) {
            src = cap.slice(i + 1).join('\n') + src;
            i = l - 1;
          }
        }

        var prevItem = '';

        if (i === 0) {
          prevItem = item;
        } else {
          prevItem = cap[i - 1];
        } // Determine whether item is loose or not. If previous item is loose
        // this item is also loose.
        // A list is loose if any of its constituent list items are separated by blank lines,
        // or if any of its constituent list items directly contain two block-level elements with a blank line between them. 
        // loose = next = next || /^ *([*+-]|\d{1,9}(?:\.|\)))( +\S+\n\n(?!\s*$)|\n\n(?!\s*$))/.test(itemWithBullet)


        loose = next = next || /\n\n(?!\s*$)/.test(item); // Check if previous line ends with a new line.

        if (!loose && (i !== 0 || l > 1) && prevItem.length !== 0 && prevItem.charAt(prevItem.length - 1) === '\n') {
          loose = next = true;
        } // A list is either loose or tight, so update previous list items but not nested list items.


        if (next && prevNext !== next) {
          var _iterator = lexer_createForOfIteratorHelper(listItemIndices),
              _step;

          try {
            for (_iterator.s(); !(_step = _iterator.n()).done;) {
              var index = _step.value;
              this.tokens[index].type = 'loose_item_start';
            }
          } catch (err) {
            _iterator.e(err);
          } finally {
            _iterator.f();
          }

          listItemIndices = [];
        }

        prevNext = next;

        if (!loose) {
          listItemIndices.push(this.tokens.length);
        }

        var isOrderedListItem = /\d/.test(bull);
        this.tokens.push({
          checked: checked,
          listItemType: bull.length > 1 ? 'order' : isTaskList ? 'task' : 'bullet',
          bulletMarkerOrDelimiter: isOrderedListItem ? bull.slice(-1) : bull.charAt(0),
          type: loose ? 'loose_item_start' : 'list_item_start'
        });

        if (/^\s*$/.test(item)) {
          this.tokens.push({
            type: 'text',
            text: ''
          });
        } else {
          // Recurse.
          this.token(item, false);
        }

        this.tokens.push({
          type: 'list_item_end'
        });
      }

      this.tokens.push({
        type: 'list_end'
      });
      continue;
    } // html


    cap = this.rules.html.exec(src);

    if (cap) {
      src = src.substring(cap[0].length);
      this.tokens.push({
        type: this.options.sanitize ? 'paragraph' : 'html',
        pre: !this.options.sanitizer && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),
        text: cap[0]
      });
      continue;
    } // def


    cap = this.rules.def.exec(src);

    if (top && cap) {
      var _text = '';

      do {
        src = src.substring(cap[0].length);
        if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);
        tag = cap[1].toLowerCase().replace(/\s+/g, ' ');

        if (!this.tokens.links[tag]) {
          this.tokens.links[tag] = {
            href: cap[2],
            title: cap[3]
          };
        }

        _text += cap[0];
        if (cap[0].endsWith('\n\n')) break;
        cap = this.rules.def.exec(src);
      } while (cap);

      if (this.options.disableInline) {
        this.tokens.push({
          type: 'paragraph',
          text: _text.replace(/\n*$/, '')
        });
      }

      continue;
    } // table (gfm)


    cap = this.rules.table.exec(src);

    if (cap) {
      item = {
        type: 'table',
        header: splitCells(cap[1].replace(/^ *| *\| *$/g, '')),
        align: cap[2].replace(/^ *|\| *$/g, '').split(/ *\| */),
        cells: cap[3] ? cap[3].replace(/\n$/, '').split('\n') : []
      };

      if (item.header.length === item.align.length) {
        src = src.substring(cap[0].length);

        for (i = 0; i < item.align.length; i++) {
          if (/^ *-+: *$/.test(item.align[i])) {
            item.align[i] = 'right';
          } else if (/^ *:-+: *$/.test(item.align[i])) {
            item.align[i] = 'center';
          } else if (/^ *:-+ *$/.test(item.align[i])) {
            item.align[i] = 'left';
          } else {
            item.align[i] = null;
          }
        }

        for (i = 0; i < item.cells.length; i++) {
          item.cells[i] = splitCells(item.cells[i].replace(/^ *\| *| *\| *$/g, ''), item.header.length);
        }

        this.tokens.push(item);
        continue;
      }
    } // lheading


    cap = this.rules.lheading.exec(src);

    if (cap) {
      var precededToken = this.tokens[this.tokens.length - 1];
      var chops = cap[0].trim().split(/\n/);
      var _marker = chops[chops.length - 1];
      src = src.substring(cap[0].length);

      if (precededToken && precededToken.type === 'paragraph') {
        this.tokens.pop();
        this.tokens.push({
          type: 'heading',
          headingStyle: 'setext',
          depth: cap[2] === '=' ? 1 : 2,
          text: precededToken.text + '\n' + cap[1],
          marker: _marker
        });
      } else {
        this.tokens.push({
          type: 'heading',
          headingStyle: 'setext',
          depth: cap[2] === '=' ? 1 : 2,
          text: cap[1],
          marker: _marker
        });
      }

      continue;
    } // top-level paragraph


    cap = this.rules.paragraph.exec(src);

    if (top && cap) {
      src = src.substring(cap[0].length);
      this.tokens.push({
        type: 'paragraph',
        text: cap[1].charAt(cap[1].length - 1) === '\n' ? cap[1].slice(0, -1) : cap[1]
      });
      continue;
    } // text


    cap = this.rules.text.exec(src);

    if (cap) {
      // Top-level should never reach here.
      src = src.substring(cap[0].length);
      this.tokens.push({
        type: 'text',
        text: cap[0]
      });
      continue;
    }

    if (src) {
      throw new Error('Infinite loop on byte: ' + src.charCodeAt(0));
    }
  }

  return this.tokens;
};

/* harmony default export */ var lexer = (Lexer);
// CONCATENATED MODULE: ./src/muya/lib/parser/marked/inlineRules.js




/* eslint-disable no-useless-escape */

/**
 * Inline-Level Grammar
 */

var inline = {
  escape: /^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,
  autolink: /^<(scheme:[^\s\x00-\x1f<>]*|email)>/,
  // eslint-disable-line no-control-regex
  url: utils_noop,
  tag: '^comment' + '|^</[a-zA-Z][\\w:-]*\\s*>' // self-closing tag
  + '|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>' // open tag
  + '|^<\\?[\\s\\S]*?\\?>' // processing instruction, e.g. <?php ?>
  + '|^<![a-zA-Z]+\\s[\\s\\S]*?>' // declaration, e.g. <!DOCTYPE html>
  + '|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>',
  // CDATA section
  link: /^!?\[(label)\]\(href(?:\s+(title))?\s*\)/,
  reflink: /^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,
  nolink: /^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,
  strong: /^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,
  em: /^_([^\s_])_(?!_)|^\*([^\s*"<\[])\*(?!\*)|^_([^\s][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s"<\[][\s\S]*?[^\s*])\*(?!\*)|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,
  code: /^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,
  br: /^( {2,}|\\)\n(?!\s*$)/,
  del: utils_noop,
  // ------------------------
  // patched
  // allow inline math "$" ("?=[\\<!\[`*]" to "?=[\\<!\[`*\$]")
  text: /^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*\$]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/,
  // emoji is patched in gfm
  // ------------------------
  // extra
  emoji: utils_noop,
  // TODO: make math optional GH#740
  math: /^\$([^$]{1}[\s\S]+?[^$]{1})\$(?!\$)/
}; // list of punctuation marks from common mark spec
// without ` and ] to workaround Rule 17 (inline code blocks/links)

inline._punctuation = '!"#$%&\'()*+,\\-./:;<=>?@\\[^_{|}~';
inline.em = edit(inline.em).replace(/punctuation/g, inline._punctuation).getRegex();
inline._escapes = /\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;
inline._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;
inline._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;
inline.autolink = edit(inline.autolink).replace('scheme', inline._scheme).replace('email', inline._email).getRegex();
inline._attribute = /\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;
inline.tag = edit(inline.tag).replace('comment', blockRules_block._comment).replace('attribute', inline._attribute).getRegex();
inline._label = /(?:\[[^\[\]]*\]|\\[\[\]]?|`[^`]*`|`(?!`)|[^\[\]\\`])*?/;
inline._href = /\s*(<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*)/; // eslint-disable-line no-control-regex

inline._title = /"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;
inline.link = edit(inline.link).replace('label', inline._label).replace('href', inline._href).replace('title', inline._title).getRegex();
inline.reflink = edit(inline.reflink).replace('label', inline._label).getRegex();
/**
 * Normal Inline Grammar
 */

var inlineRules_normal = Object.assign({}, inline);
/**
 * Pedantic Inline Grammar
 */

var inlineRules_pedantic = Object.assign({}, inlineRules_normal, {
  strong: /^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,
  em: /^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,
  link: edit(/^!?\[(label)\]\((.*?)\)/).replace('label', inline._label).getRegex(),
  reflink: edit(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace('label', inline._label).getRegex()
});
/**
 * GFM Inline Grammar
 */

var inlineRules_gfm = Object.assign({}, inlineRules_normal, {
  escape: edit(inline.escape).replace('])', '~|])').getRegex(),
  _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,
  url: /^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,
  _backpedal: /(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,
  del: /^~+(?=\S)([\s\S]*?\S)~+/,
  // ------------------------
  // patched
  // allow inline math "$" and emoji ":" ("?=[\\<!\[`*~]|" to "?=[\\<!\[`*~:\$]|")
  text: /^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~:\$]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/,
  // ------------------------
  // extra
  emoji: /^(:)([a-z_\d+-]+?)\1/ // not real GFM but put it in here

});
inlineRules_gfm.url = edit(inlineRules_gfm.url, 'i').replace('email', inlineRules_gfm._extended_email).getRegex();
/**
 * GFM + Line Breaks Inline Grammar
 */

var breaks = Object.assign({}, inlineRules_gfm, {
  br: edit(inline.br).replace('{2,}', '*').getRegex(),
  text: edit(inlineRules_gfm.text).replace(/\{2,\}/g, '*').getRegex()
});
/* eslint-ensable no-useless-escape */
// CONCATENATED MODULE: ./src/muya/lib/parser/marked/inlineLexer.js












/**
 * Inline Lexer & Compiler
 */

function InlineLexer(links, options) {
  this.options = options || marked_options;
  this.links = links;
  this.rules = inlineRules_normal;
  this.renderer = this.options.renderer || new renderer();
  this.renderer.options = this.options;

  if (!this.links) {
    throw new Error('Tokens array requires a `links` property.');
  }

  if (this.options.pedantic) {
    this.rules = inlineRules_pedantic;
  } else if (this.options.gfm) {
    if (this.options.breaks) {
      this.rules = breaks;
    } else {
      this.rules = inlineRules_gfm;
    }
  }

  this.highPriorityEmpRules = {};
  this.highPriorityLinkRules = {};

  for (var _i = 0, _Object$keys = Object.keys(this.rules); _i < _Object$keys.length; _i++) {
    var key = _Object$keys[_i];

    if (/^(?:autolink|link|code|tag)$/.test(key) && this.rules[key] instanceof RegExp) {
      this.highPriorityEmpRules[key] = this.rules[key];
    }
  }

  for (var _i2 = 0, _Object$keys2 = Object.keys(this.rules); _i2 < _Object$keys2.length; _i2++) {
    var _key = _Object$keys2[_i2];

    if (/^(?:autolink|code|tag)$/.test(_key) && this.rules[_key] instanceof RegExp) {
      this.highPriorityLinkRules[_key] = this.rules[_key];
    }
  }
}
/**
 * Lexing/Compiling
 */


InlineLexer.prototype.output = function (src) {
  // src = src
  // .replace(/\u00a0/g, ' ')
  var _this$options = this.options,
      disableInline = _this$options.disableInline,
      emoji = _this$options.emoji,
      math = _this$options.math;

  if (disableInline) {
    return utils_escape(src);
  }

  var out = '';
  var link;
  var text;
  var href;
  var title;
  var cap;
  var prevCapZero;
  var lastChar = '';

  while (src) {
    // escape
    cap = this.rules.escape.exec(src);

    if (cap) {
      src = src.substring(cap[0].length);
      lastChar = cap[0].charAt(cap[0].length - 1);
      out += utils_escape(cap[1]);
      continue;
    } // tag


    cap = this.rules.tag.exec(src);

    if (cap) {
      if (!this.inLink && /^<a /i.test(cap[0])) {
        this.inLink = true;
      } else if (this.inLink && /^<\/a>/i.test(cap[0])) {
        this.inLink = false;
      }

      if (!this.inRawBlock && /^<(pre|code|kbd|script)(\s|>)/i.test(cap[0])) {
        this.inRawBlock = true;
      } else if (this.inRawBlock && /^<\/(pre|code|kbd|script)(\s|>)/i.test(cap[0])) {
        this.inRawBlock = false;
      }

      src = src.substring(cap[0].length);
      lastChar = cap[0].charAt(cap[0].length - 1);
      out += this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : utils_escape(cap[0]) : cap[0];
      continue;
    } // link


    cap = this.rules.link.exec(src);

    if (cap && lowerPriority(src, cap[0].length, this.highPriorityLinkRules)) {
      var lastParenIndex = findClosingBracket(cap[2], '()');

      if (lastParenIndex > -1) {
        var linkLen = cap[0].length - (cap[2].length - lastParenIndex) - (cap[3] || '').length;
        cap[2] = cap[2].substring(0, lastParenIndex);
        cap[0] = cap[0].substring(0, linkLen).trim();
        cap[3] = '';
      }

      src = src.substring(cap[0].length);
      lastChar = cap[0].charAt(cap[0].length - 1);
      this.inLink = true;
      href = cap[2];

      if (this.options.pedantic) {
        link = /^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(href);

        if (link) {
          href = link[1];
          title = link[3];
        } else {
          title = '';
        }
      } else {
        title = cap[3] ? cap[3].slice(1, -1) : '';
      }

      href = href.trim().replace(/^<([\s\S]*)>$/, '$1');
      out += this.outputLink(cap, {
        href: this.escapes(href),
        title: this.escapes(title)
      });
      this.inLink = false;
      continue;
    } // reflink, nolink


    cap = this.rules.reflink.exec(src) || this.rules.nolink.exec(src);

    if (cap) {
      src = src.substring(cap[0].length);
      lastChar = cap[0].charAt(cap[0].length - 1);
      link = (cap[2] || cap[1]).replace(/\s+/g, ' ');
      link = this.links[link.toLowerCase()];

      if (!link || !link.href) {
        out += cap[0].charAt(0);
        src = cap[0].substring(1) + src;
        continue;
      }

      this.inLink = true;
      out += this.outputLink(cap, link);
      this.inLink = false;
      continue;
    } // math


    if (math) {
      cap = this.rules.math.exec(src);

      if (cap) {
        src = src.substring(cap[0].length);
        lastChar = cap[0].charAt(cap[0].length - 1);
        text = cap[1];
        out += this.renderer.inlineMath(text);
      }
    } // emoji


    if (emoji) {
      cap = this.rules.emoji.exec(src);

      if (cap) {
        src = src.substring(cap[0].length);
        lastChar = cap[0].charAt(cap[0].length - 1);
        text = cap[0];
        out += this.renderer.emoji(text, cap[2]);
      }
    } // strong


    cap = this.rules.strong.exec(src);

    if (cap) {
      var marker = cap[0].match(/^(?:_{1,2}|\*{1,2})/)[0];
      var isValid = validateEmphasize(src, cap[0].length, marker, lastChar, this.highPriorityEmpRules);

      if (isValid) {
        src = src.substring(cap[0].length);
        lastChar = cap[0].charAt(cap[0].length - 1);
        out += this.renderer.strong(this.output(cap[4] || cap[3] || cap[2] || cap[1]));
        continue;
      }
    } // em


    cap = this.rules.em.exec(src);

    if (cap) {
      var _marker = cap[0].match(/^(?:_{1,2}|\*{1,2})/)[0];

      var _isValid = validateEmphasize(src, cap[0].length, _marker, lastChar, this.highPriorityEmpRules);

      if (_isValid) {
        src = src.substring(cap[0].length);
        lastChar = cap[0].charAt(cap[0].length - 1);
        out += this.renderer.em(this.output(cap[6] || cap[5] || cap[4] || cap[3] || cap[2] || cap[1]));
        continue;
      }
    } // code


    cap = this.rules.code.exec(src);

    if (cap) {
      src = src.substring(cap[0].length);
      lastChar = cap[0].charAt(cap[0].length - 1);
      out += this.renderer.codespan(utils_escape(cap[2].trim(), true));
      continue;
    } // br


    cap = this.rules.br.exec(src);

    if (cap) {
      src = src.substring(cap[0].length);
      lastChar = cap[0].charAt(cap[0].length - 1);
      out += this.renderer.br();
      continue;
    } // del (gfm)


    cap = this.rules.del.exec(src);

    if (cap) {
      src = src.substring(cap[0].length);
      lastChar = cap[0].charAt(cap[0].length - 1);
      out += this.renderer.del(this.output(cap[1]));
      continue;
    } // autolink


    cap = this.rules.autolink.exec(src);

    if (cap) {
      src = src.substring(cap[0].length);
      lastChar = cap[0].charAt(cap[0].length - 1);

      if (cap[2] === '@') {
        text = utils_escape(this.mangle(cap[1]));
        href = 'mailto:' + text;
      } else {
        text = utils_escape(cap[1]);
        href = text;
      }

      out += this.renderer.link(href, null, text);
      continue;
    } // url (gfm)


    cap = this.rules.url.exec(src);

    if (!this.inLink && cap) {
      if (cap[2] === '@') {
        text = utils_escape(cap[0]);
        href = 'mailto:' + text;
      } else {
        // do extended autolink path validation
        do {
          prevCapZero = cap[0];
          cap[0] = this.rules._backpedal.exec(cap[0])[0];
        } while (prevCapZero !== cap[0]);

        text = utils_escape(cap[0]);

        if (cap[1] === 'www.') {
          href = 'http://' + text;
        } else {
          href = text;
        }
      }

      src = src.substring(cap[0].length);
      lastChar = cap[0].charAt(cap[0].length - 1);
      out += this.renderer.link(href, null, text);
      continue;
    } // text


    cap = this.rules.text.exec(src);

    if (cap) {
      src = src.substring(cap[0].length);
      lastChar = cap[0].charAt(cap[0].length - 1);

      if (this.inRawBlock) {
        out += this.renderer.text(cap[0]);
      } else {
        out += this.renderer.text(utils_escape(this.smartypants(cap[0])));
      }

      continue;
    }

    if (src) {
      throw new Error('Infinite loop on byte: ' + src.charCodeAt(0));
    }
  }

  return out;
};

InlineLexer.prototype.escapes = function (text) {
  return text ? text.replace(this.rules._escapes, '$1') : text;
};
/**
 * Compile Link
 */


InlineLexer.prototype.outputLink = function (cap, link) {
  var href = link.href;
  var title = link.title ? utils_escape(link.title) : null;
  return cap[0].charAt(0) !== '!' ? this.renderer.link(href, title, this.output(cap[1])) : this.renderer.image(href, title, utils_escape(cap[1]));
};
/**
 * Smartypants Transformations
 */


InlineLexer.prototype.smartypants = function (text) {
  /* eslint-disable no-useless-escape */
  if (!this.options.smartypants) return text;
  return text // em-dashes
  .replace(/---/g, "\u2014") // en-dashes
  .replace(/--/g, "\u2013") // opening singles
  .replace(/(^|[-\u2014/(\[{"\s])'/g, "$1\u2018") // closing singles & apostrophes
  .replace(/'/g, "\u2019") // opening doubles
  .replace(/(^|[-\u2014/(\[{\u2018\s])"/g, "$1\u201C") // closing doubles
  .replace(/"/g, "\u201D") // ellipses
  .replace(/\.{3}/g, "\u2026");
  /* eslint-ensable no-useless-escape */
};
/**
 * Mangle Links
 */


InlineLexer.prototype.mangle = function (text) {
  if (!this.options.mangle) return text;
  var l = text.length;
  var out = '';
  var ch;

  for (var i = 0; i < l; i++) {
    ch = text.charCodeAt(i);

    if (Math.random() > 0.5) {
      ch = 'x' + ch.toString(16);
    }

    out += '&#' + ch + ';';
  }

  return out;
};

/* harmony default export */ var inlineLexer = (InlineLexer);
// CONCATENATED MODULE: ./src/muya/lib/parser/marked/slugger.js


/**
 * Slugger generates header id
 */
function Slugger() {
  this.seen = {};
}
/**
 * Convert string to unique id
 */


Slugger.prototype.slug = function (value) {
  var slug = value.toLowerCase().trim().replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g, '').replace(/\s/g, '-');

  if (this.seen.hasOwnProperty(slug)) {
    var originalSlug = slug;

    do {
      this.seen[originalSlug]++;
      slug = originalSlug + '-' + this.seen[originalSlug];
    } while (this.seen.hasOwnProperty(slug));
  }

  this.seen[slug] = 0;
  return slug;
};

/* harmony default export */ var slugger = (Slugger);
// CONCATENATED MODULE: ./src/muya/lib/parser/marked/textRenderer.js
/**
 * TextRenderer
 * returns only the textual part of the token
 */
function TextRenderer() {} // no need for block level renderers


TextRenderer.prototype.strong = TextRenderer.prototype.em = TextRenderer.prototype.codespan = TextRenderer.prototype.del = TextRenderer.prototype.text = function (text) {
  return text;
};

TextRenderer.prototype.link = TextRenderer.prototype.image = function (href, title, text) {
  return '' + text;
};

TextRenderer.prototype.br = function () {
  return '';
};

/* harmony default export */ var textRenderer = (TextRenderer);
// CONCATENATED MODULE: ./src/muya/lib/parser/marked/parser.js





/**
 * Parsing & Compiling
 */

function Parser(options) {
  this.tokens = [];
  this.token = null;
  this.options = options || marked_options;
  this.options.renderer = this.options.renderer || new renderer();
  this.renderer = this.options.renderer;
  this.renderer.options = this.options;
  this.slugger = new slugger();
}
/**
 * Parse Loop
 */


Parser.prototype.parse = function (src) {
  this.inline = new inlineLexer(src.links, this.options); // use an InlineLexer with a TextRenderer to extract pure text

  this.inlineText = new inlineLexer(src.links, Object.assign({}, this.options, {
    renderer: new textRenderer()
  }));
  this.tokens = src.reverse();
  var out = '';

  while (this.next()) {
    out += this.tok();
  }

  return out;
};
/**
 * Next Token
 */


Parser.prototype.next = function () {
  this.token = this.tokens.pop();
  return this.token;
};
/**
 * Preview Next Token
 */


Parser.prototype.peek = function () {
  return this.tokens[this.tokens.length - 1] || 0;
};
/**
 * Parse Text Tokens
 */


Parser.prototype.parseText = function () {
  var body = this.token.text;

  while (this.peek().type === 'text') {
    body += '\n' + this.next().text;
  }

  return this.inline.output(body);
};
/**
 * Parse Current Token
 */


Parser.prototype.tok = function () {
  switch (this.token.type) {
    case 'frontmatter':
      {
        return this.renderer.frontmatter(this.token.text);
      }

    case 'space':
      {
        return '';
      }

    case 'hr':
      {
        return this.renderer.hr();
      }

    case 'heading':
      {
        return this.renderer.heading(this.inline.output(this.token.text), this.token.depth, unescape(this.inlineText.output(this.token.text)), this.slugger, this.token.headingStyle);
      }

    case 'multiplemath':
      {
        var text = this.token.text;
        return this.renderer.multiplemath(text);
      }

    case 'code':
      {
        var _this$token = this.token,
            codeBlockStyle = _this$token.codeBlockStyle,
            _text = _this$token.text,
            lang = _this$token.lang,
            escaped = _this$token.escaped;
        return this.renderer.code(_text, lang, escaped, codeBlockStyle);
      }

    case 'table':
      {
        var header = '';
        var body = '';
        var i;
        var row;
        var cell;
        var j; // header

        cell = '';

        for (i = 0; i < this.token.header.length; i++) {
          cell += this.renderer.tablecell(this.inline.output(this.token.header[i]), {
            header: true,
            align: this.token.align[i]
          });
        }

        header += this.renderer.tablerow(cell);

        for (i = 0; i < this.token.cells.length; i++) {
          row = this.token.cells[i];
          cell = '';

          for (j = 0; j < row.length; j++) {
            cell += this.renderer.tablecell(this.inline.output(row[j]), {
              header: false,
              align: this.token.align[j]
            });
          }

          body += this.renderer.tablerow(cell);
        }

        return this.renderer.table(header, body);
      }

    case 'blockquote_start':
      {
        var _body = '';

        while (this.next().type !== 'blockquote_end') {
          _body += this.tok();
        }

        return this.renderer.blockquote(_body);
      }

    case 'list_start':
      {
        var _body2 = '';
        var taskList = false;
        var _this$token2 = this.token,
            ordered = _this$token2.ordered,
            start = _this$token2.start;

        while (this.next().type !== 'list_end') {
          if (this.token.checked !== undefined) {
            taskList = true;
          }

          _body2 += this.tok();
        }

        return this.renderer.list(_body2, ordered, start, taskList);
      }

    case 'list_item_start':
      {
        var _body3 = '';
        var checked = this.token.checked;

        while (this.next().type !== 'list_item_end') {
          _body3 += this.token.type === 'text' ? this.parseText() : this.tok();
        }

        return this.renderer.listitem(_body3, checked);
      }

    case 'loose_item_start':
      {
        var _body4 = '';
        var _checked = this.token.checked;

        while (this.next().type !== 'list_item_end') {
          _body4 += this.tok();
        }

        return this.renderer.listitem(_body4, _checked);
      }

    case 'html':
      {
        // TODO parse inline content if parameter markdown=1
        return this.renderer.html(this.token.text);
      }

    case 'paragraph':
      {
        return this.renderer.paragraph(this.inline.output(this.token.text));
      }

    case 'text':
      {
        return this.renderer.paragraph(this.parseText());
      }

    default:
      {
        var errMsg = 'Token with "' + this.token.type + '" type was not found.';

        if (this.options.silent) {
          console.error(errMsg);
        } else {
          throw new Error(errMsg);
        }
      }
  }
};

/* harmony default export */ var marked_parser = (Parser);
// CONCATENATED MODULE: ./src/muya/lib/parser/marked/index.js





/**
 * Marked
 */

function marked(src) {
  var opt = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  // throw error in case of non string input
  if (typeof src === 'undefined' || src === null) {
    throw new Error('marked(): input parameter is undefined or null');
  }

  if (typeof src !== 'string') {
    throw new Error('marked(): input parameter is of type ' + Object.prototype.toString.call(src) + ', string expected');
  }

  try {
    opt = Object.assign({}, marked_options, opt);
    return new marked_parser(opt).parse(new lexer(opt).lex(src));
  } catch (e) {
    e.message += '\nPlease report this to https://github.com/marktext/marktext/issues.';

    if (opt.silent) {
      return '<p>An error occurred:</p><pre>' + escape(e.message + '', true) + '</pre>';
    }

    throw e;
  }
}


/* harmony default export */ var parser_marked = (marked);
// EXTERNAL MODULE: ./node_modules/github-markdown-css/github-markdown.css
var github_markdown = __webpack_require__("e4cb");
var github_markdown_default = /*#__PURE__*/__webpack_require__.n(github_markdown);

// EXTERNAL MODULE: ./node_modules/prismjs/themes/prism.css
var themes_prism = __webpack_require__("a878");
var themes_prism_default = /*#__PURE__*/__webpack_require__.n(themes_prism);

// EXTERNAL MODULE: ./node_modules/katex/dist/katex.css
var dist_katex = __webpack_require__("7cd2");
var dist_katex_default = /*#__PURE__*/__webpack_require__.n(dist_katex);

// CONCATENATED MODULE: ./src/muya/lib/utils/exportHtml.js















function exportHtml_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = exportHtml_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function exportHtml_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return exportHtml_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return exportHtml_arrayLikeToArray(o, minLen); }

function exportHtml_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }














var exportHtml_getSanitizeHtml = function getSanitizeHtml(markdown) {
  var html = parser_marked(markdown);
  return utils_sanitize(html, EXPORT_DOMPURIFY_CONFIG);
};
var DIAGRAM_TYPE = ['mermaid', 'flowchart', 'sequence', 'vega-lite'];

var exportHtml_ExportHtml = /*#__PURE__*/function () {
  function ExportHtml(markdown, muya) {
    var _this = this;

    Object(classCallCheck["a" /* default */])(this, ExportHtml);

    Object(defineProperty["a" /* default */])(this, "mathRenderer", function (math, displayMode) {
      _this.mathRendererCalled = true;
      return katex_default.a.renderToString(math, {
        displayMode: displayMode
      });
    });

    this.markdown = markdown;
    this.muya = muya;
    this.exportContainer = null;
    this.mathRendererCalled = false;
  }

  Object(createClass["a" /* default */])(ExportHtml, [{
    key: "renderMermaid",
    value: function renderMermaid() {
      var codes = this.exportContainer.querySelectorAll('code.language-mermaid');

      var _iterator = exportHtml_createForOfIteratorHelper(codes),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var code = _step.value;
          var preEle = code.parentNode;
          var mermaidContainer = document.createElement('div');
          mermaidContainer.innerHTML = code.innerHTML;
          mermaidContainer.classList.add('mermaid');
          preEle.replaceWith(mermaidContainer);
        } // We only export light theme, so set mermaid theme to `default`, in the future, we can choose whick theme to export.

      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }

      mermaid_core_default.a.initialize({
        theme: 'default'
      });
      mermaid_core_default.a.init(undefined, this.exportContainer.querySelectorAll('div.mermaid'));

      if (this.muya) {
        mermaid_core_default.a.initialize({
          theme: this.muya.options.mermaidTheme
        });
      }
    }
  }, {
    key: "renderDiagram",
    value: function () {
      var _renderDiagram = Object(asyncToGenerator["a" /* default */])( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
        var selector, RENDER_MAP, codes, _iterator2, _step2, code, rawCode, functionType, render, preParent, diagramContainer, options, diagram;

        return regeneratorRuntime.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                selector = 'code.language-vega-lite, code.language-flowchart, code.language-sequence';
                RENDER_MAP = {
                  'flowchart': flowchart_js_default.a,
                  'sequence': sequence,
                  'vega-lite': src_embed["a" /* default */]
                };
                codes = this.exportContainer.querySelectorAll(selector);
                _iterator2 = exportHtml_createForOfIteratorHelper(codes);
                _context.prev = 4;

                _iterator2.s();

              case 6:
                if ((_step2 = _iterator2.n()).done) {
                  _context.next = 30;
                  break;
                }

                code = _step2.value;
                rawCode = unescapeHtml(code.innerHTML);
                functionType = /sequence/.test(code.className) ? 'sequence' : /flowchart/.test(code.className) ? 'flowchart' : 'vega-lite';
                render = RENDER_MAP[functionType];
                preParent = code.parentNode;
                diagramContainer = document.createElement('div');
                diagramContainer.classList.add(functionType);
                preParent.replaceWith(diagramContainer);
                options = {};

                if (functionType === 'sequence') {
                  Object.assign(options, {
                    theme: 'hand'
                  });
                } else if (functionType === 'vega-lite') {
                  Object.assign(options, {
                    actions: false,
                    tooltip: false,
                    renderer: 'svg',
                    theme: 'latimes' // only render light theme

                  });
                }

                _context.prev = 17;

                if (functionType === 'flowchart' || functionType === 'sequence') {
                  diagram = render.parse(rawCode);
                  diagramContainer.innerHTML = '';
                  diagram.drawSVG(diagramContainer, options);
                }

                if (!(functionType === 'vega-lite')) {
                  _context.next = 22;
                  break;
                }

                _context.next = 22;
                return render(diagramContainer, JSON.parse(rawCode), options);

              case 22:
                _context.next = 28;
                break;

              case 24:
                _context.prev = 24;
                _context.t0 = _context["catch"](17);
                console.log(_context.t0);
                diagramContainer.innerHTML = "< Invalid Diagram >";

              case 28:
                _context.next = 6;
                break;

              case 30:
                _context.next = 35;
                break;

              case 32:
                _context.prev = 32;
                _context.t1 = _context["catch"](4);

                _iterator2.e(_context.t1);

              case 35:
                _context.prev = 35;

                _iterator2.f();

                return _context.finish(35);

              case 38:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this, [[4, 32, 35, 38], [17, 24]]);
      }));

      function renderDiagram() {
        return _renderDiagram.apply(this, arguments);
      }

      return renderDiagram;
    }()
  }, {
    key: "renderHtml",
    value: // render pure html by marked
    function () {
      var _renderHtml = Object(asyncToGenerator["a" /* default */])( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {
        var html, exportContainer, result, pathes, def;
        return regeneratorRuntime.wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                this.mathRendererCalled = false;
                html = parser_marked(this.markdown, {
                  highlight: function highlight(code, lang) {
                    // Language may be undefined (GH#591)
                    if (!lang) {
                      return code;
                    }

                    if (DIAGRAM_TYPE.includes(lang)) {
                      return code;
                    }

                    var grammar = prism_default.a.languages[lang];

                    if (!grammar) {
                      console.warn("Unable to find grammar for \"".concat(lang, "\"."));
                      return code;
                    }

                    return prism_default.a.highlight(code, grammar, lang);
                  },
                  emojiRenderer: function emojiRenderer(emoji) {
                    var validate = emojis_validEmoji(emoji);

                    if (validate) {
                      return validate.emoji;
                    } else {
                      return ":".concat(emoji, ":");
                    }
                  },
                  mathRenderer: this.mathRenderer
                });
                html = utils_sanitize(html, EXPORT_DOMPURIFY_CONFIG);
                exportContainer = this.exportContainer = document.createElement('div');
                exportContainer.classList.add('ag-render-container');
                exportContainer.innerHTML = html;
                document.body.appendChild(exportContainer); // render only render the light theme of mermaid and diragram...

                this.renderMermaid();
                _context2.next = 10;
                return this.renderDiagram();

              case 10:
                result = exportContainer.innerHTML;
                exportContainer.remove(); // hack to add arrow marker to output html

                pathes = document.querySelectorAll('path[id^=raphael-marker-]');
                def = '<defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">';
                result = result.replace(def, function () {
                  var str = '';

                  var _iterator3 = exportHtml_createForOfIteratorHelper(pathes),
                      _step3;

                  try {
                    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
                      var path = _step3.value;
                      str += path.outerHTML;
                    }
                  } catch (err) {
                    _iterator3.e(err);
                  } finally {
                    _iterator3.f();
                  }

                  return "".concat(def).concat(str);
                });
                this.exportContainer = null;
                return _context2.abrupt("return", result);

              case 17:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function renderHtml() {
        return _renderHtml.apply(this, arguments);
      }

      return renderHtml;
    }()
    /**
     * Get HTML with style
     *
     * @param {*} title Page title
     * @param {*} printOptimization Optimize HTML and CSS for printing
     */

  }, {
    key: "generate",
    value: function () {
      var _generate = Object(asyncToGenerator["a" /* default */])( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {
        var title,
            printOptimization,
            extraCss,
            highlightCssStyle,
            html,
            katexCssStyle,
            _args3 = arguments;
        return regeneratorRuntime.wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                title = _args3.length > 0 && _args3[0] !== undefined ? _args3[0] : '';
                printOptimization = _args3.length > 1 && _args3[1] !== undefined ? _args3[1] : false;
                extraCss = _args3.length > 2 && _args3[2] !== undefined ? _args3[2] : '';
                // WORKAROUND: Hide Prism.js style when exporting or printing. Otherwise the background color is white in the dark theme.
                highlightCssStyle = printOptimization ? "@media print { ".concat(themes_prism_default.a, " }") : themes_prism_default.a;
                _context3.next = 6;
                return this.renderHtml();

              case 6:
                html = _context3.sent;
                katexCssStyle = this.mathRendererCalled ? dist_katex_default.a : '';
                return _context3.abrupt("return", "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <title>".concat(title, "</title>\n  <style>\n  ").concat(github_markdown_default.a, "\n  </style>\n  <style>\n  ").concat(highlightCssStyle, "\n  </style>\n  <style>\n  ").concat(katexCssStyle, "\n  </style>\n  <style>\n    .markdown-body {\n      box-sizing: border-box;\n      min-width: 200px;\n      max-width: 980px;\n      margin: 0 auto;\n      padding: 45px;\n    }\n    .markdown-body table {\n      display: table;\n    }\n    .markdown-body li.task-list-item {\n      list-style-type: none;\n    }\n    .markdown-body li > [type=checkbox] {\n      margin: 0 0 0 -1.3em;\n    }\n    .markdown-body input[type=\"checkbox\"] ~ p {\n      margin-top: 0;\n      display: inline-block;\n    }\n    @media (max-width: 767px) {\n      .markdown-body {\n        padding: 15px;\n      }\n    }\n  </style>\n  <style>").concat(extraCss, "</style>\n</head>\n<body>\n  <article class=\"markdown-body\">\n  ").concat(html, "\n  </article>\n</body>\n</html>"));

              case 9:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3, this);
      }));

      function generate() {
        return _generate.apply(this, arguments);
      }

      return generate;
    }()
  }]);

  return ExportHtml;
}();

/* harmony default export */ var utils_exportHtml = (exportHtml_ExportHtml);
// CONCATENATED MODULE: ./src/muya/lib/utils/exportMarkdown.js













function exportMarkdown_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = exportMarkdown_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function exportMarkdown_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return exportMarkdown_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return exportMarkdown_arrayLikeToArray(o, minLen); }

function exportMarkdown_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

/**
 * Hi contributors!
 *
 * Before you edit or update codes in this file,
 * make sure you have read this bellow:
 * Commonmark Spec: https://spec.commonmark.org/0.29/
 * and GitHub Flavored Markdown Spec: https://github.github.com/gfm/
 * The output markdown needs to obey the standards of the two Spec.
 */
var exportMarkdown_ExportMarkdown = /*#__PURE__*/function () {
  function ExportMarkdown(blocks) {
    var listIndentation = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;

    Object(classCallCheck["a" /* default */])(this, ExportMarkdown);

    this.blocks = blocks;
    this.listType = []; // 'ul' or 'ol'
    // helper to translate the first tight item in a nested list

    this.isLooseParentList = true; // set and validate settings

    this.listIndentation = 'number';

    if (listIndentation === 'dfm') {
      this.listIndentation = 'dfm';
      this.listIndentationCount = 4;
    } else if (typeof listIndentation === 'number') {
      this.listIndentationCount = Math.min(Math.max(listIndentation, 1), 4);
    } else {
      this.listIndentationCount = 1;
    }
  }

  Object(createClass["a" /* default */])(ExportMarkdown, [{
    key: "generate",
    value: function generate() {
      return this.translateBlocks2Markdown(this.blocks);
    }
  }, {
    key: "translateBlocks2Markdown",
    value: function translateBlocks2Markdown(blocks) {
      var indent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
      var listIndent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';
      var result = []; // helper for CommonMark 264

      var lastListBullet = '';

      var _iterator = exportMarkdown_createForOfIteratorHelper(blocks),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var block = _step.value;

          if (block.type !== 'ul' && block.type !== 'ol') {
            lastListBullet = '';
          }

          switch (block.type) {
            case 'p':
            case 'hr':
              {
                this.insertLineBreak(result, indent);
                result.push(this.translateBlocks2Markdown(block.children, indent));
                break;
              }

            case 'span':
              {
                result.push(this.normalizeParagraphText(block, indent));
                break;
              }

            case 'h1':
            case 'h2':
            case 'h3':
            case 'h4':
            case 'h5':
            case 'h6':
              {
                this.insertLineBreak(result, indent);
                result.push(this.normalizeHeaderText(block, indent));
                break;
              }

            case 'figure':
              {
                this.insertLineBreak(result, indent);

                switch (block.functionType) {
                  case 'table':
                    {
                      var table = block.children[0];
                      result.push(this.normalizeTable(table, indent));
                      break;
                    }

                  case 'html':
                    {
                      result.push(this.normalizeHTML(block, indent));
                      break;
                    }

                  case 'multiplemath':
                    {
                      result.push(this.normalizeMultipleMath(block, indent));
                      break;
                    }

                  case 'mermaid':
                  case 'flowchart':
                  case 'sequence':
                  case 'vega-lite':
                    {
                      result.push(this.normalizeContainer(block, indent));
                      break;
                    }
                }

                break;
              }

            case 'li':
              {
                var insertNewLine = block.isLooseListItem; // helper variable to correct the first tight item in a nested list

                this.isLooseParentList = insertNewLine;

                if (insertNewLine) {
                  this.insertLineBreak(result, indent);
                }

                result.push(this.normalizeListItem(block, indent + listIndent));
                this.isLooseParentList = true;
                break;
              }

            case 'ul':
              {
                var _insertNewLine = this.isLooseParentList;
                this.isLooseParentList = true; // Start a new list without separation due changing the bullet or ordered list delimiter starts a new list.

                var bulletMarkerOrDelimiter = block.children[0].bulletMarkerOrDelimiter;

                if (lastListBullet && lastListBullet !== bulletMarkerOrDelimiter) {
                  _insertNewLine = false;
                }

                lastListBullet = bulletMarkerOrDelimiter;

                if (_insertNewLine) {
                  this.insertLineBreak(result, indent);
                }

                this.listType.push({
                  type: 'ul'
                });
                result.push(this.normalizeList(block, indent, listIndent));
                this.listType.pop();
                break;
              }

            case 'ol':
              {
                var _insertNewLine2 = this.isLooseParentList;
                this.isLooseParentList = true; // Start a new list without separation due changing the bullet or ordered list delimiter starts a new list.

                var _bulletMarkerOrDelimiter = block.children[0].bulletMarkerOrDelimiter;

                if (lastListBullet && lastListBullet !== _bulletMarkerOrDelimiter) {
                  _insertNewLine2 = false;
                }

                lastListBullet = _bulletMarkerOrDelimiter;

                if (_insertNewLine2) {
                  this.insertLineBreak(result, indent);
                }

                var listCount = block.start !== undefined ? block.start : 1;
                this.listType.push({
                  type: 'ol',
                  listCount: listCount
                });
                result.push(this.normalizeList(block, indent, listIndent));
                this.listType.pop();
                break;
              }

            case 'pre':
              {
                this.insertLineBreak(result, indent);

                if (block.functionType === 'frontmatter') {
                  result.push(this.normalizeFrontMatter(block, indent));
                } else {
                  result.push(this.normalizeCodeBlock(block, indent));
                }

                break;
              }

            case 'blockquote':
              {
                this.insertLineBreak(result, indent);
                result.push(this.normalizeBlockquote(block, indent));
                break;
              }

            default:
              {
                console.log(block.type);
                break;
              }
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }

      return result.join('');
    }
  }, {
    key: "insertLineBreak",
    value: function insertLineBreak(result, indent) {
      if (!result.length) return;
      result.push("".concat(indent, "\n"));
    }
  }, {
    key: "normalizeParagraphText",
    value: function normalizeParagraphText(block, indent) {
      var text = block.text;
      var lines = text.split('\n');
      return lines.map(function (line) {
        return "".concat(indent).concat(line);
      }).join('\n') + '\n';
    }
  }, {
    key: "normalizeHeaderText",
    value: function normalizeHeaderText(block, indent) {
      var headingStyle = block.headingStyle,
          marker = block.marker;
      var text = block.children[0].text;

      if (headingStyle === 'atx') {
        var match = text.match(/(#{1,6})(.*)/);
        var atxHeadingText = "".concat(match[1], " ").concat(match[2].trim());
        return "".concat(indent).concat(atxHeadingText, "\n");
      } else if (headingStyle === 'setext') {
        var lines = text.trim().split('\n');
        return lines.map(function (line) {
          return "".concat(indent).concat(line);
        }).join('\n') + "\n".concat(indent).concat(marker.trim(), "\n");
      }
    }
  }, {
    key: "normalizeBlockquote",
    value: function normalizeBlockquote(block, indent) {
      var children = block.children;
      var newIndent = "".concat(indent, "> ");
      return this.translateBlocks2Markdown(children, newIndent);
    }
  }, {
    key: "normalizeFrontMatter",
    value: function normalizeFrontMatter(block, indent) {
      // preBlock
      var result = [];
      result.push('---\n');

      var _iterator2 = exportMarkdown_createForOfIteratorHelper(block.children[0].children),
          _step2;

      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var line = _step2.value;
          result.push("".concat(line.text, "\n"));
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }

      result.push('---\n');
      return result.join('');
    }
  }, {
    key: "normalizeMultipleMath",
    value: function normalizeMultipleMath(block,
    /* figure */
    indent) {
      var result = [];
      result.push("".concat(indent, "$$\n"));

      var _iterator3 = exportMarkdown_createForOfIteratorHelper(block.children[0].children[0].children),
          _step3;

      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
          var line = _step3.value;
          result.push("".concat(indent).concat(line.text, "\n"));
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }

      result.push("".concat(indent, "$$\n"));
      return result.join('');
    } // `mermaid` `flowchart` `sequence` `vega-lite`

  }, {
    key: "normalizeContainer",
    value: function normalizeContainer(block, indent) {
      var result = [];
      var diagramType = block.children[0].functionType;
      result.push('```' + diagramType + '\n');

      var _iterator4 = exportMarkdown_createForOfIteratorHelper(block.children[0].children[0].children),
          _step4;

      try {
        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
          var line = _step4.value;
          result.push("".concat(line.text, "\n"));
        }
      } catch (err) {
        _iterator4.e(err);
      } finally {
        _iterator4.f();
      }

      result.push('```\n');
      return result.join('');
    }
  }, {
    key: "normalizeCodeBlock",
    value: function normalizeCodeBlock(block, indent) {
      var result = [];
      var textList = block.children[1].children.map(function (codeLine) {
        return codeLine.text;
      });
      var functionType = block.functionType;

      if (functionType === 'fencecode') {
        result.push("".concat(indent).concat(block.lang ? '```' + block.lang + '\n' : '```\n'));
        textList.forEach(function (text) {
          result.push("".concat(indent).concat(text, "\n"));
        });
        result.push(indent + '```\n');
      } else {
        textList.forEach(function (text) {
          result.push("".concat(indent, "    ").concat(text, "\n"));
        });
      }

      return result.join('');
    }
  }, {
    key: "normalizeHTML",
    value: function normalizeHTML(block, indent) {
      // figure
      var result = [];
      var codeLines = block.children[0].children[0].children;

      var _iterator5 = exportMarkdown_createForOfIteratorHelper(codeLines),
          _step5;

      try {
        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
          var line = _step5.value;
          result.push("".concat(indent).concat(line.text, "\n"));
        }
      } catch (err) {
        _iterator5.e(err);
      } finally {
        _iterator5.f();
      }

      return result.join('');
    }
  }, {
    key: "normalizeTable",
    value: function normalizeTable(table, indent) {
      var result = [];
      var row = table.row,
          column = table.column;
      var tableData = [];
      var tHeader = table.children[0];
      var tBody = table.children[1];
      tableData.push(tHeader.children[0].children.map(function (th) {
        return th.text.trim();
      }));
      tBody.children.forEach(function (bodyRow) {
        tableData.push(bodyRow.children.map(function (td) {
          return td.text.trim();
        }));
      });
      var columnWidth = tHeader.children[0].children.map(function (th) {
        return {
          width: 5,
          align: th.align
        };
      });
      var i;
      var j;

      for (i = 0; i <= row; i++) {
        for (j = 0; j <= column; j++) {
          columnWidth[j].width = Math.max(columnWidth[j].width, tableData[i][j].length + 2); // add 2, because have two space around text
        }
      }

      tableData.forEach(function (r, i) {
        var rs = indent + '|' + r.map(function (cell, j) {
          var raw = " ".concat(cell + ' '.repeat(columnWidth[j].width));
          return raw.substring(0, columnWidth[j].width);
        }).join('|') + '|';
        result.push(rs);

        if (i === 0) {
          var cutOff = indent + '|' + columnWidth.map(function (_ref) {
            var width = _ref.width,
                align = _ref.align;
            var raw = '-'.repeat(width - 2);

            switch (align) {
              case 'left':
                raw = ":".concat(raw, " ");
                break;

              case 'center':
                raw = ":".concat(raw, ":");
                break;

              case 'right':
                raw = " ".concat(raw, ":");
                break;

              default:
                raw = " ".concat(raw, " ");
                break;
            }

            return raw;
          }).join('|') + '|';
          result.push(cutOff);
        }
      });
      return result.join('\n') + '\n';
    }
  }, {
    key: "normalizeList",
    value: function normalizeList(block, indent, listIndent) {
      var children = block.children;
      return this.translateBlocks2Markdown(children, indent, listIndent);
    }
  }, {
    key: "normalizeListItem",
    value: function normalizeListItem(block, indent) {
      var result = [];
      var listInfo = this.listType[this.listType.length - 1];
      var isUnorderedList = listInfo.type === 'ul';
      var children = block.children,
          bulletMarkerOrDelimiter = block.bulletMarkerOrDelimiter;
      var itemMarker;

      if (isUnorderedList) {
        itemMarker = bulletMarkerOrDelimiter ? "".concat(bulletMarkerOrDelimiter, " ") : '- ';
      } else {
        // NOTE: GitHub and Bitbucket limit the list count to 99 but this is nowhere defined.
        //  We limit the number to 99 for Daring Fireball Markdown to prevent indentation issues.
        var n = listInfo.listCount;

        if (this.listIndentation === 'dfm' && n > 99 || n > 999999999) {
          n = 1;
        }

        listInfo.listCount++;
        var delimiter = bulletMarkerOrDelimiter ? bulletMarkerOrDelimiter : '.';
        itemMarker = "".concat(n).concat(delimiter, " ");
      } // Subsequent paragraph indentation


      var newIndent = indent + ' '.repeat(itemMarker.length); // New list indentation. We already added one space to the indentation

      var listIndent = '';
      var listIndentation = this.listIndentation;

      if (listIndentation === 'dfm') {
        listIndent = ' '.repeat(4 - itemMarker.length);
      } else if (listIndentation === 'number') {
        listIndent = ' '.repeat(this.listIndentationCount - 1);
      } // TODO: Indent subsequent paragraphs by one tab. - not important
      //  Problem: "translateBlocks2Markdown" use "indent" in spaces to indent elements. How should
      //  we integrate tabs in blockquotes and subsequent paragraphs and how to combine with spaces?
      //  I don't know how to combine tabs and spaces and it seems not specified, so work for another day.


      if (isUnorderedList && block.listItemType === 'task') {
        var firstChild = children[0];
        itemMarker += firstChild.checked ? '[x] ' : '[ ] ';
        children = children.slice(1);
      }

      result.push("".concat(indent).concat(itemMarker));
      result.push(this.translateBlocks2Markdown(children, newIndent, listIndent).substring(newIndent.length));
      return result.join('');
    }
  }]);

  return ExportMarkdown;
}();

/* harmony default export */ var exportMarkdown = (exportMarkdown_ExportMarkdown);
// CONCATENATED MODULE: ./src/muya/lib/contentState/copyCutCtrl.js









function copyCutCtrl_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = copyCutCtrl_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function copyCutCtrl_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return copyCutCtrl_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return copyCutCtrl_arrayLikeToArray(o, minLen); }

function copyCutCtrl_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }







var copyCutCtrl_copyCutCtrl = function copyCutCtrl(ContentState) {
  ContentState.prototype.cutHandler = function () {
    var _this$cursor = this.cursor,
        start = _this$cursor.start,
        end = _this$cursor.end;
    var startBlock = this.getBlock(start.key);
    var endBlock = this.getBlock(end.key);
    startBlock.text = startBlock.text.substring(0, start.offset) + endBlock.text.substring(end.offset);

    if (start.key !== end.key) {
      this.removeBlocks(startBlock, endBlock);
    }

    this.cursor = {
      start: start,
      end: start
    };
    this.checkInlineUpdate(startBlock);
    this.partialRender();
  };

  ContentState.prototype.getClipBoradData = function () {
    var html = lib_selection.getSelectionHtml();
    var wrapper = document.createElement('div');
    wrapper.innerHTML = html;
    var removedElements = wrapper.querySelectorAll(".".concat(CLASS_OR_ID['AG_TOOL_BAR'], ",\n      .").concat(CLASS_OR_ID['AG_MATH_RENDER'], ",\n      .").concat(CLASS_OR_ID['AG_RUBY_RENDER'], ",\n      .").concat(CLASS_OR_ID['AG_HTML_PREVIEW'], ",\n      .").concat(CLASS_OR_ID['AG_MATH_PREVIEW'], ",\n      .").concat(CLASS_OR_ID['AG_COPY_REMOVE'], ",\n      .").concat(CLASS_OR_ID['AG_LANGUAGE_INPUT']));

    var _iterator = copyCutCtrl_createForOfIteratorHelper(removedElements),
        _step;

    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var e = _step.value;
        e.remove();
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }

    var images = wrapper.querySelectorAll('span.ag-inline-image img');

    var _iterator2 = copyCutCtrl_createForOfIteratorHelper(images),
        _step2;

    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        var image = _step2.value;
        var src = image.getAttribute('src');
        var originSrc = null;

        var _iterator12 = copyCutCtrl_createForOfIteratorHelper(this.stateRender.urlMap.entries()),
            _step12;

        try {
          for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {
            var _step12$value = Object(slicedToArray["a" /* default */])(_step12.value, 2),
                sSrc = _step12$value[0],
                tSrc = _step12$value[1];

            if (tSrc === src) {
              originSrc = sSrc;
              break;
            }
          }
        } catch (err) {
          _iterator12.e(err);
        } finally {
          _iterator12.f();
        }

        if (originSrc) {
          image.setAttribute('src', originSrc);
        }
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }

    var hrs = wrapper.querySelectorAll("[data-role=hr]");

    var _iterator3 = copyCutCtrl_createForOfIteratorHelper(hrs),
        _step3;

    try {
      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
        var hr = _step3.value;
        hr.replaceWith(document.createElement('hr'));
      }
    } catch (err) {
      _iterator3.e(err);
    } finally {
      _iterator3.f();
    }

    var headers = wrapper.querySelectorAll("[data-head]");

    var _iterator4 = copyCutCtrl_createForOfIteratorHelper(headers),
        _step4;

    try {
      for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
        var header = _step4.value;
        var p = document.createElement('p');
        p.textContent = header.textContent;
        header.replaceWith(p);
      } // replace inline rule element: code, a, strong, em, del to span element
      // in order to escape turndown translation

    } catch (err) {
      _iterator4.e(err);
    } finally {
      _iterator4.f();
    }

    var inlineRuleElements = wrapper.querySelectorAll("a.".concat(CLASS_OR_ID['AG_INLINE_RULE'], ",\n      code.").concat(CLASS_OR_ID['AG_INLINE_RULE'], ",\n      strong.").concat(CLASS_OR_ID['AG_INLINE_RULE'], ",\n      em.").concat(CLASS_OR_ID['AG_INLINE_RULE'], ",\n      del.").concat(CLASS_OR_ID['AG_INLINE_RULE']));

    var _iterator5 = copyCutCtrl_createForOfIteratorHelper(inlineRuleElements),
        _step5;

    try {
      for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
        var _e = _step5.value;
        var span = document.createElement('span');
        span.textContent = _e.textContent;

        _e.replaceWith(span);
      }
    } catch (err) {
      _iterator5.e(err);
    } finally {
      _iterator5.f();
    }

    var aLinks = wrapper.querySelectorAll(".".concat(CLASS_OR_ID['AG_A_LINK']));

    var _iterator6 = copyCutCtrl_createForOfIteratorHelper(aLinks),
        _step6;

    try {
      for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
        var l = _step6.value;

        var _span = document.createElement('span');

        _span.innerHTML = l.innerHTML;
        l.replaceWith(_span);
      }
    } catch (err) {
      _iterator6.e(err);
    } finally {
      _iterator6.f();
    }

    var codefense = wrapper.querySelectorAll("pre[data-role$='code']");

    var _iterator7 = copyCutCtrl_createForOfIteratorHelper(codefense),
        _step7;

    try {
      for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {
        var cf = _step7.value;
        var id = cf.id;
        var block = this.getBlock(id);
        var language = block.lang || '';
        var selectedCodeLines = cf.querySelectorAll('.ag-code-line');
        var value = Array.from(selectedCodeLines).map(function (codeLine) {
          return codeLine.textContent;
        }).join('\n');
        cf.innerHTML = "<code class=\"language-".concat(language, "\">").concat(value, "</code>");
      }
    } catch (err) {
      _iterator7.e(err);
    } finally {
      _iterator7.f();
    }

    var tightListItem = wrapper.querySelectorAll(".ag-tight-list-item");

    var _iterator8 = copyCutCtrl_createForOfIteratorHelper(tightListItem),
        _step8;

    try {
      for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {
        var li = _step8.value;

        var _iterator13 = copyCutCtrl_createForOfIteratorHelper(li.childNodes),
            _step13;

        try {
          for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {
            var item = _step13.value;

            if (item.tagName === 'P' && item.childElementCount === 1 && item.classList.contains('ag-paragraph')) {
              li.replaceChild(item.firstElementChild, item);
            }
          }
        } catch (err) {
          _iterator13.e(err);
        } finally {
          _iterator13.f();
        }
      }
    } catch (err) {
      _iterator8.e(err);
    } finally {
      _iterator8.f();
    }

    var htmlBlock = wrapper.querySelectorAll("figure[data-role='HTML']");

    var _iterator9 = copyCutCtrl_createForOfIteratorHelper(htmlBlock),
        _step9;

    try {
      for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {
        var hb = _step9.value;

        var _selectedCodeLines = hb.querySelectorAll('span.ag-code-line');

        var _value = Array.from(_selectedCodeLines).map(function (codeLine) {
          return codeLine.textContent;
        }).join('\n');

        var pre = document.createElement('pre');
        pre.textContent = _value;
        hb.replaceWith(pre);
      } // Just work for turndown, turndown will add `leading` and `traling` space in line-break.

    } catch (err) {
      _iterator9.e(err);
    } finally {
      _iterator9.f();
    }

    var lineBreaks = wrapper.querySelectorAll('span.ag-soft-line-break, span.ag-hard-line-break');

    var _iterator10 = copyCutCtrl_createForOfIteratorHelper(lineBreaks),
        _step10;

    try {
      for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {
        var b = _step10.value;
        b.innerHTML = '';
      }
    } catch (err) {
      _iterator10.e(err);
    } finally {
      _iterator10.f();
    }

    var mathBlock = wrapper.querySelectorAll("figure.ag-container-block");

    var _iterator11 = copyCutCtrl_createForOfIteratorHelper(mathBlock),
        _step11;

    try {
      for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {
        var mb = _step11.value;
        var preElement = mb.querySelector('pre[data-role]');
        var functionType = preElement.getAttribute('data-role');

        var _selectedCodeLines2 = mb.querySelectorAll('span.ag-code-line');

        var _value2 = Array.from(_selectedCodeLines2).map(function (codeLine) {
          return codeLine.textContent;
        }).join('\n');

        var _pre = void 0;

        switch (functionType) {
          case 'multiplemath':
            _pre = document.createElement('pre');

            _pre.classList.add('multiple-math');

            _pre.textContent = _value2;
            mb.replaceWith(_pre);
            break;

          case 'mermaid':
          case 'flowchart':
          case 'sequence':
          case 'vega-lite':
            _pre = document.createElement('pre');
            _pre.innerHTML = "<code class=\"language-".concat(functionType, "\">").concat(_value2, "</code>");
            mb.replaceWith(_pre);
            break;
        }
      }
    } catch (err) {
      _iterator11.e(err);
    } finally {
      _iterator11.f();
    }

    var htmlData = wrapper.innerHTML;
    var textData = this.htmlToMarkdown(htmlData);
    htmlData = parser_marked(textData);
    return {
      html: htmlData,
      text: textData
    };
  };

  ContentState.prototype.copyHandler = function (event, type) {
    event.preventDefault();

    var _this$getClipBoradDat = this.getClipBoradData(),
        html = _this$getClipBoradDat.html,
        text = _this$getClipBoradDat.text;

    switch (type) {
      case 'normal':
        {
          event.clipboardData.setData('text/html', html);
          event.clipboardData.setData('text/plain', text);
          break;
        }

      case 'copyAsMarkdown':
        {
          event.clipboardData.setData('text/html', '');
          event.clipboardData.setData('text/plain', text);
          break;
        }

      case 'copyAsHtml':
        {
          event.clipboardData.setData('text/html', '');
          event.clipboardData.setData('text/plain', exportHtml_getSanitizeHtml(text));
          break;
        }

      case 'copyTable':
        {
          var table = this.getTableBlock();
          if (!table) return;
          var listIndentation = this.listIndentation;
          var markdown = new exportMarkdown([table], listIndentation).generate();
          event.clipboardData.setData('text/html', '');
          event.clipboardData.setData('text/plain', markdown);
          break;
        }
    }
  };
};

/* harmony default export */ var contentState_copyCutCtrl = (copyCutCtrl_copyCutCtrl);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.number.constructor.js
var es6_number_constructor = __webpack_require__("c5f6");

// CONCATENATED MODULE: ./src/muya/lib/contentState/paragraphCtrl.js
















function paragraphCtrl_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = paragraphCtrl_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function paragraphCtrl_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return paragraphCtrl_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return paragraphCtrl_arrayLikeToArray(o, minLen); }

function paragraphCtrl_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }




var paragraphCtrl_LINE_BREAKS_REG = /\n/; // get header level
//  eg: h1 => 1
//      h2 => 2

var getCurrentLevel = function getCurrentLevel(type) {
  if (/\d/.test(type)) {
    return Number(/\d/.exec(type)[0]);
  } else {
    return 0;
  }
};

var paragraphCtrl_paragraphCtrl = function paragraphCtrl(ContentState) {
  ContentState.prototype.selectionChange = function (cursor) {
    var _ref = cursor || lib_selection.getCursorRange(),
        start = _ref.start,
        end = _ref.end;

    if (!start || !end) {
      // TODO: Throw an exception and try to fix this later (GH#848).
      throw new Error('selectionChange: expected cursor but cursor is null.');
    }

    var cursorCoords = lib_selection.getCursorCoords();
    var startBlock = this.getBlock(start.key);
    var endBlock = this.getBlock(end.key);
    var startParents = this.getParents(startBlock);
    var endParents = this.getParents(endBlock);
    var affiliation = startParents.filter(function (p) {
      return endParents.includes(p);
    }).filter(function (p) {
      return PARAGRAPH_TYPES.includes(p.type);
    });
    start.type = startBlock.type;
    start.block = startBlock;
    end.type = endBlock.type;
    end.block = endBlock;
    return {
      start: start,
      end: end,
      affiliation: affiliation,
      cursorCoords: cursorCoords
    };
  };

  ContentState.prototype.getCommonParent = function () {
    var _this$selectionChange = this.selectionChange(),
        start = _this$selectionChange.start,
        end = _this$selectionChange.end,
        affiliation = _this$selectionChange.affiliation;

    var parent = affiliation.length ? affiliation[0] : null;
    var startBlock = this.getBlock(start.key);
    var endBlock = this.getBlock(end.key);
    var startParentKeys = this.getParents(startBlock).map(function (b) {
      return b.key;
    });
    var endParentKeys = this.getParents(endBlock).map(function (b) {
      return b.key;
    });
    var children = parent ? parent.children : this.blocks;
    var startIndex;
    var endIndex;

    var _iterator = paragraphCtrl_createForOfIteratorHelper(children),
        _step;

    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var child = _step.value;

        if (startParentKeys.includes(child.key)) {
          startIndex = children.indexOf(child);
        }

        if (endParentKeys.includes(child.key)) {
          endIndex = children.indexOf(child);
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }

    return {
      parent: parent,
      startIndex: startIndex,
      endIndex: endIndex
    };
  };

  ContentState.prototype.handleFrontMatter = function () {
    var firstBlock = this.blocks[0];
    if (firstBlock.type === 'pre' && firstBlock.functionType === 'frontmatter') return;
    var lang = 'yaml';
    var frontMatter = this.createBlock('pre', {
      functionType: 'frontmatter',
      lang: lang
    });
    var codeBlock = this.createBlock('code', {
      lang: lang
    });
    var emptyLine = this.createBlock('span', {
      functionType: 'codeLine',
      lang: lang
    });
    this.appendChild(codeBlock, emptyLine);
    this.appendChild(frontMatter, codeBlock);
    this.insertBefore(frontMatter, firstBlock);
    var key = emptyLine.key;
    var offset = 0;
    this.cursor = {
      start: {
        key: key,
        offset: offset
      },
      end: {
        key: key,
        offset: offset
      }
    };
  };

  ContentState.prototype.handleListMenu = function (paraType, insertMode) {
    var _this = this;

    var _this$selectionChange2 = this.selectionChange(this.cursor),
        start = _this$selectionChange2.start,
        end = _this$selectionChange2.end,
        affiliation = _this$selectionChange2.affiliation;

    var _this$muya$options = this.muya.options,
        orderListDelimiter = _this$muya$options.orderListDelimiter,
        bulletListMarker = _this$muya$options.bulletListMarker,
        preferLooseListItem = _this$muya$options.preferLooseListItem;

    var _paraType$split = paraType.split('-'),
        _paraType$split2 = Object(slicedToArray["a" /* default */])(_paraType$split, 2),
        blockType = _paraType$split2[0],
        listType = _paraType$split2[1];

    var isListed = affiliation.slice(0, 3).filter(function (b) {
      return /ul|ol/.test(b.type);
    });

    if (isListed.length && !insertMode) {
      var listBlock = isListed[0];

      if (listType === listBlock.listType) {
        var listItems = listBlock.children;
        listItems.forEach(function (listItem) {
          listItem.children.forEach(function (itemParagraph) {
            if (itemParagraph.type !== 'input') {
              _this.insertBefore(itemParagraph, listBlock);
            }
          });
        });
        this.removeBlock(listBlock);
        return;
      } // if the old list block is task list, remove checkbox


      if (listBlock.listType === 'task') {
        var _listItems = listBlock.children;

        _listItems.forEach(function (item) {
          var inputBlock = item.children[0];
          inputBlock && _this.removeBlock(inputBlock);
        });
      }

      var oldListType = listBlock.listType;
      listBlock.type = blockType;
      listBlock.listType = listType;
      listBlock.children.forEach(function (b) {
        return b.listItemType = listType;
      });

      if (listType === 'order') {
        listBlock.start = listBlock.start || 1;
        listBlock.children.forEach(function (b) {
          return b.bulletMarkerOrDelimiter = orderListDelimiter;
        });
      }

      if (listType === 'bullet' && oldListType === 'order' || listType === 'task' && oldListType === 'order') {
        delete listBlock.start;
        listBlock.children.forEach(function (b) {
          return b.bulletMarkerOrDelimiter = bulletListMarker;
        });
      } // if the new block is task list, add checkbox


      if (listType === 'task') {
        var _listItems2 = listBlock.children;

        _listItems2.forEach(function (item) {
          var checkbox = _this.createBlock('input');

          checkbox.checked = false;

          _this.insertBefore(checkbox, item.children[0]);
        });
      }
    } else {
      if (start.key === end.key || start.block.parent && start.block.parent === end.block.parent) {
        var block = this.getBlock(start.key);
        var paragraph = this.getBlock(block.parent);

        if (listType === 'task') {
          // 1. first update the block to bullet list
          var listItemParagraph = this.updateList(paragraph, 'bullet', undefined, block); // 2. second update bullet list to task list

          setTimeout(function () {
            _this.updateTaskListItem(listItemParagraph, listType);

            _this.partialRender();
          });
        } else {
          this.updateList(paragraph, listType, undefined, block);
        }
      } else {
        var _this$getCommonParent = this.getCommonParent(),
            parent = _this$getCommonParent.parent,
            startIndex = _this$getCommonParent.startIndex,
            endIndex = _this$getCommonParent.endIndex;

        var children = parent ? parent.children : this.blocks;
        var referBlock = children[endIndex];
        var listWrapper = this.createBlock(listType === 'order' ? 'ol' : 'ul');
        listWrapper.listType = listType;
        if (listType === 'order') listWrapper.start = 1;
        children.slice(startIndex, endIndex + 1).forEach(function (child) {
          if (child !== referBlock) {
            _this.removeBlock(child, children);
          } else {
            _this.insertAfter(listWrapper, child);

            _this.removeBlock(child, children);
          }

          var listItem = _this.createBlock('li');

          listItem.listItemType = listType;
          listItem.isLooseListItem = preferLooseListItem;

          _this.appendChild(listWrapper, listItem);

          if (listType === 'task') {
            var checkbox = _this.createBlock('input');

            checkbox.checked = false;

            _this.appendChild(listItem, checkbox);
          }

          _this.appendChild(listItem, child);
        });
      }
    }
  };

  ContentState.prototype.handleLooseListItem = function () {
    var _this$selectionChange3 = this.selectionChange(this.cursor),
        affiliation = _this$selectionChange3.affiliation;

    var listContainer = [];

    if (affiliation.length >= 1 && /ul|ol/.test(affiliation[0].type)) {
      listContainer = affiliation[0].children;
    } else if (affiliation.length >= 3 && affiliation[1].type === 'li') {
      listContainer = affiliation[2].children;
    }

    if (listContainer.length > 0) {
      var _iterator2 = paragraphCtrl_createForOfIteratorHelper(listContainer),
          _step2;

      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var block = _step2.value;
          block.isLooseListItem = !block.isLooseListItem;
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }

      this.partialRender();
    }
  };

  ContentState.prototype.handleCodeBlockMenu = function () {
    var _this2 = this;

    var _this$selectionChange4 = this.selectionChange(this.cursor),
        start = _this$selectionChange4.start,
        end = _this$selectionChange4.end,
        affiliation = _this$selectionChange4.affiliation;

    var startBlock = this.getBlock(start.key);
    var endBlock = this.getBlock(end.key);
    var startParents = this.getParents(startBlock);
    var endParents = this.getParents(endBlock);

    var hasFencedCodeBlockParent = function hasFencedCodeBlockParent() {
      return [].concat(Object(toConsumableArray["a" /* default */])(startParents), Object(toConsumableArray["a" /* default */])(endParents)).some(function (b) {
        return b.type === 'pre' && /code/.test(b.functionType);
      });
    }; // change fenced code block to p paragraph


    if (affiliation.length && affiliation[0].type === 'pre' && /code/.test(affiliation[0].functionType)) {
      var preBlock = affiliation[0];
      var codeLines = preBlock.children[1].children;
      preBlock.type = 'p';
      preBlock.children = [];
      var newParagraphBlock = this.createBlockP(codeLines.map(function (l) {
        return l.text;
      }).join('\n'));
      this.insertBefore(newParagraphBlock, preBlock);
      this.removeBlock(preBlock);
      var _this$cursor = this.cursor,
          _start = _this$cursor.start,
          _end = _this$cursor.end;
      var key = newParagraphBlock.children[0].key;
      var startOffset = 0;
      var endOffset = 0;
      var startStop = false;
      var endStop = false;

      var _iterator3 = paragraphCtrl_createForOfIteratorHelper(codeLines),
          _step3;

      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
          var line = _step3.value;

          if (line.key !== _start.key && !startStop) {
            startOffset += line.text.length + 1;
          } else {
            startOffset += _start.offset;
            startStop = true;
          }

          if (line.key !== _end.key && !endStop) {
            endOffset += line.text.length + 1;
          } else {
            endOffset += _end.offset;
            endStop = true;
          }
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }

      this.cursor = {
        start: {
          key: key,
          offset: startOffset
        },
        end: {
          key: key,
          offset: endOffset
        }
      };
    } else {
      if (start.key === end.key) {
        if (startBlock.type === 'span') {
          var anchorBlock = this.getParent(startBlock);
          var lang = '';

          var _preBlock = this.createBlock('pre', {
            functionType: 'fencecode',
            lang: lang
          });

          var codeBlock = this.createBlock('code', {
            lang: ''
          });
          var inputBlock = this.createBlock('span', {
            functionType: 'languageInput'
          });
          var codes = startBlock.text.split('\n');

          var _iterator4 = paragraphCtrl_createForOfIteratorHelper(codes),
              _step4;

          try {
            for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
              var code = _step4.value;
              var codeLine = this.createBlock('span', {
                text: code,
                functionType: 'codeLine',
                lang: lang
              });
              this.appendChild(codeBlock, codeLine);
            }
          } catch (err) {
            _iterator4.e(err);
          } finally {
            _iterator4.f();
          }

          this.appendChild(_preBlock, inputBlock);
          this.appendChild(_preBlock, codeBlock);
          this.insertBefore(_preBlock, anchorBlock);
          this.removeBlock(anchorBlock);
          var _key = inputBlock.key;
          var offset = 0;
          this.cursor = {
            start: {
              key: _key,
              offset: offset
            },
            end: {
              key: _key,
              offset: offset
            }
          };
        } else {
          this.cursor = {
            start: this.cursor.start,
            end: this.cursor.end
          };
        }
      } else if (!hasFencedCodeBlockParent()) {
        var _this$getCommonParent2 = this.getCommonParent(),
            parent = _this$getCommonParent2.parent,
            startIndex = _this$getCommonParent2.startIndex,
            endIndex = _this$getCommonParent2.endIndex;

        var children = parent ? parent.children : this.blocks;
        var referBlock = children[endIndex];
        var _lang = '';

        var _preBlock2 = this.createBlock('pre', {
          functionType: 'fencecode',
          lang: _lang
        });

        var _codeBlock = this.createBlock('code', {
          lang: _lang
        });

        var listIndentation = this.listIndentation;
        var markdown = new exportMarkdown(children.slice(startIndex, endIndex + 1), listIndentation).generate();
        markdown.split(paragraphCtrl_LINE_BREAKS_REG).forEach(function (text) {
          var codeLine = _this2.createBlock('span', {
            text: text,
            lang: _lang,
            functionType: 'codeLine'
          });

          _this2.appendChild(_codeBlock, codeLine);
        });

        var _inputBlock = this.createBlock('span', {
          functionType: 'languageInput'
        });

        this.appendChild(_preBlock2, _inputBlock);
        this.appendChild(_preBlock2, _codeBlock);
        this.insertAfter(_preBlock2, referBlock);
        var i;
        var removeCache = [];

        for (i = startIndex; i <= endIndex; i++) {
          var child = children[i];
          removeCache.push(child);
        }

        removeCache.forEach(function (b) {
          return _this2.removeBlock(b);
        });
        var _key2 = _inputBlock.key;
        var _offset = 0;
        this.cursor = {
          start: {
            key: _key2,
            offset: _offset
          },
          end: {
            key: _key2,
            offset: _offset
          }
        };
      }
    }
  };

  ContentState.prototype.handleQuoteMenu = function (insertMode) {
    var _this3 = this;

    var _this$selectionChange5 = this.selectionChange(this.cursor),
        start = _this$selectionChange5.start,
        end = _this$selectionChange5.end,
        affiliation = _this$selectionChange5.affiliation;

    var startBlock = this.getBlock(start.key);
    var isBlockQuote = affiliation.slice(0, 2).filter(function (b) {
      return /blockquote/.test(b.type);
    }); // change blockquote to paragraph

    if (isBlockQuote.length && !insertMode) {
      var quoteBlock = isBlockQuote[0];
      var children = quoteBlock.children;

      var _iterator5 = paragraphCtrl_createForOfIteratorHelper(children),
          _step5;

      try {
        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
          var child = _step5.value;
          this.insertBefore(child, quoteBlock);
        }
      } catch (err) {
        _iterator5.e(err);
      } finally {
        _iterator5.f();
      }

      this.removeBlock(quoteBlock); // change paragraph to blockquote
    } else {
      if (start.key === end.key) {
        if (startBlock.type === 'span') {
          startBlock = this.getParent(startBlock);
        }

        var _quoteBlock = this.createBlock('blockquote');

        this.insertAfter(_quoteBlock, startBlock);
        this.removeBlock(startBlock);
        this.appendChild(_quoteBlock, startBlock);
      } else {
        var _this$getCommonParent3 = this.getCommonParent(),
            parent = _this$getCommonParent3.parent,
            startIndex = _this$getCommonParent3.startIndex,
            endIndex = _this$getCommonParent3.endIndex;

        var _children = parent ? parent.children : this.blocks;

        var referBlock = _children[endIndex];

        var _quoteBlock2 = this.createBlock('blockquote');

        _children.slice(startIndex, endIndex + 1).forEach(function (child) {
          if (child !== referBlock) {
            _this3.removeBlock(child, _children);
          } else {
            _this3.insertAfter(_quoteBlock2, child);

            _this3.removeBlock(child, _children);
          }

          _this3.appendChild(_quoteBlock2, child);
        });
      }
    }
  };

  ContentState.prototype.insertContainerBlock = function (functionType, block) {
    if (block.type === 'span') {
      block = this.getParent(block);
    }

    var value = block.type === 'p' ? block.children.map(function (child) {
      return child.text;
    }).join('\n').trim() : block.text;
    var containerBlock = this.createContainerBlock(functionType, value);
    this.insertAfter(containerBlock, block);
    this.removeBlock(block);
    var cursorBlock = containerBlock.children[0].children[0].children[0];
    var key = cursorBlock.key;
    var offset = 0;
    this.cursor = {
      start: {
        key: key,
        offset: offset
      },
      end: {
        key: key,
        offset: offset
      }
    };
  };

  ContentState.prototype.showTablePicker = function () {
    var _this4 = this;

    var eventCenter = this.muya.eventCenter;
    var reference = this.getPositionReference();

    var handler = function handler(rows, columns) {
      _this4.createTable({
        rows: rows + 1,
        columns: columns + 1
      });
    };

    eventCenter.dispatch('muya-table-picker', {
      row: -1,
      column: -1
    }, reference, handler.bind(this));
  };

  ContentState.prototype.insertHtmlBlock = function (block) {
    if (block.type === 'span') {
      block = this.getParent(block);
    }

    var preBlock = this.initHtmlBlock(block);
    var key = preBlock.children[0].children[1] ? preBlock.children[0].children[1].key : preBlock.children[0].children[0].key;
    var offset = 0;
    this.cursor = {
      start: {
        key: key,
        offset: offset
      },
      end: {
        key: key,
        offset: offset
      }
    };
  };

  ContentState.prototype.updateParagraph = function (paraType) {
    var insertMode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    var _this$cursor2 = this.cursor,
        start = _this$cursor2.start,
        end = _this$cursor2.end;
    var block = this.getBlock(start.key);
    var text = block.text;

    switch (paraType) {
      case 'front-matter':
        {
          this.handleFrontMatter();
          break;
        }

      case 'ul-bullet':
      case 'ul-task':
      case 'ol-order':
        {
          this.handleListMenu(paraType, insertMode);
          break;
        }

      case 'loose-list-item':
        {
          this.handleLooseListItem();
          break;
        }

      case 'pre':
        {
          this.handleCodeBlockMenu();
          break;
        }

      case 'blockquote':
        {
          this.handleQuoteMenu(insertMode);
          break;
        }

      case 'mathblock':
        {
          this.insertContainerBlock('multiplemath', block);
          break;
        }

      case 'table':
        {
          this.showTablePicker();
          break;
        }

      case 'html':
        {
          this.insertHtmlBlock(block);
          break;
        }

      case 'flowchart':
      case 'sequence':
      case 'mermaid':
      case 'vega-lite':
        this.insertContainerBlock(paraType, block);
        break;

      case 'heading 1':
      case 'heading 2':
      case 'heading 3':
      case 'heading 4':
      case 'heading 5':
      case 'heading 6':
      case 'upgrade heading':
      case 'degrade heading':
      case 'paragraph':
        {
          if (start.key !== end.key) return;
          var headingStyle = DEFAULT_TURNDOWN_CONFIG.headingStyle;
          var parent = this.getParent(block); // \u00A0 is &nbsp;

          var _$exec = /(^ {0,3}#*[ \u00A0]*)([\s\S]*)/.exec(text),
              _$exec2 = Object(slicedToArray["a" /* default */])(_$exec, 3),
              hash = _$exec2[1],
              partText = _$exec2[2];

          var newLevel = 0; // 1, 2, 3, 4, 5, 6

          var newType = 'p';
          var key;

          if (/\d/.test(paraType)) {
            newLevel = Number(paraType.split(/\s/)[1]);
            newType = "h".concat(newLevel);
          } else if (paraType === 'upgrade heading' || paraType === 'degrade heading') {
            var currentLevel = getCurrentLevel(parent.type);
            newLevel = currentLevel;

            if (paraType === 'upgrade heading' && currentLevel !== 1) {
              if (currentLevel === 0) newLevel = 6;else newLevel = currentLevel - 1;
            } else if (paraType === 'degrade heading' && currentLevel !== 0) {
              if (currentLevel === 6) newLevel = 0;else newLevel = currentLevel + 1;
            }

            newType = newLevel === 0 ? 'p' : "h".concat(newLevel);
          }

          var startOffset = newLevel > 0 ? start.offset + newLevel - hash.length + 1 : start.offset - hash.length; // no need to add `1`, because we didn't add `String.fromCharCode(160)` to text paragraph

          var endOffset = newLevel > 0 ? end.offset + newLevel - hash.length + 1 : end.offset - hash.length;
          var newText = newLevel > 0 ? '#'.repeat(newLevel) + "".concat(String.fromCharCode(160)).concat(partText) // &nbsp; code: 160
          : partText; // No change

          if (newType === 'p' && parent.type === newType) {
            return;
          } // No change


          if (newType !== 'p' && parent.type === newType && parent.headingStyle === headingStyle) {
            return;
          }

          if (newType !== 'p') {
            var header = this.createBlock(newType, {
              headingStyle: headingStyle
            });
            var headerContent = this.createBlock('span', {
              text: headingStyle === 'atx' ? newText.replace(/\n/g, ' ') : newText,
              functionType: headingStyle === 'atx' ? 'atxLine' : 'paragraphContent'
            });
            this.appendChild(header, headerContent);
            key = headerContent.key;
            this.insertBefore(header, parent);
            this.removeBlock(parent);
          } else {
            var pBlock = this.createBlockP(newText);
            key = pBlock.children[0].key;
            this.insertAfter(pBlock, parent);
            this.removeBlock(parent);
          }

          this.cursor = {
            start: {
              key: key,
              offset: startOffset
            },
            end: {
              key: key,
              offset: endOffset
            }
          };
          break;
        }

      case 'hr':
        {
          var _pBlock = this.createBlockP();

          var archor = block.type === 'span' ? this.getParent(block) : block;
          var hrBlock = this.createBlock('hr');
          var thematicContent = this.createBlock('span', {
            functionType: 'thematicBreakLine',
            text: '---'
          });
          this.appendChild(hrBlock, thematicContent);
          this.insertAfter(hrBlock, archor);
          this.insertAfter(_pBlock, hrBlock);

          if (!text) {
            if (block.type === 'span' && this.isOnlyChild(block)) {
              this.removeBlock(archor);
            } else {
              this.removeBlock(block);
            }
          }

          var _key3 = _pBlock.children[0].key;
          var offset = 0;
          this.cursor = {
            start: {
              key: _key3,
              offset: offset
            },
            end: {
              key: _key3,
              offset: offset
            }
          };
          break;
        }
    }

    if (paraType === 'front-matter') {
      this.render();
    } else {
      this.partialRender();
    } // update menu status


    var selectionChanges = this.selectionChange(this.cursor);
    this.muya.eventCenter.dispatch('selectionChange', selectionChanges); // emit change event

    this.muya.eventCenter.dispatch('stateChange');
  };

  ContentState.prototype.insertParagraph = function (location) {
    var text = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
    var outMost = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
    var _this$cursor3 = this.cursor,
        start = _this$cursor3.start,
        end = _this$cursor3.end; // if cursor is not in one line or paragraph, can not insert paragraph

    if (start.key !== end.key) return;
    var block = this.getBlock(start.key);
    var anchor = null;

    if (outMost) {
      anchor = this.findOutMostBlock(block);
    } else {
      anchor = this.getAnchor(block);
    } // You can not insert paragraph before frontmatter


    if (!anchor || anchor && anchor.functionType === 'frontmatter' && location === 'before') {
      return;
    }

    var newBlock = this.createBlockP(text);

    if (location === 'before') {
      this.insertBefore(newBlock, anchor);
    } else {
      this.insertAfter(newBlock, anchor);
    }

    var key = newBlock.children[0].key;
    var offset = text.length;
    this.cursor = {
      start: {
        key: key,
        offset: offset
      },
      end: {
        key: key,
        offset: offset
      }
    };
    this.partialRender();
    this.muya.eventCenter.dispatch('stateChange');
  };

  ContentState.prototype.getPreBlock = function (block) {
    var children = block.children;
    if (!children || !children.length) return null;

    var _iterator6 = paragraphCtrl_createForOfIteratorHelper(children),
        _step6;

    try {
      for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
        var child = _step6.value;

        if (child.type === 'pre') {
          return child;
        } else {
          return this.getPreBlock(child);
        }
      }
    } catch (err) {
      _iterator6.e(err);
    } finally {
      _iterator6.f();
    }

    return null;
  }; // make a dulication of the current block


  ContentState.prototype.duplicate = function () {
    var _this$cursor4 = this.cursor,
        start = _this$cursor4.start,
        end = _this$cursor4.end;
    var startOutmostBlock = this.findOutMostBlock(this.getBlock(start.key));
    var endOutmostBlock = this.findOutMostBlock(this.getBlock(end.key));

    if (startOutmostBlock !== endOutmostBlock) {
      // if the cursor is not in one paragraph, just return
      return;
    } // if copied block has pre block: html, multiplemath, vega-light, mermaid, flowchart, sequence...


    var copiedBlock = this.copyBlock(startOutmostBlock);
    this.insertAfter(copiedBlock, startOutmostBlock);
    var cursorBlock = this.firstInDescendant(copiedBlock); // set cursor at the end of the first descendant of the duplicated block.

    var key = cursorBlock.key,
        text = cursorBlock.text;
    var offset = text.length;
    this.cursor = {
      start: {
        key: key,
        offset: offset
      },
      end: {
        key: key,
        offset: offset
      }
    };
    this.partialRender();
    return this.muya.eventCenter.dispatch('stateChange');
  }; // delete current paragraph


  ContentState.prototype.deleteParagraph = function () {
    var _this$cursor5 = this.cursor,
        start = _this$cursor5.start,
        end = _this$cursor5.end;
    var startOutmostBlock = this.findOutMostBlock(this.getBlock(start.key));
    var endOutmostBlock = this.findOutMostBlock(this.getBlock(end.key));

    if (startOutmostBlock !== endOutmostBlock) {
      // if the cursor is not in one paragraph, just return
      return;
    }

    var preBlock = this.getBlock(startOutmostBlock.preSibling);
    var nextBlock = this.getBlock(startOutmostBlock.nextSibling);
    var cursorBlock = null;

    if (nextBlock) {
      cursorBlock = this.firstInDescendant(nextBlock);
    } else if (preBlock) {
      cursorBlock = this.lastInDescendant(preBlock);
    } else {
      var newBlock = this.createBlockP();
      this.insertAfter(newBlock, startOutmostBlock);
      cursorBlock = this.firstInDescendant(newBlock);
    }

    this.removeBlock(startOutmostBlock);
    var _cursorBlock = cursorBlock,
        key = _cursorBlock.key,
        text = _cursorBlock.text;
    var offset = text.length;
    this.cursor = {
      start: {
        key: key,
        offset: offset
      },
      end: {
        key: key,
        offset: offset
      }
    };
    this.partialRender();
    return this.muya.eventCenter.dispatch('stateChange');
  };

  ContentState.prototype.selectAll = function () {
    var start = this.cursor.start;
    var startBlock = this.getBlock(start.key); // const endBlock = this.getBlock(end.key)
    // handle selectAll in table. only select the startBlock cell...

    if (/th|td/.test(startBlock.type)) {
      var key = start.key;
      var textLength = startBlock.text.length;
      this.cursor = {
        start: {
          key: key,
          offset: 0
        },
        end: {
          key: key,
          offset: textLength
        }
      };
      return this.partialRender();
    } // Handler selectAll in code block. only select all the code block conent.
    // `code block` here is Math, HTML, BLOCK CODE, Mermaid, vega-lite, flowchart, front-matter etc...


    if (startBlock.type === 'span' && startBlock.functionType === 'codeLine') {
      var codeBlock = this.getParent(startBlock);
      var firstCodeLine = this.firstInDescendant(codeBlock);
      var lastCodeLine = this.lastInDescendant(codeBlock);
      this.cursor = {
        start: {
          key: firstCodeLine.key,
          offset: 0
        },
        end: {
          key: lastCodeLine.key,
          offset: lastCodeLine.text.length
        }
      };
      return this.partialRender();
    } // Handler language input, only select language info only...


    if (startBlock.type === 'span' && startBlock.functionType === 'languageInput') {
      this.cursor = {
        start: {
          key: startBlock.key,
          offset: 0
        },
        end: {
          key: startBlock.key,
          offset: startBlock.text.length
        }
      };
      return this.partialRender();
    }

    var firstTextBlock = this.getFirstBlock();
    var lastTextBlock = this.getLastBlock();
    this.cursor = {
      start: {
        key: firstTextBlock.key,
        offset: 0
      },
      end: {
        key: lastTextBlock.key,
        offset: lastTextBlock.text.length
      }
    };
    this.render();
  };
};

/* harmony default export */ var contentState_paragraphCtrl = (paragraphCtrl_paragraphCtrl);
// CONCATENATED MODULE: ./src/muya/lib/contentState/tabCtrl.js












function tabCtrl_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = tabCtrl_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function tabCtrl_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return tabCtrl_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return tabCtrl_arrayLikeToArray(o, minLen); }

function tabCtrl_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }




/**
 * parseSelector
 * div#id.className => {tag: 'div', id: 'id', className: 'className', isVoid: false}
 */

var tabCtrl_parseSelector = function parseSelector() {
  var str = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
  var REG_EXP = /(#|\.)([^#.]+)/;
  var tag = '';
  var id = '';
  var className = '';
  var isVoid = false;
  var cap;

  var _iterator = tabCtrl_createForOfIteratorHelper(HTML_TAGS),
      _step;

  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var tagName = _step.value;

      if (str.startsWith(tagName) && (!str[tagName.length] || /#|\./.test(str[tagName.length]))) {
        tag = tagName;
        if (VOID_HTML_TAGS.indexOf(tagName) > -1) isVoid = true;
        str = str.substring(tagName.length);
      }
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }

  if (tag !== '') {
    cap = REG_EXP.exec(str);

    while (cap && str.length) {
      if (cap[1] === '#') {
        id = cap[2];
      } else {
        className = cap[2];
      }

      str = str.substring(cap[0].length);
      cap = REG_EXP.exec(str);
    }
  }

  return {
    tag: tag,
    id: id,
    className: className,
    isVoid: isVoid
  };
};

var BOTH_SIDES_FORMATS = ['strong', 'em', 'inline_code', 'image', 'link', 'reference_image', 'reference_link', 'emoji', 'del', 'html_tag', 'inline_math'];

var tabCtrl_tabCtrl = function tabCtrl(ContentState) {
  ContentState.prototype.findNextCell = function (block) {
    if (!/td|th/.test(block.type)) {
      throw new Error('only th and td can have next cell');
    }

    var nextSibling = this.getBlock(block.nextSibling);
    var parent = this.getBlock(block.parent);
    var tbOrTh = this.getBlock(parent.parent);

    if (nextSibling) {
      return nextSibling;
    } else {
      if (parent.nextSibling) {
        var nextRow = this.getBlock(parent.nextSibling);
        return nextRow.children[0];
      } else if (tbOrTh.type === 'thead') {
        var tBody = this.getBlock(tbOrTh.nextSibling);

        if (tBody.children.length) {
          return tBody.children[0].children[0];
        }
      }
    }

    return false;
  };

  ContentState.prototype.isUnindentableListItem = function (block) {
    var parent = this.getParent(block);
    var listItem = this.getParent(parent);
    var list = this.getParent(listItem);
    var listParent = this.getParent(list);
    if (!this.isCollapse()) return false;

    if (listParent && listParent.type === 'li') {
      return !list.preSibling ? 'REPLACEMENT' : 'INDENT';
    }

    return false;
  };

  ContentState.prototype.isIndentableListItem = function () {
    var _this$cursor = this.cursor,
        start = _this$cursor.start,
        end = _this$cursor.end;
    var startBlock = this.getBlock(start.key);
    var parent = this.getParent(startBlock);

    if (parent.type !== 'p' || !parent.parent) {
      return false;
    }

    var listItem = this.getParent(parent);

    if (listItem.type !== 'li' || start.key !== end.key || start.offset !== end.offset) {
      return false;
    } // Now we know it's a list item. Check whether we can indent the list item.


    var list = this.getParent(listItem);
    return list && /ol|ul/.test(list.type) && listItem.preSibling;
  };

  ContentState.prototype.unindentListItem = function (block, type) {
    var pBlock = this.getParent(block);
    var listItem = this.getParent(pBlock);
    var list = this.getParent(listItem);
    var listParent = this.getParent(list);

    if (type === 'REPLACEMENT') {
      this.insertBefore(pBlock, list);

      if (this.isOnlyChild(listItem)) {
        this.removeBlock(list);
      } else {
        this.removeBlock(listItem);
      }
    } else if (type === 'INDENT') {
      if (list.children.length === 1) {
        this.removeBlock(list);
      } else {
        var newList = this.createBlock(list.type);

        var _target = this.getNextSibling(listItem);

        while (_target) {
          this.appendChild(newList, _target);
          var temp = _target;
          _target = this.getNextSibling(_target);
          this.removeBlock(temp, list);
        }

        if (newList.children.length) this.appendChild(listItem, newList);
        this.removeBlock(listItem, list);

        if (!list.children.length) {
          this.removeBlock(list);
        }
      }

      this.insertAfter(listItem, listParent);
      var target = this.getNextSibling(list);

      while (target) {
        this.appendChild(listItem, target);
        this.removeBlock(target, listParent);
        target = this.getNextSibling(target);
      }
    }

    return this.partialRender();
  };

  ContentState.prototype.indentListItem = function () {
    var start = this.cursor.start;
    var startBlock = this.getBlock(start.key);
    var parent = this.getParent(startBlock);
    var listItem = this.getParent(parent);
    var list = this.getParent(listItem);
    var prevListItem = this.getPreSibling(listItem);
    this.removeBlock(listItem); // Search for a list in previous block

    var newList = this.getLastChild(prevListItem);

    if (!newList || !/ol|ul/.test(newList.type)) {
      newList = this.createBlock(list.type);
      this.appendChild(prevListItem, newList);
    } // Update item type only if we insert into an existing list


    if (newList.children.length !== 0) {
      listItem.isLooseListItem = newList.children[0].isLooseListItem;
    }

    this.appendChild(newList, listItem);
    return this.partialRender();
  };

  ContentState.prototype.insertTab = function () {
    var tabSize = this.tabSize;
    var tabCharacter = String.fromCharCode(160).repeat(tabSize);
    var _this$cursor2 = this.cursor,
        start = _this$cursor2.start,
        end = _this$cursor2.end;
    var startBlock = this.getBlock(start.key);
    var endBlock = this.getBlock(end.key);

    if (start.key === end.key && start.offset === end.offset) {
      startBlock.text = startBlock.text.substring(0, start.offset) + tabCharacter + endBlock.text.substring(end.offset);
      var key = start.key;
      var offset = start.offset + tabCharacter.length;
      this.cursor = {
        start: {
          key: key,
          offset: offset
        },
        end: {
          key: key,
          offset: offset
        }
      };
      return this.partialRender();
    }
  };

  ContentState.prototype.checkCursorAtEndFormat = function (text, offset) {
    var labels = this.stateRender.labels;
    var tokens = parser_tokenizer(text, [], false, labels);
    var result = null;

    var walkTokens = function walkTokens(tkns) {
      var _iterator2 = tabCtrl_createForOfIteratorHelper(tkns),
          _step2;

      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var token = _step2.value;
          var marker = token.marker,
              type = token.type,
              range = token.range,
              children = token.children,
              srcAndTitle = token.srcAndTitle,
              hrefAndTitle = token.hrefAndTitle,
              backlash = token.backlash,
              closeTag = token.closeTag,
              isFullLink = token.isFullLink,
              label = token.label;
          var start = range.start,
              end = range.end;

          if (BOTH_SIDES_FORMATS.includes(type) && offset > start && offset < end) {
            switch (type) {
              case 'strong':
              case 'em':
              case 'inline_code':
              case 'emoji':
              case 'del':
              case 'inline_math':
                {
                  if (marker && offset === end - marker.length) {
                    result = {
                      offset: marker.length
                    };
                    return;
                  }

                  break;
                }

              case 'image':
              case 'link':
                {
                  var linkTitleLen = (srcAndTitle || hrefAndTitle).length;
                  var secondLashLen = backlash && backlash.second ? backlash.second.length : 0;

                  if (offset === end - 3 - (linkTitleLen + secondLashLen)) {
                    result = {
                      offset: 2
                    };
                    return;
                  } else if (offset === end - 1) {
                    result = {
                      offset: 1
                    };
                    return;
                  }

                  break;
                }

              case 'reference_image':
              case 'reference_link':
                {
                  var labelLen = label ? label.length : 0;

                  var _secondLashLen = backlash && backlash.second ? backlash.second.length : 0;

                  if (isFullLink) {
                    if (offset === end - 3 - labelLen - _secondLashLen) {
                      result = {
                        offset: 2
                      };
                      return;
                    } else if (offset === end - 1) {
                      result = {
                        offset: 1
                      };
                      return;
                    }
                  } else if (offset === end - 1) {
                    result = {
                      offset: 1
                    };
                    return;
                  }

                  break;
                }

              case 'html_tag':
                {
                  if (closeTag && offset === end - closeTag.length) {
                    result = {
                      offset: closeTag.length
                    };
                    return;
                  }

                  break;
                }

              default:
                break;
            }
          }

          if (children && children.length) {
            walkTokens(children);
          }
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
    };

    walkTokens(tokens);
    return result;
  };

  ContentState.prototype.tabHandler = function (event) {
    // disable tab focus
    event.preventDefault();

    var _selection$getCursorR = lib_selection.getCursorRange(),
        start = _selection$getCursorR.start,
        end = _selection$getCursorR.end;

    if (!start || !end) {
      return;
    }

    var startBlock = this.getBlock(start.key);
    var endBlock = this.getBlock(end.key);

    if (event.shiftKey) {
      var unindentType = this.isUnindentableListItem(startBlock);

      if (unindentType) {
        this.unindentListItem(startBlock, unindentType);
      }

      return;
    } // Handle `tab` to jump to the end of format when the cursor is at the end of format content.


    if (start.key === end.key && start.offset === end.offset && HAS_TEXT_BLOCK_REG.test(startBlock.type) && startBlock.functionType !== 'codeLine' && // code line has no inline syntax
    startBlock.functionType !== 'languageInput' // language input textarea has no inline syntax
    ) {
        var text = startBlock.text,
            key = startBlock.key;
        var offset = start.offset;
        var atEnd = this.checkCursorAtEndFormat(text, offset);

        if (atEnd) {
          this.cursor = {
            start: {
              key: key,
              offset: offset + atEnd.offset
            },
            end: {
              key: key,
              offset: offset + atEnd.offset
            }
          };
          return this.partialRender();
        }
      } // Auto-complete of inline html tag and html block and `html` code block.


    if (start.key === end.key && start.offset === end.offset && startBlock.type === 'span' && (!startBlock.functionType || startBlock.functionType === 'codeLine' && /markup|html|xml|svg|mathml/.test(startBlock.lang))) {
      var _text = startBlock.text;

      var lastWordBeforeCursor = _text.substring(0, start.offset).split(/\s+/).pop();

      var _parseSelector = tabCtrl_parseSelector(lastWordBeforeCursor),
          tag = _parseSelector.tag,
          isVoid = _parseSelector.isVoid,
          id = _parseSelector.id,
          className = _parseSelector.className;

      if (tag) {
        var preText = _text.substring(0, start.offset - lastWordBeforeCursor.length);

        var postText = _text.substring(end.offset);

        if (!tag) return;
        var html = "<".concat(tag);
        var _key = startBlock.key;
        var startOffset = 0;
        var endOffset = 0;

        switch (tag) {
          case 'img':
            html += " alt=\"\" src=\"\"";
            startOffset = endOffset = html.length - 1;
            break;

          case 'input':
            html += " type=\"text\"";
            startOffset = html.length - 5;
            endOffset = html.length - 1;
            break;

          case 'a':
            html += " href=\"\"";
            startOffset = endOffset = html.length - 1;
            break;

          case 'link':
            html += " rel=\"stylesheet\" href=\"\"";
            startOffset = endOffset = html.length - 1;
            break;
        }

        if (id) {
          html += " id=\"".concat(id, "\"");
        }

        if (className) {
          html += " class=\"".concat(className, "\"");
        }

        html += '>';

        if (startOffset === 0 && endOffset === 0) {
          startOffset = endOffset = html.length;
        }

        if (!isVoid) {
          html += "</".concat(tag, ">");
        }

        startBlock.text = preText + html + postText;
        this.cursor = {
          start: {
            key: _key,
            offset: startOffset + preText.length
          },
          end: {
            key: _key,
            offset: endOffset + preText.length
          }
        };
        return this.partialRender();
      }
    } // Handle `tab` key in table cell.


    var nextCell;

    if (start.key === end.key && /th|td/.test(startBlock.type)) {
      nextCell = this.findNextCell(startBlock);
    } else if (/th|td/.test(endBlock.type)) {
      nextCell = endBlock;
    }

    if (nextCell) {
      var _key2 = nextCell.key;
      this.cursor = {
        start: {
          key: _key2,
          offset: 0
        },
        end: {
          key: _key2,
          offset: 0
        }
      };
      return this.partialRender();
    }

    if (this.isIndentableListItem()) {
      return this.indentListItem();
    }

    return this.insertTab();
  };
};

/* harmony default export */ var contentState_tabCtrl = (tabCtrl_tabCtrl);
// CONCATENATED MODULE: ./src/muya/lib/contentState/formatCtrl.js












function formatCtrl_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = formatCtrl_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function formatCtrl_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return formatCtrl_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return formatCtrl_arrayLikeToArray(o, minLen); }

function formatCtrl_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }






var formatCtrl_getOffset = function getOffset(offset, _ref) {
  var _ref$range = _ref.range,
      start = _ref$range.start,
      end = _ref$range.end,
      type = _ref.type,
      tag = _ref.tag,
      anchor = _ref.anchor,
      alt = _ref.alt;
  var dis = offset - start;
  var len = end - start;

  switch (type) {
    case 'strong':
    case 'del':
    case 'em':
    case 'inline_code':
    case 'inline_math':
      {
        var MARKER_LEN = type === 'strong' || type === 'del' ? 2 : 1;
        if (dis < 0) return 0;
        if (dis >= 0 && dis < MARKER_LEN) return -dis;
        if (dis >= MARKER_LEN && dis <= len - MARKER_LEN) return -MARKER_LEN;
        if (dis > len - MARKER_LEN && dis <= len) return len - dis - 2 * MARKER_LEN;
        if (dis > len) return -2 * MARKER_LEN;
        break;
      }

    case 'html_tag':
      {
        // handle underline, sup, sub
        var OPEN_MARKER_LEN = FORMAT_MARKER_MAP[tag].open.length;
        var CLOSE_MARKER_LEN = FORMAT_MARKER_MAP[tag].close.length;
        if (dis < 0) return 0;
        if (dis >= 0 && dis < OPEN_MARKER_LEN) return -dis;
        if (dis >= OPEN_MARKER_LEN && dis <= len - CLOSE_MARKER_LEN) return -OPEN_MARKER_LEN;
        if (dis > len - CLOSE_MARKER_LEN && dis <= len) return len - dis - OPEN_MARKER_LEN - CLOSE_MARKER_LEN;
        if (dis > len) return -OPEN_MARKER_LEN - CLOSE_MARKER_LEN;
        break;
      }

    case 'link':
      {
        var _MARKER_LEN = 1;
        if (dis < _MARKER_LEN) return 0;
        if (dis >= _MARKER_LEN && dis <= _MARKER_LEN + anchor.length) return -1;
        if (dis > _MARKER_LEN + anchor.length) return anchor.length - dis;
        break;
      }

    case 'image':
      {
        var _MARKER_LEN2 = 1;
        if (dis < _MARKER_LEN2) return 0;
        if (dis >= _MARKER_LEN2 && dis < _MARKER_LEN2 * 2) return -1;
        if (dis >= _MARKER_LEN2 * 2 && dis <= _MARKER_LEN2 * 2 + alt.length) return -2;
        if (dis > _MARKER_LEN2 * 2 + alt.length) return alt.length - dis;
        break;
      }
  }
};

var formatCtrl_clearFormat = function clearFormat(token, _ref2) {
  var start = _ref2.start,
      end = _ref2.end;

  if (start) {
    var deltaStart = formatCtrl_getOffset(start.offset, token);
    start.delata += deltaStart;
  }

  if (end) {
    var delataEnd = formatCtrl_getOffset(end.offset, token);
    end.delata += delataEnd;
  }

  switch (token.type) {
    case 'strong':
    case 'del':
    case 'em':
    case 'link':
    case 'html_tag':
      {
        // underline, sub, sup
        var parent = token.parent;
        var index = parent.indexOf(token);
        parent.splice.apply(parent, [index, 1].concat(Object(toConsumableArray["a" /* default */])(token.children)));
        break;
      }

    case 'image':
      {
        token.type = 'text';
        token.raw = token.alt;
        delete token.marker;
        delete token.src;
        break;
      }

    case 'inline_math':
    case 'inline_code':
      {
        token.type = 'text';
        token.raw = token.content;
        delete token.marker;
        break;
      }
  }
};

var formatCtrl_addFormat = function addFormat(type, block, _ref3) {
  var start = _ref3.start,
      end = _ref3.end;
  if (block.type === 'pre') return false;

  switch (type) {
    case 'em':
    case 'del':
    case 'inline_code':
    case 'strong':
    case 'inline_math':
      {
        var MARKER = FORMAT_MARKER_MAP[type];
        var oldText = block.text;
        block.text = oldText.substring(0, start.offset) + MARKER + oldText.substring(start.offset, end.offset) + MARKER + oldText.substring(end.offset);
        start.offset += MARKER.length;
        end.offset += MARKER.length;
        break;
      }

    case 'sub':
    case 'sup':
    case 'u':
      {
        var _MARKER = FORMAT_MARKER_MAP[type];
        var _oldText = block.text;
        block.text = _oldText.substring(0, start.offset) + _MARKER.open + _oldText.substring(start.offset, end.offset) + _MARKER.close + _oldText.substring(end.offset);
        start.offset += _MARKER.open.length;
        end.offset += _MARKER.open.length;
        break;
      }

    case 'link':
    case 'image':
      {
        var _oldText2 = block.text;
        var anchorTextLen = end.offset - start.offset;
        block.text = _oldText2.substring(0, start.offset) + (type === 'link' ? '[' : '![') + _oldText2.substring(start.offset, end.offset) + ']()' + _oldText2.substring(end.offset); // put cursor between `()`

        start.offset += type === 'link' ? 3 + anchorTextLen : 4 + anchorTextLen;
        end.offset = start.offset;
        break;
      }
  }
};

var formatCtrl_checkTokenIsInlineFormat = function checkTokenIsInlineFormat(token) {
  var type = token.type,
      tag = token.tag;
  if (FORMAT_TYPES.includes(type)) return true;
  if (type === 'html_tag' && /^(?:u|sub|sup)$/i.test(tag)) return true;
  return false;
};

var formatCtrl_formatCtrl = function formatCtrl(ContentState) {
  ContentState.prototype.selectionFormats = function () {
    var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : lib_selection.getCursorRange(),
        start = _ref4.start,
        end = _ref4.end;

    if (!start || !end) {
      return {
        formats: [],
        tokens: [],
        neighbors: []
      };
    }

    var startBlock = this.getBlock(start.key);
    var formats = [];
    var neighbors = [];
    var tokens = [];

    if (start.key === end.key) {
      var text = startBlock.text;
      tokens = parser_tokenizer(text);

      (function iterator(tks) {
        var _iterator = formatCtrl_createForOfIteratorHelper(tks),
            _step;

        try {
          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            var token = _step.value;

            if (formatCtrl_checkTokenIsInlineFormat(token) && start.offset >= token.range.start && end.offset <= token.range.end) {
              formats.push(token);
            }

            if (formatCtrl_checkTokenIsInlineFormat(token) && (start.offset >= token.range.start && start.offset <= token.range.end || end.offset >= token.range.start && end.offset <= token.range.end || start.offset <= token.range.start && token.range.end <= end.offset)) {
              neighbors.push(token);
            }

            if (token.children && token.children.length) {
              iterator(token.children);
            }
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
      })(tokens);
    }

    return {
      formats: formats,
      tokens: tokens,
      neighbors: neighbors
    };
  };

  ContentState.prototype.clearBlockFormat = function (block) {
    var _ref5 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : lib_selection.getCursorRange(),
        start = _ref5.start,
        end = _ref5.end;

    var type = arguments.length > 2 ? arguments[2] : undefined;

    if (!start || !end) {
      return;
    }

    if (block.type === 'pre') return false;
    var key = block.key;
    var tokens;
    var neighbors;

    if (start.key === end.key && start.key === key) {
      var _this$selectionFormat = this.selectionFormats({
        start: start,
        end: end
      });

      tokens = _this$selectionFormat.tokens;
      neighbors = _this$selectionFormat.neighbors;
    } else if (start.key !== end.key && start.key === key) {
      var _this$selectionFormat2 = this.selectionFormats({
        start: start,
        end: {
          key: start.key,
          offset: block.text.length
        }
      });

      tokens = _this$selectionFormat2.tokens;
      neighbors = _this$selectionFormat2.neighbors;
    } else if (start.key !== end.key && end.key === key) {
      var _this$selectionFormat3 = this.selectionFormats({
        start: {
          key: end.key,
          offset: 0
        },
        end: end
      });

      tokens = _this$selectionFormat3.tokens;
      neighbors = _this$selectionFormat3.neighbors;
    } else {
      var _this$selectionFormat4 = this.selectionFormats({
        start: {
          key: key,
          offset: 0
        },
        end: {
          key: key,
          offset: block.text.length
        }
      });

      tokens = _this$selectionFormat4.tokens;
      neighbors = _this$selectionFormat4.neighbors;
    }

    neighbors = type ? neighbors.filter(function (n) {
      return n.type === type || n.type === 'html_tag' && n.tag === type;
    }) : neighbors;

    var _iterator2 = formatCtrl_createForOfIteratorHelper(neighbors),
        _step2;

    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        var neighbor = _step2.value;
        formatCtrl_clearFormat(neighbor, {
          start: start,
          end: end
        });
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }

    start.offset += start.delata;
    end.offset += end.delata;
    block.text = generator(tokens);
  };

  ContentState.prototype.format = function (type) {
    var _this = this;

    var _selection$getCursorR = lib_selection.getCursorRange(),
        start = _selection$getCursorR.start,
        end = _selection$getCursorR.end;

    if (!start || !end) {
      return;
    }

    var startBlock = this.getBlock(start.key);
    var endBlock = this.getBlock(end.key);
    start.delata = end.delata = 0;

    if (start.key === end.key) {
      var _this$selectionFormat5 = this.selectionFormats(),
          formats = _this$selectionFormat5.formats,
          tokens = _this$selectionFormat5.tokens,
          neighbors = _this$selectionFormat5.neighbors;

      var currentFormats = formats.filter(function (format) {
        return format.type === type || format.type === 'html_tag' && format.tag === type;
      }).reverse();
      var currentNeightbors = neighbors.filter(function (format) {
        return format.type === type || format.type === 'html_tag' && format.tag === type;
      }).reverse(); // cache delata

      if (type === 'clear') {
        var _iterator3 = formatCtrl_createForOfIteratorHelper(neighbors),
            _step3;

        try {
          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
            var neighbor = _step3.value;
            formatCtrl_clearFormat(neighbor, {
              start: start,
              end: end
            });
          }
        } catch (err) {
          _iterator3.e(err);
        } finally {
          _iterator3.f();
        }

        start.offset += start.delata;
        end.offset += end.delata;
        startBlock.text = generator(tokens);
      } else if (currentFormats.length) {
        var _iterator4 = formatCtrl_createForOfIteratorHelper(currentFormats),
            _step4;

        try {
          for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
            var token = _step4.value;
            formatCtrl_clearFormat(token, {
              start: start,
              end: end
            });
          }
        } catch (err) {
          _iterator4.e(err);
        } finally {
          _iterator4.f();
        }

        start.offset += start.delata;
        end.offset += end.delata;
        startBlock.text = generator(tokens);
      } else {
        if (currentNeightbors.length) {
          var _iterator5 = formatCtrl_createForOfIteratorHelper(currentNeightbors),
              _step5;

          try {
            for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
              var _neighbor = _step5.value;
              formatCtrl_clearFormat(_neighbor, {
                start: start,
                end: end
              });
            }
          } catch (err) {
            _iterator5.e(err);
          } finally {
            _iterator5.f();
          }
        }

        start.offset += start.delata;
        end.offset += end.delata;
        startBlock.text = generator(tokens);
        formatCtrl_addFormat(type, startBlock, {
          start: start,
          end: end
        });

        if (type === 'image') {
          // Show image selector when create a inline image by menu/shortcut/or just input `![]()`
          requestAnimationFrame(function () {
            var startNode = lib_selection.getSelectionStart();

            if (startNode) {
              var imageWrapper = startNode.closest('.ag-inline-image');

              if (imageWrapper && imageWrapper.classList.contains('ag-empty-image')) {
                var imageInfo = getImageInfo_getImageInfo(imageWrapper);

                _this.muya.eventCenter.dispatch('muya-image-selector', {
                  reference: imageWrapper,
                  imageInfo: imageInfo,
                  cb: function cb() {}
                });
              }
            }
          });
        }
      }

      this.cursor = {
        start: start,
        end: end
      };
      this.partialRender();
    } else {
      var nextBlock = startBlock;
      var formatType = type !== 'clear' ? type : undefined;

      while (nextBlock && nextBlock !== endBlock) {
        this.clearBlockFormat(nextBlock, {
          start: start,
          end: end
        }, formatType);
        nextBlock = this.findNextBlockInLocation(nextBlock);
      }

      this.clearBlockFormat(endBlock, {
        start: start,
        end: end
      }, formatType);

      if (type !== 'clear') {
        formatCtrl_addFormat(type, startBlock, {
          start: start,
          end: {
            offset: startBlock.text.length
          }
        });
        nextBlock = this.findNextBlockInLocation(startBlock);

        while (nextBlock && nextBlock !== endBlock) {
          formatCtrl_addFormat(type, nextBlock, {
            start: {
              offset: 0
            },
            end: {
              offset: nextBlock.text.length
            }
          });
          nextBlock = this.findNextBlockInLocation(nextBlock);
        }

        formatCtrl_addFormat(type, endBlock, {
          start: {
            offset: 0
          },
          end: end
        });
      }

      this.cursor = {
        start: start,
        end: end
      };
      this.partialRender();
    }
  };
};

/* harmony default export */ var contentState_formatCtrl = (formatCtrl_formatCtrl);
// CONCATENATED MODULE: ./src/muya/lib/contentState/searchCtrl.js









function searchCtrl_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = searchCtrl_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function searchCtrl_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return searchCtrl_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return searchCtrl_arrayLikeToArray(o, minLen); }

function searchCtrl_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

var defaultSearchOption = {
  caseSensitive: false,
  selectHighlight: false,
  highlightIndex: -1
};

var searchCtrl = function searchCtrl(ContentState) {
  ContentState.prototype.replaceOne = function (match, value) {
    var start = match.start,
        end = match.end,
        key = match.key;
    var block = this.getBlock(key);
    var text = block.text;
    block.text = text.substring(0, start) + value + text.substring(end);
  };

  ContentState.prototype.replace = function (replaceValue) {
    var opt = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
      isSingle: true
    };
    var isSingle = opt.isSingle,
        caseSensitive = opt.caseSensitive;
    var _this$searchMatches = this.searchMatches,
        matches = _this$searchMatches.matches,
        value = _this$searchMatches.value,
        index = _this$searchMatches.index;

    if (matches.length) {
      if (isSingle) {
        this.replaceOne(matches[index], replaceValue);
      } else {
        // replace all
        var _iterator = searchCtrl_createForOfIteratorHelper(matches),
            _step;

        try {
          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            var match = _step.value;
            this.replaceOne(match, replaceValue);
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
      }

      var highlightIndex = index < matches.length - 1 ? index : index - 1;
      this.search(value, {
        caseSensitive: caseSensitive,
        highlightIndex: isSingle ? highlightIndex : -1
      });
    }
  };

  ContentState.prototype.setCursorToHighlight = function () {
    var _this$searchMatches2 = this.searchMatches,
        matches = _this$searchMatches2.matches,
        index = _this$searchMatches2.index;
    var match = matches[index];
    if (!match) return;
    var key = match.key,
        start = match.start,
        end = match.end;
    this.cursor = {
      noHistory: true,
      start: {
        key: key,
        offset: start
      },
      end: {
        key: key,
        offset: end
      }
    };
  };

  ContentState.prototype.find = function (action
  /* prev next */
  ) {
    var _this$searchMatches3 = this.searchMatches,
        matches = _this$searchMatches3.matches,
        index = _this$searchMatches3.index;
    var len = matches.length;
    if (!len) return;
    index = action === 'next' ? index + 1 : index - 1;
    if (index < 0) index = len - 1;
    if (index >= len) index = 0;
    this.searchMatches.index = index;
    this.setCursorToHighlight();
  };

  ContentState.prototype.search = function (value) {
    var opt = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    value = value.trim();
    var matches = [];

    var _Object$assign = Object.assign(defaultSearchOption, opt),
        caseSensitive = _Object$assign.caseSensitive,
        highlightIndex = _Object$assign.highlightIndex;

    var blocks = this.blocks;

    var search = function search(blocks) {
      var _iterator2 = searchCtrl_createForOfIteratorHelper(blocks),
          _step2;

      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var block = _step2.value;
          var text = block.text,
              key = block.key;

          if (!caseSensitive) {
            text = text.toLowerCase();
            value = value.toLowerCase();
          }

          if (text) {
            var i = text.indexOf(value);

            while (i > -1) {
              matches.push({
                key: key,
                start: i,
                end: i + value.length
              });
              i = text.indexOf(value, i + value.length);
            }
          }

          if (block.children.length) {
            search(block.children);
          }
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
    };

    if (value) search(blocks);
    var index = -1;

    if (highlightIndex !== -1) {
      index = highlightIndex; // If set the highlight index, then highlight the highlighIndex
    } else if (matches.length) {
      index = 0; // highlight the first word that matches.
    }

    Object.assign(this.searchMatches, {
      value: value,
      matches: matches,
      index: index
    });
    if (value) this.setCursorToHighlight();
    return matches;
  };
};

/* harmony default export */ var contentState_searchCtrl = (searchCtrl);
// CONCATENATED MODULE: ./src/muya/lib/contentState/containerCtrl.js



var containerCtrl_LINE_BREAKS_REG = /\n/;
var FUNCTION_TYPE_LANG = {
  'multiplemath': 'latex',
  'flowchart': 'yaml',
  'mermaid': 'yaml',
  'sequence': 'yaml',
  'vega-lite': 'yaml',
  'html': 'markup'
};

var containerCtrl = function containerCtrl(ContentState) {
  ContentState.prototype.createContainerBlock = function (functionType) {
    var value = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
    var figureBlock = this.createBlock('figure', {
      functionType: functionType
    });

    var _this$createPreAndPre = this.createPreAndPreview(functionType, value),
        preBlock = _this$createPreAndPre.preBlock,
        preview = _this$createPreAndPre.preview;

    this.appendChild(figureBlock, preBlock);
    this.appendChild(figureBlock, preview);
    return figureBlock;
  };

  ContentState.prototype.createPreAndPreview = function (functionType) {
    var _this = this;

    var value = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
    var lang = FUNCTION_TYPE_LANG[functionType];
    var preBlock = this.createBlock('pre', {
      functionType: functionType,
      lang: lang
    });
    var codeBlock = this.createBlock('code', {
      lang: lang
    });
    this.appendChild(preBlock, codeBlock);

    if (typeof value === 'string' && value) {
      value.replace(/^\s+/, '').split(containerCtrl_LINE_BREAKS_REG).forEach(function (line) {
        var codeLine = _this.createBlock('span', {
          text: line,
          functionType: 'codeLine',
          lang: lang
        });

        _this.appendChild(codeBlock, codeLine);
      });
    } else {
      var emptyLine = this.createBlock('span', {
        functionType: 'codeLine',
        lang: lang
      });
      this.appendChild(codeBlock, emptyLine);
    }

    var preview = this.createBlock('div', {
      editable: false,
      functionType: functionType
    });
    return {
      preBlock: preBlock,
      preview: preview
    };
  };

  ContentState.prototype.initContainerBlock = function (functionType, block) {
    // p block
    block.type = 'figure';
    block.functionType = functionType;
    block.children = [];

    var _this$createPreAndPre2 = this.createPreAndPreview(functionType),
        preBlock = _this$createPreAndPre2.preBlock,
        preview = _this$createPreAndPre2.preview;

    this.appendChild(block, preBlock);
    this.appendChild(block, preview);
    return preBlock.children[0].children[0];
  };

  ContentState.prototype.handleContainerBlockClick = function (figure) {
    var id = figure.id;
    var mathBlock = this.getBlock(id);
    var preBlock = mathBlock.children[0];
    var firstLine = preBlock.children[0].children[0];
    var key = firstLine.key;
    var offset = 0;
    this.cursor = {
      start: {
        key: key,
        offset: offset
      },
      end: {
        key: key,
        offset: offset
      }
    };
    this.partialRender();
  };

  ContentState.prototype.updateMathBlock = function (block) {
    var type = block.type;
    if (type !== 'p') return false;
    var text = block.children[0].text;
    var functionType = 'multiplemath';
    return text.trim() === '$$' ? this.initContainerBlock(functionType, block) : false;
  };
};

/* harmony default export */ var contentState_containerCtrl = (containerCtrl);
// CONCATENATED MODULE: ./src/muya/lib/contentState/htmlBlock.js



var HTML_BLOCK_REG = /^<([a-zA-Z\d-]+)(?=\s|>)[^<>]*?>$/;

var htmlBlock_htmlBlock = function htmlBlock(ContentState) {
  ContentState.prototype.createHtmlBlock = function (code) {
    var block = this.createBlock('figure');
    block.functionType = 'html';

    var _this$createPreAndPre = this.createPreAndPreview('html', code),
        preBlock = _this$createPreAndPre.preBlock,
        preview = _this$createPreAndPre.preview;

    this.appendChild(block, preBlock);
    this.appendChild(block, preview);
    return block;
  };

  ContentState.prototype.initHtmlBlock = function (block) {
    var htmlContent = '';
    var text = block.children[0].text;
    var matches = rules_inlineRules.html_tag.exec(text);

    if (matches) {
      var tag = matches[3];
      var content = matches[4] || '';
      var openTag = matches[2];
      var closeTag = matches[5];
      var isVoidTag = VOID_HTML_TAGS.indexOf(tag) > -1;

      if (closeTag) {
        htmlContent = text;
      } else if (isVoidTag) {
        htmlContent = text;

        if (content) {
          // TODO: @jocs notice user that the html is not valid.
          console.warn('Invalid html content.');
        }
      } else {
        htmlContent = "".concat(openTag, "\n").concat(content, "\n</").concat(tag, ">");
      }
    } else {
      htmlContent = "<div>\n".concat(text, "\n</div>");
    }

    block.type = 'figure';
    block.functionType = 'html';
    block.text = htmlContent;
    block.children = [];

    var _this$createPreAndPre2 = this.createPreAndPreview('html', htmlContent),
        preBlock = _this$createPreAndPre2.preBlock,
        preview = _this$createPreAndPre2.preview;

    this.appendChild(block, preBlock);
    this.appendChild(block, preview);
    return preBlock; // preBlock
  };

  ContentState.prototype.updateHtmlBlock = function (block) {
    var type = block.type;
    if (type !== 'li' && type !== 'p') return false;
    var text = block.children[0].text;
    var match = HTML_BLOCK_REG.exec(text);
    var tagName = match && match[1] && HTML_TAGS.find(function (t) {
      return t === match[1];
    });
    return VOID_HTML_TAGS.indexOf(tagName) === -1 && tagName ? this.initHtmlBlock(block) : false;
  };
};

/* harmony default export */ var contentState_htmlBlock = (htmlBlock_htmlBlock);
// CONCATENATED MODULE: ./src/muya/lib/contentState/clickCtrl.js




var clickCtrl_clickCtrl = function clickCtrl(ContentState) {
  ContentState.prototype.clickHandler = function (event) {
    var _this = this;

    var eventCenter = this.muya.eventCenter;
    var target = event.target;

    if (dom_isMuyaEditorElement(target)) {
      var lastBlock = this.getLastBlock();
      var archor = this.findOutMostBlock(lastBlock);
      var archorParagraph = document.querySelector("#".concat(archor.key));
      var rect = archorParagraph.getBoundingClientRect(); // If click below the last paragraph
      // and the last paragraph is not empty, create a new empty paragraph

      if (event.clientY > rect.top + rect.height) {
        var needToInsertNewParagraph = false;

        if (lastBlock.type === 'span') {
          if (/atxLine|paragraphContent/.test(lastBlock.functionType) && /\S/.test(lastBlock.text)) {
            needToInsertNewParagraph = true;
          }

          if (!/atxLine|paragraphContent/.test(lastBlock.functionType)) {
            needToInsertNewParagraph = true;
          }
        } else {
          needToInsertNewParagraph = true;
        }

        if (needToInsertNewParagraph) {
          var paragraphBlock = this.createBlockP();
          this.insertAfter(paragraphBlock, archor);
          var key = paragraphBlock.key;
          var offset = 0;
          this.cursor = {
            start: {
              key: key,
              offset: offset
            },
            end: {
              key: key,
              offset: offset
            }
          };
          return this.partialRender();
        }
      }
    } // handle front menu click


    var _this$cursor = this.cursor,
        oldStart = _this$cursor.start,
        oldEnd = _this$cursor.end;

    if (oldStart && oldEnd) {
      var hasSameParent = false;
      var startBlock = this.getBlock(oldStart.key);
      var endBlock = this.getBlock(oldEnd.key);

      if (startBlock && endBlock) {
        var startOutBlock = this.findOutMostBlock(startBlock);
        var endOutBlock = this.findOutMostBlock(endBlock);
        hasSameParent = startOutBlock === endOutBlock;
      } // show the muya-front-menu only when the cursor in the same paragraph


      if (target.closest('.ag-front-icon') && hasSameParent) {
        var currentBlock = this.findOutMostBlock(startBlock);
        var frontIcon = target.closest('.ag-front-icon');

        var _rect = frontIcon.getBoundingClientRect();

        var reference = {
          getBoundingClientRect: function getBoundingClientRect() {
            return _rect;
          },
          clientWidth: _rect.width,
          clientHeight: _rect.height,
          id: currentBlock.key
        };
        this.selectedBlock = currentBlock;
        eventCenter.dispatch('muya-front-menu', {
          reference: reference,
          outmostBlock: currentBlock,
          startBlock: startBlock,
          endBlock: endBlock
        });
        return this.partialRender();
      }
    }

    var _selection$getCursorR = lib_selection.getCursorRange(),
        start = _selection$getCursorR.start,
        end = _selection$getCursorR.end; // fix #625, the selection maybe not in edit area.


    if (!start || !end) {
      return;
    } // format-click


    var node = lib_selection.getSelectionStart();
    var inlineNode = node ? node.closest('.ag-inline-rule') : null;

    if (inlineNode) {
      var formatType = null;
      var data = null;

      switch (inlineNode.tagName) {
        case 'SPAN':
          {
            if (inlineNode.hasAttribute('data-emoji')) {
              formatType = 'emoji';
              data = inlineNode.getAttribute('data-emoji');
            } else if (inlineNode.classList.contains('ag-math-text')) {
              formatType = 'inline_math';
              data = inlineNode.textContent;
            }

            break;
          }

        case 'A':
          {
            formatType = 'link'; // auto link or []() link

            data = {
              text: inlineNode.textContent,
              href: inlineNode.getAttribute('href')
            };
            break;
          }

        case 'STRONG':
          {
            formatType = 'strong';
            data = inlineNode.textContent;
            break;
          }

        case 'EM':
          {
            formatType = 'em';
            data = inlineNode.textContent;
            break;
          }

        case 'DEL':
          {
            formatType = 'del';
            data = inlineNode.textContent;
            break;
          }

        case 'CODE':
          {
            formatType = 'inline_code';
            data = inlineNode.textContent;
            break;
          }
      }

      if (formatType) {
        eventCenter.dispatch('format-click', {
          event: event,
          formatType: formatType,
          data: data
        });
      }
    }

    var block = this.getBlock(start.key);
    var needRender = false; // is show format float box?

    if (start.key === end.key && start.offset !== end.offset && HAS_TEXT_BLOCK_REG.test(block.type) && block.functionType !== 'codeLine' && block.functionType !== 'languageInput') {
      var _reference = this.getPositionReference();

      var _this$selectionFormat = this.selectionFormats(),
          formats = _this$selectionFormat.formats;

      eventCenter.dispatch('muya-format-picker', {
        reference: _reference,
        formats: formats
      });
    } // update '```xxx' to code block when you click other place or use press arrow key.


    if (block && start.key !== this.cursor.start.key) {
      var oldBlock = this.getBlock(this.cursor.start.key);

      if (oldBlock) {
        needRender = needRender || this.codeBlockUpdate(oldBlock);
      }
    } // change active status when paragraph changed


    if (start.key !== this.cursor.start.key || end.key !== this.cursor.end.key) {
      needRender = true;
    }

    var needMarkedUpdate = this.checkNeedRender(this.cursor) || this.checkNeedRender({
      start: start,
      end: end
    });

    if (needRender) {
      this.cursor = {
        start: start,
        end: end
      };
      return this.partialRender();
    } else if (needMarkedUpdate) {
      // Fix: whole select can not be canceled #613
      requestAnimationFrame(function () {
        var cursor = lib_selection.getCursorRange();

        if (!cursor.start || !cursor.end) {
          return;
        }

        _this.cursor = cursor;
        return _this.partialRender();
      });
    } else {
      this.cursor = {
        start: start,
        end: end
      };
    }
  };
};

/* harmony default export */ var contentState_clickCtrl = (clickCtrl_clickCtrl);
// CONCATENATED MODULE: ./src/muya/lib/contentState/inputCtrl.js










function inputCtrl_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = inputCtrl_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function inputCtrl_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return inputCtrl_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return inputCtrl_arrayLikeToArray(o, minLen); }

function inputCtrl_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }






var BRACKET_HASH = {
  '{': '}',
  '[': ']',
  '(': ')',
  '*': '*',
  '_': '_',
  '"': '"',
  '\'': '\'',
  '$': '$',
  '~': '~'
};
var BACK_HASH = {
  '}': '{',
  ']': '[',
  ')': '(',
  '*': '*',
  '_': '_',
  '"': '"',
  '\'': '\'',
  '$': '$',
  '~': '~'
};

var inputCtrl_inputCtrl = function inputCtrl(ContentState) {
  // Input @ to quick insert paragraph
  ContentState.prototype.checkQuickInsert = function (block) {
    var type = block.type,
        text = block.text,
        functionType = block.functionType;
    if (type !== 'span' || functionType !== 'paragraphContent') return false;
    return /^@\S*$/.test(text);
  };

  ContentState.prototype.checkCursorInInlineMath = function (text, offset) {
    var tokens = parser_tokenizer(text, [], false);
    return tokens.filter(function (t) {
      return t.type === 'inline_math';
    }).some(function (t) {
      return offset >= t.range.start && offset <= t.range.end;
    });
  };

  ContentState.prototype.checkNotSameToken = function (oldText, text) {
    var oldTokens = parser_tokenizer(oldText);
    var tokens = parser_tokenizer(text);
    var oldCache = {};
    var cache = {};

    var _iterator = inputCtrl_createForOfIteratorHelper(oldTokens),
        _step;

    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var type = _step.value.type;

        if (oldCache[type]) {
          oldCache[type]++;
        } else {
          oldCache[type] = 1;
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }

    var _iterator2 = inputCtrl_createForOfIteratorHelper(tokens),
        _step2;

    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        var _type = _step2.value.type;

        if (cache[_type]) {
          cache[_type]++;
        } else {
          cache[_type] = 1;
        }
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }

    if (Object.keys(oldCache).length !== Object.keys(cache).length) {
      return true;
    }

    for (var _i = 0, _Object$keys = Object.keys(oldCache); _i < _Object$keys.length; _i++) {
      var key = _Object$keys[_i];

      if (!cache[key] || oldCache[key] !== cache[key]) {
        return true;
      }
    }

    return false;
  };

  ContentState.prototype.inputHandler = function (event) {
    var _selection$getCursorR = lib_selection.getCursorRange(),
        start = _selection$getCursorR.start,
        end = _selection$getCursorR.end;

    if (!start || !end) {
      return;
    }

    var _this$cursor = this.cursor,
        oldStart = _this$cursor.start,
        oldEnd = _this$cursor.end;
    var key = start.key;
    var block = this.getBlock(key);
    var paragraph = document.querySelector("#".concat(key));
    var text = getTextContent(paragraph, [CLASS_OR_ID['AG_MATH_RENDER'], CLASS_OR_ID['AG_RUBY_RENDER']]);
    var needRender = false;
    var needRenderAll = false;

    if (oldStart.key !== oldEnd.key) {
      var startBlock = this.getBlock(oldStart.key);
      var startOutmostBlock = this.findOutMostBlock(startBlock);
      var endBlock = this.getBlock(oldEnd.key);
      var endOutmostBlock = this.findOutMostBlock(endBlock);

      if ( // fix #918.
      startBlock.functionType === 'languageInput') {
        if (startOutmostBlock === endOutmostBlock && !endBlock.nextSibling) {
          this.removeBlocks(startBlock, endBlock, false);
          endBlock.text = '';
        } else if (startOutmostBlock !== endOutmostBlock) {
          var preBlock = this.getParent(startBlock);
          var pBlock = this.createBlock('p');
          this.removeBlocks(startBlock, endBlock);
          delete startBlock.functionType;
          this.appendChild(pBlock, startBlock);
          this.insertBefore(pBlock, preBlock);
          this.removeBlock(preBlock);
        } else {
          this.removeBlocks(startBlock, endBlock);
        }
      } else {
        this.removeBlocks(startBlock, endBlock);
      }

      if (this.blocks.length === 1) {
        needRenderAll = true;
      }

      needRender = true;
    } // auto pair (not need to auto pair in math block)


    if (block && block.text !== text) {
      if (start.key === end.key && start.offset === end.offset && event.type === 'input') {
        var offset = start.offset;
        var _this$muya$options = this.muya.options,
            autoPairBracket = _this$muya$options.autoPairBracket,
            autoPairMarkdownSyntax = _this$muya$options.autoPairMarkdownSyntax,
            autoPairQuote = _this$muya$options.autoPairQuote;
        var inputChar = text.charAt(+offset - 1);
        var preInputChar = text.charAt(+offset - 2);
        var prePreInputChar = text.charAt(+offset - 3);
        var postInputChar = text.charAt(+offset);

        if (/^delete/.test(event.inputType)) {
          // handle `deleteContentBackward` or `deleteContentForward`
          var deletedChar = block.text[offset];

          if (event.inputType === 'deleteContentBackward' && postInputChar === BRACKET_HASH[deletedChar]) {
            needRender = true;
            text = text.substring(0, offset) + text.substring(offset + 1);
          }

          if (event.inputType === 'deleteContentForward' && inputChar === BACK_HASH[deletedChar]) {
            needRender = true;
            start.offset -= 1;
            end.offset -= 1;
            text = text.substring(0, offset - 1) + text.substring(offset);
          }
          /* eslint-disable no-useless-escape */

        } else if (event.inputType.indexOf('delete') === -1 && inputChar === postInputChar && (autoPairQuote && /[']{1}/.test(inputChar) || autoPairQuote && /["]{1}/.test(inputChar) || autoPairBracket && /[\}\]\)]{1}/.test(inputChar) || autoPairMarkdownSyntax && /[$]{1}/.test(inputChar) || autoPairMarkdownSyntax && /[*$`~_]{1}/.test(inputChar) && /[_*~]{1}/.test(prePreInputChar))) {
          needRender = true;
          text = text.substring(0, offset) + text.substring(offset + 1);
        } else {
          /* eslint-disable no-useless-escape */
          // Not Unicode aware, since things like \p{Alphabetic} or \p{L} are not supported yet
          var isInInlineMath = this.checkCursorInInlineMath(text, offset);

          if (!/\\/.test(preInputChar) && (autoPairQuote && /[']{1}/.test(inputChar) && !/[a-zA-Z\d]{1}/.test(preInputChar) || autoPairQuote && /["]{1}/.test(inputChar) || autoPairBracket && /[\{\[\(]{1}/.test(inputChar) || block.functionType !== 'codeLine' && !isInInlineMath && autoPairMarkdownSyntax && /[*$`~_]{1}/.test(inputChar))) {
            needRender = true;
            text = BRACKET_HASH[event.data] ? text.substring(0, offset) + BRACKET_HASH[inputChar] + text.substring(offset) : text;
          }
          /* eslint-enable no-useless-escape */
          // Delete the last `*` of `**` when you insert one space between `**` to create a bullet list.


          if (/\s/.test(event.data) && /^\* /.test(text) && preInputChar === '*' && postInputChar === '*') {
            text = text.substring(0, offset) + text.substring(offset + 1);
            needRender = true;
          }
        }
      }

      if (this.checkNotSameToken(block.text, text)) {
        needRender = true;
      } // Just work for `Shift + Enter` to create a soft and hard line break.


      if (block.text.endsWith('\n') && start.offset === text.length && (event.inputType === 'insertText' || event.type === 'compositionend')) {
        block.text += event.data;
        start.offset++;
        end.offset++;
      } else if (block.text.length === oldStart.offset && block.text[oldStart.offset - 2] === '\n' && event.inputType === 'deleteContentBackward') {
        block.text = block.text.substring(0, oldStart.offset - 1);
        start.offset = block.text.length;
        end.offset = block.text.length;
      } else {
        block.text = text;
      }

      if (rules_beginRules['reference_definition'].test(text)) {
        needRenderAll = true;
      }
    } // show quick insert


    var rect = paragraph.getBoundingClientRect();
    var checkQuickInsert = this.checkQuickInsert(block);
    var reference = this.getPositionReference();

    reference.getBoundingClientRect = function () {
      var x = rect.x,
          y = rect.y,
          left = rect.left,
          top = rect.top,
          height = rect.height,
          bottom = rect.bottom;
      return Object.assign({}, {
        left: left,
        x: x,
        top: top,
        y: y,
        bottom: bottom,
        height: height,
        width: 0,
        right: left
      });
    };

    this.muya.eventCenter.dispatch('muya-quick-insert', reference, block, !!checkQuickInsert); // Update preview content of math block

    if (block && block.type === 'span' && block.functionType === 'codeLine') {
      needRender = true;
    }

    this.cursor = {
      start: start,
      end: end
    };
    var checkMarkedUpdate = this.checkNeedRender();
    var inlineUpdatedBlock = this.isCollapse() && this.checkInlineUpdate(block); // just for fix #707,need render All if in combines pre list and next list into one list.

    if (inlineUpdatedBlock) {
      var liBlock = this.getParent(inlineUpdatedBlock);

      if (liBlock && liBlock.type === 'li' && liBlock.preSibling && liBlock.nextSibling) {
        needRenderAll = true;
      }
    }

    if (checkMarkedUpdate || inlineUpdatedBlock || needRender) {
      return needRenderAll ? this.render() : this.partialRender();
    }
  };
};

/* harmony default export */ var contentState_inputCtrl = (inputCtrl_inputCtrl);
// CONCATENATED MODULE: ./src/muya/lib/contentState/tocCtrl.js









function tocCtrl_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = tocCtrl_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function tocCtrl_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return tocCtrl_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return tocCtrl_arrayLikeToArray(o, minLen); }

function tocCtrl_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

var tocCtrl = function tocCtrl(ContentState) {
  ContentState.prototype.getTOC = function () {
    var blocks = this.blocks;
    var toc = [];

    var _iterator = tocCtrl_createForOfIteratorHelper(blocks),
        _step;

    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var block = _step.value;

        if (/^h\d$/.test(block.type)) {
          var headingStyle = block.headingStyle,
              key = block.key,
              type = block.type;
          var text = block.children[0].text;
          var content = headingStyle === 'setext' ? text.trim() : text.replace(/^ *#{1,6} {1,}/, '').trim();
          var lvl = +type.substring(1);
          var slug = key;
          toc.push({
            content: content,
            lvl: lvl,
            slug: slug
          });
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }

    return toc;
  };
};

/* harmony default export */ var contentState_tocCtrl = (tocCtrl);
// CONCATENATED MODULE: ./src/muya/lib/contentState/emojiCtrl.js








function emojiCtrl_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = emojiCtrl_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function emojiCtrl_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return emojiCtrl_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return emojiCtrl_arrayLikeToArray(o, minLen); }

function emojiCtrl_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }



var emojiCtrl_emojiCtrl = function emojiCtrl(ContentState) {
  ContentState.prototype.setEmoji = function (item) {
    var _this$cursor$start = this.cursor.start,
        key = _this$cursor$start.key,
        offset = _this$cursor$start.offset;
    var startBlock = this.getBlock(key);
    var text = startBlock.text;
    var tokens = parser_tokenizer(text);
    var delta = 0;

    var findEmojiToken = function findEmojiToken(tokens, offset) {
      var _iterator = emojiCtrl_createForOfIteratorHelper(tokens),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var _token = _step.value;
          var _token$range = _token.range,
              start = _token$range.start,
              end = _token$range.end;

          if (offset >= start && offset <= end) {
            delta = end - offset;
            return _token.children && Array.isArray(_token.children) && _token.children.length ? findEmojiToken(_token.children, offset) : _token;
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    };

    var token = findEmojiToken(tokens, offset);

    if (token && token.type === 'emoji') {
      var emojiText = item.aliases[0];
      offset += delta + emojiText.length - token.content.length;
      token.content = emojiText;
      token.raw = ":".concat(emojiText, ":");
      startBlock.text = generator(tokens);
      this.cursor = {
        start: {
          key: key,
          offset: offset
        },
        end: {
          key: key,
          offset: offset
        }
      };
      return this.partialRender();
    }
  };
};

/* harmony default export */ var contentState_emojiCtrl = (emojiCtrl_emojiCtrl);
// CONCATENATED MODULE: ./src/muya/lib/contentState/imageCtrl.js


var imageCtrl_imageCtrl = function imageCtrl(ContentState) {
  /**
   * insert inline image at the cursor position.
   */
  ContentState.prototype.insertImage = function (_ref) {
    var _ref$alt = _ref.alt,
        alt = _ref$alt === void 0 ? '' : _ref$alt,
        _ref$src = _ref.src,
        src = _ref$src === void 0 ? '' : _ref$src,
        _ref$title = _ref.title,
        title = _ref$title === void 0 ? '' : _ref$title;
    var match = /(?:\/|\\)?([^./\\]+)\.[a-z]+$/.exec(src);

    if (!alt) {
      alt = match && match[1] ? match[1] : '';
    }

    var _this$cursor = this.cursor,
        start = _this$cursor.start,
        end = _this$cursor.end;

    var _this$selectionFormat = this.selectionFormats({
      start: start,
      end: end
    }),
        formats = _this$selectionFormat.formats;

    var key = start.key,
        startOffset = start.offset;
    var endOffset = end.offset;
    var block = this.getBlock(key);

    if (block.type === 'span' && (block.functionType === 'codeLine' || block.functionType === 'languageInput' || block.functionType === 'thematicBreakLine')) {
      // You can not insert image into code block or language input...
      return;
    }

    var text = block.text;
    var imageFormat = formats.filter(function (f) {
      return f.type === 'image';
    }); // Only encode URLs but not local paths or data URLs

    var imgUrl;

    if (URL_REG.test(src)) {
      imgUrl = encodeURI(src);
    } else {
      imgUrl = src;
    }

    var srcAndTitle = imgUrl;

    if (srcAndTitle && title) {
      srcAndTitle += " \"".concat(title, "\"");
    }

    if (imageFormat.length === 1 && imageFormat[0].range.start !== startOffset && imageFormat[0].range.end !== endOffset) {
      // Replace already existing image
      var imageAlt = alt; // Extract alt from image if there isn't an image source already (GH#562). E.g: ![old-alt]()

      if (imageFormat[0].alt && !imageFormat[0].src) {
        imageAlt = imageFormat[0].alt;
      }

      var _imageFormat$0$range = imageFormat[0].range,
          _start = _imageFormat$0$range.start,
          _end = _imageFormat$0$range.end;
      block.text = text.substring(0, _start) + "![".concat(imageAlt, "](").concat(srcAndTitle, ")") + text.substring(_end);
      this.cursor = {
        start: {
          key: key,
          offset: _start + 2
        },
        end: {
          key: key,
          offset: _start + 2 + imageAlt.length
        }
      };
    } else if (key !== end.key) {
      // Replace multi-line text
      var endBlock = this.getBlock(end.key);
      var _text = endBlock.text;
      endBlock.text = _text.substring(0, endOffset) + "![".concat(alt, "](").concat(srcAndTitle, ")") + _text.substring(endOffset);
      var offset = endOffset + 2;
      this.cursor = {
        start: {
          key: end.key,
          offset: offset
        },
        end: {
          key: end.key,
          offset: offset + alt.length
        }
      };
    } else {
      // Replace single-line text
      var _imageAlt = startOffset !== endOffset ? text.substring(startOffset, endOffset) : alt;

      block.text = text.substring(0, start.offset) + "![".concat(_imageAlt, "](").concat(srcAndTitle, ")") + text.substring(end.offset);
      this.cursor = {
        start: {
          key: key,
          offset: startOffset + 2
        },
        end: {
          key: key,
          offset: startOffset + 2 + _imageAlt.length
        }
      };
    }

    this.partialRender();
  };

  ContentState.prototype.replaceImage = function (_ref2, _ref3) {
    var key = _ref2.key,
        token = _ref2.token;
    var _ref3$alt = _ref3.alt,
        alt = _ref3$alt === void 0 ? '' : _ref3$alt,
        _ref3$src = _ref3.src,
        src = _ref3$src === void 0 ? '' : _ref3$src,
        _ref3$title = _ref3.title,
        title = _ref3$title === void 0 ? '' : _ref3$title;
    var block = this.getBlock(key);
    var _token$range = token.range,
        start = _token$range.start,
        end = _token$range.end;
    var oldText = block.text;
    var imageText = '![';

    if (alt) {
      imageText += alt;
    }

    imageText += '](';

    if (src) {
      imageText += src;
    }

    if (title) {
      imageText += " \"".concat(title, "\"");
    }

    imageText += ')';
    block.text = oldText.substring(0, start) + imageText + oldText.substring(end);
    return this.singleRender(block);
  };

  ContentState.prototype.deleteImage = function (_ref4) {
    var key = _ref4.key,
        token = _ref4.token;
    var block = this.getBlock(key);
    var oldText = block.text;
    var _token$range2 = token.range,
        start = _token$range2.start,
        end = _token$range2.end;
    block.text = oldText.substring(0, start) + oldText.substring(end);
    this.cursor = {
      start: {
        key: key,
        offset: start
      },
      end: {
        key: key,
        offset: start
      }
    };
    return this.singleRender(block);
  };

  ContentState.prototype.selectImage = function (imageInfo) {
    this.selectedImage = imageInfo;
    var block = this.getBlock(imageInfo.key);
    return this.singleRender(block, false);
  };
};

/* harmony default export */ var contentState_imageCtrl = (imageCtrl_imageCtrl);
// CONCATENATED MODULE: ./src/muya/lib/contentState/dragDropCtrl.js














function dragDropCtrl_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = dragDropCtrl_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function dragDropCtrl_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return dragDropCtrl_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return dragDropCtrl_arrayLikeToArray(o, minLen); }

function dragDropCtrl_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }





var GHOST_ID = 'mu-dragover-ghost';
var GHOST_HEIGHT = 3;

var dragDropCtrl_dragDropCtrl = function dragDropCtrl(ContentState) {
  ContentState.prototype.hideGhost = function () {
    this.dropAnchor = null;
    var ghost = document.querySelector("#".concat(GHOST_ID));
    ghost && ghost.remove();
  };
  /**
   * create the ghost element.
   */


  ContentState.prototype.createGhost = function (event) {
    var target = event.target;
    var ghost = null;
    var nearestParagraph = findNearestParagraph(target);
    var outmostParagraph = findOutMostParagraph(target);

    if (!outmostParagraph) {
      return this.hideGhost();
    }

    var block = this.getBlock(nearestParagraph.id);
    var anchor = this.getAnchor(block); // dragover preview container

    if (!anchor && outmostParagraph) {
      anchor = this.getBlock(outmostParagraph.id);
    }

    if (anchor) {
      var anchorParagraph = this.muya.container.querySelector("#".concat(anchor.key));
      var rect = anchorParagraph.getBoundingClientRect();
      var position = verticalPositionInRect(event, rect);
      this.dropAnchor = {
        position: position,
        anchor: anchor
      }; // create ghost

      ghost = document.querySelector("#".concat(GHOST_ID));

      if (!ghost) {
        ghost = document.createElement('div');
        ghost.id = GHOST_ID;
        document.body.appendChild(ghost);
      }

      Object.assign(ghost.style, {
        width: "".concat(rect.width, "px"),
        left: "".concat(rect.left, "px"),
        top: position === 'up' ? "".concat(rect.top - GHOST_HEIGHT, "px") : "".concat(rect.top + rect.height, "px")
      });
    }
  };

  ContentState.prototype.dragoverHandler = function (event) {
    // Cancel to allow tab drag&drop.
    if (!event.dataTransfer.types.length) {
      return event.dataTransfer.dropEffect = 'none';
    }

    if (event.dataTransfer.types.includes('text/uri-list')) {
      var items = Array.from(event.dataTransfer.items);
      var hasUriItem = items.some(function (i) {
        return i.type === 'text/uri-list';
      });
      var hasTextItem = items.some(function (i) {
        return i.type === 'text/plain';
      });
      var hasHtmlItem = items.some(function (i) {
        return i.type === 'text/html';
      });

      if (hasUriItem && hasHtmlItem && !hasTextItem) {
        this.createGhost(event);
        event.dataTransfer.dropEffect = 'copy';
      }
    }

    if (event.dataTransfer.types.indexOf('Files') >= 0) {
      if (event.dataTransfer.items.length === 1 && event.dataTransfer.items[0].type.indexOf('image') > -1) {
        event.preventDefault();
        this.createGhost(event);
        event.dataTransfer.dropEffect = 'copy';
      }
    } else {
      event.stopPropagation();
      event.dataTransfer.dropEffect = 'none';
    }
  };

  ContentState.prototype.dragleaveHandler = function (event) {
    return this.hideGhost();
  };

  ContentState.prototype.dropHandler = /*#__PURE__*/function () {
    var _ref = Object(asyncToGenerator["a" /* default */])( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(event) {
      var _this = this;

      var dropAnchor, _iterator, _step, item, fileList, _iterator2, _step2, file, image, name, path, id, text, imageBlock, anchor, position, key, offset, nSrc, _getImageSrc, src, imageWrapper, imageInfo;

      return regeneratorRuntime.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              event.preventDefault();
              dropAnchor = this.dropAnchor;
              this.hideGhost(); // handle drag/drop web link image.

              if (event.dataTransfer.items.length) {
                _iterator = dragDropCtrl_createForOfIteratorHelper(event.dataTransfer.items);

                try {
                  for (_iterator.s(); !(_step = _iterator.n()).done;) {
                    item = _step.value;

                    if (item.kind === 'string' && item.type === 'text/uri-list') {
                      item.getAsString( /*#__PURE__*/function () {
                        var _ref2 = Object(asyncToGenerator["a" /* default */])( /*#__PURE__*/regeneratorRuntime.mark(function _callee(str) {
                          var isImage, text, imageBlock, anchor, position, key, offset;
                          return regeneratorRuntime.wrap(function _callee$(_context) {
                            while (1) {
                              switch (_context.prev = _context.next) {
                                case 0:
                                  if (!(URL_REG.test(str) && dropAnchor)) {
                                    _context.next = 18;
                                    break;
                                  }

                                  isImage = false;

                                  if (IMAGE_EXT_REG.test(str)) {
                                    isImage = true;
                                  }

                                  if (isImage) {
                                    _context.next = 7;
                                    break;
                                  }

                                  _context.next = 6;
                                  return checkImageContentType(str);

                                case 6:
                                  isImage = _context.sent;

                                case 7:
                                  if (isImage) {
                                    _context.next = 9;
                                    break;
                                  }

                                  return _context.abrupt("return");

                                case 9:
                                  text = "![](".concat(str, ")");
                                  imageBlock = _this.createBlockP(text);
                                  anchor = dropAnchor.anchor, position = dropAnchor.position;

                                  if (position === 'up') {
                                    _this.insertBefore(imageBlock, anchor);
                                  } else {
                                    _this.insertAfter(imageBlock, anchor);
                                  }

                                  key = imageBlock.children[0].key;
                                  offset = 0;
                                  _this.cursor = {
                                    start: {
                                      key: key,
                                      offset: offset
                                    },
                                    end: {
                                      key: key,
                                      offset: offset
                                    }
                                  };

                                  _this.render();

                                  _this.muya.eventCenter.dispatch('stateChange');

                                case 18:
                                case "end":
                                  return _context.stop();
                              }
                            }
                          }, _callee);
                        }));

                        return function (_x2) {
                          return _ref2.apply(this, arguments);
                        };
                      }());
                    }
                  }
                } catch (err) {
                  _iterator.e(err);
                } finally {
                  _iterator.f();
                }
              }

              if (!event.dataTransfer.files) {
                _context2.next = 28;
                break;
              }

              fileList = [];
              _iterator2 = dragDropCtrl_createForOfIteratorHelper(event.dataTransfer.files);

              try {
                for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
                  file = _step2.value;
                  fileList.push(file);
                }
              } catch (err) {
                _iterator2.e(err);
              } finally {
                _iterator2.f();
              }

              image = fileList.find(function (file) {
                return /image/.test(file.type);
              });

              if (!(image && dropAnchor)) {
                _context2.next = 27;
                break;
              }

              name = image.name, path = image.path;
              id = "loading-".concat(getUniqueId());
              text = "![".concat(id, "](").concat(path, ")");
              imageBlock = this.createBlockP(text);
              anchor = dropAnchor.anchor, position = dropAnchor.position;

              if (position === 'up') {
                this.insertBefore(imageBlock, anchor);
              } else {
                this.insertAfter(imageBlock, anchor);
              }

              key = imageBlock.children[0].key;
              offset = 0;
              this.cursor = {
                start: {
                  key: key,
                  offset: offset
                },
                end: {
                  key: key,
                  offset: offset
                }
              };
              this.render();
              _context2.next = 22;
              return this.muya.options.imageAction(path);

            case 22:
              nSrc = _context2.sent;
              _getImageSrc = utils_getImageInfo(path), src = _getImageSrc.src;

              if (src) {
                this.stateRender.urlMap.set(nSrc, src);
              }

              imageWrapper = this.muya.container.querySelector("span[data-id=".concat(id, "]"));

              if (imageWrapper) {
                imageInfo = getImageInfo_getImageInfo(imageWrapper);
                this.replaceImage(imageInfo, {
                  alt: name,
                  src: nSrc
                });
              }

            case 27:
              this.muya.eventCenter.dispatch('stateChange');

            case 28:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, this);
    }));

    return function (_x) {
      return _ref.apply(this, arguments);
    };
  }();
};

/* harmony default export */ var contentState_dragDropCtrl = (dragDropCtrl_dragDropCtrl);
// EXTERNAL MODULE: ./node_modules/turndown/lib/turndown.es.js
var turndown_es = __webpack_require__("8baf");

// CONCATENATED MODULE: ./src/muya/lib/utils/turndownService.js




var turndownPluginGfm = __webpack_require__("496e");

var turndownService_usePluginAddRules = function usePluginAddRules(turndownService) {
  // Use the gfm plugin
  var gfm = turndownPluginGfm.gfm;
  turndownService.use(gfm); // because the strikethrough rule in gfm is single `~`, So need rewrite the strikethrough rule.

  turndownService.addRule('strikethrough', {
    filter: ['del', 's', 'strike'],
    replacement: function replacement(content) {
      return '~~' + content + '~~';
    }
  }); // handle multiple lines math

  turndownService.addRule('multiplemath', {
    filter: function filter(node, options) {
      return node.nodeName === 'PRE' && node.classList.contains('multiple-math');
    },
    replacement: function replacement(content, node, options) {
      return "$$\n".concat(content, "\n$$");
    }
  }); // handle `line break` in code block
  // add `LINE_BREAK` to the end of every code line but not the last line.

  turndownService.addRule('codeLineBreak', {
    filter: function filter(node, options) {
      return node.nodeName === 'SPAN' && node.classList.contains(CLASS_OR_ID['AG_CODE_LINE']) && node.nextElementSibling;
    },
    replacement: function replacement(content, node, options) {
      return content + LINE_BREAK;
    }
  });
  turndownService.escape = identity;
};
/* harmony default export */ var utils_turndownService = (turndown_es["a" /* default */]);
// CONCATENATED MODULE: ./src/muya/lib/utils/importMarkdown.js















function importMarkdown_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = importMarkdown_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function importMarkdown_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return importMarkdown_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return importMarkdown_arrayLikeToArray(o, minLen); }

function importMarkdown_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

/**
 * translate markdown format to content state used by Mark Text
 * there is some difference when parse loose list item and tight lsit item.
 * Both of them add a p block in li block, use the CSS style to distinguish loose and tight.
 */



 // To be disabled rules when parse markdown, Because content state don't need to parse inline rules


var importMarkdown_LINE_BREAKS_REG = /\n/; // Just because turndown change `\n`(soft line break) to space, So we add `span.ag-soft-line-break` to workaround.

var turnSoftBreakToSpan = function turnSoftBreakToSpan(html) {
  var parser = new DOMParser();
  var doc = parser.parseFromString("<x-mt id=\"turn-root\">".concat(html, "</x-mt>"), 'text/html');
  var root = doc.querySelector("#turn-root");

  var travel = function travel(childNodes) {
    var _iterator = importMarkdown_createForOfIteratorHelper(childNodes),
        _step;

    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var node = _step.value;

        if (node.nodeType === 3) {
          var startLen = 0;
          var endLen = 0;
          var text = node.nodeValue.replace(/^(\n+)/, function (_, p) {
            startLen = p.length;
            return '';
          }).replace(/(\n+)$/, function (_, p) {
            endLen = p.length;
            return '';
          });

          if (/\n/.test(text)) {
            var tokens = text.split('\n');
            var params = [];
            var i = 0;
            var len = tokens.length;

            for (; i < len; i++) {
              var _text = tokens[i];

              if (i === 0 && startLen !== 0) {
                _text = '\n'.repeat(startLen) + _text;
              } else if (i === len - 1 && endLen !== 0) {
                _text = _text + '\n'.repeat(endLen);
              }

              params.push(document.createTextNode(_text));

              if (i !== len - 1) {
                var softBreak = document.createElement('span');
                softBreak.classList.add('ag-soft-line-break');
                params.push(softBreak);
              }
            }

            node.replaceWith.apply(node, params);
          }
        } else if (node.nodeType === 1) {
          travel(node.childNodes);
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
  };

  travel(root.childNodes);
  return root.innerHTML.trim();
};

var importMarkdown_importRegister = function importRegister(ContentState) {
  // turn markdown to blocks
  ContentState.prototype.markdownToState = function (markdown) {
    var _this = this;

    // mock a root block...
    var rootState = {
      key: null,
      type: 'root',
      text: '',
      parent: null,
      preSibling: null,
      nextSibling: null,
      children: []
    };
    var tokens = new lexer({
      disableInline: true
    }).lex(markdown);
    var token;
    var block;
    var value;
    var parentList = [rootState];
    var languageLoaded = new Set();

    while (token = tokens.shift()) {
      switch (token.type) {
        case 'frontmatter':
          {
            var _ret = function () {
              var lang = 'yaml';
              value = token.text;
              block = _this.createBlock('pre', {
                functionType: token.type,
                lang: lang
              });

              var codeBlock = _this.createBlock('code', {
                lang: lang
              });

              value.replace(/^\s+/, '').replace(/\s$/, '').split(importMarkdown_LINE_BREAKS_REG).forEach(function (line) {
                var codeLine = _this.createBlock('span', {
                  text: line,
                  lang: lang,
                  functionType: 'codeLine'
                });

                _this.appendChild(codeBlock, codeLine);
              });

              _this.appendChild(block, codeBlock);

              _this.appendChild(parentList[0], block);

              return "break";
            }();

            if (_ret === "break") break;
          }

        case 'hr':
          {
            value = token.marker;
            block = this.createBlock('hr');
            var thematicBreakContent = this.createBlock('span', {
              text: value,
              functionType: 'thematicBreakLine'
            });
            this.appendChild(block, thematicBreakContent);
            this.appendChild(parentList[0], block);
            break;
          }

        case 'heading':
          {
            var _token = token,
                headingStyle = _token.headingStyle,
                depth = _token.depth,
                text = _token.text,
                marker = _token.marker;
            value = headingStyle === 'atx' ? '#'.repeat(+depth) + " ".concat(text) : text;
            block = this.createBlock("h".concat(depth), {
              headingStyle: headingStyle
            });
            var headingContent = this.createBlock('span', {
              text: value,
              functionType: headingStyle === 'atx' ? 'atxLine' : 'paragraphContent'
            });
            this.appendChild(block, headingContent);

            if (marker) {
              block.marker = marker;
            }

            this.appendChild(parentList[0], block);
            break;
          }

        case 'multiplemath':
          {
            value = token.text;
            block = this.createContainerBlock(token.type, value);
            this.appendChild(parentList[0], block);
            break;
          }

        case 'code':
          {
            var _ret2 = function () {
              var _token2 = token,
                  codeBlockStyle = _token2.codeBlockStyle,
                  text = _token2.text,
                  _token2$lang = _token2.lang,
                  infostring = _token2$lang === void 0 ? '' : _token2$lang; // GH#697, markedjs#1387

              var lang = (infostring || '').match(/\S*/)[0];
              value = text;

              if (value.endsWith('\n')) {
                value = value.replace(/\n+$/, '');
              }

              if (/mermaid|flowchart|vega-lite|sequence/.test(lang)) {
                block = _this.createContainerBlock(lang, value);

                _this.appendChild(parentList[0], block);
              } else {
                block = _this.createBlock('pre', {
                  functionType: codeBlockStyle === 'fenced' ? 'fencecode' : 'indentcode',
                  lang: lang
                });

                var codeBlock = _this.createBlock('code', {
                  lang: lang
                });

                value.split(importMarkdown_LINE_BREAKS_REG).forEach(function (line) {
                  var codeLine = _this.createBlock('span', {
                    text: line
                  });

                  codeLine.lang = lang;
                  codeLine.functionType = 'codeLine';

                  _this.appendChild(codeBlock, codeLine);
                });

                var inputBlock = _this.createBlock('span', {
                  text: lang,
                  functionType: 'languageInput'
                });

                if (lang && !languageLoaded.has(lang)) {
                  languageLoaded.add(lang);
                  prism_loadLanguage(lang).then(function (infoList) {
                    if (!Array.isArray(infoList)) return; // There are three status `loaded`, `noexist` and `cached`.
                    // if the status is `loaded`, indicated that it's a new loaded language

                    var needRender = infoList.some(function (_ref) {
                      var status = _ref.status;
                      return status === 'loaded';
                    });

                    if (needRender) {
                      _this.render();
                    }
                  }).catch(function (err) {
                    // if no parameter provided, will cause error.
                    console.warn(err);
                  });
                }

                _this.appendChild(block, inputBlock);

                _this.appendChild(block, codeBlock);

                _this.appendChild(parentList[0], block);
              }

              return "break";
            }();

            if (_ret2 === "break") break;
          }

        case 'table':
          {
            var _token3 = token,
                header = _token3.header,
                align = _token3.align,
                cells = _token3.cells;
            var table = this.createBlock('table');
            var thead = this.createBlock('thead');
            var tbody = this.createBlock('tbody');
            var theadRow = this.createBlock('tr');

            var restoreTableEscapeCharacters = function restoreTableEscapeCharacters(text) {
              // NOTE: markedjs replaces all escaped "|" ("\|") characters inside a cell with "|".
              //       We have to re-escape the chraracter to not break the table.
              return text.replace(/\|/g, '\\|');
            };

            var _iterator2 = importMarkdown_createForOfIteratorHelper(header),
                _step2;

            try {
              for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
                var headText = _step2.value;
                var i = header.indexOf(headText);
                var th = this.createBlock('th', {
                  text: restoreTableEscapeCharacters(headText)
                });
                Object.assign(th, {
                  align: align[i] || '',
                  column: i
                });
                this.appendChild(theadRow, th);
              }
            } catch (err) {
              _iterator2.e(err);
            } finally {
              _iterator2.f();
            }

            var _iterator3 = importMarkdown_createForOfIteratorHelper(cells),
                _step3;

            try {
              for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
                var row = _step3.value;
                var rowBlock = this.createBlock('tr');

                var _iterator4 = importMarkdown_createForOfIteratorHelper(row),
                    _step4;

                try {
                  for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
                    var cell = _step4.value;

                    var _i = row.indexOf(cell);

                    var td = this.createBlock('td', {
                      text: restoreTableEscapeCharacters(cell)
                    });
                    Object.assign(td, {
                      align: align[_i] || '',
                      column: _i
                    });
                    this.appendChild(rowBlock, td);
                  }
                } catch (err) {
                  _iterator4.e(err);
                } finally {
                  _iterator4.f();
                }

                this.appendChild(tbody, rowBlock);
              }
            } catch (err) {
              _iterator3.e(err);
            } finally {
              _iterator3.f();
            }

            Object.assign(table, {
              row: cells.length,
              column: header.length - 1
            }); // set row and column

            block = this.createBlock('figure');
            block.functionType = 'table';
            this.appendChild(thead, theadRow);
            this.appendChild(block, table);
            this.appendChild(table, thead);
            this.appendChild(table, tbody);
            this.appendChild(parentList[0], block);
            break;
          }

        case 'html':
          {
            var _token4 = token,
                _text2 = _token4.text;
            block = this.createHtmlBlock(_text2.trim());
            this.appendChild(parentList[0], block);
            break;
          }

        case 'text':
          {
            value = token.text;

            while (tokens[0].type === 'text') {
              token = tokens.shift();
              value += "\n".concat(token.text);
            }

            block = this.createBlock('p');
            var contentBlock = this.createBlock('span', {
              text: value
            });
            this.appendChild(block, contentBlock);
            this.appendChild(parentList[0], block);
            break;
          }

        case 'paragraph':
          {
            value = token.text;
            block = this.createBlock('p');

            var _contentBlock = this.createBlock('span', {
              text: value
            });

            this.appendChild(block, _contentBlock);
            this.appendChild(parentList[0], block);
            break;
          }

        case 'blockquote_start':
          {
            block = this.createBlock('blockquote');
            this.appendChild(parentList[0], block);
            parentList.unshift(block);
            break;
          }

        case 'blockquote_end':
          {
            parentList.shift();
            break;
          }

        case 'list_start':
          {
            var _token5 = token,
                ordered = _token5.ordered,
                listType = _token5.listType,
                start = _token5.start;
            block = this.createBlock(ordered === true ? 'ol' : 'ul');
            block.listType = listType;

            if (listType === 'order') {
              block.start = /^\d+$/.test(start) ? start : 1;
            }

            this.appendChild(parentList[0], block);
            parentList.unshift(block);
            break;
          }

        case 'list_end':
          {
            parentList.shift();
            break;
          }

        case 'loose_item_start':
        case 'list_item_start':
          {
            var _token6 = token,
                listItemType = _token6.listItemType,
                bulletMarkerOrDelimiter = _token6.bulletMarkerOrDelimiter,
                checked = _token6.checked,
                type = _token6.type;
            block = this.createBlock('li', {
              listItemType: checked !== undefined ? 'task' : listItemType,
              bulletMarkerOrDelimiter: bulletMarkerOrDelimiter,
              isLooseListItem: type === 'loose_item_start'
            });

            if (checked !== undefined) {
              var input = this.createBlock('input', {
                checked: checked
              });
              this.appendChild(block, input);
            }

            this.appendChild(parentList[0], block);
            parentList.unshift(block);
            break;
          }

        case 'list_item_end':
          {
            parentList.shift();
            break;
          }

        case 'space':
          {
            break;
          }

        default:
          console.warn("Unknown type ".concat(token.type));
          break;
      }
    }

    languageLoaded.clear();
    return rootState.children.length ? rootState.children : [this.createBlockP()];
  };

  ContentState.prototype.htmlToMarkdown = function (html) {
    // turn html to markdown
    var turndownConfig = this.turndownConfig;
    var turndownService = new utils_turndownService(turndownConfig);
    turndownService_usePluginAddRules(turndownService); // fix #752, but I don't know why the &nbsp; vanlished.

    html = html.replace(/<span>&nbsp;<\/span>/g, ' ');
    html = turnSoftBreakToSpan(html);
    var markdown = turndownService.turndown(html);
    return markdown;
  }; // turn html to blocks


  ContentState.prototype.html2State = function (html) {
    var markdown = this.htmlToMarkdown(html);
    return this.markdownToState(markdown);
  };

  ContentState.prototype.getCodeMirrorCursor = function () {
    var blocks = this.getBlocks();
    var _this$cursor = this.cursor,
        anchor = _this$cursor.anchor,
        focus = _this$cursor.focus;
    var anchorBlock = this.getBlock(anchor.key);
    var focusBlock = this.getBlock(focus.key);
    var anchorText = anchorBlock.text;
    var focusText = focusBlock.text;

    if (anchor.key === focus.key) {
      var minOffset = Math.min(anchor.offset, focus.offset);
      var maxOffset = Math.max(anchor.offset, focus.offset);
      var firstTextPart = anchorText.substring(0, minOffset);
      var secondTextPart = anchorText.substring(minOffset, maxOffset);
      var thirdTextPart = anchorText.substring(maxOffset);
      anchorBlock.text = firstTextPart + (anchor.offset <= focus.offset ? CURSOR_ANCHOR_DNA : CURSOR_FOCUS_DNA) + secondTextPart + (anchor.offset <= focus.offset ? CURSOR_FOCUS_DNA : CURSOR_ANCHOR_DNA) + thirdTextPart;
    } else {
      anchorBlock.text = anchorText.substring(0, anchor.offset) + CURSOR_ANCHOR_DNA + anchorText.substring(anchor.offset);
      focusBlock.text = focusText.substring(0, focus.offset) + CURSOR_FOCUS_DNA + focusText.substring(focus.offset);
    }

    var listIndentation = this.listIndentation;
    var markdown = new exportMarkdown(blocks, listIndentation).generate();
    var cursor = markdown.split('\n').reduce(function (acc, line, index) {
      var ach = line.indexOf(CURSOR_ANCHOR_DNA);
      var fch = line.indexOf(CURSOR_FOCUS_DNA);

      if (ach > -1 && fch > -1) {
        if (ach <= fch) {
          Object.assign(acc.anchor, {
            line: index,
            ch: ach
          });
          Object.assign(acc.focus, {
            line: index,
            ch: fch - CURSOR_ANCHOR_DNA.length
          });
        } else {
          Object.assign(acc.focus, {
            line: index,
            ch: fch
          });
          Object.assign(acc.anchor, {
            line: index,
            ch: ach - CURSOR_FOCUS_DNA.length
          });
        }
      } else if (ach > -1) {
        Object.assign(acc.anchor, {
          line: index,
          ch: ach
        });
      } else if (fch > -1) {
        Object.assign(acc.focus, {
          line: index,
          ch: fch
        });
      }

      return acc;
    }, {
      anchor: {
        line: 0,
        ch: 0
      },
      focus: {
        line: 0,
        ch: 0
      }
    }); // remove CURSOR_FOCUS_DNA and CURSOR_ANCHOR_DNA

    anchorBlock.text = anchorText;
    focusBlock.text = focusText;
    return cursor;
  };

  ContentState.prototype.addCursorToMarkdown = function (markdown, cursor) {
    var anchor = cursor.anchor,
        focus = cursor.focus;
    var lines = markdown.split('\n');
    var anchorText = lines[anchor.line];
    var focusText = lines[focus.line];

    if (anchor.line === focus.line) {
      var minOffset = Math.min(anchor.ch, focus.ch);
      var maxOffset = Math.max(anchor.ch, focus.ch);
      var firstTextPart = anchorText.substring(0, minOffset);
      var secondTextPart = anchorText.substring(minOffset, maxOffset);
      var thirdTextPart = anchorText.substring(maxOffset);
      lines[anchor.line] = firstTextPart + (anchor.ch <= focus.ch ? CURSOR_ANCHOR_DNA : CURSOR_FOCUS_DNA) + secondTextPart + (anchor.ch <= focus.ch ? CURSOR_FOCUS_DNA : CURSOR_ANCHOR_DNA) + thirdTextPart;
    } else {
      lines[anchor.line] = anchorText.substring(0, anchor.ch) + CURSOR_ANCHOR_DNA + anchorText.substring(anchor.ch);
      lines[focus.line] = focusText.substring(0, focus.ch) + CURSOR_FOCUS_DNA + focusText.substring(focus.ch);
    }

    return lines.join('\n');
  };

  ContentState.prototype.importCursor = function (hasCursor) {
    // set cursor
    var cursor = {
      anchor: null,
      focus: null
    };
    var count = 0;

    var travel = function travel(blocks) {
      var _iterator5 = importMarkdown_createForOfIteratorHelper(blocks),
          _step5;

      try {
        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
          var block = _step5.value;
          var key = block.key,
              text = block.text,
              children = block.children,
              editable = block.editable;

          if (text) {
            var offset = text.indexOf(CURSOR_ANCHOR_DNA);

            if (offset > -1) {
              block.text = text.substring(0, offset) + text.substring(offset + CURSOR_ANCHOR_DNA.length);
              text = block.text;
              count++;

              if (editable) {
                cursor.anchor = {
                  key: key,
                  offset: offset
                };
              }
            }

            var focusOffset = text.indexOf(CURSOR_FOCUS_DNA);

            if (focusOffset > -1) {
              block.text = text.substring(0, focusOffset) + text.substring(focusOffset + CURSOR_FOCUS_DNA.length);
              count++;

              if (editable) {
                cursor.focus = {
                  key: key,
                  offset: focusOffset
                };
              }
            }

            if (count === 2) {
              break;
            }
          } else if (children.length) {
            travel(children);
          }
        }
      } catch (err) {
        _iterator5.e(err);
      } finally {
        _iterator5.f();
      }
    };

    if (hasCursor) {
      travel(this.blocks);
    } else {
      var lastBlock = this.getLastBlock();
      var key = lastBlock.key;
      var offset = lastBlock.text.length;
      cursor.anchor = {
        key: key,
        offset: offset
      };
      cursor.focus = {
        key: key,
        offset: offset
      };
    }

    if (cursor.anchor && cursor.focus) {
      this.cursor = cursor;
    }
  };

  ContentState.prototype.importMarkdown = function (markdown) {
    this.blocks = this.markdownToState(markdown);
  };
};

/* harmony default export */ var importMarkdown = (importMarkdown_importRegister);
// CONCATENATED MODULE: ./src/muya/lib/contentState/index.js













function contentState_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = contentState_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function contentState_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return contentState_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return contentState_arrayLikeToArray(o, minLen); }

function contentState_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }






























var prototypes = [contentState_tabCtrl, contentState_enterCtrl, contentState_selectionCtrl, contentState_updateCtrl, contentState_backspaceCtrl, contentState_deleteCtrl, contentState_codeBlockCtrl, contentState_arrowCtrl, contentState_pasteCtrl, contentState_copyCutCtrl, contentState_tableBlockCtrl, contentState_paragraphCtrl, contentState_formatCtrl, contentState_searchCtrl, contentState_containerCtrl, contentState_htmlBlock, contentState_clickCtrl, contentState_inputCtrl, contentState_tocCtrl, contentState_emojiCtrl, contentState_imageCtrl, contentState_dragDropCtrl, importMarkdown];

var contentState_ContentState = /*#__PURE__*/function () {
  function ContentState(muya, options) {
    Object(classCallCheck["a" /* default */])(this, ContentState);

    var bulletListMarker = options.bulletListMarker;
    this.muya = muya;
    Object.assign(this, options); // Use to cache the keys which you don't want to remove.

    this.exemption = new Set();
    this.blocks = [this.createBlockP()];
    this.stateRender = new parser_render(muya);
    this.renderRange = [null, null];
    this.currentCursor = null; // you'll select the outmost block of current cursor when you click the front icon.

    this.selectedBlock = null;
    this._selectedImage = null;
    this.dropAnchor = null;
    this.prevCursor = null;
    this.historyTimer = null;
    this.history = new contentState_history(this);
    this.turndownConfig = Object.assign(DEFAULT_TURNDOWN_CONFIG, {
      bulletListMarker: bulletListMarker
    });
    this.fontSize = 16;
    this.lineHeight = 1.6;
    this.init();
  }

  Object(createClass["a" /* default */])(ContentState, [{
    key: "selectedImage",
    get: function get() {
      return this._selectedImage;
    },
    set: function set(image) {
      var oldSelectedImage = this._selectedImage; // if there is no selected image, remove selected status of current selected image.

      if (!image && oldSelectedImage) {
        var selectedImages = this.muya.container.querySelectorAll('.ag-inline-image-selected');

        var _iterator = contentState_createForOfIteratorHelper(selectedImages),
            _step;

        try {
          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            var img = _step.value;
            img.classList.remove('ag-inline-image-selected');
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
      }

      this._selectedImage = image;
    }
  }, {
    key: "cursor",
    get: function get() {
      return this.currentCursor;
    },
    set: function set(cursor) {
      var _this = this;

      if (!(cursor instanceof selection_cursor)) {
        cursor = new selection_cursor(cursor);
      }

      var handler = function handler() {
        var blocks = _this.blocks,
            renderRange = _this.renderRange,
            currentCursor = _this.currentCursor;

        _this.history.push({
          blocks: blocks,
          renderRange: renderRange,
          cursor: currentCursor
        });
      };

      this.prevCursor = this.currentCursor;
      this.currentCursor = cursor;

      if (!cursor.noHistory) {
        if (this.prevCursor && (this.prevCursor.start.key !== cursor.start.key || this.prevCursor.end.key !== cursor.end.key)) {
          handler();
        } else {
          if (this.historyTimer) clearTimeout(this.historyTimer);
          this.historyTimer = setTimeout(handler, 2000);
        }
      }
    }
  }, {
    key: "init",
    value: function init() {
      var lastBlock = this.getLastBlock();
      var key = lastBlock.key,
          text = lastBlock.text;
      var offset = text.length;
      this.searchMatches = {
        value: '',
        // the search value
        matches: [],
        // matches
        index: -1 // active match

      };
      this.cursor = {
        start: {
          key: key,
          offset: offset
        },
        end: {
          key: key,
          offset: offset
        }
      };
    }
  }, {
    key: "getHistory",
    value: function getHistory() {
      var _this$history = this.history,
          stack = _this$history.stack,
          index = _this$history.index;
      return {
        stack: stack,
        index: index
      };
    }
  }, {
    key: "setHistory",
    value: function setHistory(_ref) {
      var stack = _ref.stack,
          index = _ref.index;
      Object.assign(this.history, {
        stack: stack,
        index: index
      });
    }
  }, {
    key: "setCursor",
    value: function setCursor() {
      lib_selection.setCursorRange(this.cursor);
    }
  }, {
    key: "setNextRenderRange",
    value: function setNextRenderRange() {
      var _this$cursor = this.cursor,
          start = _this$cursor.start,
          end = _this$cursor.end;
      var startBlock = this.getBlock(start.key);
      var endBlock = this.getBlock(end.key);
      var startOutMostBlock = this.findOutMostBlock(startBlock);
      var endOutMostBlock = this.findOutMostBlock(endBlock);
      this.renderRange = [startOutMostBlock.preSibling, endOutMostBlock.nextSibling];
    }
  }, {
    key: "postRender",
    value: function postRender() {// do nothing.
    }
  }, {
    key: "render",
    value: function render() {
      var isRenderCursor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
      var blocks = this.blocks,
          _this$searchMatches = this.searchMatches,
          matches = _this$searchMatches.matches,
          index = _this$searchMatches.index;
      var activeBlocks = this.getActiveBlocks();
      matches.forEach(function (m, i) {
        m.active = i === index;
      });
      this.setNextRenderRange();
      this.stateRender.collectLabels(blocks);
      this.stateRender.render(blocks, activeBlocks, matches);

      if (isRenderCursor) {
        this.setCursor();
      } else {
        this.muya.blur();
      }

      this.postRender();
    }
  }, {
    key: "partialRender",
    value: function partialRender() {
      var isRenderCursor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
      var blocks = this.blocks,
          _this$searchMatches2 = this.searchMatches,
          matches = _this$searchMatches2.matches,
          index = _this$searchMatches2.index;
      var activeBlocks = this.getActiveBlocks();

      var _this$renderRange = Object(slicedToArray["a" /* default */])(this.renderRange, 2),
          startKey = _this$renderRange[0],
          endKey = _this$renderRange[1];

      matches.forEach(function (m, i) {
        m.active = i === index;
      });
      var startIndex = startKey ? blocks.findIndex(function (block) {
        return block.key === startKey;
      }) : 0;
      var endIndex = endKey ? blocks.findIndex(function (block) {
        return block.key === endKey;
      }) + 1 : blocks.length;
      var needRenderBlocks = blocks.slice(startIndex, endIndex);
      this.setNextRenderRange();
      this.stateRender.collectLabels(blocks);
      this.stateRender.partialRender(needRenderBlocks, activeBlocks, matches, startKey, endKey);

      if (isRenderCursor) {
        this.setCursor();
      } else {
        this.muya.blur();
      }

      this.postRender();
    }
  }, {
    key: "singleRender",
    value: function singleRender(block) {
      var isRenderCursor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      var blocks = this.blocks,
          _this$searchMatches3 = this.searchMatches,
          matches = _this$searchMatches3.matches,
          index = _this$searchMatches3.index;
      var activeBlocks = this.getActiveBlocks();
      matches.forEach(function (m, i) {
        m.active = i === index;
      });
      this.setNextRenderRange();
      this.stateRender.collectLabels(blocks);
      this.stateRender.singleRender(block, activeBlocks, matches);

      if (isRenderCursor) {
        this.setCursor();
      } else {
        this.muya.blur();
      }

      this.postRender();
    }
    /**
     * A block in Mark Text present a paragraph(block syntax in GFM) or a line in paragraph.
     * a `span` block must in a `p block` or `pre block` and `p block`'s children must be `span` blocks.
     */

  }, {
    key: "createBlock",
    value: function createBlock() {
      var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'span';
      var extras = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var key = getUniqueId();
      var blockData = {
        key: key,
        text: '',
        type: type,
        editable: true,
        parent: null,
        preSibling: null,
        nextSibling: null,
        children: []
      }; // give span block a default functionType `paragraphContent`

      if (type === 'span' && !extras.functionType) {
        blockData.functionType = 'paragraphContent';
      }

      Object.assign(blockData, extras);
      return blockData;
    }
  }, {
    key: "createBlockP",
    value: function createBlockP() {
      var text = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
      var pBlock = this.createBlock('p');
      var contentBlock = this.createBlock('span', {
        text: text
      });
      this.appendChild(pBlock, contentBlock);
      return pBlock;
    }
  }, {
    key: "isCollapse",
    value: function isCollapse() {
      var cursor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.cursor;
      var start = cursor.start,
          end = cursor.end;
      return start.key === end.key && start.offset === end.offset;
    } // getBlocks

  }, {
    key: "getBlocks",
    value: function getBlocks() {
      return this.blocks;
    }
  }, {
    key: "getCursor",
    value: function getCursor() {
      return this.cursor;
    }
  }, {
    key: "getBlock",
    value: function getBlock(key) {
      if (!key) return null;
      var result = null;

      var travel = function travel(blocks) {
        var _iterator2 = contentState_createForOfIteratorHelper(blocks),
            _step2;

        try {
          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
            var block = _step2.value;

            if (block.key === key) {
              result = block;
              return;
            }

            var children = block.children;

            if (children.length) {
              travel(children);
            }
          }
        } catch (err) {
          _iterator2.e(err);
        } finally {
          _iterator2.f();
        }
      };

      travel(this.blocks);
      return result;
    }
  }, {
    key: "copyBlock",
    value: function copyBlock(origin) {
      var copiedBlock = utils_deepCopy(origin);

      var travel = function travel(block, parent, preBlock, nextBlock) {
        var key = getUniqueId();
        block.key = key;
        block.parent = parent ? parent.key : null;
        block.preSibling = preBlock ? preBlock.key : null;
        block.nextSibling = nextBlock ? nextBlock.key : null;
        var children = block.children;
        var len = children.length;

        if (children && len) {
          var i;

          for (i = 0; i < len; i++) {
            var b = children[i];
            var preB = i >= 1 ? children[i - 1] : null;
            var nextB = i < len - 1 ? children[i + 1] : null;
            travel(b, block, preB, nextB);
          }
        }
      };

      travel(copiedBlock, null, null, null);
      return copiedBlock;
    }
  }, {
    key: "getParent",
    value: function getParent(block) {
      if (block && block.parent) {
        return this.getBlock(block.parent);
      }

      return null;
    } // return block and its parents

  }, {
    key: "getParents",
    value: function getParents(block) {
      var result = [];
      result.push(block);
      var parent = this.getParent(block);

      while (parent) {
        result.push(parent);
        parent = this.getParent(parent);
      }

      return result;
    }
  }, {
    key: "getPreSibling",
    value: function getPreSibling(block) {
      return block.preSibling ? this.getBlock(block.preSibling) : null;
    }
  }, {
    key: "getNextSibling",
    value: function getNextSibling(block) {
      return block.nextSibling ? this.getBlock(block.nextSibling) : null;
    }
    /**
     * if target is descendant of parent return true, else return false
     * @param  {[type]}  parent [description]
     * @param  {[type]}  target [description]
     * @return {Boolean}        [description]
     */

  }, {
    key: "isInclude",
    value: function isInclude(parent, target) {
      var _this2 = this;

      var children = parent.children;

      if (children.length === 0) {
        return false;
      } else {
        if (children.some(function (child) {
          return child.key === target.key;
        })) {
          return true;
        } else {
          return children.some(function (child) {
            return _this2.isInclude(child, target);
          });
        }
      }
    }
  }, {
    key: "removeTextOrBlock",
    value: function removeTextOrBlock(block) {
      var _this3 = this;

      if (block.functionType === 'languageInput') return;

      var checkerIn = function checkerIn(block) {
        if (_this3.exemption.has(block.key)) {
          return true;
        } else {
          var parent = _this3.getBlock(block.parent);

          return parent ? checkerIn(parent) : false;
        }
      };

      var checkerOut = function checkerOut(block) {
        var children = block.children;

        if (children.length) {
          if (children.some(function (child) {
            return _this3.exemption.has(child.key);
          })) {
            return true;
          } else {
            return children.some(function (child) {
              return checkerOut(child);
            });
          }
        } else {
          return false;
        }
      };

      if (checkerIn(block) || checkerOut(block)) {
        block.text = '';
        var children = block.children;

        if (children.length) {
          children.forEach(function (child) {
            return _this3.removeTextOrBlock(child);
          });
        }
      } else if (block.editable) {
        this.removeBlock(block);
      }
    } // help func in removeBlocks

  }, {
    key: "findFigure",
    value: function findFigure(block) {
      if (block.type === 'figure') {
        return block.key;
      } else {
        var parent = this.getBlock(block.parent);
        return this.findFigure(parent);
      }
    }
    /**
     * remove blocks between before and after, and includes after block.
     */

  }, {
    key: "removeBlocks",
    value: function removeBlocks(before, after) {
      var isRemoveAfter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
      var isRecursion = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;

      if (!isRecursion) {
        if (/td|th/.test(before.type)) {
          this.exemption.add(this.findFigure(before));
        }

        if (/td|th/.test(after.type)) {
          this.exemption.add(this.findFigure(after));
        }
      }

      var nextSibling = this.getBlock(before.nextSibling);
      var beforeEnd = false;

      while (nextSibling) {
        if (nextSibling.key === after.key || this.isInclude(nextSibling, after)) {
          beforeEnd = true;
          break;
        }

        this.removeTextOrBlock(nextSibling);
        nextSibling = this.getBlock(nextSibling.nextSibling);
      }

      if (!beforeEnd) {
        var parent = this.getParent(before);

        if (parent) {
          this.removeBlocks(parent, after, false, true);
        }
      }

      var preSibling = this.getBlock(after.preSibling);
      var afterEnd = false;

      while (preSibling) {
        if (preSibling.key === before.key || this.isInclude(preSibling, before)) {
          afterEnd = true;
          break;
        }

        this.removeTextOrBlock(preSibling);
        preSibling = this.getBlock(preSibling.preSibling);
      }

      if (!afterEnd) {
        var _parent = this.getParent(after);

        if (_parent) {
          var removeAfter = isRemoveAfter && this.isOnlyRemoveableChild(after);
          this.removeBlocks(before, _parent, removeAfter, true);
        }
      }

      if (isRemoveAfter) {
        this.removeTextOrBlock(after);
      }

      if (!isRecursion) {
        this.exemption.clear();
      }
    }
  }, {
    key: "removeBlock",
    value: function removeBlock(block) {
      var _this4 = this;

      var fromBlocks = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.blocks;

      var remove = function remove(blocks, block) {
        var len = blocks.length;
        var i;

        for (i = 0; i < len; i++) {
          if (blocks[i].key === block.key) {
            var preSibling = _this4.getBlock(block.preSibling);

            var nextSibling = _this4.getBlock(block.nextSibling);

            if (preSibling) {
              preSibling.nextSibling = nextSibling ? nextSibling.key : null;
            }

            if (nextSibling) {
              nextSibling.preSibling = preSibling ? preSibling.key : null;
            }

            return blocks.splice(i, 1);
          } else {
            if (blocks[i].children.length) {
              remove(blocks[i].children, block);
            }
          }
        }
      };

      remove(Array.isArray(fromBlocks) ? fromBlocks : fromBlocks.children, block);
    }
  }, {
    key: "getActiveBlocks",
    value: function getActiveBlocks() {
      var result = [];
      var block = this.getBlock(this.cursor.start.key);
      if (block) result.push(block);

      while (block && block.parent) {
        block = this.getBlock(block.parent);
        result.push(block);
      }

      return result;
    }
  }, {
    key: "insertAfter",
    value: function insertAfter(newBlock, oldBlock) {
      var siblings = oldBlock.parent ? this.getBlock(oldBlock.parent).children : this.blocks;
      var oldNextSibling = this.getBlock(oldBlock.nextSibling);
      var index = this.findIndex(siblings, oldBlock);
      siblings.splice(index + 1, 0, newBlock);
      oldBlock.nextSibling = newBlock.key;
      newBlock.parent = oldBlock.parent;
      newBlock.preSibling = oldBlock.key;

      if (oldNextSibling) {
        newBlock.nextSibling = oldNextSibling.key;
        oldNextSibling.preSibling = newBlock.key;
      }
    }
  }, {
    key: "insertBefore",
    value: function insertBefore(newBlock, oldBlock) {
      var siblings = oldBlock.parent ? this.getBlock(oldBlock.parent).children : this.blocks;
      var oldPreSibling = this.getBlock(oldBlock.preSibling);
      var index = this.findIndex(siblings, oldBlock);
      siblings.splice(index, 0, newBlock);
      oldBlock.preSibling = newBlock.key;
      newBlock.parent = oldBlock.parent;
      newBlock.nextSibling = oldBlock.key;
      newBlock.preSibling = null;

      if (oldPreSibling) {
        oldPreSibling.nextSibling = newBlock.key;
        newBlock.preSibling = oldPreSibling.key;
      }
    }
  }, {
    key: "findOutMostBlock",
    value: function findOutMostBlock(block) {
      var parent = this.getBlock(block.parent);
      return parent ? this.findOutMostBlock(parent) : block;
    }
  }, {
    key: "findIndex",
    value: function findIndex(children, block) {
      return children.findIndex(function (child) {
        return child === block;
      });
    }
  }, {
    key: "prependChild",
    value: function prependChild(parent, block) {
      block.parent = parent.key;
      block.preSibling = null;

      if (parent.children.length) {
        block.nextSibling = parent.children[0].key;
      }

      parent.children.unshift(block);
    }
  }, {
    key: "appendChild",
    value: function appendChild(parent, block) {
      var len = parent.children.length;
      var lastChild = parent.children[len - 1];
      parent.children.push(block);
      block.parent = parent.key;

      if (lastChild) {
        lastChild.nextSibling = block.key;
        block.preSibling = lastChild.key;
      } else {
        block.preSibling = null;
      }

      block.nextSibling = null;
    }
  }, {
    key: "replaceBlock",
    value: function replaceBlock(newBlock, oldBlock) {
      var blockList = oldBlock.parent ? this.getParent(oldBlock).children : this.blocks;
      var index = this.findIndex(blockList, oldBlock);
      blockList.splice(index, 1, newBlock);
      newBlock.parent = oldBlock.parent;
      newBlock.preSibling = oldBlock.preSibling;
      newBlock.nextSibling = oldBlock.nextSibling;
    }
  }, {
    key: "canInserFrontMatter",
    value: function canInserFrontMatter(block) {
      if (!block) return true;
      var parent = this.getParent(block);
      return block.type === 'span' && !block.preSibling && !parent.preSibling && !parent.parent;
    }
  }, {
    key: "isFirstChild",
    value: function isFirstChild(block) {
      return !block.preSibling;
    }
  }, {
    key: "isLastChild",
    value: function isLastChild(block) {
      return !block.nextSibling;
    }
  }, {
    key: "isOnlyChild",
    value: function isOnlyChild(block) {
      return !block.nextSibling && !block.preSibling;
    }
  }, {
    key: "isOnlyRemoveableChild",
    value: function isOnlyRemoveableChild(block) {
      if (block.editable === false) return false;
      var parent = this.getParent(block);
      return (parent ? parent.children : this.blocks).filter(function (child) {
        return child.editable && child.functionType !== 'languageInput';
      }).length === 1;
    }
  }, {
    key: "getLastChild",
    value: function getLastChild(block) {
      if (block) {
        var len = block.children.length;

        if (len) {
          return block.children[len - 1];
        }
      }

      return null;
    }
  }, {
    key: "firstInDescendant",
    value: function firstInDescendant(block) {
      var children = block.children;

      if (block.children.length === 0 && HAS_TEXT_BLOCK_REG.test(block.type)) {
        return block;
      } else if (children.length) {
        if (children[0].type === 'input' || children[0].type === 'div' && children[0].editable === false) {
          // handle task item
          return this.firstInDescendant(children[1]);
        } else {
          return this.firstInDescendant(children[0]);
        }
      }
    }
  }, {
    key: "lastInDescendant",
    value: function lastInDescendant(block) {
      if (block.children.length === 0 && HAS_TEXT_BLOCK_REG.test(block.type)) {
        return block;
      } else if (block.children.length) {
        var children = block.children;
        var lastChild = children[children.length - 1];

        while (lastChild.editable === false) {
          lastChild = this.getPreSibling(lastChild);
        }

        return this.lastInDescendant(lastChild);
      }
    }
  }, {
    key: "findPreBlockInLocation",
    value: function findPreBlockInLocation(block) {
      var parent = this.getParent(block);
      var preBlock = this.getPreSibling(block);

      if (block.preSibling && preBlock.type !== 'input' && preBlock.type !== 'div' && preBlock.editable !== false) {
        // handle task item and table
        return this.lastInDescendant(preBlock);
      } else if (parent) {
        return this.findPreBlockInLocation(parent);
      } else {
        return null;
      }
    }
  }, {
    key: "findNextBlockInLocation",
    value: function findNextBlockInLocation(block) {
      var parent = this.getParent(block);
      var nextBlock = this.getNextSibling(block);

      if (nextBlock && nextBlock.editable !== false) {
        return this.firstInDescendant(nextBlock);
      } else if (parent) {
        return this.findNextBlockInLocation(parent);
      } else {
        return null;
      }
    }
  }, {
    key: "getPositionReference",
    value: function getPositionReference() {
      var fontSize = this.fontSize,
          lineHeight = this.lineHeight;
      var start = this.cursor.start;
      var block = this.getBlock(start.key);

      var _selection$getCursorC = lib_selection.getCursorCoords(),
          x = _selection$getCursorC.x,
          y = _selection$getCursorC.y;

      var height = fontSize * lineHeight;
      var width = 0;
      var bottom = y + height;
      var right = x + width;
      var left = x;
      var top = y;
      return {
        getBoundingClientRect: function getBoundingClientRect() {
          return {
            x: x,
            y: y,
            top: top,
            left: left,
            right: right,
            bottom: bottom,
            height: height,
            width: width
          };
        },
        clientWidth: width,
        clientHeight: height,
        id: block ? block.key : null
      };
    }
  }, {
    key: "getFirstBlock",
    value: function getFirstBlock() {
      return this.firstInDescendant(this.blocks[0]);
    }
  }, {
    key: "getLastBlock",
    value: function getLastBlock() {
      var blocks = this.blocks;
      var len = blocks.length;
      return this.lastInDescendant(blocks[len - 1]);
    }
  }, {
    key: "clear",
    value: function clear() {
      this.history.clearHistory();
    }
  }]);

  return ContentState;
}();

prototypes.forEach(function (ctrl) {
  return ctrl(contentState_ContentState);
});
/* harmony default export */ var lib_contentState = (contentState_ContentState);
// CONCATENATED MODULE: ./src/muya/lib/eventHandler/event.js












function event_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = event_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function event_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return event_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return event_arrayLikeToArray(o, minLen); }

function event_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }



var event_EventCenter = /*#__PURE__*/function () {
  function EventCenter() {
    Object(classCallCheck["a" /* default */])(this, EventCenter);

    this.events = [];
    this.listeners = {};
  }
  /**
   * [attachDOMEvent] bind event listener to target, and return a unique ID,
   * this ID
   */


  Object(createClass["a" /* default */])(EventCenter, [{
    key: "attachDOMEvent",
    value: function attachDOMEvent(target, event, listener, capture) {
      if (this.checkHasBind(target, event, listener, capture)) return false;
      var eventId = getUniqueId();
      target.addEventListener(event, listener, capture);
      this.events.push({
        eventId: eventId,
        target: target,
        event: event,
        listener: listener,
        capture: capture
      });
      return eventId;
    }
    /**
     * [detachDOMEvent removeEventListener]
     * @param  {[type]} eventId [unique eventId]
     */

  }, {
    key: "detachDOMEvent",
    value: function detachDOMEvent(eventId) {
      if (!eventId) return false;
      var removeEvent = this.events.filter(function (e) {
        return e.eventId === eventId;
      })[0];

      if (removeEvent) {
        var target = removeEvent.target,
            event = removeEvent.event,
            listener = removeEvent.listener,
            capture = removeEvent.capture;
        target.removeEventListener(event, listener, capture);
      }
    }
    /**
     * [detachAllDomEvents remove all the DOM events handler]
     */

  }, {
    key: "detachAllDomEvents",
    value: function detachAllDomEvents() {
      var _this = this;

      this.events.forEach(function (event) {
        return _this.detachDOMEvent(event.eventId);
      });
    }
    /**
     * inner method for subscribe and subscribeOnce
     */

  }, {
    key: "_subscribe",
    value: function _subscribe(event, listener) {
      var once = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
      var listeners = this.listeners[event];
      var handler = {
        listener: listener,
        once: once
      };

      if (listeners && Array.isArray(listeners)) {
        listeners.push(handler);
      } else {
        this.listeners[event] = [handler];
      }
    }
    /**
     * [subscribe] subscribe custom event
     */

  }, {
    key: "subscribe",
    value: function subscribe(event, listener) {
      this._subscribe(event, listener);
    }
    /**
     * [unsubscribe] unsubscribe custom event
     */

  }, {
    key: "unsubscribe",
    value: function unsubscribe(event, listener) {
      var listeners = this.listeners[event];

      if (Array.isArray(listeners) && listeners.find(function (l) {
        return l.listener === listener;
      })) {
        var index = listeners.findIndex(function (l) {
          return l.listener === listener;
        });
        listeners.splice(index, 1);
      }
    }
    /**
     * [subscribeOnce] usbscribe event and listen once
     */

  }, {
    key: "subscribeOnce",
    value: function subscribeOnce(event, listener) {
      this._subscribe(event, listener, true);
    }
    /**
     * dispatch custom event
     */

  }, {
    key: "dispatch",
    value: function dispatch(event) {
      var _this2 = this;

      for (var _len = arguments.length, data = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
        data[_key - 1] = arguments[_key];
      }

      var eventListener = this.listeners[event];

      if (eventListener && Array.isArray(eventListener)) {
        eventListener.forEach(function (_ref) {
          var listener = _ref.listener,
              once = _ref.once;
          listener.apply(void 0, data);

          if (once) {
            _this2.unsubscribe(event, listener);
          }
        });
      }
    } // Determine whether the event has been bind

  }, {
    key: "checkHasBind",
    value: function checkHasBind(cTarget, cEvent, cListener, cCapture) {
      var _iterator = event_createForOfIteratorHelper(this.events),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var _step$value = _step.value,
              target = _step$value.target,
              event = _step$value.event,
              listener = _step$value.listener,
              capture = _step$value.capture;

          if (target === cTarget && event === cEvent && listener === cListener && capture === cCapture) {
            return true;
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }

      return false;
    }
  }]);

  return EventCenter;
}();

/* harmony default export */ var eventHandler_event = (event_EventCenter);
// CONCATENATED MODULE: ./src/muya/lib/eventHandler/clipboard.js



var clipboard_Clipboard = /*#__PURE__*/function () {
  function Clipboard(muya) {
    Object(classCallCheck["a" /* default */])(this, Clipboard);

    this.muya = muya;
    this._copyType = 'normal'; // `normal` or `copyAsMarkdown` or `copyAsHtml`

    this._pasteType = 'normal'; // `normal` or `pasteAsPlainText`

    this.listen();
  }

  Object(createClass["a" /* default */])(Clipboard, [{
    key: "listen",
    value: function listen() {
      var _this = this;

      var _this$muya = this.muya,
          container = _this$muya.container,
          eventCenter = _this$muya.eventCenter,
          contentState = _this$muya.contentState;

      var docPasteHandler = function docPasteHandler(event) {
        contentState.docPasteHandler(event);
      };

      var copyCutHandler = function copyCutHandler(event) {
        contentState.copyHandler(event, _this._copyType);

        if (event.type === 'cut') {
          // when user use `cut` function, the dom has been deleted by default.
          // But should update content state manually.
          contentState.cutHandler();
        }

        _this._copyType = 'normal';
      };

      var pasteHandler = function pasteHandler(event) {
        contentState.pasteHandler(event, _this._pasteType);
        _this._pasteType = 'normal';

        _this.muya.dispatchChange();
      };

      eventCenter.attachDOMEvent(document, 'paste', docPasteHandler);
      eventCenter.attachDOMEvent(container, 'paste', pasteHandler);
      eventCenter.attachDOMEvent(container, 'cut', copyCutHandler);
      eventCenter.attachDOMEvent(container, 'copy', copyCutHandler);
    }
  }, {
    key: "copyAsMarkdown",
    value: function copyAsMarkdown() {
      this._copyType = 'copyAsMarkdown';
      document.execCommand('copy');
    }
  }, {
    key: "copyAsHtml",
    value: function copyAsHtml() {
      this._copyType = 'copyAsHtml';
      document.execCommand('copy');
    }
  }, {
    key: "pasteAsPlainText",
    value: function pasteAsPlainText() {
      this._pasteType = 'pasteAsPlainText';
      document.execCommand('paste');
    }
  }, {
    key: "copy",
    value: function copy(name) {
      switch (name) {
        case 'table':
          this._copyType = 'copyTable';
          document.execCommand('copy');
          break;

        default:
          break;
      }
    }
  }]);

  return Clipboard;
}();

/* harmony default export */ var clipboard = (clipboard_Clipboard);
// CONCATENATED MODULE: ./src/muya/lib/eventHandler/keyboard.js












function keyboard_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = keyboard_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function keyboard_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return keyboard_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return keyboard_arrayLikeToArray(o, minLen); }

function keyboard_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }







var keyboard_Keyboard = /*#__PURE__*/function () {
  function Keyboard(muya) {
    Object(classCallCheck["a" /* default */])(this, Keyboard);

    this.muya = muya;
    this.isComposed = false;
    this.shownFloat = new Set();
    this.recordIsComposed();
    this.dispatchEditorState();
    this.keydownBinding();
    this.keyupBinding();
    this.inputBinding();
    this.listen();
  }

  Object(createClass["a" /* default */])(Keyboard, [{
    key: "listen",
    value: function listen() {
      var _this = this;

      // cache shown float box
      this.muya.eventCenter.subscribe('muya-float', function (tool, status) {
        status ? _this.shownFloat.add(tool) : _this.shownFloat.delete(tool);

        if (tool.name === 'ag-front-menu' && !status) {
          var seletedParagraph = _this.muya.container.querySelector('.ag-selected');

          if (seletedParagraph) {
            _this.muya.contentState.selectedBlock = null; // prevent rerender, so change the class manually.

            seletedParagraph.classList.toggle('ag-selected');
          }
        }
      });
    }
  }, {
    key: "hideAllFloatTools",
    value: function hideAllFloatTools() {
      var _iterator = keyboard_createForOfIteratorHelper(this.shownFloat),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var tool = _step.value;
          tool.hide();
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    }
  }, {
    key: "recordIsComposed",
    value: function recordIsComposed() {
      var _this2 = this;

      var _this$muya = this.muya,
          container = _this$muya.container,
          eventCenter = _this$muya.eventCenter,
          contentState = _this$muya.contentState;

      var handler = function handler(event) {
        if (event.type === 'compositionstart') {
          _this2.isComposed = true;
        } else if (event.type === 'compositionend') {
          _this2.isComposed = false; // Because the compose event will not cause `input` event, So need call `inputHandler` by ourself

          contentState.inputHandler(event);
          eventCenter.dispatch('stateChange');
        }
      };

      eventCenter.attachDOMEvent(container, 'compositionend', handler); // eventCenter.attachDOMEvent(container, 'compositionupdate', handler)

      eventCenter.attachDOMEvent(container, 'compositionstart', handler);
    }
  }, {
    key: "dispatchEditorState",
    value: function dispatchEditorState() {
      var _this3 = this;

      var _this$muya2 = this.muya,
          container = _this$muya2.container,
          eventCenter = _this$muya2.eventCenter,
          contentState = _this$muya2.contentState;
      var timer = null;

      var changeHandler = function changeHandler(event) {
        if (event.type === 'keyup' && (event.key === EVENT_KEYS.ArrowUp || event.key === EVENT_KEYS.ArrowDown) && _this3.shownFloat.size > 0) {
          return;
        } // Cursor outside editor area or over not editable elements.


        if (event.target.closest('[contenteditable=false]')) {
          return;
        } // We need check cursor is null, because we may copy the html preview content,
        // and no need to dispatch change.


        var _selection$getCursorR = lib_selection.getCursorRange(),
            start = _selection$getCursorR.start,
            end = _selection$getCursorR.end;

        if (!start || !end) {
          return;
        }

        if (timer) clearTimeout(timer);
        timer = setTimeout(function () {
          var selectionChanges = contentState.selectionChange();

          var _contentState$selecti = contentState.selectionFormats(),
              formats = _contentState$selecti.formats;

          eventCenter.dispatch('selectionChange', selectionChanges);
          eventCenter.dispatch('selectionFormats', formats);

          if (!_this3.isComposed && event.type === 'click') {
            _this3.muya.dispatchChange();
          }
        });
      };

      eventCenter.attachDOMEvent(container, 'click', changeHandler);
      eventCenter.attachDOMEvent(container, 'keyup', changeHandler);
    }
  }, {
    key: "keydownBinding",
    value: function keydownBinding() {
      var _this4 = this;

      var _this$muya3 = this.muya,
          container = _this$muya3.container,
          eventCenter = _this$muya3.eventCenter,
          contentState = _this$muya3.contentState;

      var docHandler = function docHandler(event) {
        switch (event.code) {
          case EVENT_KEYS.Enter:
            return contentState.docEnterHandler(event);

          case EVENT_KEYS.Space:
            {
              if (contentState.selectedImage) {
                var _getImageInfo = utils_getImageInfo(contentState.selectedImage.token.src),
                    src = _getImageInfo.src;

                if (src) {
                  eventCenter.dispatch('preview-image', {
                    data: src
                  });
                }
              }

              break;
            }

          case EVENT_KEYS.Backspace:
            {
              return contentState.docBackspaceHandler(event);
            }

          case EVENT_KEYS.ArrowUp: // fallthrough

          case EVENT_KEYS.ArrowDown: // fallthrough

          case EVENT_KEYS.ArrowLeft: // fallthrough

          case EVENT_KEYS.ArrowRight:
            // fallthrough
            return contentState.docArrowHandler(event);
        }
      };

      var handler = function handler(event) {
        if (event.metaKey || event.ctrlKey) {
          container.classList.add('ag-meta-or-ctrl');
        }

        if (_this4.shownFloat.size > 0 && (event.key === EVENT_KEYS.Enter || event.key === EVENT_KEYS.Escape || event.key === EVENT_KEYS.Tab || event.key === EVENT_KEYS.ArrowUp || event.key === EVENT_KEYS.ArrowDown)) {
          var needPreventDefault = false;

          var _iterator2 = keyboard_createForOfIteratorHelper(_this4.shownFloat),
              _step2;

          try {
            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
              var tool = _step2.value;

              if (tool.name === 'ag-format-picker' || tool.name === 'ag-table-picker') {
                needPreventDefault = true;
                break;
              }
            }
          } catch (err) {
            _iterator2.e(err);
          } finally {
            _iterator2.f();
          }

          if (needPreventDefault) {
            event.preventDefault();
          }

          event.stopPropagation();
          return;
        }

        switch (event.key) {
          case EVENT_KEYS.Backspace:
            contentState.backspaceHandler(event);
            break;

          case EVENT_KEYS.Delete:
            contentState.deleteHandler(event);
            break;

          case EVENT_KEYS.Enter:
            if (!_this4.isComposed) {
              contentState.enterHandler(event);
            }

            break;

          case 'a':
            if (event.ctrlKey) {
              contentState.tableCellHandler(event);
            }

            break;

          case EVENT_KEYS.ArrowUp: // fallthrough

          case EVENT_KEYS.ArrowDown: // fallthrough

          case EVENT_KEYS.ArrowLeft: // fallthrough

          case EVENT_KEYS.ArrowRight:
            // fallthrough
            if (!_this4.isComposed) {
              contentState.arrowHandler(event);
            }

            break;

          case EVENT_KEYS.Tab:
            contentState.tabHandler(event);
            break;

          default:
            break;
        }
      };

      eventCenter.attachDOMEvent(container, 'keydown', handler);
      eventCenter.attachDOMEvent(document, 'keydown', docHandler);
    }
  }, {
    key: "inputBinding",
    value: function inputBinding() {
      var _this5 = this;

      var _this$muya4 = this.muya,
          container = _this$muya4.container,
          eventCenter = _this$muya4.eventCenter,
          contentState = _this$muya4.contentState;

      var inputHandler = function inputHandler(event) {
        if (!_this5.isComposed) {
          contentState.inputHandler(event);

          _this5.muya.dispatchChange();
        }

        var _contentState$checkEd = contentState.checkEditLanguage(),
            lang = _contentState$checkEd.lang,
            paragraph = _contentState$checkEd.paragraph;

        if (lang) {
          eventCenter.dispatch('muya-code-picker', {
            reference: getParagraphReference(paragraph, paragraph.id),
            lang: lang,
            cb: function cb(item) {
              contentState.selectLanguage(paragraph, item.name);
            }
          });
        } else {
          // hide code picker float box
          eventCenter.dispatch('muya-code-picker', {
            reference: null
          });
        }
      };

      eventCenter.attachDOMEvent(container, 'input', inputHandler);
    }
  }, {
    key: "keyupBinding",
    value: function keyupBinding() {
      var _this6 = this;

      var _this$muya5 = this.muya,
          container = _this$muya5.container,
          eventCenter = _this$muya5.eventCenter,
          contentState = _this$muya5.contentState;

      var handler = function handler(event) {
        container.classList.remove('ag-meta-or-ctrl'); // check if edit emoji

        var node = lib_selection.getSelectionStart();
        var paragraph = findNearestParagraph(node);
        var emojiNode = emojis_checkEditEmoji(node);
        contentState.selectedImage = null;

        if (paragraph && emojiNode && event.key !== EVENT_KEYS.Enter && event.key !== EVENT_KEYS.ArrowDown && event.key !== EVENT_KEYS.ArrowUp && event.key !== EVENT_KEYS.Tab && event.key !== EVENT_KEYS.Escape) {
          var reference = getParagraphReference(emojiNode, paragraph.id);
          eventCenter.dispatch('muya-emoji-picker', {
            reference: reference,
            emojiNode: emojiNode
          });
        }

        if (!emojiNode) {
          eventCenter.dispatch('muya-emoji-picker', {
            emojiNode: emojiNode
          });
        }

        var _selection$getCursorR2 = lib_selection.getCursorRange(),
            anchor = _selection$getCursorR2.anchor,
            focus = _selection$getCursorR2.focus,
            start = _selection$getCursorR2.start,
            end = _selection$getCursorR2.end;

        if (!anchor || !focus) {
          return;
        }

        if (!_this6.isComposed) {
          var _contentState$cursor = contentState.cursor,
              oldAnchor = _contentState$cursor.anchor,
              oldFocus = _contentState$cursor.focus;

          if (anchor.key !== oldAnchor.key || anchor.offset !== oldAnchor.offset || focus.key !== oldFocus.key || focus.offset !== oldFocus.offset) {
            var needRender = contentState.checkNeedRender(contentState.cursor) || contentState.checkNeedRender({
              start: start,
              end: end
            });
            contentState.cursor = {
              anchor: anchor,
              focus: focus
            };

            if (needRender) {
              return contentState.partialRender();
            }
          }
        }

        var block = contentState.getBlock(anchor.key);

        if (anchor.key === focus.key && anchor.offset !== focus.offset && block.functionType !== 'codeLine') {
          var _reference = contentState.getPositionReference();

          var _contentState$selecti2 = contentState.selectionFormats(),
              formats = _contentState$selecti2.formats;

          eventCenter.dispatch('muya-format-picker', {
            reference: _reference,
            formats: formats
          });
        } else {
          eventCenter.dispatch('muya-format-picker', {
            reference: null
          });
        }
      };

      eventCenter.attachDOMEvent(container, 'keyup', handler); // temp use input event
    }
  }]);

  return Keyboard;
}();

/* harmony default export */ var keyboard = (keyboard_Keyboard);
// CONCATENATED MODULE: ./src/muya/lib/eventHandler/dragDrop.js



var dragDrop_DragDrop = /*#__PURE__*/function () {
  function DragDrop(muya) {
    Object(classCallCheck["a" /* default */])(this, DragDrop);

    this.muya = muya;
    this.dragOverBinding();
    this.dropBinding();
    this.dragendBinding();
  }

  Object(createClass["a" /* default */])(DragDrop, [{
    key: "dragOverBinding",
    value: function dragOverBinding() {
      var _this$muya = this.muya,
          container = _this$muya.container,
          eventCenter = _this$muya.eventCenter,
          contentState = _this$muya.contentState;

      var dragoverHandler = function dragoverHandler(event) {
        contentState.dragoverHandler(event);
      };

      eventCenter.attachDOMEvent(container, 'dragover', dragoverHandler);
    }
  }, {
    key: "dropBinding",
    value: function dropBinding() {
      var _this$muya2 = this.muya,
          container = _this$muya2.container,
          eventCenter = _this$muya2.eventCenter,
          contentState = _this$muya2.contentState;

      var dropHandler = function dropHandler(event) {
        contentState.dropHandler(event);
      };

      eventCenter.attachDOMEvent(container, 'drop', dropHandler);
    }
  }, {
    key: "dragendBinding",
    value: function dragendBinding() {
      var _this$muya3 = this.muya,
          eventCenter = _this$muya3.eventCenter,
          contentState = _this$muya3.contentState;

      var dragleaveHandler = function dragleaveHandler(event) {
        contentState.dragleaveHandler(event);
      };

      eventCenter.attachDOMEvent(window, 'dragleave', dragleaveHandler);
    }
  }]);

  return DragDrop;
}();

/* harmony default export */ var dragDrop = (dragDrop_DragDrop);
// CONCATENATED MODULE: ./src/muya/lib/eventHandler/clickEvent.js







var clickEvent_ClickEvent = /*#__PURE__*/function () {
  function ClickEvent(muya) {
    Object(classCallCheck["a" /* default */])(this, ClickEvent);

    this.muya = muya;
    this.clickBinding();
    this.contextClickBingding();
  }

  Object(createClass["a" /* default */])(ClickEvent, [{
    key: "contextClickBingding",
    value: function contextClickBingding() {
      var _this$muya = this.muya,
          container = _this$muya.container,
          eventCenter = _this$muya.eventCenter,
          contentState = _this$muya.contentState;

      var handler = function handler(event) {
        event.preventDefault();
        event.stopPropagation(); // Hide format box

        eventCenter.dispatch('muya-format-picker', {
          reference: null
        });

        var _selection$getCursorR = lib_selection.getCursorRange(),
            start = _selection$getCursorR.start,
            end = _selection$getCursorR.end; // Cursor out of editor


        if (!start || !end) {
          return;
        }

        var startBlock = contentState.getBlock(start.key);
        var nextTextBlock = contentState.findNextBlockInLocation(startBlock);

        if (nextTextBlock && nextTextBlock.key === end.key && end.offset === 0 && start.offset === startBlock.text.length) {
          // Set cursor at the end of start block and reset cursor
          // Because if you right click at the end of one text block, the cursor.start will at the end of
          // start block and the cursor.end will at the next text block beginning. So we reset the cursor
          // at the end of start block.
          contentState.cursor = {
            start: start,
            end: start
          };
          lib_selection.setCursorRange(contentState.cursor);
        } else {
          // Commit native cursor position because right-clicking doesn't update the cursor postion.
          contentState.cursor = {
            start: start,
            end: end
          };
        }

        var sectionChanges = contentState.selectionChange(contentState.cursor);
        eventCenter.dispatch('contextmenu', event, sectionChanges);
      };

      eventCenter.attachDOMEvent(container, 'contextmenu', handler);
    }
  }, {
    key: "clickBinding",
    value: function clickBinding() {
      var _this$muya2 = this.muya,
          container = _this$muya2.container,
          eventCenter = _this$muya2.eventCenter,
          contentState = _this$muya2.contentState;

      var handler = function handler(event) {
        var target = event.target; // handler table click

        var toolItem = getToolItem(target);
        contentState.selectedImage = null;

        if (toolItem) {
          event.preventDefault();
          event.stopPropagation();
          var type = toolItem.getAttribute('data-label');
          var grandPa = toolItem.parentNode.parentNode;

          if (grandPa.classList.contains('ag-tool-table')) {
            contentState.tableToolBarClick(type);
          }
        } // handler image and inline math preview click


        var markedImageText = target.previousElementSibling;
        var mathRender = target.closest(".".concat(CLASS_OR_ID['AG_MATH_RENDER']));
        var rubyRender = target.closest(".".concat(CLASS_OR_ID['AG_RUBY_RENDER']));
        var imageWrapper = target.closest(".".concat(CLASS_OR_ID['AG_INLINE_IMAGE']));
        var imageTurnInto = target.closest('.ag-image-icon-turninto');
        var imageDelete = target.closest('.ag-image-icon-delete') || target.closest('.ag-image-icon-close');
        var mathText = mathRender && mathRender.previousElementSibling;
        var rubyText = rubyRender && rubyRender.previousElementSibling;

        if (markedImageText && markedImageText.classList.contains(CLASS_OR_ID['AG_IMAGE_MARKED_TEXT'])) {
          eventCenter.dispatch('format-click', {
            event: event,
            formatType: 'image',
            data: event.target.getAttribute('src')
          });
          selectionText(markedImageText);
        } else if (mathText) {
          selectionText(mathText);
        } else if (rubyText) {
          selectionText(rubyText);
        } // Handle delete inline iamge by click delete icon.


        if (imageDelete && imageWrapper) {
          var imageInfo = getImageInfo_getImageInfo(imageWrapper);
          event.preventDefault();
          event.stopPropagation(); // hide image selector if needed.

          eventCenter.dispatch('muya-image-selector', {
            reference: null
          });
          return contentState.deleteImage(imageInfo);
        } // Handle image click, to select the current image


        if (target.tagName === 'IMG' && imageWrapper) {
          // Handle select image
          var _imageInfo = getImageInfo_getImageInfo(imageWrapper);

          event.preventDefault();
          eventCenter.dispatch('select-image', _imageInfo);
          return contentState.selectImage(_imageInfo);
        } // Handle click imagewrapper when it's empty or image load failed.


        if (imageTurnInto && imageWrapper || imageWrapper && (imageWrapper.classList.contains('ag-empty-image') || imageWrapper.classList.contains('ag-image-fail'))) {
          var rect = imageWrapper.getBoundingClientRect();
          var reference = {
            getBoundingClientRect: function getBoundingClientRect() {
              if (imageTurnInto) {
                rect.height = 0;
              }

              return rect;
            }
          };

          var _imageInfo2 = getImageInfo_getImageInfo(imageWrapper);

          eventCenter.dispatch('muya-image-selector', {
            reference: reference,
            imageInfo: _imageInfo2,
            cb: function cb() {}
          });
          event.preventDefault();
          return event.stopPropagation();
        }

        if (target.closest('div.ag-container-preview') || target.closest('div.ag-html-preview')) {
          return event.stopPropagation();
        } // handler container preview click


        var editIcon = target.closest(".ag-container-icon");

        if (editIcon) {
          event.preventDefault();
          event.stopPropagation();

          if (editIcon.parentNode.classList.contains('ag-container-block')) {
            contentState.handleContainerBlockClick(editIcon.parentNode);
          }
        } // handler to-do checkbox click


        if (target.tagName === 'INPUT' && target.classList.contains(CLASS_OR_ID['AG_TASK_LIST_ITEM_CHECKBOX'])) {
          contentState.listItemCheckBoxClick(target);
        }

        contentState.clickHandler(event);
      };

      eventCenter.attachDOMEvent(container, 'click', handler);
    }
  }]);

  return ClickEvent;
}();

function getToolItem(target) {
  return target.closest('[data-label]');
}

function selectionText(node) {
  var textLen = node.textContent.length;
  operateClassName(node, 'remove', CLASS_OR_ID['AG_HIDE']);
  operateClassName(node, 'add', CLASS_OR_ID['AG_GRAY']);
  lib_selection.importSelection({
    start: textLen,
    end: textLen
  }, node);
}

/* harmony default export */ var clickEvent = (clickEvent_ClickEvent);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.weak-map.js
var es6_weak_map = __webpack_require__("10ad");

// EXTERNAL MODULE: ./src/muya/lib/ui/tooltip/index.css
var tooltip = __webpack_require__("8ccd");

// CONCATENATED MODULE: ./src/muya/lib/ui/tooltip/index.js







var tooltip_position = function position(source, ele) {
  var rect = source.getBoundingClientRect();
  var top = rect.top,
      right = rect.right,
      height = rect.height;
  Object.assign(ele.style, {
    top: "".concat(top + height + 20, "px"),
    left: "".concat(right - ele.offsetWidth / 2 - 10, "px")
  });
};

var tooltip_Tooltip = /*#__PURE__*/function () {
  function Tooltip(muya) {
    Object(classCallCheck["a" /* default */])(this, Tooltip);

    this.muya = muya;
    this.cache = new WeakMap();
    var _this$muya = this.muya,
        container = _this$muya.container,
        eventCenter = _this$muya.eventCenter;
    eventCenter.attachDOMEvent(container, 'mouseover', this.mouseOver.bind(this));
  }

  Object(createClass["a" /* default */])(Tooltip, [{
    key: "mouseOver",
    value: function mouseOver(event) {
      var _this = this;

      var target = event.target;
      var toolTipTarget = target.closest('[data-tooltip]');
      var eventCenter = this.muya.eventCenter;

      if (toolTipTarget && !this.cache.has(toolTipTarget)) {
        var tooltip = toolTipTarget.getAttribute('data-tooltip');
        var tooltipEle = document.createElement('div');
        tooltipEle.textContent = tooltip;
        tooltipEle.classList.add('ag-tooltip');
        document.body.appendChild(tooltipEle);
        tooltip_position(toolTipTarget, tooltipEle);
        this.cache.set(toolTipTarget, tooltipEle);
        setTimeout(function () {
          tooltipEle.classList.add('active');
        });
        var timer = setInterval(function () {
          if (!document.body.contains(toolTipTarget)) {
            _this.mouseLeave({
              target: toolTipTarget
            });

            clearInterval(timer);
          }
        }, 300);
        eventCenter.attachDOMEvent(toolTipTarget, 'mouseleave', this.mouseLeave.bind(this));
      }
    }
  }, {
    key: "mouseLeave",
    value: function mouseLeave(event) {
      var target = event.target;

      if (this.cache.has(target)) {
        var tooltipEle = this.cache.get(target);
        tooltipEle.remove();
        this.cache.delete(target);
      }
    }
  }]);

  return Tooltip;
}();

/* harmony default export */ var ui_tooltip = (tooltip_Tooltip);
// EXTERNAL MODULE: ./src/muya/lib/assets/styles/index.css
var styles = __webpack_require__("85fc");

// CONCATENATED MODULE: ./src/muya/lib/index.js














function lib_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = lib_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function lib_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return lib_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return lib_arrayLikeToArray(o, minLen); }

function lib_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }














var lib_Muya = /*#__PURE__*/function () {
  function Muya(container, options) {
    var _this = this;

    Object(classCallCheck["a" /* default */])(this, Muya);

    Object(defineProperty["a" /* default */])(this, "dispatchChange", function () {
      var eventCenter = _this.eventCenter;

      var markdown = _this.markdown = _this.getMarkdown();

      var wordCount = _this.getWordCount(markdown);

      var cursor = _this.getCursor();

      var history = _this.getHistory();

      var toc = _this.getTOC();

      eventCenter.dispatch('change', {
        markdown: markdown,
        wordCount: wordCount,
        cursor: cursor,
        history: history,
        toc: toc
      });
    });

    this.options = Object.assign({}, MUYA_DEFAULT_OPTION, options);
    var _markdown = this.options.markdown;
    this.markdown = _markdown;
    this.container = getContainer(container, this.options);
    this.eventCenter = new eventHandler_event();
    this.tooltip = new ui_tooltip(this); // UI plugins

    if (Muya.plugins.length) {
      var _iterator = lib_createForOfIteratorHelper(Muya.plugins),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var Plugin = _step.value;
          this[Plugin.pluginName] = new Plugin(this);
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    }

    this.contentState = new lib_contentState(this, this.options);
    this.clipboard = new clipboard(this);
    this.clickEvent = new clickEvent(this);
    this.keyboard = new keyboard(this);
    this.dragdrop = new dragDrop(this);
    this.init();
  }

  Object(createClass["a" /* default */])(Muya, [{
    key: "init",
    value: function init() {
      var container = this.container,
          contentState = this.contentState,
          eventCenter = this.eventCenter;
      contentState.stateRender.setContainer(container.children[0]);
      eventCenter.subscribe('stateChange', this.dispatchChange);
      var markdown = this.markdown;
      var focusMode = this.options.focusMode;
      this.setMarkdown(markdown);
      this.setFocusMode(focusMode);
      this.mutationObserver();
      eventCenter.attachDOMEvent(container, 'focus', function () {
        eventCenter.dispatch('focus');
      });
      eventCenter.attachDOMEvent(container, 'blur', function () {
        eventCenter.dispatch('blur');
      });
    }
  }, {
    key: "mutationObserver",
    value: function mutationObserver() {
      var _this2 = this;

      // Select the node that will be observed for mutations
      var container = this.container; // Options for the observer (which mutations to observe)

      var config = {
        childList: true,
        subtree: true
      }; // Callback function to execute when mutations are observed

      var callback = function callback(mutationsList, observer) {
        var _iterator2 = lib_createForOfIteratorHelper(mutationsList),
            _step2;

        try {
          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
            var mutation = _step2.value;

            if (mutation.type === 'childList') {
              var removedNodes = mutation.removedNodes,
                  target = mutation.target; // If the code executes any of the following `if` statements, the editor has gone wrong.
              // need to report bugs.

              if (removedNodes && removedNodes.length) {
                var hasTable = Array.from(removedNodes).some(function (node) {
                  return node.nodeType === 1 && node.closest('table.ag-paragraph');
                });

                if (hasTable) {
                  console.warn('There was a problem with the table deletion.');
                }

                var lineRemovedUnExpected = Array.from(removedNodes).some(function (node) {
                  return node.nodeType === 1 && node.classList.contains('ag-paragraph-content');
                }) && _this2.keyboard.isComposed;

                if (lineRemovedUnExpected) {
                  _this2.contentState.partialRender();
                }
              }

              if (target.getAttribute('id') === 'ag-editor-id' && target.childElementCount === 0) {
                // TODO: the editor can not be input any more. report bugs and recoveryr...
                console.warn('editor crashed, and can not be input any more.');
              }
            }
          }
        } catch (err) {
          _iterator2.e(err);
        } finally {
          _iterator2.f();
        }
      }; // Create an observer instance linked to the callback function


      var observer = new MutationObserver(callback); // Start observing the target node for configured mutations

      observer.observe(container, config);
    }
  }, {
    key: "getMarkdown",
    value: function getMarkdown() {
      var blocks = this.contentState.getBlocks();
      var listIndentation = this.contentState.listIndentation;
      return new exportMarkdown(blocks, listIndentation).generate();
    }
  }, {
    key: "getHistory",
    value: function getHistory() {
      return this.contentState.getHistory();
    }
  }, {
    key: "getTOC",
    value: function getTOC() {
      return this.contentState.getTOC();
    }
  }, {
    key: "setHistory",
    value: function setHistory(history) {
      return this.contentState.setHistory(history);
    }
  }, {
    key: "clearHistory",
    value: function clearHistory() {
      return this.contentState.history.clearHistory();
    }
  }, {
    key: "exportStyledHTML",
    value: function exportStyledHTML() {
      var title = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
      var printOptimization = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      var markdown = this.markdown;
      return new utils_exportHtml(markdown, this).generate(title, printOptimization);
    }
  }, {
    key: "exportHtml",
    value: function exportHtml() {
      var markdown = this.markdown;
      return new utils_exportHtml(markdown, this).renderHtml();
    }
  }, {
    key: "getWordCount",
    value: function getWordCount(markdown) {
      return wordCount(markdown);
    }
  }, {
    key: "getCursor",
    value: function getCursor() {
      return this.contentState.getCodeMirrorCursor();
    }
  }, {
    key: "setMarkdown",
    value: function setMarkdown(markdown, cursor) {
      var _this3 = this;

      var isRenderCursor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
      var newMarkdown = markdown;

      if (cursor) {
        newMarkdown = this.contentState.addCursorToMarkdown(markdown, cursor);
      }

      this.contentState.importMarkdown(newMarkdown);
      this.contentState.importCursor(cursor);
      this.contentState.render(isRenderCursor);
      setTimeout(function () {
        _this3.dispatchChange();
      }, 0);
    }
  }, {
    key: "setCursor",
    value: function setCursor(cursor) {
      var markdown = this.getMarkdown();
      var isRenderCursor = true;
      return this.setMarkdown(markdown, cursor, isRenderCursor);
    }
  }, {
    key: "createTable",
    value: function createTable(tableChecker) {
      return this.contentState.createTable(tableChecker);
    }
  }, {
    key: "getSelection",
    value: function getSelection() {
      return this.contentState.selectionChange();
    }
  }, {
    key: "setFocusMode",
    value: function setFocusMode(bool) {
      var container = this.container;
      var focusMode = this.options.focusMode;

      if (bool && !focusMode) {
        container.classList.add(CLASS_OR_ID['AG_FOCUS_MODE']);
      } else {
        container.classList.remove(CLASS_OR_ID['AG_FOCUS_MODE']);
      }

      this.options.focusMode = bool;
    }
  }, {
    key: "setFont",
    value: function setFont(_ref) {
      var fontSize = _ref.fontSize,
          lineHeight = _ref.lineHeight;
      if (fontSize) this.contentState.fontSize = parseInt(fontSize, 10);
      if (lineHeight) this.contentState.lineHeight = lineHeight;
    }
  }, {
    key: "setTabSize",
    value: function setTabSize(tabSize) {
      if (!tabSize || typeof tabSize !== 'number') {
        tabSize = 4;
      } else if (tabSize < 1) {
        tabSize = 1;
      } else if (tabSize > 4) {
        tabSize = 4;
      }

      this.contentState.tabSize = tabSize;
    }
  }, {
    key: "setListIndentation",
    value: function setListIndentation(listIndentation) {
      if (typeof listIndentation === 'number') {
        if (listIndentation < 1 || listIndentation > 4) {
          listIndentation = 1;
        }
      } else if (listIndentation !== 'dfm') {
        listIndentation = 1;
      }

      this.contentState.listIndentation = listIndentation;
    }
  }, {
    key: "updateParagraph",
    value: function updateParagraph(type) {
      this.contentState.updateParagraph(type);
    }
  }, {
    key: "duplicate",
    value: function duplicate() {
      this.contentState.duplicate();
    }
  }, {
    key: "deleteParagraph",
    value: function deleteParagraph() {
      this.contentState.deleteParagraph();
    }
  }, {
    key: "insertParagraph",
    value: function insertParagraph(location
    /* before or after */
    ) {
      var text = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
      var outMost = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
      this.contentState.insertParagraph(location, text, outMost);
    }
  }, {
    key: "editTable",
    value: function editTable(data) {
      this.contentState.editTable(data);
    }
  }, {
    key: "hasFocus",
    value: function hasFocus() {
      return document.activeElement === this.container;
    }
  }, {
    key: "focus",
    value: function focus() {
      this.contentState.setCursor();
      this.container.focus();
    }
  }, {
    key: "blur",
    value: function blur() {
      this.container.blur();
    }
  }, {
    key: "format",
    value: function format(type) {
      this.contentState.format(type);
    }
  }, {
    key: "insertImage",
    value: function insertImage(imageInfo) {
      this.contentState.insertImage(imageInfo);
    }
  }, {
    key: "search",
    value: function search(value, opt) {
      var selectHighlight = opt.selectHighlight;
      this.contentState.search(value, opt);
      this.contentState.render(!!selectHighlight);
      return this.contentState.searchMatches;
    }
  }, {
    key: "replace",
    value: function replace(value, opt) {
      this.contentState.replace(value, opt);
      this.contentState.render(false);
      return this.contentState.searchMatches;
    }
  }, {
    key: "find",
    value: function find(action
    /* pre or next */
    ) {
      this.contentState.find(action);
      this.contentState.render(false);
      return this.contentState.searchMatches;
    }
  }, {
    key: "on",
    value: function on(event, listener) {
      this.eventCenter.subscribe(event, listener);
    }
  }, {
    key: "off",
    value: function off(event, listener) {
      this.eventCenter.unsubscribe(event, listener);
    }
  }, {
    key: "once",
    value: function once(event, listener) {
      this.eventCenter.subscribeOnce(event, listener);
    }
  }, {
    key: "undo",
    value: function undo() {
      this.contentState.history.undo();
    }
  }, {
    key: "redo",
    value: function redo() {
      this.contentState.history.redo();
    }
  }, {
    key: "selectAll",
    value: function selectAll() {
      if (this.hasFocus()) {
        this.contentState.selectAll();
      }

      var activeElement = document.activeElement;

      if (activeElement.nodeName === 'INPUT') {
        activeElement.select();
      }
    }
  }, {
    key: "copyAsMarkdown",
    value: function copyAsMarkdown() {
      this.clipboard.copyAsMarkdown();
    }
  }, {
    key: "copyAsHtml",
    value: function copyAsHtml() {
      this.clipboard.copyAsHtml();
    }
  }, {
    key: "pasteAsPlainText",
    value: function pasteAsPlainText() {
      this.clipboard.pasteAsPlainText();
    }
  }, {
    key: "copy",
    value: function copy(name) {
      this.clipboard.copy(name);
    }
  }, {
    key: "setOptions",
    value: function setOptions(options) {
      var needRender = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      Object.assign(this.options, options);

      if (needRender) {
        this.contentState.render();
      } // Set quick insert hint visibility


      var hideQuickInsertHint = options['hideQuickInsertHint'];

      if (typeof hideQuickInsertHint !== 'undefined') {
        var hasClass = this.container.classList.contains('ag-show-quick-insert-hint');

        if (hideQuickInsertHint && hasClass) {
          this.container.classList.remove('ag-show-quick-insert-hint');
        } else if (!hideQuickInsertHint && !hasClass) {
          this.container.classList.add('ag-show-quick-insert-hint');
        }
      }

      if (options.bulletListMarker) {
        this.contentState.turndownConfig.bulletListMarker = options.bulletListMarker;
      }
    }
  }, {
    key: "hideAllFloatTools",
    value: function hideAllFloatTools() {
      return this.keyboard.hideAllFloatTools();
    }
  }, {
    key: "destroy",
    value: function destroy() {
      this.contentState.clear();
      this.quickInsert.destroy();
      this.codePicker.destroy();
      this.tablePicker.destroy();
      this.emojiPicker.destroy();
      this.imagePathPicker.destroy();
      this.eventCenter.detachAllDomEvents();
    }
  }], [{
    key: "use",
    value: function use(plugin) {
      this.plugins.push(plugin);
    }
  }]);

  return Muya;
}();
/**
  * [ensureContainerDiv ensure container element is div]
  */


Object(defineProperty["a" /* default */])(lib_Muya, "plugins", []);

function getContainer(originContainer, options) {
  var hideQuickInsertHint = options.hideQuickInsertHint;
  var container = document.createElement('div');
  var rootDom = document.createElement('div');
  var attrs = originContainer.attributes; // copy attrs from origin container to new div element

  Array.from(attrs).forEach(function (attr) {
    container.setAttribute(attr.name, attr.value);
  });

  if (!hideQuickInsertHint) {
    container.classList.add('ag-show-quick-insert-hint');
  }

  container.setAttribute('contenteditable', true);
  container.setAttribute('autocorrect', false);
  container.setAttribute('autocomplete', 'off');
  container.setAttribute('spellcheck', false);
  container.appendChild(rootDom);
  originContainer.replaceWith(container);
  return container;
}

/* harmony default export */ var lib = (lib_Muya);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.reflect.construct.js
var es6_reflect_construct = __webpack_require__("2397");

// EXTERNAL MODULE: ./node_modules/@babel/runtime-corejs2/helpers/esm/get.js + 1 modules
var get = __webpack_require__("2a88");

// EXTERNAL MODULE: ./node_modules/@babel/runtime-corejs2/helpers/esm/inherits.js + 1 modules
var inherits = __webpack_require__("4e2b");

// EXTERNAL MODULE: ./node_modules/@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn.js + 1 modules
var possibleConstructorReturn = __webpack_require__("308d");

// EXTERNAL MODULE: ./node_modules/@babel/runtime-corejs2/helpers/esm/getPrototypeOf.js
var getPrototypeOf = __webpack_require__("6bb5");

// EXTERNAL MODULE: ./node_modules/popper.js/dist/esm/popper.js
var popper = __webpack_require__("f0bd");

// EXTERNAL MODULE: ./node_modules/element-resize-detector/src/element-resize-detector.js
var element_resize_detector = __webpack_require__("eec4");
var element_resize_detector_default = /*#__PURE__*/__webpack_require__.n(element_resize_detector);

// EXTERNAL MODULE: ./src/muya/lib/ui/baseFloat/index.css
var baseFloat = __webpack_require__("f36e");

// CONCATENATED MODULE: ./src/muya/lib/ui/baseFloat/index.js








var defaultOptions = {
  placement: 'bottom-start',
  modifiers: {
    offset: {
      offset: '0, 12'
    }
  },
  showArrow: true
};

var baseFloat_BaseFloat = /*#__PURE__*/function () {
  function BaseFloat(muya, name) {
    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

    Object(classCallCheck["a" /* default */])(this, BaseFloat);

    this.name = name;
    this.muya = muya;
    this.options = Object.assign({}, defaultOptions, options);
    this.status = false;
    this.floatBox = null;
    this.container = null;
    this.popper = null;
    this.lastScrollTop = null;
    this.cb = noop;
    this.init();
  }

  Object(createClass["a" /* default */])(BaseFloat, [{
    key: "init",
    value: function init() {
      var _this = this;

      var showArrow = this.options.showArrow;
      var floatBox = document.createElement('div');
      var container = document.createElement('div'); // Use to remember whick float container is shown.

      container.classList.add(this.name);
      container.classList.add('ag-float-container');
      floatBox.classList.add('ag-float-wrapper');

      if (showArrow) {
        var arrow = document.createElement('div');
        arrow.setAttribute('x-arrow', '');
        arrow.classList.add('ag-popper-arrow');
        floatBox.appendChild(arrow);
      }

      floatBox.appendChild(container);
      document.body.appendChild(floatBox);
      var erd = element_resize_detector_default()({
        strategy: 'scroll'
      }); // use polyfill

      erd.listenTo(container, function (ele) {
        var offsetWidth = ele.offsetWidth,
            offsetHeight = ele.offsetHeight;
        Object.assign(floatBox.style, {
          width: "".concat(offsetWidth, "px"),
          height: "".concat(offsetHeight, "px")
        });
        _this.popper && _this.popper.update();
      }); // const ro = new ResizeObserver(entries => {
      //   for (const entry of entries) {
      //     const { offsetWidth, offsetHeight } = entry.target
      //     Object.assign(floatBox.style, { width: `${offsetWidth + 2}px`, height: `${offsetHeight + 2}px` })
      //     this.popper && this.popper.update()
      //   }
      // })
      // ro.observe(container)

      this.floatBox = floatBox;
      this.container = container;
    }
  }, {
    key: "listen",
    value: function listen() {
      var _this2 = this;

      var _this$muya = this.muya,
          eventCenter = _this$muya.eventCenter,
          container = _this$muya.container;
      var floatBox = this.floatBox;

      var keydownHandler = function keydownHandler(event) {
        if (event.key === EVENT_KEYS.Escape) {
          _this2.hide();
        }
      };

      var scrollHandler = function scrollHandler(event) {
        if (typeof _this2.lastScrollTop !== 'number') {
          _this2.lastScrollTop = event.target.scrollTop;
          return;
        } // only when scoll distance great than 50px, then hide the float box.


        if (_this2.status && Math.abs(event.target.scrollTop - _this2.lastScrollTop) > 50) {
          _this2.hide();
        }
      };

      eventCenter.attachDOMEvent(document, 'click', this.hide.bind(this));
      eventCenter.attachDOMEvent(floatBox, 'click', function (event) {
        event.stopPropagation();
        event.preventDefault();
      });
      eventCenter.attachDOMEvent(container, 'keydown', keydownHandler);
      eventCenter.attachDOMEvent(container, 'scroll', scrollHandler);
    }
  }, {
    key: "hide",
    value: function hide() {
      var eventCenter = this.muya.eventCenter;
      if (!this.status) return;
      this.status = false;

      if (this.popper && this.popper.destroy) {
        this.popper.destroy();
      }

      this.cb = noop;
      eventCenter.dispatch('muya-float', this, false);
      this.lastScrollTop = null;
    }
  }, {
    key: "show",
    value: function show(reference) {
      var cb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;
      var floatBox = this.floatBox;
      var eventCenter = this.muya.eventCenter;
      var _this$options = this.options,
          placement = _this$options.placement,
          modifiers = _this$options.modifiers;

      if (this.popper && this.popper.destroy) {
        this.popper.destroy();
      }

      this.cb = cb;
      this.popper = new popper["a" /* default */](reference, floatBox, {
        placement: placement,
        modifiers: modifiers
      });
      this.status = true;
      eventCenter.dispatch('muya-float', this, true);
    }
  }, {
    key: "destroy",
    value: function destroy() {
      if (this.popper && this.popper.destroy) {
        this.popper.destroy();
      }

      this.floatBox.remove();
    }
  }]);

  return BaseFloat;
}();

/* harmony default export */ var ui_baseFloat = (baseFloat_BaseFloat);
// EXTERNAL MODULE: ./src/muya/lib/ui/tablePicker/index.css
var tablePicker = __webpack_require__("d881");

// CONCATENATED MODULE: ./src/muya/lib/ui/tablePicker/index.js










function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Object(getPrototypeOf["a" /* default */])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Object(getPrototypeOf["a" /* default */])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Object(possibleConstructorReturn["a" /* default */])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }






var tablePicker_TablePicker = /*#__PURE__*/function (_BaseFloat) {
  Object(inherits["a" /* default */])(TablePicker, _BaseFloat);

  var _super = _createSuper(TablePicker);

  function TablePicker(muya) {
    var _this;

    Object(classCallCheck["a" /* default */])(this, TablePicker);

    var name = 'ag-table-picker';
    _this = _super.call(this, muya, name);
    _this.checkerCount = {
      row: 6,
      column: 8
    };
    _this.oldVnode = null;
    _this.current = null;
    _this.select = null;
    var tableContainer = _this.tableContainer = document.createElement('div');

    _this.container.appendChild(tableContainer);

    _this.listen();

    return _this;
  }

  Object(createClass["a" /* default */])(TablePicker, [{
    key: "listen",
    value: function listen() {
      var _this2 = this;

      var eventCenter = this.muya.eventCenter;

      Object(get["a" /* default */])(Object(getPrototypeOf["a" /* default */])(TablePicker.prototype), "listen", this).call(this);

      eventCenter.subscribe('muya-table-picker', function (data, reference, cb) {
        if (!_this2.status) {
          _this2.show(data, reference, cb);

          _this2.render();
        } else {
          _this2.hide();
        }
      });
    }
  }, {
    key: "render",
    value: function render() {
      var _this3 = this;

      var _this$checkerCount = this.checkerCount,
          row = _this$checkerCount.row,
          column = _this$checkerCount.column;
      var _this$current = this.current,
          cRow = _this$current.row,
          cColumn = _this$current.column;
      var _this$select = this.select,
          sRow = _this$select.row,
          sColumn = _this$select.column;
      var tableContainer = this.tableContainer,
          oldVnode = this.oldVnode;
      var tableRows = [];
      var i;
      var j;

      for (i = 0; i < row; i++) {
        var rowSelector = 'div.ag-table-picker-row';

        if (i === 0) {
          rowSelector += '.ag-table-picker-header';
        }

        var cells = [];

        for (j = 0; j < column; j++) {
          var cellSelector = 'span.ag-table-picker-cell';

          if (i <= cRow && j <= cColumn) {
            cellSelector += '.current';
          }

          if (i <= sRow && j <= sColumn) {
            cellSelector += '.selected';
          }

          cells.push(snabbdom_h(cellSelector, {
            key: j.toString(),
            dataset: {
              row: i.toString(),
              column: j.toString()
            },
            on: {
              mouseenter: function mouseenter(event) {
                var target = event.target;
                var r = target.getAttribute('data-row');
                var c = target.getAttribute('data-column');
                _this3.select = {
                  row: r,
                  column: c
                };

                _this3.render();
              },
              click: function click(_) {
                _this3.selectItem();
              }
            }
          }));
        }

        tableRows.push(snabbdom_h(rowSelector, cells));
      }

      var tableFooter = snabbdom_h('div.footer', [snabbdom_h('input.row-input', {
        props: {
          type: 'text',
          value: +this.select.row + 1
        },
        on: {
          keyup: function keyup(event) {
            _this3.keyupHandler(event, 'row');
          }
        }
      }), 'x', snabbdom_h('input.column-input', {
        props: {
          type: 'text',
          value: +this.select.column + 1
        },
        on: {
          keyup: function keyup(event) {
            _this3.keyupHandler(event, 'column');
          }
        }
      }), snabbdom_h('button', {
        on: {
          click: function click(_) {
            _this3.selectItem();
          }
        }
      }, 'OK')]);
      var vnode = snabbdom_h('div', [snabbdom_h('div.checker', tableRows), tableFooter]);

      if (oldVnode) {
        patch(oldVnode, vnode);
      } else {
        patch(tableContainer, vnode);
      }

      this.oldVnode = vnode;
    }
  }, {
    key: "keyupHandler",
    value: function keyupHandler(event, type) {
      var number = +this.select[type];
      var value = +event.target.value;

      if (event.key === EVENT_KEYS.ArrowUp) {
        number++;
      } else if (event.key === EVENT_KEYS.ArrowDown) {
        number--;
      } else if (event.key === EVENT_KEYS.Enter) {
        this.selectItem();
      } else if (typeof value === 'number') {
        number = value - 1;
      }

      if (number !== +this.select[type]) {
        this.select[type] = Math.max(number, 0);
        this.render();
      }
    }
  }, {
    key: "show",
    value: function show(current, reference, cb) {
      // current { row, column } zero base
      this.current = this.select = current;

      Object(get["a" /* default */])(Object(getPrototypeOf["a" /* default */])(TablePicker.prototype), "show", this).call(this, reference, cb);
    }
  }, {
    key: "selectItem",
    value: function selectItem() {
      var cb = this.cb;
      var _this$select2 = this.select,
          row = _this$select2.row,
          column = _this$select2.column;
      cb(Math.max(row, 1), Math.max(column, 1));
      this.hide();
    }
  }]);

  return TablePicker;
}(ui_baseFloat);

Object(defineProperty["a" /* default */])(tablePicker_TablePicker, "pluginName", 'tablePicker');

/* harmony default export */ var ui_tablePicker = (tablePicker_TablePicker);
// CONCATENATED MODULE: ./src/muya/lib/ui/baseScrollFloat/index.js










function baseScrollFloat_createSuper(Derived) { var hasNativeReflectConstruct = baseScrollFloat_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Object(getPrototypeOf["a" /* default */])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Object(getPrototypeOf["a" /* default */])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Object(possibleConstructorReturn["a" /* default */])(this, result); }; }

function baseScrollFloat_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }




var baseScrollFloat_BaseScrollFloat = /*#__PURE__*/function (_BaseFloat) {
  Object(inherits["a" /* default */])(BaseScrollFloat, _BaseFloat);

  var _super = baseScrollFloat_createSuper(BaseScrollFloat);

  function BaseScrollFloat(muya, name) {
    var _this;

    Object(classCallCheck["a" /* default */])(this, BaseScrollFloat);

    _this = _super.call(this, muya, name);
    _this.scrollElement = null;
    _this.reference = null;
    _this.activeItem = null;

    _this.createScrollElement();

    return _this;
  }

  Object(createClass["a" /* default */])(BaseScrollFloat, [{
    key: "createScrollElement",
    value: function createScrollElement() {
      var container = this.container;
      var scrollElement = document.createElement('div');
      container.appendChild(scrollElement);
      this.scrollElement = scrollElement;
    }
  }, {
    key: "activeEleScrollIntoView",
    value: function activeEleScrollIntoView(ele) {
      if (ele) {
        ele.scrollIntoView({
          behavior: 'auto'
        });
      }
    }
  }, {
    key: "listen",
    value: function listen() {
      var _this2 = this;

      Object(get["a" /* default */])(Object(getPrototypeOf["a" /* default */])(BaseScrollFloat.prototype), "listen", this).call(this);

      var _this$muya = this.muya,
          eventCenter = _this$muya.eventCenter,
          container = _this$muya.container;

      var handler = function handler(event) {
        if (!_this2.status) return;

        switch (event.key) {
          case EVENT_KEYS.ArrowUp:
            _this2.step('previous');

            break;

          case EVENT_KEYS.ArrowDown:
          case EVENT_KEYS.Tab:
            _this2.step('next');

            break;

          case EVENT_KEYS.Enter:
            _this2.selectItem(_this2.activeItem);

            break;

          default:
            break;
        }
      };

      eventCenter.attachDOMEvent(container, 'keydown', handler);
    }
  }, {
    key: "hide",
    value: function hide() {
      Object(get["a" /* default */])(Object(getPrototypeOf["a" /* default */])(BaseScrollFloat.prototype), "hide", this).call(this);

      this.reference = null;
    }
  }, {
    key: "show",
    value: function show(reference, cb) {
      this.cb = cb;

      if (reference instanceof HTMLElement) {
        if (this.reference && this.reference === reference && this.status) return;
      } else {
        if (this.reference && this.reference.id === reference.id && this.status) return;
      }

      this.reference = reference;

      Object(get["a" /* default */])(Object(getPrototypeOf["a" /* default */])(BaseScrollFloat.prototype), "show", this).call(this, reference, cb);
    }
  }, {
    key: "step",
    value: function step(direction) {
      var _this3 = this;

      var index = this.renderArray.findIndex(function (item) {
        return item === _this3.activeItem;
      });
      index = direction === 'next' ? index + 1 : index - 1;

      if (index < 0 || index >= this.renderArray.length) {
        return;
      }

      this.activeItem = this.renderArray[index];
      this.render();
      var activeEle = this.getItemElement(this.activeItem);
      this.activeEleScrollIntoView(activeEle);
    }
  }, {
    key: "selectItem",
    value: function selectItem(item) {
      var cb = this.cb;
      cb(item); // delay hide to avoid dispatch enter hander

      setTimeout(this.hide.bind(this));
    }
  }, {
    key: "getItemElement",
    value: function getItemElement() {}
  }]);

  return BaseScrollFloat;
}(ui_baseFloat);

/* harmony default export */ var baseScrollFloat = (baseScrollFloat_BaseScrollFloat);
// CONCATENATED MODULE: ./src/muya/lib/ui/quickInsert/config.js






















var COMMAND_KEY = isOsx ? '⌘' : '⌃'; // Command (or Cmd) ⌘
// Shift ⇧
// Option (or Alt) ⌥
// Control (or Ctrl) ⌃
// Caps Lock ⇪
// Fn
// Command (or Cmd) ⌘
// Shift ⇧
// Option (or Alt) ⌥
// Control (or Ctrl) ⌃
// Caps Lock ⇪
// Fn

var quicInsertObj = {
  'basic block': [{
    title: 'Paragraph',
    subTitle: 'Lorem Ipsum is simply dummy text',
    label: 'paragraph',
    shortCut: "".concat(COMMAND_KEY, "0"),
    icon: paragraph_2_default.a
  }, {
    title: 'Horizontal Line',
    subTitle: '---',
    label: 'hr',
    shortCut: "\u2325".concat(COMMAND_KEY, "-"),
    icon: horizontal_line_2_default.a
  }, {
    title: 'Front Matter',
    subTitle: '--- Lorem Ipsum ---',
    label: 'front-matter',
    shortCut: "\u2325".concat(COMMAND_KEY, "Y"),
    icon: front_matter_2_default.a
  }],
  'header': [{
    title: 'Header 1',
    subTitle: '# Lorem Ipsum is simply ...',
    label: 'heading 1',
    shortCut: "".concat(COMMAND_KEY, "1"),
    icon: heading_1_2_default.a
  }, {
    title: 'Header 2',
    subTitle: '## Lorem Ipsum is simply ...',
    label: 'heading 2',
    shortCut: "".concat(COMMAND_KEY, "2"),
    icon: heading_2_2_default.a
  }, {
    title: 'Header 3',
    subTitle: '### Lorem Ipsum is simply ...',
    label: 'heading 3',
    shortCut: "".concat(COMMAND_KEY, "3"),
    icon: heading_3_2_default.a
  }, {
    title: 'Header 4',
    subTitle: '#### Lorem Ipsum is simply ...',
    label: 'heading 4',
    shortCut: "".concat(COMMAND_KEY, "4"),
    icon: heading_4_2_default.a
  }, {
    title: 'Header 5',
    subTitle: '##### Lorem Ipsum is simply ...',
    label: 'heading 5',
    shortCut: "".concat(COMMAND_KEY, "5"),
    icon: heading_5_2_default.a
  }, {
    title: 'Header 6',
    subTitle: '###### Lorem Ipsum is simply ...',
    label: 'heading 6',
    shortCut: "".concat(COMMAND_KEY, "6"),
    icon: heading_6_2_default.a
  }],
  'advanced block': [{
    title: 'Table Block',
    subTitle: '|Lorem | Ipsum is simply |',
    label: 'table',
    shortCut: "".concat(COMMAND_KEY, "T"),
    icon: new_table_2_default.a
  }, {
    title: 'Math Formula',
    subTitle: '$$ Lorem Ipsum is simply $$',
    label: 'mathblock',
    shortCut: "\u2325".concat(COMMAND_KEY, "M"),
    icon: math_2_default.a
  }, {
    title: 'HTML Block',
    subTitle: '<div> Lorem Ipsum is simply </div>',
    label: 'html',
    shortCut: "\u2325".concat(COMMAND_KEY, "J"),
    icon: html_2_default.a
  }, {
    title: 'Code Block',
    subTitle: '```java Lorem Ipsum is simply ```',
    label: 'pre',
    shortCut: "\u2325".concat(COMMAND_KEY, "C"),
    icon: code_2_default.a
  }, {
    title: 'Quote Block',
    subTitle: '>Lorem Ipsum is simply ...',
    label: 'blockquote',
    shortCut: "\u2325".concat(COMMAND_KEY, "Q"),
    icon: quote_block_2_default.a
  }],
  'list block': [{
    title: 'Order List',
    subTitle: '1. Lorem Ipsum is simply ...',
    label: 'ol-order',
    shortCut: "\u2325".concat(COMMAND_KEY, "O"),
    icon: order_list_2_default.a
  }, {
    title: 'Bullet List',
    subTitle: '- Lorem Ipsum is simply ...',
    label: 'ul-bullet',
    shortCut: "\u2325".concat(COMMAND_KEY, "U"),
    icon: bullet_list_2_default.a
  }, {
    title: 'To-do List',
    subTitle: '- [x] Lorem Ipsum is simply ...',
    label: 'ul-task',
    shortCut: "\u2325".concat(COMMAND_KEY, "X"),
    icon: todolist_2_default.a
  }],
  'diagram': [{
    title: 'Vega Chart',
    subTitle: 'Render flow chart by vega-lite.js.',
    label: 'vega-lite',
    icon: chart_2_default.a
  }, {
    title: 'Flow Chart',
    subTitle: 'Render flow chart by flowchart.js.',
    label: 'flowchart',
    icon: flowchart_2_default.a
  }, {
    title: 'Sequence Diagram',
    subTitle: 'Render sequence diagram by js-sequence.',
    label: 'sequence',
    icon: sequence_2_default.a
  }, {
    title: 'Mermaid',
    subTitle: 'Render Diagram by mermaid.',
    label: 'mermaid',
    icon: mermaid_2_default.a
  }]
};
// EXTERNAL MODULE: ./src/muya/lib/ui/quickInsert/index.css
var quickInsert = __webpack_require__("44c1");

// CONCATENATED MODULE: ./src/muya/lib/ui/quickInsert/index.js




















function quickInsert_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = quickInsert_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function quickInsert_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return quickInsert_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return quickInsert_arrayLikeToArray(o, minLen); }

function quickInsert_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function quickInsert_createSuper(Derived) { var hasNativeReflectConstruct = quickInsert_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Object(getPrototypeOf["a" /* default */])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Object(getPrototypeOf["a" /* default */])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Object(possibleConstructorReturn["a" /* default */])(this, result); }; }

function quickInsert_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }








var quickInsert_QuickInsert = /*#__PURE__*/function (_BaseScrollFloat) {
  Object(inherits["a" /* default */])(QuickInsert, _BaseScrollFloat);

  var _super = quickInsert_createSuper(QuickInsert);

  function QuickInsert(muya) {
    var _this;

    Object(classCallCheck["a" /* default */])(this, QuickInsert);

    var name = 'ag-quick-insert';
    _this = _super.call(this, muya, name);
    _this.reference = null;
    _this.oldVnode = null;
    _this._renderObj = null;
    _this.renderArray = null;
    _this.activeItem = null;
    _this.block = null;
    _this.renderObj = quicInsertObj;

    _this.render();

    _this.listen();

    return _this;
  }

  Object(createClass["a" /* default */])(QuickInsert, [{
    key: "renderObj",
    set: function set(obj) {
      this._renderObj = obj;
      var renderArray = [];
      Object.keys(obj).forEach(function (key) {
        renderArray.push.apply(renderArray, Object(toConsumableArray["a" /* default */])(obj[key]));
      });
      this.renderArray = renderArray;

      if (this.renderArray.length > 0) {
        this.activeItem = this.renderArray[0];
        var activeEle = this.getItemElement(this.activeItem);
        this.activeEleScrollIntoView(activeEle);
      }
    }
  }, {
    key: "render",
    value: function render() {
      var _this2 = this;

      var scrollElement = this.scrollElement,
          activeItem = this.activeItem,
          _renderObj = this._renderObj;
      var children = Object.keys(_renderObj).filter(function (key) {
        return _renderObj[key].length !== 0;
      }).map(function (key) {
        var titleVnode = snabbdom_h('div.title', key.toUpperCase());
        var items = [];

        var _iterator = quickInsert_createForOfIteratorHelper(_renderObj[key]),
            _step;

        try {
          var _loop = function _loop() {
            var item = _step.value;
            var title = item.title,
                subTitle = item.subTitle,
                label = item.label,
                icon = item.icon,
                shortCut = item.shortCut;
            var iconVnode = snabbdom_h('div.icon-container', snabbdom_h('i.icon', snabbdom_h("i.icon-".concat(label.replace(/\s/g, '-')), {
              style: {
                background: "url(".concat(icon, ") no-repeat"),
                'background-size': '100%'
              }
            }, '')));
            var description = snabbdom_h('div.description', [snabbdom_h('div.big-title', title), snabbdom_h('div.sub-title', subTitle)]);
            var shortCutVnode = snabbdom_h('div.short-cut', [snabbdom_h('span', shortCut)]);
            var selector = activeItem.label === label ? 'div.item.active' : 'div.item';
            items.push(snabbdom_h(selector, {
              dataset: {
                label: label
              },
              on: {
                click: function click() {
                  _this2.selectItem(item);
                }
              }
            }, [iconVnode, description, shortCutVnode]));
          };

          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            _loop();
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }

        return snabbdom_h('section', [titleVnode].concat(items));
      });

      if (children.length === 0) {
        children = snabbdom_h('div.no-result', 'No result');
      }

      var vnode = snabbdom_h('div', children);

      if (this.oldVnode) {
        patch(this.oldVnode, vnode);
      } else {
        patch(scrollElement, vnode);
      }

      this.oldVnode = vnode;
    }
  }, {
    key: "listen",
    value: function listen() {
      var _this3 = this;

      Object(get["a" /* default */])(Object(getPrototypeOf["a" /* default */])(QuickInsert.prototype), "listen", this).call(this);

      var eventCenter = this.muya.eventCenter;
      eventCenter.subscribe('muya-quick-insert', function (reference, block, status) {
        if (status) {
          _this3.block = block;

          _this3.show(reference);

          _this3.search(block.text.substring(1)); // remove `@` char

        } else {
          _this3.hide();
        }
      });
    }
  }, {
    key: "search",
    value: function search(text) {
      var contentState = this.muya.contentState;
      var canInserFrontMatter = contentState.canInserFrontMatter(this.block);
      var obj = utils_deepCopy(quicInsertObj);

      if (!canInserFrontMatter) {
        obj['basic block'].splice(2, 1);
      }

      var result = obj;

      if (text !== '') {
        result = {};
        Object.keys(obj).forEach(function (key) {
          result[key] = Object(fuzzaldrin["filter"])(obj[key], text, {
            key: 'title'
          });
        });
      }

      this.renderObj = result;
      this.render();
    }
  }, {
    key: "selectItem",
    value: function selectItem(item) {
      var contentState = this.muya.contentState;
      this.block.text = '';
      var key = this.block.key;
      var offset = 0;
      contentState.cursor = {
        start: {
          key: key,
          offset: offset
        },
        end: {
          key: key,
          offset: offset
        }
      };

      switch (item.label) {
        case 'paragraph':
          contentState.partialRender();
          break;

        default:
          contentState.updateParagraph(item.label, true);
          break;
      } // delay hide to avoid dispatch enter hander


      setTimeout(this.hide.bind(this));
    }
  }, {
    key: "getItemElement",
    value: function getItemElement(item) {
      var label = item.label;
      return this.scrollElement.querySelector("[data-label=\"".concat(label, "\"]"));
    }
  }]);

  return QuickInsert;
}(baseScrollFloat);

Object(defineProperty["a" /* default */])(quickInsert_QuickInsert, "pluginName", 'quickInsert');

/* harmony default export */ var ui_quickInsert = (quickInsert_QuickInsert);
// EXTERNAL MODULE: ./node_modules/file-icons-js/css/style.css
var style = __webpack_require__("a152");

// EXTERNAL MODULE: ./node_modules/file-icons-js/index.js
var file_icons_js = __webpack_require__("965a");

// CONCATENATED MODULE: ./src/muya/lib/ui/fileIcons/index.js
// Because the sidebar also use the file icons, So I put this file out of floatBox directory.


/* harmony default export */ var fileIcons = (file_icons_js["default"]);
// EXTERNAL MODULE: ./src/muya/lib/ui/codePicker/index.css
var codePicker = __webpack_require__("a3d4");

// CONCATENATED MODULE: ./src/muya/lib/ui/codePicker/index.js

















function codePicker_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = codePicker_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function codePicker_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return codePicker_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return codePicker_arrayLikeToArray(o, minLen); }

function codePicker_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function codePicker_createSuper(Derived) { var hasNativeReflectConstruct = codePicker_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Object(getPrototypeOf["a" /* default */])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Object(getPrototypeOf["a" /* default */])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Object(possibleConstructorReturn["a" /* default */])(this, result); }; }

function codePicker_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }







var codePicker_CodePicker = /*#__PURE__*/function (_BaseScrollFloat) {
  Object(inherits["a" /* default */])(CodePicker, _BaseScrollFloat);

  var _super = codePicker_createSuper(CodePicker);

  function CodePicker(muya) {
    var _this;

    Object(classCallCheck["a" /* default */])(this, CodePicker);

    var name = 'ag-list-picker';
    _this = _super.call(this, muya, name);
    _this.renderArray = [];
    _this.oldVnode = null;
    _this.activeItem = null;

    _this.listen();

    return _this;
  }

  Object(createClass["a" /* default */])(CodePicker, [{
    key: "listen",
    value: function listen() {
      var _this2 = this;

      Object(get["a" /* default */])(Object(getPrototypeOf["a" /* default */])(CodePicker.prototype), "listen", this).call(this);

      var eventCenter = this.muya.eventCenter;
      eventCenter.subscribe('muya-code-picker', function (_ref) {
        var reference = _ref.reference,
            lang = _ref.lang,
            cb = _ref.cb;
        var modes = prism_search(lang);

        if (modes.length && reference) {
          _this2.show(reference, cb);

          _this2.renderArray = modes;
          _this2.activeItem = modes[0];

          _this2.render();
        } else {
          _this2.hide();
        }
      });
    }
  }, {
    key: "render",
    value: function render() {
      var _this3 = this;

      var renderArray = this.renderArray,
          oldVnode = this.oldVnode,
          scrollElement = this.scrollElement,
          activeItem = this.activeItem;
      var children = renderArray.map(function (item) {
        var iconClassNames;

        if (item.ext && Array.isArray(item.ext)) {
          var _iterator = codePicker_createForOfIteratorHelper(item.ext),
              _step;

          try {
            for (_iterator.s(); !(_step = _iterator.n()).done;) {
              var ext = _step.value;
              iconClassNames = fileIcons.getClassWithColor("fackname.".concat(ext));
              if (iconClassNames) break;
            }
          } catch (err) {
            _iterator.e(err);
          } finally {
            _iterator.f();
          }
        } else if (item.name) {
          iconClassNames = fileIcons.getClassWithColor(item.name);
        } // Because `markdown mode in Codemirror` don't have extensions.
        // if still can not get the className, add a common className 'atom-icon light-cyan'


        if (!iconClassNames) {
          iconClassNames = item.name === 'markdown' ? fileIcons.getClassWithColor('fackname.md') : 'atom-icon light-cyan';
        }

        var iconSelector = 'span' + iconClassNames.split(/\s/).map(function (s) {
          return ".".concat(s);
        }).join('');
        var icon = snabbdom_h('div.icon-wrapper', snabbdom_h(iconSelector));
        var text = snabbdom_h('div.language', item.name);
        var selector = activeItem === item ? 'li.item.active' : 'li.item';
        return snabbdom_h(selector, {
          dataset: {
            label: item.name
          },
          on: {
            click: function click() {
              _this3.selectItem(item);
            }
          }
        }, [icon, text]);
      });

      if (children.length === 0) {
        children = snabbdom_h('div.no-result', 'No result');
      }

      var vnode = snabbdom_h('ul', children);

      if (oldVnode) {
        patch(oldVnode, vnode);
      } else {
        patch(scrollElement, vnode);
      }

      this.oldVnode = vnode;
    }
  }, {
    key: "getItemElement",
    value: function getItemElement(item) {
      var name = item.name;
      return this.floatBox.querySelector("[data-label=\"".concat(name, "\"]"));
    }
  }]);

  return CodePicker;
}(baseScrollFloat);

Object(defineProperty["a" /* default */])(codePicker_CodePicker, "pluginName", 'codePicker');

/* harmony default export */ var ui_codePicker = (codePicker_CodePicker);
// EXTERNAL MODULE: ./src/muya/lib/ui/emojiPicker/index.css
var emojiPicker = __webpack_require__("43b5");

// CONCATENATED MODULE: ./src/muya/lib/ui/emojiPicker/index.js














function emojiPicker_createSuper(Derived) { var hasNativeReflectConstruct = emojiPicker_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Object(getPrototypeOf["a" /* default */])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Object(getPrototypeOf["a" /* default */])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Object(possibleConstructorReturn["a" /* default */])(this, result); }; }

function emojiPicker_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }






var emojiPicker_EmojiPicker = /*#__PURE__*/function (_BaseScrollFloat) {
  Object(inherits["a" /* default */])(EmojiPicker, _BaseScrollFloat);

  var _super = emojiPicker_createSuper(EmojiPicker);

  function EmojiPicker(muya) {
    var _this;

    Object(classCallCheck["a" /* default */])(this, EmojiPicker);

    var name = 'ag-emoji-picker';
    _this = _super.call(this, muya, name);
    _this._renderObj = null;
    _this.renderArray = null;
    _this.activeItem = null;
    _this.oldVnode = null;
    _this.emoji = new ui_emojis();

    _this.listen();

    return _this;
  }

  Object(createClass["a" /* default */])(EmojiPicker, [{
    key: "renderObj",
    set: function set(obj) {
      this._renderObj = obj;
      var renderArray = [];
      Object.keys(obj).forEach(function (key) {
        renderArray.push.apply(renderArray, Object(toConsumableArray["a" /* default */])(obj[key]));
      });
      this.renderArray = renderArray;

      if (this.renderArray.length > 0) {
        this.activeItem = this.renderArray[0];
        var activeEle = this.getItemElement(this.activeItem);
        this.activeEleScrollIntoView(activeEle);
      }
    }
  }, {
    key: "listen",
    value: function listen() {
      var _this2 = this;

      Object(get["a" /* default */])(Object(getPrototypeOf["a" /* default */])(EmojiPicker.prototype), "listen", this).call(this);

      var eventCenter = this.muya.eventCenter;
      eventCenter.subscribe('muya-emoji-picker', function (_ref) {
        var reference = _ref.reference,
            emojiNode = _ref.emojiNode;
        if (!emojiNode) return _this2.hide();
        var text = emojiNode.textContent.trim();

        if (text) {
          var renderObj = _this2.emoji.search(text);

          _this2.renderObj = renderObj;

          var cb = function cb(item) {
            _this2.muya.contentState.setEmoji(item);
          };

          if (_this2.renderArray.length) {
            _this2.show(reference, cb);

            _this2.render();
          } else {
            _this2.hide();
          }
        }
      });
    }
  }, {
    key: "render",
    value: function render() {
      var _this3 = this;

      var scrollElement = this.scrollElement,
          _renderObj = this._renderObj,
          activeItem = this.activeItem,
          oldVnode = this.oldVnode;
      var children = Object.keys(_renderObj).map(function (category) {
        var title = snabbdom_h('div.title', category);

        var emojis = _renderObj[category].map(function (e) {
          var selector = activeItem === e ? 'div.item.active' : 'div.item';
          return snabbdom_h(selector, {
            dataset: {
              label: e.aliases[0]
            },
            props: {
              title: e.description
            },
            on: {
              click: function click() {
                _this3.selectItem(e);
              }
            }
          }, snabbdom_h('span', e.emoji));
        });

        return snabbdom_h('section', [title, snabbdom_h('div.emoji-wrapper', emojis)]);
      });
      var vnode = snabbdom_h('div', children);

      if (oldVnode) {
        patch(oldVnode, vnode);
      } else {
        patch(scrollElement, vnode);
      }

      this.oldVnode = vnode;
    }
  }, {
    key: "getItemElement",
    value: function getItemElement(item) {
      var label = item.aliases[0];
      return this.floatBox.querySelector("[data-label=\"".concat(label, "\"]"));
    }
  }, {
    key: "destroy",
    value: function destroy() {
      Object(get["a" /* default */])(Object(getPrototypeOf["a" /* default */])(EmojiPicker.prototype), "destroy", this).call(this);

      this.emoji.destroy();
    }
  }]);

  return EmojiPicker;
}(baseScrollFloat);

Object(defineProperty["a" /* default */])(emojiPicker_EmojiPicker, "pluginName", 'emojiPicker');

/* harmony default export */ var ui_emojiPicker = (emojiPicker_EmojiPicker);
// CONCATENATED MODULE: ./src/muya/lib/assets/icons/folder.svg
/* harmony default export */ var folder = ({
      id: "folder-usage",
      viewBox: "0 0 1024 1024",
      url: "/" + "sprite.svg#folder-usage",
      toString: function () {
        return this.url;
      }
    });
// CONCATENATED MODULE: ./src/muya/lib/assets/icons/image.svg
/* harmony default export */ var icons_image = ({
      id: "image-usage",
      viewBox: "0 0 1024 1024",
      url: "/" + "sprite.svg#image-usage",
      toString: function () {
        return this.url;
      }
    });
// CONCATENATED MODULE: ./src/muya/lib/assets/icons/upload.svg
/* harmony default export */ var upload = ({
      id: "upload-usage",
      viewBox: "0 0 1024 1024",
      url: "/" + "sprite.svg#upload-usage",
      toString: function () {
        return this.url;
      }
    });
// EXTERNAL MODULE: ./src/muya/lib/ui/imagePicker/index.css
var imagePicker = __webpack_require__("d264");

// CONCATENATED MODULE: ./src/muya/lib/ui/imagePicker/index.js










function imagePicker_createSuper(Derived) { var hasNativeReflectConstruct = imagePicker_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Object(getPrototypeOf["a" /* default */])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Object(getPrototypeOf["a" /* default */])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Object(possibleConstructorReturn["a" /* default */])(this, result); }; }

function imagePicker_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }







var iconhash = {
  'icon-image': icons_image,
  'icon-folder': folder,
  'icon-upload': upload
};

var imagePicker_ImagePathPicker = /*#__PURE__*/function (_BaseScrollFloat) {
  Object(inherits["a" /* default */])(ImagePathPicker, _BaseScrollFloat);

  var _super = imagePicker_createSuper(ImagePathPicker);

  function ImagePathPicker(muya) {
    var _this;

    Object(classCallCheck["a" /* default */])(this, ImagePathPicker);

    var name = 'ag-list-picker';
    _this = _super.call(this, muya, name);
    _this.renderArray = [];
    _this.oldVnode = null;
    _this.activeItem = null;

    _this.floatBox.classList.add('ag-image-picker-wrapper');

    _this.listen();

    return _this;
  }

  Object(createClass["a" /* default */])(ImagePathPicker, [{
    key: "listen",
    value: function listen() {
      var _this2 = this;

      Object(get["a" /* default */])(Object(getPrototypeOf["a" /* default */])(ImagePathPicker.prototype), "listen", this).call(this);

      var eventCenter = this.muya.eventCenter;
      eventCenter.subscribe('muya-image-picker', function (_ref) {
        var reference = _ref.reference,
            list = _ref.list,
            cb = _ref.cb;

        if (list.length) {
          _this2.show(reference, cb);

          _this2.renderArray = list;
          _this2.activeItem = list[0];

          _this2.render();
        } else {
          _this2.hide();
        }
      });
    }
  }, {
    key: "render",
    value: function render() {
      var _this3 = this;

      var renderArray = this.renderArray,
          oldVnode = this.oldVnode,
          scrollElement = this.scrollElement,
          activeItem = this.activeItem;
      var children = renderArray.map(function (item) {
        var text = item.text,
            iconClass = item.iconClass;
        var icon = snabbdom_h('div.icon-wrapper', snabbdom_h('svg', {
          attrs: {
            viewBox: iconhash[iconClass].viewBox,
            'aria-hidden': 'true'
          },
          hook: {
            prepatch: function prepatch(oldvnode, vnode) {
              // cheat snabbdom that the pre block is changed!!!
              oldvnode.children = [];
              oldvnode.elm.innerHTML = '';
            }
          }
        }, snabbdom_h('use', {
          attrs: {
            'xlink:href': iconhash[iconClass].url
          }
        })));
        var textEle = snabbdom_h('div.language', text);
        var selector = activeItem === item ? 'li.item.active' : 'li.item';
        return snabbdom_h(selector, {
          dataset: {
            label: item.text
          },
          on: {
            click: function click() {
              _this3.selectItem(item);
            }
          }
        }, [icon, textEle]);
      });
      var vnode = snabbdom_h('ul', children);

      if (oldVnode) {
        patch(oldVnode, vnode);
      } else {
        patch(scrollElement, vnode);
      }

      this.oldVnode = vnode;
    }
  }, {
    key: "getItemElement",
    value: function getItemElement(item) {
      var text = item.text;
      return this.floatBox.querySelector("[data-label=\"".concat(text, "\"]"));
    }
  }]);

  return ImagePathPicker;
}(baseScrollFloat);

Object(defineProperty["a" /* default */])(imagePicker_ImagePathPicker, "pluginName", 'imagePathPicker');

/* harmony default export */ var ui_imagePicker = (imagePicker_ImagePathPicker);
// EXTERNAL MODULE: ./src/muya/lib/ui/imageSelector/index.css
var imageSelector = __webpack_require__("5a7a");

// CONCATENATED MODULE: ./src/muya/lib/ui/imageSelector/index.js













function imageSelector_createSuper(Derived) { var hasNativeReflectConstruct = imageSelector_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Object(getPrototypeOf["a" /* default */])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Object(getPrototypeOf["a" /* default */])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Object(possibleConstructorReturn["a" /* default */])(this, result); }; }

function imageSelector_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }








var imageSelector_ImageSelector = /*#__PURE__*/function (_BaseFloat) {
  Object(inherits["a" /* default */])(ImageSelector, _BaseFloat);

  var _super = imageSelector_createSuper(ImageSelector);

  function ImageSelector(muya) {
    var _this;

    Object(classCallCheck["a" /* default */])(this, ImageSelector);

    var name = 'ag-image-selector';
    var options = {
      placement: 'bottom-center',
      modifiers: {
        offset: {
          offset: '0, 0'
        }
      },
      showArrow: false
    };
    _this = _super.call(this, muya, name, options);
    _this.renderArray = [];
    _this.oldVnode = null;
    _this.imageInfo = null;
    _this.tab = 'link'; // select or link

    _this.isFullMode = false; // is show title and alt input

    _this.state = {
      alt: '',
      src: '',
      title: ''
    };
    var imageSelectorContainer = _this.imageSelectorContainer = document.createElement('div');

    _this.container.appendChild(imageSelectorContainer);

    _this.floatBox.classList.add('ag-image-selector-wrapper');

    _this.listen();

    return _this;
  }

  Object(createClass["a" /* default */])(ImageSelector, [{
    key: "listen",
    value: function listen() {
      var _this2 = this;

      Object(get["a" /* default */])(Object(getPrototypeOf["a" /* default */])(ImageSelector.prototype), "listen", this).call(this);

      var eventCenter = this.muya.eventCenter;
      eventCenter.subscribe('muya-image-selector', function (_ref) {
        var reference = _ref.reference,
            cb = _ref.cb,
            imageInfo = _ref.imageInfo;

        if (reference) {
          var _imageInfo$token = imageInfo.token,
              alt = _imageInfo$token.alt,
              backlash = _imageInfo$token.backlash,
              src = _imageInfo$token.src,
              title = _imageInfo$token.title;
          alt += encodeURI(backlash.first);
          Object.assign(_this2.state, {
            alt: alt,
            title: title,
            src: src
          });
          _this2.imageInfo = imageInfo;

          _this2.show(reference, cb);

          _this2.render(); // Auto focus and select all content of the `src.input` element.


          var input = _this2.imageSelectorContainer.querySelector('input.src');

          if (input) {
            input.focus();
            input.select();
          }
        } else {
          _this2.hide();
        }
      });
    }
  }, {
    key: "tabClick",
    value: function tabClick(event, tab) {
      var value = tab.value;
      this.tab = value;
      return this.render();
    }
  }, {
    key: "toggleMode",
    value: function toggleMode() {
      this.isFullMode = !this.isFullMode;
      return this.render();
    }
  }, {
    key: "inputHandler",
    value: function inputHandler(event, type) {
      var value = event.target.value;
      this.state[type] = value;
    }
  }, {
    key: "handleKeyDown",
    value: function handleKeyDown(event) {
      if (event.key === EVENT_KEYS.Enter) {
        event.stopPropagation();
        this.handleLinkButtonClick();
      }
    }
  }, {
    key: "srcInputKeyDown",
    value: function srcInputKeyDown(event) {
      var imagePathPicker = this.muya.imagePathPicker;

      if (!imagePathPicker.status) {
        if (event.key === EVENT_KEYS.Enter) {
          event.stopPropagation();
          this.handleLinkButtonClick();
        }

        return;
      }

      switch (event.key) {
        case EVENT_KEYS.ArrowUp:
          event.preventDefault();
          imagePathPicker.step('previous');
          break;

        case EVENT_KEYS.ArrowDown:
        case EVENT_KEYS.Tab:
          event.preventDefault();
          imagePathPicker.step('next');
          break;

        case EVENT_KEYS.Enter:
          event.preventDefault();
          imagePathPicker.selectItem(imagePathPicker.activeItem);
          break;

        default:
          break;
      }
    }
  }, {
    key: "handleKeyUp",
    value: function () {
      var _handleKeyUp = Object(asyncToGenerator["a" /* default */])( /*#__PURE__*/regeneratorRuntime.mark(function _callee(event) {
        var _this3 = this;

        var key, value, eventCenter, reference, cb, list;
        return regeneratorRuntime.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                key = event.key;

                if (!(key === EVENT_KEYS.ArrowUp || key === EVENT_KEYS.ArrowDown || key === EVENT_KEYS.Tab || key === EVENT_KEYS.Enter)) {
                  _context.next = 3;
                  break;
                }

                return _context.abrupt("return");

              case 3:
                value = event.target.value;
                eventCenter = this.muya.eventCenter;
                reference = this.imageSelectorContainer.querySelector('input.src');

                cb = function cb(item) {
                  var text = item.text;
                  var newValue = value.replace(/(\/)([^/]+)$/, function (m, p1, p2) {
                    return p1;
                  }) + text;
                  var len = newValue.length;
                  reference.value = newValue;
                  _this3.state.src = newValue;
                  reference.focus();
                  reference.setSelectionRange(len, len);
                };

                if (value) {
                  _context.next = 11;
                  break;
                }

                list = [];
                _context.next = 14;
                break;

              case 11:
                _context.next = 13;
                return this.muya.options.imagePathAutoComplete(value);

              case 13:
                list = _context.sent;

              case 14:
                eventCenter.dispatch('muya-image-picker', {
                  reference: reference,
                  list: list,
                  cb: cb
                });

              case 15:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function handleKeyUp(_x) {
        return _handleKeyUp.apply(this, arguments);
      }

      return handleKeyUp;
    }()
  }, {
    key: "handleLinkButtonClick",
    value: function handleLinkButtonClick() {
      return this.replaceImageAsync(this.state);
    }
  }, {
    key: "replaceImageAsync",
    value: function () {
      var _replaceImageAsync = Object(asyncToGenerator["a" /* default */])( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(_ref2) {
        var alt, src, title, _this$imageInfo$token, oldAlt, oldSrc, oldTitle, id, nSrc, _getImageSrc, localPath, imageWrapper, imageInfo;

        return regeneratorRuntime.wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                alt = _ref2.alt, src = _ref2.src, title = _ref2.title;

                if (!(!this.muya.options.imageAction || URL_REG.test(src))) {
                  _context2.next = 7;
                  break;
                }

                _this$imageInfo$token = this.imageInfo.token, oldAlt = _this$imageInfo$token.alt, oldSrc = _this$imageInfo$token.src, oldTitle = _this$imageInfo$token.title;

                if (alt !== oldAlt || src !== oldSrc || title !== oldTitle) {
                  this.muya.contentState.replaceImage(this.imageInfo, {
                    alt: alt,
                    src: src,
                    title: title
                  });
                }

                this.hide();
                _context2.next = 21;
                break;

              case 7:
                if (!src) {
                  _context2.next = 20;
                  break;
                }

                id = "loading-".concat(getUniqueId());
                this.muya.contentState.replaceImage(this.imageInfo, {
                  alt: id,
                  src: src,
                  title: title
                });
                this.hide();
                _context2.next = 13;
                return this.muya.options.imageAction(src);

              case 13:
                nSrc = _context2.sent;
                _getImageSrc = utils_getImageInfo(src), localPath = _getImageSrc.src;

                if (localPath) {
                  this.muya.contentState.stateRender.urlMap.set(nSrc, localPath);
                }

                imageWrapper = this.muya.container.querySelector("span[data-id=".concat(id, "]"));

                if (imageWrapper) {
                  imageInfo = getImageInfo_getImageInfo(imageWrapper);
                  this.muya.contentState.replaceImage(imageInfo, {
                    alt: alt,
                    src: nSrc,
                    title: title
                  });
                }

                _context2.next = 21;
                break;

              case 20:
                this.hide();

              case 21:
                this.muya.eventCenter.dispatch('stateChange');

              case 22:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function replaceImageAsync(_x2) {
        return _replaceImageAsync.apply(this, arguments);
      }

      return replaceImageAsync;
    }()
  }, {
    key: "handleSelectButtonClick",
    value: function () {
      var _handleSelectButtonClick = Object(asyncToGenerator["a" /* default */])( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {
        var path, _this$state, alt, title;

        return regeneratorRuntime.wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                if (this.muya.options.imagePathPicker) {
                  _context3.next = 3;
                  break;
                }

                console.warn('You need to add a imagePathPicker option');
                return _context3.abrupt("return");

              case 3:
                _context3.next = 5;
                return this.muya.options.imagePathPicker();

              case 5:
                path = _context3.sent;
                _this$state = this.state, alt = _this$state.alt, title = _this$state.title;
                return _context3.abrupt("return", this.replaceImageAsync({
                  alt: alt,
                  title: title,
                  src: path
                }));

              case 8:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3, this);
      }));

      function handleSelectButtonClick() {
        return _handleSelectButtonClick.apply(this, arguments);
      }

      return handleSelectButtonClick;
    }()
  }, {
    key: "renderHeader",
    value: function renderHeader() {
      var _this4 = this;

      var tabs = [{
        label: 'Select',
        value: 'select'
      }, {
        label: 'Embed link',
        value: 'link'
      }];
      var children = tabs.map(function (tab) {
        var itemSelector = _this4.tab === tab.value ? 'li.active' : 'li';
        return snabbdom_h(itemSelector, snabbdom_h('span', {
          on: {
            click: function click(event) {
              _this4.tabClick(event, tab);
            }
          }
        }, tab.label));
      });
      return snabbdom_h('ul.header', children);
    }
  }, {
    key: "renderBody",
    value: function renderBody() {
      var _this5 = this;

      var tab = this.tab,
          state = this.state,
          isFullMode = this.isFullMode;
      var alt = state.alt,
          title = state.title,
          src = state.src;
      var bodyContent = null;

      if (tab === 'select') {
        bodyContent = [snabbdom_h('button.muya-button.role-button.select', {
          on: {
            click: function click(event) {
              _this5.handleSelectButtonClick();
            }
          }
        }, 'Choose an Image'), snabbdom_h('span.description', 'Choose image from you computer.')];
      } else {
        var altInput = snabbdom_h('input.alt', {
          props: {
            placeholder: 'Alt text',
            value: alt
          },
          on: {
            input: function input(event) {
              _this5.inputHandler(event, 'alt');
            },
            paste: function paste(event) {
              _this5.inputHandler(event, 'alt');
            },
            keydown: function keydown(event) {
              _this5.handleKeyDown(event);
            }
          }
        });
        var srcInput = snabbdom_h('input.src', {
          props: {
            placeholder: 'Image link or local path',
            value: src
          },
          on: {
            input: function input(event) {
              _this5.inputHandler(event, 'src');
            },
            paste: function paste(event) {
              _this5.inputHandler(event, 'src');
            },
            keydown: function keydown(event) {
              _this5.srcInputKeyDown(event);
            },
            keyup: function keyup(event) {
              _this5.handleKeyUp(event);
            }
          }
        });
        var titleInput = snabbdom_h('input.title', {
          props: {
            placeholder: 'Image title',
            value: title
          },
          on: {
            input: function input(event) {
              _this5.inputHandler(event, 'title');
            },
            paste: function paste(event) {
              _this5.inputHandler(event, 'title');
            },
            keydown: function keydown(event) {
              _this5.handleKeyDown(event);
            }
          }
        });
        var inputWrapper = isFullMode ? snabbdom_h('div.input-container', [altInput, srcInput, titleInput]) : snabbdom_h('div.input-container', [srcInput]);
        var embedButton = snabbdom_h('button.muya-button.role-button.link', {
          on: {
            click: function click(event) {
              _this5.handleLinkButtonClick();
            }
          }
        }, 'Embed Image');
        var bottomDes = snabbdom_h('span.description', [snabbdom_h('span', 'Paste web image or local image path, '), snabbdom_h('a', {
          on: {
            click: function click(event) {
              _this5.toggleMode();
            }
          }
        }, "".concat(isFullMode ? 'simple mode' : 'full mode'))]);
        bodyContent = [inputWrapper, embedButton, bottomDes];
      }

      return snabbdom_h('div.image-select-body', bodyContent);
    }
  }, {
    key: "render",
    value: function render() {
      var oldVnode = this.oldVnode,
          imageSelectorContainer = this.imageSelectorContainer;
      var selector = 'div';
      var vnode = snabbdom_h(selector, [this.renderHeader(), this.renderBody()]);

      if (oldVnode) {
        patch(oldVnode, vnode);
      } else {
        patch(imageSelectorContainer, vnode);
      }

      this.oldVnode = vnode;
    }
  }]);

  return ImageSelector;
}(ui_baseFloat);

Object(defineProperty["a" /* default */])(imageSelector_ImageSelector, "pluginName", 'imageSelector');

/* harmony default export */ var ui_imageSelector = (imageSelector_ImageSelector);
// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/format_strong/2.png
var format_strong_2 = __webpack_require__("4cbd");
var format_strong_2_default = /*#__PURE__*/__webpack_require__.n(format_strong_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/format_emphasis/2.png
var format_emphasis_2 = __webpack_require__("5d83");
var format_emphasis_2_default = /*#__PURE__*/__webpack_require__.n(format_emphasis_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/format_underline/2.png
var format_underline_2 = __webpack_require__("188e");
var format_underline_2_default = /*#__PURE__*/__webpack_require__.n(format_underline_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/format_image/2.png
var format_image_2 = __webpack_require__("92a7");
var format_image_2_default = /*#__PURE__*/__webpack_require__.n(format_image_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/format_link/2.png
var format_link_2 = __webpack_require__("2ffe");
var format_link_2_default = /*#__PURE__*/__webpack_require__.n(format_link_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/format_strike/2.png
var format_strike_2 = __webpack_require__("a30a");
var format_strike_2_default = /*#__PURE__*/__webpack_require__.n(format_strike_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/format_math/2.png
var format_math_2 = __webpack_require__("03fc");
var format_math_2_default = /*#__PURE__*/__webpack_require__.n(format_math_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/format_clear/2.png
var format_clear_2 = __webpack_require__("448d");
var format_clear_2_default = /*#__PURE__*/__webpack_require__.n(format_clear_2);

// CONCATENATED MODULE: ./src/muya/lib/ui/formatPicker/config.js









var config_icons = [{
  type: 'strong',
  icon: format_strong_2_default.a
}, {
  type: 'em',
  icon: format_emphasis_2_default.a
}, {
  type: 'u',
  icon: format_underline_2_default.a
}, {
  type: 'del',
  icon: format_strike_2_default.a
}, {
  type: 'inline_code',
  icon: code_2_default.a
}, {
  type: 'inline_math',
  icon: format_math_2_default.a
}, {
  type: 'link',
  icon: format_link_2_default.a
}, {
  type: 'image',
  icon: format_image_2_default.a
}, {
  type: 'clear',
  icon: format_clear_2_default.a
}];
/* harmony default export */ var config = (config_icons);
// EXTERNAL MODULE: ./src/muya/lib/ui/formatPicker/index.css
var formatPicker = __webpack_require__("24e1");

// CONCATENATED MODULE: ./src/muya/lib/ui/formatPicker/index.js










function formatPicker_createSuper(Derived) { var hasNativeReflectConstruct = formatPicker_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Object(getPrototypeOf["a" /* default */])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Object(getPrototypeOf["a" /* default */])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Object(possibleConstructorReturn["a" /* default */])(this, result); }; }

function formatPicker_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }





var formatPicker_defaultOptions = {
  placement: 'top',
  modifiers: {
    offset: {
      offset: '20, 5'
    }
  },
  showArrow: false
};

var formatPicker_FormatPicker = /*#__PURE__*/function (_BaseFloat) {
  Object(inherits["a" /* default */])(FormatPicker, _BaseFloat);

  var _super = formatPicker_createSuper(FormatPicker);

  function FormatPicker(muya) {
    var _this;

    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    Object(classCallCheck["a" /* default */])(this, FormatPicker);

    var name = 'ag-format-picker';
    var opts = Object.assign({}, formatPicker_defaultOptions, options);
    _this = _super.call(this, muya, name, opts);
    _this.oldVnode = null;
    _this.formats = null;
    _this.options = opts;
    _this.icons = config;
    var formatContainer = _this.formatContainer = document.createElement('div');

    _this.container.appendChild(formatContainer);

    _this.listen();

    return _this;
  }

  Object(createClass["a" /* default */])(FormatPicker, [{
    key: "listen",
    value: function listen() {
      var _this2 = this;

      var eventCenter = this.muya.eventCenter;

      Object(get["a" /* default */])(Object(getPrototypeOf["a" /* default */])(FormatPicker.prototype), "listen", this).call(this);

      eventCenter.subscribe('muya-format-picker', function (_ref) {
        var reference = _ref.reference,
            formats = _ref.formats;

        if (reference) {
          _this2.formats = formats;
          setTimeout(function () {
            _this2.show(reference);

            _this2.render();
          }, 0);
        } else {
          _this2.hide();
        }
      });
    }
  }, {
    key: "render",
    value: function render() {
      var _this3 = this;

      var icons = this.icons,
          oldVnode = this.oldVnode,
          formatContainer = this.formatContainer,
          formats = this.formats;
      var children = icons.map(function (i) {
        var icon;
        var iconWrapperSelector;

        if (i.icon) {
          // SVG icon Asset
          iconWrapperSelector = 'div.icon-wrapper';
          icon = snabbdom_h('i.icon', snabbdom_h("i.icon-inner", {
            style: {
              background: "url(".concat(i.icon, ") no-repeat"),
              'background-size': '100%'
            }
          }, ''));
        }

        var iconWrapper = snabbdom_h(iconWrapperSelector, icon);
        var itemSelector = "li.item.".concat(i.type);

        if (formats.some(function (f) {
          return f.type === i.type || f.type === 'html_tag' && f.tag === i.type;
        })) {
          itemSelector += '.active';
        }

        return snabbdom_h(itemSelector, {
          on: {
            click: function click(event) {
              _this3.selectItem(event, i);
            }
          }
        }, iconWrapper);
      });
      var vnode = snabbdom_h('ul', children);

      if (oldVnode) {
        patch(oldVnode, vnode);
      } else {
        patch(formatContainer, vnode);
      }

      this.oldVnode = vnode;
    }
  }, {
    key: "selectItem",
    value: function selectItem(event, item) {
      event.preventDefault();
      event.stopPropagation();
      var contentState = this.muya.contentState;
      contentState.render();
      contentState.format(item.type);

      if (/link|image/.test(item.type)) {
        this.hide();
      } else {
        var _contentState$selecti = contentState.selectionFormats(),
            formats = _contentState$selecti.formats;

        this.formats = formats;
        this.render();
      }
    }
  }]);

  return FormatPicker;
}(ui_baseFloat);

Object(defineProperty["a" /* default */])(formatPicker_FormatPicker, "pluginName", 'formatPicker');

/* harmony default export */ var ui_formatPicker = (formatPicker_FormatPicker);
// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/copy/2.png
var copy_2 = __webpack_require__("e232");
var copy_2_default = /*#__PURE__*/__webpack_require__.n(copy_2);

// EXTERNAL MODULE: ./src/muya/lib/assets/pngicon/turninto/2.png
var turninto_2 = __webpack_require__("58fe");
var turninto_2_default = /*#__PURE__*/__webpack_require__.n(turninto_2);

// CONCATENATED MODULE: ./src/muya/lib/ui/frontMenu/config.js









var wholeSubMenu = Object.keys(quicInsertObj).reduce(function (acc, key) {
  var items = quicInsertObj[key];
  return [].concat(Object(toConsumableArray["a" /* default */])(acc), Object(toConsumableArray["a" /* default */])(items));
}, []);
var config_COMMAND_KEY = isOsx ? '⌘' : '⌃';
var menu = [{
  icon: copy_2_default.a,
  label: 'duplicate',
  text: 'Duplicate',
  shortCut: "\u21E7".concat(config_COMMAND_KEY, "P")
}, {
  icon: turninto_2_default.a,
  label: 'turnInto',
  text: 'Turn Into'
}, {
  icon: paragraph_2_default.a,
  label: 'new',
  text: 'Create Paragraph',
  shortCut: "\u21E7".concat(config_COMMAND_KEY, "N")
}, {
  icon: delete_2x_default.a,
  label: 'delete',
  text: 'Delete',
  shortCut: "\u21E7".concat(config_COMMAND_KEY, "D")
}];
var getLabel = function getLabel(block) {
  var type = block.type,
      functionType = block.functionType,
      listType = block.listType;
  var label = '';

  switch (type) {
    case 'p':
      {
        label = 'paragraph';
        break;
      }

    case 'figure':
      {
        if (functionType === 'table') {
          label = 'table';
        } else if (functionType === 'html') {
          label = 'html';
        } else if (functionType === 'multiplemath') {
          label = 'mathblock';
        }

        break;
      }

    case 'pre':
      {
        if (functionType === 'fencecode' || functionType === 'indentcode') {
          label = 'pre';
        } else if (functionType === 'frontmatter') {
          label = 'front-matter';
        }

        break;
      }

    case 'ul':
      {
        if (listType === 'task') {
          label = 'ul-task';
        } else {
          label = 'ul-bullet';
        }

        break;
      }

    case 'ol':
      {
        label = 'ol-order';
        break;
      }

    case 'blockquote':
      {
        label = 'blockquote';
        break;
      }

    case 'h1':
      {
        label = 'heading 1';
        break;
      }

    case 'h2':
      {
        label = 'heading 2';
        break;
      }

    case 'h3':
      {
        label = 'heading 3';
        break;
      }

    case 'h4':
      {
        label = 'heading 4';
        break;
      }

    case 'h5':
      {
        label = 'heading 5';
        break;
      }

    case 'h6':
      {
        label = 'heading 6';
        break;
      }

    case 'hr':
      {
        label = 'hr';
        break;
      }

    default:
      label = 'paragraph';
      break;
  }

  return label;
};
var getSubMenu = function getSubMenu(block, startBlock, endBlock) {
  var type = block.type;

  switch (type) {
    case 'p':
      {
        return wholeSubMenu.filter(function (menuItem) {
          var REG_EXP = startBlock.key === endBlock.key ? /front-matter|hr|table/ : /front-matter|hr|table|heading/;
          return !REG_EXP.test(menuItem.label);
        });
      }

    case 'h1':
    case 'h2':
    case 'h3':
    case 'h4':
    case 'h5':
    case 'h6':
      {
        return wholeSubMenu.filter(function (menuItem) {
          return /heading|paragraph/.test(menuItem.label);
        });
      }

    case 'ul':
    case 'ol':
      {
        return wholeSubMenu.filter(function (menuItem) {
          return /ul|ol/.test(menuItem.label);
        });
      }

    default:
      return [];
  }
};
// EXTERNAL MODULE: ./src/muya/lib/ui/frontMenu/index.css
var frontMenu = __webpack_require__("74b6");

// CONCATENATED MODULE: ./src/muya/lib/ui/frontMenu/index.js











function frontMenu_createSuper(Derived) { var hasNativeReflectConstruct = frontMenu_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Object(getPrototypeOf["a" /* default */])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Object(getPrototypeOf["a" /* default */])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Object(possibleConstructorReturn["a" /* default */])(this, result); }; }

function frontMenu_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }





var MAX_SUBMENU_HEIGHT = 400;
var ITEM_HEIGHT = 36;
var PADDING = 10;
var frontMenu_defaultOptions = {
  placement: 'left',
  modifiers: {
    offset: {
      offset: '20, 20'
    }
  },
  showArrow: false
};

var frontMenu_FrontMenu = /*#__PURE__*/function (_BaseFloat) {
  Object(inherits["a" /* default */])(FrontMenu, _BaseFloat);

  var _super = frontMenu_createSuper(FrontMenu);

  function FrontMenu(muya) {
    var _this;

    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    Object(classCallCheck["a" /* default */])(this, FrontMenu);

    var name = 'ag-front-menu';
    var opts = Object.assign({}, frontMenu_defaultOptions, options);
    _this = _super.call(this, muya, name, opts);
    _this.oldVnode = null;
    _this.outmostBlock = null;
    _this.startBlock = null;
    _this.endBlock = null;
    _this.options = opts;
    _this.reference = null;
    var frontMenuContainer = _this.frontMenuContainer = document.createElement('div');
    Object.assign(_this.container.parentNode.style, {
      overflow: 'visible'
    });

    _this.container.appendChild(frontMenuContainer);

    _this.listen();

    return _this;
  }

  Object(createClass["a" /* default */])(FrontMenu, [{
    key: "listen",
    value: function listen() {
      var _this2 = this;

      var eventCenter = this.muya.eventCenter;

      Object(get["a" /* default */])(Object(getPrototypeOf["a" /* default */])(FrontMenu.prototype), "listen", this).call(this);

      eventCenter.subscribe('muya-front-menu', function (_ref) {
        var reference = _ref.reference,
            outmostBlock = _ref.outmostBlock,
            startBlock = _ref.startBlock,
            endBlock = _ref.endBlock;

        if (reference) {
          _this2.outmostBlock = outmostBlock;
          _this2.startBlock = startBlock;
          _this2.endBlock = endBlock;
          _this2.reference = reference;
          setTimeout(function () {
            _this2.show(reference);

            _this2.render();
          }, 0);
        } else {
          _this2.hide();

          _this2.reference = null;
        }
      });
    }
  }, {
    key: "renderSubMenu",
    value: function renderSubMenu(subMenu) {
      var _this3 = this;

      var reference = this.reference;
      var rect = reference.getBoundingClientRect();
      var windowHeight = document.documentElement.clientHeight;
      var children = subMenu.map(function (menuItem) {
        var icon = menuItem.icon,
            title = menuItem.title,
            label = menuItem.label,
            shortCut = menuItem.shortCut;
        var iconWrapperSelector = 'div.icon-wrapper';
        var iconWrapper = snabbdom_h(iconWrapperSelector, snabbdom_h('i.icon', snabbdom_h("i.icon-".concat(label.replace(/\s/g, '-')), {
          style: {
            background: "url(".concat(icon, ") no-repeat"),
            'background-size': '100%'
          }
        }, '')));
        var textWrapper = snabbdom_h('span', title);
        var shortCutWrapper = snabbdom_h('div.short-cut', [snabbdom_h('span', shortCut)]);
        var itemSelector = "li.item.".concat(label);

        if (label === getLabel(_this3.outmostBlock)) {
          itemSelector += ".active";
        }

        return snabbdom_h(itemSelector, {
          on: {
            click: function click(event) {
              _this3.selectItem(event, {
                label: label
              });
            }
          }
        }, [iconWrapper, textWrapper, shortCutWrapper]);
      });
      var subMenuSelector = 'div.submenu';

      if (windowHeight - rect.bottom < MAX_SUBMENU_HEIGHT - (ITEM_HEIGHT + PADDING)) {
        subMenuSelector += '.align-bottom';
      }

      return snabbdom_h(subMenuSelector, snabbdom_h('ul', children));
    }
  }, {
    key: "render",
    value: function render() {
      var _this4 = this;

      var oldVnode = this.oldVnode,
          frontMenuContainer = this.frontMenuContainer,
          outmostBlock = this.outmostBlock,
          startBlock = this.startBlock,
          endBlock = this.endBlock;
      var type = outmostBlock.type,
          functionType = outmostBlock.functionType;
      var children = menu.map(function (_ref2) {
        var icon = _ref2.icon,
            label = _ref2.label,
            text = _ref2.text,
            shortCut = _ref2.shortCut;
        var subMenu = getSubMenu(outmostBlock, startBlock, endBlock);
        var iconWrapperSelector = 'div.icon-wrapper';
        var iconWrapper = snabbdom_h(iconWrapperSelector, snabbdom_h('i.icon', snabbdom_h("i.icon-".concat(label.replace(/\s/g, '-')), {
          style: {
            background: "url(".concat(icon, ") no-repeat"),
            'background-size': '100%'
          }
        }, '')));
        var textWrapper = snabbdom_h('span', text);
        var shortCutWrapper = snabbdom_h('div.short-cut', [snabbdom_h('span', shortCut)]);
        var itemSelector = "li.item.".concat(label);
        var itemChildren = [iconWrapper, textWrapper, shortCutWrapper];

        if (label === 'turnInto' && subMenu.length !== 0) {
          itemChildren.push(_this4.renderSubMenu(subMenu));
        }

        if (label === 'turnInto' && subMenu.length === 0) {
          itemSelector += ".disabled";
        } // front matter can not be duplicated.


        if (label === 'duplicate' && type === 'pre' && functionType === 'frontmatter') {
          itemSelector += ".disabled";
        }

        return snabbdom_h(itemSelector, {
          on: {
            click: function click(event) {
              _this4.selectItem(event, {
                label: label
              });
            }
          }
        }, itemChildren);
      });
      var vnode = snabbdom_h('ul', children);

      if (oldVnode) {
        patch(oldVnode, vnode);
      } else {
        patch(frontMenuContainer, vnode);
      }

      this.oldVnode = vnode;
    }
  }, {
    key: "selectItem",
    value: function selectItem(event, _ref3) {
      var label = _ref3.label;
      event.preventDefault();
      event.stopPropagation();
      var _this$outmostBlock = this.outmostBlock,
          type = _this$outmostBlock.type,
          functionType = _this$outmostBlock.functionType; // front matter can not be duplicated.

      if (label === 'duplicate' && type === 'pre' && functionType === 'frontmatter') {
        return;
      }

      var contentState = this.muya.contentState;
      contentState.selectedBlock = null;

      switch (label) {
        case 'duplicate':
          {
            contentState.duplicate();
            break;
          }

        case 'delete':
          {
            contentState.deleteParagraph();
            break;
          }

        case 'new':
          {
            contentState.insertParagraph('after', '', true);
            break;
          }

        case 'turnInto':
          // do nothing, do not hide float box.
          return;

        default:
          contentState.updateParagraph(label);
          break;
      } // delay hide to avoid dispatch enter hander


      setTimeout(this.hide.bind(this));
    }
  }]);

  return FrontMenu;
}(ui_baseFloat);

Object(defineProperty["a" /* default */])(frontMenu_FrontMenu, "pluginName", 'frontMenu');

/* harmony default export */ var ui_frontMenu = (frontMenu_FrontMenu);
// EXTERNAL MODULE: ./src/muya/themes/default.css
var themes_default = __webpack_require__("d5fe");

// EXTERNAL MODULE: ./src/assets/index.css
var assets = __webpack_require__("d940");

// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js??ref--12-0!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./src/App.vue?vue&type=script&lang=js&

//
//
//
//
//
//











/* harmony default export */ var Appvue_type_script_lang_js_ = ({
  name: 'app',
  created: function created() {
    var _this = this;

    this.$nextTick(function () {
      var ele = _this.$refs.editor;
      lib.use(ui_tablePicker);
      lib.use(ui_quickInsert);
      lib.use(ui_codePicker);
      lib.use(ui_emojiPicker);
      lib.use(ui_imagePicker);
      lib.use(ui_imageSelector);
      lib.use(ui_formatPicker);
      lib.use(ui_frontMenu);
      _this.editor = new lib(ele, {
        markdown: 'Welcome to use muya...'
      });

      _this.editor.on('change', function (changes) {
        console.log(changes);

        var content = _this.getContent();

        window.webkit.messageHandlers.TextContentDidChange.postMessage(content);
      });

      _this.init();

      window.webkit.messageHandlers.EditorIsReady.postMessage(null);
    });
  },
  methods: {
    init: function init() {
      var that = this; //声明全局函数

      window.GetContent = function () {
        return that.editor.getMarkdown();
      };

      window.SetContent = function (content) {
        var text = that.getStringFromHex(content);
        that.editor.setMarkdown(text);
      };

      window.geteditor = function () {
        console.log("geteditor...");
        console.log(that.editor); //在全局函数里面调用当前实例的函数方法
      };
    },
    getContent: function getContent() {
      return this.editor.getMarkdown();
    },
    getStringFromHex: function getStringFromHex(content) {
      return decodeURIComponent(content.replace(/\s+/g, '').replace(/[0-9a-f]{2}/g, '%$&'));
    }
  }
});
// CONCATENATED MODULE: ./src/App.vue?vue&type=script&lang=js&
 /* harmony default export */ var src_Appvue_type_script_lang_js_ = (Appvue_type_script_lang_js_); 
// EXTERNAL MODULE: ./src/App.vue?vue&type=style&index=0&lang=css&
var Appvue_type_style_index_0_lang_css_ = __webpack_require__("034f");

// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js
var componentNormalizer = __webpack_require__("2877");

// CONCATENATED MODULE: ./src/App.vue






/* normalize component */

var component = Object(componentNormalizer["a" /* default */])(
  src_Appvue_type_script_lang_js_,
  Appvue_type_template_id_c9252176_render,
  staticRenderFns,
  false,
  null,
  null,
  null
  
)

/* harmony default export */ var App = (component.exports);
// CONCATENATED MODULE: ./src/main.js






vue_runtime_esm["a" /* default */].config.productionTip = false;
new vue_runtime_esm["a" /* default */]({
  render: function render(h) {
    return h(App);
  }
}).$mount('#app');

/***/ }),

/***/ "58fe":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAABV1JREFUWAntWGtsFFUUvmdmtmtL1whufdTGNsH4ikKMKTWi7UpiwGokRqxgiUkT/pBSrPYB0kKXlhYLFLCtmkqMQWiMjYlaQ6oErEIo2oY/lvgHDAWaCkITQ190OzPXc7bO9s7szs62XdEfnWRzzz33PL45955zzyxjc89cBP7bCMBM3be1tcknu8+u4KC9xDk8gXbSgfP5nMEEMD7AAAYY478xWW73Jkqdfr8/MBNf0wZYUlKRflOS1jFdL0CH98XiFBjc4MBak0Cp3r3bfyUWHUNGNginkWOYBoe1tzXGvmacL0P52510hHU30pkq09cveTrntqzVq7q6OzrQlPMTUwSLt9Teq46PHuSMPe9s0lkCnf6cKLleiSWajgCLyioX6px1YdTusrrGrfuLAT/MJDiucKWPzWN9dzCmXhtnqRDQFwLTX8StXYnRTwvTBehnMuQ219f0WtfEeVSAmzfvnD+kjpxGcA+JSpgAfyKvPMXj+gIP/03TmmVCyfRTT28BJtB2BJoqLgOCTAQlM1okbQG2tLS4es9dPopGfWajrENOSCp4v67iqsh3osvL6z2j2tBhzvjLoixtN6Tf7WvauHFc5Bu0bZJkPLK4nHO2zhCkEY193NxQu+aXkz+MiPxY6FOnjgVyly9rGwvwBSifJeiksRujvLvrRKfAC5FSiLISHB4UWbgdR70eV6HImy6Nx0H3epRiPLvtZl3+TlmZ/x4zb3JmCxAL7gGM2BiJocEzkKy8hg7USEamwyOQSbJnLb4wFvLJB3dq3ihXtxlzcbQ9gyRU9G5dij4x9kBKstwTD3Ci48KyrVTsDxg8KuYY3RT0Y7pxogI0lP+NkbL7RPevfWIJAkVe0Vxf/b3oL+IWbyjd+gb9RMF403l5eRpw9o3JrqaZMpzWwgBuKK30c6630o9ok4E4TziTjphNwqPmebByTLEmwfGqKQ4KAGxv3rPDL/JmSxeVVK7CevgZXp2JkWxRcuKZfLOpYceXoQhGAkfKeEaq4h1JDpBgBy7oE4GTDNHBQk3nDYE0EsPm8WUt9Z3DYhr13rTRDWOTnaylOZSgvrBFZPyza020Fowg3pMBCmskYeIFQ44ydusz4dOxISBWXeuRorcwPbidnRhNn8EEJuc2N1R3GPN4j+LRsoIjX6EzOOUY23ThoZZJmMadnIyklA8g5UdKxvAIbtq2nKvadwYSfKv+7CWLMqhuGbxbOYZFkD5w6NoxQOB2p1E/Z8xv9RgWQQJQWFr5IdaX9QYYjOJAkuR5eNeuTUMGbzYj3rfS4Ii2Fjv1BcyVeOiDnVsG7eyFRZAE6esLgIV6PoxiKjWbZNjOUKx8uoOvD6utuq4fZFzfB4HR49F0IzqcbMFhr6hInfC14Yl9swGJLwrYIHyC42rDNtpdbNcLkkzELaaFosZGN7949Ues+E/R3HjwfLZTPzfd7abWjU+MfIS936uGLRrR3pmmPTWZeIzQVfhjC5BE6c3GuNpDiSKq0pnEq6gqJ/PxT52ym75tzp7vX6PrvAEvTq9oB+nzLndS9v66ij8s/NA0KkCSeqvUv0hj6hErSFqjEkQtE3UlPEH6PcXNBvC0SzDM7tdAzcAb6gUUex2jdifJmx6Ai243f3Zvbe1lE98ycQRI8sFI6hNfWbfbYivmKb7YaRSmwnzBSSlikliVKGno0xAN14jZbZVzmpMuSFDsTVaeiQUc2YspgqJjiiZ94ODW5mMGxvb/DMAVBPe5IiuN+9/z94n2nOhpAzQMYrlJuD6mP8eCbTp2wlgr8UswFQ3q+HfIJaQvSZxd4Ir0bfaTjx1zSibD7tw4F4H/WwT+BhPGFuRSH4XAAAAAAElFTkSuQmCC"

/***/ }),

/***/ "5a7a":
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "5d83":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAi9JREFUWAntmM1Kw0AQx2eTVvx6BMGX8AO0h1x9EU+9iD2qhGLBz6rYky/i0byHiuIXglAUURTarLPFLbOr2GR3ij00UDKTbGZ++9/JZrsAw2OowP8qILjSl1c3lkCkJ1LKqb9iCiHuQAbLjf3q6V/t9L1AG97nDHAqR6cD2DZrPj7ArBlztuMDxGHrDF8PAD3EPZp1b7PVYDciGuXKWhWHcl1fQ6ibxt7mtPbznPkUNLNGpgtnlp/ZZQdcqdfHMPs8JUAFE+rnsdkB24/PCzi8IxQiDMMBApQyonBoXx9uxdfWtcwuu4KQ/gBMMtP80pAVUNWfEDBH8wRB4PyCqDisgK2H5qJdf0HgXn/sgBIgUkH1gW/v1dF2fKN9lzOrgggQUQhU02t4VSw2wDiOxxHIqL8QIKHALjYb4NN7uogARQpRGB0gQGib0wvW32W9VrulwC42m4K40ossgMTynVwWwEpldwIBZ00C9+8vjcMC+CleftSf8Jz/NCQLoJQQ6YDf54vjnfjOuubksgBi5ohmx6AJ9X1sb0BVfzj/zRgQ4QABfoSvJYQz57/iWGIAezjeCkLLnF5w/js/qK3dezAZj/oDQhoZERnrT8X1AsTv7yQIYdSfEP4LBNphL8DmW6uEL0iBBgyL4wn1fe3c/4utPRhcAkJqQeAiBlDYfHswVoyum19Bcw9GdVAB0V8nOCo7pTaTupkcjfyAjolcH8sP2Kc9GNcODJ8bKtBvBb4AYZOat9aOUdIAAAAASUVORK5CYII="

/***/ }),

/***/ "5e6e":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAONJREFUWAntljEOgkAQRXc4hxfyIlZ29hb2dlZexAt5DteVOAl88gOB3UXip4Elw8znbcIjBB0iIALbJmAs/vF03gd73WOMO1aT876ZPUNsDrfr5dHt23QXveuK4T5zWxBpZi9DWvCAWLnSmgdMuFvslYL5FlcapzEiIAIisBkC1MX+Buhk/6CiM3PX+XxuEq8AJzNn4o/F4rrv/PGAHnSl83hAcLJv8SBv7rrBAN0QAREQgf8kQF2Mbi2NxwWAjucmAQeXDsjczQOWTjSxPw8Ibp3Yb3aZb/HsBnpQBETgRwm8AeMyfRZbHsrFAAAAAElFTkSuQmCC"

/***/ }),

/***/ "6284":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAPhJREFUWAntlDEOwjAMRZOegwtxESY2dgZ2NiYuwoU4B6FU8vIj17WwS5F+t9SJ/f0tv1L40QE68N8OVEv+8XTel/q6t9Z21l1PvNb6LG043K6Xx9y7YS44xRLEffJODY+5rfq2QCtDctwWOI5hGkewEBlxcFqmowPhDqgczOIfdiDLovFQ3+Ik/qFAi4e6QMz0o7MuMIl/2KeMGP/zTAe24oDKQRQYxUVZCo17WFffYrwZxEWLe1h2uUB8udJ5ucAgLsqIV+qPZejA1w50HIzinVeZLA/ysd/iIN55BWp87AV6Myff7wUG8c6rW0bsfcf7dIAObN2BNzMQZB0+snkeAAAAAElFTkSuQmCC"

/***/ }),

/***/ "63f6":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAPFJREFUWAntlDESgkAMRXc5BxfyIlZ29hT2dlZexAt5DldgJs3+2SGRZNWZTwf8DT8/5KXEiwkwgf9OINf2T+fpkPLrXkoZ63eW+5zzM5XheLteHpZztXaoH3iYW2quDc6NQn3jAzRoLBAtR4PzWNbx7PyyjHhnGR5nAl9PIIyD2s5kmVq8xC12gLTW3KLb4iUatFTvoEWDThzUepcRa/XUMYHeCYRxUH7+Ft+0jeIWO3Fwi2+fG9Se7KTDBJ04KCPu1Ac/wwTCEgjjoNWxLFXNTdxiJw5aDba4iQatlYP1aNCJg1bfMmLrOeqZABP49QTeQJtkHYVGC0MAAAAASUVORK5CYII="

/***/ }),

/***/ "64a9":
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "6c1e":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAA7lJREFUWAntVk1oE0EUntnG+tMoltqKUulRhIqn6sGTYMEeVEQQERRFENQ0LSRNhCYhNK3Yn1BqUhBPRRBLDoqCFemp4sWrehFBVMTaQ3upB63pPt/bZpbZ32STtCJkYJiZ9/vtN/NmlrFaq4wBXpm7s3cymaxf/JkfAIBLZMU5f9Dk9yVQvuLsZdX4rKLqSAicChAV0RBoFGW0vCVkpYxKKUbl2AjmZF87may3m68bQNzUrTYJPefz7GCT1CIKhuPngMEOswLwJPYmkzvNcrd11QEGw4nTKoOHmFTBCnyFfR77AvZFxqDlz3L+eTg82uAGStah31qrRtUF+2InVGBP8azVI77bk+lUv4jfHUm2qmr+NQNow6SzvG33yUww+FvonUadQVF1wNge6lSBJHNyNMuDkcQxVYXHBI4rfFwGR7aZkeS3ep/vOO7yD4zfCV8XHuVyuTpzHPNaZzAQ6v9OwGQDVM5n00N7ZZndPNAXP8pAfQnAGrjC7mVHh67b2ZEsEI0fhFV1jgFrxPjvUdREcqd7UmeQjKyNb7bKjJKeULyDqTBD4FAzlRkZvGG0MK6yw6l3PqZ0IaQVJKSdSKHutGM6QPoCYyg80gwab4bjvWa5WHdH44fyHJnDikX/6ebtm67iiPnc28RY6g3jsGy2srsndYD0DCmcD9O2ap3DnBYA1PFAKHYXi0i3JXlvJHYAt2pW2yrOnuzy+y6ijWpO6rTGzyjpyUMszg3ZO89BnUJKcKvhmaIoH0GFC3hg6vBrt6GnH+czzX7fGa9vbHc4dkd+CgkFEZQZGzQ8hQZWzFAnx1LTXFE6OeNLeGZOYZWGtDMD0KKBY+wzgjvrFRzlMe8YgSOZGYMrg8K4JxLbn18FqjjDzwV+3XzGVOWBUKKLcfW+5gvKtWx64IWIU87oyqAIODEy+AG/BF8CY7OtBgSH299KXQdqdPO0MjDi5onVOYVJ9d8nsrWtfAJWaBpIsSiMXhkuGSCdD/qfw6SGH1BT/uLLAsNkyNeOwj43JwvAUKi/7Rdj2mHdwthAOj30hQIUCoEqzFBlbsHtdDKr8tzOlmQWgPh651B+mJQ4b8fhCM3/VbMUCR78DgFGngvZRo8WgAhAvnrk+UZj0/JZtrgYCq9VWCxeMb1ngHS3icNdShUWA1BMb7fFrj4CHBnJc1enCpSeAVaQqyzXGsCyaJOcagxKZJQ1tWPwkxRJnguxLJPn1dKLONpoAYgX4xV8S95Sx1/8ywZrXKy33pyvtq4xUGPgf2fgLzQye+oN4RgEAAAAAElFTkSuQmCC"

/***/ }),

/***/ "74b6":
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "76d2":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAsZJREFUWAntWEFrE1EQntmNFfHgrSe9eBREKvZaz/6BFFTwFg+NigSsEJWiBqwQBE0P9iZowfyBnu1Noy0qeBQP/gEPIm2Sfc73srN5brOQJfFVYRc2b97OvJmPeTPfvg1RcRUZONgMsIav1u5dII7W7dwElVbz/qbq8ozT8qMxSyoAnDHmOOY8AHoi0eURpuUnjhlobAWHuSurftzRXevK465P2yUA04p/ZV4AnHQnigwWGZw0A5OuHxL1pJ5yrG+32+GbzpczHPXPYZkJwvfn5099LJfL/bQb701SXb57euvtpw5F3Q+Goue4IeMZdGmAybt4qVY3aeU05mvNRhLDAuhFHQl0eJRvMdylUjDfWn3wWfXeMohtpZ55kYBj+iGA1nGTyABkdWJjbWOE3gCi5gyZORtXAM2UDp1tNRtXcUMegjRzsI3xkTeA2hAIzIZeP3m08lVBQMYznbu2mV3s1o4uHGfMqmUOo58m7lEOaWufL2aWY9S+x94y+HT14UYQ0mXckF0kN2+vnJTtL+sz0I7KmRlUg2mNkiCk5xX8CUC+dqt+KYrMDTbBbLfXnZUOOQIdE+8sCCeuYSKXN4CDcIPf68t3LkZ9egk4kjnbvtBIR+9Ria+4hO1ti12AmbIgTF8HAjCpx4DfCaBv0h6/AEx6ZAZc6fKgty2W7xPG1sYZ2nj2uIF6tDWJJtnrdbdlt4+BK2Me3Iattwxq3aH2HKAWr+VB4radyI/Lg94Amn5wVAEIHy6onIyS4kR2BH8AHW4zTIvYVsVheVCe6XwkDwpPfdfvWMhqnHfM8oPznhypduz7WGoNNVet1e3rTeRF1B9ipXlwmEH5uwPOLTiR8wJL7DP8WG4TjhMm2bW2tiGoIvtaGYLDcetPHhzBPEmovyIMzoQ4dsUnmzgKMgdw7lkQKu8AETTPkR/2xVVkoMjA/5yB35WuOK++n0NOAAAAAElFTkSuQmCC"

/***/ }),

/***/ "7bd5":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAABOZJREFUWAntV+1PW1UYP+e+tEB5mxCCWbZJJEF5aQdlkG4zdslmQgySOQsxKpMvxM/+Bf0D/AMMJjYEHQuQLJkxbESzxuFKgctLKTAUZcyhQ63jpaOll97jc4iXnd3e9lJWPpjQL+d5nvOc5/n1d57nnHMROvodMXDEwP+bAawH326/WBCV1y4RhbyiIJKr55MpmyDwQ8GpsXvJ4vHaCQpuKxb6RCHoOEHIpJ3PpM5x6PvZaelHt9vNrYbCTa+W2VZXVha32Rwcq1B5lzmCs7X2TOuiKNyeC0zcdblcfN/AzfcIURrCkb/e0uZJAEi3VeuUaZ0X+G9nJkd9TrdbmFlYalUQqqQ5IPcpbS5Ba9DWHMYkznHcncLcrGnquxaO2hRFuUAITigPbSwdnWAOfzM7NTbR2dkpDg/cbAOfctUPcuepsjomAFQn1JGCgzoZVnUYh6tsdhSPk4uMbT8iEUzijeCEPwDbavphRHofFpUZLUzYYu0ClTnWrmdj5xNkjBWO5wcouKamJvPs/OKHSCGG4GgcQ4AJydI00BIRTahvbnps1uFwZS89Wm1XED653zCGAGnNaYPp2bQ+VAdwO5yY1TsjSfftzc0565uLVxEcX3q+yWyGNUgbgtacuq1qk0D6ZDF37ZhDsojEa4EJ35LT6cxdXf69nSBcknKRzqQhQNqttCFC6xGmKVKDA/DbWbz52uTkveXGxsb8x6GNdmCuWCe/oclwiw0jaB0wiZosQg8Fd9rpLNyI7HQcFBwNnVGAGKMtiym3O+D3P3I4HC9thzY64PA9pv0P6egZAwg195TPEbsl6e4fdruz+MlmtIMQVJAOGD3fDAEkmzlivifo969az54t2ZI3OqAOtbcC3CLoFubIb3pAktleGCBs6/qxvCyPJHn/ttvfeFnejH5MFGRhE9KONnHc9fnAxIhgFu6wc0byCwGEe/WJuSjf4/P5/rHZHMefxsJXYVtz2KQcwsCu5ctAYHyB2mfGxn7lEHnI+qSSDwwQkoTys0s8U17vmt1+/uR2PAZHCc5ik4HP4zxLyRe0Llk7ny14WT2VfCCAwNyfJcUFHr9/cMNqbSjbkrc+gseSmU3EYfTzqROluz6sncrpsJg2QMrKidKibq/XG66qc5TLRP4Aak5kQWDMjbZeead3cHDwudcx67NfFg1vEjYo3G4rBbnlXw0N9Ues1voKWY62at6FtFNvzwfGR9wz488t1SqUxcrq2odGD4d9M0iPh9Ki/B6frz9SVdtYGSOkjQUHgWJqp2rBJNMFTjTs6H0B5DF6UF1R3gPbGq2uq7PGZdmFCGHWks1ss8WjdmoyQFp7IDC6BLW6rLWzOpOENT+TMU9+Oeeo/7q/vz9Waauv3YmhyzC791qgNVlgKU3o1GcRUksCFrypPFIC5Dluoe1yS29XV5dcdfrMGSWutECwPXA8xj8l69RUSdk5IxaTAoSJucqKsj74Zt2pqWlwxHfib7OBaae6rjRfT9WprH8qORWLe2yoAV6rqf0Uam7Z9W7LDQCnwGP1/AE+kNRwaY1w64TngtJn7KKEY4YXTLdcLU33/wN3AcC9yS44TBkugAfa+AkMqg6vV9dfIkg5p+qHPcL3SyTHVPS5JH23zubSrUH6gQMLCukDlHU+DJluKzRjUA/cYeQ7innEQLoM/AvWAuY7S2Mk5AAAAABJRU5ErkJggg=="

/***/ }),

/***/ "7f92":
/***/ (function(module) {

module.exports = JSON.parse("{\"markup\":{\"title\":\"Markup\",\"alias\":[\"html\",\"xml\",\"svg\",\"mathml\"],\"aliasTitles\":{\"html\":\"HTML\",\"xml\":\"XML\",\"svg\":\"SVG\",\"mathml\":\"MathML\"},\"option\":\"default\",\"ext\":[\"html\"]},\"css\":{\"title\":\"CSS\",\"option\":\"default\",\"peerDependencies\":\"markup\",\"ext\":[\"css\"]},\"clike\":{\"title\":\"C-like\",\"option\":\"default\",\"overrideExampleHeader\":true,\"ext\":[\"c\",\"h\",\"ino\"]},\"javascript\":{\"title\":\"JavaScript\",\"require\":\"clike\",\"peerDependencies\":\"markup\",\"alias\":\"js\",\"option\":\"default\",\"ext\":[\"js\"]},\"abap\":{\"title\":\"ABAP\",\"ext\":[\"absp\"]},\"abnf\":{\"title\":\"Augmented Backus–Naur form\",\"ext\":[]},\"actionscript\":{\"title\":\"ActionScript\",\"require\":\"javascript\",\"peerDependencies\":\"markup\",\"ext\":[\"as\"]},\"ada\":{\"title\":\"Ada\",\"ext\":[]},\"apacheconf\":{\"title\":\"Apache Configuration\",\"ext\":[]},\"apl\":{\"title\":\"APL\",\"ext\":[\"dyalog\",\"apl\"]},\"applescript\":{\"title\":\"AppleScript\",\"ext\":[]},\"arduino\":{\"title\":\"Arduino\",\"require\":\"cpp\",\"ext\":[]},\"arff\":{\"title\":\"ARFF\",\"ext\":[]},\"asciidoc\":{\"alias\":\"adoc\",\"title\":\"AsciiDoc\",\"ext\":[]},\"asm6502\":{\"title\":\"6502 Assembly\",\"ext\":[]},\"aspnet\":{\"title\":\"ASP.NET (C#)\",\"require\":[\"markup\",\"csharp\"],\"ext\":[]},\"autohotkey\":{\"title\":\"AutoHotkey\",\"ext\":[]},\"autoit\":{\"title\":\"AutoIt\",\"ext\":[]},\"bash\":{\"title\":\"Bash\",\"alias\":\"shell\",\"aliasTitles\":{\"shell\":\"Shell\"},\"ext\":[\"sh\",\"ksh\",\"bash\"]},\"basic\":{\"title\":\"BASIC\",\"ext\":[]},\"batch\":{\"title\":\"Batch\",\"ext\":[]},\"bison\":{\"title\":\"Bison\",\"require\":\"c\",\"ext\":[]},\"bnf\":{\"title\":\"Backus–Naur form\",\"alias\":\"rbnf\",\"aliasTitles\":{\"rbnf\":\"Routing Backus–Naur form\"},\"ext\":[]},\"brainfuck\":{\"title\":\"Brainfuck\",\"ext\":[\"b\",\"bf\"]},\"bro\":{\"title\":\"Bro\",\"ext\":[]},\"c\":{\"title\":\"C\",\"require\":\"clike\",\"ext\":[\"c\",\"h\",\"ino\"]},\"csharp\":{\"title\":\"C#\",\"require\":\"clike\",\"alias\":\"dotnet\",\"ext\":[\"cs\"]},\"cpp\":{\"title\":\"C++\",\"require\":\"c\",\"ext\":[\"cpp\",\"c++\",\"cc\",\"cxx\",\"hpp\",\"h++\",\"hh\",\"hxx\"]},\"cil\":{\"title\":\"CIL\",\"ext\":[]},\"coffeescript\":{\"title\":\"CoffeeScript\",\"require\":\"javascript\",\"alias\":\"coffee\",\"ext\":[\"coffee\"]},\"cmake\":{\"title\":\"CMake\",\"ext\":[]},\"clojure\":{\"title\":\"Clojure\",\"ext\":[\"clj\",\"cljc\",\"cljx\"]},\"crystal\":{\"title\":\"Crystal\",\"require\":\"ruby\",\"ext\":[\"cr\"]},\"csp\":{\"title\":\"Content-Security-Policy\",\"ext\":[]},\"css-extras\":{\"title\":\"CSS Extras\",\"require\":\"css\",\"ext\":[]},\"d\":{\"title\":\"D\",\"require\":\"clike\",\"ext\":[\"d\"]},\"dart\":{\"title\":\"Dart\",\"require\":\"clike\",\"ext\":[\"dart\"]},\"diff\":{\"title\":\"Diff\",\"ext\":[\"diff\",\"patch\"]},\"django\":{\"title\":\"Django/Jinja2\",\"require\":\"markup-templating\",\"alias\":\"jinja2\",\"ext\":[]},\"docker\":{\"title\":\"Docker\",\"alias\":\"dockerfile\",\"ext\":[]},\"ebnf\":{\"title\":\"Extended Backus–Naur form\",\"ext\":[]},\"eiffel\":{\"title\":\"Eiffel\",\"ext\":[\"e\"]},\"ejs\":{\"title\":\"EJS\",\"require\":[\"javascript\",\"markup-templating\"],\"ext\":[]},\"elixir\":{\"title\":\"Elixir\",\"ext\":[]},\"elm\":{\"title\":\"Elm\",\"ext\":[\"elm\"]},\"erb\":{\"title\":\"ERB\",\"require\":[\"ruby\",\"markup-templating\"],\"ext\":[\"erb\"]},\"erlang\":{\"title\":\"Erlang\",\"ext\":[\"erl\"]},\"fsharp\":{\"title\":\"F#\",\"require\":\"clike\",\"ext\":[\"fs\"]},\"flow\":{\"title\":\"Flow\",\"require\":\"javascript\",\"ext\":[]},\"fortran\":{\"title\":\"Fortran\",\"ext\":[\"f\",\"for\",\"f77\",\"f90\"]},\"gcode\":{\"title\":\"G-code\",\"ext\":[]},\"gedcom\":{\"title\":\"GEDCOM\",\"ext\":[]},\"gherkin\":{\"title\":\"Gherkin\",\"ext\":[\"feature\"]},\"git\":{\"title\":\"Git\",\"ext\":[]},\"glsl\":{\"title\":\"GLSL\",\"require\":\"clike\",\"ext\":[]},\"gml\":{\"title\":\"GameMaker Language\",\"alias\":\"gamemakerlanguage\",\"require\":\"clike\",\"ext\":[]},\"go\":{\"title\":\"Go\",\"require\":\"clike\",\"ext\":[\"go\"]},\"graphql\":{\"title\":\"GraphQL\",\"ext\":[]},\"groovy\":{\"title\":\"Groovy\",\"require\":\"clike\",\"ext\":[\"groovy\",\"gradle\"]},\"haml\":{\"title\":\"Haml\",\"require\":\"ruby\",\"peerDependencies\":[\"css\",\"coffeescript\",\"erb\",\"javascript\",\"less\",\"markdown\",\"ruby\",\"scss\",\"textile\"],\"ext\":[\"haml\"]},\"handlebars\":{\"title\":\"Handlebars\",\"require\":\"markup-templating\",\"ext\":[\"html\",\"htm\",\"handlebars\",\"hbs\"]},\"haskell\":{\"title\":\"Haskell\",\"alias\":\"hs\",\"ext\":[\"hs\"]},\"haxe\":{\"title\":\"Haxe\",\"require\":\"clike\",\"ext\":[\"hx\"]},\"hcl\":{\"title\":\"HCL\",\"ext\":[]},\"http\":{\"title\":\"HTTP\",\"peerDependencies\":[\"javascript\",\"markup\"],\"ext\":[]},\"hpkp\":{\"title\":\"HTTP Public-Key-Pins\",\"ext\":[]},\"hsts\":{\"title\":\"HTTP Strict-Transport-Security\",\"ext\":[]},\"ichigojam\":{\"title\":\"IchigoJam\",\"ext\":[]},\"icon\":{\"title\":\"Icon\",\"ext\":[]},\"inform7\":{\"title\":\"Inform 7\",\"ext\":[]},\"ini\":{\"title\":\"Ini\",\"ext\":[\"properties\",\"ini\",\"in\"]},\"io\":{\"title\":\"Io\",\"ext\":[]},\"j\":{\"title\":\"J\",\"ext\":[]},\"java\":{\"title\":\"Java\",\"require\":\"clike\",\"ext\":[\"java\"]},\"javadoc\":{\"title\":\"JavaDoc\",\"require\":[\"markup\",\"java\",\"javadoclike\"],\"peerDependencies\":[\"scala\"],\"ext\":[]},\"javadoclike\":{\"title\":\"JavaDoc-like\",\"peerDependencies\":[\"java\",\"javascript\",\"php\"],\"ext\":[]},\"javastacktrace\":{\"title\":\"Java stack trace\",\"ext\":[]},\"jolie\":{\"title\":\"Jolie\",\"require\":\"clike\",\"ext\":[]},\"jsdoc\":{\"title\":\"JSDoc\",\"require\":[\"javascript\",\"javadoclike\"],\"peerDependencies\":[\"actionscript\",\"coffeescript\"],\"ext\":[]},\"js-extras\":{\"title\":\"JS Extras\",\"require\":\"javascript\",\"peerDependencies\":[\"actionscript\",\"coffeescript\",\"flow\",\"n4js\",\"typescript\"],\"ext\":[]},\"json\":{\"title\":\"JSON\",\"ext\":[\"json\",\"map\"]},\"jsonp\":{\"title\":\"JSONP\",\"require\":\"json\",\"ext\":[]},\"json5\":{\"title\":\"JSON5\",\"require\":\"json\",\"ext\":[]},\"julia\":{\"title\":\"Julia\",\"ext\":[\"jl\"]},\"keyman\":{\"title\":\"Keyman\",\"ext\":[]},\"kotlin\":{\"title\":\"Kotlin\",\"require\":\"clike\",\"ext\":[\"kt\"]},\"latex\":{\"title\":\"LaTeX\",\"ext\":[\"text\",\"ltx\",\"tex\"]},\"less\":{\"title\":\"Less\",\"require\":\"css\",\"ext\":[\"less\"]},\"liquid\":{\"title\":\"Liquid\",\"ext\":[]},\"lisp\":{\"title\":\"Lisp\",\"alias\":[\"emacs\",\"elisp\",\"emacs-lisp\"],\"ext\":[\"cl\",\"lisp\",\"el\"]},\"livescript\":{\"title\":\"LiveScript\",\"ext\":[\"ls\"]},\"lolcode\":{\"title\":\"LOLCODE\",\"ext\":[]},\"lua\":{\"title\":\"Lua\",\"ext\":[\"lua\"]},\"makefile\":{\"title\":\"Makefile\",\"ext\":[]},\"markdown\":{\"title\":\"Markdown\",\"require\":\"markup\",\"alias\":\"md\",\"ext\":[\"markdown\",\"md\",\"mkd\"]},\"markup-templating\":{\"title\":\"Markup templating\",\"require\":\"markup\",\"ext\":[]},\"matlab\":{\"title\":\"MATLAB\",\"ext\":[]},\"mel\":{\"title\":\"MEL\",\"ext\":[]},\"mizar\":{\"title\":\"Mizar\",\"ext\":[]},\"monkey\":{\"title\":\"Monkey\",\"ext\":[]},\"n1ql\":{\"title\":\"N1QL\",\"ext\":[]},\"n4js\":{\"title\":\"N4JS\",\"require\":\"javascript\",\"peerDependencies\":[\"jsdoc\"],\"alias\":\"n4jsd\",\"ext\":[]},\"nand2tetris-hdl\":{\"title\":\"Nand To Tetris HDL\",\"ext\":[]},\"nasm\":{\"title\":\"NASM\",\"ext\":[]},\"nginx\":{\"title\":\"nginx\",\"require\":\"clike\",\"ext\":[]},\"nim\":{\"title\":\"Nim\",\"ext\":[]},\"nix\":{\"title\":\"Nix\",\"ext\":[]},\"nsis\":{\"title\":\"NSIS\",\"ext\":[\"nsh\",\"nsi\"]},\"objectivec\":{\"title\":\"Objective-C\",\"require\":\"c\",\"ext\":[\"m\",\"mm\"]},\"ocaml\":{\"title\":\"OCaml\",\"ext\":[\"ml\",\"mli\",\"mll\",\"mly\"]},\"opencl\":{\"title\":\"OpenCL\",\"require\":\"cpp\",\"peerDependencies\":[\"c\",\"cpp\"],\"overrideExampleHeader\":true,\"ext\":[]},\"oz\":{\"title\":\"Oz\",\"ext\":[\"oz\"]},\"parigp\":{\"title\":\"PARI/GP\",\"ext\":[]},\"parser\":{\"title\":\"Parser\",\"require\":\"markup\",\"ext\":[]},\"pascal\":{\"title\":\"Pascal\",\"alias\":\"objectpascal\",\"aliasTitles\":{\"objectpascal\":\"Object Pascal\"},\"ext\":[\"p\",\"pas\"]},\"perl\":{\"title\":\"Perl\",\"ext\":[\"pl\",\"pm\"]},\"php\":{\"title\":\"PHP\",\"require\":[\"clike\",\"markup-templating\"],\"ext\":[\"php\",\"php3\",\"php4\",\"php5\",\"php7\",\"phtml\"]},\"phpdoc\":{\"title\":\"PHPDoc\",\"require\":[\"php\",\"javadoclike\"],\"ext\":[]},\"php-extras\":{\"title\":\"PHP Extras\",\"require\":\"php\",\"ext\":[]},\"plsql\":{\"title\":\"PL/SQL\",\"require\":\"sql\",\"ext\":[\"pls\"]},\"powershell\":{\"title\":\"PowerShell\",\"ext\":[\"ps1\",\"psd1\",\"psm1\"]},\"processing\":{\"title\":\"Processing\",\"require\":\"clike\",\"ext\":[]},\"prolog\":{\"title\":\"Prolog\",\"ext\":[]},\"properties\":{\"title\":\".properties\",\"ext\":[\"properties\",\"ini\",\"in\"]},\"protobuf\":{\"title\":\"Protocol Buffers\",\"require\":\"clike\",\"ext\":[\"proto\"]},\"pug\":{\"title\":\"Pug\",\"require\":[\"markup\",\"javascript\"],\"peerDependencies\":[\"coffeescript\",\"ejs\",\"handlebars\",\"less\",\"livescript\",\"markdown\",\"scss\",\"stylus\",\"twig\"],\"ext\":[\"jade\",\"pug\"]},\"puppet\":{\"title\":\"Puppet\",\"ext\":[\"pp\"]},\"pure\":{\"title\":\"Pure\",\"peerDependencies\":[\"c\",\"cpp\",\"fortran\"],\"ext\":[]},\"python\":{\"title\":\"Python\",\"alias\":\"py\",\"ext\":[\"pyx\",\"pxd\",\"pxi\"]},\"q\":{\"title\":\"Q (kdb+ database)\",\"ext\":[\"q\"]},\"qore\":{\"title\":\"Qore\",\"require\":\"clike\",\"ext\":[]},\"r\":{\"title\":\"R\",\"ext\":[\"r\",\"R\"]},\"jsx\":{\"title\":\"React JSX\",\"require\":[\"markup\",\"javascript\"],\"peerDependencies\":[\"jsdoc\",\"js-extras\"],\"ext\":[\"jsx\"]},\"tsx\":{\"title\":\"React TSX\",\"require\":[\"jsx\",\"typescript\"],\"ext\":[\"tsx\"]},\"renpy\":{\"title\":\"Ren'py\",\"ext\":[]},\"reason\":{\"title\":\"Reason\",\"require\":\"clike\",\"ext\":[]},\"regex\":{\"title\":\"Regex\",\"peerDependencies\":[\"actionscript\",\"coffeescript\",\"flow\",\"javascript\",\"typescript\",\"vala\"],\"ext\":[]},\"rest\":{\"title\":\"reST (reStructuredText)\",\"ext\":[]},\"rip\":{\"title\":\"Rip\",\"ext\":[]},\"roboconf\":{\"title\":\"Roboconf\",\"ext\":[]},\"ruby\":{\"title\":\"Ruby\",\"require\":\"clike\",\"alias\":\"rb\",\"ext\":[\"rb\"]},\"rust\":{\"title\":\"Rust\",\"ext\":[\"rs\"]},\"sas\":{\"title\":\"SAS\",\"ext\":[\"sas\"]},\"sass\":{\"title\":\"Sass (Sass)\",\"require\":\"css\",\"ext\":[\"sass\"]},\"scss\":{\"title\":\"Sass (Scss)\",\"require\":\"css\",\"ext\":[\"scss\"]},\"scala\":{\"title\":\"Scala\",\"require\":\"java\",\"ext\":[\"scala\"]},\"scheme\":{\"title\":\"Scheme\",\"ext\":[\"scm\",\"ss\"]},\"smalltalk\":{\"title\":\"Smalltalk\",\"ext\":[\"st\"]},\"smarty\":{\"title\":\"Smarty\",\"require\":\"markup-templating\",\"ext\":[\"tpl\"]},\"sql\":{\"title\":\"SQL\",\"ext\":[\"cql\"]},\"soy\":{\"title\":\"Soy (Closure Template)\",\"require\":\"markup-templating\",\"ext\":[\"soy\"]},\"stylus\":{\"title\":\"Stylus\",\"ext\":[\"styl\"]},\"swift\":{\"title\":\"Swift\",\"require\":\"clike\",\"ext\":[\"swift\"]},\"tap\":{\"title\":\"TAP\",\"require\":\"yaml\",\"ext\":[]},\"tcl\":{\"title\":\"Tcl\",\"ext\":[\"tcl\"]},\"textile\":{\"title\":\"Textile\",\"require\":\"markup\",\"peerDependencies\":\"css\",\"ext\":[\"textile\"]},\"toml\":{\"title\":\"TOML\",\"ext\":[]},\"tt2\":{\"title\":\"Template Toolkit 2\",\"require\":[\"clike\",\"markup-templating\"],\"ext\":[]},\"twig\":{\"title\":\"Twig\",\"require\":\"markup\",\"ext\":[]},\"typescript\":{\"title\":\"TypeScript\",\"require\":\"javascript\",\"alias\":\"ts\",\"ext\":[\"ts\"]},\"t4-cs\":{\"title\":\"T4 Text Templates (C#)\",\"require\":[\"t4-templating\",\"csharp\"],\"alias\":\"t4\",\"ext\":[]},\"t4-vb\":{\"title\":\"T4 Text Templates (VB)\",\"require\":[\"t4-templating\",\"visual-basic\"],\"ext\":[]},\"t4-templating\":{\"title\":\"T4 templating\",\"ext\":[]},\"vala\":{\"title\":\"Vala\",\"require\":\"clike\",\"ext\":[]},\"vbnet\":{\"title\":\"VB.Net\",\"require\":\"basic\",\"ext\":[\"vb\"]},\"velocity\":{\"title\":\"Velocity\",\"require\":\"markup\",\"ext\":[\"vtl\"]},\"verilog\":{\"title\":\"Verilog\",\"ext\":[\"v\",\"sv\",\"svh\"]},\"vhdl\":{\"title\":\"VHDL\",\"ext\":[\"vhd\",\"vhdl\"]},\"vim\":{\"title\":\"vim\",\"ext\":[]},\"visual-basic\":{\"title\":\"Visual Basic\",\"alias\":\"vb\",\"ext\":[]},\"wasm\":{\"title\":\"WebAssembly\",\"ext\":[]},\"wiki\":{\"title\":\"Wiki markup\",\"require\":\"markup\",\"ext\":[]},\"xeora\":{\"title\":\"Xeora\",\"require\":\"markup\",\"alias\":\"xeoracube\",\"aliasTitles\":{\"xeoracube\":\"XeoraCube\"},\"ext\":[]},\"xojo\":{\"title\":\"Xojo (REALbasic)\",\"ext\":[]},\"xquery\":{\"title\":\"XQuery\",\"require\":\"markup\",\"ext\":[\"xy\",\"xquery\"]},\"yaml\":{\"title\":\"YAML\",\"alias\":\"yml\",\"ext\":[\"yaml\",\"yml\"]}}");

/***/ }),

/***/ "812a":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(process, module) {/* harmony import */ var core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("7f7f");
/* harmony import */ var core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("28a5");
/* harmony import */ var core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("4917");
/* harmony import */ var core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _Users_zhongheming_Documents_GitHub_muya_example_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("7618");
/* harmony import */ var core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("a481");
/* harmony import */ var core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("c46f");
/* harmony import */ var _raphael__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("f5e7");
/* harmony import */ var _raphael__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_raphael__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _webFontLoader__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("c5e5");






/** js sequence diagrams 2.0.1
 *  https://bramp.github.io/js-sequence-diagrams/
 *  (c) 2012-2017 Andrew Brampton (bramp.net)
 *  @license Simplified BSD license.
 */




function Diagram() {
  this.title = undefined;
  this.actors = [];
  this.signals = [];
}
/*
 * Return an existing actor with this alias, or creates a new one with alias and name.
 */


Diagram.prototype.getActor = function (alias, name) {
  alias = alias.trim();
  var i;
  var actors = this.actors;

  for (i in actors) {
    if (actors[i].alias == alias) {
      return actors[i];
    }
  }

  i = actors.push(new Diagram.Actor(alias, name || alias, actors.length));
  return actors[i - 1];
};
/*
 * Parses the input as either a alias, or a "name as alias", and returns the corresponding actor.
 */


Diagram.prototype.getActorWithAlias = function (input) {
  input = input.trim(); // We are lazy and do some of the parsing in javascript :(. TODO move into the .jison file.

  var s = /([\s\S]+) as (\S+)$/im.exec(input);
  var alias;
  var name;

  if (s) {
    name = s[1].trim();
    alias = s[2].trim();
  } else {
    name = alias = input;
  }

  return this.getActor(alias, name);
};

Diagram.prototype.setTitle = function (title) {
  this.title = title;
};

Diagram.prototype.addSignal = function (signal) {
  this.signals.push(signal);
};

Diagram.Actor = function (alias, name, index) {
  this.alias = alias;
  this.name = name;
  this.index = index;
};

Diagram.Signal = function (actorA, signaltype, actorB, message) {
  this.type = 'Signal';
  this.actorA = actorA;
  this.actorB = actorB;
  this.linetype = signaltype & 3;
  this.arrowtype = signaltype >> 2 & 3;
  this.message = message;
};

Diagram.Signal.prototype.isSelf = function () {
  return this.actorA.index == this.actorB.index;
};

Diagram.Note = function (actor, placement, message) {
  this.type = 'Note';
  this.actor = actor;
  this.placement = placement;
  this.message = message;

  if (this.hasManyActors() && actor[0] == actor[1]) {
    throw new Error('Note should be over two different actors');
  }
};

Diagram.Note.prototype.hasManyActors = function () {
  return underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].isArray(this.actor);
};

Diagram.unescape = function (s) {
  // Turn "\\n" into "\n"
  return s.trim().replace(/^"(.*)"$/m, '$1').replace(/\\n/gm, '\n');
};

Diagram.LINETYPE = {
  SOLID: 0,
  DOTTED: 1
};
Diagram.ARROWTYPE = {
  FILLED: 0,
  OPEN: 1
};
Diagram.PLACEMENT = {
  LEFTOF: 0,
  RIGHTOF: 1,
  OVER: 2
}; // Some older browsers don't have getPrototypeOf, thus we polyfill it
// https://github.com/bramp/js-sequence-diagrams/issues/57
// https://github.com/zaach/jison/issues/194
// Taken from http://ejohn.org/blog/objectgetprototypeof/

if (typeof Object.getPrototypeOf !== 'function') {
  /* jshint -W103 */
  if (Object(_Users_zhongheming_Documents_GitHub_muya_example_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_3__[/* default */ "a"])('test'.__proto__) === 'object') {
    Object.getPrototypeOf = function (object) {
      return object.__proto__;
    };
  } else {
    Object.getPrototypeOf = function (object) {
      // May break if the constructor has been tampered with
      return object.constructor.prototype;
    };
  }
  /* jshint +W103 */

}
/** The following is included by preprocessor */

/* parser generated by jison 0.4.15 */

/*
  Returns a Parser object of the following structure:

  Parser: {
    yy: {}
  }

  Parser.prototype: {
    yy: {},
    trace: function(),
    symbols_: {associative list: name ==> number},
    terminals_: {associative list: number ==> name},
    productions_: [...],
    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),
    table: [...],
    defaultActions: {...},
    parseError: function(str, hash),
    parse: function(input),

    lexer: {
        EOF: 1,
        parseError: function(str, hash),
        setInput: function(input),
        input: function(),
        unput: function(str),
        more: function(),
        less: function(n),
        pastInput: function(),
        upcomingInput: function(),
        showPosition: function(),
        test_match: function(regex_match_array, rule_index),
        next: function(),
        lex: function(),
        begin: function(condition),
        popState: function(),
        _currentRules: function(),
        topState: function(),
        pushState: function(condition),

        options: {
            ranges: boolean           (optional: true ==> token location info will include a .range[] member)
            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)
            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)
        },

        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),
        rules: [...],
        conditions: {associative list: name ==> set},
    }
  }


  token location info (@$, _$, etc.): {
    first_line: n,
    last_line: n,
    first_column: n,
    last_column: n,
    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)
  }


  the parseError function receives a 'hash' object with these members for lexer and parser errors: {
    text:        (matched text)
    token:       (the produced terminal token, if any)
    line:        (yylineno)
  }
  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {
    loc:         (yylloc)
    expected:    (string describing the set of expected tokens)
    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)
  }
*/


var parser = function () {
  function Parser() {
    this.yy = {};
  }

  var o = function o(k, v, _o, l) {
    for (_o = _o || {}, l = k.length; l--; _o[k[l]] = v) {
      ;
    }

    return _o;
  },
      $V0 = [5, 8, 9, 13, 15, 24],
      $V1 = [1, 13],
      $V2 = [1, 17],
      $V3 = [24, 29, 30],
      parser = {
    trace: function trace() {},
    yy: {},
    symbols_: {
      error: 2,
      start: 3,
      document: 4,
      EOF: 5,
      line: 6,
      statement: 7,
      NL: 8,
      participant: 9,
      actor_alias: 10,
      signal: 11,
      note_statement: 12,
      title: 13,
      message: 14,
      note: 15,
      placement: 16,
      actor: 17,
      over: 18,
      actor_pair: 19,
      ",": 20,
      left_of: 21,
      right_of: 22,
      signaltype: 23,
      ACTOR: 24,
      linetype: 25,
      arrowtype: 26,
      LINE: 27,
      DOTLINE: 28,
      ARROW: 29,
      OPENARROW: 30,
      MESSAGE: 31,
      $accept: 0,
      $end: 1
    },
    terminals_: {
      2: "error",
      5: "EOF",
      8: "NL",
      9: "participant",
      13: "title",
      15: "note",
      18: "over",
      20: ",",
      21: "left_of",
      22: "right_of",
      24: "ACTOR",
      27: "LINE",
      28: "DOTLINE",
      29: "ARROW",
      30: "OPENARROW",
      31: "MESSAGE"
    },
    productions_: [0, [3, 2], [4, 0], [4, 2], [6, 1], [6, 1], [7, 2], [7, 1], [7, 1], [7, 2], [12, 4], [12, 4], [19, 1], [19, 3], [16, 1], [16, 1], [11, 4], [17, 1], [10, 1], [23, 2], [23, 1], [25, 1], [25, 1], [26, 1], [26, 1], [14, 1]],
    performAction: function performAction(yytext, yyleng, yylineno, yy, yystate, $$, _$) {
      /* this == yyval */
      var $0 = $$.length - 1;

      switch (yystate) {
        case 1:
          return yy.parser.yy;

        case 4:
          break;

        case 6:
          $$[$0];
          break;

        case 7:
        case 8:
          yy.parser.yy.addSignal($$[$0]);
          break;

        case 9:
          yy.parser.yy.setTitle($$[$0]);
          break;

        case 10:
          this.$ = new Diagram.Note($$[$0 - 1], $$[$0 - 2], $$[$0]);
          break;

        case 11:
          this.$ = new Diagram.Note($$[$0 - 1], Diagram.PLACEMENT.OVER, $$[$0]);
          break;

        case 12:
        case 20:
          this.$ = $$[$0];
          break;

        case 13:
          this.$ = [$$[$0 - 2], $$[$0]];
          break;

        case 14:
          this.$ = Diagram.PLACEMENT.LEFTOF;
          break;

        case 15:
          this.$ = Diagram.PLACEMENT.RIGHTOF;
          break;

        case 16:
          this.$ = new Diagram.Signal($$[$0 - 3], $$[$0 - 2], $$[$0 - 1], $$[$0]);
          break;

        case 17:
          this.$ = yy.parser.yy.getActor(Diagram.unescape($$[$0]));
          break;

        case 18:
          this.$ = yy.parser.yy.getActorWithAlias(Diagram.unescape($$[$0]));
          break;

        case 19:
          this.$ = $$[$0 - 1] | $$[$0] << 2;
          break;

        case 21:
          this.$ = Diagram.LINETYPE.SOLID;
          break;

        case 22:
          this.$ = Diagram.LINETYPE.DOTTED;
          break;

        case 23:
          this.$ = Diagram.ARROWTYPE.FILLED;
          break;

        case 24:
          this.$ = Diagram.ARROWTYPE.OPEN;
          break;

        case 25:
          this.$ = Diagram.unescape($$[$0].substring(1));
      }
    },
    table: [o($V0, [2, 2], {
      3: 1,
      4: 2
    }), {
      1: [3]
    }, {
      5: [1, 3],
      6: 4,
      7: 5,
      8: [1, 6],
      9: [1, 7],
      11: 8,
      12: 9,
      13: [1, 10],
      15: [1, 12],
      17: 11,
      24: $V1
    }, {
      1: [2, 1]
    }, o($V0, [2, 3]), o($V0, [2, 4]), o($V0, [2, 5]), {
      10: 14,
      24: [1, 15]
    }, o($V0, [2, 7]), o($V0, [2, 8]), {
      14: 16,
      31: $V2
    }, {
      23: 18,
      25: 19,
      27: [1, 20],
      28: [1, 21]
    }, {
      16: 22,
      18: [1, 23],
      21: [1, 24],
      22: [1, 25]
    }, o([20, 27, 28, 31], [2, 17]), o($V0, [2, 6]), o($V0, [2, 18]), o($V0, [2, 9]), o($V0, [2, 25]), {
      17: 26,
      24: $V1
    }, {
      24: [2, 20],
      26: 27,
      29: [1, 28],
      30: [1, 29]
    }, o($V3, [2, 21]), o($V3, [2, 22]), {
      17: 30,
      24: $V1
    }, {
      17: 32,
      19: 31,
      24: $V1
    }, {
      24: [2, 14]
    }, {
      24: [2, 15]
    }, {
      14: 33,
      31: $V2
    }, {
      24: [2, 19]
    }, {
      24: [2, 23]
    }, {
      24: [2, 24]
    }, {
      14: 34,
      31: $V2
    }, {
      14: 35,
      31: $V2
    }, {
      20: [1, 36],
      31: [2, 12]
    }, o($V0, [2, 16]), o($V0, [2, 10]), o($V0, [2, 11]), {
      17: 37,
      24: $V1
    }, {
      31: [2, 13]
    }],
    defaultActions: {
      3: [2, 1],
      24: [2, 14],
      25: [2, 15],
      27: [2, 19],
      28: [2, 23],
      29: [2, 24],
      37: [2, 13]
    },
    parseError: function parseError(str, hash) {
      if (!hash.recoverable) throw new Error(str);
      this.trace(str);
    },
    parse: function parse(input) {
      function lex() {
        var token;
        return token = lexer.lex() || EOF, "number" != typeof token && (token = self.symbols_[token] || token), token;
      }

      var self = this,
          stack = [0],
          vstack = [null],
          lstack = [],
          table = this.table,
          yytext = "",
          yylineno = 0,
          yyleng = 0,
          recovering = 0,
          TERROR = 2,
          EOF = 1,
          args = lstack.slice.call(arguments, 1),
          lexer = Object.create(this.lexer),
          sharedState = {
        yy: {}
      };

      for (var k in this.yy) {
        Object.prototype.hasOwnProperty.call(this.yy, k) && (sharedState.yy[k] = this.yy[k]);
      }

      lexer.setInput(input, sharedState.yy), sharedState.yy.lexer = lexer, sharedState.yy.parser = this, "undefined" == typeof lexer.yylloc && (lexer.yylloc = {});
      var yyloc = lexer.yylloc;
      lstack.push(yyloc);
      var ranges = lexer.options && lexer.options.ranges;
      "function" == typeof sharedState.yy.parseError ? this.parseError = sharedState.yy.parseError : this.parseError = Object.getPrototypeOf(this).parseError;

      for (var symbol, preErrorSymbol, state, action, r, p, len, newState, expected, yyval = {};;) {
        if (state = stack[stack.length - 1], this.defaultActions[state] ? action = this.defaultActions[state] : (null !== symbol && "undefined" != typeof symbol || (symbol = lex()), action = table[state] && table[state][symbol]), "undefined" == typeof action || !action.length || !action[0]) {
          var errStr = "";
          expected = [];

          for (p in table[state]) {
            this.terminals_[p] && p > TERROR && expected.push("'" + this.terminals_[p] + "'");
          }

          errStr = lexer.showPosition ? "Parse error on line " + (yylineno + 1) + ":\n" + lexer.showPosition() + "\nExpecting " + expected.join(", ") + ", got '" + (this.terminals_[symbol] || symbol) + "'" : "Parse error on line " + (yylineno + 1) + ": Unexpected " + (symbol == EOF ? "end of input" : "'" + (this.terminals_[symbol] || symbol) + "'"), this.parseError(errStr, {
            text: lexer.match,
            token: this.terminals_[symbol] || symbol,
            line: lexer.yylineno,
            loc: yyloc,
            expected: expected
          });
        }

        if (action[0] instanceof Array && action.length > 1) throw new Error("Parse Error: multiple actions possible at state: " + state + ", token: " + symbol);

        switch (action[0]) {
          case 1:
            stack.push(symbol), vstack.push(lexer.yytext), lstack.push(lexer.yylloc), stack.push(action[1]), symbol = null, preErrorSymbol ? (symbol = preErrorSymbol, preErrorSymbol = null) : (yyleng = lexer.yyleng, yytext = lexer.yytext, yylineno = lexer.yylineno, yyloc = lexer.yylloc, recovering > 0 && recovering--);
            break;

          case 2:
            if (len = this.productions_[action[1]][1], yyval.$ = vstack[vstack.length - len], yyval._$ = {
              first_line: lstack[lstack.length - (len || 1)].first_line,
              last_line: lstack[lstack.length - 1].last_line,
              first_column: lstack[lstack.length - (len || 1)].first_column,
              last_column: lstack[lstack.length - 1].last_column
            }, ranges && (yyval._$.range = [lstack[lstack.length - (len || 1)].range[0], lstack[lstack.length - 1].range[1]]), r = this.performAction.apply(yyval, [yytext, yyleng, yylineno, sharedState.yy, action[1], vstack, lstack].concat(args)), "undefined" != typeof r) return r;
            len && (stack = stack.slice(0, -1 * len * 2), vstack = vstack.slice(0, -1 * len), lstack = lstack.slice(0, -1 * len)), stack.push(this.productions_[action[1]][0]), vstack.push(yyval.$), lstack.push(yyval._$), newState = table[stack[stack.length - 2]][stack[stack.length - 1]], stack.push(newState);
            break;

          case 3:
            return !0;
        }
      }

      return !0;
    }
  },
      lexer = function () {
    var lexer = {
      EOF: 1,
      parseError: function parseError(str, hash) {
        if (!this.yy.parser) throw new Error(str);
        this.yy.parser.parseError(str, hash);
      },
      // resets the lexer, sets new input
      setInput: function setInput(input, yy) {
        return this.yy = yy || this.yy || {}, this._input = input, this._more = this._backtrack = this.done = !1, this.yylineno = this.yyleng = 0, this.yytext = this.matched = this.match = "", this.conditionStack = ["INITIAL"], this.yylloc = {
          first_line: 1,
          first_column: 0,
          last_line: 1,
          last_column: 0
        }, this.options.ranges && (this.yylloc.range = [0, 0]), this.offset = 0, this;
      },
      // consumes and returns one char from the input
      input: function input() {
        var ch = this._input[0];
        this.yytext += ch, this.yyleng++, this.offset++, this.match += ch, this.matched += ch;
        var lines = ch.match(/(?:\r\n?|\n).*/g);
        return lines ? (this.yylineno++, this.yylloc.last_line++) : this.yylloc.last_column++, this.options.ranges && this.yylloc.range[1]++, this._input = this._input.slice(1), ch;
      },
      // unshifts one char (or a string) into the input
      unput: function unput(ch) {
        var len = ch.length,
            lines = ch.split(/(?:\r\n?|\n)/g);
        this._input = ch + this._input, this.yytext = this.yytext.substr(0, this.yytext.length - len), //this.yyleng -= len;
        this.offset -= len;
        var oldLines = this.match.split(/(?:\r\n?|\n)/g);
        this.match = this.match.substr(0, this.match.length - 1), this.matched = this.matched.substr(0, this.matched.length - 1), lines.length - 1 && (this.yylineno -= lines.length - 1);
        var r = this.yylloc.range;
        return this.yylloc = {
          first_line: this.yylloc.first_line,
          last_line: this.yylineno + 1,
          first_column: this.yylloc.first_column,
          last_column: lines ? (lines.length === oldLines.length ? this.yylloc.first_column : 0) + oldLines[oldLines.length - lines.length].length - lines[0].length : this.yylloc.first_column - len
        }, this.options.ranges && (this.yylloc.range = [r[0], r[0] + this.yyleng - len]), this.yyleng = this.yytext.length, this;
      },
      // When called from action, caches matched text and appends it on next action
      more: function more() {
        return this._more = !0, this;
      },
      // When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.
      reject: function reject() {
        return this.options.backtrack_lexer ? (this._backtrack = !0, this) : this.parseError("Lexical error on line " + (this.yylineno + 1) + ". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n" + this.showPosition(), {
          text: "",
          token: null,
          line: this.yylineno
        });
      },
      // retain first n characters of the match
      less: function less(n) {
        this.unput(this.match.slice(n));
      },
      // displays already matched input, i.e. for error messages
      pastInput: function pastInput() {
        var past = this.matched.substr(0, this.matched.length - this.match.length);
        return (past.length > 20 ? "..." : "") + past.substr(-20).replace(/\n/g, "");
      },
      // displays upcoming input, i.e. for error messages
      upcomingInput: function upcomingInput() {
        var next = this.match;
        return next.length < 20 && (next += this._input.substr(0, 20 - next.length)), (next.substr(0, 20) + (next.length > 20 ? "..." : "")).replace(/\n/g, "");
      },
      // displays the character position where the lexing error occurred, i.e. for error messages
      showPosition: function showPosition() {
        var pre = this.pastInput(),
            c = new Array(pre.length + 1).join("-");
        return pre + this.upcomingInput() + "\n" + c + "^";
      },
      // test the lexed token: return FALSE when not a match, otherwise return token
      test_match: function test_match(match, indexed_rule) {
        var token, lines, backup;
        if (this.options.backtrack_lexer && ( // save context
        backup = {
          yylineno: this.yylineno,
          yylloc: {
            first_line: this.yylloc.first_line,
            last_line: this.last_line,
            first_column: this.yylloc.first_column,
            last_column: this.yylloc.last_column
          },
          yytext: this.yytext,
          match: this.match,
          matches: this.matches,
          matched: this.matched,
          yyleng: this.yyleng,
          offset: this.offset,
          _more: this._more,
          _input: this._input,
          yy: this.yy,
          conditionStack: this.conditionStack.slice(0),
          done: this.done
        }, this.options.ranges && (backup.yylloc.range = this.yylloc.range.slice(0))), lines = match[0].match(/(?:\r\n?|\n).*/g), lines && (this.yylineno += lines.length), this.yylloc = {
          first_line: this.yylloc.last_line,
          last_line: this.yylineno + 1,
          first_column: this.yylloc.last_column,
          last_column: lines ? lines[lines.length - 1].length - lines[lines.length - 1].match(/\r?\n?/)[0].length : this.yylloc.last_column + match[0].length
        }, this.yytext += match[0], this.match += match[0], this.matches = match, this.yyleng = this.yytext.length, this.options.ranges && (this.yylloc.range = [this.offset, this.offset += this.yyleng]), this._more = !1, this._backtrack = !1, this._input = this._input.slice(match[0].length), this.matched += match[0], token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]), this.done && this._input && (this.done = !1), token) return token;

        if (this._backtrack) {
          // recover context
          for (var k in backup) {
            this[k] = backup[k];
          }

          return !1;
        }

        return !1;
      },
      // return next match in input
      next: function next() {
        if (this.done) return this.EOF;
        this._input || (this.done = !0);
        var token, match, tempMatch, index;
        this._more || (this.yytext = "", this.match = "");

        for (var rules = this._currentRules(), i = 0; i < rules.length; i++) {
          if (tempMatch = this._input.match(this.rules[rules[i]]), tempMatch && (!match || tempMatch[0].length > match[0].length)) {
            if (match = tempMatch, index = i, this.options.backtrack_lexer) {
              if (token = this.test_match(tempMatch, rules[i]), token !== !1) return token;

              if (this._backtrack) {
                match = !1;
                continue;
              } // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)


              return !1;
            }

            if (!this.options.flex) break;
          }
        }

        return match ? (token = this.test_match(match, rules[index]), token !== !1 && token) : "" === this._input ? this.EOF : this.parseError("Lexical error on line " + (this.yylineno + 1) + ". Unrecognized text.\n" + this.showPosition(), {
          text: "",
          token: null,
          line: this.yylineno
        });
      },
      // return next match that has a token
      lex: function lex() {
        var r = this.next();
        return r ? r : this.lex();
      },
      // activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)
      begin: function begin(condition) {
        this.conditionStack.push(condition);
      },
      // pop the previously active lexer condition state off the condition stack
      popState: function popState() {
        var n = this.conditionStack.length - 1;
        return n > 0 ? this.conditionStack.pop() : this.conditionStack[0];
      },
      // produce the lexer rule set which is active for the currently active lexer condition state
      _currentRules: function _currentRules() {
        return this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1] ? this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules : this.conditions.INITIAL.rules;
      },
      // return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available
      topState: function topState(n) {
        return n = this.conditionStack.length - 1 - Math.abs(n || 0), n >= 0 ? this.conditionStack[n] : "INITIAL";
      },
      // alias for begin(condition)
      pushState: function pushState(condition) {
        this.begin(condition);
      },
      // return the number of states currently on the stack
      stateStackSize: function stateStackSize() {
        return this.conditionStack.length;
      },
      options: {
        "case-insensitive": !0
      },
      performAction: function performAction(yy, yy_, $avoiding_name_collisions, YY_START) {
        switch ($avoiding_name_collisions) {
          case 0:
            return 8;

          case 1:
            /* skip whitespace */
            break;

          case 2:
            /* skip comments */
            break;

          case 3:
            return 9;

          case 4:
            return 21;

          case 5:
            return 22;

          case 6:
            return 18;

          case 7:
            return 15;

          case 8:
            return 13;

          case 9:
            return 20;

          case 10:
            return 24;

          case 11:
            return 24;

          case 12:
            return 28;

          case 13:
            return 27;

          case 14:
            return 30;

          case 15:
            return 29;

          case 16:
            return 31;

          case 17:
            return 5;

          case 18:
            return "INVALID";
        }
      },
      rules: [/^(?:[\r\n]+)/i, /^(?:\s+)/i, /^(?:#[^\r\n]*)/i, /^(?:participant\b)/i, /^(?:left of\b)/i, /^(?:right of\b)/i, /^(?:over\b)/i, /^(?:note\b)/i, /^(?:title\b)/i, /^(?:,)/i, /^(?:[^\->:,\r\n"]+)/i, /^(?:"[^"]+")/i, /^(?:--)/i, /^(?:-)/i, /^(?:>>)/i, /^(?:>)/i, /^(?:[^\r\n]+)/i, /^(?:$)/i, /^(?:.)/i],
      conditions: {
        INITIAL: {
          rules: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18],
          inclusive: !0
        }
      }
    };
    return lexer;
  }();

  return parser.lexer = lexer, Parser.prototype = parser, parser.Parser = Parser, new Parser();
}();

 true && "undefined" != typeof exports && (exports.parser = parser, exports.Parser = parser.Parser, exports.parse = function () {
  return parser.parse.apply(parser, arguments);
}, exports.main = function (args) {
  args[1] || (console.log("Usage: " + args[0] + " FILE"), process.exit(1));

  var source = __webpack_require__("3e8f").readFileSync(__webpack_require__("df7c").normalize(args[1]), "utf8");

  return exports.parser.parse(source);
},  true && __webpack_require__.c[__webpack_require__.s] === module && exports.main(process.argv.slice(1)));
/**
 * jison doesn't have a good exception, so we make one.
 * This is brittle as it depends on jison internals
 */

function ParseError(message, hash) {
  underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].extend(this, hash);

  this.name = 'ParseError';
  this.message = message || '';
}

ParseError.prototype = new Error();
Diagram.ParseError = ParseError;

Diagram.parse = function (input) {
  // TODO jison v0.4.17 changed their API slightly, so parser is no longer defined:
  // Create the object to track state and deal with errors
  parser.yy = new Diagram();

  parser.yy.parseError = function (message, hash) {
    throw new ParseError(message, hash);
  }; // Parse


  var diagram = parser.parse(input); // Then clean up the parseError key that a user won't care about

  delete diagram.parseError;
  return diagram;
};
/** js sequence diagrams
 *  https://bramp.github.io/js-sequence-diagrams/
 *  (c) 2012-2017 Andrew Brampton (bramp.net)
 *  Simplified BSD license.
 */

/*global Diagram, _ */
// Following the CSS convention
// Margin is the gap outside the box
// Padding is the gap inside the box
// Each object has x/y/width/height properties
// The x/y should be top left corner
// width/height is with both margin and padding
// TODO
// Image width is wrong, when there is a note in the right hand col
// Title box could look better
// Note box could look better


var DIAGRAM_MARGIN = 10;
var ACTOR_MARGIN = 10; // Margin around a actor

var ACTOR_PADDING = 10; // Padding inside a actor

var SIGNAL_MARGIN = 5; // Margin around a signal

var SIGNAL_PADDING = 5; // Padding inside a signal

var NOTE_MARGIN = 10; // Margin around a note

var NOTE_PADDING = 5; // Padding inside a note

var NOTE_OVERLAP = 15; // Overlap when using a "note over A,B"

var TITLE_MARGIN = 0;
var TITLE_PADDING = 5;
var SELF_SIGNAL_WIDTH = 20; // How far out a self signal goes

var PLACEMENT = Diagram.PLACEMENT;
var LINETYPE = Diagram.LINETYPE;
var ARROWTYPE = Diagram.ARROWTYPE;
var ALIGN_LEFT = 0;
var ALIGN_CENTER = 1;

function AssertException(message) {
  this.message = message;
}

AssertException.prototype.toString = function () {
  return 'AssertException: ' + this.message;
};

function assert(exp, message) {
  if (!exp) {
    throw new AssertException(message);
  }
}

if (!String.prototype.trim) {
  String.prototype.trim = function () {
    return this.replace(/^\s+|\s+$/g, '');
  };
}

Diagram.themes = {};

function registerTheme(name, theme) {
  Diagram.themes[name] = theme;
}
/******************
 * Drawing extras
 ******************/


function getCenterX(box) {
  return box.x + box.width / 2;
}

function getCenterY(box) {
  return box.y + box.height / 2;
}
/******************
 * SVG Path extras
 ******************/


function clamp(x, min, max) {
  if (x < min) {
    return min;
  }

  if (x > max) {
    return max;
  }

  return x;
}

function wobble(x1, y1, x2, y2) {
  assert(underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].every([x1, x2, y1, y2], underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].isFinite), 'x1,x2,y1,y2 must be numeric'); // Wobble no more than 1/25 of the line length

  var factor = Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1)) / 25; // Distance along line where the control points are
  // Clamp between 20% and 80% so any arrow heads aren't angled too much

  var r1 = clamp(Math.random(), 0.2, 0.8);
  var r2 = clamp(Math.random(), 0.2, 0.8);
  var xfactor = Math.random() > 0.5 ? factor : -factor;
  var yfactor = Math.random() > 0.5 ? factor : -factor;
  var p1 = {
    x: (x2 - x1) * r1 + x1 + xfactor,
    y: (y2 - y1) * r1 + y1 + yfactor
  };
  var p2 = {
    x: (x2 - x1) * r2 + x1 - xfactor,
    y: (y2 - y1) * r2 + y1 - yfactor
  };
  return 'C' + p1.x.toFixed(1) + ',' + p1.y.toFixed(1) + // start control point
  ' ' + p2.x.toFixed(1) + ',' + p2.y.toFixed(1) + // end control point
  ' ' + x2.toFixed(1) + ',' + y2.toFixed(1); // end point
}
/**
 * Draws a wobbly (hand drawn) rect
 */


function handRect(x, y, w, h) {
  assert(underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].every([x, y, w, h], underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].isFinite), 'x, y, w, h must be numeric');
  return 'M' + x + ',' + y + wobble(x, y, x + w, y) + wobble(x + w, y, x + w, y + h) + wobble(x + w, y + h, x, y + h) + wobble(x, y + h, x, y);
}
/**
 * Draws a wobbly (hand drawn) line
 */


function handLine(x1, y1, x2, y2) {
  assert(underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].every([x1, x2, y1, y2], underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].isFinite), 'x1,x2,y1,y2 must be numeric');
  return 'M' + x1.toFixed(1) + ',' + y1.toFixed(1) + wobble(x1, y1, x2, y2);
}
/******************
 * BaseTheme
 ******************/


var BaseTheme = function BaseTheme(diagram, options) {
  this.init(diagram, options);
};

underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].extend(BaseTheme.prototype, {
  // Init called while creating the Theme
  init: function init(diagram, options) {
    this.diagram = diagram;
    this.actorsHeight_ = 0;
    this.signalsHeight_ = 0;
    this.title_ = undefined; // hack - This should be somewhere better
  },
  setupPaper: function setupPaper(container) {},
  draw: function draw(container) {
    this.setupPaper(container);
    this.layout();
    var titleHeight = this.title_ ? this.title_.height : 0;
    var y = DIAGRAM_MARGIN + titleHeight;
    this.drawTitle();
    this.drawActors(y);
    this.drawSignals(y + this.actorsHeight_);
  },
  layout: function layout() {
    // Local copies
    var diagram = this.diagram;
    var font = this.font_;
    var actors = diagram.actors;
    var signals = diagram.signals;
    diagram.width = 0; // min width

    diagram.height = 0; // min height
    // Setup some layout stuff

    if (diagram.title) {
      var title = this.title_ = {};
      var bb = this.textBBox(diagram.title, font);
      title.textBB = bb;
      title.message = diagram.title;
      title.width = bb.width + (TITLE_PADDING + TITLE_MARGIN) * 2;
      title.height = bb.height + (TITLE_PADDING + TITLE_MARGIN) * 2;
      title.x = DIAGRAM_MARGIN;
      title.y = DIAGRAM_MARGIN;
      diagram.width += title.width;
      diagram.height += title.height;
    }

    underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].each(actors, underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].bind(function (a) {
      var bb = this.textBBox(a.name, font);
      a.textBB = bb;
      a.x = 0;
      a.y = 0;
      a.width = bb.width + (ACTOR_PADDING + ACTOR_MARGIN) * 2;
      a.height = bb.height + (ACTOR_PADDING + ACTOR_MARGIN) * 2;
      a.distances = [];
      a.paddingRight = 0;
      this.actorsHeight_ = Math.max(a.height, this.actorsHeight_);
    }, this));

    function actorEnsureDistance(a, b, d) {
      assert(a < b, 'a must be less than or equal to b');

      if (a < 0) {
        // Ensure b has left margin
        b = actors[b];
        b.x = Math.max(d - b.width / 2, b.x);
      } else if (b >= actors.length) {
        // Ensure a has right margin
        a = actors[a];
        a.paddingRight = Math.max(d, a.paddingRight);
      } else {
        a = actors[a];
        a.distances[b] = Math.max(d, a.distances[b] ? a.distances[b] : 0);
      }
    }

    underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].each(signals, underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].bind(function (s) {
      // Indexes of the left and right actors involved
      var a;
      var b;
      var bb = this.textBBox(s.message, font);
      s.textBB = bb;
      s.width = bb.width;
      s.height = bb.height;
      var extraWidth = 0;

      if (s.type == 'Signal') {
        s.width += (SIGNAL_MARGIN + SIGNAL_PADDING) * 2;
        s.height += (SIGNAL_MARGIN + SIGNAL_PADDING) * 2;

        if (s.isSelf()) {
          // TODO Self signals need a min height
          a = s.actorA.index;
          b = a + 1;
          s.width += SELF_SIGNAL_WIDTH;
        } else {
          a = Math.min(s.actorA.index, s.actorB.index);
          b = Math.max(s.actorA.index, s.actorB.index);
        }
      } else if (s.type == 'Note') {
        s.width += (NOTE_MARGIN + NOTE_PADDING) * 2;
        s.height += (NOTE_MARGIN + NOTE_PADDING) * 2; // HACK lets include the actor's padding

        extraWidth = 2 * ACTOR_MARGIN;

        if (s.placement == PLACEMENT.LEFTOF) {
          b = s.actor.index;
          a = b - 1;
        } else if (s.placement == PLACEMENT.RIGHTOF) {
          a = s.actor.index;
          b = a + 1;
        } else if (s.placement == PLACEMENT.OVER && s.hasManyActors()) {
          // Over multiple actors
          a = Math.min(s.actor[0].index, s.actor[1].index);
          b = Math.max(s.actor[0].index, s.actor[1].index); // We don't need our padding, and we want to overlap

          extraWidth = -(NOTE_PADDING * 2 + NOTE_OVERLAP * 2);
        } else if (s.placement == PLACEMENT.OVER) {
          // Over single actor
          a = s.actor.index;
          actorEnsureDistance(a - 1, a, s.width / 2);
          actorEnsureDistance(a, a + 1, s.width / 2);
          this.signalsHeight_ += s.height;
          return; // Bail out early
        }
      } else {
        throw new Error('Unhandled signal type:' + s.type);
      }

      actorEnsureDistance(a, b, s.width + extraWidth);
      this.signalsHeight_ += s.height;
    }, this)); // Re-jig the positions


    var actorsX = 0;

    underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].each(actors, function (a) {
      a.x = Math.max(actorsX, a.x); // TODO This only works if we loop in sequence, 0, 1, 2, etc

      underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].each(a.distances, function (distance, b) {
        // lodash (and possibly others) do not like sparse arrays
        // so sometimes they return undefined
        if (typeof distance == 'undefined') {
          return;
        }

        b = actors[b];
        distance = Math.max(distance, a.width / 2, b.width / 2);
        b.x = Math.max(b.x, a.x + a.width / 2 + distance - b.width / 2);
      });

      actorsX = a.x + a.width + a.paddingRight;
    });

    diagram.width = Math.max(actorsX, diagram.width); // TODO Refactor a little

    diagram.width += 2 * DIAGRAM_MARGIN;
    diagram.height += 2 * DIAGRAM_MARGIN + 2 * this.actorsHeight_ + this.signalsHeight_;
    return this;
  },
  // TODO Instead of one textBBox function, create a function for each element type, e.g
  //      layout_title, layout_actor, etc that returns it's bounding box
  textBBox: function textBBox(text, font) {},
  drawTitle: function drawTitle() {
    var title = this.title_;

    if (title) {
      this.drawTextBox(title, title.message, TITLE_MARGIN, TITLE_PADDING, this.font_, ALIGN_LEFT);
    }
  },
  drawActors: function drawActors(offsetY) {
    var y = offsetY;

    underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].each(this.diagram.actors, underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].bind(function (a) {
      // Top box
      this.drawActor(a, y, this.actorsHeight_); // Bottom box

      this.drawActor(a, y + this.actorsHeight_ + this.signalsHeight_, this.actorsHeight_); // Veritical line

      var aX = getCenterX(a);
      this.drawLine(aX, y + this.actorsHeight_ - ACTOR_MARGIN, aX, y + this.actorsHeight_ + ACTOR_MARGIN + this.signalsHeight_);
    }, this));
  },
  drawActor: function drawActor(actor, offsetY, height) {
    actor.y = offsetY;
    actor.height = height;
    this.drawTextBox(actor, actor.name, ACTOR_MARGIN, ACTOR_PADDING, this.font_, ALIGN_CENTER);
  },
  drawSignals: function drawSignals(offsetY) {
    var y = offsetY;

    underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].each(this.diagram.signals, underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].bind(function (s) {
      // TODO Add debug mode, that draws padding/margin box
      if (s.type == 'Signal') {
        if (s.isSelf()) {
          this.drawSelfSignal(s, y);
        } else {
          this.drawSignal(s, y);
        }
      } else if (s.type == 'Note') {
        this.drawNote(s, y);
      }

      y += s.height;
    }, this));
  },
  drawSelfSignal: function drawSelfSignal(signal, offsetY) {
    assert(signal.isSelf(), 'signal must be a self signal');
    var textBB = signal.textBB;
    var aX = getCenterX(signal.actorA);
    var x = aX + SELF_SIGNAL_WIDTH + SIGNAL_PADDING;
    var y = offsetY + SIGNAL_PADDING + signal.height / 2 + textBB.y;
    this.drawText(x, y, signal.message, this.font_, ALIGN_LEFT);
    var y1 = offsetY + SIGNAL_MARGIN + SIGNAL_PADDING;
    var y2 = y1 + signal.height - 2 * SIGNAL_MARGIN - SIGNAL_PADDING; // Draw three lines, the last one with a arrow

    this.drawLine(aX, y1, aX + SELF_SIGNAL_WIDTH, y1, signal.linetype);
    this.drawLine(aX + SELF_SIGNAL_WIDTH, y1, aX + SELF_SIGNAL_WIDTH, y2, signal.linetype);
    this.drawLine(aX + SELF_SIGNAL_WIDTH, y2, aX, y2, signal.linetype, signal.arrowtype);
  },
  drawSignal: function drawSignal(signal, offsetY) {
    var aX = getCenterX(signal.actorA);
    var bX = getCenterX(signal.actorB); // Mid point between actors

    var x = (bX - aX) / 2 + aX;
    var y = offsetY + SIGNAL_MARGIN + 2 * SIGNAL_PADDING; // Draw the text in the middle of the signal

    this.drawText(x, y, signal.message, this.font_, ALIGN_CENTER); // Draw the line along the bottom of the signal

    y = offsetY + signal.height - SIGNAL_MARGIN - SIGNAL_PADDING;
    this.drawLine(aX, y, bX, y, signal.linetype, signal.arrowtype);
  },
  drawNote: function drawNote(note, offsetY) {
    note.y = offsetY;
    var actorA = note.hasManyActors() ? note.actor[0] : note.actor;
    var aX = getCenterX(actorA);

    switch (note.placement) {
      case PLACEMENT.RIGHTOF:
        note.x = aX + ACTOR_MARGIN;
        break;

      case PLACEMENT.LEFTOF:
        note.x = aX - ACTOR_MARGIN - note.width;
        break;

      case PLACEMENT.OVER:
        if (note.hasManyActors()) {
          var bX = getCenterX(note.actor[1]);
          var overlap = NOTE_OVERLAP + NOTE_PADDING;
          note.x = Math.min(aX, bX) - overlap;
          note.width = Math.max(aX, bX) + overlap - note.x;
        } else {
          note.x = aX - note.width / 2;
        }

        break;

      default:
        throw new Error('Unhandled note placement: ' + note.placement);
    }

    return this.drawTextBox(note, note.message, NOTE_MARGIN, NOTE_PADDING, this.font_, ALIGN_LEFT);
  },

  /**
   * Draw text surrounded by a box
   */
  drawTextBox: function drawTextBox(box, text, margin, padding, font, align) {
    var x = box.x + margin;
    var y = box.y + margin;
    var w = box.width - 2 * margin;
    var h = box.height - 2 * margin; // Draw inner box

    this.drawRect(x, y, w, h); // Draw text (in the center)

    if (align == ALIGN_CENTER) {
      x = getCenterX(box);
      y = getCenterY(box);
    } else {
      x += padding;
      y += padding;
    }

    return this.drawText(x, y, text, font, align);
  }
});
/** js sequence diagrams
 *  https://bramp.github.io/js-sequence-diagrams/
 *  (c) 2012-2017 Andrew Brampton (bramp.net)
 *  Simplified BSD license.
 */

/*global Diagram, Snap, WebFont _ */
// TODO Move defintion of font onto the <svg>, so it can easily be override at each level


if (typeof Snap != 'undefined') {
  var xmlns = 'http://www.w3.org/2000/svg';
  var LINE = {
    'stroke': '#000000',
    'stroke-width': 2,
    // BUG TODO This gets set as a style, not as a attribute. Look at  eve.on("snap.util.attr"...
    'fill': 'none'
  };
  var RECT = {
    'stroke': '#000000',
    'stroke-width': 2,
    'fill': '#fff'
  };
  var LOADED_FONTS = {};
  /******************
   * SnapTheme
   ******************/

  var SnapTheme = function SnapTheme(diagram, options, resume) {
    underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].defaults(options, {
      'css-class': 'simple',
      'font-size': 16,
      'font-family': 'Andale Mono, monospace'
    });

    this.init(diagram, options, resume);
  };

  underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].extend(SnapTheme.prototype, BaseTheme.prototype, {
    init: function init(diagram, options, resume) {
      BaseTheme.prototype.init.call(this, diagram);
      this.paper_ = undefined;
      this.cssClass_ = options['css-class'] || undefined;
      this.font_ = {
        'font-size': options['font-size'],
        'font-family': options['font-family']
      };
      var a = this.arrowTypes_ = {};
      a[ARROWTYPE.FILLED] = 'Block';
      a[ARROWTYPE.OPEN] = 'Open';
      var l = this.lineTypes_ = {};
      l[LINETYPE.SOLID] = '';
      l[LINETYPE.DOTTED] = '6,2';
      var that = this;
      this.waitForFont(function () {
        resume(that);
      });
    },
    // Wait for loading of the font
    waitForFont: function waitForFont(callback) {
      var fontFamily = this.font_['font-family'];

      if (typeof WebFont == 'undefined') {
        throw new Error('WebFont is required (https://github.com/typekit/webfontloader).');
      }

      if (LOADED_FONTS[fontFamily]) {
        // If already loaded, just return instantly.
        callback();
        return;
      }

      WebFont.load({
        custom: {
          families: [fontFamily] // TODO replace this with something that reads the css

        },
        classes: false,
        // No need to place classes on the DOM, just use JS Events
        active: function active() {
          LOADED_FONTS[fontFamily] = true;
          callback();
        },
        inactive: function inactive() {
          // If we fail to fetch the font, still continue.
          LOADED_FONTS[fontFamily] = true;
          callback();
        }
      });
    },
    addDescription: function addDescription(svg, description) {
      var desc = document.createElementNS(xmlns, 'desc');
      desc.appendChild(document.createTextNode(description));
      svg.appendChild(desc);
    },
    setupPaper: function setupPaper(container) {
      // Container must be a SVG element. We assume it's a div, so lets create a SVG and insert
      var svg = document.createElementNS(xmlns, 'svg');
      container.appendChild(svg);
      this.addDescription(svg, this.diagram.title || '');
      this.paper_ = Snap(svg);
      this.paper_.addClass('sequence');

      if (this.cssClass_) {
        this.paper_.addClass(this.cssClass_);
      }

      this.beginGroup(); // TODO Perhaps only include the markers if we actually use them.

      var a = this.arrowMarkers_ = {};
      var arrow = this.paper_.path('M 0 0 L 5 2.5 L 0 5 z');
      a[ARROWTYPE.FILLED] = arrow.marker(0, 0, 5, 5, 5, 2.5).attr({
        id: 'markerArrowBlock'
      });
      arrow = this.paper_.path('M 9.6,8 1.92,16 0,13.7 5.76,8 0,2.286 1.92,0 9.6,8 z');
      a[ARROWTYPE.OPEN] = arrow.marker(0, 0, 9.6, 16, 9.6, 8).attr({
        markerWidth: '4',
        id: 'markerArrowOpen'
      });
    },
    layout: function layout() {
      BaseTheme.prototype.layout.call(this);
      this.paper_.attr({
        width: this.diagram.width + 'px',
        height: this.diagram.height + 'px'
      });
    },
    textBBox: function textBBox(text, font) {
      // TODO getBBox will return the bounds with any whitespace/kerning. This makes some of our aligments screwed up
      var t = this.createText(text, font);
      var bb = t.getBBox();
      t.remove();
      return bb;
    },
    // For each drawn element, push onto the stack, so it can be wrapped in a single outer element
    pushToStack: function pushToStack(element) {
      this._stack.push(element);

      return element;
    },
    // Begin a group of elements
    beginGroup: function beginGroup() {
      this._stack = [];
    },
    // Finishes the group, and returns the <group> element
    finishGroup: function finishGroup() {
      var g = this.paper_.group.apply(this.paper_, this._stack);
      this.beginGroup(); // Reset the group

      return g;
    },
    createText: function createText(text, font) {
      text = text.split('\n').map(function (x) {
        return x.trim();
      });
      var t = this.paper_.text(0, 0, text);
      t.attr(font || {});

      if (text.length > 1) {
        // Every row after the first, set tspan to be 1.2em below the previous line
        t.selectAll('tspan:nth-child(n+2)').attr({
          dy: '1.2em',
          x: 0
        });
      }

      return t;
    },
    drawLine: function drawLine(x1, y1, x2, y2, linetype, arrowhead) {
      var line = this.paper_.line(x1, y1, x2, y2).attr(LINE);

      if (linetype !== undefined) {
        line.attr('strokeDasharray', this.lineTypes_[linetype]);
      }

      if (arrowhead !== undefined) {
        line.attr('markerEnd', this.arrowMarkers_[arrowhead]);
      }

      return this.pushToStack(line);
    },
    drawRect: function drawRect(x, y, w, h) {
      var rect = this.paper_.rect(x, y, w, h).attr(RECT);
      return this.pushToStack(rect);
    },

    /**
     * Draws text with a optional white background
     * x,y (int) x,y top left point of the text, or the center of the text (depending on align param)
     * text (string) text to print
     * font (Object)
     * align (string) ALIGN_LEFT or ALIGN_CENTER
     */
    drawText: function drawText(x, y, text, font, align) {
      var t = this.createText(text, font);
      var bb = t.getBBox();

      if (align == ALIGN_CENTER) {
        x = x - bb.width / 2;
        y = y - bb.height / 2;
      } // Now move the text into place
      // `y - bb.y` because text(..) is positioned from the baseline, so this moves it down.


      t.attr({
        x: x - bb.x,
        y: y - bb.y
      });
      t.selectAll('tspan').attr({
        x: x
      });
      this.pushToStack(t);
      return t;
    },
    drawTitle: function drawTitle() {
      this.beginGroup();
      BaseTheme.prototype.drawTitle.call(this);
      return this.finishGroup().addClass('title');
    },
    drawActor: function drawActor(actor, offsetY, height) {
      this.beginGroup();
      BaseTheme.prototype.drawActor.call(this, actor, offsetY, height);
      return this.finishGroup().addClass('actor');
    },
    drawSignal: function drawSignal(signal, offsetY) {
      this.beginGroup();
      BaseTheme.prototype.drawSignal.call(this, signal, offsetY);
      return this.finishGroup().addClass('signal');
    },
    drawSelfSignal: function drawSelfSignal(signal, offsetY) {
      this.beginGroup();
      BaseTheme.prototype.drawSelfSignal.call(this, signal, offsetY);
      return this.finishGroup().addClass('signal');
    },
    drawNote: function drawNote(note, offsetY) {
      this.beginGroup();
      BaseTheme.prototype.drawNote.call(this, note, offsetY);
      return this.finishGroup().addClass('note');
    }
  });
  /******************
   * SnapHandTheme
   ******************/


  var SnapHandTheme = function SnapHandTheme(diagram, options, resume) {
    underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].defaults(options, {
      'css-class': 'hand',
      'font-size': 16,
      'font-family': 'danielbd'
    });

    this.init(diagram, options, resume);
  }; // Take the standard SnapTheme and make all the lines wobbly


  underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].extend(SnapHandTheme.prototype, SnapTheme.prototype, {
    drawLine: function drawLine(x1, y1, x2, y2, linetype, arrowhead) {
      var line = this.paper_.path(handLine(x1, y1, x2, y2)).attr(LINE);

      if (linetype !== undefined) {
        line.attr('strokeDasharray', this.lineTypes_[linetype]);
      }

      if (arrowhead !== undefined) {
        line.attr('markerEnd', this.arrowMarkers_[arrowhead]);
      }

      return this.pushToStack(line);
    },
    drawRect: function drawRect(x, y, w, h) {
      var rect = this.paper_.path(handRect(x, y, w, h)).attr(RECT);
      return this.pushToStack(rect);
    }
  });

  registerTheme('snapSimple', SnapTheme);
  registerTheme('snapHand', SnapHandTheme);
}
/** js sequence diagrams
 *  https://bramp.github.io/js-sequence-diagrams/
 *  (c) 2012-2017 Andrew Brampton (bramp.net)
 *  Simplified BSD license.
 */

/*global Diagram, Raphael, _ */


if (typeof Raphael != 'undefined') {
  var LINE = {
    'stroke': '#000000',
    'stroke-width': 2,
    'fill': 'none'
  };
  var RECT = {
    'stroke': '#000000',
    'stroke-width': 2,
    'fill': '#fff'
  };
  /******************
   * Raphaël extras
   ******************/

  Raphael.fn.line = function (x1, y1, x2, y2) {
    assert(underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].every([x1, x2, y1, y2], underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].isFinite), 'x1,x2,y1,y2 must be numeric');
    return this.path('M{0},{1} L{2},{3}', x1, y1, x2, y2);
  };
  /******************
   * RaphaelTheme
   ******************/


  var RaphaelTheme = function RaphaelTheme(diagram, options, resume) {
    this.init(diagram, underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].defaults(options, {
      'font-size': 16,
      'font-family': 'Andale Mono, monospace'
    }), resume);
  };

  underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].extend(RaphaelTheme.prototype, BaseTheme.prototype, {
    init: function init(diagram, options, resume) {
      BaseTheme.prototype.init.call(this, diagram);
      this.paper_ = undefined;
      this.font_ = {
        'font-size': options['font-size'],
        'font-family': options['font-family']
      };
      var a = this.arrowTypes_ = {};
      a[ARROWTYPE.FILLED] = 'block';
      a[ARROWTYPE.OPEN] = 'open';
      var l = this.lineTypes_ = {};
      l[LINETYPE.SOLID] = '';
      l[LINETYPE.DOTTED] = '-';
      resume(this);
    },
    setupPaper: function setupPaper(container) {
      this.paper_ = new Raphael(container, 320, 200);
      this.paper_.setStart();
    },
    draw: function draw(container) {
      BaseTheme.prototype.draw.call(this, container);
      this.paper_.setFinish();
    },
    layout: function layout() {
      BaseTheme.prototype.layout.call(this);
      this.paper_.setSize(this.diagram.width, this.diagram.height);
    },

    /**
     * Strip whitespace from each newline
     */
    cleanText: function cleanText(text) {
      return text.split('\n').map(function (x) {
        return x.trim();
      }).join('\n');
    },

    /**
     * Returns the text's bounding box
     */
    textBBox: function textBBox(text, font) {
      text = this.cleanText(text);
      font = font || {};
      var p;

      if (font.obj_) {
        p = this.paper_.print(0, 0, text, font.obj_, font['font-size']);
      } else {
        p = this.paper_.text(0, 0, text);
        p.attr(font);
      }

      var bb = p.getBBox();
      p.remove();
      return bb;
    },
    drawLine: function drawLine(x1, y1, x2, y2, linetype, arrowhead) {
      var line = this.paper_.line(x1, y1, x2, y2).attr(LINE);

      if (arrowhead !== undefined) {
        line.attr('arrow-end', this.arrowTypes_[arrowhead] + '-wide-long');
      }

      if (arrowhead !== undefined) {
        line.attr('stroke-dasharray', this.lineTypes_[linetype]);
      }

      return line;
    },
    drawRect: function drawRect(x, y, w, h) {
      return this.paper_.rect(x, y, w, h).attr(RECT);
    },

    /**
     * Draws text with a optional white background
     * x,y (int) x,y top left point of the text, or the center of the text (depending on align param)
     * text (string) text to print
     * font (Object)
     * align (string) ALIGN_LEFT or ALIGN_CENTER
     */
    drawText: function drawText(x, y, text, font, align) {
      text = this.cleanText(text);
      font = font || {};
      align = align || ALIGN_LEFT;
      var paper = this.paper_;
      var bb = this.textBBox(text, font);

      if (align == ALIGN_CENTER) {
        x = x - bb.width / 2;
        y = y - bb.height / 2;
      }

      var t;

      if (font.obj_) {
        // When using a font, we have to use .print(..)
        t = paper.print(x - bb.x, y - bb.y, text, font.obj_, font['font-size']);
      } else {
        t = paper.text(x - bb.x - bb.width / 2, y - bb.y, text);
        t.attr(font);
        t.attr({
          'text-anchor': 'start'
        });
      }

      return t;
    }
  });
  /******************
   * RaphaelHandTheme
   ******************/


  var RaphaelHandTheme = function RaphaelHandTheme(diagram, options, resume) {
    this.init(diagram, underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].defaults(options, {
      'font-size': 16,
      'font-family': 'daniel'
    }), resume);
  }; // Take the standard RaphaelTheme and make all the lines wobbly


  underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].extend(RaphaelHandTheme.prototype, RaphaelTheme.prototype, {
    setupPaper: function setupPaper(container) {
      RaphaelTheme.prototype.setupPaper.call(this, container);
      this.font_.obj_ = this.paper_.getFont('daniel');
    },
    drawLine: function drawLine(x1, y1, x2, y2, linetype, arrowhead) {
      var line = this.paper_.path(handLine(x1, y1, x2, y2)).attr(LINE);

      if (arrowhead !== undefined) {
        line.attr('arrow-end', this.arrowTypes_[arrowhead] + '-wide-long');
      }

      if (arrowhead !== undefined) {
        line.attr('stroke-dasharray', this.lineTypes_[linetype]);
      }

      return line;
    },
    drawRect: function drawRect(x, y, w, h) {
      return this.paper_.path(handRect(x, y, w, h)).attr(RECT);
    }
  });

  registerTheme('raphaelSimple', RaphaelTheme);
  registerTheme('raphaelHand', RaphaelHandTheme);
}
/*!
 * The following copyright notice may not be removed under any circumstances.
 * 
 * Copyright:
 * Copyright (c) 2011 by Daniel Midgley. All rights reserved.
 * 
 * Trademark:
 * Please refer to the Copyright section for the font trademark attribution
 * notices.
 * 
 * Full name:
 * Daniel-Bold
 * 
 * Description:
 * Daniel Bold is a font by Daniel Midgley.
 * 
 * Designer:
 * Daniel Midgley
 * 
 * Vendor URL:
 * http://goodreasonblog.blogspot.com/p/fontery.html
 * 
 * License information:
 * http://creativecommons.org/licenses/by-nd/3.0/
 */


if (typeof Raphael != 'undefined') {
  Raphael.registerFont({
    "w": 209,
    "face": {
      "font-family": "Daniel",
      "font-weight": 700,
      "font-stretch": "normal",
      "units-per-em": "360",
      "panose-1": "2 11 8 0 0 0 0 0 0 0",
      "ascent": "288",
      "descent": "-72",
      "x-height": "7",
      "bbox": "-92.0373 -310.134 519 184.967",
      "underline-thickness": "3.51562",
      "underline-position": "-25.1367",
      "unicode-range": "U+0009-U+F002"
    },
    "glyphs": {
      " ": {
        "w": 179
      },
      "\t": {
        "w": 179
      },
      "\r": {
        "w": 179
      },
      "!": {
        "d": "66,-306v9,3,18,11,19,24v-18,73,-20,111,-37,194v0,10,2,34,-12,34v-12,0,-18,-9,-18,-28v0,-85,23,-136,38,-214v1,-7,4,-10,10,-10xm25,-30v15,-1,28,34,5,35v-11,-1,-38,-36,-5,-35",
        "w": 115
      },
      "\"": {
        "d": "91,-214v-32,3,-25,-40,-20,-68v3,-16,7,-25,12,-27v35,13,14,56,8,95xm8,-231v4,-31,1,-40,18,-75v37,7,11,51,11,79v-3,3,-4,8,-5,13v-17,4,-16,-10,-24,-17",
        "w": 117
      },
      "#": {
        "d": "271,-64v-30,26,-96,-7,-102,51v-6,2,-13,2,-24,-2v-2,-11,10,-21,2,-28v-14,5,-48,0,-48,22v0,23,-11,14,-29,10v-7,-6,6,-19,-1,-24r-32,4v-19,-8,-15,-24,5,-28r33,-6v4,0,24,-23,11,-27v-26,0,-63,14,-74,-10v3,-1,9,-17,16,-10v15,-8,81,4,89,-30v8,-14,16,-34,24,-38v23,9,24,38,5,49v37,24,55,-38,72,-43v19,10,20,23,-1,45v2,8,23,1,29,4v3,3,6,6,10,11v-14,13,-20,12,-45,12v-17,0,-16,17,-19,29v18,-7,49,3,67,-2v4,0,8,4,12,11xm161,-104v-30,-1,-44,10,-44,37v14,1,24,0,40,-5v0,-1,3,-10,8,-26v0,-4,-1,-6,-4,-6",
        "w": 285
      },
      "$": {
        "d": "164,-257v29,4,1,42,-3,50v5,5,38,13,41,24v8,4,6,15,-2,21v-18,3,-36,-17,-49,-17v-17,1,-31,40,-28,48v5,4,8,8,9,10v13,1,35,37,28,44v-10,21,-36,20,-65,28v-10,10,-12,40,-17,51v-9,-3,-28,1,-18,-17v0,-13,5,-24,-1,-35v-18,1,-59,-10,-42,-29v21,0,56,16,55,-16v5,-4,9,-18,9,-26v-14,-15,-55,-41,-53,-65v2,-33,56,-19,98,-26v10,-14,31,-43,38,-45xm93,-152v11,-10,15,-15,14,-29v-17,-3,-37,1,-43,6v10,12,20,19,29,23xm111,-103v-8,1,-11,12,-10,22v10,0,28,2,27,-8v0,-4,-13,-15,-17,-14",
        "w": 225
      },
      "%": {
        "d": "181,-96v24,-7,67,-13,104,1v14,18,21,19,22,44v-13,43,-99,61,-146,36v-9,-9,-22,-11,-32,-29v0,-27,24,-53,52,-52xm139,-185v-9,68,-138,73,-131,-5v0,-3,3,-9,9,-17v13,1,27,1,17,-16v5,-39,63,0,93,-6v36,1,80,-9,102,11v15,32,12,32,-8,56v-16,21,-103,78,-152,125r-14,28v-23,11,-25,-7,-29,-20v34,-71,133,-98,171,-162v-13,-12,-52,-5,-61,1v0,1,1,3,3,5xm38,-190v0,34,55,29,70,8v0,-14,-20,-11,-32,-14v-14,-3,-24,-9,-40,-10v1,0,5,11,2,16xm172,-53v12,27,90,18,102,-5v-18,-7,-32,-10,-40,-10v-29,3,-57,-4,-62,15",
        "w": 308
      },
      "&": {
        "d": "145,-82v17,-8,47,-15,71,-26v13,2,25,12,9,23v-23,7,-40,16,-53,27r0,6v13,8,30,21,36,38v0,8,-4,12,-11,12v-19,0,-43,-39,-59,-44v-30,12,-65,29,-97,32v-32,3,-45,-41,-23,-63v21,-20,52,-26,70,-48v-4,-31,-12,-47,9,-73v13,-16,20,-29,23,-39v15,-15,32,-22,51,-22v30,9,62,64,32,96v-2,3,-47,42,-69,48v-15,8,-11,9,0,22v6,7,10,11,11,11xm114,-138v25,-13,62,-38,74,-62v0,-9,-10,-31,-20,-29v-28,7,-60,42,-60,75v0,10,2,15,6,16xm99,-91v-18,10,-54,18,-59,45v26,5,61,-12,77,-22v-1,-5,-13,-23,-18,-23",
        "w": 253
      },
      "'": {
        "d": "36,-182v-36,7,-34,-61,-17,-80v15,1,21,19,21,20r-1,-1v0,0,-1,12,-5,35v1,5,3,17,2,26",
        "w": 63
      },
      "(": {
        "d": "130,-306v13,2,23,43,-1,43v-49,43,-77,77,-90,148v5,49,27,67,64,101v4,14,5,6,2,19r-15,0v-35,-17,-79,-58,-79,-120v0,-58,66,-176,119,-191",
        "w": 120
      },
      ")": {
        "d": "108,-138v-2,73,-48,120,-98,153v-17,-5,-16,-20,-6,-31v52,-64,73,-62,74,-135v1,-42,-40,-98,-58,-128v0,-5,-1,-12,-2,-22v18,-18,25,0,42,27v25,39,50,66,48,136",
        "w": 120
      },
      "*": {
        "d": "121,-271v15,-5,36,-8,40,9v-5,10,-31,19,-47,31v0,11,34,43,14,53v-18,8,-24,-24,-34,-20v-4,10,-4,19,-12,41v-25,7,-15,-30,-17,-47v-13,-1,-17,9,-46,30r-10,0v-20,-32,37,-43,54,-64v-10,-11,-36,-33,-16,-51v3,0,14,8,33,24v8,-10,26,-39,32,-42v14,7,15,23,9,36",
        "w": 177
      },
      "+": {
        "d": "163,-64v-7,22,-65,2,-77,21v-2,10,-6,21,-11,35v-20,4,-21,-12,-19,-29v3,-23,-44,6,-39,-27v-8,-22,36,-8,49,-18v8,-13,6,-36,24,-40v19,-4,14,32,11,39v18,3,19,2,54,8v2,1,5,5,8,11",
        "w": 170
      },
      ",": {
        "d": "25,63v-26,21,-48,-2,-22,-24v14,-12,35,-40,35,-69v3,-2,3,-11,12,-9v35,17,5,88,-25,102",
        "w": 97
      },
      "-": {
        "d": "57,-94v19,4,55,-5,54,17v-15,23,-54,20,-91,15v-4,2,-13,-10,-11,-16v-1,-22,28,-15,48,-16",
        "w": 124
      },
      ".": {
        "d": "40,-48v21,20,21,44,-4,44v-33,0,-26,-24,-10,-44r14,0",
        "w": 67
      },
      "\/": {
        "d": "21,20v-22,-45,21,-95,41,-126v38,-57,115,-158,193,-201v2,0,4,3,7,11v11,29,-15,34,-25,55v-81,56,-189,208,-197,261r-19,0",
        "w": 275
      },
      "0": {
        "d": "78,-237v70,-47,269,-41,270,59v0,34,-11,53,-29,76v-13,35,-30,32,-85,64v-6,2,-10,6,-7,8v-73,14,-98,38,-173,1v-7,-13,-52,-48,-46,-88v9,-57,27,-75,70,-120xm123,-38v100,0,202,-46,195,-153v-32,-55,-144,-73,-211,-35v-16,34,-68,54,-53,108v6,25,1,22,-3,39v6,24,41,41,72,41",
        "w": 353
      },
      "1": {
        "d": "39,-208v0,-14,6,-59,29,-39v3,4,6,13,10,24r-22,128r8,87v-4,6,-9,3,-16,2v-44,-38,-9,-137,-9,-202",
        "w": 93
      },
      "2": {
        "d": "88,-35v47,-10,119,-24,168,-9v0,12,-23,13,-35,16v1,1,3,1,5,1v-74,8,-118,23,-194,23v-14,0,-20,-13,-21,-28v55,-40,83,-61,123,-104v26,-13,65,-67,71,-102v-1,-9,-11,-16,-22,-16v-20,-1,-120,29,-156,49v-10,-2,-30,-20,-10,-28v50,-21,111,-51,178,-48v25,10,44,22,36,39v12,30,-19,64,-34,83v-39,48,-37,39,-115,109v0,5,-3,8,-8,11v4,3,8,4,14,4",
        "w": 265
      },
      "3": {
        "d": "188,-282v34,-10,74,25,47,51v-19,32,-55,50,-92,70v28,14,116,25,108,70v8,14,-49,40,-63,48v-29,9,-130,22,-168,42v-6,-5,-19,-7,-12,-22v56,-36,175,-21,210,-76v-9,-20,-88,-42,-97,-33v-20,-1,-41,2,-56,-7r5,-21v56,-25,103,-36,137,-78v1,-1,2,-5,4,-11v-15,-14,-56,7,-79,0v-10,9,-73,22,-92,31v-11,-4,-28,-23,-13,-30v50,-22,96,-26,154,-37v0,-1,8,3,7,3",
        "w": 260
      },
      "4": {
        "d": "79,-249v-7,17,-29,75,-33,96v0,6,3,8,8,8v43,-2,111,6,141,-6v17,-47,20,-100,63,-148v9,4,16,7,21,10v-17,31,-44,95,-51,141v7,4,24,-4,23,10v-1,16,-29,12,-31,23v-10,22,-9,69,-7,103v-3,2,-7,5,-10,9v-47,-11,-23,-74,-16,-114v0,-4,-2,-6,-7,-6v-65,2,-89,13,-162,4v-22,-22,-2,-53,5,-76v16,-15,17,-57,35,-70v6,-1,21,11,21,16",
        "w": 267
      },
      "5": {
        "d": "185,-272v30,7,45,-8,53,18v1,16,-17,18,-34,14v0,0,-95,-11,-129,1v-6,9,-24,33,-29,54v76,10,171,5,214,47v11,11,22,30,5,52v-14,12,-30,14,-34,27v-26,11,-141,63,-157,60v-16,-2,-25,-19,-4,-27v48,-18,128,-39,170,-86v4,-14,-65,-41,-85,-41r-92,0v-10,-4,-66,-1,-57,-23v0,-23,23,-51,35,-83v11,-28,133,-10,144,-13",
        "w": 284
      },
      "6": {
        "d": "70,-64v9,-51,63,-74,123,-71v43,2,109,3,111,41r-25,47v0,1,1,2,2,3v-5,0,-39,10,-41,20v-15,3,-22,4,-22,11v-39,1,-77,20,-119,13v-42,-7,-35,-9,-77,-46v-56,-118,94,-201,176,-229v7,0,21,8,20,15v-2,17,-23,15,-43,24v-69,31,-119,72,-134,145v-5,25,36,68,78,64v59,-6,128,-18,153,-61v-7,-14,-13,-9,-32,-21v-67,-15,-118,-5,-150,43r0,12v-13,4,-17,-3,-20,-10",
        "w": 310
      },
      "7": {
        "d": "37,-228v33,-14,173,-17,181,-19v28,-1,24,31,9,45v-17,15,-45,49,-59,69v-17,26,-55,67,-61,113v-10,13,-9,14,-14,20v-33,-13,-20,-25,-11,-53v16,-48,73,-115,109,-156v2,-7,5,-14,-10,-12v-26,4,-54,6,-76,13v-23,-5,-83,31,-94,-9v2,-8,18,-19,26,-11",
        "w": 245
      },
      "8": {
        "d": "57,-236v40,-50,166,-51,213,-10v22,28,10,63,-22,78r-35,17v8,5,54,24,53,44v-5,14,-4,33,-18,42v-13,13,-35,18,-44,34v-60,27,-190,49,-194,-42v7,-41,17,-54,59,-70r0,-4v-32,-9,-73,-62,-26,-85v4,0,8,-2,14,-4xm142,-160v24,-2,160,-31,99,-72v-28,-18,-108,-33,-146,-5v-16,12,-28,30,-33,59v24,12,37,20,80,18xm41,-62v30,65,189,6,199,-37v3,-14,-60,-30,-74,-30v-70,0,-118,10,-125,67",
        "w": 290
      },
      "9": {
        "d": "11,-192v15,-49,119,-61,161,-23v16,15,27,55,11,79v-20,62,-51,79,-96,118v-10,4,-45,27,-50,6v9,-15,66,-52,98,-99v-7,-7,-8,-3,-25,0v-49,-11,-96,-25,-99,-81xm145,-131v7,-5,13,-34,13,-41v-2,-51,-104,-38,-114,-6v-2,10,37,35,46,35v23,1,43,-1,55,12",
        "w": 198
      },
      ":": {
        "d": "39,-125v15,-8,40,-1,40,15v0,15,-6,22,-19,22v-13,0,-29,-21,-21,-37xm66,-17v-8,27,-51,19,-46,-8v-1,-6,8,-22,14,-20v29,0,30,6,32,28",
        "w": 95
      },
      ";": {
        "d": "56,-93v2,-30,37,-22,40,2v0,2,-1,7,-3,15v-13,8,-15,6,-27,4xm64,-44v11,-11,30,-4,32,14v-21,39,-63,71,-92,85v-5,0,-11,-2,-18,-8v11,-23,36,-36,50,-61v11,-7,19,-20,28,-30",
        "w": 107
      },
      "<": {
        "d": "166,-202v12,0,29,15,24,29v0,4,-119,64,-120,73v15,21,89,64,91,86v2,29,-18,12,-30,15v-27,-29,-59,-54,-95,-75v-18,-10,-25,-13,-24,-41",
        "w": 176
      },
      "=": {
        "d": "125,-121v18,7,55,-9,69,14v0,17,-45,26,-135,26v-18,0,-27,-7,-27,-21v-1,-37,60,-5,93,-19xm138,-71v20,0,48,-1,50,16v-13,24,-86,32,-131,29v-29,-2,-43,-10,-43,-24v-7,-23,36,-14,39,-17v27,6,57,-4,85,-4",
        "w": 196
      },
      ">": {
        "d": "4,-14v20,-48,77,-59,118,-94v-16,-19,-58,-52,-81,-75v-11,-7,-15,-38,-1,-40v33,16,83,71,121,105v26,23,-6,35,-41,53v-29,16,-56,28,-73,54v-21,15,-16,20,-34,15v-3,0,-9,-16,-9,-18",
        "w": 174
      },
      "?": {
        "d": "105,-291v57,-13,107,-4,107,39v0,67,-136,85,-155,137v-1,6,10,23,-4,23v-23,1,-33,-35,-23,-57v31,-41,124,-60,149,-103v-8,-21,-72,-5,-88,-1v-23,6,-59,39,-71,8v0,0,-1,0,1,-17v10,-4,45,-20,84,-29xm80,-25v-6,4,-8,39,-24,22v-24,3,-22,-21,-13,-35v17,-7,29,5,37,13",
        "w": 216
      },
      "@": {
        "d": "218,-207v23,8,42,14,47,37v44,68,-27,137,-87,85r1,0v0,2,-59,19,-61,17v-35,0,-42,-47,-17,-68r0,-4v-19,-1,-45,37,-49,40v-37,76,58,72,121,62v11,-2,34,-13,36,3v-14,31,-69,31,-114,33v-51,2,-99,-41,-80,-92v2,-30,22,-40,42,-63v35,-20,91,-53,161,-50xm217,-101v23,0,35,-19,35,-41v0,-43,-75,-41,-102,-19v36,3,55,16,62,41v-6,5,-6,19,5,19xm127,-110v8,5,51,-15,28,-16v-4,0,-25,4,-28,16",
        "w": 291
      },
      "A": {
        "d": "97,-81v-23,-10,-39,38,-52,60v-8,6,-8,6,-22,18v-22,-7,-23,-37,-4,-49v7,-8,11,-15,15,-23r-1,1v-14,-26,23,-29,31,-40v1,-1,15,-29,26,-36v17,-31,39,-58,54,-92v16,-20,20,-51,41,-66v29,5,34,62,45,92v9,64,21,103,49,155v-3,25,-44,11,-54,0v-34,-12,-97,-29,-128,-20xm107,-118v20,6,80,10,111,17v6,-7,-4,-15,-7,-24v-11,-28,-9,-92,-30,-117v-9,9,-19,44,-34,55v-9,23,-27,40,-40,69",
        "w": 294
      },
      "B": {
        "d": "256,-179v41,10,115,34,91,91v-6,3,-14,12,-19,20v-37,19,-50,34,-63,25v-9,10,-12,11,-34,13r3,-3v-4,-4,-12,-4,-18,0v0,0,2,2,5,4v-21,14,-26,6,-44,15v-4,0,-7,-2,-8,-5v-6,11,-20,-5,-18,11v-36,4,-91,35,-114,4v-7,-62,-10,-138,4,-199v-1,-19,-37,2,-37,-27v0,-8,2,-13,6,-15v68,-31,231,-92,311,-39v8,12,12,20,12,25v-8,42,-32,49,-77,80xm79,-160v72,-17,135,-39,184,-70v20,-13,31,-23,31,-27v1,-6,-30,-13,-38,-12v-54,0,-116,13,-186,41v11,21,1,48,9,68xm262,-43v0,-4,3,-6,-4,-5v0,1,1,2,4,5xm211,-140v-34,7,-94,24,-139,15v-6,20,-4,56,-4,82v0,29,43,1,56,2v48,-11,108,-25,154,-48v20,-10,32,-17,32,-25v0,-18,-33,-26,-99,-26xm195,-20v6,1,6,-2,5,-7v-3,2,-7,2,-5,7",
        "w": 364
      },
      "C": {
        "d": "51,-114v-12,75,96,76,166,71r145,-10v9,2,9,5,9,18v-37,18,-85,28,-109,22v-18,10,-47,10,-71,10v-29,0,-68,1,-105,-11v-6,-1,-10,-3,-10,-8v-33,-13,-48,-33,-66,-59v-19,-114,146,-150,224,-177v35,0,88,-31,99,7v-1,29,-49,14,-76,28v-55,8,-115,35,-175,71v-13,8,-23,21,-31,38",
        "w": 376
      },
      "D": {
        "d": "312,-78v-2,1,-3,7,-10,5v6,-3,10,-4,10,-5xm4,-252v2,-27,83,-38,106,-39v130,-7,267,1,291,109v0,0,-2,8,-3,25v-5,9,-4,28,-23,34v-4,4,-2,5,-7,0v-3,3,-15,7,-5,10v0,0,-10,14,-13,2v-11,1,-8,5,-20,14v1,2,7,3,9,1v-4,13,-22,13,-11,4v0,-3,1,-6,-3,-5v-40,29,-103,38,-141,65v10,6,22,-7,34,-3v-41,20,-127,44,-171,46v-21,1,-47,-33,-11,-39v15,-2,43,-6,56,-11v-16,-101,-5,-130,9,-207v2,0,4,-1,6,-3v-16,-17,-91,38,-103,-3xm297,-69v-7,3,-17,8,-25,7v1,1,3,2,5,2v-4,2,-11,5,-23,9v4,-11,30,-21,43,-18xm240,-51v10,0,12,2,0,6r0,-6xm220,-36v-1,-3,4,-6,6,-3v0,1,-2,1,-6,3xm125,-48v16,6,137,-46,155,-53v29,-18,101,-44,82,-93v-21,-53,-84,-61,-168,-67v-20,7,-50,3,-77,8v33,54,-12,132,8,205xm159,-22v-4,-1,-15,-5,-15,2v7,-1,12,-2,15,-2",
        "w": 381
      },
      "E": {
        "d": "45,-219v-19,-36,34,-41,63,-36v44,-10,133,-8,194,-15v3,2,38,11,52,15v-73,19,-171,21,-246,38v-9,11,-16,32,-20,61v35,11,133,-6,183,3v1,6,2,7,3,14v-46,24,-118,16,-193,27v-15,13,-22,52,-22,66v60,1,121,-20,188,-20v22,10,53,-7,74,5v16,29,-23,26,-43,32v-73,4,-139,13,-216,27r-52,-10v-4,-22,23,-69,26,-98v-3,0,-10,-15,-12,-24v20,-12,34,-23,35,-67v2,-1,5,-5,5,-7v0,-4,-14,-11,-19,-11",
        "w": 353
      },
      "F": {
        "d": "270,-258v13,2,59,6,48,34v-78,-3,-143,1,-212,22v-10,16,-21,43,-24,69r145,-9v8,3,29,-3,16,21v-14,-1,-59,13,-60,7v-12,13,-67,18,-108,21v-2,1,-4,3,-7,6v-2,23,-8,43,-7,69v1,28,-30,11,-40,5r10,-80r-26,-14v5,-10,10,-33,28,-25v21,-3,15,-46,26,-59v-1,-3,-32,-13,-28,-24v2,-22,45,-16,59,-30v47,4,99,-14,151,-9v5,-3,25,-3,29,-4",
        "w": 236
      },
      "G": {
        "d": "311,-168v53,0,94,57,74,110v-31,37,-71,34,-136,52v-13,-7,-41,10,-57,7v-73,-1,-122,-17,-162,-59v-49,-51,-24,-80,5,-130v35,-61,138,-93,214,-106v16,4,42,-1,40,21v-5,40,-39,2,-73,21v-76,19,-162,65,-177,142v28,103,237,76,312,29v2,-3,3,-7,3,-13v-10,-35,-37,-43,-87,-45v-16,-13,-53,-9,-78,1v-4,-3,-5,-7,-5,-11v17,-29,73,-17,108,-24v12,4,18,5,19,5",
        "w": 391
      },
      "H": {
        "d": "300,-268v18,12,19,32,4,51v-35,44,-34,140,-46,217v-1,5,-5,13,-11,12v-6,1,-19,-14,-18,-27r7,-106v-28,7,-76,22,-116,14v-18,2,-36,6,-55,3v-43,-8,-14,53,-33,75v-29,1,-26,-67,-21,-97v5,-31,28,-73,43,-98v2,2,7,3,14,3v13,33,-11,48,-13,78v61,4,118,2,176,2v8,0,13,-6,15,-20v4,-47,21,-87,54,-107",
        "w": 288
      },
      "I": {
        "d": "63,-266v34,10,-4,105,-8,128r-24,126v-2,2,-3,1,-9,6v-12,-10,-12,-15,-12,-47v0,-93,9,-156,28,-188v10,-17,19,-25,25,-25",
        "w": 79
      },
      "J": {
        "d": "235,-291v26,11,31,104,31,142v0,37,-2,95,-32,126v-33,34,-121,26,-167,1v-18,-11,-54,-29,-59,-59v0,-3,5,-15,16,-14v31,36,90,57,162,51v63,-30,56,-148,32,-226v-1,-16,11,-13,17,-21",
        "w": 282
      },
      "K": {
        "d": "212,-219v17,-5,80,-60,80,-19v0,9,-2,14,-5,16r-132,78v-34,23,-54,32,-21,50v39,21,74,23,124,41v5,2,7,5,7,9v-4,24,-55,15,-79,8v-67,-19,-98,-36,-116,-83v9,-24,38,-35,66,-61v7,-4,49,-30,76,-39xm47,-194v11,-20,11,-45,31,-55v2,2,4,3,6,0v29,39,-21,96,-18,128v-17,24,-15,62,-29,113v-4,3,-10,7,-19,11v-12,-13,-10,-28,-8,-53v3,-31,17,-79,37,-144",
        "w": 270
      },
      "L": {
        "d": "84,-43v58,0,179,-27,242,-4v3,17,-29,24,-40,26v-85,-4,-202,46,-268,3v-24,-16,-2,-33,-4,-57v26,-76,38,-108,86,-191v14,-7,26,-50,45,-32v6,22,5,31,-12,46v-20,39,-50,82,-67,142v-7,6,-19,46,-19,54v0,9,12,13,37,13",
        "w": 331
      },
      "M": {
        "d": "174,-236v-1,52,-11,92,-7,143v10,5,15,-12,22,-18v42,-55,90,-130,136,-174r15,-18v42,2,32,53,11,80v-12,58,-54,143,-34,210v0,3,-3,12,-9,10v-31,-5,-32,-57,-27,-92v4,-27,12,-58,25,-93v-5,-10,5,-19,6,-30v-46,44,-66,110,-129,172v-11,10,-18,15,-22,15v-34,6,-28,-103,-28,-152v-28,22,-65,119,-96,170v-9,15,-34,3,-31,-19v30,-64,91,-177,139,-229v12,-1,29,13,29,25",
        "w": 343
      },
      "N": {
        "d": "248,-20v-3,17,-37,18,-43,3v-24,-35,-53,-145,-80,-203v-32,40,-55,120,-92,174v-13,3,-26,-13,-27,-22r87,-171v4,-13,20,-57,42,-32v42,48,46,139,82,198v29,-45,46,-88,65,-153v12,-19,23,-42,38,-60v27,-1,14,18,4,44v-6,46,-32,68,-37,121v-15,29,-33,69,-39,101",
        "w": 307
      },
      "O": {
        "d": "240,-268v85,1,163,29,150,125v13,7,-12,18,-5,26v-23,63,-133,112,-228,124v-80,-16,-171,-56,-148,-153v11,-47,20,-43,53,-83v17,-9,39,-22,73,-29v45,-10,81,-10,105,-10xm363,-156v16,-51,-62,-85,-111,-79v-25,-11,-50,8,-81,0v-15,10,-70,16,-85,31v6,20,-27,24,-39,45v-42,75,40,128,115,128v56,0,209,-71,201,-125",
        "w": 383
      },
      "P": {
        "d": "70,-225v-7,-12,-36,16,-49,19v-4,0,-9,-5,-14,-17v21,-47,114,-55,172,-59v41,-3,132,33,99,87v-21,34,-72,59,-144,80v-2,16,-79,3,-74,46v3,25,-5,47,-10,68v-22,-1,-23,-29,-22,-56v2,-25,-20,-32,-8,-50v21,-5,10,-35,25,-57v6,-28,14,-48,25,-61xm71,-229v47,14,-2,50,-1,99v41,-3,113,-37,173,-76v5,-9,8,-14,8,-15v-28,-47,-125,-29,-180,-8",
        "w": 252
      },
      "Q": {
        "d": "374,-217v20,59,-11,127,-48,156r30,38v-1,6,-8,16,-14,9v-3,0,-19,-9,-47,-26v-72,35,-173,75,-236,12v-70,-40,-67,-213,26,-217r8,5v24,-20,72,-48,112,-38v21,-4,22,-1,50,-2v66,-2,94,20,119,63xm296,-88v13,5,61,-49,63,-84v4,-62,-54,-78,-119,-76v-14,-6,-49,5,-71,3v-42,16,-89,41,-93,94v-9,11,1,25,-7,38v-12,-19,-7,-67,-1,-88v-56,30,-37,137,19,155v27,17,92,19,119,0v12,-2,29,-9,52,-20v2,-2,3,-3,3,-6v-11,-12,-46,-27,-54,-56v0,-13,3,-19,9,-19v18,1,60,52,80,59",
        "w": 379
      },
      "R": {
        "d": "100,-275v96,-23,196,-10,208,78v-3,18,-17,52,-49,62v-14,20,-54,23,-79,40v-2,0,-14,2,-36,6v-40,8,-30,14,-3,33v37,27,52,30,118,55v16,6,31,23,12,27v-58,-2,-104,-29,-143,-61v-14,-3,-16,-15,-39,-27v-23,-19,-28,-12,-15,-38v63,-19,111,-15,163,-53v27,-20,43,-36,43,-49v0,-64,-120,-62,-173,-38v-9,4,-38,9,-40,18v-10,32,-16,70,-13,116v-10,21,-8,47,-6,75v2,31,-9,29,-27,22v-9,-55,5,-140,15,-190v-8,-6,-24,10,-24,-11v0,-34,16,-34,42,-55v2,-1,17,-4,46,-10",
        "w": 297
      },
      "S": {
        "d": "13,-3v-7,-3,-22,-18,-5,-22v68,-15,119,-32,154,-45v51,-19,39,-34,3,-53v-46,-25,-82,-30,-121,-64v-33,-29,-50,-35,-25,-58v37,-20,119,-29,181,-29v29,0,44,6,44,18v-9,26,-62,6,-104,14v-17,2,-72,6,-92,16v37,53,132,58,180,111v8,9,11,20,11,30v-4,17,-23,35,-42,34v-21,16,-17,1,-49,17v-14,7,-41,9,-56,20v-25,-3,-49,10,-79,11",
        "w": 234
      },
      "T": {
        "d": "141,-3v-36,-6,1,-49,-3,-79v10,-19,6,-35,15,-64r26,-85v-51,-9,-100,10,-141,14v-16,2,-30,-26,-11,-32v26,-8,143,-8,179,-19r12,6v67,-2,142,-1,200,-1v8,0,14,3,19,10v-18,16,-74,3,-103,14v-48,-4,-60,4,-113,7v-42,22,-36,130,-58,187v1,12,-9,44,-22,42",
        "w": 277
      },
      "U": {
        "d": "365,-262v13,56,-22,104,-36,141v-19,22,-30,38,-57,56v-4,18,-60,35,-78,50v-53,28,-142,0,-161,-34v-31,-56,-37,-108,-11,-164v17,-33,29,-50,48,-29v-2,2,-3,7,-4,13v-44,36,-38,149,7,174v30,26,55,19,102,4v56,-17,66,-34,120,-76v12,-24,56,-68,46,-122r0,-16v0,1,-1,3,-1,6v4,-13,11,-10,25,-3",
        "w": 368
      },
      "V": {
        "d": "246,-258v21,-22,31,-26,44,-8v1,1,-12,22,-28,35v-15,25,-41,38,-56,69v-13,15,-20,31,-28,57v-15,13,-11,29,-27,72v3,21,-5,24,-27,27v-33,-45,-54,-118,-84,-167v-5,-26,-18,-50,-25,-76v-3,-12,24,-8,29,-5v8,13,18,52,26,70r52,115v9,-2,4,-9,10,-21r25,-47v25,-44,46,-76,89,-121",
        "w": 234
      },
      "W": {
        "d": "31,-213v16,46,17,106,41,151v31,-35,49,-89,76,-127v30,-15,39,27,52,56v10,22,21,48,35,67v2,0,4,-1,5,-3v16,-28,50,-76,79,-121v14,-21,40,-63,64,-83r5,8v-30,58,-76,110,-97,173v-18,28,-25,37,-33,63v-11,1,-16,25,-30,15v-21,-31,-44,-89,-62,-131v0,-2,-1,-3,-5,-5v-17,11,-16,36,-31,50v-20,33,-20,84,-68,94v-24,-19,-23,-81,-39,-111v-1,-15,-29,-94,-10,-108v9,2,12,5,18,12",
        "w": 331
      },
      "X": {
        "d": "143,-183v43,-25,69,-36,126,-62v22,-10,86,-10,56,21v-51,3,-158,61,-154,64v10,15,41,30,50,52v27,17,46,60,70,82v9,14,-6,30,-24,20v-35,-43,-75,-100,-116,-132v-48,13,-100,47,-118,94v-1,49,-26,34,-27,4v-1,-26,13,-27,17,-48v22,-27,68,-55,90,-77v-9,-12,-60,-39,-79,-57v-6,-10,-6,-25,12,-25",
        "w": 312
      },
      "Y": {
        "d": "216,-240v19,-14,42,10,22,26v-54,66,-121,109,-156,197v-8,21,-11,15,-30,4v3,-37,27,-61,33,-76v12,-12,15,-19,32,-42v-8,-6,-40,5,-45,5v-48,-6,-69,-65,-56,-113v14,0,13,-1,24,7v2,33,12,75,42,73v36,-2,102,-57,134,-81",
        "w": 189
      },
      "Z": {
        "d": "60,-255v66,12,200,-34,240,21v-13,42,-63,62,-98,89v-19,15,-47,33,-82,55v-25,16,-47,32,-66,47v58,24,129,-6,208,-6v23,0,36,12,13,19v-33,2,-53,5,-86,10v-32,18,-88,15,-135,15v-9,-1,-55,-1,-48,-29v1,-24,30,-24,40,-41v64,-50,151,-86,208,-147v-38,-17,-155,12,-198,-4v0,0,-11,-33,4,-29",
        "w": 310
      },
      "[": {
        "d": "72,-258r-15,250v30,4,55,-3,80,-6v7,-1,8,17,9,23v-28,15,-73,23,-121,21v-7,0,-10,-6,-10,-17v0,-60,25,-193,22,-288v0,-16,13,-20,33,-19v9,-3,34,-12,51,-12v16,0,15,16,19,29v-16,7,-48,10,-68,19",
        "w": 151
      },
      "\\": {
        "d": "236,38v20,-18,-8,-74,-13,-90v-44,-78,-112,-190,-200,-253v-2,0,-5,4,-7,12v-11,31,13,36,24,58v74,61,174,219,180,273r16,0",
        "w": 257
      },
      "]": {
        "d": "133,-258v-23,-13,-84,6,-85,-32v0,-10,5,-15,14,-15v0,0,30,2,90,7v10,1,15,13,15,36v2,7,-8,59,-13,112r-11,125v-9,48,9,90,-59,71v-20,-4,-39,-1,-59,-4v-5,-10,-25,-12,-14,-30v8,-3,61,-13,78,-8v14,1,8,-7,10,-17v15,-69,21,-166,34,-245",
        "w": 171
      },
      "^": {
        "d": "68,-306v20,15,47,36,58,60v-1,4,0,7,-9,7v-26,0,-47,-38,-49,-32v-15,9,-41,50,-54,30v-2,-31,17,-23,33,-51v8,-9,15,-14,21,-14",
        "w": 135
      },
      "_": {
        "d": "11,15v-8,33,18,45,50,34r205,2r197,-5v11,-5,14,-9,7,-28v-95,-21,-258,-10,-376,-10v-25,0,-72,-3,-83,7",
        "w": 485
      },
      "`": {
        "d": "75,-264v16,8,56,14,39,43v-30,-8,-65,-23,-105,-44v-1,-3,-3,-28,5,-25v16,5,44,17,61,26",
        "w": 129
      },
      "a": {
        "d": "124,-56v10,4,59,41,65,50v1,7,-6,17,-12,17r-60,-30v-22,2,-42,21,-65,19v-33,4,-68,-67,-15,-81v41,-27,96,-39,110,9v0,6,-4,12,-11,16v-33,-25,-67,-5,-88,12v10,16,61,-18,76,-12",
        "w": 196
      },
      "b": {
        "d": "80,-140v69,1,123,0,134,52v5,26,-71,71,-97,70v-11,11,-88,22,-94,22v-11,-3,-26,-18,-6,-24v19,-5,-2,-19,-1,-35v1,-18,11,-36,-5,-47v-6,-17,-6,-21,14,-32v6,-45,18,-89,28,-124v2,-7,8,-12,17,-15v5,3,10,11,16,28v-12,27,-13,63,-23,96v0,6,6,9,17,9xm87,-107v-40,-9,-31,31,-39,54v8,15,0,25,12,22v30,-8,60,-18,88,-32v39,-18,49,-33,-1,-42v-20,-4,-45,-7,-60,-2",
        "w": 217
      },
      "c": {
        "d": "128,-123v29,-7,37,29,12,33v-27,-4,-40,6,-79,25v-8,4,-13,11,-16,22v30,32,91,3,134,11v5,13,-8,26,-22,19v-51,25,-139,28,-150,-30v6,-50,69,-82,121,-80",
        "w": 194
      },
      "d": {
        "d": "224,-201v0,-35,-17,-111,24,-94v7,86,-2,119,0,197v-4,2,-8,21,-18,16v-62,-7,-154,-8,-185,29v6,17,28,26,51,26v16,0,100,-15,132,-18v7,5,-6,20,-10,22v-24,8,-122,42,-163,25v-32,-5,-62,-53,-36,-80v35,-37,118,-46,198,-43v1,-22,7,-49,7,-80",
        "w": 265
      },
      "e": {
        "d": "4,-57v0,-58,51,-71,110,-74v33,-1,45,16,59,35v1,14,2,39,-7,42v-24,-2,-73,13,-99,11v-2,2,-2,3,-2,3v0,3,12,8,37,15v21,0,69,9,31,22v-9,14,-34,6,-56,6v-27,-5,-73,-28,-73,-60xm123,-102v-22,2,-68,5,-65,26v24,-2,66,5,79,-6v-5,-13,-1,-13,-14,-20",
        "w": 182
      },
      "f": {
        "d": "6,-59v6,-29,53,-4,53,-43v0,-64,29,-118,84,-150v45,-25,167,-24,155,51v-1,2,-7,6,0,6r-10,2v-45,-58,-165,-39,-186,39v-7,26,-11,42,-9,62v44,8,95,-21,135,-7v-12,25,-39,21,-76,30v-19,5,-18,7,-54,19v-2,8,15,32,17,35v-6,25,-26,26,-40,-5r-15,-24v-41,10,-44,12,-54,-15",
        "w": 234
      },
      "g": {
        "d": "132,-97v30,27,21,75,30,117v-12,31,-11,66,-36,103v-32,46,-105,83,-167,39v-31,-21,-49,-29,-51,-75v-2,-37,77,-50,121,-57v37,-6,68,-10,95,-11v7,-6,3,-32,4,-46v0,0,-1,1,-1,2v0,-18,-5,-31,-14,-45v-44,5,-79,20,-94,-18v3,-54,73,-54,125,-50v12,7,12,13,4,25v-30,-11,-76,8,-90,20v23,3,50,-16,74,-4xm-34,121v60,53,168,1,159,-86v-47,-7,-93,24,-142,30v-12,7,-45,19,-42,29v0,10,8,19,25,27",
        "w": 188
      },
      "h": {
        "d": "100,-310v11,-2,10,19,11,20v-11,52,-40,133,-53,189v-6,30,-9,37,-9,47v27,0,113,-34,143,-34v42,0,31,47,39,79v0,4,-5,17,-16,16v4,2,11,3,4,6v-24,-1,-28,-34,-25,-64v-1,-1,-2,-3,-5,-5v-51,0,-110,38,-162,51v-9,1,-15,-15,-16,-23v17,-89,39,-141,71,-264v0,-9,6,-19,18,-18",
        "w": 251
      },
      "i": {
        "d": "62,-209v7,18,9,23,-5,38v-23,-6,-21,-18,-11,-36v2,0,8,-1,16,-2xm34,-7v-18,-21,-8,-73,-1,-106v7,-10,20,-8,23,6v-1,36,7,72,-2,104v-8,2,-8,0,-20,-4",
        "w": 80
      },
      "j": {
        "d": "88,-191v5,28,-18,40,-28,21v0,-20,12,-29,28,-21xm82,-99v28,-1,16,35,16,61v0,60,-19,150,-35,202v-12,8,-19,31,-35,16v-32,-7,-43,-19,-56,-44r2,-17v11,4,49,45,61,18v10,-55,27,-107,30,-171v0,-16,0,-59,17,-65",
        "w": 120
      },
      "k": {
        "d": "59,-66v33,26,114,37,155,62v8,-4,22,-2,19,-17v0,-4,-12,-11,-30,-24v-36,-25,-54,-22,-99,-33v14,-21,119,-13,103,-63r-16,-7r-123,47r25,-93v-3,-15,16,-49,18,-81v1,-15,-21,-14,-25,-3v-31,82,-49,168,-75,257v2,2,22,30,27,10v2,-5,4,-9,9,-11v4,-16,4,-15,12,-44",
        "w": 236
      },
      "l": {
        "d": "66,-300v21,-6,37,23,30,55v-10,51,-28,135,-28,208v0,11,6,36,-13,37v-29,-5,-30,-48,-25,-83r28,-177v-6,-17,1,-29,8,-40",
        "w": 102
      },
      "m": {
        "d": "348,-59v-2,21,0,57,3,73v-17,3,-30,-1,-32,-16v-8,-7,-5,-44,-13,-70v-35,3,-82,49,-111,70v-12,8,-40,4,-39,-15r2,-56v-1,-13,4,-28,-8,-29v-35,8,-79,72,-115,87v-6,2,-20,-18,-21,-22v1,-20,14,-105,39,-64r8,15v17,-14,72,-56,93,-54v27,3,49,40,43,80v24,-2,66,-55,124,-53v11,14,28,23,27,54",
        "w": 368
      },
      "n": {
        "d": "121,-136v37,6,62,54,62,111v0,32,-16,25,-31,17v-18,-30,-5,-45,-22,-85v-37,-13,-71,55,-92,65v-20,-3,-39,-39,-21,-62v2,-12,3,-15,11,-30v12,-8,20,11,29,12",
        "w": 194
      },
      "o": {
        "d": "108,-139v52,-24,104,18,104,63v0,59,-66,67,-114,83v-52,-2,-115,-50,-80,-105v23,-18,52,-35,90,-41xm45,-60v16,54,125,16,131,-23v-12,-59,-129,-8,-131,23",
        "w": 217
      },
      "p": {
        "d": "82,14v-10,12,-8,117,-24,142v-15,2,-19,0,-29,-13v0,-76,9,-113,22,-192v14,-27,35,-6,37,13v0,8,-3,21,-7,38v2,2,3,2,4,2v26,-9,116,-33,126,-72v-7,-17,-24,-33,-49,-31v-40,3,-116,13,-116,47v-5,7,-2,17,-16,20v-17,-12,-18,-20,-12,-38v8,-25,74,-61,110,-59v55,-15,113,15,118,70v-15,52,-84,79,-146,83v-5,0,-11,-4,-18,-10",
        "w": 251
      },
      "q": {
        "d": "144,-147v27,-8,89,-3,97,31v-9,29,-42,-4,-73,1v-32,6,-118,20,-111,49v0,7,13,13,21,13v21,0,78,-24,104,-34v2,0,9,8,22,21v1,1,1,2,1,5v-27,90,-22,70,-43,203v11,15,-15,54,-33,33v-6,-8,-10,-20,-3,-28v1,-72,5,-114,15,-172v-35,3,-35,10,-59,8v-41,-4,-98,-41,-56,-85v33,-34,59,-27,118,-45",
        "w": 248
      },
      "r": {
        "d": "242,-117v2,22,5,10,-14,23v-73,-7,-166,-23,-174,56v-8,6,-3,20,-8,36v-29,10,-40,-9,-33,-46v6,-31,7,-69,32,-55v58,-37,66,-42,175,-19v3,5,15,4,22,5",
        "w": 229
      },
      "s": {
        "d": "154,-151v19,1,27,24,13,32v-4,1,-22,4,-53,7v-16,8,-22,-2,-39,9v23,21,89,16,96,62v-13,24,-85,35,-124,42v-9,-3,-18,-3,-27,0v-6,-4,-21,-16,-8,-25v30,-6,83,-13,102,-24v-17,-16,-80,-33,-97,-48v-3,-2,-4,-7,-4,-15v-6,-6,3,-13,15,-18v22,-9,94,-23,126,-22",
        "w": 188
      },
      "t": {
        "d": "85,-150v10,-41,35,-126,65,-134v4,1,24,19,11,36v-17,22,-29,57,-36,104v26,8,50,-7,73,5v14,0,22,3,22,9v-1,19,-44,18,-57,23v-10,1,-46,0,-54,10v-10,24,-4,67,-20,98v-21,-3,-26,1,-26,-20v0,-9,2,-36,8,-81v-15,-13,-81,9,-77,-27v4,-38,71,6,91,-23",
        "w": 194
      },
      "u": {
        "d": "207,-136v-1,-2,11,-14,14,-13v6,0,10,7,10,22v-3,40,-23,56,-40,82v-13,19,-62,43,-93,43v-67,-2,-111,-75,-71,-133v26,-3,21,29,19,49v-1,27,26,44,57,42v41,-2,93,-55,104,-92",
        "w": 242
      },
      "v": {
        "d": "24,-127r52,71v42,-16,70,-54,124,-65v5,4,8,7,8,11v-8,19,-4,8,-33,32v0,1,-1,3,-1,5v-61,45,-93,68,-97,68v-40,-15,-50,-72,-68,-100v6,-14,10,-22,15,-22",
        "w": 214
      },
      "w": {
        "d": "15,-139v38,-2,27,57,45,86v30,2,67,-66,101,-78v26,6,36,69,60,78v47,-35,51,-54,119,-104v3,0,7,-2,15,-4v19,23,-9,28,-21,49v-33,28,-68,90,-107,109v-10,6,-52,-47,-72,-71v-20,17,-85,74,-97,73v-38,7,-41,-98,-52,-122v0,-1,3,-7,9,-16",
        "w": 325
      },
      "x": {
        "d": "95,-124v22,-13,78,-32,99,-31v16,0,23,6,23,18v0,22,-17,11,-49,21v-3,0,-45,20,-42,24v0,1,2,4,8,10v20,24,49,41,44,80v-35,3,-27,-9,-60,-44v-40,-43,-37,-26,-79,9v-1,1,-2,3,-3,8v-12,8,-28,10,-27,-11v-6,-8,45,-65,48,-65v-17,-21,-61,-52,-24,-68v9,0,48,37,62,49",
        "w": 223
      },
      "y": {
        "d": "44,-65v22,33,70,4,99,-8v5,-4,28,-15,41,-31r17,0v25,47,-26,70,-40,114v-5,4,-9,8,-10,21v-16,12,-11,33,-27,51v-5,18,-12,43,-23,71v-1,-1,-2,34,-18,29v-12,1,-22,-12,-22,-23v20,-70,24,-65,68,-177v-47,16,-111,8,-116,-39v-11,-13,-7,-62,8,-62v18,0,22,26,23,54",
        "w": 216
      },
      "z": {
        "d": "189,-43v9,-1,46,-6,41,12v0,7,-5,13,-15,14v-45,6,-148,24,-181,13v0,-3,-5,-8,-14,-15v5,-44,66,-46,90,-85v-15,-18,-84,21,-84,-14v0,-10,5,-17,14,-18v33,-3,79,-13,109,-3v4,-2,14,11,12,15v0,23,-26,51,-78,84v28,10,73,-3,106,-3",
        "w": 244
      },
      "{": {
        "d": "94,-303v27,-9,90,-14,79,26v-20,17,-55,-5,-87,13v-4,1,-6,4,-6,8v33,42,31,44,7,85v-6,10,-13,16,-13,13v5,6,17,17,15,31r-33,78v7,35,28,49,57,63r49,0v7,42,-51,41,-86,20v-43,-13,-51,-51,-56,-89v-2,-25,25,-54,27,-71v-3,-4,-46,-5,-41,-21v2,-10,-3,-29,11,-25v2,0,51,-17,52,-38v4,-3,-25,-23,-25,-49v0,-41,8,-30,50,-44",
        "w": 179
      },
      "|": {
        "d": "30,-308v26,5,14,50,15,80v5,78,-8,153,-3,225v-2,15,-1,31,-11,36v-8,-3,-25,-22,-25,-32r9,-183v0,-40,0,-78,1,-112v0,-4,9,-15,14,-14",
        "w": 63
      },
      "}": {
        "d": "47,-298v34,-17,118,-18,112,36v6,25,-76,98,-69,103v4,16,39,7,44,28v7,34,-34,17,-37,39v8,29,49,83,23,123v-15,23,-43,26,-73,46v-34,8,-43,11,-49,-17v1,-15,30,-15,33,-20v24,-12,70,-27,55,-61v-14,-33,-37,-68,-19,-103v-46,-50,46,-100,60,-141v-10,-16,-68,6,-77,-12",
        "w": 143
      },
      "~": {
        "d": "7,-254v2,-6,59,-50,67,-46v11,-1,35,19,46,26v5,0,27,-10,66,-31v21,8,-1,25,-7,38v-27,21,-48,31,-65,31v-24,-11,-37,-39,-65,-9v-7,7,-26,36,-42,11v3,-5,-3,-17,0,-20",
        "w": 199
      },
      "\xA0": {
        "w": 179
      },
      "\xA1": {
        "d": "86,-197v8,16,-7,41,-24,25v-11,-11,-4,-16,-3,-29v13,0,15,-2,27,4xm46,-107v4,-8,11,-16,23,-7v19,26,-5,57,-6,87v-7,0,-5,18,-9,28v0,14,-17,52,-11,70v-2,7,-15,28,-25,12v-4,-6,-15,-7,-6,-16v2,-39,14,-96,34,-174",
        "w": 95
      },
      "\xA2": {
        "d": "105,-188v13,-12,14,-18,26,-15v7,23,7,15,-3,49v6,0,18,14,17,20v-3,5,-12,19,-26,13v-14,1,-14,5,-16,21v10,10,46,-13,38,18v-9,17,-23,16,-54,20v-17,16,-4,55,-29,60v-37,-10,19,-64,-24,-71v-20,-10,-37,-47,-6,-62v23,-20,73,-4,77,-53xm65,-101v4,-9,7,-8,3,-13v-14,4,-22,10,-3,13",
        "w": 154
      },
      "\xA3": {
        "d": "153,-170v3,22,62,0,49,39v-18,6,-31,12,-58,9v-12,-1,-17,30,-23,39v19,26,50,56,91,35v9,-2,27,-13,27,4v0,27,-27,39,-58,42v-32,-5,-59,-19,-78,-39v-6,1,-35,44,-57,39v-25,0,-37,-15,-37,-46v0,-41,43,-53,73,-50v4,1,12,-18,12,-21v-7,-15,-49,0,-44,-30v-2,-31,31,-16,60,-19v16,-30,25,-119,93,-113v16,2,75,16,50,44v-4,5,-7,7,-12,8v-18,-12,-32,-18,-41,-18v-35,-1,-38,52,-47,77xm43,-45v4,5,12,-2,11,-9v-1,2,-12,1,-11,9",
        "w": 242
      },
      "\xA4": {
        "d": "308,-133r-200,16v-2,1,-6,4,-10,10v70,-2,144,-14,211,-8v3,0,8,4,13,8v-1,4,-3,9,-9,17v-57,11,-164,6,-219,25v26,32,112,25,173,25v9,0,35,2,35,19v0,9,-4,13,-12,14v-115,12,-146,23,-211,-19v-12,-4,-22,-9,-25,-27v-6,-29,-61,3,-43,-49v17,-1,36,7,42,-12v-32,7,-36,-39,-11,-40v29,14,63,-25,73,-30v52,-25,72,-44,142,-44v23,0,21,41,-1,39v-35,-3,-61,9,-102,31v2,2,5,4,8,4v18,-6,101,-9,115,-9v7,0,55,13,31,30",
        "w": 312
      },
      "\u20AC": {
        "d": "308,-133r-200,16v-2,1,-6,4,-10,10v70,-2,144,-14,211,-8v3,0,8,4,13,8v-1,4,-3,9,-9,17v-57,11,-164,6,-219,25v26,32,112,25,173,25v9,0,35,2,35,19v0,9,-4,13,-12,14v-115,12,-146,23,-211,-19v-12,-4,-22,-9,-25,-27v-6,-29,-61,3,-43,-49v17,-1,36,7,42,-12v-32,7,-36,-39,-11,-40v29,14,63,-25,73,-30v52,-25,72,-44,142,-44v23,0,21,41,-1,39v-35,-3,-61,9,-102,31v2,2,5,4,8,4v18,-6,101,-9,115,-9v7,0,55,13,31,30",
        "w": 312
      },
      "\xA5": {
        "d": "31,-248v30,-3,64,64,74,59v37,-22,77,-65,107,-82v20,-11,34,18,21,32v-28,19,-52,38,-70,57v-18,8,-40,21,-35,60v2,19,39,7,64,7v25,0,16,21,2,27v-36,16,-46,8,-68,18v6,11,101,-20,66,24v-21,11,-42,12,-75,20v-2,1,-5,6,-10,18v-8,3,-11,10,-24,8v-7,-17,-2,-18,-9,-26v-13,5,-39,3,-53,-2v-10,-17,-7,-27,0,-34v23,-1,45,1,64,-5v-11,-7,-28,-4,-64,-6v-13,-8,-15,-24,-6,-35v33,-2,102,9,76,-37v-14,-14,-33,-38,-60,-66v-10,-10,-8,-28,0,-37",
        "w": 219
      },
      "\xA7": {
        "d": "141,-115v12,10,29,36,28,56v-4,68,-129,69,-152,16v-1,-12,-10,-22,8,-23v17,3,47,21,67,23v16,1,40,-8,38,-21v-8,-49,-119,-30,-117,-85v1,-28,15,-45,-3,-64v-1,-53,55,-61,103,-62v15,-5,6,-5,20,-2v16,17,23,27,23,30v-1,26,-29,7,-45,7v-21,0,-51,2,-62,17v19,14,87,8,97,43v18,14,16,57,-5,65xm64,-147r57,17v10,-28,-22,-43,-47,-44v-25,-1,-35,19,-10,27",
        "w": 174
      },
      "\xA8": {
        "d": "124,-259v0,9,-4,13,-12,13v-18,0,-22,-21,-17,-35v19,-1,30,1,29,22xm23,-285v7,2,30,9,29,18v1,10,-9,19,-18,19v-19,0,-28,-26,-11,-37",
        "w": 136
      },
      "\xA9": {
        "d": "102,-29v-74,5,-124,-84,-70,-140v22,-22,53,-35,97,-38v46,-4,88,49,74,100v0,44,-51,75,-101,78xm96,-66v42,-3,75,-23,75,-69v0,-23,-4,-38,-44,-38v-16,0,-33,6,-49,20v36,-4,55,-12,62,20v-5,16,-49,1,-50,21v10,15,53,-14,54,11v0,18,-14,27,-42,27v-22,1,-46,-11,-46,-31v0,-25,7,-39,20,-44v-1,-1,-2,-2,-3,-2v-51,22,-32,89,23,85",
        "w": 217
      },
      "\xAA": {
        "d": "6,-265v1,-31,58,-53,80,-22v-11,14,25,28,25,36v-2,8,-15,12,-27,10v-22,-29,-68,19,-78,-24xm52,-281v-8,1,-24,10,-9,13v11,1,24,-10,9,-13",
        "w": 117
      },
      "\xAB": {
        "d": "191,-64v16,6,87,37,53,63v-39,-9,-71,-28,-107,-40v-14,-13,-13,-34,10,-47v27,-15,48,-55,84,-62v9,-2,21,10,21,18r-13,21v-16,5,-44,22,-51,41v0,4,1,6,3,6xm71,-65v17,6,87,35,55,62v-39,-8,-66,-27,-108,-40v-14,-13,-13,-36,10,-46v23,-18,50,-56,84,-63v9,-2,21,10,21,18r-13,22v-20,6,-32,17,-51,37v0,3,-1,11,2,10",
        "w": 265
      },
      "\xAC": {
        "d": "141,-99v47,7,103,-3,149,6v14,24,18,15,10,39v-10,34,-7,31,-26,76v-4,6,-15,8,-16,21v-4,2,-4,1,-13,5v-22,-33,-4,-33,16,-104v-5,-9,-28,-4,-38,-6r-183,4v-14,0,-41,-29,-17,-36v31,-9,82,5,118,-5",
        "w": 315
      },
      "\xAE": {
        "d": "75,-194v78,-29,116,9,130,84v-2,42,-22,47,-57,67v-74,20,-161,-19,-129,-110v6,-18,29,-34,57,-40xm46,-86v51,36,84,21,129,-15v7,-15,0,-39,-10,-49v-13,-37,-49,-26,-86,-18v-28,7,-49,46,-33,82xm72,-123v-5,-43,68,-57,75,-14v-17,26,-18,17,3,32v2,25,-25,18,-45,7r-4,-4v-1,8,-3,20,-12,24v-10,-3,-21,-34,-17,-45xm112,-135v-10,-1,-20,13,-9,14v6,-6,9,-11,9,-14",
        "w": 217
      },
      "\xAF": {
        "d": "63,-295v28,-7,73,10,105,7v11,1,6,8,5,19v-37,21,-72,11,-136,11v-23,0,-31,-14,-27,-36v12,-15,40,0,53,-1",
        "w": 183
      },
      "\xB0": {
        "d": "106,-268v0,36,-35,38,-51,46v-48,5,-60,-58,-25,-78v33,-11,76,-9,76,32xm38,-257v16,7,39,2,38,-17v-13,-9,-28,-1,-32,11v-5,3,-7,0,-6,6",
        "w": 114
      },
      "\xB1": {
        "d": "93,-163v-7,46,76,-4,46,47v-14,6,-27,13,-38,8v-24,2,-14,28,-28,44r-14,0v-7,-12,-5,-15,-7,-33v-12,-7,-41,-1,-37,-24v2,-11,23,-17,36,-14r28,-38v4,0,9,4,14,10xm113,-27v-12,18,-58,27,-85,24v-16,2,-22,-23,-13,-36v28,-7,85,-11,98,12",
        "w": 151
      },
      "\xB4": {
        "d": "52,-284v29,-11,50,-34,62,-14v3,12,-86,54,-94,56v-14,0,-16,-12,-12,-23v11,-5,25,-11,44,-19",
        "w": 120
      },
      "\xB6": {
        "d": "121,-237v21,-9,44,-13,63,-1v-1,7,5,6,7,11r-4,190v-2,33,4,39,-15,40v-16,1,-10,-20,-10,-33r4,-161v0,-17,-1,-34,-16,-25v2,10,1,23,1,35v-9,46,-6,75,-15,156v-3,4,-7,5,-12,5v-17,-10,-3,-89,-10,-115v-43,14,-98,10,-101,-29v-4,-53,59,-63,104,-75v3,1,4,2,4,2xm95,-204v2,9,-30,50,1,50v35,0,23,-13,29,-43v0,-1,-2,-7,-4,-15v-12,-1,-14,2,-26,8",
        "w": 206
      },
      "\xB8": {
        "d": "74,16v32,2,49,14,55,36v-3,7,-14,31,-29,33v-28,4,-57,11,-88,14v-19,-6,-13,-31,8,-33v20,-1,59,-5,73,-14v-17,-14,-68,8,-53,-37v9,-10,2,-28,24,-30v8,8,13,17,10,31",
        "w": 129
      },
      "\xBA": {
        "d": "13,-273v1,-31,56,-41,83,-18v36,8,14,48,-9,52v-35,6,-64,-5,-74,-34xm81,-269v-7,-7,-20,-11,-29,-6v5,13,13,11,29,6",
        "w": 128
      },
      "\xBB": {
        "d": "120,-129v9,-33,48,-10,64,5v9,20,86,52,50,86v-36,11,-66,31,-107,40v-6,-7,-9,-13,-9,-17v-2,-13,50,-46,63,-46v11,-18,-33,-42,-48,-47xm1,-128v10,-33,46,-8,64,6v8,19,86,50,51,85v-40,13,-69,30,-108,40v-6,-7,-8,-12,-8,-16v-2,-14,50,-46,63,-47v7,-13,-9,-20,-19,-30v-10,-9,-20,-15,-30,-17",
        "w": 252
      },
      "\xBF": {
        "d": "181,-247v3,1,31,2,29,15v-4,22,-37,27,-41,4v1,-5,7,-20,12,-19xm161,-34v-45,-1,-105,19,-124,51v0,11,18,17,54,17v39,0,82,-13,112,4v-10,35,-58,31,-100,31v-47,0,-80,-10,-99,-31v-10,-56,22,-73,64,-90v8,-3,32,-9,74,-18v21,-15,7,-62,22,-92v-1,-5,-1,-11,4,-12v16,0,24,7,24,22v-8,30,-8,73,-17,111v-3,5,-7,7,-14,7",
        "w": 213
      },
      "\xC0": {
        "d": "161,-217v20,53,23,124,54,170v-2,20,-34,9,-42,0v-27,-12,-78,-18,-101,-18v-26,6,-29,51,-54,63v-18,-4,-19,-30,-3,-38v5,-9,15,-16,8,-29v1,-12,23,-9,26,-19v6,-10,11,-20,20,-27r70,-121v12,-4,16,4,22,19xm82,-91v17,3,62,7,86,13v-13,-33,-13,-80,-29,-109v-15,30,-38,63,-57,96xm150,-268v14,10,54,14,37,41v-28,-7,-62,-22,-100,-42v-2,-3,-2,-26,5,-23v16,4,42,17,58,24"
      },
      "\xC1": {
        "d": "161,-217v20,53,23,124,54,170v-2,20,-34,9,-42,0v-27,-12,-78,-18,-101,-18v-26,6,-29,51,-54,63v-18,-4,-19,-30,-3,-38v5,-9,15,-16,8,-29v1,-12,23,-9,26,-19v6,-10,11,-20,20,-27r70,-121v12,-4,16,4,22,19xm82,-91v17,3,62,7,86,13v-13,-33,-13,-80,-29,-109v-15,30,-38,63,-57,96xm84,-250v31,-5,83,-53,100,-31v0,5,-11,15,-35,28v-16,5,-51,28,-53,25v-14,1,-16,-11,-12,-22"
      },
      "\xC2": {
        "d": "161,-217v20,53,23,124,54,170v-2,20,-34,9,-42,0v-27,-12,-78,-18,-101,-18v-26,6,-29,51,-54,63v-18,-4,-19,-30,-3,-38v5,-9,15,-16,8,-29v1,-12,23,-9,26,-19v6,-10,11,-20,20,-27r70,-121v12,-4,16,4,22,19xm82,-91v17,3,62,7,86,13v-13,-33,-13,-80,-29,-109v-15,30,-38,63,-57,96xm202,-219v-27,-6,-40,-26,-61,-37v-21,7,-39,46,-65,23v-2,-4,-3,-10,-4,-14v19,-4,43,-32,61,-43v27,6,40,22,62,37v12,8,18,17,18,25v0,6,-3,9,-11,9"
      },
      "\xC3": {
        "d": "161,-217v20,53,23,124,54,170v-2,20,-34,9,-42,0v-27,-12,-78,-18,-101,-18v-26,6,-29,51,-54,63v-18,-4,-19,-30,-3,-38v5,-9,15,-16,8,-29v1,-12,23,-9,26,-19v6,-10,11,-20,20,-27r70,-121v12,-4,16,4,22,19xm82,-91v17,3,62,7,86,13v-13,-33,-13,-80,-29,-109v-15,30,-38,63,-57,96xm100,-285v26,-19,54,19,69,22v4,0,15,-5,34,-13v23,-9,22,-17,31,-12v3,11,-9,9,-7,21v-26,20,-46,30,-59,30v-3,3,-50,-26,-49,-29v-12,1,-31,35,-51,32v-3,-8,-5,-14,-5,-18v10,-9,16,-17,37,-33"
      },
      "\xC4": {
        "d": "161,-217v20,53,23,124,54,170v-2,20,-34,9,-42,0v-27,-12,-78,-18,-101,-18v-26,6,-29,51,-54,63v-18,-4,-19,-30,-3,-38v5,-9,15,-16,8,-29v1,-12,23,-9,26,-19v6,-10,11,-20,20,-27r70,-121v12,-4,16,4,22,19xm82,-91v17,3,62,7,86,13v-13,-33,-13,-80,-29,-109v-15,30,-38,63,-57,96xm187,-259v0,8,-4,13,-12,13v-18,0,-21,-20,-16,-34v18,-1,28,2,28,21xm90,-284v7,3,28,11,28,18v0,9,-9,18,-18,17v-17,0,-25,-24,-10,-35"
      },
      "\xC5": {
        "d": "161,-217v20,53,23,124,54,170v-2,20,-34,9,-42,0v-27,-12,-78,-18,-101,-18v-26,6,-29,51,-54,63v-18,-4,-19,-30,-3,-38v5,-9,15,-16,8,-29v1,-12,23,-9,26,-19v6,-10,11,-20,20,-27r70,-121v12,-4,16,4,22,19xm82,-91v17,3,62,7,86,13v-13,-33,-13,-80,-29,-109v-15,30,-38,63,-57,96xm112,-239v-31,-17,-9,-61,29,-56v12,2,22,3,33,12v24,39,-30,62,-62,44xm119,-262v2,14,41,8,41,-4v0,-4,-8,-6,-24,-9v-10,-2,-17,10,-17,13"
      },
      "\xC6": {
        "d": "335,-259v0,30,-102,12,-122,34v10,21,2,79,16,100v24,-6,59,-13,86,-16v23,-2,32,21,13,26r-103,29v-3,22,-4,38,8,43v28,-5,60,-6,86,-14v5,-1,14,7,14,11v6,16,-90,40,-107,40v-29,0,-39,-19,-32,-46v-2,-4,0,-26,-9,-28v-29,2,-58,6,-88,6v-31,0,-40,74,-82,73v-18,-23,4,-37,12,-50v40,-65,112,-126,165,-207v20,-17,69,-11,112,-13v21,0,31,4,31,12xm123,-111v28,1,44,-2,67,-10v-4,-22,5,-49,-7,-65v-3,6,-65,61,-60,75",
        "w": 348
      },
      "\xC7": {
        "d": "48,-108v-12,70,90,71,159,67r138,-9v9,-1,7,9,7,17v-37,16,-80,27,-103,21v-14,9,-40,3,-67,9v-30,0,-64,1,-100,-10v-6,-1,-10,-4,-10,-8v-32,-12,-46,-31,-63,-56v-16,-61,47,-103,83,-121v82,-42,118,-45,200,-60v21,-4,36,34,11,37v-90,11,-148,31,-225,77v-12,8,-23,20,-30,36xm172,18v29,4,47,14,53,35v-2,7,-14,31,-27,31v-28,7,-55,9,-84,14v-18,-5,-13,-32,7,-32v21,0,55,-5,69,-13v-16,-14,-63,10,-50,-35v9,-10,1,-27,23,-29v7,8,11,16,9,29",
        "w": 331
      },
      "\xC8": {
        "d": "49,-160v1,-4,-10,-9,-15,-8v-15,-35,32,-30,57,-31r142,-8v2,1,30,7,40,10v-52,16,-133,17,-190,30v-7,9,-12,24,-15,47v26,10,102,-6,141,3v1,3,1,6,2,10v-36,18,-92,12,-149,21v-11,9,-16,41,-16,51v55,-1,111,-21,168,-13v15,-8,48,1,31,18v-53,16,-130,13,-198,29r-39,-8v-4,-19,17,-53,20,-76v-1,0,-7,-11,-9,-18v18,-7,22,-28,30,-57xm184,-236v6,9,5,13,0,23v-28,-7,-62,-21,-100,-41v-3,-2,-3,-27,5,-23v34,11,60,25,95,41",
        "w": 252
      },
      "\xC9": {
        "d": "49,-160v1,-4,-10,-9,-15,-8v-15,-35,32,-30,57,-31r142,-8v2,1,30,7,40,10v-52,16,-133,17,-190,30v-7,9,-12,24,-15,47v26,10,102,-6,141,3v1,3,1,6,2,10v-36,18,-92,12,-149,21v-11,9,-16,41,-16,51v55,-1,111,-21,168,-13v15,-8,48,1,31,18v-53,16,-130,13,-198,29r-39,-8v-4,-19,17,-53,20,-76v-1,0,-7,-11,-9,-18v18,-7,22,-28,30,-57xm133,-248v27,-11,48,-32,59,-14v3,11,-79,52,-88,53v-14,1,-16,-11,-12,-21v10,-4,23,-11,41,-18",
        "w": 252
      },
      "\xCA": {
        "d": "49,-160v1,-4,-10,-9,-15,-8v-15,-35,32,-30,57,-31r142,-8v2,1,30,7,40,10v-52,16,-133,17,-190,30v-7,9,-12,24,-15,47v26,10,102,-6,141,3v1,3,1,6,2,10v-36,18,-92,12,-149,21v-11,9,-16,41,-16,51v55,-1,111,-21,168,-13v15,-8,48,1,31,18v-53,16,-130,13,-198,29r-39,-8v-4,-19,17,-53,20,-76v-1,0,-7,-11,-9,-18v18,-7,22,-28,30,-57xm199,-211v-27,-6,-39,-26,-60,-37v-21,7,-40,47,-65,22v-2,-7,-2,-7,-4,-13v18,-5,44,-31,61,-43v27,6,41,22,62,37v12,9,18,17,18,25v0,6,-4,9,-12,9",
        "w": 252
      },
      "\xCB": {
        "d": "49,-160v1,-4,-10,-9,-15,-8v-15,-35,32,-30,57,-31r142,-8v2,1,30,7,40,10v-52,16,-133,17,-190,30v-7,9,-12,24,-15,47v26,10,102,-6,141,3v1,3,1,6,2,10v-36,18,-92,12,-149,21v-11,9,-17,41,-17,51v55,0,112,-21,169,-13v15,-8,48,1,31,18v-53,16,-130,13,-198,29r-39,-8v-3,-21,17,-53,20,-76v-1,0,-7,-11,-9,-18v18,-7,22,-28,30,-57xm191,-236v0,8,-4,13,-12,13v-17,0,-19,-19,-16,-34v18,-1,29,1,28,21xm95,-261v7,3,29,9,28,18v0,7,-9,17,-18,17v-18,0,-26,-25,-10,-35",
        "w": 252
      },
      "\xCC": {
        "d": "33,-5v-9,-6,-9,-12,-9,-36v0,-71,8,-119,22,-144v8,-13,14,-20,19,-20v27,20,-11,87,-10,120r-15,76v-1,1,-4,2,-7,4xm72,-247v7,6,55,15,36,40v-28,-7,-61,-21,-99,-41v-3,-2,-3,-27,5,-23v18,3,41,17,58,24",
        "w": 111
      },
      "\xCD": {
        "d": "26,-5v-9,-6,-9,-12,-9,-36v0,-71,7,-119,21,-144v8,-13,14,-20,19,-20v28,19,-7,89,-10,120v-2,21,-8,47,-14,76v-2,1,-2,0,-7,4xm6,-233v31,-6,83,-53,101,-31v2,11,-80,53,-89,53v-14,1,-14,-11,-12,-22",
        "w": 104
      },
      "\xCE": {
        "d": "53,-9v-15,7,-16,-3,-16,-32v0,-71,7,-119,21,-144v8,-13,14,-20,19,-20v28,19,-7,89,-10,120v-2,21,-8,47,-14,76xm137,-209v-27,-6,-40,-26,-61,-37v-8,0,-9,4,-13,10v-11,13,-50,37,-56,0v18,-5,43,-32,61,-43v28,5,40,21,62,36v12,9,18,17,18,25v0,6,-4,9,-11,9",
        "w": 144
      },
      "\xCF": {
        "d": "33,-5v-9,-6,-9,-12,-9,-36v0,-71,8,-119,22,-144v8,-13,14,-20,19,-20v27,20,-11,87,-10,120r-15,76v-1,1,-4,2,-7,4xm111,-222v0,8,-4,12,-12,12v-18,0,-19,-19,-16,-33v18,-1,29,1,28,21xm15,-247v8,2,29,9,28,17v0,21,-37,24,-36,1v0,-7,2,-13,8,-18",
        "w": 110
      },
      "\xD1": {
        "d": "224,-182v1,-17,15,-24,22,-38v20,0,13,10,3,33v-3,36,-25,52,-28,94v-10,24,-30,55,-29,82r-19,7v-32,-8,-36,-70,-58,-111v-2,-23,-7,-27,-19,-54v-28,36,-41,93,-71,133v-9,5,-20,-9,-20,-17r73,-149v9,-24,31,-5,36,7v19,41,31,98,53,139v22,-35,34,-69,50,-118v2,-3,3,-3,7,-8xm203,-257v22,-8,41,-24,65,-26v3,11,-8,9,-7,21v-26,20,-46,31,-59,31v-2,3,-49,-27,-49,-29v-11,0,-32,31,-46,32v-11,-2,-12,-21,-4,-23v4,-6,28,-30,48,-34v17,-4,43,28,52,28",
        "w": 219
      },
      "\xD2": {
        "d": "62,-184v78,-31,249,-50,238,74v-6,65,-102,105,-179,115v-77,-7,-152,-71,-101,-149v2,-5,24,-33,42,-40xm279,-120v14,-38,-47,-64,-85,-61v-20,-9,-41,7,-62,0v-11,7,-54,12,-66,24v0,20,-51,35,-38,66v-1,43,50,67,96,67v44,0,162,-55,155,-96xm161,-262v14,10,52,13,37,41v-28,-7,-62,-21,-100,-41v-3,-3,-3,-26,5,-24v16,5,42,17,58,24",
        "w": 273
      },
      "\xD3": {
        "d": "62,-184v78,-31,249,-50,238,74v-6,65,-102,105,-179,115v-77,-7,-152,-71,-101,-149v2,-5,24,-33,42,-40xm279,-120v14,-38,-47,-64,-85,-61v-20,-9,-41,7,-62,0v-11,7,-54,12,-66,24v0,20,-51,35,-38,66v-1,43,50,67,96,67v44,0,162,-55,155,-96xm142,-250v27,-11,47,-32,59,-14v2,11,-80,53,-89,53v-13,1,-15,-11,-12,-21v10,-5,24,-11,42,-18",
        "w": 273
      },
      "\xD4": {
        "d": "62,-184v78,-31,249,-50,238,74v-6,65,-102,105,-179,115v-77,-7,-152,-71,-101,-149v2,-5,24,-33,42,-40xm279,-120v14,-38,-47,-64,-85,-61v-20,-9,-41,7,-62,0v-11,7,-54,12,-66,24v0,20,-51,35,-38,66v-1,43,50,67,96,67v44,0,162,-55,155,-96xm157,-282v17,18,52,34,54,63v-24,12,-52,-36,-53,-29r-42,34v-23,-4,-6,-31,5,-34v1,1,27,-37,36,-34",
        "w": 273
      },
      "\xD5": {
        "d": "62,-184v78,-31,249,-50,238,74v-6,65,-102,105,-179,115v-77,-7,-152,-71,-101,-149v2,-5,24,-33,42,-40xm279,-120v14,-38,-47,-64,-85,-61v-20,-9,-41,7,-62,0v-11,7,-54,12,-66,24v0,20,-51,35,-38,66v-1,43,50,67,96,67v44,0,162,-55,155,-96xm116,-270v26,-19,54,19,69,22v4,0,15,-5,34,-13v23,-10,22,-16,31,-12v3,11,-8,9,-7,21v-45,28,-47,42,-88,16v-29,-19,-12,-20,-43,2v-8,5,-12,18,-23,15v-13,-3,-12,-20,-4,-23v4,-6,14,-15,31,-28",
        "w": 273
      },
      "\xD6": {
        "d": "62,-184v78,-31,249,-50,238,74v-6,65,-102,105,-179,115v-77,-7,-152,-71,-101,-149v2,-5,24,-33,42,-40xm279,-120v14,-38,-47,-64,-85,-61v-20,-9,-41,7,-62,0v-11,7,-54,12,-66,24v0,20,-51,35,-38,66v-1,43,50,67,96,67v44,0,162,-55,155,-96xm197,-229v0,8,-4,13,-12,13v-17,0,-19,-19,-16,-34v18,-1,29,1,28,21xm101,-254v7,3,28,9,27,18v1,8,-8,17,-17,17v-18,0,-26,-24,-10,-35",
        "w": 273
      },
      "\xD8": {
        "d": "76,-211v41,-13,100,-22,140,-3v26,-19,40,-29,44,-29v10,0,15,7,15,20v0,15,-23,23,-30,35v23,39,29,114,-21,139v-36,19,-102,35,-147,18v-14,-5,-29,29,-46,35v-25,-13,-19,-24,3,-56v-9,-17,-28,-27,-28,-60v0,-38,23,-72,70,-99xm107,-66v55,15,125,-12,123,-70v0,-16,-5,-25,-13,-29r-110,95r0,4xm39,-108v-1,3,17,31,22,27v8,-6,109,-90,123,-106v-15,-11,-43,1,-63,2v-33,10,-80,35,-82,77",
        "w": 270
      },
      "\xD9": {
        "d": "281,-202v6,67,-30,121,-71,152v-3,14,-47,26,-60,39v-41,20,-110,1,-125,-26v-24,-44,-28,-84,-8,-127v12,-26,23,-38,37,-22v-2,2,-3,5,-3,10v-34,26,-30,116,5,134v22,32,86,-1,109,-8v38,-28,104,-64,97,-149v2,-10,7,-8,19,-3xm151,-243v14,10,54,14,37,41v-28,-7,-61,-22,-99,-42v-3,-2,-4,-25,4,-23v16,5,42,17,58,24",
        "w": 262
      },
      "\xDA": {
        "d": "281,-202v6,67,-30,121,-71,152v-3,14,-47,26,-60,39v-41,20,-110,1,-125,-26v-24,-44,-28,-84,-8,-127v12,-26,23,-38,37,-22v-2,2,-3,5,-3,10v-34,26,-30,116,5,134v22,32,86,-1,109,-8v38,-28,104,-64,97,-149v2,-10,7,-8,19,-3xm194,-265v3,-1,11,4,11,6v3,12,-81,52,-89,54v-14,0,-13,-9,-12,-22",
        "w": 262
      },
      "\xDB": {
        "d": "281,-202v6,67,-30,121,-71,152v-3,14,-47,26,-60,39v-41,20,-110,1,-125,-26v-24,-44,-28,-84,-8,-127v12,-26,23,-38,37,-22v-2,2,-3,5,-3,10v-34,26,-30,116,5,134v22,32,86,-1,109,-8v38,-28,104,-64,97,-149v2,-10,7,-8,19,-3xm150,-266v24,11,58,27,73,46v0,5,-3,6,-10,6v-28,2,-61,-30,-63,-25v-10,0,-57,40,-69,23v3,-10,-8,-15,8,-19v17,-1,34,-29,61,-31",
        "w": 262
      },
      "\xDC": {
        "d": "281,-202v6,67,-30,121,-71,152v-3,14,-47,26,-60,39v-41,20,-110,1,-125,-26v-24,-44,-28,-84,-8,-127v12,-26,23,-38,37,-22v-2,2,-3,5,-3,10v-34,26,-29,116,5,134v22,32,86,-1,109,-8v38,-28,104,-64,97,-149v2,-10,7,-8,19,-3xm197,-227v0,8,-4,13,-12,13v-18,0,-21,-20,-16,-34v18,-1,28,2,28,21xm101,-252v7,3,27,10,27,18v0,8,-9,18,-18,17v-18,-1,-24,-25,-9,-35",
        "w": 262
      },
      "\xDF": {
        "d": "33,10v-29,4,-28,-32,-16,-70v18,-58,17,-137,56,-176v12,-24,46,-58,82,-43v20,8,47,24,47,54v0,30,-62,59,-67,90v33,23,56,33,63,63v-18,21,-22,36,-48,54v-24,17,-27,41,-53,16v-2,-19,7,-35,24,-42v15,-13,26,-22,34,-40v-13,-17,-78,-29,-56,-70v-3,-27,64,-54,66,-86v-8,-25,-41,-4,-52,8v-29,30,-47,83,-51,141v-17,25,-8,71,-29,101"
      },
      "\xE0": {
        "d": "118,-53v10,4,55,41,62,47v0,7,-5,16,-12,16r-57,-28v-20,3,-40,19,-61,18v-10,2,-43,-17,-42,-36v0,-14,7,-40,27,-41v39,-26,92,-36,104,9v0,6,-2,11,-9,15v-32,-24,-64,-6,-84,11v8,15,58,-17,72,-11xm99,-137v7,6,56,14,37,40v-28,-7,-62,-21,-100,-41v-2,-3,-2,-26,5,-23v16,4,42,17,58,24",
        "w": 173
      },
      "\xE1": {
        "d": "118,-53v10,4,55,41,62,47v0,7,-5,16,-12,16r-57,-28v-20,3,-40,19,-61,18v-10,2,-43,-17,-42,-36v0,-14,7,-40,27,-41v39,-26,92,-36,104,9v0,6,-2,11,-9,15v-32,-24,-64,-6,-84,11v8,15,58,-17,72,-11xm32,-117v24,-3,85,-55,101,-32v3,11,-80,53,-89,53v-13,2,-14,-10,-12,-21",
        "w": 173
      },
      "\xE2": {
        "d": "118,-53v10,4,55,41,62,47v0,7,-5,16,-12,16r-57,-28v-20,3,-40,19,-61,18v-10,2,-43,-17,-42,-36v0,-14,7,-40,27,-41v39,-26,92,-36,104,9v0,6,-2,11,-9,15v-32,-24,-64,-6,-84,11v8,15,58,-17,72,-11xm147,-97v-27,-6,-39,-26,-60,-37v-21,7,-38,46,-65,23v-2,-5,-3,-10,-4,-14v18,-4,43,-31,61,-42v28,5,40,21,62,36v12,8,18,17,18,25v0,6,-4,9,-12,9",
        "w": 173
      },
      "\xE3": {
        "d": "118,-53v10,4,55,41,62,47v0,7,-5,16,-12,16r-57,-28v-20,3,-40,19,-61,18v-10,2,-43,-17,-42,-36v0,-14,7,-40,27,-41v39,-26,92,-36,104,9v0,6,-2,11,-9,15v-32,-24,-64,-6,-84,11v8,15,58,-17,72,-11xm114,-136v22,-8,41,-24,64,-26v3,11,-7,10,-7,21v-26,20,-45,30,-58,30v-3,3,-49,-26,-49,-28v-10,-1,-32,35,-51,31v-12,-32,8,-29,32,-51v24,-21,54,20,69,23",
        "w": 173
      },
      "\xE4": {
        "d": "118,-53v10,4,55,41,62,47v0,7,-5,16,-12,16r-57,-28v-20,3,-40,19,-61,18v-32,5,-66,-64,-15,-77v39,-26,92,-36,104,9v0,6,-3,11,-9,15v-32,-24,-64,-6,-84,11v8,15,58,-17,72,-11xm142,-119v0,8,-4,13,-12,13v-18,0,-21,-20,-16,-34v18,-1,28,2,28,21xm46,-144v7,3,28,9,27,18v1,8,-9,18,-18,17v-18,-1,-25,-25,-9,-35",
        "w": 173
      },
      "\xE5": {
        "d": "118,-53v10,4,55,41,62,47v0,7,-5,16,-12,16r-57,-28v-20,3,-40,19,-61,18v-10,2,-43,-17,-42,-36v0,-14,7,-40,27,-41v39,-26,92,-36,104,9v0,6,-2,11,-9,15v-32,-24,-64,-6,-84,11v8,15,58,-17,72,-11xm54,-101v-37,-20,-9,-71,34,-65v13,1,25,3,38,13v27,45,-34,73,-72,52xm61,-128v4,20,48,7,49,-5v0,-5,-9,-7,-28,-10v-12,-2,-21,11,-21,15",
        "w": 173
      },
      "\xE6": {
        "d": "145,-44r33,7v2,42,-59,29,-85,16v-6,7,-35,24,-48,15v-19,2,-35,-21,-33,-37v2,-24,5,-19,28,-36v-6,-8,-45,3,-33,-21v21,-22,58,-12,85,-1v6,-5,35,-28,45,-15v20,-4,36,17,36,35v0,23,-4,21,-28,37xm111,-72v12,3,49,-16,19,-17v-5,0,-20,12,-19,17xm74,-50v-14,-4,-48,16,-19,17v4,1,19,-14,19,-17",
        "w": 184
      },
      "\xE7": {
        "d": "108,-118v30,-6,56,21,25,33v-24,-6,-39,5,-75,23v-7,4,-12,12,-15,22v31,28,86,3,128,9v3,28,-29,16,-44,28v-53,15,-106,10,-120,-37v0,-48,62,-70,101,-78xm92,18v23,4,45,12,48,32v-2,6,-12,28,-25,28v-24,6,-50,10,-77,13v-16,-4,-11,-28,7,-29v17,-1,51,-4,63,-12v-14,-15,-57,10,-46,-32v9,-8,0,-25,21,-26v6,6,12,14,9,26",
        "w": 171
      },
      "\xE8": {
        "d": "108,-124v42,-3,70,39,50,73v-22,-1,-70,12,-94,10v-1,1,-2,3,-2,3v0,3,12,7,35,14v18,0,64,7,30,21v-10,14,-31,6,-53,6v-26,-7,-70,-26,-70,-58v0,-54,48,-65,104,-69xm130,-78v-2,-35,-66,-13,-77,3v16,6,62,6,77,-3xm95,-166v7,6,54,14,37,40v-28,-7,-62,-21,-100,-41v-3,-3,-3,-26,5,-24v16,5,42,18,58,25",
        "w": 161
      },
      "\xE9": {
        "d": "108,-124v42,-3,70,39,50,73v-22,-1,-70,12,-94,10v-1,1,-2,3,-2,3v0,3,12,7,35,14v18,0,64,7,30,21v-10,14,-31,6,-53,6v-26,-7,-70,-26,-70,-58v0,-54,48,-65,104,-69xm130,-78v-2,-35,-66,-13,-77,3v16,6,62,6,77,-3xm76,-169v26,-11,48,-32,59,-14v3,10,-80,53,-89,53v-14,1,-14,-10,-12,-21v15,-7,16,-7,42,-18",
        "w": 161
      },
      "\xEA": {
        "d": "108,-124v42,-3,70,39,50,73v-22,-1,-70,12,-94,10v-1,1,-2,3,-2,3v0,3,12,7,35,14v18,0,64,7,30,21v-10,14,-31,6,-53,6v-26,-7,-70,-26,-70,-58v0,-54,48,-65,104,-69xm130,-78v-2,-35,-66,-13,-77,3v16,6,62,6,77,-3xm145,-129v-27,-6,-39,-26,-60,-37v-8,0,-10,4,-14,10v-11,15,-51,34,-56,0v17,-4,44,-32,61,-43v28,5,41,21,63,36v12,8,17,17,17,25v0,6,-3,9,-11,9",
        "w": 161
      },
      "\xEB": {
        "d": "108,-124v42,-3,70,39,50,73v-22,-1,-70,12,-94,10r-3,3v0,3,12,7,36,14v18,0,64,7,30,21v-10,14,-31,6,-53,6v-26,-7,-67,-27,-71,-58v7,-52,48,-65,105,-69xm130,-78v-2,-35,-66,-13,-77,3v16,6,62,6,77,-3xm140,-144v0,8,-4,12,-12,12v-18,0,-19,-19,-16,-33v18,-1,29,1,28,21xm44,-169v7,3,28,9,28,17v0,9,-9,18,-18,18v-18,0,-25,-24,-10,-35",
        "w": 161
      },
      "\xEC": {
        "d": "57,-98v22,5,13,50,11,95v-7,1,-11,2,-20,-4v1,-7,-12,-18,-10,-24v4,-22,-2,-64,19,-67xm70,-139v14,10,54,14,37,41v-28,-7,-61,-22,-99,-42v-3,-2,-3,-25,5,-23v15,5,41,17,57,24",
        "w": 109
      },
      "\xED": {
        "d": "59,-98v20,4,15,53,10,95v-6,1,-11,2,-19,-4v1,-7,-12,-18,-10,-24v4,-22,-4,-65,19,-67xm50,-139v27,-11,49,-32,59,-14v3,11,-80,53,-89,53v-14,1,-14,-12,-11,-22v15,-7,14,-6,41,-17",
        "w": 105
      },
      "\xEE": {
        "d": "72,-98v20,5,12,51,10,95v-6,2,-13,1,-20,-4v1,-8,-12,-18,-10,-24v4,-22,-3,-65,20,-67xm134,-94v-26,-7,-39,-25,-60,-37v-7,0,-9,4,-13,10v-14,15,-51,34,-56,-1v18,-4,45,-33,61,-43v27,6,40,22,62,37v12,8,18,17,18,25v0,6,-4,9,-12,9",
        "w": 143
      },
      "\xEF": {
        "d": "55,-97v19,5,15,53,10,95v-17,5,-26,-14,-30,-28v6,-20,-3,-65,20,-67xm110,-118v0,8,-4,13,-12,13v-17,0,-19,-19,-16,-34v18,-1,29,1,28,21xm14,-143v6,3,28,8,28,17v0,9,-9,18,-18,18v-18,0,-25,-24,-10,-35",
        "w": 107
      },
      "\xF1": {
        "d": "115,-129v34,6,59,50,59,105v0,31,-15,24,-30,17v-15,-29,-5,-42,-20,-81v-35,-13,-68,52,-88,61v-20,-4,-38,-36,-19,-59v0,-12,3,-14,10,-28v11,-8,18,11,27,12xm117,-166v22,-7,41,-23,64,-26v3,11,-7,10,-7,21v-26,20,-45,30,-58,30v-3,3,-49,-26,-49,-28v-10,-1,-32,35,-51,31v-5,-12,-8,-16,0,-23v4,-6,28,-29,48,-33v17,-3,43,28,53,28",
        "w": 171
      },
      "\xF2": {
        "d": "102,-132v50,-20,99,16,99,60v0,54,-60,64,-108,79v-50,-2,-110,-48,-76,-100v22,-17,49,-33,85,-39xm136,-104v-34,0,-91,27,-94,47v16,51,125,16,125,-22v0,-17,-10,-25,-31,-25xm115,-181v14,10,51,13,37,40v-28,-7,-62,-21,-100,-41v-3,-2,-3,-26,5,-23v16,5,42,17,58,24",
        "w": 191
      },
      "\xF3": {
        "d": "102,-132v50,-20,99,16,99,60v0,54,-60,64,-108,79v-50,-2,-110,-48,-76,-100v22,-17,49,-33,85,-39xm136,-104v-34,0,-91,27,-94,47v16,51,125,16,125,-22v0,-17,-10,-25,-31,-25xm49,-154v24,-3,85,-55,101,-32v3,11,-80,53,-89,53v-14,0,-13,-8,-12,-21",
        "w": 191
      },
      "\xF4": {
        "d": "102,-132v50,-20,99,16,99,60v0,54,-60,64,-108,79v-50,-2,-110,-48,-76,-100v22,-17,49,-33,85,-39xm136,-104v-34,0,-91,27,-94,47v16,51,125,16,125,-22v0,-17,-10,-25,-31,-25xm110,-177v-22,6,-38,45,-65,22v-2,-4,-3,-9,-4,-13v18,-4,43,-32,61,-43v27,6,40,21,62,36v12,9,18,17,18,25v1,11,-15,10,-23,7",
        "w": 191
      },
      "\xF5": {
        "d": "102,-132v50,-20,99,16,99,60v0,54,-60,64,-108,79v-50,-2,-110,-48,-76,-100v22,-17,49,-33,85,-39xm136,-104v-34,0,-91,27,-94,47v16,51,125,16,125,-22v0,-17,-10,-25,-31,-25xm58,-199v26,-21,54,18,69,22v4,0,15,-5,34,-13v22,-9,21,-16,31,-13v3,11,-9,9,-7,22v-26,20,-46,30,-59,30v-2,4,-49,-28,-49,-29v-11,0,-32,31,-46,32v-12,-3,-13,-21,-4,-23v4,-6,14,-15,31,-28",
        "w": 191
      },
      "\xF6": {
        "d": "102,-132v50,-20,99,16,99,60v0,54,-60,64,-108,79v-50,-2,-110,-48,-76,-100v22,-17,49,-33,85,-39xm136,-104v-34,0,-91,27,-94,47v16,51,125,16,125,-22v0,-17,-10,-25,-31,-25xm161,-160v0,8,-4,13,-12,13v-17,0,-19,-19,-16,-34v18,-1,29,1,28,21xm65,-185v7,3,28,9,28,18v0,7,-9,18,-18,17v-18,1,-25,-24,-10,-35",
        "w": 191
      },
      "\xF7": {
        "d": "167,-158v-4,3,-7,9,-10,20v-23,4,-34,-8,-29,-31v14,-6,18,1,39,11xm78,-72v-53,11,-53,12,-69,-15v-1,-12,11,-17,22,-14v71,-13,151,-18,230,-24v11,1,21,16,23,28v-28,20,-90,11,-126,16v-36,5,-62,5,-80,9xm123,-40v19,-17,41,-1,41,17v0,13,-6,19,-17,19v-15,0,-29,-14,-24,-36",
        "w": 293
      },
      "\xF8": {
        "d": "76,-136v17,7,33,-8,51,0v9,-6,21,-13,36,-21v23,22,-13,31,3,50v11,13,4,21,14,35v-4,5,-1,14,-4,23v-14,23,-45,41,-84,39v-12,2,-29,28,-41,38v-2,-11,-34,-10,-15,-30v3,-7,5,-11,5,-11v-15,-24,-60,-54,-22,-89v23,-21,25,-32,57,-34xm102,-54v18,1,50,-19,30,-32v-12,7,-22,18,-30,32xm85,-92v-14,3,-26,8,-38,17v2,20,17,13,26,0v6,-8,12,-13,12,-17",
        "w": 188
      },
      "\xF9": {
        "d": "196,-129v-1,-4,12,-13,15,-13v6,0,8,7,8,21v0,24,-7,25,-13,45v-7,7,-14,21,-24,29v-9,24,-61,45,-89,45v-63,0,-105,-72,-67,-126v24,-3,19,27,18,46v-1,26,23,42,54,40v38,-3,88,-51,98,-87xm126,-166v7,6,56,14,37,40v-28,-7,-62,-22,-100,-42v-2,-3,-2,-26,5,-23v16,4,42,18,58,25",
        "w": 213
      },
      "\xFA": {
        "d": "196,-129v-1,-4,12,-13,15,-13v6,0,8,7,8,21v0,24,-7,25,-13,45v-7,7,-14,21,-24,29v-9,24,-61,45,-89,45v-63,0,-105,-72,-67,-126v24,-3,19,27,18,46v-1,26,23,42,54,40v38,-3,88,-51,98,-87xm106,-174v26,-11,48,-32,59,-14v3,11,-81,53,-89,54v-13,1,-15,-12,-11,-22v15,-7,14,-7,41,-18",
        "w": 213
      },
      "\xFB": {
        "d": "196,-129v-1,-4,12,-13,15,-13v6,0,8,7,8,21v0,24,-7,25,-13,45v-7,7,-14,21,-24,29v-9,24,-61,45,-89,45v-63,0,-105,-72,-67,-126v24,-3,19,27,18,46v-1,26,23,42,54,40v38,-3,88,-51,98,-87xm172,-143v-27,-6,-39,-26,-60,-37v-8,0,-10,4,-14,10v-11,15,-49,35,-56,0v17,-4,44,-32,61,-43v27,6,41,21,63,36v12,9,17,17,17,25v0,6,-3,9,-11,9",
        "w": 213
      },
      "\xFC": {
        "d": "196,-129v-1,-4,12,-13,15,-13v6,0,8,7,8,21v0,24,-7,25,-13,45v-7,7,-14,21,-24,29v-9,24,-61,45,-89,45v-63,0,-105,-72,-67,-126v24,-3,19,27,18,46v-1,26,23,42,54,40v38,-3,88,-51,98,-87xm168,-161v0,8,-3,13,-11,13v-17,0,-20,-19,-17,-34v18,-1,29,1,28,21xm72,-186v7,3,29,9,28,18v0,7,-9,18,-18,17v-18,1,-25,-24,-10,-35",
        "w": 213
      },
      "\xFF": {
        "d": "118,85v-11,11,-11,38,-22,61v-2,-1,-2,31,-17,27v-11,0,-21,-10,-21,-22v20,-66,23,-61,64,-168v-22,1,-38,16,-58,4v-22,4,-51,-16,-51,-42v-11,-13,-7,-59,7,-58v16,1,21,24,22,51v21,33,66,5,94,-7v4,-3,26,-14,38,-29r17,0v23,44,-23,59,-34,102v-6,9,-13,9,-13,26v-15,6,-12,33,-27,48v0,2,1,4,1,7xm158,-136v0,8,-4,13,-12,13v-18,0,-21,-20,-16,-34v18,-1,29,1,28,21xm62,-161v7,3,28,9,27,18v1,8,-8,17,-17,17v-18,0,-26,-24,-10,-35",
        "w": 190
      },
      "\u0131": {
        "d": "43,-103v21,4,16,56,11,100v-7,2,-11,1,-20,-5v0,-7,-13,-18,-11,-25v4,-23,-3,-68,20,-70",
        "w": 80
      },
      "\u0152": {
        "d": "247,-243v71,4,161,-7,245,-8v17,0,27,6,27,17v-8,27,-70,14,-104,23v-3,1,-52,0,-65,7r0,4v16,16,17,29,17,65v32,10,74,-14,99,16v-14,25,-76,17,-127,24v-17,18,-55,32,-75,51v85,0,128,-3,204,-11v15,-2,21,11,20,29v-78,24,-177,12,-270,24v-24,3,-24,-29,-48,-15v-46,7,-70,4,-105,-4v-19,-18,-42,-22,-52,-55v-10,-34,0,-47,12,-78v-18,-59,48,-78,105,-84v17,-18,103,-13,117,-5xm125,-45v76,-9,186,-43,209,-105v-26,-67,-137,-83,-217,-54v3,34,-45,25,-60,58v-41,48,5,108,68,101",
        "w": 492
      },
      "\u0153": {
        "d": "185,-54v25,28,107,-17,104,33v-12,12,-60,14,-87,14v0,0,1,1,2,1v-11,1,-39,-9,-50,-17v-28,17,-75,32,-114,7v-22,-14,-34,-11,-34,-41v0,-36,33,-49,48,-75v29,-16,72,-3,95,11v12,-9,48,-27,59,-26v30,0,64,15,65,40v0,7,-6,20,-20,37v-29,1,-44,11,-68,16xm226,-106v-21,-7,-41,-2,-48,13v14,1,42,-7,48,-13xm132,-87v-21,-35,-94,11,-92,24v-2,14,43,21,61,21v25,0,36,-20,31,-45",
        "w": 295
      },
      "\u0178": {
        "d": "176,-189v35,20,-25,54,-39,72v-26,34,-57,57,-74,104v-10,15,-4,14,-23,3r0,-10v19,-44,27,-46,50,-81v-9,-5,-24,4,-34,4v-38,0,-54,-50,-44,-87v21,-5,18,19,22,35v4,18,15,27,29,27v41,0,60,-39,113,-67xm153,-222v0,8,-3,12,-11,12v-18,0,-21,-19,-16,-33v18,-1,28,2,27,21xm57,-247v8,2,29,9,28,17v0,21,-37,24,-36,1v0,-7,2,-13,8,-18",
        "w": 135
      },
      "\u0192": {
        "d": "115,-262v-23,6,-39,63,-38,96v1,3,57,2,54,16v1,22,-45,15,-51,30v3,34,12,68,10,103v14,17,-18,53,-28,63v-48,8,-89,5,-95,-37v20,-5,77,21,83,-18v17,-29,-4,-61,0,-98v0,-5,-3,-10,-7,-17v-33,4,-43,-17,-25,-37v10,-4,27,5,27,-10v0,-43,15,-77,32,-109v12,-7,16,-22,38,-20v11,1,51,35,25,55v-9,1,-16,-17,-25,-17",
        "w": 145
      },
      "\u02C6": {
        "d": "144,-220v-29,0,-41,-27,-63,-39v-8,0,-11,5,-15,11v-17,12,-32,31,-54,13v-2,-5,-3,-9,-4,-14v20,-5,45,-33,64,-45v28,6,43,23,65,38v12,9,19,19,19,27v0,6,-4,9,-12,9",
        "w": 165
      },
      "\u02C7": {
        "d": "39,-286v33,46,63,-4,96,-16v6,0,9,6,9,19v0,24,-49,46,-77,46v-32,0,-52,-28,-59,-48v0,-25,23,-17,31,-1",
        "w": 153
      },
      "\u02D8": {
        "d": "65,-269v20,-11,45,-31,74,-36v20,30,-42,40,-59,66v-5,6,-11,8,-18,8v-8,-3,-45,-32,-51,-54v5,-24,14,-13,34,1",
        "w": 158
      },
      "\u02D9": {
        "d": "23,-302v15,-13,32,1,32,18v1,22,-36,29,-39,4v0,0,3,-7,7,-22",
        "w": 70
      },
      "\u02DA": {
        "d": "23,-225v-43,-24,-11,-85,41,-78v16,2,31,4,46,17v32,54,-41,86,-87,61xm33,-257v2,20,57,11,57,-6v0,-6,-11,-9,-33,-12v-14,-2,-24,13,-24,18",
        "w": 123
      },
      "\u02DB": {
        "d": "82,-5v-8,12,-16,55,-21,75v0,4,2,7,7,7v6,0,22,-7,50,-20v8,0,12,7,12,20v-2,22,-6,14,-27,30v-15,12,-26,16,-30,16v-47,-8,-59,-14,-56,-75v8,-27,12,-54,25,-77v19,-21,35,15,40,24",
        "w": 138
      },
      "\u02DC": {
        "d": "47,-300v26,-21,57,19,72,23v4,0,16,-5,36,-14v24,-10,22,-16,32,-13v3,12,-7,11,-7,23v-27,21,-48,32,-62,32v-3,2,-52,-27,-51,-31v-12,-2,-34,40,-54,33v-4,-13,-8,-18,1,-24v5,-7,16,-15,33,-29",
        "w": 186
      },
      "\u02DD": {
        "d": "91,-249v15,-11,38,-53,57,-29v0,9,0,14,-3,23v-2,3,-20,22,-54,55v-5,5,-10,8,-16,8v-17,2,-6,-22,-7,-31v-1,0,-2,0,-4,1v-17,21,-29,31,-50,27v-5,-18,-3,-15,3,-27v23,-27,40,-46,48,-59v7,-12,31,3,29,9v-1,14,-3,24,-13,31v4,4,9,-1,10,-8",
        "w": 151
      },
      "\u2013": {
        "d": "6,-66v-8,-72,79,-21,146,-39v37,-10,79,7,111,0v9,8,14,13,14,17v2,26,-72,13,-99,21v-83,4,-124,21,-172,1",
        "w": 282
      },
      "\u2014": {
        "d": "175,-106v86,-9,201,1,286,-1v11,6,13,11,6,30v-118,15,-246,10,-377,10v-25,0,-73,3,-82,-8r-2,-26v11,-13,32,-9,52,-7v38,3,84,-5,117,2",
        "w": 485
      },
      "\u2018": {
        "d": "73,-262v-10,7,-41,39,-38,69v-15,13,-27,-16,-28,-28v-2,-20,51,-83,66,-83v20,0,25,41,0,42",
        "w": 95
      },
      "\u2019": {
        "d": "74,-300v13,31,-1,99,-44,101v-13,0,-19,-5,-19,-15v6,-10,31,-34,35,-59v2,-11,1,-32,11,-32v6,0,11,2,17,5",
        "w": 90
      },
      "\u201A": {
        "d": "25,63v-26,21,-48,-2,-22,-24v14,-12,35,-40,35,-69v3,-2,3,-11,12,-9v35,17,5,88,-25,102",
        "w": 97
      },
      "\u201C": {
        "d": "66,-261v-21,5,-37,51,-22,77v0,4,-2,6,-7,6v-31,-9,-38,-62,-12,-94v12,-15,21,-28,31,-34v16,-1,19,24,22,34v10,-11,22,-32,43,-23v-2,8,4,16,5,19v-6,11,-51,53,-29,74v-12,21,-30,5,-33,-17v-6,-13,9,-28,2,-42",
        "w": 118
      },
      "\u201D": {
        "d": "120,-294v12,3,30,26,19,34v2,15,-40,70,-55,66v-40,-10,10,-51,14,-64v3,-3,8,-31,22,-36xm70,-306v14,3,26,34,16,49v-19,30,-31,45,-58,59v-12,-11,-33,-17,-7,-36v13,-19,36,-27,36,-59v0,-5,9,-13,13,-13",
        "w": 148
      },
      "\u201E": {
        "d": "25,63v-26,21,-48,-2,-22,-24v11,-9,36,-41,35,-69v3,-2,4,-12,12,-9v36,14,5,89,-25,102xm84,64v-24,20,-45,-1,-21,-24v21,-20,32,-35,35,-69v3,-2,3,-11,12,-9v36,17,9,86,-26,102",
        "w": 135
      },
      "\u2020": {
        "d": "22,-286v15,6,5,-20,19,-19v9,-3,15,21,17,22v6,1,12,3,20,6v3,10,5,16,-9,16v-34,-10,-6,51,-34,52v-20,-7,11,-47,-15,-49v-14,3,-25,-5,-17,-24v7,-2,14,-4,19,-4",
        "w": 77
      },
      "\u2021": {
        "d": "102,-284v16,2,42,-2,33,18v-7,15,-42,1,-38,30v3,3,31,1,30,11v4,15,-29,19,-36,24v-2,18,-4,24,-16,29r-25,-26v-25,7,-53,3,-42,-25v4,-10,70,0,51,-22v-17,4,-41,12,-39,-15v-5,-16,39,-18,44,-20v4,-2,7,-10,10,-24v19,-3,23,6,28,20",
        "w": 145
      },
      "\u2022": {
        "d": "130,-114v0,47,-124,54,-120,-8r6,-31v44,-28,64,-34,104,0v8,6,10,20,10,39",
        "w": 139
      },
      "\u2026": {
        "d": "244,-24v-1,21,-38,32,-41,3v-2,-19,23,-22,34,-17v0,7,0,15,7,14xm113,-24v0,-22,28,-21,38,-8v5,34,-39,40,-38,8xm35,-2v-10,-2,-36,-17,-18,-29v-1,-15,17,-17,31,-6v7,17,6,33,-13,35",
        "w": 258
      },
      "\u2030": {
        "d": "398,-131v58,-1,87,13,72,65v-1,30,-66,63,-99,65v-56,3,-99,-58,-62,-102v2,2,5,2,8,2v20,-16,51,-17,81,-30xm202,-279v33,0,94,-24,95,18v-7,31,-33,27,-54,55v-36,32,-71,74,-112,99v-18,18,-40,34,-51,58v-19,14,-25,37,-56,40v-17,2,-25,-29,-10,-40v15,-11,40,-37,52,-52r87,-72v-51,13,-100,6,-116,-27v1,-5,-6,-30,-9,-36v-3,-5,22,-41,27,-39v29,2,16,34,5,49v0,15,14,23,42,23v42,0,59,-31,28,-38v-17,-4,-53,3,-50,-23v0,-7,1,-12,4,-16v16,-9,36,4,49,5v0,0,23,-4,69,-4xm222,-118v33,-2,55,18,50,57v-29,36,-48,45,-96,50v-27,-5,-56,-17,-58,-51v13,-37,64,-43,104,-56xm335,-61v13,44,101,7,108,-31v-11,-3,-20,-4,-30,-4v-18,-1,-82,18,-78,35xm225,-244v-18,0,-29,-1,-46,3v7,15,6,28,0,43v15,-14,34,-30,46,-46xm164,-53v26,5,59,-10,76,-26v-17,-16,-49,2,-67,14v1,8,-8,6,-9,12",
        "w": 485
      },
      "\u2039": {
        "d": "64,-107v9,17,86,17,87,43v0,11,-4,16,-13,16v-36,-11,-70,-22,-109,-31v-19,-4,-18,-14,-9,-36v59,-56,93,-84,101,-84v17,0,19,20,13,29",
        "w": 159
      },
      "\u203A": {
        "d": "41,-181v26,27,112,44,70,91r-82,60v-20,3,-25,-23,-13,-32r70,-51r-66,-46v-5,-6,-4,-28,5,-29v4,2,9,4,16,7",
        "w": 137
      },
      "\u2044": {
        "d": "193,-305v7,6,17,31,3,41v-10,7,-12,13,-21,25v-79,56,-190,209,-197,260r-18,0v-23,-19,9,-70,15,-85v52,-83,121,-179,218,-241",
        "w": 120
      },
      "\u2122": {
        "d": "213,-307v28,9,11,49,7,75v-1,4,-4,6,-11,6v-7,1,-11,-14,-11,-34v-14,-6,-34,34,-46,28v-2,0,-10,-9,-24,-27v-10,7,-3,36,-27,31v-15,-24,-3,-27,1,-48v-6,-7,-27,-1,-31,3v-3,14,-7,30,-11,51v-5,10,-29,9,-24,-12v-5,-8,1,-18,3,-35v-13,6,-33,2,-29,-18v20,-17,64,-17,100,-19v28,-1,29,30,45,39v11,-6,35,-32,58,-40",
        "w": 239
      },
      "\u2206": {
        "d": "18,-1v-24,-30,8,-48,25,-71v14,-19,34,-28,40,-56v20,-35,29,-14,57,4v9,39,43,62,57,102v0,16,-34,17,-50,14v-28,2,-72,4,-129,7xm139,-47r-22,-52v-12,-5,-12,15,-24,27v-7,6,-14,16,-23,28v23,1,36,-1,69,-3",
        "w": 199
      },
      "\u2219": {
        "d": "57,-77v6,18,-7,21,-19,23v-34,6,-25,-40,-9,-43v18,-3,29,8,28,20",
        "w": 67
      },
      "\u221A": {
        "d": "364,-218v43,-21,80,-51,104,-32v-3,19,-24,21,-44,40v-41,15,-78,53,-136,78r-137,98v-20,16,-79,66,-91,68v-3,1,-25,-11,-24,-13v-4,-28,-43,-61,-30,-85v26,-15,42,19,58,32r295,-188v0,1,2,2,5,2",
        "w": 474
      },
      "\u221E": {
        "d": "322,-72v-4,22,-54,41,-76,41v-43,0,-83,-17,-114,-35v-46,19,-125,53,-128,-18v-1,-14,10,-22,13,-35v29,-10,62,-31,97,-4v37,28,47,5,75,-8v40,-19,73,-10,114,1v13,1,18,55,19,58xm228,-69v15,0,62,-12,61,-25v-19,-23,-89,-10,-105,11v0,2,1,4,2,4v28,6,42,10,42,10xm75,-102v-13,2,-41,4,-44,19v0,4,3,7,10,7v21,0,40,-6,54,-17v-9,-6,-16,-9,-20,-9",
        "w": 330
      },
      "\u222B": {
        "d": "62,-151v-7,-70,20,-130,63,-150v28,1,39,10,70,23v20,8,6,33,-6,35v-29,-13,-45,-20,-49,-20v-20,-4,-45,51,-43,70v8,60,5,129,5,189v0,62,-27,93,-79,93v-37,-1,-71,-14,-63,-57v21,0,79,34,91,-2v16,-3,14,-64,21,-85v-2,-31,-1,-74,-10,-96",
        "w": 156
      },
      "\u2248": {
        "d": "133,-112v21,15,48,-30,78,-17v3,3,5,7,5,9v-8,30,-47,45,-76,45v-19,0,-64,-48,-90,-21r-29,20v-6,-1,-17,-16,-15,-32v24,-17,70,-42,107,-21v4,4,10,9,20,17xm138,-57v28,2,48,-25,76,-26v13,30,-21,42,-40,53v-41,24,-77,-15,-114,-23v-15,14,-46,32,-49,-1v-3,-9,27,-28,54,-30",
        "w": 223
      },
      "\u2260": {
        "d": "48,-130v29,11,49,-57,60,-50v25,6,7,27,-1,46v22,5,29,7,21,22v-18,2,-48,-1,-50,15v9,8,53,-7,54,10v-4,22,-46,20,-72,24v-7,13,-18,32,-34,57v-8,6,-15,-3,-13,-14v-1,-9,15,-39,14,-45v-30,5,-24,-17,-13,-25v12,-1,36,4,29,-13v-14,0,-47,6,-36,-12v0,-18,27,-13,41,-15",
        "w": 140
      },
      "\u2264": {
        "d": "73,-109v10,15,87,16,87,42v0,11,-5,16,-13,16v-36,-11,-69,-24,-109,-31v-18,-8,-18,-13,-9,-36v59,-56,93,-83,101,-83v16,0,18,17,14,28v-27,24,-42,35,-71,64xm10,-29v35,-12,117,-26,148,-3v1,2,-5,19,-8,18r-124,15v-16,2,-26,-18,-16,-30",
        "w": 168
      },
      "\u2265": {
        "d": "115,-174v20,7,53,36,20,57v-19,11,-91,68,-82,59v-18,3,-25,-22,-13,-31v15,-10,14,-10,70,-51r-50,-37v-5,-4,-5,-27,4,-28v16,7,40,17,51,31xm14,-32v33,-10,86,-14,127,-10v12,12,5,23,-11,27v-49,9,-82,13,-99,13v-22,0,-24,-16,-17,-30",
        "w": 163
      },
      "\u25CA": {
        "d": "76,-158v48,-8,64,11,100,36v28,19,-5,39,-22,54v-15,13,-40,32,-48,49v-17,5,-12,0,-27,-16v-6,-6,-86,-31,-68,-53r2,-9v27,-23,48,-44,63,-61xm93,-65v12,-2,35,-31,41,-38v-5,-10,-16,-14,-34,-24v-12,12,-36,29,-40,44v19,11,30,18,33,18",
        "w": 199
      }
    }
  });
}
/** js sequence diagrams
 *  https://bramp.github.io/js-sequence-diagrams/
 *  (c) 2012-2017 Andrew Brampton (bramp.net)
 *  Simplified BSD license.
 */

/*global Diagram, _ */


if (typeof Raphael == 'undefined' && typeof Snap == 'undefined') {
  throw new Error('Raphael or Snap.svg is required to be included.');
}

if (underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].isEmpty(Diagram.themes)) {
  // If you are using stock js-sequence-diagrams you should never see this. This only
  // happens if you have removed the built in themes.
  throw new Error('No themes were registered. Please call registerTheme(...).');
} // Set the default hand/simple based on which theme is available.


Diagram.themes.hand = Diagram.themes.snapHand || Diagram.themes.raphaelHand;
Diagram.themes.simple = Diagram.themes.snapSimple || Diagram.themes.raphaelSimple;
/* Draws the diagram. Creates a SVG inside the container
* container (HTMLElement|string) DOM element or its ID to draw on
* options (Object)
*/

Diagram.prototype.drawSVG = function (container, options) {
  var defaultOptions = {
    theme: 'hand'
  };
  options = underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].defaults(options || {}, defaultOptions);

  if (!(options.theme in Diagram.themes)) {
    throw new Error('Unsupported theme: ' + options.theme);
  } // TODO Write tests for this check


  var div = underscore__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].isString(container) ? document.getElementById(container) : container;

  if (div === null || !div.tagName) {
    throw new Error('Invalid container: ' + container);
  }

  var Theme = Diagram.themes[options.theme];
  new Theme(this, options, function (drawing) {
    drawing.draw(div);
  });
}; // end of drawSVG


/* harmony default export */ __webpack_exports__["a"] = (Diagram);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__("f28c"), __webpack_require__("dd40")(module)))

/***/ }),

/***/ "85fc":
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "8ad6":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAz9JREFUWAntWM9rE0EUnmmSgtJexIsogucqvamXgtRS8U9QPAi2kYIJFdMItoGFVg9ttWI8aXuT+idUUDQIeuhB9OBfYEUQzaEqgtnd8X2bnc3sr2Q3u0UPu5DMm3lv5n37zZs3M8tY9iRjgCfr3ukthODludqUydgVJtiIpeHs4wBjGw9WFtc556JjHV1KBeDsrduH9D+/nxDI8SDXBO5lfnDfpft35r8E6bu10Qsme8BcN3AYHcBtm9iE5JLBY6z5y5gmAOUI4xx79vzV5+23r99FsHVM8o4UIly/WRvRDXOKAmiSyDpKfAyppqZwhxbnbIsPFIqwEWbrEanPS3srPhl7LOtRylCAmqYNfv+h32sZYoac2KHgBhPkAODqy9oOdKWqVhRG65NjJxeP09BbCAQIcN9+6luCUdD3xtTbSwKLQIBgzgLXx8CYVjCHrpBdQ1DacdUjVHwAyxXtuMn0GZU5ShM7lMaqucL+hjdVlCoL0xSHDhDEnGtaFRDIiUo1kuhb9qXK/Jop2KzsDXCFofzomqY1ZZtaIs2U5movkErUdq+MXFhfWZygMlbQ+PIg9Z5UBwdzYeBgB4dIwgCg9lNl6GybWOAwhm+K7VTijI9pdSohAqadGJywtjplumE+wHkxyVbnY9Cb57wxF4LRYrK+uuTLcWiLO62qjwCAqvrfyxnApHOQMZgxmJSBpP1Ti0Fry6N92QsIezV03vao9VQA4k6C/Vg9NEgAaIMONrItTulsdXREOiIMfZmOWXH6476Bw0LohQmDkY28k7gOC9InWZxpO+UNnstX5YEXbdadxDb8QOBOtg07/6fHzm5sv2nsdlrcUr93Eo/PYRoVvxP0NpdPjY1vSp9WbFy7sbBJ4C64XUeutciyIK273UnIRsh92Y7LwNjkjD99eHfpIsa0p1hSLN3EKh1w6NX1TkLqaAumgyeVRRLrdWIa2wzyBrGfyhR3vZNEBgc87ccCiJXDDP0cxeEBqUBJsdAk3ai6qlQ95Dh3Egq4qweHC+vo93W3dZgOs+9DfFZhg8cJ0ihLvt3F/W+nmb7uJFF8OgDdbuPV9vLjUSoA8Tpgci8+v8WjKrPOGMgY+P8Y+AvdFLNwJ7BmZQAAAABJRU5ErkJggg=="

/***/ }),

/***/ "8af1":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAABhtJREFUWAntV2lslEUYnvkODls8AI0Q8IqYiASPGAJKgibGgmgIiUfCD1AwEOxuLXa3LXTbfNBtWthuse02UjmCgR9agzGiQj0SjXgAkUiUBKPRxAQxiqKWFui334zPbDtfZ7Z7UTX6o9+Pzvs+7zHPvvPOUUJGv9EK/LcVoP/G9MFQ3WLG2QuUEm5QsrYtFn17pPMYIw3MFsc5p5ywFwnh0yFf5zGyLZtvIfg/TvC56rqZIDZVTk4pHyflkYwFExSVCYZrFwQqnbtzTZT0+Pw0+xFVLw3VzguEa+9VsVxyQQQdx7GC4cg+xtgH3HOPBitqItmSMkL0ySk5JH0D4UgL4ewTztihQCiyS/xoacs2FkTwlx53O+dkqUwCEquknD5iRq2ClBgf+z5sKA7kngpW1sZ9WxYhL8FgKNKE2CfVeEroF6ou5fINDVMw8Y1Sp5T2Tyoyj0qdUHLclyFwxtcFwjWVKpYu5ySIfilnnFelBX033rDWpmEpNen2adUD+Dna44LiuwIVPq3oIEmaSitqVqiYKmclGAjVLkN0i+pMKP15jG2XxGLOTxouFUa1/uNkqP+ES6I5+j21jEWo5B8yBCMKTXeUhSMPKZgvZiSIDfEg52y3CPY9Kekh1Fq0tcn51seGC1oFTbX/Bn3bN9cfN6ixBIkvynC0heVx8mqw0pkrMTkOIyiOEcbIPjjY0kn0kmmYSztizjGJpY+hUKwIP+d2FbeLlQ2iGNpj9R+ij5chL/bb4Mf5ZdxLvlVeGblVQmLUCJaud24hzMW1xIulUyoJ5cvbtmx6X2KZxn6jZ66ohG+j9Ou445zx9TShPR59DVV8RoU54RNdj3SjktMk7hMUO5D0u904Tq6WxtRISXki1vCKhmVQPM/T+g+T++dfBvcU1N4c7UQBHN3OpzMvebC6uvEqgacIVlU1XeH29x2EfoMA5YfghkQs2i71XCMIaf0H36HzL0cgNs5GaqTf1/y2Hrf3zXUtLeNTBHu9np2Ek9lqHpDbieCIimWTu7q6TNwJWoPjFZO3gjLf5CK7FC8f0ffKx+9xf/ytVS7xQsUitu7pycWW1h+qPV3+6NiXs/EDJ/g4jiM8sb7x9TwCzkpGi+2V2Dh/qq5ot4UDBDl9VzMQMuVMj1vQ0qbikvr9i2dgQcsr5wRBg51LbscmuVxiYkRV30kRLLaLVkL5SjXikF2N18tGFcsmY/dq/Uc5vSSCZ865rYTzx9X8WMXPsIplKYJNTevP2mPHL0Tf/aA64fVSh0M747Wm+qEntB1sUFpw/+FVU4OlDKj5QO4kH1P0MCrbN7DEsG5tiJwitlWCSv6qOiM4EayIPKpiqlxRUXM9KuifW0h+fuaMaVkPdDW2NFz7NGKjKgb5lGnZJR2NG1I8fILCKdHonMT1tBgke2UQEhjojb1llXX3S0wdL1JDqx4a58iaNWtc1SeTXBaqW0IY26bZKDk7xjJKWjc7/kpqBIVza3P9YcLNx7DcSRmMfhzLPPZ6edi5Q2JyBHmt//AGzdt/z1bVzPcIexk5TJlHVJ5S45Gtm+tPSEyMwwgKMBHfdMDgfCVEcBv4xA5zefLAumrnJokNWrQK4qjI2X9lIWeWl6T7sSnGKXk8Ss0nErH6YT8uI0ER2BZv2IMTXn9Mcn5tv+t2h0LONcJH3EAgNEvI4kPVmTXB+HRAG/5X9CsjyW782CtVq2EYq9ubN+1XMSlnJSgccAc3E4PGpfPgePMF4qZ65zw7N0/0qG/n5MTzjvO7r6cJFyl9Cf7+f3wpM6Ub8LrZlebqq0PJfUgXElvqwyjNHhXFzr5T6Iyn3b9G7gMalbtLzYPjqa2jOdqoYWlKXoJYNj57xvRVWMo3ZCyw3YOy3n957l8c4DJO9MMePETKZc5sY16CIlAcG5MnWEtN03zAMO154gXS2dlpYwfNURObhj2syVV7Ih4tswhZgJ67D5VbLn68as8kY3eP7MOjcg7z3MNK9KmOeIN/YCv43xILqmDGGZinVQ9LlrN6GXMUAI6cIOH+Pz1iHiR6r4D5LtllxAStqRP34krcl7oWKe2aVGxpO/2SmYwGjFbgf1qBvwDyZg7WDjUB8wAAAABJRU5ErkJggg=="

/***/ }),

/***/ "8ccd":
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "8df1":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAtBJREFUWAntV0FrFDEUTrJTwaPehPbg2R/gXXrpf+hNXRDdItQtxXal2FbBWhBXL1Vv/ocKSgUPPXjw5i+w4kHwoiK4duL74iRmMjvZzOw0tLADYV7e+/Ly3su8lzeMncRnefn+GYzjYLtwjeh0V699H/z4igHalceeFwyUKdsgI1oYGR3bptx+RQOZPKsR0qI1L/a7YGBsA0btZwyUUvLOrdWr7gLwIHP5seZq45u3N8/9+f3rJRlyadjGnPO95NTp+Uf3Vr4Mkx8lL1GR6/ZKjcPmMDxzYJaMleDdWLwzx3i6Q7JpzOs+pO+ASdF+sn13d5gOsdDtXSmLnL0AGGANrwHjoEs5SLqMXocQKWOXbR7nbFe0pmYwQNsyF2vLjooWTLILtnIuptr9B2sHGKBtWQ5Lx6KOJweoPtFHXLYyKROM4mffzMwo3LjyhHH2kSJzUSuS6WCns7SmIgda89Ub2MhPQoXwBX1b/w2UbE4eDj4NswNYzQ/JYn18ZRmqdfne4vHW+nNStOcDQQYMsAYXkMWjMtTo8hCCNpYowj4jIcswqgZ69DUuUkmCG4K8nUWdS6XMfXfkQTuLct44lcX+Qk2OqSI8jtWFO/b64krOkKfbmwXMOBtWXWuahaoLY+GNgXTEk26mTtQFIudrtaCUMLqbif49tr79PERDuhDg3flXr99+fr//7kMAtjFI4nYo6GB0k4CrTtLNonfLsM8wD7lJ9DrfW5eistumfjcTcJP4DNMyOr1pNL567r5NFruC4zKv380E3CQhTuojLsPW7mZi9YMcZabT7b1BKSnzAnw0DP2tdfPT5MM2KUtoY0m/nfO+Wgjj3G4mJIv18ZVlaIgj9buZgCxGhvJ/GVr718BkMSLZf7ihapztGXiQ2byYtDGw8qYBf3X6iCvrthYU/uqgVBVPAqkNLLBNxsriYgSzyDThve3QhJ5E4KRG4C+jeY+OWjNByQAAAABJRU5ErkJggg=="

/***/ }),

/***/ "92a7":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAABJlJREFUWAntWF1oHFUUvnd2N6hEoZRaFfsgCIp/xQcVH0Sq7UMRfLAYKhZ/qFVoslGzP0262XXY7cbY3WDIboVoS4taCin+QrWlNq0iPhQRVHxRUCmVIkRfuknT7M5cv7OZm73zszs7aRsVMpDcc7577jnfnHvPmZllbPlazsByBv7fGeDN6AsheG8i/YLJ2FYm2J2Mic5mtovDeYVx9pPG2L6xQm4v51x4+fEk+MrO/I21uQvvg+QjXosuNwZyk+GOq7eMDqXOOX3jBuwXZW4pyVF0SoQV05WwkJ0eY39PG9uwoNeJL4F+y9HjJ/84/c1X36mxwqpCcv3MKSDn7HOuRV4s7dbPKvAli9GkfrMwq28LwTZKZ1bsd6ROo2uL5wuiYXIlyJF3umHy3YgEqV6MNoS5MuisVmfmdF3v+KtSy+IYPEOucMDfXdkZzgCfs7v218h3dyylGLo7hQdBxd5DJHKmEDvkFIjuAEZqv8Qu5+jeYh/vMnOqmRemzl+KHJjgYoLhBlzto10/gQnSmXM698KkTV8qtSYaT3/fncxskFiQMTBBKgiN8zeQknP0RzJhXkF7kvpNF2fZpGDibmYYR6KJ1FNedq2wwEViVSsVRMuiSCT0G2bM2iTsbrUIREyTHeyOp1fvKeZGW5FS5wJlEOTauqHowNCqC6J6As+w29RgkDkT5pvR+OCwA2+qtk2Qgk6dr33bE09vaeoNE90DQyvN6vQXeELcQXY4nzVN056H9LVcR20K/W9/OzfcFsF4XL9eVKfpLK0VwjwQjQ0+IYOpY3//6yv43MxxPBHusXBDY/zpUiF3YNW14Q3I3yeK/XNTlerHiu4p+hJ8eWd+9SyrnkRG7rI8hNA0DvXEMgvPUMKjun7d+dr0MdzEvaQjc6YWYs+OFXMTpCNbsw/fv3YTAu4lnS74fGxeav7fl6BxceaU3C7pBn2tQ3Dzw95kZh1hCN4pKrWjiHifZSNAcGtpd/6gXENjV1eXURrJb8NcXsVbyb4E8Zp7OzmonyWuRSH+WncoxFWGYX66vS+zbqpS+wykH6zjSAxaz0u0rZbuGsrFXYMafFGWXZMOwJcg2RM5xrXNpWKuHIlEHoV+dt6P6OTcOAZyD0m/nGk9peIu2yuTnFNH8sW42KxiXnI7BKuCaV3lQvYDcjA6rP8e0th6rrE/LYeRBcdce7U8kntrQfcRyoX8YR8Tj/dBx4oQDz25p5j9SIVXXBP+zRT8ZxXDtiaDNGB1bSvZN4NjxazaGtj4+HgE/fAwV7eV80Fsa6FVoMXO+RJUHaNawz/+cuYQWsnjEkcTzuLQt12Vcl27owdBfK8qF307kDoxMRFCtb6HlrNJTqMghlGtr0k96Ch9N9bZYxPuJoiP6cYC9Ax82GzvS6358vQP+1GtjarT+AgKYkC1DSLLjybbGkdsmnM9/MF4H5rTA3IhMrYRX3ZnqO3bLlPE8DyN2bAAimlUXdYU2wnilc5+IUs8mkjjYb80vyrI6Oitkzgu6zHaMuHaYjKgnyFogVx8pUeKZcW0kaO4rgxKMpTJ/8KPR5LP8ricgX8rA/8AzIbAxE4StbIAAAAASUVORK5CYII="

/***/ }),

/***/ "93ed":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAshJREFUWAntWE1oE0EUntmfUjTxYFNBED0oXsR6EPSm4qEoHrwFFL31IibiGmOric1iTSFimtIqevDiyZs9ih5E9KQ3Cw2igiBFD2pEsgTs7mb6Xuy22Zlt4ppt6mEDy+6bee9733zzdnYmhIS/zhSg7cK14et7LLs+xAgZZIxuJ4RF2sW07qcGpewzJH6myNKDUmFsrpX/qgR1Xe/5UbUmGCXnGGNSK5B/7aOU1ikj9/qiyiXIt+CF40kQyX03rCdA7KhXUNBtQPR5LKIc9yLpqUxDuS6Rw8GiEJjTa+CCglhzps1mm6cVRjgPdXNFVje8mBzPfPUC+tu2i9fyW22zdgTq+Rbk2ObE4XSrMh3ga1JxHJx744VgZFlZJKdGlH0lXa84Pp3clwb4SNP1p6ZhvXVIoiCWzYYAW2vGXybiNOLb6jzjHZULilwzLmIidnMbnxv7RIKNpWQlDKd1xQr2icf+s4y5cwhTzK9z5u/al/OpjDsqIAuwOSRxjRUU5CLW3QwJrvsUhAR4BbQRfRdefPta27BSMLz4PMIys2CaH5achM8gH9wNWyAIST92IzGf424x/18IwvPyb4c16FOzsAZ9CtbePazB9hq5PMIadMkRhBHWoE8Vhe9fIpWdh3NJORZVj8FJv+4TL3B3Ycu/e8eWnXeKeTx69gaebRXAZDo7CMJoyavj/byLQLBSqcjgPPOtas4ldX0TH7AWNmPkNCNsQrJrm3l8YYrhhE8vpEcn4d4fiypnflbt/b3KxveFwsgvPrgTG/Mk06OnYIf66fCBvW9evZ49OXV7bAb+yXBtWgUF0aEvImuHDg6cNQwSsyh7adjVG0gmcTkzjbveRDqb9LRT2SlXfwsb84BqJUrYw3K5LE8Xbz7myWEOgSA24ssRj8dtVe1hkkTvS1R+h+1B/yRKhyVKTuRyOTNo7BAvVCAoBRYB7wY7i+lk0qcAAAAASUVORK5CYII="

/***/ }),

/***/ "94ec":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAh1JREFUWAntl78vBEEUx9/b9aPRSDSC0n8gUR0SWolOpaSREwmncMgFp8AlCA1/gVKlkvhRiMQ/gJYoCIWLhNgZ81xmdvb2rIu922lmks2+mfdm3iffeTu7C2CbVcCsAhiVfmpuaZAxNsoB+oBDBwBviYqvhQ8R74E7E7uF5WNar6HSolOZhW7G4cDzvP5K/nqOcc47Edm+yNFFeUKA6cxiyuPsSCjWWk+Qatd29MCScmbh5BZLroCCtK3lyokJFwjOhtvUfL21ln2UEydnsqI0/bZXyFes52rj/JWClgKkByJcc85aW4u7mMvlWHBacj0FSE+rnpaUMw1HPKoGf44SjZC21aRyEkUBls45OQxANef3zFk+oDmGyMw+IMKDHul9fvTofVO2AhRnxLkOwYFlRA0qv+5L0lYAjuMc6onFKyf19OatmIZUgDvryyfiaDnTIQHY/HPx6zQ9uzQ8PZ9vD/qS6alzkNI5COMewJX+NiElOXgp9vEO4q1QokJ4FTGJNKUgZdvZWL1r4DACBBDVEvyQCAAS03Yhf+4i9oa3O4q4fr4QIKUiJXc3Vwdc1x0SoAeAeAOARYmBgC/Srvc9UIPlyejBEWN0hVr5V0oooEYDFRWs0do1WcYCxpXRKmgVjKtA3Pm2Bq2CcRWIO//fNSh+EW5lct2WY/Ku+3Rb+v+6/x/QbRwTXzqXP5ewf0uEVcb9Nt+OWwVMK/ANi5mZTElVwIAAAAAASUVORK5CYII="

/***/ }),

/***/ "a30a":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAABIJJREFUWAntV11sVEUUnjN7NwhtEwFRg5hKiBrFRJI2Kf61DyLGhKgvNsaIJhrAxBbaLr2iu9RLWtLabina9cWHxmDiTxFiNGBiLGJNQ2kwCqGgr6JVYoQHK2y7e+d4RrnrzO69e6cLSX3YTW7u+Ztvvj0zc+4Zxsq/cgbmNwNQ6vSICNvad61GzN7BAFYIhhUEtgAAZ8l1HtA6NtjvnCkV3xs3Z4Kt8a5bMul0OwN8FpEt9YD83zAJHHel+nbv9/eHW+dEcKvd8bAQ7kfhxAomHmqou3dzY2OjW+AJMVgh/py7xU7clXXdQ0jLmDOaCy+MHj+ZpfAt5kP+jYyYDqi5r/4Axa5S4wHY7wzYEc7gS+T8C4Y4woGdpD05TXEr6VFXqKbuoYbvJsZGf1QxwmSjDLbF47fOpLFeBeMA9tJKa8BxHJmZgl+z7awVIvshka7OOQV2k/xpTjcQuEEMm52BdXlxI4PJrr4gcjJ2sNcZ59x6msTcvqO9e/fW2M6aPKyiqhFBQliuogDAN6oeJEuSFLtP9VM52qjqYbIRQQS2WAWig5JW9WIy7c0PND+wpzQ9RDEiCIL9ouIA4pPDw8NGB6yh9p4jdFJ+9cbTMueW3LMVe5sRjMJRFYQyuHZ04tThlh3ObardT5a1DyCyiZb6Z3p+inD2kl9ckE0tA0Ex/9ibYonPkOEGNYgGzyDAuxC19qa6nR9U37WSjQm2Os6SzHR2nL7Bt/tNTtk5yhGHllRFD9DpvuQXU4pNI9gU63iMgXiHSKwoBezqx8CkBdYzbyadUx6WvgfnlZykhKtdzPR65ORbJ6h6/ieyThD5Znna5o8bTEYgaqvza3tQdZQiy9o4evz0egR3C0MmT3xBraQEdKeSXa+Z4l9TguqkTdsTK6lR2EE188UCosDvfzvZeUyND5KNCMpeMCPY49TBjA/2dX4dBOZnl82BAPxErQzUpu1PJXc3+sXn2/Q9mO8lPRaLV2dcNkHZ6BFCfNX0SsejPmGBprf6O7+lHnGTHgC1uh6shRKcjbAH6fhXXoEAlhVz+lTJcddB1ZhOAW/U9WAtlKDA6Fl1OHU261v37Fmo2sLkGbisdUPUaP8RNsbzhxJcVsG+BwYXvAG01Itmpy4+kdMNBMxmGrQwxClNL6KEEqTvqqAr5vs6Bg7EHOcG3eav2fYbVdTOxDUvwIimF1FCCcqxEQ4pev3XxyHenJ7OHm5pd9YEYdMf4y/bHY9ccv8co6zfqcQhfW8/VvSiolGZkQjN23f2CxRteWgu3eDGCETe1H5jCAsYE9eTXE33uVq/+zMV6n1UqJ/PwwlUjW51crS1fHEiM3WhjurZAwpahLJTT8X4yo2PJO+niJ6J6t+JSquixdNN3kZLLIEG2touW5XWBprkcxPgvBikTL9XEala19Pz6sU8X1HVeIk9FMog0GfsOSJqy2ukZ/d7E/h56rgPAreGUr3OCb+YMNucCaqAze2JVXTC6YLObuLIFlGa/iLi0/ScI1Jn9va8fo72nM9iqyhluZyBcgauKgN/A8H3Z5UknDK7AAAAAElFTkSuQmCC"

/***/ }),

/***/ "a3d4":
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "a9cf":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAmhJREFUWAntWL1LHFEQf7MrRoKNCEpA/Qu0sIgE/KqjAcHiKkkpyGqlovhxHHLaeAYTzialWFhYqukCsRAiqPgPWFlYmEoLkfNNZk4fvllXYWFvV3QfPHbe7LyZ3/7m7cztKZWOt8iANzG3w/MlPHtVIAjEvkB9AkongZihQgYz+IyL0fHsZwX6JyI2PWMW+hYAnCl0hosrC7/szeEZrAA4BlR+YPJtg2M5PEC/hwqvwwOkNJTTETEwk2K/2+AzCLALRLrfmNf3Z6Q56F6qSxl4jQyA/VC5XK724qq0Sq/HAIC6pHubxUJ+xraJW3btgK0fO78TuGHSvadZR7P7U2fv+cH+3qFtF6cs6iAiDHJwcJwuqks5ljViB1+TGqIOUu3bUqC0q7V7q9QIgyKg+za4qHqxKcz+3mvHYlkwWCwsegrhtKTUb6rSjXQOd6ClYUNsiqgXP9V7RSxaCAa9yTkPNX67M3KWejrasplMhshMbggGQeP8AxQ98+fvSenRL+uIerFJ8UO8YEkwyGn1m/l7ctqL/Qyl69fOgL8XV/+7Ki1QjfrKD05v2np9bVWWevRNUkSIt5jBUWubMmAI6BTpeDltdHFfRR00zLkO9DvgfmEwRhc3MBNPMIgAx1T3jn4s53fHJrL9xsi+RtWLbZ+2bAq46dEC4FohXwbljc9ea7x9xxtpw4btoBIf7bZ/ylgT3H0flz/MRIptw5ciC4DmX621lcUa6wwOCbAR9WLh01qYFBuVSDEgtlM//vDU+eNNcfdiwSDXPQZB52+bJ8tGx3ISQzDIRZnrniktDI51SQBLY74ZBv4DS+vqECs93UQAAAAASUVORK5CYII="

/***/ }),

/***/ "aae6":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAA1ZJREFUWAntmEloFFEQhjNZ0YSYuAQXTHADMYIHk4MI8eRJEHNSPOjNW27qQUSIxIvLIehB8CB6EAX1oogbGFAPKhjcIypEXBEERUWNMeNX0g0vNTWv+03GCUgKft6revX/Vbzu6X49ZWUTNrYdyIyNno6dzWYbyNwIloFZ4D7oy2QyVxnH12iuE7wFlp0m2DRuHVJ8h9WVir3En1fyJinarRrxuaVtkk72Gt18JbYdrAUXjPXSNEnhXqP4Z2Ir48vIvBwcM/L+XZMUy4DDRlFprj1uLh6J5WvyMWs1cV5RxqjYUUbLpMFWqxDxfE3utvILilGkEpwAPnvNYrNVgLg0eVyR5X4tt/KDYohUgTNKXFzZNW0DBKZbBYjXgFeKsNDKTR2LRM8pUXHlRl8ADoqj7BZ+rVWE+HWV22HlpYohNAlcUoLivgAtIsIol+4k0Ca8KrcQfjsYchJHmMvrMdwg1oJrQJtcwjmuIn41uKIT8eWe/XsOYGwDH4Fr/a5O6jkK9eCGqxTNHzLOtISI14E7UZ479OKsAJ/cIPNhiVta3hikBiD3kLZ+AubNHwuyPgM81UT8H0ZsV8xLPSIyDdw1xGRnGtMIkdcC3gCf7UmjNSoHtSbwwFC9Sax+VHKCQ/5S8MXQklBBOzcb4hNDsI9YXUI/Octw1gH31xpLb8tJTgrAbAbPYwVnvMx8chJfr8NZD345OjKVx0mXzk30Ic0Hg0DbeQLBL3I4m4D8Ol2T5rYkNqMTIMlzztq5s8SrdX6SL00AacY1aXZzEtdch7jPVYrm8kaoNAmeIJwuoJuTy7zBQ/MvQX4EXJODZYWflbsKZ6srEs1/MnbmZgdEEPithAu5rDuVhrjyUF4T0IqdqoXtrPxR+D1aA/8bWJ2fFbCixQOocoLZr/n48mBeFaLjzdUFvMnRIhz5HjmkufhyEAh/8fuK6iK+XFkjX859RzQPX45QbUn84HVdyCdAbgXQ3xMi8QHI/zDFN1FXJg9uOdPJWXAKaARTgbynTwFt7wgsKX5nkSLi73XFAF8+fBYVsznr0+52gQUG4XXwl9qzAvnpaOxAK/gesGuSeg/MTVchLMv8A5Nii5HpAcuB/H83ArJqHMYfABfBAXZuiHHCJnbgv9uBPwSRIVjlgGxjAAAAAElFTkSuQmCC"

/***/ }),

/***/ "b282":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAABaFJREFUWAntWNtrnEUUP2f2YjebJsWurS2pUlNLSYII1V4spYhP+iAikj+gQqiYaHOrSlL5jFEKSSmaFCGIjz4EBZ8UX7zUNrVRXySJSBJUqojNRtpkd9Ps7jfjb3b7bb7bZjdNVvrQgW/nzJzL/OacM7clusMLrxXf6Oho4NKPP+8xlWgiJZsUUT2R2kLEtahr8vZ4AfQN9F3HALPEYiLAcuLIY4/MNDc3m2sZc00A27p7X1KSzqgCkLUMBbjECyzo9aGB/g/K1SwbYJth1MjFTByGQ+UaLyKXEZtDsSHDgJdLF1FaJC8RSUUUZiPLlS8mp21oW8X47v6yPagV27pPH1dS9sO6ZOZJhGwCcZskxXPEaiFAAeQdkUlmLfpq0HcfKWpESjQppRoxmGAheocG3v5Iy90t/4cHiobYMIzw9VS2XkqxV7L5sCK+nxXFsH3EQMdIqa0AGGGmMEIeBi9fI/Zop/GTztVMacgtI9T/QjcO3bhgNSeJr0FyJqBCv4qdNdPnOjqW/CacA4j84Fe732pUnD2KbeQocuYghB/EF/BTqkCfwryuYgJXmMQFFaBvh870Tei58ivdvc9IqT7EbHdUYODbNgnP/Q3/vChMqUbuNHB6VjlMLEeC2N+xt6HpWzjBpC5jK5nGlvI7pOIkaB45FDdFKB4WwWRWinQVvvT2cPpwXV16ampKGwvP4wvjW07p/MxGiINbUefyVyoZwwa8C3m4F2MfwfA4Jn2LDAYEnTAljcClQezE44i6zkGcrbqoaGxz6FksmJv59uq/51bYWt6tM7vCzlOwG4wnsksY7xZLLRLzV1hgh1BnSIkTwfcH+j8Ht85SfrmrZ6EgD/emUhF9tLkHs8TXVd+oqQmpxXlEMV8QpeDw4DvPWW1d+xx17Dhrq6qWMnaFjaT3RaNZuz34sQDW6vd0INR6PyuUhoYGX4CtnW8+jfQdyQkq0TJ8tu+LghKIUnwt29LSkm3t6rWrefB4OrAn2vHZlZ00wEE0lxqcB7rLIVCKD+GREb1IHcXhUc3xhph52a4yPv7HJnvboi1wum2ny+VruenpBSz0lYJTSZ86juIBiBXkWBBmdfIeh8YGNjy2ldM5eigPQOx5DoCZFPl6cCNwqnTINXnliJ4/QH2w20pIVA4gyYwDIJLfMXYRgCppw0cyS9X29kbSbtvIwZTbvjfEuA7ZhSRlt9nbG0nDNq5v9sI4IZ3FAxBuvuYQ0df2ShWv7Tn3UB6AQpFDCBfMinkQR5vTg0o5oqfBegBKUk4PKvL1IC6Tf1qztdN+fX58LYcjwQmQ8fhyFQ9AIZxC2IR3uHTyTRxveuDc4KA9MqX4UEA6OWzr54Dbjvuo0bP6xS6EMDxub1v0rbPXebxZTNSl+FoUh8IBx7kqeNJmIkd6PBirDn6PC8PKfsTU2G4Y97oV19s+aRhbcA981LKDSGQjcvOY1bZqD8Dc5ZR53BJAiEUmke2w2htVZ5JmJ2wVHmXw5E+Dg91Jt30PQC2AmX1mF4Rye+sbxj5733ro9tdON7KS7XYbeMB9Ym9btC9A8cD283D5b5YQErOK0plv2k4ZBwp9t0ng75NjGVN+jVyPWib0WLxr+5DVttdIN//S1tn7PLacT91cGLuE9L6Mx9QMeLNC0FWTgotR3pTcv/+hBB5NoUWiavMmPmXWIkV2s0n1Sqg9AHUI4SnknWWbReCF4YE+z1iaXxSgZrZ19ZyTik5qumKFeeD8YP+pYvYLSeonMD723ZcHjhzTl8in/Pjr7FOCuHv4bH/fanZWBagVfxi7cPHgE0+Ow9V6kexczViZPP03x0V8xwHu41I6q4bYrYwHzm5kxWGs83rw6pFT9cjFbXjDVmPlR5Ff1fn3LCUgk8D1KYG+v7DZz2AnmMWmMhsIRq68927PP27bd9uV8sB/e70ODPA23xAAAAAASUVORK5CYII="

/***/ }),

/***/ "bb64":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAStJREFUWAntWDEOwjAMTCqeAQ/iI0xs7AzsbEx8hA/xDkIa6jZyGkWnOKmEzNLYcuzL2c1VGKM/ZWBbBiwvf75cj8Z+nsHvhtPjfnvxmJ72LinmwTnn9qPf/oAekpiOjoHXInCjP17zuF52ymChMo2ANHhr7dusjFTCYAGf7/syAsVYICAcmGY/2ocDjDb3WOIAfRtCO4TRUYt5WngGp2un25uNM8iP2NhWgLUEK4PKYC0Dtfvhe1BKi+liLn3O4S+JkBbntJczjgPkGRrbOEAhLaYWl84Hz6BqMaMUbzFL0NpUgLUMK4N/zyB8D0ppcY5ZusBJo/EZFNLiHECu0TjAXOZG/gRgoHgqFq/n+kJaPOdjC2oxudMZDACWv98okJ69tZjq6lMZ2IqBL1CHbISYq1DdAAAAAElFTkSuQmCC"

/***/ }),

/***/ "c1ec":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAATpJREFUWAntWDuOwkAMHQeOASWH4QqImoYVTQoKEAWCgiLNarfZepcrcBharkGGMfAGa0REPiMFaR0p8bMd209vRsooxuilCrSrAGH8R7oaGsp/rr5NJl/Z+oBcFRurD2Z2AZictbbHPt2I9n2uCojV5z4zwWyQY19i5MtaWStx2frwPU8wTLyLrwSbroQqqAo2VaBpve7Bpgo+PnVBp2m6sEEoquu+MjSbL0fc9HO32RPR03mFBKOyedKMyeVn88sph9n88SO8WtuDNqcByEiMGGxrBEHglS1c4u9s68+Kr5rIfOy9+/YKKkG5/HWwKlhHNVmjCko16mBVsI5qssYr6E4TJyQkRqyslbUSh/WU2CNiEiMG6wka97uDG16bOowXKtuSffiIlXTMmG/GledogSqgCqgC/0SBCzOeVk4Sy7CAAAAAAElFTkSuQmCC"

/***/ }),

/***/ "c3ac":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAzlJREFUWAntV89rE0EUfm9324i1l5bWIl7FP0BQiuK11IP0X9CDUNlSNEk9NNGtrSCNEUqCgteehR4EDyIeREQvguDBkx6kl1JBE8S2m3m+t8lud3fS1HQjRdiFMO/XfN/Hm9mdCUD6pB1IO/B/dwD3k2/POSdMcAelbmV56fN+9Z3ys3OF05JvgFWrLjvrnWr9nOUb8XEmV7SJaIEaO0MuJxFR8WDG67rx3QZ9amLsgJ0tfGfMO5UHi9VOGEa75Ey+eFWRqhDQULt8L2KCLRzC1QmvrUBFlAsmIa4aaF5GhMkgdkDDMPCSYPFyrPoQES4/GBq1Peg4jrVR2/nNNbycWB8ZtIY5th2ak9hkvP6NmrsJQMcYrDEy2HeEY7KTtEfrYL0OsqzeXkOkr70WJwoEkzvzpaXGbHG23OigCYykCSniH4LTWeAhCIpTpgLjHenW1zrIr+uoD8IbsObbvR7D2GHOOI8mkMid8Iv42/fKt3s9hrHDnHGe4Kiz88XzQDBFoKZ5lLPtF1r4ND7Bzt6eBFRPvDgZ16rlu8/F7jYu2OTCDSA6yh+LBTtXHAOEtWpp8U2Yc7eDpGaJVI4IBrjwI/ZZZyr3Fz+Eiz2bxfEZfVJ+gVBJdBkXbOEQLuEUbmANcb5dgZEMjqLbOB4J/QOnyYHBnm9HEQjMEOQNw7jCN4x1bvuYUurl7K35C9okXlau+SY/YDvIdxkXbOEQLuEUbtEQ4LUM7SyeyRemlaJHkjfQeMjXoWx8Ui98vs6V+TZz0+Mx8HqltPS4HW7QQT9pmdYL3+YX5qJv93oMY4c54zyaQNOFn0ERYSawe22EsCOcMR5NYCx/6G4qMOkSaB3c6uuXc6T5IGlvuZ9KPIawI5wxYE3gcGZ7k79LzSs+walcrjQQm5PY9TAZW4CESzj3Am3bITs7/47beLYF8BaQ1hhqq1paWtkL6G/idr7ARxllgHCKj8pxDx/gfbV879xe84PLQrTAdPhv8DMGMTwggnG+fcj/4kQCSVGZMfj/TnMXcfcUn0ZOlDvqaUssabmhcGsnGOA1H+Y/OCSIIjDRw3iCQ4Ip2MLh34YSAaeT0w6kHUg7cPAO/AGCRkgdL4lBygAAAABJRU5ErkJggg=="

/***/ }),

/***/ "c5e5":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(module) {/* harmony import */ var core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("7f7f");
/* harmony import */ var core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("ac6a");
/* harmony import */ var core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("5df3");
/* harmony import */ var core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("4917");
/* harmony import */ var core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("a481");
/* harmony import */ var core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("28a5");
/* harmony import */ var core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("6b54");
/* harmony import */ var core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_6__);








/* Web Font Loader v1.6.28 - (c) Adobe Systems, Google. License: Apache 2.0 */
(function () {
  function aa(a, b, c) {
    return a.call.apply(a.bind, arguments);
  }

  function ba(a, b, c) {
    if (!a) throw Error();

    if (2 < arguments.length) {
      var d = Array.prototype.slice.call(arguments, 2);
      return function () {
        var c = Array.prototype.slice.call(arguments);
        Array.prototype.unshift.apply(c, d);
        return a.apply(b, c);
      };
    }

    return function () {
      return a.apply(b, arguments);
    };
  }

  function p(a, b, c) {
    p = Function.prototype.bind && -1 != Function.prototype.bind.toString().indexOf("native code") ? aa : ba;
    return p.apply(null, arguments);
  }

  var q = Date.now || function () {
    return +new Date();
  };

  function ca(a, b) {
    this.a = a;
    this.o = b || a;
    this.c = this.o.document;
  }

  var da = !!window.FontFace;

  function t(a, b, c, d) {
    b = a.c.createElement(b);
    if (c) for (var e in c) {
      c.hasOwnProperty(e) && ("style" == e ? b.style.cssText = c[e] : b.setAttribute(e, c[e]));
    }
    d && b.appendChild(a.c.createTextNode(d));
    return b;
  }

  function u(a, b, c) {
    a = a.c.getElementsByTagName(b)[0];
    a || (a = document.documentElement);
    a.insertBefore(c, a.lastChild);
  }

  function v(a) {
    a.parentNode && a.parentNode.removeChild(a);
  }

  function w(a, b, c) {
    b = b || [];
    c = c || [];

    for (var d = a.className.split(/\s+/), e = 0; e < b.length; e += 1) {
      for (var f = !1, g = 0; g < d.length; g += 1) {
        if (b[e] === d[g]) {
          f = !0;
          break;
        }
      }

      f || d.push(b[e]);
    }

    b = [];

    for (e = 0; e < d.length; e += 1) {
      f = !1;

      for (g = 0; g < c.length; g += 1) {
        if (d[e] === c[g]) {
          f = !0;
          break;
        }
      }

      f || b.push(d[e]);
    }

    a.className = b.join(" ").replace(/\s+/g, " ").replace(/^\s+|\s+$/, "");
  }

  function y(a, b) {
    for (var c = a.className.split(/\s+/), d = 0, e = c.length; d < e; d++) {
      if (c[d] == b) return !0;
    }

    return !1;
  }

  function ea(a) {
    return a.o.location.hostname || a.a.location.hostname;
  }

  function z(a, b, c) {
    function d() {
      m && e && f && (m(g), m = null);
    }

    b = t(a, "link", {
      rel: "stylesheet",
      href: b,
      media: "all"
    });
    var e = !1,
        f = !0,
        g = null,
        m = c || null;
    da ? (b.onload = function () {
      e = !0;
      d();
    }, b.onerror = function () {
      e = !0;
      g = Error("Stylesheet failed to load");
      d();
    }) : setTimeout(function () {
      e = !0;
      d();
    }, 0);
    u(a, "head", b);
  }

  function A(a, b, c, d) {
    var e = a.c.getElementsByTagName("head")[0];

    if (e) {
      var f = t(a, "script", {
        src: b
      }),
          g = !1;

      f.onload = f.onreadystatechange = function () {
        g || this.readyState && "loaded" != this.readyState && "complete" != this.readyState || (g = !0, c && c(null), f.onload = f.onreadystatechange = null, "HEAD" == f.parentNode.tagName && e.removeChild(f));
      };

      e.appendChild(f);
      setTimeout(function () {
        g || (g = !0, c && c(Error("Script load timeout")));
      }, d || 5E3);
      return f;
    }

    return null;
  }

  ;

  function B() {
    this.a = 0;
    this.c = null;
  }

  function C(a) {
    a.a++;
    return function () {
      a.a--;
      D(a);
    };
  }

  function E(a, b) {
    a.c = b;
    D(a);
  }

  function D(a) {
    0 == a.a && a.c && (a.c(), a.c = null);
  }

  ;

  function F(a) {
    this.a = a || "-";
  }

  F.prototype.c = function (a) {
    for (var b = [], c = 0; c < arguments.length; c++) {
      b.push(arguments[c].replace(/[\W_]+/g, "").toLowerCase());
    }

    return b.join(this.a);
  };

  function G(a, b) {
    this.c = a;
    this.f = 4;
    this.a = "n";
    var c = (b || "n4").match(/^([nio])([1-9])$/i);
    c && (this.a = c[1], this.f = parseInt(c[2], 10));
  }

  function fa(a) {
    return H(a) + " " + (a.f + "00") + " 300px " + I(a.c);
  }

  function I(a) {
    var b = [];
    a = a.split(/,\s*/);

    for (var c = 0; c < a.length; c++) {
      var d = a[c].replace(/['"]/g, "");
      -1 != d.indexOf(" ") || /^\d/.test(d) ? b.push("'" + d + "'") : b.push(d);
    }

    return b.join(",");
  }

  function J(a) {
    return a.a + a.f;
  }

  function H(a) {
    var b = "normal";
    "o" === a.a ? b = "oblique" : "i" === a.a && (b = "italic");
    return b;
  }

  function ga(a) {
    var b = 4,
        c = "n",
        d = null;
    a && ((d = a.match(/(normal|oblique|italic)/i)) && d[1] && (c = d[1].substr(0, 1).toLowerCase()), (d = a.match(/([1-9]00|normal|bold)/i)) && d[1] && (/bold/i.test(d[1]) ? b = 7 : /[1-9]00/.test(d[1]) && (b = parseInt(d[1].substr(0, 1), 10))));
    return c + b;
  }

  ;

  function ha(a, b) {
    this.c = a;
    this.f = a.o.document.documentElement;
    this.h = b;
    this.a = new F("-");
    this.j = !1 !== b.events;
    this.g = !1 !== b.classes;
  }

  function ia(a) {
    a.g && w(a.f, [a.a.c("wf", "loading")]);
    K(a, "loading");
  }

  function L(a) {
    if (a.g) {
      var b = y(a.f, a.a.c("wf", "active")),
          c = [],
          d = [a.a.c("wf", "loading")];
      b || c.push(a.a.c("wf", "inactive"));
      w(a.f, c, d);
    }

    K(a, "inactive");
  }

  function K(a, b, c) {
    if (a.j && a.h[b]) if (c) a.h[b](c.c, J(c));else a.h[b]();
  }

  ;

  function ja() {
    this.c = {};
  }

  function ka(a, b, c) {
    var d = [],
        e;

    for (e in b) {
      if (b.hasOwnProperty(e)) {
        var f = a.c[e];
        f && d.push(f(b[e], c));
      }
    }

    return d;
  }

  ;

  function M(a, b) {
    this.c = a;
    this.f = b;
    this.a = t(this.c, "span", {
      "aria-hidden": "true"
    }, this.f);
  }

  function N(a) {
    u(a.c, "body", a.a);
  }

  function O(a) {
    return "display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:" + I(a.c) + ";" + ("font-style:" + H(a) + ";font-weight:" + (a.f + "00") + ";");
  }

  ;

  function P(a, b, c, d, e, f) {
    this.g = a;
    this.j = b;
    this.a = d;
    this.c = c;
    this.f = e || 3E3;
    this.h = f || void 0;
  }

  P.prototype.start = function () {
    var a = this.c.o.document,
        b = this,
        c = q(),
        d = new Promise(function (d, e) {
      function f() {
        q() - c >= b.f ? e() : a.fonts.load(fa(b.a), b.h).then(function (a) {
          1 <= a.length ? d() : setTimeout(f, 25);
        }, function () {
          e();
        });
      }

      f();
    }),
        e = null,
        f = new Promise(function (a, d) {
      e = setTimeout(d, b.f);
    });
    Promise.race([f, d]).then(function () {
      e && (clearTimeout(e), e = null);
      b.g(b.a);
    }, function () {
      b.j(b.a);
    });
  };

  function Q(a, b, c, d, e, f, g) {
    this.v = a;
    this.B = b;
    this.c = c;
    this.a = d;
    this.s = g || "BESbswy";
    this.f = {};
    this.w = e || 3E3;
    this.u = f || null;
    this.m = this.j = this.h = this.g = null;
    this.g = new M(this.c, this.s);
    this.h = new M(this.c, this.s);
    this.j = new M(this.c, this.s);
    this.m = new M(this.c, this.s);
    a = new G(this.a.c + ",serif", J(this.a));
    a = O(a);
    this.g.a.style.cssText = a;
    a = new G(this.a.c + ",sans-serif", J(this.a));
    a = O(a);
    this.h.a.style.cssText = a;
    a = new G("serif", J(this.a));
    a = O(a);
    this.j.a.style.cssText = a;
    a = new G("sans-serif", J(this.a));
    a = O(a);
    this.m.a.style.cssText = a;
    N(this.g);
    N(this.h);
    N(this.j);
    N(this.m);
  }

  var R = {
    D: "serif",
    C: "sans-serif"
  },
      S = null;

  function T() {
    if (null === S) {
      var a = /AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);
      S = !!a && (536 > parseInt(a[1], 10) || 536 === parseInt(a[1], 10) && 11 >= parseInt(a[2], 10));
    }

    return S;
  }

  Q.prototype.start = function () {
    this.f.serif = this.j.a.offsetWidth;
    this.f["sans-serif"] = this.m.a.offsetWidth;
    this.A = q();
    U(this);
  };

  function la(a, b, c) {
    for (var d in R) {
      if (R.hasOwnProperty(d) && b === a.f[R[d]] && c === a.f[R[d]]) return !0;
    }

    return !1;
  }

  function U(a) {
    var b = a.g.a.offsetWidth,
        c = a.h.a.offsetWidth,
        d;
    (d = b === a.f.serif && c === a.f["sans-serif"]) || (d = T() && la(a, b, c));
    d ? q() - a.A >= a.w ? T() && la(a, b, c) && (null === a.u || a.u.hasOwnProperty(a.a.c)) ? V(a, a.v) : V(a, a.B) : ma(a) : V(a, a.v);
  }

  function ma(a) {
    setTimeout(p(function () {
      U(this);
    }, a), 50);
  }

  function V(a, b) {
    setTimeout(p(function () {
      v(this.g.a);
      v(this.h.a);
      v(this.j.a);
      v(this.m.a);
      b(this.a);
    }, a), 0);
  }

  ;

  function W(a, b, c) {
    this.c = a;
    this.a = b;
    this.f = 0;
    this.m = this.j = !1;
    this.s = c;
  }

  var X = null;

  W.prototype.g = function (a) {
    var b = this.a;
    b.g && w(b.f, [b.a.c("wf", a.c, J(a).toString(), "active")], [b.a.c("wf", a.c, J(a).toString(), "loading"), b.a.c("wf", a.c, J(a).toString(), "inactive")]);
    K(b, "fontactive", a);
    this.m = !0;
    na(this);
  };

  W.prototype.h = function (a) {
    var b = this.a;

    if (b.g) {
      var c = y(b.f, b.a.c("wf", a.c, J(a).toString(), "active")),
          d = [],
          e = [b.a.c("wf", a.c, J(a).toString(), "loading")];
      c || d.push(b.a.c("wf", a.c, J(a).toString(), "inactive"));
      w(b.f, d, e);
    }

    K(b, "fontinactive", a);
    na(this);
  };

  function na(a) {
    0 == --a.f && a.j && (a.m ? (a = a.a, a.g && w(a.f, [a.a.c("wf", "active")], [a.a.c("wf", "loading"), a.a.c("wf", "inactive")]), K(a, "active")) : L(a.a));
  }

  ;

  function oa(a) {
    this.j = a;
    this.a = new ja();
    this.h = 0;
    this.f = this.g = !0;
  }

  oa.prototype.load = function (a) {
    this.c = new ca(this.j, a.context || this.j);
    this.g = !1 !== a.events;
    this.f = !1 !== a.classes;
    pa(this, new ha(this.c, a), a);
  };

  function qa(a, b, c, d, e) {
    var f = 0 == --a.h;
    (a.f || a.g) && setTimeout(function () {
      var a = e || null,
          m = d || null || {};
      if (0 === c.length && f) L(b.a);else {
        b.f += c.length;
        f && (b.j = f);
        var h,
            l = [];

        for (h = 0; h < c.length; h++) {
          var k = c[h],
              n = m[k.c],
              r = b.a,
              x = k;
          r.g && w(r.f, [r.a.c("wf", x.c, J(x).toString(), "loading")]);
          K(r, "fontloading", x);
          r = null;
          if (null === X) if (window.FontFace) {
            var x = /Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),
                xa = /OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent) && /Apple/.exec(window.navigator.vendor);
            X = x ? 42 < parseInt(x[1], 10) : xa ? !1 : !0;
          } else X = !1;
          X ? r = new P(p(b.g, b), p(b.h, b), b.c, k, b.s, n) : r = new Q(p(b.g, b), p(b.h, b), b.c, k, b.s, a, n);
          l.push(r);
        }

        for (h = 0; h < l.length; h++) {
          l[h].start();
        }
      }
    }, 0);
  }

  function pa(a, b, c) {
    var d = [],
        e = c.timeout;
    ia(b);
    var d = ka(a.a, c, a.c),
        f = new W(a.c, b, e);
    a.h = d.length;
    b = 0;

    for (c = d.length; b < c; b++) {
      d[b].load(function (b, d, c) {
        qa(a, f, b, d, c);
      });
    }
  }

  ;

  function ra(a, b) {
    this.c = a;
    this.a = b;
  }

  ra.prototype.load = function (a) {
    function b() {
      if (f["__mti_fntLst" + d]) {
        var c = f["__mti_fntLst" + d](),
            e = [],
            h;
        if (c) for (var l = 0; l < c.length; l++) {
          var k = c[l].fontfamily;
          void 0 != c[l].fontStyle && void 0 != c[l].fontWeight ? (h = c[l].fontStyle + c[l].fontWeight, e.push(new G(k, h))) : e.push(new G(k));
        }
        a(e);
      } else setTimeout(function () {
        b();
      }, 50);
    }

    var c = this,
        d = c.a.projectId,
        e = c.a.version;

    if (d) {
      var f = c.c.o;
      A(this.c, (c.a.api || "https://fast.fonts.net/jsapi") + "/" + d + ".js" + (e ? "?v=" + e : ""), function (e) {
        e ? a([]) : (f["__MonotypeConfiguration__" + d] = function () {
          return c.a;
        }, b());
      }).id = "__MonotypeAPIScript__" + d;
    } else a([]);
  };

  function sa(a, b) {
    this.c = a;
    this.a = b;
  }

  sa.prototype.load = function (a) {
    var b,
        c,
        d = this.a.urls || [],
        e = this.a.families || [],
        f = this.a.testStrings || {},
        g = new B();
    b = 0;

    for (c = d.length; b < c; b++) {
      z(this.c, d[b], C(g));
    }

    var m = [];
    b = 0;

    for (c = e.length; b < c; b++) {
      if (d = e[b].split(":"), d[1]) for (var h = d[1].split(","), l = 0; l < h.length; l += 1) {
        m.push(new G(d[0], h[l]));
      } else m.push(new G(d[0]));
    }

    E(g, function () {
      a(m, f);
    });
  };

  function ta(a, b) {
    a ? this.c = a : this.c = ua;
    this.a = [];
    this.f = [];
    this.g = b || "";
  }

  var ua = "https://fonts.googleapis.com/css";

  function va(a, b) {
    for (var c = b.length, d = 0; d < c; d++) {
      var e = b[d].split(":");
      3 == e.length && a.f.push(e.pop());
      var f = "";
      2 == e.length && "" != e[1] && (f = ":");
      a.a.push(e.join(f));
    }
  }

  function wa(a) {
    if (0 == a.a.length) throw Error("No fonts to load!");
    if (-1 != a.c.indexOf("kit=")) return a.c;

    for (var b = a.a.length, c = [], d = 0; d < b; d++) {
      c.push(a.a[d].replace(/ /g, "+"));
    }

    b = a.c + "?family=" + c.join("%7C");
    0 < a.f.length && (b += "&subset=" + a.f.join(","));
    0 < a.g.length && (b += "&text=" + encodeURIComponent(a.g));
    return b;
  }

  ;

  function ya(a) {
    this.f = a;
    this.a = [];
    this.c = {};
  }

  var za = {
    latin: "BESbswy",
    "latin-ext": "\xE7\xF6\xFC\u011F\u015F",
    cyrillic: "\u0439\u044F\u0416",
    greek: "\u03B1\u03B2\u03A3",
    khmer: "\u1780\u1781\u1782",
    Hanuman: "\u1780\u1781\u1782"
  },
      Aa = {
    thin: "1",
    extralight: "2",
    "extra-light": "2",
    ultralight: "2",
    "ultra-light": "2",
    light: "3",
    regular: "4",
    book: "4",
    medium: "5",
    "semi-bold": "6",
    semibold: "6",
    "demi-bold": "6",
    demibold: "6",
    bold: "7",
    "extra-bold": "8",
    extrabold: "8",
    "ultra-bold": "8",
    ultrabold: "8",
    black: "9",
    heavy: "9",
    l: "3",
    r: "4",
    b: "7"
  },
      Ba = {
    i: "i",
    italic: "i",
    n: "n",
    normal: "n"
  },
      Ca = /^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;

  function Da(a) {
    for (var b = a.f.length, c = 0; c < b; c++) {
      var d = a.f[c].split(":"),
          e = d[0].replace(/\+/g, " "),
          f = ["n4"];

      if (2 <= d.length) {
        var g;
        var m = d[1];
        g = [];
        if (m) for (var m = m.split(","), h = m.length, l = 0; l < h; l++) {
          var k;
          k = m[l];

          if (k.match(/^[\w-]+$/)) {
            var n = Ca.exec(k.toLowerCase());
            if (null == n) k = "";else {
              k = n[2];
              k = null == k || "" == k ? "n" : Ba[k];
              n = n[1];
              if (null == n || "" == n) n = "4";else var r = Aa[n],
                  n = r ? r : isNaN(n) ? "4" : n.substr(0, 1);
              k = [k, n].join("");
            }
          } else k = "";

          k && g.push(k);
        }
        0 < g.length && (f = g);
        3 == d.length && (d = d[2], g = [], d = d ? d.split(",") : g, 0 < d.length && (d = za[d[0]]) && (a.c[e] = d));
      }

      a.c[e] || (d = za[e]) && (a.c[e] = d);

      for (d = 0; d < f.length; d += 1) {
        a.a.push(new G(e, f[d]));
      }
    }
  }

  ;

  function Ea(a, b) {
    this.c = a;
    this.a = b;
  }

  var Fa = {
    Arimo: !0,
    Cousine: !0,
    Tinos: !0
  };

  Ea.prototype.load = function (a) {
    var b = new B(),
        c = this.c,
        d = new ta(this.a.api, this.a.text),
        e = this.a.families;
    va(d, e);
    var f = new ya(e);
    Da(f);
    z(c, wa(d), C(b));
    E(b, function () {
      a(f.a, f.c, Fa);
    });
  };

  function Ga(a, b) {
    this.c = a;
    this.a = b;
  }

  Ga.prototype.load = function (a) {
    var b = this.a.id,
        c = this.c.o;
    b ? A(this.c, (this.a.api || "https://use.typekit.net") + "/" + b + ".js", function (b) {
      if (b) a([]);else if (c.Typekit && c.Typekit.config && c.Typekit.config.fn) {
        b = c.Typekit.config.fn;

        for (var e = [], f = 0; f < b.length; f += 2) {
          for (var g = b[f], m = b[f + 1], h = 0; h < m.length; h++) {
            e.push(new G(g, m[h]));
          }
        }

        try {
          c.Typekit.load({
            events: !1,
            classes: !1,
            async: !0
          });
        } catch (l) {}

        a(e);
      }
    }, 2E3) : a([]);
  };

  function Ha(a, b) {
    this.c = a;
    this.f = b;
    this.a = [];
  }

  Ha.prototype.load = function (a) {
    var b = this.f.id,
        c = this.c.o,
        d = this;
    b ? (c.__webfontfontdeckmodule__ || (c.__webfontfontdeckmodule__ = {}), c.__webfontfontdeckmodule__[b] = function (b, c) {
      for (var g = 0, m = c.fonts.length; g < m; ++g) {
        var h = c.fonts[g];
        d.a.push(new G(h.name, ga("font-weight:" + h.weight + ";font-style:" + h.style)));
      }

      a(d.a);
    }, A(this.c, (this.f.api || "https://f.fontdeck.com/s/css/js/") + ea(this.c) + "/" + b + ".js", function (b) {
      b && a([]);
    })) : a([]);
  };

  var Y = new oa(window);

  Y.a.c.custom = function (a, b) {
    return new sa(b, a);
  };

  Y.a.c.fontdeck = function (a, b) {
    return new Ha(b, a);
  };

  Y.a.c.monotype = function (a, b) {
    return new ra(b, a);
  };

  Y.a.c.typekit = function (a, b) {
    return new Ga(b, a);
  };

  Y.a.c.google = function (a, b) {
    return new Ea(b, a);
  };

  var Z = {
    load: p(Y.load, Y)
  };
  "function" === typeof define && __webpack_require__("3c35") ? define(function () {
    return Z;
  }) :  true && module.exports ? module.exports = Z : (window.WebFont = Z, window.WebFontConfig && Y.load(window.WebFontConfig));
})();
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__("dd40")(module)))

/***/ }),

/***/ "c68f":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAABEJJREFUWAntWF9oFEcYn7nbS/CaU4iR0uIfBH0qKkrBV/FBW1FLsaAPVUQCh1xOjOcZNRe7mEvBS9S2SWwKUkGkakAfVBQthgMfSlGQCCK+iYoKxj6Yw6be3k5/39m5m9udJJvNRfuQhWO+PzPf77ffzHyzc4xNP9MZ+LAZ4OPBN7e0fWYV7EbB2Boh+HzGRN14Y8b28xzn4jGAbxjBwMnjR9rvj9V/VIKmada8GraOCc52CiECYwXx6+Oc21ywn2dHjD3Ae6uLoyVI5IZy1jUQW60bVG0biA401Blf6khqM1PM3HsiRy9LiSBM3Yu7MkhrLl8Q99RpxRs+xbrZFwyFsz983/pcF8irbffBjk8K+TersJ4zwJgrx9F0h4J8qXNNGrKDbIsbQrBSZolcqM5Ydtw0/5J9JtP+94Jnm03zej5nDUqSlBCrIBoRu1mNXyIijbRbpUwtZa5a5NS4FJNiqzYnNvncBIulpDyMprWsVVdyxn5XxioxXASddW6ya07CJRKtC+J7U9H4/rbl0uaO7a6xGoJyePXaWNJcMcLZoC1En7DEnaa9qVVeo085QZBZyO38VSbYLCJFm4EzvuF/QTBhmg0gch2L/+NKQjxbqY+uTVkGcSqER3LWFWRssQof4PxId9fhy6ptLHlKCPb39weHhq3zmM+VKjhq6pmfOtsPqLbxZFehHm0AMmLgfD6FVfQ1E/wmjxhbu03zta7/rT8H+zCt61UfjqzflyyetwMk4fL+eM7gy1zhG0zXt0KwjwQTG+1c/jR011GJTfGdzRidCKUHm+JuODhzUzQazZeMHgXPBHFUVr65YF/Fk20HVZxYsq0RpE3VBvnRjICxLpNpGXbYPameCS5ZNP8izr3bjqiHm1oOrSVbLJlaz2y7T/Vzzl4ZQf5FZ6f5QrVPRPZMkKantlZswuk8JAGQrQCz7N+akq2bUefOwx6UPsz93/jm2PBjJv1Q2vy0nglS8GMdHU+Qlc0QCxIM67Fe2OwcdmxY2or+IN/S29X+h2LzJU6IICH0dKUHeIBVrD0nMmpdrCeTvuS0+9EnTJBAejo7MsjkBR0gykh7d1f6F53Pj80XQQJqqAttx6Z54AD9FRk+5LBNSvVNEIU7V2MYG7Fp7iNrNn6n5kRC0Umx0Qx2FdpYIoV6Vf4uC9WGP3V/t1VGAtka/LTXxsqelRrdT/L/vHlWtvJc79F0pKxrvqhxEj1WO9AFR9V1sh9yFMcZ24lNfVxTjJTeIId86PaFC0691KvVUkyKrcZzYpPP9bFAf0fg2rmrWITRAe1cun3Fk61VvXYipuvaiVPnpEqYZNcaJGM8keqxmYiR/L6eAOO93UfTTU481xRTB/qvBLtywNl5qnTCIkxd/NLZqTqz2Wxh3ZrV50beinrUus/h02ZaHeNHpvKEzJ1oiBjbRtto4wJ/6L/f/Lz49JjpDFQzA/8CuXujY1a6Ym8AAAAASUVORK5CYII="

/***/ }),

/***/ "c69d":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAnRJREFUWAntmN1KG0EUx+fMfpiklmoLpVDEXFeL0DyBYG+9UXwGH8AH6AP0AQoVvWupLxCwhRZqq0SmriRa0SK5Mu2FoFTUVLLTPYXAODPsJO7stoXN1czZs+f/2//MyX4Qkv9yB3IH/m8HQIdfqUzdubw6ecpDXg4JH9Tl2IpRAmdAoVnwht4y9u5UrqsAItz5r+N5zqEoJ6c5B+AXJf/eCxmSyqJ/nMsYDhnQENSWeRRAXFY5Kau5TtuVxeU9F1nfoZS+HxosbGPuydnlRBiGk9EVO/K5SeeyNtZTAGURhNvZZmtCfG1sokI6HT4lxFIbKkssK3WdE+O6mHjc5tgIaFPsJrWMgLjn5MK6mJxja27cg9gQuOe6y9ptEkKUv1BbTNfqGAGxW7Ehjk8vhKbIBg5JjUt87XL+wiQHTGp6lg5y13VWHSDNfqAzAQRKrlzfX2kEm589x//wTwHi817BKS43vmx8RbAg2Gj242KqDkYPoj+KA8Mvt7Y+HYmu9eNiaoBR4W/lh/eX5AfQfl1MBRBc2JybnX5VrVbbonPiuFcXjXcSsWgPY+6Bu1oPauvPAhabjntx7PGTZoeTclyiNQexU70BeFOv19bjBMVjvbhoBTDq1J8l79ZSnbE9EcA07qWjEwNSwr9HnbrI2MeWCUh33ORiIkAK5GB05MGyrlN1MLqYycUbAwLQ2tzM9Ou4TtUB6WJxLioPdo/GKwu6tytdYdsxvOvsNthzsa7iIH6GEBOyHOu0FUD8RoKfIbIEQy3URG1ZV3n5brUO26Mj442Qt28DJyVOiC+fZHOOyxq9e+8X/bsrSZrNJlNeK3dAdOA3OG/X/RkKFxsAAAAASUVORK5CYII="

/***/ }),

/***/ "d264":
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "d5fe":
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "d881":
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "d940":
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "dc27":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAulJREFUWAntVs1rE0EUn9mkKQUtWFtBrdSD2GNB8J6DBz/+AO29FLFJaJqmBtOWpTUtahJpUwU9KCJ+5SJIVcSTioJFVHrw4En8KBSLWJompvsxvlnzNuOSwMaErYcdsrz3Zt6898vvzRchbnMZ2FwGKKYPRMaPEKpfNWwm9c+lJh7jWC2yUXEwpxcVDo4x1slt+gfoHnOsFqVRcUo5JcyN4Lgt6jhuV4pzRd3ufKufCdA68L/YLsB6K+Ey6DJYLwP1znfXYL0Mlq86S6SBSJxZuhpqBmW5VVrTujUP2+3R6De9q2MxEwoVrUkcL3FwRO4MDI/e0deUVZXoC0xj9w35eflLIDIa3lSAg2cSO3VNfQd39AkrEMZIByMsDeCnxDFHGVQ2CtfgKdLOAVB4MsH3klLyEN58ywgKwI+EY/I+tKuuwUuphPlWRGc7stra5ewpxfzhUgxF8jD/7LnEK26H0+mWjaUfz+AZdRBMj6pqR0HO8jHHGNSUvJ8n5A1Ym0dw3L44NFQgjD7lutEo2Y6qYwAJk8ykAOYFAuAym816KGHHsA/K/An1qiVGh0bJZtJ6/RdZ3c/jtW/1XsG4sixveb6weAM2SI/RR2ne42t5hOOOAUwmo+uQNISJuQyeHuv5nlPvwdrrxn6JssTMVNzcNM6VGBGU5EB0rI+p+msRHKVSMnMh8dcx4xiDiA9K6l3JKTNM10+Vryqag119MnN+8hb6oXQUIICTVnLqTTiUywc1Je9Jk/d4Zlr+iKBE6ShAAHdWvEXgoL7dtKutzzhmRFSC7hjAwZi8V1XVCOaGs/AtJdJddennoeDwOHZzqUu+5je4UcxNAv/mK3qJOvbZleJcUdc0zQ/s+TAOlPmAzrQHFb55rVj4EItNb+O+JkA4SPt5QCMo6BioZlklDoDrshsLzsS2gr6+g/v/031rN5HoF4zGe3VGeo2kDApcoTHK4Edhc9Mnc6nJyxVc3C6XAZcBl4FGM/Ab5B4x9ZoHKr8AAAAASUVORK5CYII="

/***/ }),

/***/ "e232":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAA8dJREFUWAntWM1rE0EUn8luKrQpSK1KoVYQT1X0Ini0VlrQm/+Ap15KTTUtWmsqDNSWWIwtNrUeKnhTevFmqWAJeFVB1JsnUSpYP7CxmmR3x/eis5ndZL+S2PTQhTBf7/3eL2/evN03hGw/1XmAVqoeu8IOaprez4nRRTg9wAnfGQyLZijl74HAE1UJLUzfGH9bTj8wQcaY+vmnliAGHwLAwPplSVBqUE7mdzWrQ4Cfk2UCGUBya+v5x5yQHhmkVn1K6UprRD0tkwwFAUfP/S9yyINz3v1lXbslc/Ltwejo5G6e3/gEIPKf+khDygW1KfR0hrHvMrBX/+LViTY9v9HFOZ0CzHYhD140wgo9ImJSFQtebcOOHM/miQFyBYIA9CGsqienE+ydl2659ZnJ+CrMP4gxtpzPaK8ESXSApvM+WIuhnuwNHDs+ScbW4LRGweWrlJKXJKz2VEpONjLN2Fc4zZflOQijXjH27UFUSCXH70KDv5o+SrgxbWQ3TEzY9g4xcIzB2Mi1Q5pu9OG/+avAI0LJX+svzwmsgeE4mCo+c8mJArcSD8IRb8CTlNd5P+ciBCy6RRTXHo+AfidodgLWYHR4rGyec4WARUsMIrm1jLZkED5gO61eOK7riIWYiI02XIVtixaC6DkA67bJ1GyI2PY85wVubjHGHG4rkXYTUwmeMAzif2nBC89cd8pznJJ+sDUv8pyp4NAxCRYOhBlz8JLFPBdRj2IacNB1nfab51xBYNHcYnCcmXtQCT1XKTnZqFeek2XL9YsEpdyDgrit5RQqmbNjyXnOC88kCK9qS54LGnNuhkqxrLbcdCWCbmL1W9smWK3vt4QHh+LxffIfoYT+EOMtQTCXDZ0QhAotFFNiXHeC+MYh3JgShLDllC6LcV0JLi4uKvncr0fwkmgThKDVFa7eF+O6Enz24vVhqJSOCzLYQvylbt9kb8RcXQk20UYo3IsHAkqJJbp/z4ggh21dCSYSo9+Iop6CD5N78BujHXvPzg4OZmWC5teMPLmZ/dQUew72+pxsSh6kGVmocLrkiSr6pVhWW27QJkG8yJEFsaiWx9X07Vh2W27YRYJwyyQLYsUPRXWLPFdJHzEQS9aFcs1iS16z980YxCswrL5EsQRtO1b80Uvxqj75AaPkakNV6IKdiNPYUhdDaZjC6stJuBbzIULnZpPXz/vFMrcYFfB+Do77il/loHKIjTaC6CmycDqd1s/0dj/8neMtUJQcgzWLh2XZIH0gZoDn7rQ2q+fkuz8/GI4ENvvqww/ZbZlKPPAHMQ6nIDpP5UUAAAAASUVORK5CYII="

/***/ }),

/***/ "f2fc":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAkNJREFUWAntmL1KA0EQgGdiFARfQLCxtrSL2IgIvoOdmkYTIiYWJsGTJBYaMBgrfzrfQUExIGohYucbKHZWiuBP1tm729u9S87jIPEucNfszN7Mznczu5vdAERPlIEoA72dAXTiM8YwnSsuNAHmgcEYABty2nRWxzdAeIwBHO/tlI4Qkanj2wAz65Xh78+PE4KcUo3+Sya4y/jA4FxtK/8iYhK48fDMBQnHKXhiTAYrcX0mH7y+/yySQVroAbajZ+eN57vbqwfOEBcg+pwTCrWIcIqx/mR9W3tSujsupta0Edb8OmAMZsXgJssh160SGwtCmBDgP8DxaDwBPJaMTJK+OI0eCehYrd3OnArUGkvuHAqg6hIe2ZqDTqRUNr/r7Oum3rTtfjKSKyA5ZKRZcFLvljiGUPOXNxxvMjap+yDc05df+/F3q5hrievVyoqfAKlsIUf2BiBgo14tr/nxX1rNt51SoS9xBOinzO1sXefgcraw0c7hj76E8i7h158OKoq7FF0ByUGTZt6SbXjGJkif8Pbytgj9HHTNIJ1uNe/vkxZ0wkzQPjij9yDekH4u33pLbhVzBdyvlje9h5UW5j5oAALc+vWnfVCTo0kp9CVWAOl2pTz8pKuoXRVbY0kWCUhXP5WCH8NbHVWLzsjiyG8bTWGxbk80hxZpkh/YDANSYohJ+i3X7yQWIK0iTOWKF9ROBcSlh+V34/pOaVpc4K0S8w5+aeYGQQHy2CaDte9bGRRQPJNh+utDcEVtlIEoA72agV8fW8fey4nCGwAAAABJRU5ErkJggg=="

/***/ }),

/***/ "f36e":
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "f423":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAVdJREFUWAntVjsOwjAMTSqOAQfiIiywdURiQGLsBgsX4UKcg9CmdROlcu3UlVqQWfJp3svjuX5gjH5kDlgZ3JhTedkb+3l6Hlcc7tX1JeWM8Zt4MWlei3PObRusbYXuJvEgoALZZ2+DuAYQz9kExEGxQIJf/FgFSi3smwS6ca73iOKz1r4No+tDiaNulH5rjyf4vBFt149eFwSOHlvuYRBY2+1tn0sLwQclpq4T/5Icy7OLL3lUNzFnzBccjHdXNFeB0mL0OZgSUTmWnk/XXDw0C/YvCC8xkWOpoMGaiafyEBc4uHGZDVwgkWOkXCYeSozxiTNLcxCzdi37+Du4EoVoDoI+bp7BeRhzcdAsaR7SDjLzDIT1YyYOy0NaYH/jMhNaIDPPBvIzcVDilEdzMHUkd02XOJdx5vMqUGro/zvo46GzKZ5LnQO83MEu77Acg4t0VAd+1YEv0jOZVt868igAAAAASUVORK5CYII="

/***/ }),

/***/ "f5e7":
/***/ (function(module, exports) {

// ┌───────────────────────────────────────────────────────────────────────────────────────────────────────┐ \\
// │ Raphaël 2.2.0 - JavaScript Vector Library                                                             │ \\
// ├───────────────────────────────────────────────────────────────────────────────────────────────────────┤ \\
// │ Copyright © 2008-2016 Dmitry Baranovskiy (http://raphaeljs.com)                                       │ \\
// │ Copyright © 2008-2016 Sencha Labs (http://sencha.com)                                                 │ \\
// ├───────────────────────────────────────────────────────────────────────────────────────────────────────┤ \\
// │ Licensed under the MIT (https://github.com/DmitryBaranovskiy/raphael/blob/master/license.txt) license.│ \\
// └───────────────────────────────────────────────────────────────────────────────────────────────────────┘ \\
(function webpackUniversalModuleDefinition(root,factory){root["Raphael"]=factory();})(window,function(){return(/******/function(modules){// webpackBootstrap
/******/ // The module cache
/******/var installedModules={};/******/ /******/ // The require function
/******/function __webpack_require__(moduleId){/******/ /******/ // Check if module is in cache
/******/if(installedModules[moduleId]){/******/return installedModules[moduleId].exports;/******/}/******/ // Create a new module (and put it into the cache)
/******/var module=installedModules[moduleId]={/******/i:moduleId,/******/l:false,/******/exports:{}/******/};/******/ /******/ // Execute the module function
/******/modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);/******/ /******/ // Flag the module as loaded
/******/module.l=true;/******/ /******/ // Return the exports of the module
/******/return module.exports;/******/}/******/ /******/ /******/ // expose the modules object (__webpack_modules__)
/******/__webpack_require__.m=modules;/******/ /******/ // expose the module cache
/******/__webpack_require__.c=installedModules;/******/ /******/ // define getter function for harmony exports
/******/__webpack_require__.d=function(exports,name,getter){/******/if(!__webpack_require__.o(exports,name)){/******/Object.defineProperty(exports,name,{/******/configurable:false,/******/enumerable:true,/******/get:getter/******/});/******/}/******/};/******/ /******/ // define __esModule on exports
/******/__webpack_require__.r=function(exports){/******/Object.defineProperty(exports,'__esModule',{value:true});/******/};/******/ /******/ // getDefaultExport function for compatibility with non-harmony modules
/******/__webpack_require__.n=function(module){/******/var getter=module&&module.__esModule?/******/function getDefault(){return module['default'];}:/******/function getModuleExports(){return module;};/******/__webpack_require__.d(getter,'a',getter);/******/return getter;/******/};/******/ /******/ // Object.prototype.hasOwnProperty.call
/******/__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property);};/******/ /******/ // __webpack_public_path__
/******/__webpack_require__.p="";/******/ /******/ /******/ // Load entry module and return exports
/******/return __webpack_require__(__webpack_require__.s="./dev/raphael.amd.js");/******/}(/************************************************************************/ /******/{/***/"./dev/raphael.amd.js":/*!****************************!*\
  !*** ./dev/raphael.amd.js ***!
  \****************************/ /*! no static exports found */ /***/function devRaphaelAmdJs(module,exports,__webpack_require__){eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! ./raphael.core */ \"./dev/raphael.core.js\"), __webpack_require__(/*! ./raphael.svg */ \"./dev/raphael.svg.js\"), __webpack_require__(/*! ./raphael.vml */ \"./dev/raphael.vml.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(R) {\n\n    return R;\n\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9kZXYvcmFwaGFlbC5hbWQuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9SYXBoYWVsLy4vZGV2L3JhcGhhZWwuYW1kLmpzPzM1NjQiXSwic291cmNlc0NvbnRlbnQiOlsiZGVmaW5lKFtcIi4vcmFwaGFlbC5jb3JlXCIsIFwiLi9yYXBoYWVsLnN2Z1wiLCBcIi4vcmFwaGFlbC52bWxcIl0sIGZ1bmN0aW9uKFIpIHtcblxuICAgIHJldHVybiBSO1xuXG59KTsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./dev/raphael.amd.js\n");/***/},/***/"./dev/raphael.core.js":/*!*****************************!*\
  !*** ./dev/raphael.core.js ***!
  \*****************************/ /*! no static exports found */ /***/function devRaphaelCoreJs(module,exports,__webpack_require__){eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! eve */ \"./node_modules/eve-raphael/eve.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(eve) {\n\n    /*\\\n     * Raphael\n     [ method ]\n     **\n     * Creates a canvas object on which to draw.\n     * You must do this first, as all future calls to drawing methods\n     * from this instance will be bound to this canvas.\n     > Parameters\n     **\n     - container (HTMLElement|string) DOM element or its ID which is going to be a parent for drawing surface\n     - width (number)\n     - height (number)\n     - callback (function) #optional callback function which is going to be executed in the context of newly created paper\n     * or\n     - x (number)\n     - y (number)\n     - width (number)\n     - height (number)\n     - callback (function) #optional callback function which is going to be executed in the context of newly created paper\n     * or\n     - all (array) (first 3 or 4 elements in the array are equal to [containerID, width, height] or [x, y, width, height]. The rest are element descriptions in format {type: type, <attributes>}). See @Paper.add.\n     - callback (function) #optional callback function which is going to be executed in the context of newly created paper\n     * or\n     - onReadyCallback (function) function that is going to be called on DOM ready event. You can also subscribe to this event via Eve\u2019s \u201CDOMLoad\u201D event. In this case method returns `undefined`.\n     = (object) @Paper\n     > Usage\n     | // Each of the following examples create a canvas\n     | // that is 320px wide by 200px high.\n     | // Canvas is created at the viewport\u2019s 10,50 coordinate.\n     | var paper = Raphael(10, 50, 320, 200);\n     | // Canvas is created at the top left corner of the #notepad element\n     | // (or its top right corner in dir=\"rtl\" elements)\n     | var paper = Raphael(document.getElementById(\"notepad\"), 320, 200);\n     | // Same as above\n     | var paper = Raphael(\"notepad\", 320, 200);\n     | // Image dump\n     | var set = Raphael([\"notepad\", 320, 200, {\n     |     type: \"rect\",\n     |     x: 10,\n     |     y: 10,\n     |     width: 25,\n     |     height: 25,\n     |     stroke: \"#f00\"\n     | }, {\n     |     type: \"text\",\n     |     x: 30,\n     |     y: 40,\n     |     text: \"Dump\"\n     | }]);\n    \\*/\n    function R(first) {\n        if (R.is(first, \"function\")) {\n            return loaded ? first() : eve.on(\"raphael.DOMload\", first);\n        } else if (R.is(first, array)) {\n            return R._engine.create[apply](R, first.splice(0, 3 + R.is(first[0], nu))).add(first);\n        } else {\n            var args = Array.prototype.slice.call(arguments, 0);\n            if (R.is(args[args.length - 1], \"function\")) {\n                var f = args.pop();\n                return loaded ? f.call(R._engine.create[apply](R, args)) : eve.on(\"raphael.DOMload\", function () {\n                    f.call(R._engine.create[apply](R, args));\n                });\n            } else {\n                return R._engine.create[apply](R, arguments);\n            }\n        }\n    }\n    R.version = \"2.2.0\";\n    R.eve = eve;\n    var loaded,\n        separator = /[, ]+/,\n        elements = {circle: 1, rect: 1, path: 1, ellipse: 1, text: 1, image: 1},\n        formatrg = /\\{(\\d+)\\}/g,\n        proto = \"prototype\",\n        has = \"hasOwnProperty\",\n        g = {\n            doc: document,\n            win: window\n        },\n        oldRaphael = {\n            was: Object.prototype[has].call(g.win, \"Raphael\"),\n            is: g.win.Raphael\n        },\n        Paper = function () {\n            /*\\\n             * Paper.ca\n             [ property (object) ]\n             **\n             * Shortcut for @Paper.customAttributes\n            \\*/\n            /*\\\n             * Paper.customAttributes\n             [ property (object) ]\n             **\n             * If you have a set of attributes that you would like to represent\n             * as a function of some number you can do it easily with custom attributes:\n             > Usage\n             | paper.customAttributes.hue = function (num) {\n             |     num = num % 1;\n             |     return {fill: \"hsb(\" + num + \", 0.75, 1)\"};\n             | };\n             | // Custom attribute \u201Chue\u201D will change fill\n             | // to be given hue with fixed saturation and brightness.\n             | // Now you can use it like this:\n             | var c = paper.circle(10, 10, 10).attr({hue: .45});\n             | // or even like this:\n             | c.animate({hue: 1}, 1e3);\n             |\n             | // You could also create custom attribute\n             | // with multiple parameters:\n             | paper.customAttributes.hsb = function (h, s, b) {\n             |     return {fill: \"hsb(\" + [h, s, b].join(\",\") + \")\"};\n             | };\n             | c.attr({hsb: \"0.5 .8 1\"});\n             | c.animate({hsb: [1, 0, 0.5]}, 1e3);\n            \\*/\n            this.ca = this.customAttributes = {};\n        },\n        paperproto,\n        appendChild = \"appendChild\",\n        apply = \"apply\",\n        concat = \"concat\",\n        supportsTouch = ('ontouchstart' in g.win) || g.win.DocumentTouch && g.doc instanceof DocumentTouch, //taken from Modernizr touch test\n        E = \"\",\n        S = \" \",\n        Str = String,\n        split = \"split\",\n        events = \"click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel\"[split](S),\n        touchMap = {\n            mousedown: \"touchstart\",\n            mousemove: \"touchmove\",\n            mouseup: \"touchend\"\n        },\n        lowerCase = Str.prototype.toLowerCase,\n        math = Math,\n        mmax = math.max,\n        mmin = math.min,\n        abs = math.abs,\n        pow = math.pow,\n        PI = math.PI,\n        nu = \"number\",\n        string = \"string\",\n        array = \"array\",\n        toString = \"toString\",\n        fillString = \"fill\",\n        objectToString = Object.prototype.toString,\n        paper = {},\n        push = \"push\",\n        ISURL = R._ISURL = /^url\\(['\"]?(.+?)['\"]?\\)$/i,\n        colourRegExp = /^\\s*((#[a-f\\d]{6})|(#[a-f\\d]{3})|rgba?\\(\\s*([\\d\\.]+%?\\s*,\\s*[\\d\\.]+%?\\s*,\\s*[\\d\\.]+%?(?:\\s*,\\s*[\\d\\.]+%?)?)\\s*\\)|hsba?\\(\\s*([\\d\\.]+(?:deg|\\xb0|%)?\\s*,\\s*[\\d\\.]+%?\\s*,\\s*[\\d\\.]+(?:%?\\s*,\\s*[\\d\\.]+)?)%?\\s*\\)|hsla?\\(\\s*([\\d\\.]+(?:deg|\\xb0|%)?\\s*,\\s*[\\d\\.]+%?\\s*,\\s*[\\d\\.]+(?:%?\\s*,\\s*[\\d\\.]+)?)%?\\s*\\))\\s*$/i,\n        isnan = {\"NaN\": 1, \"Infinity\": 1, \"-Infinity\": 1},\n        bezierrg = /^(?:cubic-)?bezier\\(([^,]+),([^,]+),([^,]+),([^\\)]+)\\)/,\n        round = math.round,\n        setAttribute = \"setAttribute\",\n        toFloat = parseFloat,\n        toInt = parseInt,\n        upperCase = Str.prototype.toUpperCase,\n        availableAttrs = R._availableAttrs = {\n            \"arrow-end\": \"none\",\n            \"arrow-start\": \"none\",\n            blur: 0,\n            \"clip-rect\": \"0 0 1e9 1e9\",\n            cursor: \"default\",\n            cx: 0,\n            cy: 0,\n            fill: \"#fff\",\n            \"fill-opacity\": 1,\n            font: '10px \"Arial\"',\n            \"font-family\": '\"Arial\"',\n            \"font-size\": \"10\",\n            \"font-style\": \"normal\",\n            \"font-weight\": 400,\n            gradient: 0,\n            height: 0,\n            href: \"http://raphaeljs.com/\",\n            \"letter-spacing\": 0,\n            opacity: 1,\n            path: \"M0,0\",\n            r: 0,\n            rx: 0,\n            ry: 0,\n            src: \"\",\n            stroke: \"#000\",\n            \"stroke-dasharray\": \"\",\n            \"stroke-linecap\": \"butt\",\n            \"stroke-linejoin\": \"butt\",\n            \"stroke-miterlimit\": 0,\n            \"stroke-opacity\": 1,\n            \"stroke-width\": 1,\n            target: \"_blank\",\n            \"text-anchor\": \"middle\",\n            title: \"Raphael\",\n            transform: \"\",\n            width: 0,\n            x: 0,\n            y: 0,\n            \"class\": \"\"\n        },\n        availableAnimAttrs = R._availableAnimAttrs = {\n            blur: nu,\n            \"clip-rect\": \"csv\",\n            cx: nu,\n            cy: nu,\n            fill: \"colour\",\n            \"fill-opacity\": nu,\n            \"font-size\": nu,\n            height: nu,\n            opacity: nu,\n            path: \"path\",\n            r: nu,\n            rx: nu,\n            ry: nu,\n            stroke: \"colour\",\n            \"stroke-opacity\": nu,\n            \"stroke-width\": nu,\n            transform: \"transform\",\n            width: nu,\n            x: nu,\n            y: nu\n        },\n        whitespace = /[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]/g,\n        commaSpaces = /[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*,[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*/,\n        hsrg = {hs: 1, rg: 1},\n        p2s = /,?([achlmqrstvxz]),?/gi,\n        pathCommand = /([achlmrqstvz])[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029,]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*,?[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*)+)/ig,\n        tCommand = /([rstm])[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029,]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*,?[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*)+)/ig,\n        pathValues = /(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*,?[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*/ig,\n        radial_gradient = R._radial_gradient = /^r(?:\\(([^,]+?)[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*,[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*([^\\)]+?)\\))?/,\n        eldata = {},\n        sortByKey = function (a, b) {\n            return a.key - b.key;\n        },\n        sortByNumber = function (a, b) {\n            return toFloat(a) - toFloat(b);\n        },\n        fun = function () {},\n        pipe = function (x) {\n            return x;\n        },\n        rectPath = R._rectPath = function (x, y, w, h, r) {\n            if (r) {\n                return [[\"M\", x + r, y], [\"l\", w - r * 2, 0], [\"a\", r, r, 0, 0, 1, r, r], [\"l\", 0, h - r * 2], [\"a\", r, r, 0, 0, 1, -r, r], [\"l\", r * 2 - w, 0], [\"a\", r, r, 0, 0, 1, -r, -r], [\"l\", 0, r * 2 - h], [\"a\", r, r, 0, 0, 1, r, -r], [\"z\"]];\n            }\n            return [[\"M\", x, y], [\"l\", w, 0], [\"l\", 0, h], [\"l\", -w, 0], [\"z\"]];\n        },\n        ellipsePath = function (x, y, rx, ry) {\n            if (ry == null) {\n                ry = rx;\n            }\n            return [[\"M\", x, y], [\"m\", 0, -ry], [\"a\", rx, ry, 0, 1, 1, 0, 2 * ry], [\"a\", rx, ry, 0, 1, 1, 0, -2 * ry], [\"z\"]];\n        },\n        getPath = R._getPath = {\n            path: function (el) {\n                return el.attr(\"path\");\n            },\n            circle: function (el) {\n                var a = el.attrs;\n                return ellipsePath(a.cx, a.cy, a.r);\n            },\n            ellipse: function (el) {\n                var a = el.attrs;\n                return ellipsePath(a.cx, a.cy, a.rx, a.ry);\n            },\n            rect: function (el) {\n                var a = el.attrs;\n                return rectPath(a.x, a.y, a.width, a.height, a.r);\n            },\n            image: function (el) {\n                var a = el.attrs;\n                return rectPath(a.x, a.y, a.width, a.height);\n            },\n            text: function (el) {\n                var bbox = el._getBBox();\n                return rectPath(bbox.x, bbox.y, bbox.width, bbox.height);\n            },\n            set : function(el) {\n                var bbox = el._getBBox();\n                return rectPath(bbox.x, bbox.y, bbox.width, bbox.height);\n            }\n        },\n        /*\\\n         * Raphael.mapPath\n         [ method ]\n         **\n         * Transform the path string with given matrix.\n         > Parameters\n         - path (string) path string\n         - matrix (object) see @Matrix\n         = (string) transformed path string\n        \\*/\n        mapPath = R.mapPath = function (path, matrix) {\n            if (!matrix) {\n                return path;\n            }\n            var x, y, i, j, ii, jj, pathi;\n            path = path2curve(path);\n            for (i = 0, ii = path.length; i < ii; i++) {\n                pathi = path[i];\n                for (j = 1, jj = pathi.length; j < jj; j += 2) {\n                    x = matrix.x(pathi[j], pathi[j + 1]);\n                    y = matrix.y(pathi[j], pathi[j + 1]);\n                    pathi[j] = x;\n                    pathi[j + 1] = y;\n                }\n            }\n            return path;\n        };\n\n    R._g = g;\n    /*\\\n     * Raphael.type\n     [ property (string) ]\n     **\n     * Can be \u201CSVG\u201D, \u201CVML\u201D or empty, depending on browser support.\n    \\*/\n    R.type = (g.win.SVGAngle || g.doc.implementation.hasFeature(\"http://www.w3.org/TR/SVG11/feature#BasicStructure\", \"1.1\") ? \"SVG\" : \"VML\");\n    if (R.type == \"VML\") {\n        var d = g.doc.createElement(\"div\"),\n            b;\n        d.innerHTML = '<v:shape adj=\"1\"/>';\n        b = d.firstChild;\n        b.style.behavior = \"url(#default#VML)\";\n        if (!(b && typeof b.adj == \"object\")) {\n            return (R.type = E);\n        }\n        d = null;\n    }\n    /*\\\n     * Raphael.svg\n     [ property (boolean) ]\n     **\n     * `true` if browser supports SVG.\n    \\*/\n    /*\\\n     * Raphael.vml\n     [ property (boolean) ]\n     **\n     * `true` if browser supports VML.\n    \\*/\n    R.svg = !(R.vml = R.type == \"VML\");\n    R._Paper = Paper;\n    /*\\\n     * Raphael.fn\n     [ property (object) ]\n     **\n     * You can add your own method to the canvas. For example if you want to draw a pie chart,\n     * you can create your own pie chart function and ship it as a Rapha\xEBl plugin. To do this\n     * you need to extend the `Raphael.fn` object. You should modify the `fn` object before a\n     * Rapha\xEBl instance is created, otherwise it will take no effect. Please note that the\n     * ability for namespaced plugins was removed in Raphael 2.0. It is up to the plugin to\n     * ensure any namespacing ensures proper context.\n     > Usage\n     | Raphael.fn.arrow = function (x1, y1, x2, y2, size) {\n     |     return this.path( ... );\n     | };\n     | // or create namespace\n     | Raphael.fn.mystuff = {\n     |     arrow: function () {\u2026},\n     |     star: function () {\u2026},\n     |     // etc\u2026\n     | };\n     | var paper = Raphael(10, 10, 630, 480);\n     | // then use it\n     | paper.arrow(10, 10, 30, 30, 5).attr({fill: \"#f00\"});\n     | paper.mystuff.arrow();\n     | paper.mystuff.star();\n    \\*/\n    R.fn = paperproto = Paper.prototype = R.prototype;\n    R._id = 0;\n    /*\\\n     * Raphael.is\n     [ method ]\n     **\n     * Handful of replacements for `typeof` operator.\n     > Parameters\n     - o (\u2026) any object or primitive\n     - type (string) name of the type, i.e. \u201Cstring\u201D, \u201Cfunction\u201D, \u201Cnumber\u201D, etc.\n     = (boolean) is given value is of given type\n    \\*/\n    R.is = function (o, type) {\n        type = lowerCase.call(type);\n        if (type == \"finite\") {\n            return !isnan[has](+o);\n        }\n        if (type == \"array\") {\n            return o instanceof Array;\n        }\n        return  (type == \"null\" && o === null) ||\n                (type == typeof o && o !== null) ||\n                (type == \"object\" && o === Object(o)) ||\n                (type == \"array\" && Array.isArray && Array.isArray(o)) ||\n                objectToString.call(o).slice(8, -1).toLowerCase() == type;\n    };\n\n    function clone(obj) {\n        if (typeof obj == \"function\" || Object(obj) !== obj) {\n            return obj;\n        }\n        var res = new obj.constructor;\n        for (var key in obj) if (obj[has](key)) {\n            res[key] = clone(obj[key]);\n        }\n        return res;\n    }\n\n    /*\\\n     * Raphael.angle\n     [ method ]\n     **\n     * Returns angle between two or three points\n     > Parameters\n     - x1 (number) x coord of first point\n     - y1 (number) y coord of first point\n     - x2 (number) x coord of second point\n     - y2 (number) y coord of second point\n     - x3 (number) #optional x coord of third point\n     - y3 (number) #optional y coord of third point\n     = (number) angle in degrees.\n    \\*/\n    R.angle = function (x1, y1, x2, y2, x3, y3) {\n        if (x3 == null) {\n            var x = x1 - x2,\n                y = y1 - y2;\n            if (!x && !y) {\n                return 0;\n            }\n            return (180 + math.atan2(-y, -x) * 180 / PI + 360) % 360;\n        } else {\n            return R.angle(x1, y1, x3, y3) - R.angle(x2, y2, x3, y3);\n        }\n    };\n    /*\\\n     * Raphael.rad\n     [ method ]\n     **\n     * Transform angle to radians\n     > Parameters\n     - deg (number) angle in degrees\n     = (number) angle in radians.\n    \\*/\n    R.rad = function (deg) {\n        return deg % 360 * PI / 180;\n    };\n    /*\\\n     * Raphael.deg\n     [ method ]\n     **\n     * Transform angle to degrees\n     > Parameters\n     - rad (number) angle in radians\n     = (number) angle in degrees.\n    \\*/\n    R.deg = function (rad) {\n        return Math.round ((rad * 180 / PI% 360)* 1000) / 1000;\n    };\n    /*\\\n     * Raphael.snapTo\n     [ method ]\n     **\n     * Snaps given value to given grid.\n     > Parameters\n     - values (array|number) given array of values or step of the grid\n     - value (number) value to adjust\n     - tolerance (number) #optional tolerance for snapping. Default is `10`.\n     = (number) adjusted value.\n    \\*/\n    R.snapTo = function (values, value, tolerance) {\n        tolerance = R.is(tolerance, \"finite\") ? tolerance : 10;\n        if (R.is(values, array)) {\n            var i = values.length;\n            while (i--) if (abs(values[i] - value) <= tolerance) {\n                return values[i];\n            }\n        } else {\n            values = +values;\n            var rem = value % values;\n            if (rem < tolerance) {\n                return value - rem;\n            }\n            if (rem > values - tolerance) {\n                return value - rem + values;\n            }\n        }\n        return value;\n    };\n\n    /*\\\n     * Raphael.createUUID\n     [ method ]\n     **\n     * Returns RFC4122, version 4 ID\n    \\*/\n    var createUUID = R.createUUID = (function (uuidRegEx, uuidReplacer) {\n        return function () {\n            return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(uuidRegEx, uuidReplacer).toUpperCase();\n        };\n    })(/[xy]/g, function (c) {\n        var r = math.random() * 16 | 0,\n            v = c == \"x\" ? r : (r & 3 | 8);\n        return v.toString(16);\n    });\n\n    /*\\\n     * Raphael.setWindow\n     [ method ]\n     **\n     * Used when you need to draw in `&lt;iframe>`. Switched window to the iframe one.\n     > Parameters\n     - newwin (window) new window object\n    \\*/\n    R.setWindow = function (newwin) {\n        eve(\"raphael.setWindow\", R, g.win, newwin);\n        g.win = newwin;\n        g.doc = g.win.document;\n        if (R._engine.initWin) {\n            R._engine.initWin(g.win);\n        }\n    };\n    var toHex = function (color) {\n        if (R.vml) {\n            // http://dean.edwards.name/weblog/2009/10/convert-any-colour-value-to-hex-in-msie/\n            var trim = /^\\s+|\\s+$/g;\n            var bod;\n            try {\n                var docum = new ActiveXObject(\"htmlfile\");\n                docum.write(\"<body>\");\n                docum.close();\n                bod = docum.body;\n            } catch(e) {\n                bod = createPopup().document.body;\n            }\n            var range = bod.createTextRange();\n            toHex = cacher(function (color) {\n                try {\n                    bod.style.color = Str(color).replace(trim, E);\n                    var value = range.queryCommandValue(\"ForeColor\");\n                    value = ((value & 255) << 16) | (value & 65280) | ((value & 16711680) >>> 16);\n                    return \"#\" + (\"000000\" + value.toString(16)).slice(-6);\n                } catch(e) {\n                    return \"none\";\n                }\n            });\n        } else {\n            var i = g.doc.createElement(\"i\");\n            i.title = \"Rapha\\xebl Colour Picker\";\n            i.style.display = \"none\";\n            g.doc.body.appendChild(i);\n            toHex = cacher(function (color) {\n                i.style.color = color;\n                return g.doc.defaultView.getComputedStyle(i, E).getPropertyValue(\"color\");\n            });\n        }\n        return toHex(color);\n    },\n    hsbtoString = function () {\n        return \"hsb(\" + [this.h, this.s, this.b] + \")\";\n    },\n    hsltoString = function () {\n        return \"hsl(\" + [this.h, this.s, this.l] + \")\";\n    },\n    rgbtoString = function () {\n        return this.hex;\n    },\n    prepareRGB = function (r, g, b) {\n        if (g == null && R.is(r, \"object\") && \"r\" in r && \"g\" in r && \"b\" in r) {\n            b = r.b;\n            g = r.g;\n            r = r.r;\n        }\n        if (g == null && R.is(r, string)) {\n            var clr = R.getRGB(r);\n            r = clr.r;\n            g = clr.g;\n            b = clr.b;\n        }\n        if (r > 1 || g > 1 || b > 1) {\n            r /= 255;\n            g /= 255;\n            b /= 255;\n        }\n\n        return [r, g, b];\n    },\n    packageRGB = function (r, g, b, o) {\n        r *= 255;\n        g *= 255;\n        b *= 255;\n        var rgb = {\n            r: r,\n            g: g,\n            b: b,\n            hex: R.rgb(r, g, b),\n            toString: rgbtoString\n        };\n        R.is(o, \"finite\") && (rgb.opacity = o);\n        return rgb;\n    };\n\n    /*\\\n     * Raphael.color\n     [ method ]\n     **\n     * Parses the color string and returns object with all values for the given color.\n     > Parameters\n     - clr (string) color string in one of the supported formats (see @Raphael.getRGB)\n     = (object) Combined RGB & HSB object in format:\n     o {\n     o     r (number) red,\n     o     g (number) green,\n     o     b (number) blue,\n     o     hex (string) color in HTML/CSS format: #\u2022\u2022\u2022\u2022\u2022\u2022,\n     o     error (boolean) `true` if string can\u2019t be parsed,\n     o     h (number) hue,\n     o     s (number) saturation,\n     o     v (number) value (brightness),\n     o     l (number) lightness\n     o }\n    \\*/\n    R.color = function (clr) {\n        var rgb;\n        if (R.is(clr, \"object\") && \"h\" in clr && \"s\" in clr && \"b\" in clr) {\n            rgb = R.hsb2rgb(clr);\n            clr.r = rgb.r;\n            clr.g = rgb.g;\n            clr.b = rgb.b;\n            clr.hex = rgb.hex;\n        } else if (R.is(clr, \"object\") && \"h\" in clr && \"s\" in clr && \"l\" in clr) {\n            rgb = R.hsl2rgb(clr);\n            clr.r = rgb.r;\n            clr.g = rgb.g;\n            clr.b = rgb.b;\n            clr.hex = rgb.hex;\n        } else {\n            if (R.is(clr, \"string\")) {\n                clr = R.getRGB(clr);\n            }\n            if (R.is(clr, \"object\") && \"r\" in clr && \"g\" in clr && \"b\" in clr) {\n                rgb = R.rgb2hsl(clr);\n                clr.h = rgb.h;\n                clr.s = rgb.s;\n                clr.l = rgb.l;\n                rgb = R.rgb2hsb(clr);\n                clr.v = rgb.b;\n            } else {\n                clr = {hex: \"none\"};\n                clr.r = clr.g = clr.b = clr.h = clr.s = clr.v = clr.l = -1;\n            }\n        }\n        clr.toString = rgbtoString;\n        return clr;\n    };\n    /*\\\n     * Raphael.hsb2rgb\n     [ method ]\n     **\n     * Converts HSB values to RGB object.\n     > Parameters\n     - h (number) hue\n     - s (number) saturation\n     - v (number) value or brightness\n     = (object) RGB object in format:\n     o {\n     o     r (number) red,\n     o     g (number) green,\n     o     b (number) blue,\n     o     hex (string) color in HTML/CSS format: #\u2022\u2022\u2022\u2022\u2022\u2022\n     o }\n    \\*/\n    R.hsb2rgb = function (h, s, v, o) {\n        if (this.is(h, \"object\") && \"h\" in h && \"s\" in h && \"b\" in h) {\n            v = h.b;\n            s = h.s;\n            o = h.o;\n            h = h.h;\n        }\n        h *= 360;\n        var R, G, B, X, C;\n        h = (h % 360) / 60;\n        C = v * s;\n        X = C * (1 - abs(h % 2 - 1));\n        R = G = B = v - C;\n\n        h = ~~h;\n        R += [C, X, 0, 0, X, C][h];\n        G += [X, C, C, X, 0, 0][h];\n        B += [0, 0, X, C, C, X][h];\n        return packageRGB(R, G, B, o);\n    };\n    /*\\\n     * Raphael.hsl2rgb\n     [ method ]\n     **\n     * Converts HSL values to RGB object.\n     > Parameters\n     - h (number) hue\n     - s (number) saturation\n     - l (number) luminosity\n     = (object) RGB object in format:\n     o {\n     o     r (number) red,\n     o     g (number) green,\n     o     b (number) blue,\n     o     hex (string) color in HTML/CSS format: #\u2022\u2022\u2022\u2022\u2022\u2022\n     o }\n    \\*/\n    R.hsl2rgb = function (h, s, l, o) {\n        if (this.is(h, \"object\") && \"h\" in h && \"s\" in h && \"l\" in h) {\n            l = h.l;\n            s = h.s;\n            h = h.h;\n        }\n        if (h > 1 || s > 1 || l > 1) {\n            h /= 360;\n            s /= 100;\n            l /= 100;\n        }\n        h *= 360;\n        var R, G, B, X, C;\n        h = (h % 360) / 60;\n        C = 2 * s * (l < .5 ? l : 1 - l);\n        X = C * (1 - abs(h % 2 - 1));\n        R = G = B = l - C / 2;\n\n        h = ~~h;\n        R += [C, X, 0, 0, X, C][h];\n        G += [X, C, C, X, 0, 0][h];\n        B += [0, 0, X, C, C, X][h];\n        return packageRGB(R, G, B, o);\n    };\n    /*\\\n     * Raphael.rgb2hsb\n     [ method ]\n     **\n     * Converts RGB values to HSB object.\n     > Parameters\n     - r (number) red\n     - g (number) green\n     - b (number) blue\n     = (object) HSB object in format:\n     o {\n     o     h (number) hue\n     o     s (number) saturation\n     o     b (number) brightness\n     o }\n    \\*/\n    R.rgb2hsb = function (r, g, b) {\n        b = prepareRGB(r, g, b);\n        r = b[0];\n        g = b[1];\n        b = b[2];\n\n        var H, S, V, C;\n        V = mmax(r, g, b);\n        C = V - mmin(r, g, b);\n        H = (C == 0 ? null :\n             V == r ? (g - b) / C :\n             V == g ? (b - r) / C + 2 :\n                      (r - g) / C + 4\n            );\n        H = ((H + 360) % 6) * 60 / 360;\n        S = C == 0 ? 0 : C / V;\n        return {h: H, s: S, b: V, toString: hsbtoString};\n    };\n    /*\\\n     * Raphael.rgb2hsl\n     [ method ]\n     **\n     * Converts RGB values to HSL object.\n     > Parameters\n     - r (number) red\n     - g (number) green\n     - b (number) blue\n     = (object) HSL object in format:\n     o {\n     o     h (number) hue\n     o     s (number) saturation\n     o     l (number) luminosity\n     o }\n    \\*/\n    R.rgb2hsl = function (r, g, b) {\n        b = prepareRGB(r, g, b);\n        r = b[0];\n        g = b[1];\n        b = b[2];\n\n        var H, S, L, M, m, C;\n        M = mmax(r, g, b);\n        m = mmin(r, g, b);\n        C = M - m;\n        H = (C == 0 ? null :\n             M == r ? (g - b) / C :\n             M == g ? (b - r) / C + 2 :\n                      (r - g) / C + 4);\n        H = ((H + 360) % 6) * 60 / 360;\n        L = (M + m) / 2;\n        S = (C == 0 ? 0 :\n             L < .5 ? C / (2 * L) :\n                      C / (2 - 2 * L));\n        return {h: H, s: S, l: L, toString: hsltoString};\n    };\n    R._path2string = function () {\n        return this.join(\",\").replace(p2s, \"$1\");\n    };\n    function repush(array, item) {\n        for (var i = 0, ii = array.length; i < ii; i++) if (array[i] === item) {\n            return array.push(array.splice(i, 1)[0]);\n        }\n    }\n    function cacher(f, scope, postprocessor) {\n        function newf() {\n            var arg = Array.prototype.slice.call(arguments, 0),\n                args = arg.join(\"\\u2400\"),\n                cache = newf.cache = newf.cache || {},\n                count = newf.count = newf.count || [];\n            if (cache[has](args)) {\n                repush(count, args);\n                return postprocessor ? postprocessor(cache[args]) : cache[args];\n            }\n            count.length >= 1e3 && delete cache[count.shift()];\n            count.push(args);\n            cache[args] = f[apply](scope, arg);\n            return postprocessor ? postprocessor(cache[args]) : cache[args];\n        }\n        return newf;\n    }\n\n    var preload = R._preload = function (src, f) {\n        var img = g.doc.createElement(\"img\");\n        img.style.cssText = \"position:absolute;left:-9999em;top:-9999em\";\n        img.onload = function () {\n            f.call(this);\n            this.onload = null;\n            g.doc.body.removeChild(this);\n        };\n        img.onerror = function () {\n            g.doc.body.removeChild(this);\n        };\n        g.doc.body.appendChild(img);\n        img.src = src;\n    };\n\n    function clrToString() {\n        return this.hex;\n    }\n\n    /*\\\n     * Raphael.getRGB\n     [ method ]\n     **\n     * Parses colour string as RGB object\n     > Parameters\n     - colour (string) colour string in one of formats:\n     # <ul>\n     #     <li>Colour name (\u201C<code>red</code>\u201D, \u201C<code>green</code>\u201D, \u201C<code>cornflowerblue</code>\u201D, etc)</li>\n     #     <li>#\u2022\u2022\u2022 \u2014 shortened HTML colour: (\u201C<code>#000</code>\u201D, \u201C<code>#fc0</code>\u201D, etc)</li>\n     #     <li>#\u2022\u2022\u2022\u2022\u2022\u2022 \u2014 full length HTML colour: (\u201C<code>#000000</code>\u201D, \u201C<code>#bd2300</code>\u201D)</li>\n     #     <li>rgb(\u2022\u2022\u2022, \u2022\u2022\u2022, \u2022\u2022\u2022) \u2014 red, green and blue channels\u2019 values: (\u201C<code>rgb(200,&nbsp;100,&nbsp;0)</code>\u201D)</li>\n     #     <li>rgb(\u2022\u2022\u2022%, \u2022\u2022\u2022%, \u2022\u2022\u2022%) \u2014 same as above, but in %: (\u201C<code>rgb(100%,&nbsp;175%,&nbsp;0%)</code>\u201D)</li>\n     #     <li>hsb(\u2022\u2022\u2022, \u2022\u2022\u2022, \u2022\u2022\u2022) \u2014 hue, saturation and brightness values: (\u201C<code>hsb(0.5,&nbsp;0.25,&nbsp;1)</code>\u201D)</li>\n     #     <li>hsb(\u2022\u2022\u2022%, \u2022\u2022\u2022%, \u2022\u2022\u2022%) \u2014 same as above, but in %</li>\n     #     <li>hsl(\u2022\u2022\u2022, \u2022\u2022\u2022, \u2022\u2022\u2022) \u2014 same as hsb</li>\n     #     <li>hsl(\u2022\u2022\u2022%, \u2022\u2022\u2022%, \u2022\u2022\u2022%) \u2014 same as hsb</li>\n     # </ul>\n     = (object) RGB object in format:\n     o {\n     o     r (number) red,\n     o     g (number) green,\n     o     b (number) blue\n     o     hex (string) color in HTML/CSS format: #\u2022\u2022\u2022\u2022\u2022\u2022,\n     o     error (boolean) true if string can\u2019t be parsed\n     o }\n    \\*/\n    R.getRGB = cacher(function (colour) {\n        if (!colour || !!((colour = Str(colour)).indexOf(\"-\") + 1)) {\n            return {r: -1, g: -1, b: -1, hex: \"none\", error: 1, toString: clrToString};\n        }\n        if (colour == \"none\") {\n            return {r: -1, g: -1, b: -1, hex: \"none\", toString: clrToString};\n        }\n        !(hsrg[has](colour.toLowerCase().substring(0, 2)) || colour.charAt() == \"#\") && (colour = toHex(colour));\n        var res,\n            red,\n            green,\n            blue,\n            opacity,\n            t,\n            values,\n            rgb = colour.match(colourRegExp);\n        if (rgb) {\n            if (rgb[2]) {\n                blue = toInt(rgb[2].substring(5), 16);\n                green = toInt(rgb[2].substring(3, 5), 16);\n                red = toInt(rgb[2].substring(1, 3), 16);\n            }\n            if (rgb[3]) {\n                blue = toInt((t = rgb[3].charAt(3)) + t, 16);\n                green = toInt((t = rgb[3].charAt(2)) + t, 16);\n                red = toInt((t = rgb[3].charAt(1)) + t, 16);\n            }\n            if (rgb[4]) {\n                values = rgb[4][split](commaSpaces);\n                red = toFloat(values[0]);\n                values[0].slice(-1) == \"%\" && (red *= 2.55);\n                green = toFloat(values[1]);\n                values[1].slice(-1) == \"%\" && (green *= 2.55);\n                blue = toFloat(values[2]);\n                values[2].slice(-1) == \"%\" && (blue *= 2.55);\n                rgb[1].toLowerCase().slice(0, 4) == \"rgba\" && (opacity = toFloat(values[3]));\n                values[3] && values[3].slice(-1) == \"%\" && (opacity /= 100);\n            }\n            if (rgb[5]) {\n                values = rgb[5][split](commaSpaces);\n                red = toFloat(values[0]);\n                values[0].slice(-1) == \"%\" && (red *= 2.55);\n                green = toFloat(values[1]);\n                values[1].slice(-1) == \"%\" && (green *= 2.55);\n                blue = toFloat(values[2]);\n                values[2].slice(-1) == \"%\" && (blue *= 2.55);\n                (values[0].slice(-3) == \"deg\" || values[0].slice(-1) == \"\\xb0\") && (red /= 360);\n                rgb[1].toLowerCase().slice(0, 4) == \"hsba\" && (opacity = toFloat(values[3]));\n                values[3] && values[3].slice(-1) == \"%\" && (opacity /= 100);\n                return R.hsb2rgb(red, green, blue, opacity);\n            }\n            if (rgb[6]) {\n                values = rgb[6][split](commaSpaces);\n                red = toFloat(values[0]);\n                values[0].slice(-1) == \"%\" && (red *= 2.55);\n                green = toFloat(values[1]);\n                values[1].slice(-1) == \"%\" && (green *= 2.55);\n                blue = toFloat(values[2]);\n                values[2].slice(-1) == \"%\" && (blue *= 2.55);\n                (values[0].slice(-3) == \"deg\" || values[0].slice(-1) == \"\\xb0\") && (red /= 360);\n                rgb[1].toLowerCase().slice(0, 4) == \"hsla\" && (opacity = toFloat(values[3]));\n                values[3] && values[3].slice(-1) == \"%\" && (opacity /= 100);\n                return R.hsl2rgb(red, green, blue, opacity);\n            }\n            rgb = {r: red, g: green, b: blue, toString: clrToString};\n            rgb.hex = \"#\" + (16777216 | blue | (green << 8) | (red << 16)).toString(16).slice(1);\n            R.is(opacity, \"finite\") && (rgb.opacity = opacity);\n            return rgb;\n        }\n        return {r: -1, g: -1, b: -1, hex: \"none\", error: 1, toString: clrToString};\n    }, R);\n    /*\\\n     * Raphael.hsb\n     [ method ]\n     **\n     * Converts HSB values to hex representation of the colour.\n     > Parameters\n     - h (number) hue\n     - s (number) saturation\n     - b (number) value or brightness\n     = (string) hex representation of the colour.\n    \\*/\n    R.hsb = cacher(function (h, s, b) {\n        return R.hsb2rgb(h, s, b).hex;\n    });\n    /*\\\n     * Raphael.hsl\n     [ method ]\n     **\n     * Converts HSL values to hex representation of the colour.\n     > Parameters\n     - h (number) hue\n     - s (number) saturation\n     - l (number) luminosity\n     = (string) hex representation of the colour.\n    \\*/\n    R.hsl = cacher(function (h, s, l) {\n        return R.hsl2rgb(h, s, l).hex;\n    });\n    /*\\\n     * Raphael.rgb\n     [ method ]\n     **\n     * Converts RGB values to hex representation of the colour.\n     > Parameters\n     - r (number) red\n     - g (number) green\n     - b (number) blue\n     = (string) hex representation of the colour.\n    \\*/\n    R.rgb = cacher(function (r, g, b) {\n        function round(x) { return (x + 0.5) | 0; }\n        return \"#\" + (16777216 | round(b) | (round(g) << 8) | (round(r) << 16)).toString(16).slice(1);\n    });\n    /*\\\n     * Raphael.getColor\n     [ method ]\n     **\n     * On each call returns next colour in the spectrum. To reset it back to red call @Raphael.getColor.reset\n     > Parameters\n     - value (number) #optional brightness, default is `0.75`\n     = (string) hex representation of the colour.\n    \\*/\n    R.getColor = function (value) {\n        var start = this.getColor.start = this.getColor.start || {h: 0, s: 1, b: value || .75},\n            rgb = this.hsb2rgb(start.h, start.s, start.b);\n        start.h += .075;\n        if (start.h > 1) {\n            start.h = 0;\n            start.s -= .2;\n            start.s <= 0 && (this.getColor.start = {h: 0, s: 1, b: start.b});\n        }\n        return rgb.hex;\n    };\n    /*\\\n     * Raphael.getColor.reset\n     [ method ]\n     **\n     * Resets spectrum position for @Raphael.getColor back to red.\n    \\*/\n    R.getColor.reset = function () {\n        delete this.start;\n    };\n\n    // http://schepers.cc/getting-to-the-point\n    function catmullRom2bezier(crp, z) {\n        var d = [];\n        for (var i = 0, iLen = crp.length; iLen - 2 * !z > i; i += 2) {\n            var p = [\n                        {x: +crp[i - 2], y: +crp[i - 1]},\n                        {x: +crp[i],     y: +crp[i + 1]},\n                        {x: +crp[i + 2], y: +crp[i + 3]},\n                        {x: +crp[i + 4], y: +crp[i + 5]}\n                    ];\n            if (z) {\n                if (!i) {\n                    p[0] = {x: +crp[iLen - 2], y: +crp[iLen - 1]};\n                } else if (iLen - 4 == i) {\n                    p[3] = {x: +crp[0], y: +crp[1]};\n                } else if (iLen - 2 == i) {\n                    p[2] = {x: +crp[0], y: +crp[1]};\n                    p[3] = {x: +crp[2], y: +crp[3]};\n                }\n            } else {\n                if (iLen - 4 == i) {\n                    p[3] = p[2];\n                } else if (!i) {\n                    p[0] = {x: +crp[i], y: +crp[i + 1]};\n                }\n            }\n            d.push([\"C\",\n                  (-p[0].x + 6 * p[1].x + p[2].x) / 6,\n                  (-p[0].y + 6 * p[1].y + p[2].y) / 6,\n                  (p[1].x + 6 * p[2].x - p[3].x) / 6,\n                  (p[1].y + 6*p[2].y - p[3].y) / 6,\n                  p[2].x,\n                  p[2].y\n            ]);\n        }\n\n        return d;\n    }\n    /*\\\n     * Raphael.parsePathString\n     [ method ]\n     **\n     * Utility method\n     **\n     * Parses given path string into an array of arrays of path segments.\n     > Parameters\n     - pathString (string|array) path string or array of segments (in the last case it will be returned straight away)\n     = (array) array of segments.\n    \\*/\n    R.parsePathString = function (pathString) {\n        if (!pathString) {\n            return null;\n        }\n        var pth = paths(pathString);\n        if (pth.arr) {\n            return pathClone(pth.arr);\n        }\n\n        var paramCounts = {a: 7, c: 6, h: 1, l: 2, m: 2, r: 4, q: 4, s: 4, t: 2, v: 1, z: 0},\n            data = [];\n        if (R.is(pathString, array) && R.is(pathString[0], array)) { // rough assumption\n            data = pathClone(pathString);\n        }\n        if (!data.length) {\n            Str(pathString).replace(pathCommand, function (a, b, c) {\n                var params = [],\n                    name = b.toLowerCase();\n                c.replace(pathValues, function (a, b) {\n                    b && params.push(+b);\n                });\n                if (name == \"m\" && params.length > 2) {\n                    data.push([b][concat](params.splice(0, 2)));\n                    name = \"l\";\n                    b = b == \"m\" ? \"l\" : \"L\";\n                }\n                if (name == \"r\") {\n                    data.push([b][concat](params));\n                } else while (params.length >= paramCounts[name]) {\n                    data.push([b][concat](params.splice(0, paramCounts[name])));\n                    if (!paramCounts[name]) {\n                        break;\n                    }\n                }\n            });\n        }\n        data.toString = R._path2string;\n        pth.arr = pathClone(data);\n        return data;\n    };\n    /*\\\n     * Raphael.parseTransformString\n     [ method ]\n     **\n     * Utility method\n     **\n     * Parses given path string into an array of transformations.\n     > Parameters\n     - TString (string|array) transform string or array of transformations (in the last case it will be returned straight away)\n     = (array) array of transformations.\n    \\*/\n    R.parseTransformString = cacher(function (TString) {\n        if (!TString) {\n            return null;\n        }\n        var paramCounts = {r: 3, s: 4, t: 2, m: 6},\n            data = [];\n        if (R.is(TString, array) && R.is(TString[0], array)) { // rough assumption\n            data = pathClone(TString);\n        }\n        if (!data.length) {\n            Str(TString).replace(tCommand, function (a, b, c) {\n                var params = [],\n                    name = lowerCase.call(b);\n                c.replace(pathValues, function (a, b) {\n                    b && params.push(+b);\n                });\n                data.push([b][concat](params));\n            });\n        }\n        data.toString = R._path2string;\n        return data;\n    });\n    // PATHS\n    var paths = function (ps) {\n        var p = paths.ps = paths.ps || {};\n        if (p[ps]) {\n            p[ps].sleep = 100;\n        } else {\n            p[ps] = {\n                sleep: 100\n            };\n        }\n        setTimeout(function () {\n            for (var key in p) if (p[has](key) && key != ps) {\n                p[key].sleep--;\n                !p[key].sleep && delete p[key];\n            }\n        });\n        return p[ps];\n    };\n    /*\\\n     * Raphael.findDotsAtSegment\n     [ method ]\n     **\n     * Utility method\n     **\n     * Find dot coordinates on the given cubic bezier curve at the given t.\n     > Parameters\n     - p1x (number) x of the first point of the curve\n     - p1y (number) y of the first point of the curve\n     - c1x (number) x of the first anchor of the curve\n     - c1y (number) y of the first anchor of the curve\n     - c2x (number) x of the second anchor of the curve\n     - c2y (number) y of the second anchor of the curve\n     - p2x (number) x of the second point of the curve\n     - p2y (number) y of the second point of the curve\n     - t (number) position on the curve (0..1)\n     = (object) point information in format:\n     o {\n     o     x: (number) x coordinate of the point\n     o     y: (number) y coordinate of the point\n     o     m: {\n     o         x: (number) x coordinate of the left anchor\n     o         y: (number) y coordinate of the left anchor\n     o     }\n     o     n: {\n     o         x: (number) x coordinate of the right anchor\n     o         y: (number) y coordinate of the right anchor\n     o     }\n     o     start: {\n     o         x: (number) x coordinate of the start of the curve\n     o         y: (number) y coordinate of the start of the curve\n     o     }\n     o     end: {\n     o         x: (number) x coordinate of the end of the curve\n     o         y: (number) y coordinate of the end of the curve\n     o     }\n     o     alpha: (number) angle of the curve derivative at the point\n     o }\n    \\*/\n    R.findDotsAtSegment = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t) {\n        var t1 = 1 - t,\n            t13 = pow(t1, 3),\n            t12 = pow(t1, 2),\n            t2 = t * t,\n            t3 = t2 * t,\n            x = t13 * p1x + t12 * 3 * t * c1x + t1 * 3 * t * t * c2x + t3 * p2x,\n            y = t13 * p1y + t12 * 3 * t * c1y + t1 * 3 * t * t * c2y + t3 * p2y,\n            mx = p1x + 2 * t * (c1x - p1x) + t2 * (c2x - 2 * c1x + p1x),\n            my = p1y + 2 * t * (c1y - p1y) + t2 * (c2y - 2 * c1y + p1y),\n            nx = c1x + 2 * t * (c2x - c1x) + t2 * (p2x - 2 * c2x + c1x),\n            ny = c1y + 2 * t * (c2y - c1y) + t2 * (p2y - 2 * c2y + c1y),\n            ax = t1 * p1x + t * c1x,\n            ay = t1 * p1y + t * c1y,\n            cx = t1 * c2x + t * p2x,\n            cy = t1 * c2y + t * p2y,\n            alpha = (90 - math.atan2(mx - nx, my - ny) * 180 / PI);\n        (mx > nx || my < ny) && (alpha += 180);\n        return {\n            x: x,\n            y: y,\n            m: {x: mx, y: my},\n            n: {x: nx, y: ny},\n            start: {x: ax, y: ay},\n            end: {x: cx, y: cy},\n            alpha: alpha\n        };\n    };\n    /*\\\n     * Raphael.bezierBBox\n     [ method ]\n     **\n     * Utility method\n     **\n     * Return bounding box of a given cubic bezier curve\n     > Parameters\n     - p1x (number) x of the first point of the curve\n     - p1y (number) y of the first point of the curve\n     - c1x (number) x of the first anchor of the curve\n     - c1y (number) y of the first anchor of the curve\n     - c2x (number) x of the second anchor of the curve\n     - c2y (number) y of the second anchor of the curve\n     - p2x (number) x of the second point of the curve\n     - p2y (number) y of the second point of the curve\n     * or\n     - bez (array) array of six points for bezier curve\n     = (object) point information in format:\n     o {\n     o     min: {\n     o         x: (number) x coordinate of the left point\n     o         y: (number) y coordinate of the top point\n     o     }\n     o     max: {\n     o         x: (number) x coordinate of the right point\n     o         y: (number) y coordinate of the bottom point\n     o     }\n     o }\n    \\*/\n    R.bezierBBox = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y) {\n        if (!R.is(p1x, \"array\")) {\n            p1x = [p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y];\n        }\n        var bbox = curveDim.apply(null, p1x);\n        return {\n            x: bbox.min.x,\n            y: bbox.min.y,\n            x2: bbox.max.x,\n            y2: bbox.max.y,\n            width: bbox.max.x - bbox.min.x,\n            height: bbox.max.y - bbox.min.y\n        };\n    };\n    /*\\\n     * Raphael.isPointInsideBBox\n     [ method ]\n     **\n     * Utility method\n     **\n     * Returns `true` if given point is inside bounding boxes.\n     > Parameters\n     - bbox (string) bounding box\n     - x (string) x coordinate of the point\n     - y (string) y coordinate of the point\n     = (boolean) `true` if point inside\n    \\*/\n    R.isPointInsideBBox = function (bbox, x, y) {\n        return x >= bbox.x && x <= bbox.x2 && y >= bbox.y && y <= bbox.y2;\n    };\n    /*\\\n     * Raphael.isBBoxIntersect\n     [ method ]\n     **\n     * Utility method\n     **\n     * Returns `true` if two bounding boxes intersect\n     > Parameters\n     - bbox1 (string) first bounding box\n     - bbox2 (string) second bounding box\n     = (boolean) `true` if they intersect\n    \\*/\n    R.isBBoxIntersect = function (bbox1, bbox2) {\n        var i = R.isPointInsideBBox;\n        return i(bbox2, bbox1.x, bbox1.y)\n            || i(bbox2, bbox1.x2, bbox1.y)\n            || i(bbox2, bbox1.x, bbox1.y2)\n            || i(bbox2, bbox1.x2, bbox1.y2)\n            || i(bbox1, bbox2.x, bbox2.y)\n            || i(bbox1, bbox2.x2, bbox2.y)\n            || i(bbox1, bbox2.x, bbox2.y2)\n            || i(bbox1, bbox2.x2, bbox2.y2)\n            || (bbox1.x < bbox2.x2 && bbox1.x > bbox2.x || bbox2.x < bbox1.x2 && bbox2.x > bbox1.x)\n            && (bbox1.y < bbox2.y2 && bbox1.y > bbox2.y || bbox2.y < bbox1.y2 && bbox2.y > bbox1.y);\n    };\n    function base3(t, p1, p2, p3, p4) {\n        var t1 = -3 * p1 + 9 * p2 - 9 * p3 + 3 * p4,\n            t2 = t * t1 + 6 * p1 - 12 * p2 + 6 * p3;\n        return t * t2 - 3 * p1 + 3 * p2;\n    }\n    function bezlen(x1, y1, x2, y2, x3, y3, x4, y4, z) {\n        if (z == null) {\n            z = 1;\n        }\n        z = z > 1 ? 1 : z < 0 ? 0 : z;\n        var z2 = z / 2,\n            n = 12,\n            Tvalues = [-0.1252,0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],\n            Cvalues = [0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],\n            sum = 0;\n        for (var i = 0; i < n; i++) {\n            var ct = z2 * Tvalues[i] + z2,\n                xbase = base3(ct, x1, x2, x3, x4),\n                ybase = base3(ct, y1, y2, y3, y4),\n                comb = xbase * xbase + ybase * ybase;\n            sum += Cvalues[i] * math.sqrt(comb);\n        }\n        return z2 * sum;\n    }\n    function getTatLen(x1, y1, x2, y2, x3, y3, x4, y4, ll) {\n        if (ll < 0 || bezlen(x1, y1, x2, y2, x3, y3, x4, y4) < ll) {\n            return;\n        }\n        var t = 1,\n            step = t / 2,\n            t2 = t - step,\n            l,\n            e = .01;\n        l = bezlen(x1, y1, x2, y2, x3, y3, x4, y4, t2);\n        while (abs(l - ll) > e) {\n            step /= 2;\n            t2 += (l < ll ? 1 : -1) * step;\n            l = bezlen(x1, y1, x2, y2, x3, y3, x4, y4, t2);\n        }\n        return t2;\n    }\n    function intersect(x1, y1, x2, y2, x3, y3, x4, y4) {\n        if (\n            mmax(x1, x2) < mmin(x3, x4) ||\n            mmin(x1, x2) > mmax(x3, x4) ||\n            mmax(y1, y2) < mmin(y3, y4) ||\n            mmin(y1, y2) > mmax(y3, y4)\n        ) {\n            return;\n        }\n        var nx = (x1 * y2 - y1 * x2) * (x3 - x4) - (x1 - x2) * (x3 * y4 - y3 * x4),\n            ny = (x1 * y2 - y1 * x2) * (y3 - y4) - (y1 - y2) * (x3 * y4 - y3 * x4),\n            denominator = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\n\n        if (!denominator) {\n            return;\n        }\n        var px = nx / denominator,\n            py = ny / denominator,\n            px2 = +px.toFixed(2),\n            py2 = +py.toFixed(2);\n        if (\n            px2 < +mmin(x1, x2).toFixed(2) ||\n            px2 > +mmax(x1, x2).toFixed(2) ||\n            px2 < +mmin(x3, x4).toFixed(2) ||\n            px2 > +mmax(x3, x4).toFixed(2) ||\n            py2 < +mmin(y1, y2).toFixed(2) ||\n            py2 > +mmax(y1, y2).toFixed(2) ||\n            py2 < +mmin(y3, y4).toFixed(2) ||\n            py2 > +mmax(y3, y4).toFixed(2)\n        ) {\n            return;\n        }\n        return {x: px, y: py};\n    }\n    function inter(bez1, bez2) {\n        return interHelper(bez1, bez2);\n    }\n    function interCount(bez1, bez2) {\n        return interHelper(bez1, bez2, 1);\n    }\n    function interHelper(bez1, bez2, justCount) {\n        var bbox1 = R.bezierBBox(bez1),\n            bbox2 = R.bezierBBox(bez2);\n        if (!R.isBBoxIntersect(bbox1, bbox2)) {\n            return justCount ? 0 : [];\n        }\n        var l1 = bezlen.apply(0, bez1),\n            l2 = bezlen.apply(0, bez2),\n            n1 = mmax(~~(l1 / 5), 1),\n            n2 = mmax(~~(l2 / 5), 1),\n            dots1 = [],\n            dots2 = [],\n            xy = {},\n            res = justCount ? 0 : [];\n        for (var i = 0; i < n1 + 1; i++) {\n            var p = R.findDotsAtSegment.apply(R, bez1.concat(i / n1));\n            dots1.push({x: p.x, y: p.y, t: i / n1});\n        }\n        for (i = 0; i < n2 + 1; i++) {\n            p = R.findDotsAtSegment.apply(R, bez2.concat(i / n2));\n            dots2.push({x: p.x, y: p.y, t: i / n2});\n        }\n        for (i = 0; i < n1; i++) {\n            for (var j = 0; j < n2; j++) {\n                var di = dots1[i],\n                    di1 = dots1[i + 1],\n                    dj = dots2[j],\n                    dj1 = dots2[j + 1],\n                    ci = abs(di1.x - di.x) < .001 ? \"y\" : \"x\",\n                    cj = abs(dj1.x - dj.x) < .001 ? \"y\" : \"x\",\n                    is = intersect(di.x, di.y, di1.x, di1.y, dj.x, dj.y, dj1.x, dj1.y);\n                if (is) {\n                    if (xy[is.x.toFixed(4)] == is.y.toFixed(4)) {\n                        continue;\n                    }\n                    xy[is.x.toFixed(4)] = is.y.toFixed(4);\n                    var t1 = di.t + abs((is[ci] - di[ci]) / (di1[ci] - di[ci])) * (di1.t - di.t),\n                        t2 = dj.t + abs((is[cj] - dj[cj]) / (dj1[cj] - dj[cj])) * (dj1.t - dj.t);\n                    if (t1 >= 0 && t1 <= 1.001 && t2 >= 0 && t2 <= 1.001) {\n                        if (justCount) {\n                            res++;\n                        } else {\n                            res.push({\n                                x: is.x,\n                                y: is.y,\n                                t1: mmin(t1, 1),\n                                t2: mmin(t2, 1)\n                            });\n                        }\n                    }\n                }\n            }\n        }\n        return res;\n    }\n    /*\\\n     * Raphael.pathIntersection\n     [ method ]\n     **\n     * Utility method\n     **\n     * Finds intersections of two paths\n     > Parameters\n     - path1 (string) path string\n     - path2 (string) path string\n     = (array) dots of intersection\n     o [\n     o     {\n     o         x: (number) x coordinate of the point\n     o         y: (number) y coordinate of the point\n     o         t1: (number) t value for segment of path1\n     o         t2: (number) t value for segment of path2\n     o         segment1: (number) order number for segment of path1\n     o         segment2: (number) order number for segment of path2\n     o         bez1: (array) eight coordinates representing bezi\xE9r curve for the segment of path1\n     o         bez2: (array) eight coordinates representing bezi\xE9r curve for the segment of path2\n     o     }\n     o ]\n    \\*/\n    R.pathIntersection = function (path1, path2) {\n        return interPathHelper(path1, path2);\n    };\n    R.pathIntersectionNumber = function (path1, path2) {\n        return interPathHelper(path1, path2, 1);\n    };\n    function interPathHelper(path1, path2, justCount) {\n        path1 = R._path2curve(path1);\n        path2 = R._path2curve(path2);\n        var x1, y1, x2, y2, x1m, y1m, x2m, y2m, bez1, bez2,\n            res = justCount ? 0 : [];\n        for (var i = 0, ii = path1.length; i < ii; i++) {\n            var pi = path1[i];\n            if (pi[0] == \"M\") {\n                x1 = x1m = pi[1];\n                y1 = y1m = pi[2];\n            } else {\n                if (pi[0] == \"C\") {\n                    bez1 = [x1, y1].concat(pi.slice(1));\n                    x1 = bez1[6];\n                    y1 = bez1[7];\n                } else {\n                    bez1 = [x1, y1, x1, y1, x1m, y1m, x1m, y1m];\n                    x1 = x1m;\n                    y1 = y1m;\n                }\n                for (var j = 0, jj = path2.length; j < jj; j++) {\n                    var pj = path2[j];\n                    if (pj[0] == \"M\") {\n                        x2 = x2m = pj[1];\n                        y2 = y2m = pj[2];\n                    } else {\n                        if (pj[0] == \"C\") {\n                            bez2 = [x2, y2].concat(pj.slice(1));\n                            x2 = bez2[6];\n                            y2 = bez2[7];\n                        } else {\n                            bez2 = [x2, y2, x2, y2, x2m, y2m, x2m, y2m];\n                            x2 = x2m;\n                            y2 = y2m;\n                        }\n                        var intr = interHelper(bez1, bez2, justCount);\n                        if (justCount) {\n                            res += intr;\n                        } else {\n                            for (var k = 0, kk = intr.length; k < kk; k++) {\n                                intr[k].segment1 = i;\n                                intr[k].segment2 = j;\n                                intr[k].bez1 = bez1;\n                                intr[k].bez2 = bez2;\n                            }\n                            res = res.concat(intr);\n                        }\n                    }\n                }\n            }\n        }\n        return res;\n    }\n    /*\\\n     * Raphael.isPointInsidePath\n     [ method ]\n     **\n     * Utility method\n     **\n     * Returns `true` if given point is inside a given closed path.\n     > Parameters\n     - path (string) path string\n     - x (number) x of the point\n     - y (number) y of the point\n     = (boolean) true, if point is inside the path\n    \\*/\n    R.isPointInsidePath = function (path, x, y) {\n        var bbox = R.pathBBox(path);\n        return R.isPointInsideBBox(bbox, x, y) &&\n               interPathHelper(path, [[\"M\", x, y], [\"H\", bbox.x2 + 10]], 1) % 2 == 1;\n    };\n    R._removedFactory = function (methodname) {\n        return function () {\n            eve(\"raphael.log\", null, \"Rapha\\xebl: you are calling to method \\u201c\" + methodname + \"\\u201d of removed object\", methodname);\n        };\n    };\n    /*\\\n     * Raphael.pathBBox\n     [ method ]\n     **\n     * Utility method\n     **\n     * Return bounding box of a given path\n     > Parameters\n     - path (string) path string\n     = (object) bounding box\n     o {\n     o     x: (number) x coordinate of the left top point of the box\n     o     y: (number) y coordinate of the left top point of the box\n     o     x2: (number) x coordinate of the right bottom point of the box\n     o     y2: (number) y coordinate of the right bottom point of the box\n     o     width: (number) width of the box\n     o     height: (number) height of the box\n     o     cx: (number) x coordinate of the center of the box\n     o     cy: (number) y coordinate of the center of the box\n     o }\n    \\*/\n    var pathDimensions = R.pathBBox = function (path) {\n        var pth = paths(path);\n        if (pth.bbox) {\n            return clone(pth.bbox);\n        }\n        if (!path) {\n            return {x: 0, y: 0, width: 0, height: 0, x2: 0, y2: 0};\n        }\n        path = path2curve(path);\n        var x = 0,\n            y = 0,\n            X = [],\n            Y = [],\n            p;\n        for (var i = 0, ii = path.length; i < ii; i++) {\n            p = path[i];\n            if (p[0] == \"M\") {\n                x = p[1];\n                y = p[2];\n                X.push(x);\n                Y.push(y);\n            } else {\n                var dim = curveDim(x, y, p[1], p[2], p[3], p[4], p[5], p[6]);\n                X = X[concat](dim.min.x, dim.max.x);\n                Y = Y[concat](dim.min.y, dim.max.y);\n                x = p[5];\n                y = p[6];\n            }\n        }\n        var xmin = mmin[apply](0, X),\n            ymin = mmin[apply](0, Y),\n            xmax = mmax[apply](0, X),\n            ymax = mmax[apply](0, Y),\n            width = xmax - xmin,\n            height = ymax - ymin,\n                bb = {\n                x: xmin,\n                y: ymin,\n                x2: xmax,\n                y2: ymax,\n                width: width,\n                height: height,\n                cx: xmin + width / 2,\n                cy: ymin + height / 2\n            };\n        pth.bbox = clone(bb);\n        return bb;\n    },\n        pathClone = function (pathArray) {\n            var res = clone(pathArray);\n            res.toString = R._path2string;\n            return res;\n        },\n        pathToRelative = R._pathToRelative = function (pathArray) {\n            var pth = paths(pathArray);\n            if (pth.rel) {\n                return pathClone(pth.rel);\n            }\n            if (!R.is(pathArray, array) || !R.is(pathArray && pathArray[0], array)) { // rough assumption\n                pathArray = R.parsePathString(pathArray);\n            }\n            var res = [],\n                x = 0,\n                y = 0,\n                mx = 0,\n                my = 0,\n                start = 0;\n            if (pathArray[0][0] == \"M\") {\n                x = pathArray[0][1];\n                y = pathArray[0][2];\n                mx = x;\n                my = y;\n                start++;\n                res.push([\"M\", x, y]);\n            }\n            for (var i = start, ii = pathArray.length; i < ii; i++) {\n                var r = res[i] = [],\n                    pa = pathArray[i];\n                if (pa[0] != lowerCase.call(pa[0])) {\n                    r[0] = lowerCase.call(pa[0]);\n                    switch (r[0]) {\n                        case \"a\":\n                            r[1] = pa[1];\n                            r[2] = pa[2];\n                            r[3] = pa[3];\n                            r[4] = pa[4];\n                            r[5] = pa[5];\n                            r[6] = +(pa[6] - x).toFixed(3);\n                            r[7] = +(pa[7] - y).toFixed(3);\n                            break;\n                        case \"v\":\n                            r[1] = +(pa[1] - y).toFixed(3);\n                            break;\n                        case \"m\":\n                            mx = pa[1];\n                            my = pa[2];\n                        default:\n                            for (var j = 1, jj = pa.length; j < jj; j++) {\n                                r[j] = +(pa[j] - ((j % 2) ? x : y)).toFixed(3);\n                            }\n                    }\n                } else {\n                    r = res[i] = [];\n                    if (pa[0] == \"m\") {\n                        mx = pa[1] + x;\n                        my = pa[2] + y;\n                    }\n                    for (var k = 0, kk = pa.length; k < kk; k++) {\n                        res[i][k] = pa[k];\n                    }\n                }\n                var len = res[i].length;\n                switch (res[i][0]) {\n                    case \"z\":\n                        x = mx;\n                        y = my;\n                        break;\n                    case \"h\":\n                        x += +res[i][len - 1];\n                        break;\n                    case \"v\":\n                        y += +res[i][len - 1];\n                        break;\n                    default:\n                        x += +res[i][len - 2];\n                        y += +res[i][len - 1];\n                }\n            }\n            res.toString = R._path2string;\n            pth.rel = pathClone(res);\n            return res;\n        },\n        pathToAbsolute = R._pathToAbsolute = function (pathArray) {\n            var pth = paths(pathArray);\n            if (pth.abs) {\n                return pathClone(pth.abs);\n            }\n            if (!R.is(pathArray, array) || !R.is(pathArray && pathArray[0], array)) { // rough assumption\n                pathArray = R.parsePathString(pathArray);\n            }\n            if (!pathArray || !pathArray.length) {\n                return [[\"M\", 0, 0]];\n            }\n            var res = [],\n                x = 0,\n                y = 0,\n                mx = 0,\n                my = 0,\n                start = 0;\n            if (pathArray[0][0] == \"M\") {\n                x = +pathArray[0][1];\n                y = +pathArray[0][2];\n                mx = x;\n                my = y;\n                start++;\n                res[0] = [\"M\", x, y];\n            }\n            var crz = pathArray.length == 3 && pathArray[0][0] == \"M\" && pathArray[1][0].toUpperCase() == \"R\" && pathArray[2][0].toUpperCase() == \"Z\";\n            for (var r, pa, i = start, ii = pathArray.length; i < ii; i++) {\n                res.push(r = []);\n                pa = pathArray[i];\n                if (pa[0] != upperCase.call(pa[0])) {\n                    r[0] = upperCase.call(pa[0]);\n                    switch (r[0]) {\n                        case \"A\":\n                            r[1] = pa[1];\n                            r[2] = pa[2];\n                            r[3] = pa[3];\n                            r[4] = pa[4];\n                            r[5] = pa[5];\n                            r[6] = +(pa[6] + x);\n                            r[7] = +(pa[7] + y);\n                            break;\n                        case \"V\":\n                            r[1] = +pa[1] + y;\n                            break;\n                        case \"H\":\n                            r[1] = +pa[1] + x;\n                            break;\n                        case \"R\":\n                            var dots = [x, y][concat](pa.slice(1));\n                            for (var j = 2, jj = dots.length; j < jj; j++) {\n                                dots[j] = +dots[j] + x;\n                                dots[++j] = +dots[j] + y;\n                            }\n                            res.pop();\n                            res = res[concat](catmullRom2bezier(dots, crz));\n                            break;\n                        case \"M\":\n                            mx = +pa[1] + x;\n                            my = +pa[2] + y;\n                        default:\n                            for (j = 1, jj = pa.length; j < jj; j++) {\n                                r[j] = +pa[j] + ((j % 2) ? x : y);\n                            }\n                    }\n                } else if (pa[0] == \"R\") {\n                    dots = [x, y][concat](pa.slice(1));\n                    res.pop();\n                    res = res[concat](catmullRom2bezier(dots, crz));\n                    r = [\"R\"][concat](pa.slice(-2));\n                } else {\n                    for (var k = 0, kk = pa.length; k < kk; k++) {\n                        r[k] = pa[k];\n                    }\n                }\n                switch (r[0]) {\n                    case \"Z\":\n                        x = mx;\n                        y = my;\n                        break;\n                    case \"H\":\n                        x = r[1];\n                        break;\n                    case \"V\":\n                        y = r[1];\n                        break;\n                    case \"M\":\n                        mx = r[r.length - 2];\n                        my = r[r.length - 1];\n                    default:\n                        x = r[r.length - 2];\n                        y = r[r.length - 1];\n                }\n            }\n            res.toString = R._path2string;\n            pth.abs = pathClone(res);\n            return res;\n        },\n        l2c = function (x1, y1, x2, y2) {\n            return [x1, y1, x2, y2, x2, y2];\n        },\n        q2c = function (x1, y1, ax, ay, x2, y2) {\n            var _13 = 1 / 3,\n                _23 = 2 / 3;\n            return [\n                    _13 * x1 + _23 * ax,\n                    _13 * y1 + _23 * ay,\n                    _13 * x2 + _23 * ax,\n                    _13 * y2 + _23 * ay,\n                    x2,\n                    y2\n                ];\n        },\n        a2c = function (x1, y1, rx, ry, angle, large_arc_flag, sweep_flag, x2, y2, recursive) {\n            // for more information of where this math came from visit:\n            // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n            var _120 = PI * 120 / 180,\n                rad = PI / 180 * (+angle || 0),\n                res = [],\n                xy,\n                rotate = cacher(function (x, y, rad) {\n                    var X = x * math.cos(rad) - y * math.sin(rad),\n                        Y = x * math.sin(rad) + y * math.cos(rad);\n                    return {x: X, y: Y};\n                });\n            if (!recursive) {\n                xy = rotate(x1, y1, -rad);\n                x1 = xy.x;\n                y1 = xy.y;\n                xy = rotate(x2, y2, -rad);\n                x2 = xy.x;\n                y2 = xy.y;\n                var cos = math.cos(PI / 180 * angle),\n                    sin = math.sin(PI / 180 * angle),\n                    x = (x1 - x2) / 2,\n                    y = (y1 - y2) / 2;\n                var h = (x * x) / (rx * rx) + (y * y) / (ry * ry);\n                if (h > 1) {\n                    h = math.sqrt(h);\n                    rx = h * rx;\n                    ry = h * ry;\n                }\n                var rx2 = rx * rx,\n                    ry2 = ry * ry,\n                    k = (large_arc_flag == sweep_flag ? -1 : 1) *\n                        math.sqrt(abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x))),\n                    cx = k * rx * y / ry + (x1 + x2) / 2,\n                    cy = k * -ry * x / rx + (y1 + y2) / 2,\n                    f1 = math.asin(((y1 - cy) / ry).toFixed(9)),\n                    f2 = math.asin(((y2 - cy) / ry).toFixed(9));\n\n                f1 = x1 < cx ? PI - f1 : f1;\n                f2 = x2 < cx ? PI - f2 : f2;\n                f1 < 0 && (f1 = PI * 2 + f1);\n                f2 < 0 && (f2 = PI * 2 + f2);\n                if (sweep_flag && f1 > f2) {\n                    f1 = f1 - PI * 2;\n                }\n                if (!sweep_flag && f2 > f1) {\n                    f2 = f2 - PI * 2;\n                }\n            } else {\n                f1 = recursive[0];\n                f2 = recursive[1];\n                cx = recursive[2];\n                cy = recursive[3];\n            }\n            var df = f2 - f1;\n            if (abs(df) > _120) {\n                var f2old = f2,\n                    x2old = x2,\n                    y2old = y2;\n                f2 = f1 + _120 * (sweep_flag && f2 > f1 ? 1 : -1);\n                x2 = cx + rx * math.cos(f2);\n                y2 = cy + ry * math.sin(f2);\n                res = a2c(x2, y2, rx, ry, angle, 0, sweep_flag, x2old, y2old, [f2, f2old, cx, cy]);\n            }\n            df = f2 - f1;\n            var c1 = math.cos(f1),\n                s1 = math.sin(f1),\n                c2 = math.cos(f2),\n                s2 = math.sin(f2),\n                t = math.tan(df / 4),\n                hx = 4 / 3 * rx * t,\n                hy = 4 / 3 * ry * t,\n                m1 = [x1, y1],\n                m2 = [x1 + hx * s1, y1 - hy * c1],\n                m3 = [x2 + hx * s2, y2 - hy * c2],\n                m4 = [x2, y2];\n            m2[0] = 2 * m1[0] - m2[0];\n            m2[1] = 2 * m1[1] - m2[1];\n            if (recursive) {\n                return [m2, m3, m4][concat](res);\n            } else {\n                res = [m2, m3, m4][concat](res).join()[split](\",\");\n                var newres = [];\n                for (var i = 0, ii = res.length; i < ii; i++) {\n                    newres[i] = i % 2 ? rotate(res[i - 1], res[i], rad).y : rotate(res[i], res[i + 1], rad).x;\n                }\n                return newres;\n            }\n        },\n        findDotAtSegment = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t) {\n            var t1 = 1 - t;\n            return {\n                x: pow(t1, 3) * p1x + pow(t1, 2) * 3 * t * c1x + t1 * 3 * t * t * c2x + pow(t, 3) * p2x,\n                y: pow(t1, 3) * p1y + pow(t1, 2) * 3 * t * c1y + t1 * 3 * t * t * c2y + pow(t, 3) * p2y\n            };\n        },\n        curveDim = cacher(function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y) {\n            var a = (c2x - 2 * c1x + p1x) - (p2x - 2 * c2x + c1x),\n                b = 2 * (c1x - p1x) - 2 * (c2x - c1x),\n                c = p1x - c1x,\n                t1 = (-b + math.sqrt(b * b - 4 * a * c)) / 2 / a,\n                t2 = (-b - math.sqrt(b * b - 4 * a * c)) / 2 / a,\n                y = [p1y, p2y],\n                x = [p1x, p2x],\n                dot;\n            abs(t1) > \"1e12\" && (t1 = .5);\n            abs(t2) > \"1e12\" && (t2 = .5);\n            if (t1 > 0 && t1 < 1) {\n                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t1);\n                x.push(dot.x);\n                y.push(dot.y);\n            }\n            if (t2 > 0 && t2 < 1) {\n                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t2);\n                x.push(dot.x);\n                y.push(dot.y);\n            }\n            a = (c2y - 2 * c1y + p1y) - (p2y - 2 * c2y + c1y);\n            b = 2 * (c1y - p1y) - 2 * (c2y - c1y);\n            c = p1y - c1y;\n            t1 = (-b + math.sqrt(b * b - 4 * a * c)) / 2 / a;\n            t2 = (-b - math.sqrt(b * b - 4 * a * c)) / 2 / a;\n            abs(t1) > \"1e12\" && (t1 = .5);\n            abs(t2) > \"1e12\" && (t2 = .5);\n            if (t1 > 0 && t1 < 1) {\n                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t1);\n                x.push(dot.x);\n                y.push(dot.y);\n            }\n            if (t2 > 0 && t2 < 1) {\n                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t2);\n                x.push(dot.x);\n                y.push(dot.y);\n            }\n            return {\n                min: {x: mmin[apply](0, x), y: mmin[apply](0, y)},\n                max: {x: mmax[apply](0, x), y: mmax[apply](0, y)}\n            };\n        }),\n        path2curve = R._path2curve = cacher(function (path, path2) {\n            var pth = !path2 && paths(path);\n            if (!path2 && pth.curve) {\n                return pathClone(pth.curve);\n            }\n            var p = pathToAbsolute(path),\n                p2 = path2 && pathToAbsolute(path2),\n                attrs = {x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null},\n                attrs2 = {x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null},\n                processPath = function (path, d, pcom) {\n                    var nx, ny, tq = {T:1, Q:1};\n                    if (!path) {\n                        return [\"C\", d.x, d.y, d.x, d.y, d.x, d.y];\n                    }\n                    !(path[0] in tq) && (d.qx = d.qy = null);\n                    switch (path[0]) {\n                        case \"M\":\n                            d.X = path[1];\n                            d.Y = path[2];\n                            break;\n                        case \"A\":\n                            path = [\"C\"][concat](a2c[apply](0, [d.x, d.y][concat](path.slice(1))));\n                            break;\n                        case \"S\":\n                            if (pcom == \"C\" || pcom == \"S\") { // In \"S\" case we have to take into account, if the previous command is C/S.\n                                nx = d.x * 2 - d.bx;          // And reflect the previous\n                                ny = d.y * 2 - d.by;          // command's control point relative to the current point.\n                            }\n                            else {                            // or some else or nothing\n                                nx = d.x;\n                                ny = d.y;\n                            }\n                            path = [\"C\", nx, ny][concat](path.slice(1));\n                            break;\n                        case \"T\":\n                            if (pcom == \"Q\" || pcom == \"T\") { // In \"T\" case we have to take into account, if the previous command is Q/T.\n                                d.qx = d.x * 2 - d.qx;        // And make a reflection similar\n                                d.qy = d.y * 2 - d.qy;        // to case \"S\".\n                            }\n                            else {                            // or something else or nothing\n                                d.qx = d.x;\n                                d.qy = d.y;\n                            }\n                            path = [\"C\"][concat](q2c(d.x, d.y, d.qx, d.qy, path[1], path[2]));\n                            break;\n                        case \"Q\":\n                            d.qx = path[1];\n                            d.qy = path[2];\n                            path = [\"C\"][concat](q2c(d.x, d.y, path[1], path[2], path[3], path[4]));\n                            break;\n                        case \"L\":\n                            path = [\"C\"][concat](l2c(d.x, d.y, path[1], path[2]));\n                            break;\n                        case \"H\":\n                            path = [\"C\"][concat](l2c(d.x, d.y, path[1], d.y));\n                            break;\n                        case \"V\":\n                            path = [\"C\"][concat](l2c(d.x, d.y, d.x, path[1]));\n                            break;\n                        case \"Z\":\n                            path = [\"C\"][concat](l2c(d.x, d.y, d.X, d.Y));\n                            break;\n                    }\n                    return path;\n                },\n                fixArc = function (pp, i) {\n                    if (pp[i].length > 7) {\n                        pp[i].shift();\n                        var pi = pp[i];\n                        while (pi.length) {\n                            pcoms1[i]=\"A\"; // if created multiple C:s, their original seg is saved\n                            p2 && (pcoms2[i]=\"A\"); // the same as above\n                            pp.splice(i++, 0, [\"C\"][concat](pi.splice(0, 6)));\n                        }\n                        pp.splice(i, 1);\n                        ii = mmax(p.length, p2 && p2.length || 0);\n                    }\n                },\n                fixM = function (path1, path2, a1, a2, i) {\n                    if (path1 && path2 && path1[i][0] == \"M\" && path2[i][0] != \"M\") {\n                        path2.splice(i, 0, [\"M\", a2.x, a2.y]);\n                        a1.bx = 0;\n                        a1.by = 0;\n                        a1.x = path1[i][1];\n                        a1.y = path1[i][2];\n                        ii = mmax(p.length, p2 && p2.length || 0);\n                    }\n                },\n                pcoms1 = [], // path commands of original path p\n                pcoms2 = [], // path commands of original path p2\n                pfirst = \"\", // temporary holder for original path command\n                pcom = \"\"; // holder for previous path command of original path\n            for (var i = 0, ii = mmax(p.length, p2 && p2.length || 0); i < ii; i++) {\n                p[i] && (pfirst = p[i][0]); // save current path command\n\n                if (pfirst != \"C\") // C is not saved yet, because it may be result of conversion\n                {\n                    pcoms1[i] = pfirst; // Save current path command\n                    i && ( pcom = pcoms1[i-1]); // Get previous path command pcom\n                }\n                p[i] = processPath(p[i], attrs, pcom); // Previous path command is inputted to processPath\n\n                if (pcoms1[i] != \"A\" && pfirst == \"C\") pcoms1[i] = \"C\"; // A is the only command\n                // which may produce multiple C:s\n                // so we have to make sure that C is also C in original path\n\n                fixArc(p, i); // fixArc adds also the right amount of A:s to pcoms1\n\n                if (p2) { // the same procedures is done to p2\n                    p2[i] && (pfirst = p2[i][0]);\n                    if (pfirst != \"C\")\n                    {\n                        pcoms2[i] = pfirst;\n                        i && (pcom = pcoms2[i-1]);\n                    }\n                    p2[i] = processPath(p2[i], attrs2, pcom);\n\n                    if (pcoms2[i]!=\"A\" && pfirst==\"C\") pcoms2[i]=\"C\";\n\n                    fixArc(p2, i);\n                }\n                fixM(p, p2, attrs, attrs2, i);\n                fixM(p2, p, attrs2, attrs, i);\n                var seg = p[i],\n                    seg2 = p2 && p2[i],\n                    seglen = seg.length,\n                    seg2len = p2 && seg2.length;\n                attrs.x = seg[seglen - 2];\n                attrs.y = seg[seglen - 1];\n                attrs.bx = toFloat(seg[seglen - 4]) || attrs.x;\n                attrs.by = toFloat(seg[seglen - 3]) || attrs.y;\n                attrs2.bx = p2 && (toFloat(seg2[seg2len - 4]) || attrs2.x);\n                attrs2.by = p2 && (toFloat(seg2[seg2len - 3]) || attrs2.y);\n                attrs2.x = p2 && seg2[seg2len - 2];\n                attrs2.y = p2 && seg2[seg2len - 1];\n            }\n            if (!p2) {\n                pth.curve = pathClone(p);\n            }\n            return p2 ? [p, p2] : p;\n        }, null, pathClone),\n        parseDots = R._parseDots = cacher(function (gradient) {\n            var dots = [];\n            for (var i = 0, ii = gradient.length; i < ii; i++) {\n                var dot = {},\n                    par = gradient[i].match(/^([^:]*):?([\\d\\.]*)/);\n                dot.color = R.getRGB(par[1]);\n                if (dot.color.error) {\n                    return null;\n                }\n                dot.opacity = dot.color.opacity;\n                dot.color = dot.color.hex;\n                par[2] && (dot.offset = par[2] + \"%\");\n                dots.push(dot);\n            }\n            for (i = 1, ii = dots.length - 1; i < ii; i++) {\n                if (!dots[i].offset) {\n                    var start = toFloat(dots[i - 1].offset || 0),\n                        end = 0;\n                    for (var j = i + 1; j < ii; j++) {\n                        if (dots[j].offset) {\n                            end = dots[j].offset;\n                            break;\n                        }\n                    }\n                    if (!end) {\n                        end = 100;\n                        j = ii;\n                    }\n                    end = toFloat(end);\n                    var d = (end - start) / (j - i + 1);\n                    for (; i < j; i++) {\n                        start += d;\n                        dots[i].offset = start + \"%\";\n                    }\n                }\n            }\n            return dots;\n        }),\n        tear = R._tear = function (el, paper) {\n            el == paper.top && (paper.top = el.prev);\n            el == paper.bottom && (paper.bottom = el.next);\n            el.next && (el.next.prev = el.prev);\n            el.prev && (el.prev.next = el.next);\n        },\n        tofront = R._tofront = function (el, paper) {\n            if (paper.top === el) {\n                return;\n            }\n            tear(el, paper);\n            el.next = null;\n            el.prev = paper.top;\n            paper.top.next = el;\n            paper.top = el;\n        },\n        toback = R._toback = function (el, paper) {\n            if (paper.bottom === el) {\n                return;\n            }\n            tear(el, paper);\n            el.next = paper.bottom;\n            el.prev = null;\n            paper.bottom.prev = el;\n            paper.bottom = el;\n        },\n        insertafter = R._insertafter = function (el, el2, paper) {\n            tear(el, paper);\n            el2 == paper.top && (paper.top = el);\n            el2.next && (el2.next.prev = el);\n            el.next = el2.next;\n            el.prev = el2;\n            el2.next = el;\n        },\n        insertbefore = R._insertbefore = function (el, el2, paper) {\n            tear(el, paper);\n            el2 == paper.bottom && (paper.bottom = el);\n            el2.prev && (el2.prev.next = el);\n            el.prev = el2.prev;\n            el2.prev = el;\n            el.next = el2;\n        },\n        /*\\\n         * Raphael.toMatrix\n         [ method ]\n         **\n         * Utility method\n         **\n         * Returns matrix of transformations applied to a given path\n         > Parameters\n         - path (string) path string\n         - transform (string|array) transformation string\n         = (object) @Matrix\n        \\*/\n        toMatrix = R.toMatrix = function (path, transform) {\n            var bb = pathDimensions(path),\n                el = {\n                    _: {\n                        transform: E\n                    },\n                    getBBox: function () {\n                        return bb;\n                    }\n                };\n            extractTransform(el, transform);\n            return el.matrix;\n        },\n        /*\\\n         * Raphael.transformPath\n         [ method ]\n         **\n         * Utility method\n         **\n         * Returns path transformed by a given transformation\n         > Parameters\n         - path (string) path string\n         - transform (string|array) transformation string\n         = (string) path\n        \\*/\n        transformPath = R.transformPath = function (path, transform) {\n            return mapPath(path, toMatrix(path, transform));\n        },\n        extractTransform = R._extractTransform = function (el, tstr) {\n            if (tstr == null) {\n                return el._.transform;\n            }\n            tstr = Str(tstr).replace(/\\.{3}|\\u2026/g, el._.transform || E);\n            var tdata = R.parseTransformString(tstr),\n                deg = 0,\n                dx = 0,\n                dy = 0,\n                sx = 1,\n                sy = 1,\n                _ = el._,\n                m = new Matrix;\n            _.transform = tdata || [];\n            if (tdata) {\n                for (var i = 0, ii = tdata.length; i < ii; i++) {\n                    var t = tdata[i],\n                        tlen = t.length,\n                        command = Str(t[0]).toLowerCase(),\n                        absolute = t[0] != command,\n                        inver = absolute ? m.invert() : 0,\n                        x1,\n                        y1,\n                        x2,\n                        y2,\n                        bb;\n                    if (command == \"t\" && tlen == 3) {\n                        if (absolute) {\n                            x1 = inver.x(0, 0);\n                            y1 = inver.y(0, 0);\n                            x2 = inver.x(t[1], t[2]);\n                            y2 = inver.y(t[1], t[2]);\n                            m.translate(x2 - x1, y2 - y1);\n                        } else {\n                            m.translate(t[1], t[2]);\n                        }\n                    } else if (command == \"r\") {\n                        if (tlen == 2) {\n                            bb = bb || el.getBBox(1);\n                            m.rotate(t[1], bb.x + bb.width / 2, bb.y + bb.height / 2);\n                            deg += t[1];\n                        } else if (tlen == 4) {\n                            if (absolute) {\n                                x2 = inver.x(t[2], t[3]);\n                                y2 = inver.y(t[2], t[3]);\n                                m.rotate(t[1], x2, y2);\n                            } else {\n                                m.rotate(t[1], t[2], t[3]);\n                            }\n                            deg += t[1];\n                        }\n                    } else if (command == \"s\") {\n                        if (tlen == 2 || tlen == 3) {\n                            bb = bb || el.getBBox(1);\n                            m.scale(t[1], t[tlen - 1], bb.x + bb.width / 2, bb.y + bb.height / 2);\n                            sx *= t[1];\n                            sy *= t[tlen - 1];\n                        } else if (tlen == 5) {\n                            if (absolute) {\n                                x2 = inver.x(t[3], t[4]);\n                                y2 = inver.y(t[3], t[4]);\n                                m.scale(t[1], t[2], x2, y2);\n                            } else {\n                                m.scale(t[1], t[2], t[3], t[4]);\n                            }\n                            sx *= t[1];\n                            sy *= t[2];\n                        }\n                    } else if (command == \"m\" && tlen == 7) {\n                        m.add(t[1], t[2], t[3], t[4], t[5], t[6]);\n                    }\n                    _.dirtyT = 1;\n                    el.matrix = m;\n                }\n            }\n\n            /*\\\n             * Element.matrix\n             [ property (object) ]\n             **\n             * Keeps @Matrix object, which represents element transformation\n            \\*/\n            el.matrix = m;\n\n            _.sx = sx;\n            _.sy = sy;\n            _.deg = deg;\n            _.dx = dx = m.e;\n            _.dy = dy = m.f;\n\n            if (sx == 1 && sy == 1 && !deg && _.bbox) {\n                _.bbox.x += +dx;\n                _.bbox.y += +dy;\n            } else {\n                _.dirtyT = 1;\n            }\n        },\n        getEmpty = function (item) {\n            var l = item[0];\n            switch (l.toLowerCase()) {\n                case \"t\": return [l, 0, 0];\n                case \"m\": return [l, 1, 0, 0, 1, 0, 0];\n                case \"r\": if (item.length == 4) {\n                    return [l, 0, item[2], item[3]];\n                } else {\n                    return [l, 0];\n                }\n                case \"s\": if (item.length == 5) {\n                    return [l, 1, 1, item[3], item[4]];\n                } else if (item.length == 3) {\n                    return [l, 1, 1];\n                } else {\n                    return [l, 1];\n                }\n            }\n        },\n        equaliseTransform = R._equaliseTransform = function (t1, t2) {\n            t2 = Str(t2).replace(/\\.{3}|\\u2026/g, t1);\n            t1 = R.parseTransformString(t1) || [];\n            t2 = R.parseTransformString(t2) || [];\n            var maxlength = mmax(t1.length, t2.length),\n                from = [],\n                to = [],\n                i = 0, j, jj,\n                tt1, tt2;\n            for (; i < maxlength; i++) {\n                tt1 = t1[i] || getEmpty(t2[i]);\n                tt2 = t2[i] || getEmpty(tt1);\n                if ((tt1[0] != tt2[0]) ||\n                    (tt1[0].toLowerCase() == \"r\" && (tt1[2] != tt2[2] || tt1[3] != tt2[3])) ||\n                    (tt1[0].toLowerCase() == \"s\" && (tt1[3] != tt2[3] || tt1[4] != tt2[4]))\n                    ) {\n                    return;\n                }\n                from[i] = [];\n                to[i] = [];\n                for (j = 0, jj = mmax(tt1.length, tt2.length); j < jj; j++) {\n                    j in tt1 && (from[i][j] = tt1[j]);\n                    j in tt2 && (to[i][j] = tt2[j]);\n                }\n            }\n            return {\n                from: from,\n                to: to\n            };\n        };\n    R._getContainer = function (x, y, w, h) {\n        var container;\n        container = h == null && !R.is(x, \"object\") ? g.doc.getElementById(x) : x;\n        if (container == null) {\n            return;\n        }\n        if (container.tagName) {\n            if (y == null) {\n                return {\n                    container: container,\n                    width: container.style.pixelWidth || container.offsetWidth,\n                    height: container.style.pixelHeight || container.offsetHeight\n                };\n            } else {\n                return {\n                    container: container,\n                    width: y,\n                    height: w\n                };\n            }\n        }\n        return {\n            container: 1,\n            x: x,\n            y: y,\n            width: w,\n            height: h\n        };\n    };\n    /*\\\n     * Raphael.pathToRelative\n     [ method ]\n     **\n     * Utility method\n     **\n     * Converts path to relative form\n     > Parameters\n     - pathString (string|array) path string or array of segments\n     = (array) array of segments.\n    \\*/\n    R.pathToRelative = pathToRelative;\n    R._engine = {};\n    /*\\\n     * Raphael.path2curve\n     [ method ]\n     **\n     * Utility method\n     **\n     * Converts path to a new path where all segments are cubic bezier curves.\n     > Parameters\n     - pathString (string|array) path string or array of segments\n     = (array) array of segments.\n    \\*/\n    R.path2curve = path2curve;\n    /*\\\n     * Raphael.matrix\n     [ method ]\n     **\n     * Utility method\n     **\n     * Returns matrix based on given parameters.\n     > Parameters\n     - a (number)\n     - b (number)\n     - c (number)\n     - d (number)\n     - e (number)\n     - f (number)\n     = (object) @Matrix\n    \\*/\n    R.matrix = function (a, b, c, d, e, f) {\n        return new Matrix(a, b, c, d, e, f);\n    };\n    function Matrix(a, b, c, d, e, f) {\n        if (a != null) {\n            this.a = +a;\n            this.b = +b;\n            this.c = +c;\n            this.d = +d;\n            this.e = +e;\n            this.f = +f;\n        } else {\n            this.a = 1;\n            this.b = 0;\n            this.c = 0;\n            this.d = 1;\n            this.e = 0;\n            this.f = 0;\n        }\n    }\n    (function (matrixproto) {\n        /*\\\n         * Matrix.add\n         [ method ]\n         **\n         * Adds given matrix to existing one.\n         > Parameters\n         - a (number)\n         - b (number)\n         - c (number)\n         - d (number)\n         - e (number)\n         - f (number)\n         or\n         - matrix (object) @Matrix\n        \\*/\n        matrixproto.add = function (a, b, c, d, e, f) {\n            var out = [[], [], []],\n                m = [[this.a, this.c, this.e], [this.b, this.d, this.f], [0, 0, 1]],\n                matrix = [[a, c, e], [b, d, f], [0, 0, 1]],\n                x, y, z, res;\n\n            if (a && a instanceof Matrix) {\n                matrix = [[a.a, a.c, a.e], [a.b, a.d, a.f], [0, 0, 1]];\n            }\n\n            for (x = 0; x < 3; x++) {\n                for (y = 0; y < 3; y++) {\n                    res = 0;\n                    for (z = 0; z < 3; z++) {\n                        res += m[x][z] * matrix[z][y];\n                    }\n                    out[x][y] = res;\n                }\n            }\n            this.a = out[0][0];\n            this.b = out[1][0];\n            this.c = out[0][1];\n            this.d = out[1][1];\n            this.e = out[0][2];\n            this.f = out[1][2];\n        };\n        /*\\\n         * Matrix.invert\n         [ method ]\n         **\n         * Returns inverted version of the matrix\n         = (object) @Matrix\n        \\*/\n        matrixproto.invert = function () {\n            var me = this,\n                x = me.a * me.d - me.b * me.c;\n            return new Matrix(me.d / x, -me.b / x, -me.c / x, me.a / x, (me.c * me.f - me.d * me.e) / x, (me.b * me.e - me.a * me.f) / x);\n        };\n        /*\\\n         * Matrix.clone\n         [ method ]\n         **\n         * Returns copy of the matrix\n         = (object) @Matrix\n        \\*/\n        matrixproto.clone = function () {\n            return new Matrix(this.a, this.b, this.c, this.d, this.e, this.f);\n        };\n        /*\\\n         * Matrix.translate\n         [ method ]\n         **\n         * Translate the matrix\n         > Parameters\n         - x (number)\n         - y (number)\n        \\*/\n        matrixproto.translate = function (x, y) {\n            this.add(1, 0, 0, 1, x, y);\n        };\n        /*\\\n         * Matrix.scale\n         [ method ]\n         **\n         * Scales the matrix\n         > Parameters\n         - x (number)\n         - y (number) #optional\n         - cx (number) #optional\n         - cy (number) #optional\n        \\*/\n        matrixproto.scale = function (x, y, cx, cy) {\n            y == null && (y = x);\n            (cx || cy) && this.add(1, 0, 0, 1, cx, cy);\n            this.add(x, 0, 0, y, 0, 0);\n            (cx || cy) && this.add(1, 0, 0, 1, -cx, -cy);\n        };\n        /*\\\n         * Matrix.rotate\n         [ method ]\n         **\n         * Rotates the matrix\n         > Parameters\n         - a (number)\n         - x (number)\n         - y (number)\n        \\*/\n        matrixproto.rotate = function (a, x, y) {\n            a = R.rad(a);\n            x = x || 0;\n            y = y || 0;\n            var cos = +math.cos(a).toFixed(9),\n                sin = +math.sin(a).toFixed(9);\n            this.add(cos, sin, -sin, cos, x, y);\n            this.add(1, 0, 0, 1, -x, -y);\n        };\n        /*\\\n         * Matrix.x\n         [ method ]\n         **\n         * Return x coordinate for given point after transformation described by the matrix. See also @Matrix.y\n         > Parameters\n         - x (number)\n         - y (number)\n         = (number) x\n        \\*/\n        matrixproto.x = function (x, y) {\n            return x * this.a + y * this.c + this.e;\n        };\n        /*\\\n         * Matrix.y\n         [ method ]\n         **\n         * Return y coordinate for given point after transformation described by the matrix. See also @Matrix.x\n         > Parameters\n         - x (number)\n         - y (number)\n         = (number) y\n        \\*/\n        matrixproto.y = function (x, y) {\n            return x * this.b + y * this.d + this.f;\n        };\n        matrixproto.get = function (i) {\n            return +this[Str.fromCharCode(97 + i)].toFixed(4);\n        };\n        matrixproto.toString = function () {\n            return R.svg ?\n                \"matrix(\" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)].join() + \")\" :\n                [this.get(0), this.get(2), this.get(1), this.get(3), 0, 0].join();\n        };\n        matrixproto.toFilter = function () {\n            return \"progid:DXImageTransform.Microsoft.Matrix(M11=\" + this.get(0) +\n                \", M12=\" + this.get(2) + \", M21=\" + this.get(1) + \", M22=\" + this.get(3) +\n                \", Dx=\" + this.get(4) + \", Dy=\" + this.get(5) + \", sizingmethod='auto expand')\";\n        };\n        matrixproto.offset = function () {\n            return [this.e.toFixed(4), this.f.toFixed(4)];\n        };\n        function norm(a) {\n            return a[0] * a[0] + a[1] * a[1];\n        }\n        function normalize(a) {\n            var mag = math.sqrt(norm(a));\n            a[0] && (a[0] /= mag);\n            a[1] && (a[1] /= mag);\n        }\n        /*\\\n         * Matrix.split\n         [ method ]\n         **\n         * Splits matrix into primitive transformations\n         = (object) in format:\n         o dx (number) translation by x\n         o dy (number) translation by y\n         o scalex (number) scale by x\n         o scaley (number) scale by y\n         o shear (number) shear\n         o rotate (number) rotation in deg\n         o isSimple (boolean) could it be represented via simple transformations\n        \\*/\n        matrixproto.split = function () {\n            var out = {};\n            // translation\n            out.dx = this.e;\n            out.dy = this.f;\n\n            // scale and shear\n            var row = [[this.a, this.c], [this.b, this.d]];\n            out.scalex = math.sqrt(norm(row[0]));\n            normalize(row[0]);\n\n            out.shear = row[0][0] * row[1][0] + row[0][1] * row[1][1];\n            row[1] = [row[1][0] - row[0][0] * out.shear, row[1][1] - row[0][1] * out.shear];\n\n            out.scaley = math.sqrt(norm(row[1]));\n            normalize(row[1]);\n            out.shear /= out.scaley;\n\n            // rotation\n            var sin = -row[0][1],\n                cos = row[1][1];\n            if (cos < 0) {\n                out.rotate = R.deg(math.acos(cos));\n                if (sin < 0) {\n                    out.rotate = 360 - out.rotate;\n                }\n            } else {\n                out.rotate = R.deg(math.asin(sin));\n            }\n\n            out.isSimple = !+out.shear.toFixed(9) && (out.scalex.toFixed(9) == out.scaley.toFixed(9) || !out.rotate);\n            out.isSuperSimple = !+out.shear.toFixed(9) && out.scalex.toFixed(9) == out.scaley.toFixed(9) && !out.rotate;\n            out.noRotation = !+out.shear.toFixed(9) && !out.rotate;\n            return out;\n        };\n        /*\\\n         * Matrix.toTransformString\n         [ method ]\n         **\n         * Return transform string that represents given matrix\n         = (string) transform string\n        \\*/\n        matrixproto.toTransformString = function (shorter) {\n            var s = shorter || this[split]();\n            if (s.isSimple) {\n                s.scalex = +s.scalex.toFixed(4);\n                s.scaley = +s.scaley.toFixed(4);\n                s.rotate = +s.rotate.toFixed(4);\n                return  (s.dx || s.dy ? \"t\" + [s.dx, s.dy] : E) +\n                        (s.scalex != 1 || s.scaley != 1 ? \"s\" + [s.scalex, s.scaley, 0, 0] : E) +\n                        (s.rotate ? \"r\" + [s.rotate, 0, 0] : E);\n            } else {\n                return \"m\" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)];\n            }\n        };\n    })(Matrix.prototype);\n\n    var preventDefault = function () {\n        this.returnValue = false;\n    },\n    preventTouch = function () {\n        return this.originalEvent.preventDefault();\n    },\n    stopPropagation = function () {\n        this.cancelBubble = true;\n    },\n    stopTouch = function () {\n        return this.originalEvent.stopPropagation();\n    },\n    getEventPosition = function (e) {\n        var scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\n            scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft;\n\n        return {\n            x: e.clientX + scrollX,\n            y: e.clientY + scrollY\n        };\n    },\n    addEvent = (function () {\n        if (g.doc.addEventListener) {\n            return function (obj, type, fn, element) {\n                var f = function (e) {\n                    var pos = getEventPosition(e);\n                    return fn.call(element, e, pos.x, pos.y);\n                };\n                obj.addEventListener(type, f, false);\n\n                if (supportsTouch && touchMap[type]) {\n                    var _f = function (e) {\n                        var pos = getEventPosition(e),\n                            olde = e;\n\n                        for (var i = 0, ii = e.targetTouches && e.targetTouches.length; i < ii; i++) {\n                            if (e.targetTouches[i].target == obj) {\n                                e = e.targetTouches[i];\n                                e.originalEvent = olde;\n                                e.preventDefault = preventTouch;\n                                e.stopPropagation = stopTouch;\n                                break;\n                            }\n                        }\n\n                        return fn.call(element, e, pos.x, pos.y);\n                    };\n                    obj.addEventListener(touchMap[type], _f, false);\n                }\n\n                return function () {\n                    obj.removeEventListener(type, f, false);\n\n                    if (supportsTouch && touchMap[type])\n                        obj.removeEventListener(touchMap[type], _f, false);\n\n                    return true;\n                };\n            };\n        } else if (g.doc.attachEvent) {\n            return function (obj, type, fn, element) {\n                var f = function (e) {\n                    e = e || g.win.event;\n                    var scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\n                        scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft,\n                        x = e.clientX + scrollX,\n                        y = e.clientY + scrollY;\n                    e.preventDefault = e.preventDefault || preventDefault;\n                    e.stopPropagation = e.stopPropagation || stopPropagation;\n                    return fn.call(element, e, x, y);\n                };\n                obj.attachEvent(\"on\" + type, f);\n                var detacher = function () {\n                    obj.detachEvent(\"on\" + type, f);\n                    return true;\n                };\n                return detacher;\n            };\n        }\n    })(),\n    drag = [],\n    dragMove = function (e) {\n        var x = e.clientX,\n            y = e.clientY,\n            scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\n            scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft,\n            dragi,\n            j = drag.length;\n        while (j--) {\n            dragi = drag[j];\n            if (supportsTouch && e.touches) {\n                var i = e.touches.length,\n                    touch;\n                while (i--) {\n                    touch = e.touches[i];\n                    if (touch.identifier == dragi.el._drag.id) {\n                        x = touch.clientX;\n                        y = touch.clientY;\n                        (e.originalEvent ? e.originalEvent : e).preventDefault();\n                        break;\n                    }\n                }\n            } else {\n                e.preventDefault();\n            }\n            var node = dragi.el.node,\n                o,\n                next = node.nextSibling,\n                parent = node.parentNode,\n                display = node.style.display;\n            g.win.opera && parent.removeChild(node);\n            node.style.display = \"none\";\n            o = dragi.el.paper.getElementByPoint(x, y);\n            node.style.display = display;\n            g.win.opera && (next ? parent.insertBefore(node, next) : parent.appendChild(node));\n            o && eve(\"raphael.drag.over.\" + dragi.el.id, dragi.el, o);\n            x += scrollX;\n            y += scrollY;\n            eve(\"raphael.drag.move.\" + dragi.el.id, dragi.move_scope || dragi.el, x - dragi.el._drag.x, y - dragi.el._drag.y, x, y, e);\n        }\n    },\n    dragUp = function (e) {\n        R.unmousemove(dragMove).unmouseup(dragUp);\n        var i = drag.length,\n            dragi;\n        while (i--) {\n            dragi = drag[i];\n            dragi.el._drag = {};\n            eve(\"raphael.drag.end.\" + dragi.el.id, dragi.end_scope || dragi.start_scope || dragi.move_scope || dragi.el, e);\n        }\n        drag = [];\n    },\n    /*\\\n     * Raphael.el\n     [ property (object) ]\n     **\n     * You can add your own method to elements. This is useful when you want to hack default functionality or\n     * want to wrap some common transformation or attributes in one method. In difference to canvas methods,\n     * you can redefine element method at any time. Expending element methods wouldn\u2019t affect set.\n     > Usage\n     | Raphael.el.red = function () {\n     |     this.attr({fill: \"#f00\"});\n     | };\n     | // then use it\n     | paper.circle(100, 100, 20).red();\n    \\*/\n    elproto = R.el = {};\n    /*\\\n     * Element.click\n     [ method ]\n     **\n     * Adds event handler for click for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unclick\n     [ method ]\n     **\n     * Removes event handler for click for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.dblclick\n     [ method ]\n     **\n     * Adds event handler for double click for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.undblclick\n     [ method ]\n     **\n     * Removes event handler for double click for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.mousedown\n     [ method ]\n     **\n     * Adds event handler for mousedown for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unmousedown\n     [ method ]\n     **\n     * Removes event handler for mousedown for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.mousemove\n     [ method ]\n     **\n     * Adds event handler for mousemove for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unmousemove\n     [ method ]\n     **\n     * Removes event handler for mousemove for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.mouseout\n     [ method ]\n     **\n     * Adds event handler for mouseout for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unmouseout\n     [ method ]\n     **\n     * Removes event handler for mouseout for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.mouseover\n     [ method ]\n     **\n     * Adds event handler for mouseover for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unmouseover\n     [ method ]\n     **\n     * Removes event handler for mouseover for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.mouseup\n     [ method ]\n     **\n     * Adds event handler for mouseup for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unmouseup\n     [ method ]\n     **\n     * Removes event handler for mouseup for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.touchstart\n     [ method ]\n     **\n     * Adds event handler for touchstart for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.untouchstart\n     [ method ]\n     **\n     * Removes event handler for touchstart for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.touchmove\n     [ method ]\n     **\n     * Adds event handler for touchmove for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.untouchmove\n     [ method ]\n     **\n     * Removes event handler for touchmove for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.touchend\n     [ method ]\n     **\n     * Adds event handler for touchend for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.untouchend\n     [ method ]\n     **\n     * Removes event handler for touchend for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.touchcancel\n     [ method ]\n     **\n     * Adds event handler for touchcancel for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.untouchcancel\n     [ method ]\n     **\n     * Removes event handler for touchcancel for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n    for (var i = events.length; i--;) {\n        (function (eventName) {\n            R[eventName] = elproto[eventName] = function (fn, scope) {\n                if (R.is(fn, \"function\")) {\n                    this.events = this.events || [];\n                    this.events.push({name: eventName, f: fn, unbind: addEvent(this.shape || this.node || g.doc, eventName, fn, scope || this)});\n                }\n                return this;\n            };\n            R[\"un\" + eventName] = elproto[\"un\" + eventName] = function (fn) {\n                var events = this.events || [],\n                    l = events.length;\n                while (l--){\n                    if (events[l].name == eventName && (R.is(fn, \"undefined\") || events[l].f == fn)) {\n                        events[l].unbind();\n                        events.splice(l, 1);\n                        !events.length && delete this.events;\n                    }\n                }\n                return this;\n            };\n        })(events[i]);\n    }\n\n    /*\\\n     * Element.data\n     [ method ]\n     **\n     * Adds or retrieves given value associated with given key.\n     **\n     * See also @Element.removeData\n     > Parameters\n     - key (string) key to store data\n     - value (any) #optional value to store\n     = (object) @Element\n     * or, if value is not specified:\n     = (any) value\n     * or, if key and value are not specified:\n     = (object) Key/value pairs for all the data associated with the element.\n     > Usage\n     | for (var i = 0, i < 5, i++) {\n     |     paper.circle(10 + 15 * i, 10, 10)\n     |          .attr({fill: \"#000\"})\n     |          .data(\"i\", i)\n     |          .click(function () {\n     |             alert(this.data(\"i\"));\n     |          });\n     | }\n    \\*/\n    elproto.data = function (key, value) {\n        var data = eldata[this.id] = eldata[this.id] || {};\n        if (arguments.length == 0) {\n            return data;\n        }\n        if (arguments.length == 1) {\n            if (R.is(key, \"object\")) {\n                for (var i in key) if (key[has](i)) {\n                    this.data(i, key[i]);\n                }\n                return this;\n            }\n            eve(\"raphael.data.get.\" + this.id, this, data[key], key);\n            return data[key];\n        }\n        data[key] = value;\n        eve(\"raphael.data.set.\" + this.id, this, value, key);\n        return this;\n    };\n    /*\\\n     * Element.removeData\n     [ method ]\n     **\n     * Removes value associated with an element by given key.\n     * If key is not provided, removes all the data of the element.\n     > Parameters\n     - key (string) #optional key\n     = (object) @Element\n    \\*/\n    elproto.removeData = function (key) {\n        if (key == null) {\n            eldata[this.id] = {};\n        } else {\n            eldata[this.id] && delete eldata[this.id][key];\n        }\n        return this;\n    };\n     /*\\\n     * Element.getData\n     [ method ]\n     **\n     * Retrieves the element data\n     = (object) data\n    \\*/\n    elproto.getData = function () {\n        return clone(eldata[this.id] || {});\n    };\n    /*\\\n     * Element.hover\n     [ method ]\n     **\n     * Adds event handlers for hover for the element.\n     > Parameters\n     - f_in (function) handler for hover in\n     - f_out (function) handler for hover out\n     - icontext (object) #optional context for hover in handler\n     - ocontext (object) #optional context for hover out handler\n     = (object) @Element\n    \\*/\n    elproto.hover = function (f_in, f_out, scope_in, scope_out) {\n        return this.mouseover(f_in, scope_in).mouseout(f_out, scope_out || scope_in);\n    };\n    /*\\\n     * Element.unhover\n     [ method ]\n     **\n     * Removes event handlers for hover for the element.\n     > Parameters\n     - f_in (function) handler for hover in\n     - f_out (function) handler for hover out\n     = (object) @Element\n    \\*/\n    elproto.unhover = function (f_in, f_out) {\n        return this.unmouseover(f_in).unmouseout(f_out);\n    };\n    var draggable = [];\n    /*\\\n     * Element.drag\n     [ method ]\n     **\n     * Adds event handlers for drag of the element.\n     > Parameters\n     - onmove (function) handler for moving\n     - onstart (function) handler for drag start\n     - onend (function) handler for drag end\n     - mcontext (object) #optional context for moving handler\n     - scontext (object) #optional context for drag start handler\n     - econtext (object) #optional context for drag end handler\n     * Additionally following `drag` events will be triggered: `drag.start.<id>` on start,\n     * `drag.end.<id>` on end and `drag.move.<id>` on every move. When element will be dragged over another element\n     * `drag.over.<id>` will be fired as well.\n     *\n     * Start event and start handler will be called in specified context or in context of the element with following parameters:\n     o x (number) x position of the mouse\n     o y (number) y position of the mouse\n     o event (object) DOM event object\n     * Move event and move handler will be called in specified context or in context of the element with following parameters:\n     o dx (number) shift by x from the start point\n     o dy (number) shift by y from the start point\n     o x (number) x position of the mouse\n     o y (number) y position of the mouse\n     o event (object) DOM event object\n     * End event and end handler will be called in specified context or in context of the element with following parameters:\n     o event (object) DOM event object\n     = (object) @Element\n    \\*/\n    elproto.drag = function (onmove, onstart, onend, move_scope, start_scope, end_scope) {\n        function start(e) {\n            (e.originalEvent || e).preventDefault();\n            var x = e.clientX,\n                y = e.clientY,\n                scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\n                scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft;\n            this._drag.id = e.identifier;\n            if (supportsTouch && e.touches) {\n                var i = e.touches.length, touch;\n                while (i--) {\n                    touch = e.touches[i];\n                    this._drag.id = touch.identifier;\n                    if (touch.identifier == this._drag.id) {\n                        x = touch.clientX;\n                        y = touch.clientY;\n                        break;\n                    }\n                }\n            }\n            this._drag.x = x + scrollX;\n            this._drag.y = y + scrollY;\n            !drag.length && R.mousemove(dragMove).mouseup(dragUp);\n            drag.push({el: this, move_scope: move_scope, start_scope: start_scope, end_scope: end_scope});\n            onstart && eve.on(\"raphael.drag.start.\" + this.id, onstart);\n            onmove && eve.on(\"raphael.drag.move.\" + this.id, onmove);\n            onend && eve.on(\"raphael.drag.end.\" + this.id, onend);\n            eve(\"raphael.drag.start.\" + this.id, start_scope || move_scope || this, e.clientX + scrollX, e.clientY + scrollY, e);\n        }\n        this._drag = {};\n        draggable.push({el: this, start: start});\n        this.mousedown(start);\n        return this;\n    };\n    /*\\\n     * Element.onDragOver\n     [ method ]\n     **\n     * Shortcut for assigning event handler for `drag.over.<id>` event, where id is id of the element (see @Element.id).\n     > Parameters\n     - f (function) handler for event, first argument would be the element you are dragging over\n    \\*/\n    elproto.onDragOver = function (f) {\n        f ? eve.on(\"raphael.drag.over.\" + this.id, f) : eve.unbind(\"raphael.drag.over.\" + this.id);\n    };\n    /*\\\n     * Element.undrag\n     [ method ]\n     **\n     * Removes all drag event handlers from given element.\n    \\*/\n    elproto.undrag = function () {\n        var i = draggable.length;\n        while (i--) if (draggable[i].el == this) {\n            this.unmousedown(draggable[i].start);\n            draggable.splice(i, 1);\n            eve.unbind(\"raphael.drag.*.\" + this.id);\n        }\n        !draggable.length && R.unmousemove(dragMove).unmouseup(dragUp);\n        drag = [];\n    };\n    /*\\\n     * Paper.circle\n     [ method ]\n     **\n     * Draws a circle.\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the centre\n     - y (number) y coordinate of the centre\n     - r (number) radius\n     = (object) Rapha\xEBl element object with type \u201Ccircle\u201D\n     **\n     > Usage\n     | var c = paper.circle(50, 50, 40);\n    \\*/\n    paperproto.circle = function (x, y, r) {\n        var out = R._engine.circle(this, x || 0, y || 0, r || 0);\n        this.__set__ && this.__set__.push(out);\n        return out;\n    };\n    /*\\\n     * Paper.rect\n     [ method ]\n     *\n     * Draws a rectangle.\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the top left corner\n     - y (number) y coordinate of the top left corner\n     - width (number) width\n     - height (number) height\n     - r (number) #optional radius for rounded corners, default is 0\n     = (object) Rapha\xEBl element object with type \u201Crect\u201D\n     **\n     > Usage\n     | // regular rectangle\n     | var c = paper.rect(10, 10, 50, 50);\n     | // rectangle with rounded corners\n     | var c = paper.rect(40, 40, 50, 50, 10);\n    \\*/\n    paperproto.rect = function (x, y, w, h, r) {\n        var out = R._engine.rect(this, x || 0, y || 0, w || 0, h || 0, r || 0);\n        this.__set__ && this.__set__.push(out);\n        return out;\n    };\n    /*\\\n     * Paper.ellipse\n     [ method ]\n     **\n     * Draws an ellipse.\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the centre\n     - y (number) y coordinate of the centre\n     - rx (number) horizontal radius\n     - ry (number) vertical radius\n     = (object) Rapha\xEBl element object with type \u201Cellipse\u201D\n     **\n     > Usage\n     | var c = paper.ellipse(50, 50, 40, 20);\n    \\*/\n    paperproto.ellipse = function (x, y, rx, ry) {\n        var out = R._engine.ellipse(this, x || 0, y || 0, rx || 0, ry || 0);\n        this.__set__ && this.__set__.push(out);\n        return out;\n    };\n    /*\\\n     * Paper.path\n     [ method ]\n     **\n     * Creates a path element by given path data string.\n     > Parameters\n     - pathString (string) #optional path string in SVG format.\n     * Path string consists of one-letter commands, followed by comma seprarated arguments in numercal form. Example:\n     | \"M10,20L30,40\"\n     * Here we can see two commands: \u201CM\u201D, with arguments `(10, 20)` and \u201CL\u201D with arguments `(30, 40)`. Upper case letter mean command is absolute, lower case\u2014relative.\n     *\n     # <p>Here is short list of commands available, for more details see <a href=\"http://www.w3.org/TR/SVG/paths.html#PathData\" title=\"Details of a path's data attribute's format are described in the SVG specification.\">SVG path string format</a>.</p>\n     # <table><thead><tr><th>Command</th><th>Name</th><th>Parameters</th></tr></thead><tbody>\n     # <tr><td>M</td><td>moveto</td><td>(x y)+</td></tr>\n     # <tr><td>Z</td><td>closepath</td><td>(none)</td></tr>\n     # <tr><td>L</td><td>lineto</td><td>(x y)+</td></tr>\n     # <tr><td>H</td><td>horizontal lineto</td><td>x+</td></tr>\n     # <tr><td>V</td><td>vertical lineto</td><td>y+</td></tr>\n     # <tr><td>C</td><td>curveto</td><td>(x1 y1 x2 y2 x y)+</td></tr>\n     # <tr><td>S</td><td>smooth curveto</td><td>(x2 y2 x y)+</td></tr>\n     # <tr><td>Q</td><td>quadratic B\xE9zier curveto</td><td>(x1 y1 x y)+</td></tr>\n     # <tr><td>T</td><td>smooth quadratic B\xE9zier curveto</td><td>(x y)+</td></tr>\n     # <tr><td>A</td><td>elliptical arc</td><td>(rx ry x-axis-rotation large-arc-flag sweep-flag x y)+</td></tr>\n     # <tr><td>R</td><td><a href=\"http://en.wikipedia.org/wiki/Catmull\u2013Rom_spline#Catmull.E2.80.93Rom_spline\">Catmull-Rom curveto</a>*</td><td>x1 y1 (x y)+</td></tr></tbody></table>\n     * * \u201CCatmull-Rom curveto\u201D is a not standard SVG command and added in 2.0 to make life easier.\n     * Note: there is a special case when path consist of just three commands: \u201CM10,10R\u2026z\u201D. In this case path will smoothly connects to its beginning.\n     > Usage\n     | var c = paper.path(\"M10 10L90 90\");\n     | // draw a diagonal line:\n     | // move to 10,10, line to 90,90\n     * For example of path strings, check out these icons: http://raphaeljs.com/icons/\n    \\*/\n    paperproto.path = function (pathString) {\n        pathString && !R.is(pathString, string) && !R.is(pathString[0], array) && (pathString += E);\n        var out = R._engine.path(R.format[apply](R, arguments), this);\n        this.__set__ && this.__set__.push(out);\n        return out;\n    };\n    /*\\\n     * Paper.image\n     [ method ]\n     **\n     * Embeds an image into the surface.\n     **\n     > Parameters\n     **\n     - src (string) URI of the source image\n     - x (number) x coordinate position\n     - y (number) y coordinate position\n     - width (number) width of the image\n     - height (number) height of the image\n     = (object) Rapha\xEBl element object with type \u201Cimage\u201D\n     **\n     > Usage\n     | var c = paper.image(\"apple.png\", 10, 10, 80, 80);\n    \\*/\n    paperproto.image = function (src, x, y, w, h) {\n        var out = R._engine.image(this, src || \"about:blank\", x || 0, y || 0, w || 0, h || 0);\n        this.__set__ && this.__set__.push(out);\n        return out;\n    };\n    /*\\\n     * Paper.text\n     [ method ]\n     **\n     * Draws a text string. If you need line breaks, put \u201C\\n\u201D in the string.\n     **\n     > Parameters\n     **\n     - x (number) x coordinate position\n     - y (number) y coordinate position\n     - text (string) The text string to draw\n     = (object) Rapha\xEBl element object with type \u201Ctext\u201D\n     **\n     > Usage\n     | var t = paper.text(50, 50, \"Rapha\xEBl\\nkicks\\nbutt!\");\n    \\*/\n    paperproto.text = function (x, y, text) {\n        var out = R._engine.text(this, x || 0, y || 0, Str(text));\n        this.__set__ && this.__set__.push(out);\n        return out;\n    };\n    /*\\\n     * Paper.set\n     [ method ]\n     **\n     * Creates array-like object to keep and operate several elements at once.\n     * Warning: it doesn\u2019t create any elements for itself in the page, it just groups existing elements.\n     * Sets act as pseudo elements \u2014 all methods available to an element can be used on a set.\n     = (object) array-like object that represents set of elements\n     **\n     > Usage\n     | var st = paper.set();\n     | st.push(\n     |     paper.circle(10, 10, 5),\n     |     paper.circle(30, 10, 5)\n     | );\n     | st.attr({fill: \"red\"}); // changes the fill of both circles\n    \\*/\n    paperproto.set = function (itemsArray) {\n        !R.is(itemsArray, \"array\") && (itemsArray = Array.prototype.splice.call(arguments, 0, arguments.length));\n        var out = new Set(itemsArray);\n        this.__set__ && this.__set__.push(out);\n        out[\"paper\"] = this;\n        out[\"type\"] = \"set\";\n        return out;\n    };\n    /*\\\n     * Paper.setStart\n     [ method ]\n     **\n     * Creates @Paper.set. All elements that will be created after calling this method and before calling\n     * @Paper.setFinish will be added to the set.\n     **\n     > Usage\n     | paper.setStart();\n     | paper.circle(10, 10, 5),\n     | paper.circle(30, 10, 5)\n     | var st = paper.setFinish();\n     | st.attr({fill: \"red\"}); // changes the fill of both circles\n    \\*/\n    paperproto.setStart = function (set) {\n        this.__set__ = set || this.set();\n    };\n    /*\\\n     * Paper.setFinish\n     [ method ]\n     **\n     * See @Paper.setStart. This method finishes catching and returns resulting set.\n     **\n     = (object) set\n    \\*/\n    paperproto.setFinish = function (set) {\n        var out = this.__set__;\n        delete this.__set__;\n        return out;\n    };\n    /*\\\n     * Paper.getSize\n     [ method ]\n     **\n     * Obtains current paper actual size.\n     **\n     = (object)\n     \\*/\n    paperproto.getSize = function () {\n        var container = this.canvas.parentNode;\n        return {\n            width: container.offsetWidth,\n            height: container.offsetHeight\n                };\n        };\n    /*\\\n     * Paper.setSize\n     [ method ]\n     **\n     * If you need to change dimensions of the canvas call this method\n     **\n     > Parameters\n     **\n     - width (number) new width of the canvas\n     - height (number) new height of the canvas\n    \\*/\n    paperproto.setSize = function (width, height) {\n        return R._engine.setSize.call(this, width, height);\n    };\n    /*\\\n     * Paper.setViewBox\n     [ method ]\n     **\n     * Sets the view box of the paper. Practically it gives you ability to zoom and pan whole paper surface by\n     * specifying new boundaries.\n     **\n     > Parameters\n     **\n     - x (number) new x position, default is `0`\n     - y (number) new y position, default is `0`\n     - w (number) new width of the canvas\n     - h (number) new height of the canvas\n     - fit (boolean) `true` if you want graphics to fit into new boundary box\n    \\*/\n    paperproto.setViewBox = function (x, y, w, h, fit) {\n        return R._engine.setViewBox.call(this, x, y, w, h, fit);\n    };\n    /*\\\n     * Paper.top\n     [ property ]\n     **\n     * Points to the topmost element on the paper\n    \\*/\n    /*\\\n     * Paper.bottom\n     [ property ]\n     **\n     * Points to the bottom element on the paper\n    \\*/\n    paperproto.top = paperproto.bottom = null;\n    /*\\\n     * Paper.raphael\n     [ property ]\n     **\n     * Points to the @Raphael object/function\n    \\*/\n    paperproto.raphael = R;\n    var getOffset = function (elem) {\n        var box = elem.getBoundingClientRect(),\n            doc = elem.ownerDocument,\n            body = doc.body,\n            docElem = doc.documentElement,\n            clientTop = docElem.clientTop || body.clientTop || 0, clientLeft = docElem.clientLeft || body.clientLeft || 0,\n            top  = box.top  + (g.win.pageYOffset || docElem.scrollTop || body.scrollTop ) - clientTop,\n            left = box.left + (g.win.pageXOffset || docElem.scrollLeft || body.scrollLeft) - clientLeft;\n        return {\n            y: top,\n            x: left\n        };\n    };\n    /*\\\n     * Paper.getElementByPoint\n     [ method ]\n     **\n     * Returns you topmost element under given point.\n     **\n     = (object) Rapha\xEBl element object\n     > Parameters\n     **\n     - x (number) x coordinate from the top left corner of the window\n     - y (number) y coordinate from the top left corner of the window\n     > Usage\n     | paper.getElementByPoint(mouseX, mouseY).attr({stroke: \"#f00\"});\n    \\*/\n    paperproto.getElementByPoint = function (x, y) {\n        var paper = this,\n            svg = paper.canvas,\n            target = g.doc.elementFromPoint(x, y);\n        if (g.win.opera && target.tagName == \"svg\") {\n            var so = getOffset(svg),\n                sr = svg.createSVGRect();\n            sr.x = x - so.x;\n            sr.y = y - so.y;\n            sr.width = sr.height = 1;\n            var hits = svg.getIntersectionList(sr, null);\n            if (hits.length) {\n                target = hits[hits.length - 1];\n            }\n        }\n        if (!target) {\n            return null;\n        }\n        while (target.parentNode && target != svg.parentNode && !target.raphael) {\n            target = target.parentNode;\n        }\n        target == paper.canvas.parentNode && (target = svg);\n        target = target && target.raphael ? paper.getById(target.raphaelid) : null;\n        return target;\n    };\n\n    /*\\\n     * Paper.getElementsByBBox\n     [ method ]\n     **\n     * Returns set of elements that have an intersecting bounding box\n     **\n     > Parameters\n     **\n     - bbox (object) bbox to check with\n     = (object) @Set\n     \\*/\n    paperproto.getElementsByBBox = function (bbox) {\n        var set = this.set();\n        this.forEach(function (el) {\n            if (R.isBBoxIntersect(el.getBBox(), bbox)) {\n                set.push(el);\n            }\n        });\n        return set;\n    };\n\n    /*\\\n     * Paper.getById\n     [ method ]\n     **\n     * Returns you element by its internal ID.\n     **\n     > Parameters\n     **\n     - id (number) id\n     = (object) Rapha\xEBl element object\n    \\*/\n    paperproto.getById = function (id) {\n        var bot = this.bottom;\n        while (bot) {\n            if (bot.id == id) {\n                return bot;\n            }\n            bot = bot.next;\n        }\n        return null;\n    };\n    /*\\\n     * Paper.forEach\n     [ method ]\n     **\n     * Executes given function for each element on the paper\n     *\n     * If callback function returns `false` it will stop loop running.\n     **\n     > Parameters\n     **\n     - callback (function) function to run\n     - thisArg (object) context object for the callback\n     = (object) Paper object\n     > Usage\n     | paper.forEach(function (el) {\n     |     el.attr({ stroke: \"blue\" });\n     | });\n    \\*/\n    paperproto.forEach = function (callback, thisArg) {\n        var bot = this.bottom;\n        while (bot) {\n            if (callback.call(thisArg, bot) === false) {\n                return this;\n            }\n            bot = bot.next;\n        }\n        return this;\n    };\n    /*\\\n     * Paper.getElementsByPoint\n     [ method ]\n     **\n     * Returns set of elements that have common point inside\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the point\n     - y (number) y coordinate of the point\n     = (object) @Set\n    \\*/\n    paperproto.getElementsByPoint = function (x, y) {\n        var set = this.set();\n        this.forEach(function (el) {\n            if (el.isPointInside(x, y)) {\n                set.push(el);\n            }\n        });\n        return set;\n    };\n    function x_y() {\n        return this.x + S + this.y;\n    }\n    function x_y_w_h() {\n        return this.x + S + this.y + S + this.width + \" \\xd7 \" + this.height;\n    }\n    /*\\\n     * Element.isPointInside\n     [ method ]\n     **\n     * Determine if given point is inside this element\u2019s shape\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the point\n     - y (number) y coordinate of the point\n     = (boolean) `true` if point inside the shape\n    \\*/\n    elproto.isPointInside = function (x, y) {\n        var rp = this.realPath = getPath[this.type](this);\n        if (this.attr('transform') && this.attr('transform').length) {\n            rp = R.transformPath(rp, this.attr('transform'));\n        }\n        return R.isPointInsidePath(rp, x, y);\n    };\n    /*\\\n     * Element.getBBox\n     [ method ]\n     **\n     * Return bounding box for a given element\n     **\n     > Parameters\n     **\n     - isWithoutTransform (boolean) flag, `true` if you want to have bounding box before transformations. Default is `false`.\n     = (object) Bounding box object:\n     o {\n     o     x: (number) top left corner x\n     o     y: (number) top left corner y\n     o     x2: (number) bottom right corner x\n     o     y2: (number) bottom right corner y\n     o     width: (number) width\n     o     height: (number) height\n     o }\n    \\*/\n    elproto.getBBox = function (isWithoutTransform) {\n        if (this.removed) {\n            return {};\n        }\n        var _ = this._;\n        if (isWithoutTransform) {\n            if (_.dirty || !_.bboxwt) {\n                this.realPath = getPath[this.type](this);\n                _.bboxwt = pathDimensions(this.realPath);\n                _.bboxwt.toString = x_y_w_h;\n                _.dirty = 0;\n            }\n            return _.bboxwt;\n        }\n        if (_.dirty || _.dirtyT || !_.bbox) {\n            if (_.dirty || !this.realPath) {\n                _.bboxwt = 0;\n                this.realPath = getPath[this.type](this);\n            }\n            _.bbox = pathDimensions(mapPath(this.realPath, this.matrix));\n            _.bbox.toString = x_y_w_h;\n            _.dirty = _.dirtyT = 0;\n        }\n        return _.bbox;\n    };\n    /*\\\n     * Element.clone\n     [ method ]\n     **\n     = (object) clone of a given element\n     **\n    \\*/\n    elproto.clone = function () {\n        if (this.removed) {\n            return null;\n        }\n        var out = this.paper[this.type]().attr(this.attr());\n        this.__set__ && this.__set__.push(out);\n        return out;\n    };\n    /*\\\n     * Element.glow\n     [ method ]\n     **\n     * Return set of elements that create glow-like effect around given element. See @Paper.set.\n     *\n     * Note: Glow is not connected to the element. If you change element attributes it won\u2019t adjust itself.\n     **\n     > Parameters\n     **\n     - glow (object) #optional parameters object with all properties optional:\n     o {\n     o     width (number) size of the glow, default is `10`\n     o     fill (boolean) will it be filled, default is `false`\n     o     opacity (number) opacity, default is `0.5`\n     o     offsetx (number) horizontal offset, default is `0`\n     o     offsety (number) vertical offset, default is `0`\n     o     color (string) glow colour, default is `black`\n     o }\n     = (object) @Paper.set of elements that represents glow\n    \\*/\n    elproto.glow = function (glow) {\n        if (this.type == \"text\") {\n            return null;\n        }\n        glow = glow || {};\n        var s = {\n            width: (glow.width || 10) + (+this.attr(\"stroke-width\") || 1),\n            fill: glow.fill || false,\n            opacity: glow.opacity == null ? .5 : glow.opacity,\n            offsetx: glow.offsetx || 0,\n            offsety: glow.offsety || 0,\n            color: glow.color || \"#000\"\n        },\n            c = s.width / 2,\n            r = this.paper,\n            out = r.set(),\n            path = this.realPath || getPath[this.type](this);\n        path = this.matrix ? mapPath(path, this.matrix) : path;\n        for (var i = 1; i < c + 1; i++) {\n            out.push(r.path(path).attr({\n                stroke: s.color,\n                fill: s.fill ? s.color : \"none\",\n                \"stroke-linejoin\": \"round\",\n                \"stroke-linecap\": \"round\",\n                \"stroke-width\": +(s.width / c * i).toFixed(3),\n                opacity: +(s.opacity / c).toFixed(3)\n            }));\n        }\n        return out.insertBefore(this).translate(s.offsetx, s.offsety);\n    };\n    var curveslengths = {},\n    getPointAtSegmentLength = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, length) {\n        if (length == null) {\n            return bezlen(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y);\n        } else {\n            return R.findDotsAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, getTatLen(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, length));\n        }\n    },\n    getLengthFactory = function (istotal, subpath) {\n        return function (path, length, onlystart) {\n            path = path2curve(path);\n            var x, y, p, l, sp = \"\", subpaths = {}, point,\n                len = 0;\n            for (var i = 0, ii = path.length; i < ii; i++) {\n                p = path[i];\n                if (p[0] == \"M\") {\n                    x = +p[1];\n                    y = +p[2];\n                } else {\n                    l = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6]);\n                    if (len + l > length) {\n                        if (subpath && !subpaths.start) {\n                            point = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6], length - len);\n                            sp += [\"C\" + point.start.x, point.start.y, point.m.x, point.m.y, point.x, point.y];\n                            if (onlystart) {return sp;}\n                            subpaths.start = sp;\n                            sp = [\"M\" + point.x, point.y + \"C\" + point.n.x, point.n.y, point.end.x, point.end.y, p[5], p[6]].join();\n                            len += l;\n                            x = +p[5];\n                            y = +p[6];\n                            continue;\n                        }\n                        if (!istotal && !subpath) {\n                            point = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6], length - len);\n                            return {x: point.x, y: point.y, alpha: point.alpha};\n                        }\n                    }\n                    len += l;\n                    x = +p[5];\n                    y = +p[6];\n                }\n                sp += p.shift() + p;\n            }\n            subpaths.end = sp;\n            point = istotal ? len : subpath ? subpaths : R.findDotsAtSegment(x, y, p[0], p[1], p[2], p[3], p[4], p[5], 1);\n            point.alpha && (point = {x: point.x, y: point.y, alpha: point.alpha});\n            return point;\n        };\n    };\n    var getTotalLength = getLengthFactory(1),\n        getPointAtLength = getLengthFactory(),\n        getSubpathsAtLength = getLengthFactory(0, 1);\n    /*\\\n     * Raphael.getTotalLength\n     [ method ]\n     **\n     * Returns length of the given path in pixels.\n     **\n     > Parameters\n     **\n     - path (string) SVG path string.\n     **\n     = (number) length.\n    \\*/\n    R.getTotalLength = getTotalLength;\n    /*\\\n     * Raphael.getPointAtLength\n     [ method ]\n     **\n     * Return coordinates of the point located at the given length on the given path.\n     **\n     > Parameters\n     **\n     - path (string) SVG path string\n     - length (number)\n     **\n     = (object) representation of the point:\n     o {\n     o     x: (number) x coordinate\n     o     y: (number) y coordinate\n     o     alpha: (number) angle of derivative\n     o }\n    \\*/\n    R.getPointAtLength = getPointAtLength;\n    /*\\\n     * Raphael.getSubpath\n     [ method ]\n     **\n     * Return subpath of a given path from given length to given length.\n     **\n     > Parameters\n     **\n     - path (string) SVG path string\n     - from (number) position of the start of the segment\n     - to (number) position of the end of the segment\n     **\n     = (string) pathstring for the segment\n    \\*/\n    R.getSubpath = function (path, from, to) {\n        if (this.getTotalLength(path) - to < 1e-6) {\n            return getSubpathsAtLength(path, from).end;\n        }\n        var a = getSubpathsAtLength(path, to, 1);\n        return from ? getSubpathsAtLength(a, from).end : a;\n    };\n    /*\\\n     * Element.getTotalLength\n     [ method ]\n     **\n     * Returns length of the path in pixels. Only works for element of \u201Cpath\u201D type.\n     = (number) length.\n    \\*/\n    elproto.getTotalLength = function () {\n        var path = this.getPath();\n        if (!path) {\n            return;\n        }\n\n        if (this.node.getTotalLength) {\n            return this.node.getTotalLength();\n        }\n\n        return getTotalLength(path);\n    };\n    /*\\\n     * Element.getPointAtLength\n     [ method ]\n     **\n     * Return coordinates of the point located at the given length on the given path. Only works for element of \u201Cpath\u201D type.\n     **\n     > Parameters\n     **\n     - length (number)\n     **\n     = (object) representation of the point:\n     o {\n     o     x: (number) x coordinate\n     o     y: (number) y coordinate\n     o     alpha: (number) angle of derivative\n     o }\n    \\*/\n    elproto.getPointAtLength = function (length) {\n        var path = this.getPath();\n        if (!path) {\n            return;\n        }\n\n        return getPointAtLength(path, length);\n    };\n    /*\\\n     * Element.getPath\n     [ method ]\n     **\n     * Returns path of the element. Only works for elements of \u201Cpath\u201D type and simple elements like circle.\n     = (object) path\n     **\n    \\*/\n    elproto.getPath = function () {\n        var path,\n            getPath = R._getPath[this.type];\n\n        if (this.type == \"text\" || this.type == \"set\") {\n            return;\n        }\n\n        if (getPath) {\n            path = getPath(this);\n        }\n\n        return path;\n    };\n    /*\\\n     * Element.getSubpath\n     [ method ]\n     **\n     * Return subpath of a given element from given length to given length. Only works for element of \u201Cpath\u201D type.\n     **\n     > Parameters\n     **\n     - from (number) position of the start of the segment\n     - to (number) position of the end of the segment\n     **\n     = (string) pathstring for the segment\n    \\*/\n    elproto.getSubpath = function (from, to) {\n        var path = this.getPath();\n        if (!path) {\n            return;\n        }\n\n        return R.getSubpath(path, from, to);\n    };\n    /*\\\n     * Raphael.easing_formulas\n     [ property ]\n     **\n     * Object that contains easing formulas for animation. You could extend it with your own. By default it has following list of easing:\n     # <ul>\n     #     <li>\u201Clinear\u201D</li>\n     #     <li>\u201C&lt;\u201D or \u201CeaseIn\u201D or \u201Cease-in\u201D</li>\n     #     <li>\u201C>\u201D or \u201CeaseOut\u201D or \u201Cease-out\u201D</li>\n     #     <li>\u201C&lt;>\u201D or \u201CeaseInOut\u201D or \u201Cease-in-out\u201D</li>\n     #     <li>\u201CbackIn\u201D or \u201Cback-in\u201D</li>\n     #     <li>\u201CbackOut\u201D or \u201Cback-out\u201D</li>\n     #     <li>\u201Celastic\u201D</li>\n     #     <li>\u201Cbounce\u201D</li>\n     # </ul>\n     # <p>See also <a href=\"http://raphaeljs.com/easing.html\">Easing demo</a>.</p>\n    \\*/\n    var ef = R.easing_formulas = {\n        linear: function (n) {\n            return n;\n        },\n        \"<\": function (n) {\n            return pow(n, 1.7);\n        },\n        \">\": function (n) {\n            return pow(n, .48);\n        },\n        \"<>\": function (n) {\n            var q = .48 - n / 1.04,\n                Q = math.sqrt(.1734 + q * q),\n                x = Q - q,\n                X = pow(abs(x), 1 / 3) * (x < 0 ? -1 : 1),\n                y = -Q - q,\n                Y = pow(abs(y), 1 / 3) * (y < 0 ? -1 : 1),\n                t = X + Y + .5;\n            return (1 - t) * 3 * t * t + t * t * t;\n        },\n        backIn: function (n) {\n            var s = 1.70158;\n            return n * n * ((s + 1) * n - s);\n        },\n        backOut: function (n) {\n            n = n - 1;\n            var s = 1.70158;\n            return n * n * ((s + 1) * n + s) + 1;\n        },\n        elastic: function (n) {\n            if (n == !!n) {\n                return n;\n            }\n            return pow(2, -10 * n) * math.sin((n - .075) * (2 * PI) / .3) + 1;\n        },\n        bounce: function (n) {\n            var s = 7.5625,\n                p = 2.75,\n                l;\n            if (n < (1 / p)) {\n                l = s * n * n;\n            } else {\n                if (n < (2 / p)) {\n                    n -= (1.5 / p);\n                    l = s * n * n + .75;\n                } else {\n                    if (n < (2.5 / p)) {\n                        n -= (2.25 / p);\n                        l = s * n * n + .9375;\n                    } else {\n                        n -= (2.625 / p);\n                        l = s * n * n + .984375;\n                    }\n                }\n            }\n            return l;\n        }\n    };\n    ef.easeIn = ef[\"ease-in\"] = ef[\"<\"];\n    ef.easeOut = ef[\"ease-out\"] = ef[\">\"];\n    ef.easeInOut = ef[\"ease-in-out\"] = ef[\"<>\"];\n    ef[\"back-in\"] = ef.backIn;\n    ef[\"back-out\"] = ef.backOut;\n\n    var animationElements = [],\n        requestAnimFrame = window.requestAnimationFrame       ||\n                           window.webkitRequestAnimationFrame ||\n                           window.mozRequestAnimationFrame    ||\n                           window.oRequestAnimationFrame      ||\n                           window.msRequestAnimationFrame     ||\n                           function (callback) {\n                               setTimeout(callback, 16);\n                           },\n        animation = function () {\n            var Now = +new Date,\n                l = 0;\n            for (; l < animationElements.length; l++) {\n                var e = animationElements[l];\n                if (e.el.removed || e.paused) {\n                    continue;\n                }\n                var time = Now - e.start,\n                    ms = e.ms,\n                    easing = e.easing,\n                    from = e.from,\n                    diff = e.diff,\n                    to = e.to,\n                    t = e.t,\n                    that = e.el,\n                    set = {},\n                    now,\n                    init = {},\n                    key;\n                if (e.initstatus) {\n                    time = (e.initstatus * e.anim.top - e.prev) / (e.percent - e.prev) * ms;\n                    e.status = e.initstatus;\n                    delete e.initstatus;\n                    e.stop && animationElements.splice(l--, 1);\n                } else {\n                    e.status = (e.prev + (e.percent - e.prev) * (time / ms)) / e.anim.top;\n                }\n                if (time < 0) {\n                    continue;\n                }\n                if (time < ms) {\n                    var pos = easing(time / ms);\n                    for (var attr in from) if (from[has](attr)) {\n                        switch (availableAnimAttrs[attr]) {\n                            case nu:\n                                now = +from[attr] + pos * ms * diff[attr];\n                                break;\n                            case \"colour\":\n                                now = \"rgb(\" + [\n                                    upto255(round(from[attr].r + pos * ms * diff[attr].r)),\n                                    upto255(round(from[attr].g + pos * ms * diff[attr].g)),\n                                    upto255(round(from[attr].b + pos * ms * diff[attr].b))\n                                ].join(\",\") + \")\";\n                                break;\n                            case \"path\":\n                                now = [];\n                                for (var i = 0, ii = from[attr].length; i < ii; i++) {\n                                    now[i] = [from[attr][i][0]];\n                                    for (var j = 1, jj = from[attr][i].length; j < jj; j++) {\n                                        now[i][j] = +from[attr][i][j] + pos * ms * diff[attr][i][j];\n                                    }\n                                    now[i] = now[i].join(S);\n                                }\n                                now = now.join(S);\n                                break;\n                            case \"transform\":\n                                if (diff[attr].real) {\n                                    now = [];\n                                    for (i = 0, ii = from[attr].length; i < ii; i++) {\n                                        now[i] = [from[attr][i][0]];\n                                        for (j = 1, jj = from[attr][i].length; j < jj; j++) {\n                                            now[i][j] = from[attr][i][j] + pos * ms * diff[attr][i][j];\n                                        }\n                                    }\n                                } else {\n                                    var get = function (i) {\n                                        return +from[attr][i] + pos * ms * diff[attr][i];\n                                    };\n                                    // now = [[\"r\", get(2), 0, 0], [\"t\", get(3), get(4)], [\"s\", get(0), get(1), 0, 0]];\n                                    now = [[\"m\", get(0), get(1), get(2), get(3), get(4), get(5)]];\n                                }\n                                break;\n                            case \"csv\":\n                                if (attr == \"clip-rect\") {\n                                    now = [];\n                                    i = 4;\n                                    while (i--) {\n                                        now[i] = +from[attr][i] + pos * ms * diff[attr][i];\n                                    }\n                                }\n                                break;\n                            default:\n                                var from2 = [][concat](from[attr]);\n                                now = [];\n                                i = that.paper.customAttributes[attr].length;\n                                while (i--) {\n                                    now[i] = +from2[i] + pos * ms * diff[attr][i];\n                                }\n                                break;\n                        }\n                        set[attr] = now;\n                    }\n                    that.attr(set);\n                    (function (id, that, anim) {\n                        setTimeout(function () {\n                            eve(\"raphael.anim.frame.\" + id, that, anim);\n                        });\n                    })(that.id, that, e.anim);\n                } else {\n                    (function(f, el, a) {\n                        setTimeout(function() {\n                            eve(\"raphael.anim.frame.\" + el.id, el, a);\n                            eve(\"raphael.anim.finish.\" + el.id, el, a);\n                            R.is(f, \"function\") && f.call(el);\n                        });\n                    })(e.callback, that, e.anim);\n                    that.attr(to);\n                    animationElements.splice(l--, 1);\n                    if (e.repeat > 1 && !e.next) {\n                        for (key in to) if (to[has](key)) {\n                            init[key] = e.totalOrigin[key];\n                        }\n                        e.el.attr(init);\n                        runAnimation(e.anim, e.el, e.anim.percents[0], null, e.totalOrigin, e.repeat - 1);\n                    }\n                    if (e.next && !e.stop) {\n                        runAnimation(e.anim, e.el, e.next, null, e.totalOrigin, e.repeat);\n                    }\n                }\n            }\n            animationElements.length && requestAnimFrame(animation);\n        },\n        upto255 = function (color) {\n            return color > 255 ? 255 : color < 0 ? 0 : color;\n        };\n    /*\\\n     * Element.animateWith\n     [ method ]\n     **\n     * Acts similar to @Element.animate, but ensure that given animation runs in sync with another given element.\n     **\n     > Parameters\n     **\n     - el (object) element to sync with\n     - anim (object) animation to sync with\n     - params (object) #optional final attributes for the element, see also @Element.attr\n     - ms (number) #optional number of milliseconds for animation to run\n     - easing (string) #optional easing type. Accept on of @Raphael.easing_formulas or CSS format: `cubic&#x2010;bezier(XX,&#160;XX,&#160;XX,&#160;XX)`\n     - callback (function) #optional callback function. Will be called at the end of animation.\n     * or\n     - element (object) element to sync with\n     - anim (object) animation to sync with\n     - animation (object) #optional animation object, see @Raphael.animation\n     **\n     = (object) original element\n    \\*/\n    elproto.animateWith = function (el, anim, params, ms, easing, callback) {\n        var element = this;\n        if (element.removed) {\n            callback && callback.call(element);\n            return element;\n        }\n        var a = params instanceof Animation ? params : R.animation(params, ms, easing, callback),\n            x, y;\n        runAnimation(a, element, a.percents[0], null, element.attr());\n        for (var i = 0, ii = animationElements.length; i < ii; i++) {\n            if (animationElements[i].anim == anim && animationElements[i].el == el) {\n                animationElements[ii - 1].start = animationElements[i].start;\n                break;\n            }\n        }\n        return element;\n        //\n        //\n        // var a = params ? R.animation(params, ms, easing, callback) : anim,\n        //     status = element.status(anim);\n        // return this.animate(a).status(a, status * anim.ms / a.ms);\n    };\n    function CubicBezierAtTime(t, p1x, p1y, p2x, p2y, duration) {\n        var cx = 3 * p1x,\n            bx = 3 * (p2x - p1x) - cx,\n            ax = 1 - cx - bx,\n            cy = 3 * p1y,\n            by = 3 * (p2y - p1y) - cy,\n            ay = 1 - cy - by;\n        function sampleCurveX(t) {\n            return ((ax * t + bx) * t + cx) * t;\n        }\n        function solve(x, epsilon) {\n            var t = solveCurveX(x, epsilon);\n            return ((ay * t + by) * t + cy) * t;\n        }\n        function solveCurveX(x, epsilon) {\n            var t0, t1, t2, x2, d2, i;\n            for(t2 = x, i = 0; i < 8; i++) {\n                x2 = sampleCurveX(t2) - x;\n                if (abs(x2) < epsilon) {\n                    return t2;\n                }\n                d2 = (3 * ax * t2 + 2 * bx) * t2 + cx;\n                if (abs(d2) < 1e-6) {\n                    break;\n                }\n                t2 = t2 - x2 / d2;\n            }\n            t0 = 0;\n            t1 = 1;\n            t2 = x;\n            if (t2 < t0) {\n                return t0;\n            }\n            if (t2 > t1) {\n                return t1;\n            }\n            while (t0 < t1) {\n                x2 = sampleCurveX(t2);\n                if (abs(x2 - x) < epsilon) {\n                    return t2;\n                }\n                if (x > x2) {\n                    t0 = t2;\n                } else {\n                    t1 = t2;\n                }\n                t2 = (t1 - t0) / 2 + t0;\n            }\n            return t2;\n        }\n        return solve(t, 1 / (200 * duration));\n    }\n    elproto.onAnimation = function (f) {\n        f ? eve.on(\"raphael.anim.frame.\" + this.id, f) : eve.unbind(\"raphael.anim.frame.\" + this.id);\n        return this;\n    };\n    function Animation(anim, ms) {\n        var percents = [],\n            newAnim = {};\n        this.ms = ms;\n        this.times = 1;\n        if (anim) {\n            for (var attr in anim) if (anim[has](attr)) {\n                newAnim[toFloat(attr)] = anim[attr];\n                percents.push(toFloat(attr));\n            }\n            percents.sort(sortByNumber);\n        }\n        this.anim = newAnim;\n        this.top = percents[percents.length - 1];\n        this.percents = percents;\n    }\n    /*\\\n     * Animation.delay\n     [ method ]\n     **\n     * Creates a copy of existing animation object with given delay.\n     **\n     > Parameters\n     **\n     - delay (number) number of ms to pass between animation start and actual animation\n     **\n     = (object) new altered Animation object\n     | var anim = Raphael.animation({cx: 10, cy: 20}, 2e3);\n     | circle1.animate(anim); // run the given animation immediately\n     | circle2.animate(anim.delay(500)); // run the given animation after 500 ms\n    \\*/\n    Animation.prototype.delay = function (delay) {\n        var a = new Animation(this.anim, this.ms);\n        a.times = this.times;\n        a.del = +delay || 0;\n        return a;\n    };\n    /*\\\n     * Animation.repeat\n     [ method ]\n     **\n     * Creates a copy of existing animation object with given repetition.\n     **\n     > Parameters\n     **\n     - repeat (number) number iterations of animation. For infinite animation pass `Infinity`\n     **\n     = (object) new altered Animation object\n    \\*/\n    Animation.prototype.repeat = function (times) {\n        var a = new Animation(this.anim, this.ms);\n        a.del = this.del;\n        a.times = math.floor(mmax(times, 0)) || 1;\n        return a;\n    };\n    function runAnimation(anim, element, percent, status, totalOrigin, times) {\n        percent = toFloat(percent);\n        var params,\n            isInAnim,\n            isInAnimSet,\n            percents = [],\n            next,\n            prev,\n            timestamp,\n            ms = anim.ms,\n            from = {},\n            to = {},\n            diff = {};\n        if (status) {\n            for (i = 0, ii = animationElements.length; i < ii; i++) {\n                var e = animationElements[i];\n                if (e.el.id == element.id && e.anim == anim) {\n                    if (e.percent != percent) {\n                        animationElements.splice(i, 1);\n                        isInAnimSet = 1;\n                    } else {\n                        isInAnim = e;\n                    }\n                    element.attr(e.totalOrigin);\n                    break;\n                }\n            }\n        } else {\n            status = +to; // NaN\n        }\n        for (var i = 0, ii = anim.percents.length; i < ii; i++) {\n            if (anim.percents[i] == percent || anim.percents[i] > status * anim.top) {\n                percent = anim.percents[i];\n                prev = anim.percents[i - 1] || 0;\n                ms = ms / anim.top * (percent - prev);\n                next = anim.percents[i + 1];\n                params = anim.anim[percent];\n                break;\n            } else if (status) {\n                element.attr(anim.anim[anim.percents[i]]);\n            }\n        }\n        if (!params) {\n            return;\n        }\n        if (!isInAnim) {\n            for (var attr in params) if (params[has](attr)) {\n                if (availableAnimAttrs[has](attr) || element.paper.customAttributes[has](attr)) {\n                    from[attr] = element.attr(attr);\n                    (from[attr] == null) && (from[attr] = availableAttrs[attr]);\n                    to[attr] = params[attr];\n                    switch (availableAnimAttrs[attr]) {\n                        case nu:\n                            diff[attr] = (to[attr] - from[attr]) / ms;\n                            break;\n                        case \"colour\":\n                            from[attr] = R.getRGB(from[attr]);\n                            var toColour = R.getRGB(to[attr]);\n                            diff[attr] = {\n                                r: (toColour.r - from[attr].r) / ms,\n                                g: (toColour.g - from[attr].g) / ms,\n                                b: (toColour.b - from[attr].b) / ms\n                            };\n                            break;\n                        case \"path\":\n                            var pathes = path2curve(from[attr], to[attr]),\n                                toPath = pathes[1];\n                            from[attr] = pathes[0];\n                            diff[attr] = [];\n                            for (i = 0, ii = from[attr].length; i < ii; i++) {\n                                diff[attr][i] = [0];\n                                for (var j = 1, jj = from[attr][i].length; j < jj; j++) {\n                                    diff[attr][i][j] = (toPath[i][j] - from[attr][i][j]) / ms;\n                                }\n                            }\n                            break;\n                        case \"transform\":\n                            var _ = element._,\n                                eq = equaliseTransform(_[attr], to[attr]);\n                            if (eq) {\n                                from[attr] = eq.from;\n                                to[attr] = eq.to;\n                                diff[attr] = [];\n                                diff[attr].real = true;\n                                for (i = 0, ii = from[attr].length; i < ii; i++) {\n                                    diff[attr][i] = [from[attr][i][0]];\n                                    for (j = 1, jj = from[attr][i].length; j < jj; j++) {\n                                        diff[attr][i][j] = (to[attr][i][j] - from[attr][i][j]) / ms;\n                                    }\n                                }\n                            } else {\n                                var m = (element.matrix || new Matrix),\n                                    to2 = {\n                                        _: {transform: _.transform},\n                                        getBBox: function () {\n                                            return element.getBBox(1);\n                                        }\n                                    };\n                                from[attr] = [\n                                    m.a,\n                                    m.b,\n                                    m.c,\n                                    m.d,\n                                    m.e,\n                                    m.f\n                                ];\n                                extractTransform(to2, to[attr]);\n                                to[attr] = to2._.transform;\n                                diff[attr] = [\n                                    (to2.matrix.a - m.a) / ms,\n                                    (to2.matrix.b - m.b) / ms,\n                                    (to2.matrix.c - m.c) / ms,\n                                    (to2.matrix.d - m.d) / ms,\n                                    (to2.matrix.e - m.e) / ms,\n                                    (to2.matrix.f - m.f) / ms\n                                ];\n                                // from[attr] = [_.sx, _.sy, _.deg, _.dx, _.dy];\n                                // var to2 = {_:{}, getBBox: function () { return element.getBBox(); }};\n                                // extractTransform(to2, to[attr]);\n                                // diff[attr] = [\n                                //     (to2._.sx - _.sx) / ms,\n                                //     (to2._.sy - _.sy) / ms,\n                                //     (to2._.deg - _.deg) / ms,\n                                //     (to2._.dx - _.dx) / ms,\n                                //     (to2._.dy - _.dy) / ms\n                                // ];\n                            }\n                            break;\n                        case \"csv\":\n                            var values = Str(params[attr])[split](separator),\n                                from2 = Str(from[attr])[split](separator);\n                            if (attr == \"clip-rect\") {\n                                from[attr] = from2;\n                                diff[attr] = [];\n                                i = from2.length;\n                                while (i--) {\n                                    diff[attr][i] = (values[i] - from[attr][i]) / ms;\n                                }\n                            }\n                            to[attr] = values;\n                            break;\n                        default:\n                            values = [][concat](params[attr]);\n                            from2 = [][concat](from[attr]);\n                            diff[attr] = [];\n                            i = element.paper.customAttributes[attr].length;\n                            while (i--) {\n                                diff[attr][i] = ((values[i] || 0) - (from2[i] || 0)) / ms;\n                            }\n                            break;\n                    }\n                }\n            }\n            var easing = params.easing,\n                easyeasy = R.easing_formulas[easing];\n            if (!easyeasy) {\n                easyeasy = Str(easing).match(bezierrg);\n                if (easyeasy && easyeasy.length == 5) {\n                    var curve = easyeasy;\n                    easyeasy = function (t) {\n                        return CubicBezierAtTime(t, +curve[1], +curve[2], +curve[3], +curve[4], ms);\n                    };\n                } else {\n                    easyeasy = pipe;\n                }\n            }\n            timestamp = params.start || anim.start || +new Date;\n            e = {\n                anim: anim,\n                percent: percent,\n                timestamp: timestamp,\n                start: timestamp + (anim.del || 0),\n                status: 0,\n                initstatus: status || 0,\n                stop: false,\n                ms: ms,\n                easing: easyeasy,\n                from: from,\n                diff: diff,\n                to: to,\n                el: element,\n                callback: params.callback,\n                prev: prev,\n                next: next,\n                repeat: times || anim.times,\n                origin: element.attr(),\n                totalOrigin: totalOrigin\n            };\n            animationElements.push(e);\n            if (status && !isInAnim && !isInAnimSet) {\n                e.stop = true;\n                e.start = new Date - ms * status;\n                if (animationElements.length == 1) {\n                    return animation();\n                }\n            }\n            if (isInAnimSet) {\n                e.start = new Date - e.ms * status;\n            }\n            animationElements.length == 1 && requestAnimFrame(animation);\n        } else {\n            isInAnim.initstatus = status;\n            isInAnim.start = new Date - isInAnim.ms * status;\n        }\n        eve(\"raphael.anim.start.\" + element.id, element, anim);\n    }\n    /*\\\n     * Raphael.animation\n     [ method ]\n     **\n     * Creates an animation object that can be passed to the @Element.animate or @Element.animateWith methods.\n     * See also @Animation.delay and @Animation.repeat methods.\n     **\n     > Parameters\n     **\n     - params (object) final attributes for the element, see also @Element.attr\n     - ms (number) number of milliseconds for animation to run\n     - easing (string) #optional easing type. Accept one of @Raphael.easing_formulas or CSS format: `cubic&#x2010;bezier(XX,&#160;XX,&#160;XX,&#160;XX)`\n     - callback (function) #optional callback function. Will be called at the end of animation.\n     **\n     = (object) @Animation\n    \\*/\n    R.animation = function (params, ms, easing, callback) {\n        if (params instanceof Animation) {\n            return params;\n        }\n        if (R.is(easing, \"function\") || !easing) {\n            callback = callback || easing || null;\n            easing = null;\n        }\n        params = Object(params);\n        ms = +ms || 0;\n        var p = {},\n            json,\n            attr;\n        for (attr in params) if (params[has](attr) && toFloat(attr) != attr && toFloat(attr) + \"%\" != attr) {\n            json = true;\n            p[attr] = params[attr];\n        }\n        if (!json) {\n            // if percent-like syntax is used and end-of-all animation callback used\n            if(callback){\n                // find the last one\n                var lastKey = 0;\n                for(var i in params){\n                    var percent = toInt(i);\n                    if(params[has](i) && percent > lastKey){\n                        lastKey = percent;\n                    }\n                }\n                lastKey += '%';\n                // if already defined callback in the last keyframe, skip\n                !params[lastKey].callback && (params[lastKey].callback = callback);\n            }\n          return new Animation(params, ms);\n        } else {\n            easing && (p.easing = easing);\n            callback && (p.callback = callback);\n            return new Animation({100: p}, ms);\n        }\n    };\n    /*\\\n     * Element.animate\n     [ method ]\n     **\n     * Creates and starts animation for given element.\n     **\n     > Parameters\n     **\n     - params (object) final attributes for the element, see also @Element.attr\n     - ms (number) number of milliseconds for animation to run\n     - easing (string) #optional easing type. Accept one of @Raphael.easing_formulas or CSS format: `cubic&#x2010;bezier(XX,&#160;XX,&#160;XX,&#160;XX)`\n     - callback (function) #optional callback function. Will be called at the end of animation.\n     * or\n     - animation (object) animation object, see @Raphael.animation\n     **\n     = (object) original element\n    \\*/\n    elproto.animate = function (params, ms, easing, callback) {\n        var element = this;\n        if (element.removed) {\n            callback && callback.call(element);\n            return element;\n        }\n        var anim = params instanceof Animation ? params : R.animation(params, ms, easing, callback);\n        runAnimation(anim, element, anim.percents[0], null, element.attr());\n        return element;\n    };\n    /*\\\n     * Element.setTime\n     [ method ]\n     **\n     * Sets the status of animation of the element in milliseconds. Similar to @Element.status method.\n     **\n     > Parameters\n     **\n     - anim (object) animation object\n     - value (number) number of milliseconds from the beginning of the animation\n     **\n     = (object) original element if `value` is specified\n     * Note, that during animation following events are triggered:\n     *\n     * On each animation frame event `anim.frame.<id>`, on start `anim.start.<id>` and on end `anim.finish.<id>`.\n    \\*/\n    elproto.setTime = function (anim, value) {\n        if (anim && value != null) {\n            this.status(anim, mmin(value, anim.ms) / anim.ms);\n        }\n        return this;\n    };\n    /*\\\n     * Element.status\n     [ method ]\n     **\n     * Gets or sets the status of animation of the element.\n     **\n     > Parameters\n     **\n     - anim (object) #optional animation object\n     - value (number) #optional 0 \u2013 1. If specified, method works like a setter and sets the status of a given animation to the value. This will cause animation to jump to the given position.\n     **\n     = (number) status\n     * or\n     = (array) status if `anim` is not specified. Array of objects in format:\n     o {\n     o     anim: (object) animation object\n     o     status: (number) status\n     o }\n     * or\n     = (object) original element if `value` is specified\n    \\*/\n    elproto.status = function (anim, value) {\n        var out = [],\n            i = 0,\n            len,\n            e;\n        if (value != null) {\n            runAnimation(anim, this, -1, mmin(value, 1));\n            return this;\n        } else {\n            len = animationElements.length;\n            for (; i < len; i++) {\n                e = animationElements[i];\n                if (e.el.id == this.id && (!anim || e.anim == anim)) {\n                    if (anim) {\n                        return e.status;\n                    }\n                    out.push({\n                        anim: e.anim,\n                        status: e.status\n                    });\n                }\n            }\n            if (anim) {\n                return 0;\n            }\n            return out;\n        }\n    };\n    /*\\\n     * Element.pause\n     [ method ]\n     **\n     * Stops animation of the element with ability to resume it later on.\n     **\n     > Parameters\n     **\n     - anim (object) #optional animation object\n     **\n     = (object) original element\n    \\*/\n    elproto.pause = function (anim) {\n        for (var i = 0; i < animationElements.length; i++) if (animationElements[i].el.id == this.id && (!anim || animationElements[i].anim == anim)) {\n            if (eve(\"raphael.anim.pause.\" + this.id, this, animationElements[i].anim) !== false) {\n                animationElements[i].paused = true;\n            }\n        }\n        return this;\n    };\n    /*\\\n     * Element.resume\n     [ method ]\n     **\n     * Resumes animation if it was paused with @Element.pause method.\n     **\n     > Parameters\n     **\n     - anim (object) #optional animation object\n     **\n     = (object) original element\n    \\*/\n    elproto.resume = function (anim) {\n        for (var i = 0; i < animationElements.length; i++) if (animationElements[i].el.id == this.id && (!anim || animationElements[i].anim == anim)) {\n            var e = animationElements[i];\n            if (eve(\"raphael.anim.resume.\" + this.id, this, e.anim) !== false) {\n                delete e.paused;\n                this.status(e.anim, e.status);\n            }\n        }\n        return this;\n    };\n    /*\\\n     * Element.stop\n     [ method ]\n     **\n     * Stops animation of the element.\n     **\n     > Parameters\n     **\n     - anim (object) #optional animation object\n     **\n     = (object) original element\n    \\*/\n    elproto.stop = function (anim) {\n        for (var i = 0; i < animationElements.length; i++) if (animationElements[i].el.id == this.id && (!anim || animationElements[i].anim == anim)) {\n            if (eve(\"raphael.anim.stop.\" + this.id, this, animationElements[i].anim) !== false) {\n                animationElements.splice(i--, 1);\n            }\n        }\n        return this;\n    };\n    function stopAnimation(paper) {\n        for (var i = 0; i < animationElements.length; i++) if (animationElements[i].el.paper == paper) {\n            animationElements.splice(i--, 1);\n        }\n    }\n    eve.on(\"raphael.remove\", stopAnimation);\n    eve.on(\"raphael.clear\", stopAnimation);\n    elproto.toString = function () {\n        return \"Rapha\\xebl\\u2019s object\";\n    };\n\n    // Set\n    var Set = function (items) {\n        this.items = [];\n        this.length = 0;\n        this.type = \"set\";\n        if (items) {\n            for (var i = 0, ii = items.length; i < ii; i++) {\n                if (items[i] && (items[i].constructor == elproto.constructor || items[i].constructor == Set)) {\n                    this[this.items.length] = this.items[this.items.length] = items[i];\n                    this.length++;\n                }\n            }\n        }\n    },\n    setproto = Set.prototype;\n    /*\\\n     * Set.push\n     [ method ]\n     **\n     * Adds each argument to the current set.\n     = (object) original element\n    \\*/\n    setproto.push = function () {\n        var item,\n            len;\n        for (var i = 0, ii = arguments.length; i < ii; i++) {\n            item = arguments[i];\n            if (item && (item.constructor == elproto.constructor || item.constructor == Set)) {\n                len = this.items.length;\n                this[len] = this.items[len] = item;\n                this.length++;\n            }\n        }\n        return this;\n    };\n    /*\\\n     * Set.pop\n     [ method ]\n     **\n     * Removes last element and returns it.\n     = (object) element\n    \\*/\n    setproto.pop = function () {\n        this.length && delete this[this.length--];\n        return this.items.pop();\n    };\n    /*\\\n     * Set.forEach\n     [ method ]\n     **\n     * Executes given function for each element in the set.\n     *\n     * If function returns `false` it will stop loop running.\n     **\n     > Parameters\n     **\n     - callback (function) function to run\n     - thisArg (object) context object for the callback\n     = (object) Set object\n    \\*/\n    setproto.forEach = function (callback, thisArg) {\n        for (var i = 0, ii = this.items.length; i < ii; i++) {\n            if (callback.call(thisArg, this.items[i], i) === false) {\n                return this;\n            }\n        }\n        return this;\n    };\n    for (var method in elproto) if (elproto[has](method)) {\n        setproto[method] = (function (methodname) {\n            return function () {\n                var arg = arguments;\n                return this.forEach(function (el) {\n                    el[methodname][apply](el, arg);\n                });\n            };\n        })(method);\n    }\n    setproto.attr = function (name, value) {\n        if (name && R.is(name, array) && R.is(name[0], \"object\")) {\n            for (var j = 0, jj = name.length; j < jj; j++) {\n                this.items[j].attr(name[j]);\n            }\n        } else {\n            for (var i = 0, ii = this.items.length; i < ii; i++) {\n                this.items[i].attr(name, value);\n            }\n        }\n        return this;\n    };\n    /*\\\n     * Set.clear\n     [ method ]\n     **\n     * Removes all elements from the set\n    \\*/\n    setproto.clear = function () {\n        while (this.length) {\n            this.pop();\n        }\n    };\n    /*\\\n     * Set.splice\n     [ method ]\n     **\n     * Removes given element from the set\n     **\n     > Parameters\n     **\n     - index (number) position of the deletion\n     - count (number) number of element to remove\n     - insertion\u2026 (object) #optional elements to insert\n     = (object) set elements that were deleted\n    \\*/\n    setproto.splice = function (index, count, insertion) {\n        index = index < 0 ? mmax(this.length + index, 0) : index;\n        count = mmax(0, mmin(this.length - index, count));\n        var tail = [],\n            todel = [],\n            args = [],\n            i;\n        for (i = 2; i < arguments.length; i++) {\n            args.push(arguments[i]);\n        }\n        for (i = 0; i < count; i++) {\n            todel.push(this[index + i]);\n        }\n        for (; i < this.length - index; i++) {\n            tail.push(this[index + i]);\n        }\n        var arglen = args.length;\n        for (i = 0; i < arglen + tail.length; i++) {\n            this.items[index + i] = this[index + i] = i < arglen ? args[i] : tail[i - arglen];\n        }\n        i = this.items.length = this.length -= count - arglen;\n        while (this[i]) {\n            delete this[i++];\n        }\n        return new Set(todel);\n    };\n    /*\\\n     * Set.exclude\n     [ method ]\n     **\n     * Removes given element from the set\n     **\n     > Parameters\n     **\n     - element (object) element to remove\n     = (boolean) `true` if object was found & removed from the set\n    \\*/\n    setproto.exclude = function (el) {\n        for (var i = 0, ii = this.length; i < ii; i++) if (this[i] == el) {\n            this.splice(i, 1);\n            return true;\n        }\n    };\n    setproto.animate = function (params, ms, easing, callback) {\n        (R.is(easing, \"function\") || !easing) && (callback = easing || null);\n        var len = this.items.length,\n            i = len,\n            item,\n            set = this,\n            collector;\n        if (!len) {\n            return this;\n        }\n        callback && (collector = function () {\n            !--len && callback.call(set);\n        });\n        easing = R.is(easing, string) ? easing : collector;\n        var anim = R.animation(params, ms, easing, collector);\n        item = this.items[--i].animate(anim);\n        while (i--) {\n            this.items[i] && !this.items[i].removed && this.items[i].animateWith(item, anim, anim);\n            (this.items[i] && !this.items[i].removed) || len--;\n        }\n        return this;\n    };\n    setproto.insertAfter = function (el) {\n        var i = this.items.length;\n        while (i--) {\n            this.items[i].insertAfter(el);\n        }\n        return this;\n    };\n    setproto.getBBox = function () {\n        var x = [],\n            y = [],\n            x2 = [],\n            y2 = [];\n        for (var i = this.items.length; i--;) if (!this.items[i].removed) {\n            var box = this.items[i].getBBox();\n            x.push(box.x);\n            y.push(box.y);\n            x2.push(box.x + box.width);\n            y2.push(box.y + box.height);\n        }\n        x = mmin[apply](0, x);\n        y = mmin[apply](0, y);\n        x2 = mmax[apply](0, x2);\n        y2 = mmax[apply](0, y2);\n        return {\n            x: x,\n            y: y,\n            x2: x2,\n            y2: y2,\n            width: x2 - x,\n            height: y2 - y\n        };\n    };\n    setproto.clone = function (s) {\n        s = this.paper.set();\n        for (var i = 0, ii = this.items.length; i < ii; i++) {\n            s.push(this.items[i].clone());\n        }\n        return s;\n    };\n    setproto.toString = function () {\n        return \"Rapha\\xebl\\u2018s set\";\n    };\n\n    setproto.glow = function(glowConfig) {\n        var ret = this.paper.set();\n        this.forEach(function(shape, index){\n            var g = shape.glow(glowConfig);\n            if(g != null){\n                g.forEach(function(shape2, index2){\n                    ret.push(shape2);\n                });\n            }\n        });\n        return ret;\n    };\n\n\n    /*\\\n     * Set.isPointInside\n     [ method ]\n     **\n     * Determine if given point is inside this set\u2019s elements\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the point\n     - y (number) y coordinate of the point\n     = (boolean) `true` if point is inside any of the set's elements\n     \\*/\n    setproto.isPointInside = function (x, y) {\n        var isPointInside = false;\n        this.forEach(function (el) {\n            if (el.isPointInside(x, y)) {\n                isPointInside = true;\n                return false; // stop loop\n            }\n        });\n        return isPointInside;\n    };\n\n    /*\\\n     * Raphael.registerFont\n     [ method ]\n     **\n     * Adds given font to the registered set of fonts for Rapha\xEBl. Should be used as an internal call from within Cuf\xF3n\u2019s font file.\n     * Returns original parameter, so it could be used with chaining.\n     # <a href=\"http://wiki.github.com/sorccu/cufon/about\">More about Cuf\xF3n and how to convert your font form TTF, OTF, etc to JavaScript file.</a>\n     **\n     > Parameters\n     **\n     - font (object) the font to register\n     = (object) the font you passed in\n     > Usage\n     | Cufon.registerFont(Raphael.registerFont({\u2026}));\n    \\*/\n    R.registerFont = function (font) {\n        if (!font.face) {\n            return font;\n        }\n        this.fonts = this.fonts || {};\n        var fontcopy = {\n                w: font.w,\n                face: {},\n                glyphs: {}\n            },\n            family = font.face[\"font-family\"];\n        for (var prop in font.face) if (font.face[has](prop)) {\n            fontcopy.face[prop] = font.face[prop];\n        }\n        if (this.fonts[family]) {\n            this.fonts[family].push(fontcopy);\n        } else {\n            this.fonts[family] = [fontcopy];\n        }\n        if (!font.svg) {\n            fontcopy.face[\"units-per-em\"] = toInt(font.face[\"units-per-em\"], 10);\n            for (var glyph in font.glyphs) if (font.glyphs[has](glyph)) {\n                var path = font.glyphs[glyph];\n                fontcopy.glyphs[glyph] = {\n                    w: path.w,\n                    k: {},\n                    d: path.d && \"M\" + path.d.replace(/[mlcxtrv]/g, function (command) {\n                            return {l: \"L\", c: \"C\", x: \"z\", t: \"m\", r: \"l\", v: \"c\"}[command] || \"M\";\n                        }) + \"z\"\n                };\n                if (path.k) {\n                    for (var k in path.k) if (path[has](k)) {\n                        fontcopy.glyphs[glyph].k[k] = path.k[k];\n                    }\n                }\n            }\n        }\n        return font;\n    };\n    /*\\\n     * Paper.getFont\n     [ method ]\n     **\n     * Finds font object in the registered fonts by given parameters. You could specify only one word from the font name, like \u201CMyriad\u201D for \u201CMyriad Pro\u201D.\n     **\n     > Parameters\n     **\n     - family (string) font family name or any word from it\n     - weight (string) #optional font weight\n     - style (string) #optional font style\n     - stretch (string) #optional font stretch\n     = (object) the font object\n     > Usage\n     | paper.print(100, 100, \"Test string\", paper.getFont(\"Times\", 800), 30);\n    \\*/\n    paperproto.getFont = function (family, weight, style, stretch) {\n        stretch = stretch || \"normal\";\n        style = style || \"normal\";\n        weight = +weight || {normal: 400, bold: 700, lighter: 300, bolder: 800}[weight] || 400;\n        if (!R.fonts) {\n            return;\n        }\n        var font = R.fonts[family];\n        if (!font) {\n            var name = new RegExp(\"(^|\\\\s)\" + family.replace(/[^\\w\\d\\s+!~.:_-]/g, E) + \"(\\\\s|$)\", \"i\");\n            for (var fontName in R.fonts) if (R.fonts[has](fontName)) {\n                if (name.test(fontName)) {\n                    font = R.fonts[fontName];\n                    break;\n                }\n            }\n        }\n        var thefont;\n        if (font) {\n            for (var i = 0, ii = font.length; i < ii; i++) {\n                thefont = font[i];\n                if (thefont.face[\"font-weight\"] == weight && (thefont.face[\"font-style\"] == style || !thefont.face[\"font-style\"]) && thefont.face[\"font-stretch\"] == stretch) {\n                    break;\n                }\n            }\n        }\n        return thefont;\n    };\n    /*\\\n     * Paper.print\n     [ method ]\n     **\n     * Creates path that represent given text written using given font at given position with given size.\n     * Result of the method is path element that contains whole text as a separate path.\n     **\n     > Parameters\n     **\n     - x (number) x position of the text\n     - y (number) y position of the text\n     - string (string) text to print\n     - font (object) font object, see @Paper.getFont\n     - size (number) #optional size of the font, default is `16`\n     - origin (string) #optional could be `\"baseline\"` or `\"middle\"`, default is `\"middle\"`\n     - letter_spacing (number) #optional number in range `-1..1`, default is `0`\n     - line_spacing (number) #optional number in range `1..3`, default is `1`\n     = (object) resulting path element, which consist of all letters\n     > Usage\n     | var txt = r.print(10, 50, \"print\", r.getFont(\"Museo\"), 30).attr({fill: \"#fff\"});\n    \\*/\n    paperproto.print = function (x, y, string, font, size, origin, letter_spacing, line_spacing) {\n        origin = origin || \"middle\"; // baseline|middle\n        letter_spacing = mmax(mmin(letter_spacing || 0, 1), -1);\n        line_spacing = mmax(mmin(line_spacing || 1, 3), 1);\n        var letters = Str(string)[split](E),\n            shift = 0,\n            notfirst = 0,\n            path = E,\n            scale;\n        R.is(font, \"string\") && (font = this.getFont(font));\n        if (font) {\n            scale = (size || 16) / font.face[\"units-per-em\"];\n            var bb = font.face.bbox[split](separator),\n                top = +bb[0],\n                lineHeight = bb[3] - bb[1],\n                shifty = 0,\n                height = +bb[1] + (origin == \"baseline\" ? lineHeight + (+font.face.descent) : lineHeight / 2);\n            for (var i = 0, ii = letters.length; i < ii; i++) {\n                if (letters[i] == \"\\n\") {\n                    shift = 0;\n                    curr = 0;\n                    notfirst = 0;\n                    shifty += lineHeight * line_spacing;\n                } else {\n                    var prev = notfirst && font.glyphs[letters[i - 1]] || {},\n                        curr = font.glyphs[letters[i]];\n                    shift += notfirst ? (prev.w || font.w) + (prev.k && prev.k[letters[i]] || 0) + (font.w * letter_spacing) : 0;\n                    notfirst = 1;\n                }\n                if (curr && curr.d) {\n                    path += R.transformPath(curr.d, [\"t\", shift * scale, shifty * scale, \"s\", scale, scale, top, height, \"t\", (x - top) / scale, (y - height) / scale]);\n                }\n            }\n        }\n        return this.path(path).attr({\n            fill: \"#000\",\n            stroke: \"none\"\n        });\n    };\n\n    /*\\\n     * Paper.add\n     [ method ]\n     **\n     * Imports elements in JSON array in format `{type: type, <attributes>}`\n     **\n     > Parameters\n     **\n     - json (array)\n     = (object) resulting set of imported elements\n     > Usage\n     | paper.add([\n     |     {\n     |         type: \"circle\",\n     |         cx: 10,\n     |         cy: 10,\n     |         r: 5\n     |     },\n     |     {\n     |         type: \"rect\",\n     |         x: 10,\n     |         y: 10,\n     |         width: 10,\n     |         height: 10,\n     |         fill: \"#fc0\"\n     |     }\n     | ]);\n    \\*/\n    paperproto.add = function (json) {\n        if (R.is(json, \"array\")) {\n            var res = this.set(),\n                i = 0,\n                ii = json.length,\n                j;\n            for (; i < ii; i++) {\n                j = json[i] || {};\n                elements[has](j.type) && res.push(this[j.type]().attr(j));\n            }\n        }\n        return res;\n    };\n\n    /*\\\n     * Raphael.format\n     [ method ]\n     **\n     * Simple format function. Replaces construction of type \u201C`{<number>}`\u201D to the corresponding argument.\n     **\n     > Parameters\n     **\n     - token (string) string to format\n     - \u2026 (string) rest of arguments will be treated as parameters for replacement\n     = (string) formated string\n     > Usage\n     | var x = 10,\n     |     y = 20,\n     |     width = 40,\n     |     height = 50;\n     | // this will draw a rectangular shape equivalent to \"M10,20h40v50h-40z\"\n     | paper.path(Raphael.format(\"M{0},{1}h{2}v{3}h{4}z\", x, y, width, height, -width));\n    \\*/\n    R.format = function (token, params) {\n        var args = R.is(params, array) ? [0][concat](params) : arguments;\n        token && R.is(token, string) && args.length - 1 && (token = token.replace(formatrg, function (str, i) {\n            return args[++i] == null ? E : args[i];\n        }));\n        return token || E;\n    };\n    /*\\\n     * Raphael.fullfill\n     [ method ]\n     **\n     * A little bit more advanced format function than @Raphael.format. Replaces construction of type \u201C`{<name>}`\u201D to the corresponding argument.\n     **\n     > Parameters\n     **\n     - token (string) string to format\n     - json (object) object which properties will be used as a replacement\n     = (string) formated string\n     > Usage\n     | // this will draw a rectangular shape equivalent to \"M10,20h40v50h-40z\"\n     | paper.path(Raphael.fullfill(\"M{x},{y}h{dim.width}v{dim.height}h{dim['negative width']}z\", {\n     |     x: 10,\n     |     y: 20,\n     |     dim: {\n     |         width: 40,\n     |         height: 50,\n     |         \"negative width\": -40\n     |     }\n     | }));\n    \\*/\n    R.fullfill = (function () {\n        var tokenRegex = /\\{([^\\}]+)\\}/g,\n            objNotationRegex = /(?:(?:^|\\.)(.+?)(?=\\[|\\.|$|\\()|\\[('|\")(.+?)\\2\\])(\\(\\))?/g, // matches .xxxxx or [\"xxxxx\"] to run over object properties\n            replacer = function (all, key, obj) {\n                var res = obj;\n                key.replace(objNotationRegex, function (all, name, quote, quotedName, isFunc) {\n                    name = name || quotedName;\n                    if (res) {\n                        if (name in res) {\n                            res = res[name];\n                        }\n                        typeof res == \"function\" && isFunc && (res = res());\n                    }\n                });\n                res = (res == null || res == obj ? all : res) + \"\";\n                return res;\n            };\n        return function (str, obj) {\n            return String(str).replace(tokenRegex, function (all, key) {\n                return replacer(all, key, obj);\n            });\n        };\n    })();\n    /*\\\n     * Raphael.ninja\n     [ method ]\n     **\n     * If you want to leave no trace of Rapha\xEBl (Well, Rapha\xEBl creates only one global variable `Raphael`, but anyway.) You can use `ninja` method.\n     * Beware, that in this case plugins could stop working, because they are depending on global variable existence.\n     **\n     = (object) Raphael object\n     > Usage\n     | (function (local_raphael) {\n     |     var paper = local_raphael(10, 10, 320, 200);\n     |     \u2026\n     | })(Raphael.ninja());\n    \\*/\n    R.ninja = function () {\n        if (oldRaphael.was) {\n            g.win.Raphael = oldRaphael.is;\n        } else {\n            // IE8 raises an error when deleting window property\n            window.Raphael = undefined;\n            try {\n                delete window.Raphael;\n            } catch(e) {}\n        }\n        return R;\n    };\n    /*\\\n     * Raphael.st\n     [ property (object) ]\n     **\n     * You can add your own method to elements and sets. It is wise to add a set method for each element method\n     * you added, so you will be able to call the same method on sets too.\n     **\n     * See also @Raphael.el.\n     > Usage\n     | Raphael.el.red = function () {\n     |     this.attr({fill: \"#f00\"});\n     | };\n     | Raphael.st.red = function () {\n     |     this.forEach(function (el) {\n     |         el.red();\n     |     });\n     | };\n     | // then use it\n     | paper.set(paper.circle(100, 100, 20), paper.circle(110, 100, 20)).red();\n    \\*/\n    R.st = setproto;\n\n    eve.on(\"raphael.DOMload\", function () {\n        loaded = true;\n    });\n\n    // Firefox <3.6 fix: http://webreflection.blogspot.com/2009/11/195-chars-to-help-lazy-loading.html\n    (function (doc, loaded, f) {\n        if (doc.readyState == null && doc.addEventListener){\n            doc.addEventListener(loaded, f = function () {\n                doc.removeEventListener(loaded, f, false);\n                doc.readyState = \"complete\";\n            }, false);\n            doc.readyState = \"loading\";\n        }\n        function isLoaded() {\n            (/in/).test(doc.readyState) ? setTimeout(isLoaded, 9) : R.eve(\"raphael.DOMload\");\n        }\n        isLoaded();\n    })(document, \"DOMContentLoaded\");\n\n    return R;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9kZXYvcmFwaGFlbC5jb3JlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vUmFwaGFlbC8uL2Rldi9yYXBoYWVsLmNvcmUuanM/OTRkOSJdLCJzb3VyY2VzQ29udGVudCI6WyJkZWZpbmUoW1wiZXZlXCJdLCBmdW5jdGlvbihldmUpIHtcblxuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBDcmVhdGVzIGEgY2FudmFzIG9iamVjdCBvbiB3aGljaCB0byBkcmF3LlxuICAgICAqIFlvdSBtdXN0IGRvIHRoaXMgZmlyc3QsIGFzIGFsbCBmdXR1cmUgY2FsbHMgdG8gZHJhd2luZyBtZXRob2RzXG4gICAgICogZnJvbSB0aGlzIGluc3RhbmNlIHdpbGwgYmUgYm91bmQgdG8gdGhpcyBjYW52YXMuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIGNvbnRhaW5lciAoSFRNTEVsZW1lbnR8c3RyaW5nKSBET00gZWxlbWVudCBvciBpdHMgSUQgd2hpY2ggaXMgZ29pbmcgdG8gYmUgYSBwYXJlbnQgZm9yIGRyYXdpbmcgc3VyZmFjZVxuICAgICAtIHdpZHRoIChudW1iZXIpXG4gICAgIC0gaGVpZ2h0IChudW1iZXIpXG4gICAgIC0gY2FsbGJhY2sgKGZ1bmN0aW9uKSAjb3B0aW9uYWwgY2FsbGJhY2sgZnVuY3Rpb24gd2hpY2ggaXMgZ29pbmcgdG8gYmUgZXhlY3V0ZWQgaW4gdGhlIGNvbnRleHQgb2YgbmV3bHkgY3JlYXRlZCBwYXBlclxuICAgICAqIG9yXG4gICAgIC0geCAobnVtYmVyKVxuICAgICAtIHkgKG51bWJlcilcbiAgICAgLSB3aWR0aCAobnVtYmVyKVxuICAgICAtIGhlaWdodCAobnVtYmVyKVxuICAgICAtIGNhbGxiYWNrIChmdW5jdGlvbikgI29wdGlvbmFsIGNhbGxiYWNrIGZ1bmN0aW9uIHdoaWNoIGlzIGdvaW5nIHRvIGJlIGV4ZWN1dGVkIGluIHRoZSBjb250ZXh0IG9mIG5ld2x5IGNyZWF0ZWQgcGFwZXJcbiAgICAgKiBvclxuICAgICAtIGFsbCAoYXJyYXkpIChmaXJzdCAzIG9yIDQgZWxlbWVudHMgaW4gdGhlIGFycmF5IGFyZSBlcXVhbCB0byBbY29udGFpbmVySUQsIHdpZHRoLCBoZWlnaHRdIG9yIFt4LCB5LCB3aWR0aCwgaGVpZ2h0XS4gVGhlIHJlc3QgYXJlIGVsZW1lbnQgZGVzY3JpcHRpb25zIGluIGZvcm1hdCB7dHlwZTogdHlwZSwgPGF0dHJpYnV0ZXM+fSkuIFNlZSBAUGFwZXIuYWRkLlxuICAgICAtIGNhbGxiYWNrIChmdW5jdGlvbikgI29wdGlvbmFsIGNhbGxiYWNrIGZ1bmN0aW9uIHdoaWNoIGlzIGdvaW5nIHRvIGJlIGV4ZWN1dGVkIGluIHRoZSBjb250ZXh0IG9mIG5ld2x5IGNyZWF0ZWQgcGFwZXJcbiAgICAgKiBvclxuICAgICAtIG9uUmVhZHlDYWxsYmFjayAoZnVuY3Rpb24pIGZ1bmN0aW9uIHRoYXQgaXMgZ29pbmcgdG8gYmUgY2FsbGVkIG9uIERPTSByZWFkeSBldmVudC4gWW91IGNhbiBhbHNvIHN1YnNjcmliZSB0byB0aGlzIGV2ZW50IHZpYSBFdmXigJlzIOKAnERPTUxvYWTigJ0gZXZlbnQuIEluIHRoaXMgY2FzZSBtZXRob2QgcmV0dXJucyBgdW5kZWZpbmVkYC5cbiAgICAgPSAob2JqZWN0KSBAUGFwZXJcbiAgICAgPiBVc2FnZVxuICAgICB8IC8vIEVhY2ggb2YgdGhlIGZvbGxvd2luZyBleGFtcGxlcyBjcmVhdGUgYSBjYW52YXNcbiAgICAgfCAvLyB0aGF0IGlzIDMyMHB4IHdpZGUgYnkgMjAwcHggaGlnaC5cbiAgICAgfCAvLyBDYW52YXMgaXMgY3JlYXRlZCBhdCB0aGUgdmlld3BvcnTigJlzIDEwLDUwIGNvb3JkaW5hdGUuXG4gICAgIHwgdmFyIHBhcGVyID0gUmFwaGFlbCgxMCwgNTAsIDMyMCwgMjAwKTtcbiAgICAgfCAvLyBDYW52YXMgaXMgY3JlYXRlZCBhdCB0aGUgdG9wIGxlZnQgY29ybmVyIG9mIHRoZSAjbm90ZXBhZCBlbGVtZW50XG4gICAgIHwgLy8gKG9yIGl0cyB0b3AgcmlnaHQgY29ybmVyIGluIGRpcj1cInJ0bFwiIGVsZW1lbnRzKVxuICAgICB8IHZhciBwYXBlciA9IFJhcGhhZWwoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJub3RlcGFkXCIpLCAzMjAsIDIwMCk7XG4gICAgIHwgLy8gU2FtZSBhcyBhYm92ZVxuICAgICB8IHZhciBwYXBlciA9IFJhcGhhZWwoXCJub3RlcGFkXCIsIDMyMCwgMjAwKTtcbiAgICAgfCAvLyBJbWFnZSBkdW1wXG4gICAgIHwgdmFyIHNldCA9IFJhcGhhZWwoW1wibm90ZXBhZFwiLCAzMjAsIDIwMCwge1xuICAgICB8ICAgICB0eXBlOiBcInJlY3RcIixcbiAgICAgfCAgICAgeDogMTAsXG4gICAgIHwgICAgIHk6IDEwLFxuICAgICB8ICAgICB3aWR0aDogMjUsXG4gICAgIHwgICAgIGhlaWdodDogMjUsXG4gICAgIHwgICAgIHN0cm9rZTogXCIjZjAwXCJcbiAgICAgfCB9LCB7XG4gICAgIHwgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICB8ICAgICB4OiAzMCxcbiAgICAgfCAgICAgeTogNDAsXG4gICAgIHwgICAgIHRleHQ6IFwiRHVtcFwiXG4gICAgIHwgfV0pO1xuICAgIFxcKi9cbiAgICBmdW5jdGlvbiBSKGZpcnN0KSB7XG4gICAgICAgIGlmIChSLmlzKGZpcnN0LCBcImZ1bmN0aW9uXCIpKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9hZGVkID8gZmlyc3QoKSA6IGV2ZS5vbihcInJhcGhhZWwuRE9NbG9hZFwiLCBmaXJzdCk7XG4gICAgICAgIH0gZWxzZSBpZiAoUi5pcyhmaXJzdCwgYXJyYXkpKSB7XG4gICAgICAgICAgICByZXR1cm4gUi5fZW5naW5lLmNyZWF0ZVthcHBseV0oUiwgZmlyc3Quc3BsaWNlKDAsIDMgKyBSLmlzKGZpcnN0WzBdLCBudSkpKS5hZGQoZmlyc3QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuICAgICAgICAgICAgaWYgKFIuaXMoYXJnc1thcmdzLmxlbmd0aCAtIDFdLCBcImZ1bmN0aW9uXCIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGYgPSBhcmdzLnBvcCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBsb2FkZWQgPyBmLmNhbGwoUi5fZW5naW5lLmNyZWF0ZVthcHBseV0oUiwgYXJncykpIDogZXZlLm9uKFwicmFwaGFlbC5ET01sb2FkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZi5jYWxsKFIuX2VuZ2luZS5jcmVhdGVbYXBwbHldKFIsIGFyZ3MpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFIuX2VuZ2luZS5jcmVhdGVbYXBwbHldKFIsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgUi52ZXJzaW9uID0gXCIyLjIuMFwiO1xuICAgIFIuZXZlID0gZXZlO1xuICAgIHZhciBsb2FkZWQsXG4gICAgICAgIHNlcGFyYXRvciA9IC9bLCBdKy8sXG4gICAgICAgIGVsZW1lbnRzID0ge2NpcmNsZTogMSwgcmVjdDogMSwgcGF0aDogMSwgZWxsaXBzZTogMSwgdGV4dDogMSwgaW1hZ2U6IDF9LFxuICAgICAgICBmb3JtYXRyZyA9IC9cXHsoXFxkKylcXH0vZyxcbiAgICAgICAgcHJvdG8gPSBcInByb3RvdHlwZVwiLFxuICAgICAgICBoYXMgPSBcImhhc093blByb3BlcnR5XCIsXG4gICAgICAgIGcgPSB7XG4gICAgICAgICAgICBkb2M6IGRvY3VtZW50LFxuICAgICAgICAgICAgd2luOiB3aW5kb3dcbiAgICAgICAgfSxcbiAgICAgICAgb2xkUmFwaGFlbCA9IHtcbiAgICAgICAgICAgIHdhczogT2JqZWN0LnByb3RvdHlwZVtoYXNdLmNhbGwoZy53aW4sIFwiUmFwaGFlbFwiKSxcbiAgICAgICAgICAgIGlzOiBnLndpbi5SYXBoYWVsXG4gICAgICAgIH0sXG4gICAgICAgIFBhcGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLypcXFxuICAgICAgICAgICAgICogUGFwZXIuY2FcbiAgICAgICAgICAgICBbIHByb3BlcnR5IChvYmplY3QpIF1cbiAgICAgICAgICAgICAqKlxuICAgICAgICAgICAgICogU2hvcnRjdXQgZm9yIEBQYXBlci5jdXN0b21BdHRyaWJ1dGVzXG4gICAgICAgICAgICBcXCovXG4gICAgICAgICAgICAvKlxcXG4gICAgICAgICAgICAgKiBQYXBlci5jdXN0b21BdHRyaWJ1dGVzXG4gICAgICAgICAgICAgWyBwcm9wZXJ0eSAob2JqZWN0KSBdXG4gICAgICAgICAgICAgKipcbiAgICAgICAgICAgICAqIElmIHlvdSBoYXZlIGEgc2V0IG9mIGF0dHJpYnV0ZXMgdGhhdCB5b3Ugd291bGQgbGlrZSB0byByZXByZXNlbnRcbiAgICAgICAgICAgICAqIGFzIGEgZnVuY3Rpb24gb2Ygc29tZSBudW1iZXIgeW91IGNhbiBkbyBpdCBlYXNpbHkgd2l0aCBjdXN0b20gYXR0cmlidXRlczpcbiAgICAgICAgICAgICA+IFVzYWdlXG4gICAgICAgICAgICAgfCBwYXBlci5jdXN0b21BdHRyaWJ1dGVzLmh1ZSA9IGZ1bmN0aW9uIChudW0pIHtcbiAgICAgICAgICAgICB8ICAgICBudW0gPSBudW0gJSAxO1xuICAgICAgICAgICAgIHwgICAgIHJldHVybiB7ZmlsbDogXCJoc2IoXCIgKyBudW0gKyBcIiwgMC43NSwgMSlcIn07XG4gICAgICAgICAgICAgfCB9O1xuICAgICAgICAgICAgIHwgLy8gQ3VzdG9tIGF0dHJpYnV0ZSDigJxodWXigJ0gd2lsbCBjaGFuZ2UgZmlsbFxuICAgICAgICAgICAgIHwgLy8gdG8gYmUgZ2l2ZW4gaHVlIHdpdGggZml4ZWQgc2F0dXJhdGlvbiBhbmQgYnJpZ2h0bmVzcy5cbiAgICAgICAgICAgICB8IC8vIE5vdyB5b3UgY2FuIHVzZSBpdCBsaWtlIHRoaXM6XG4gICAgICAgICAgICAgfCB2YXIgYyA9IHBhcGVyLmNpcmNsZSgxMCwgMTAsIDEwKS5hdHRyKHtodWU6IC40NX0pO1xuICAgICAgICAgICAgIHwgLy8gb3IgZXZlbiBsaWtlIHRoaXM6XG4gICAgICAgICAgICAgfCBjLmFuaW1hdGUoe2h1ZTogMX0sIDFlMyk7XG4gICAgICAgICAgICAgfFxuICAgICAgICAgICAgIHwgLy8gWW91IGNvdWxkIGFsc28gY3JlYXRlIGN1c3RvbSBhdHRyaWJ1dGVcbiAgICAgICAgICAgICB8IC8vIHdpdGggbXVsdGlwbGUgcGFyYW1ldGVyczpcbiAgICAgICAgICAgICB8IHBhcGVyLmN1c3RvbUF0dHJpYnV0ZXMuaHNiID0gZnVuY3Rpb24gKGgsIHMsIGIpIHtcbiAgICAgICAgICAgICB8ICAgICByZXR1cm4ge2ZpbGw6IFwiaHNiKFwiICsgW2gsIHMsIGJdLmpvaW4oXCIsXCIpICsgXCIpXCJ9O1xuICAgICAgICAgICAgIHwgfTtcbiAgICAgICAgICAgICB8IGMuYXR0cih7aHNiOiBcIjAuNSAuOCAxXCJ9KTtcbiAgICAgICAgICAgICB8IGMuYW5pbWF0ZSh7aHNiOiBbMSwgMCwgMC41XX0sIDFlMyk7XG4gICAgICAgICAgICBcXCovXG4gICAgICAgICAgICB0aGlzLmNhID0gdGhpcy5jdXN0b21BdHRyaWJ1dGVzID0ge307XG4gICAgICAgIH0sXG4gICAgICAgIHBhcGVycHJvdG8sXG4gICAgICAgIGFwcGVuZENoaWxkID0gXCJhcHBlbmRDaGlsZFwiLFxuICAgICAgICBhcHBseSA9IFwiYXBwbHlcIixcbiAgICAgICAgY29uY2F0ID0gXCJjb25jYXRcIixcbiAgICAgICAgc3VwcG9ydHNUb3VjaCA9ICgnb250b3VjaHN0YXJ0JyBpbiBnLndpbikgfHwgZy53aW4uRG9jdW1lbnRUb3VjaCAmJiBnLmRvYyBpbnN0YW5jZW9mIERvY3VtZW50VG91Y2gsIC8vdGFrZW4gZnJvbSBNb2Rlcm5penIgdG91Y2ggdGVzdFxuICAgICAgICBFID0gXCJcIixcbiAgICAgICAgUyA9IFwiIFwiLFxuICAgICAgICBTdHIgPSBTdHJpbmcsXG4gICAgICAgIHNwbGl0ID0gXCJzcGxpdFwiLFxuICAgICAgICBldmVudHMgPSBcImNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZW1vdmUgbW91c2VvdXQgbW91c2VvdmVyIG1vdXNldXAgdG91Y2hzdGFydCB0b3VjaG1vdmUgdG91Y2hlbmQgdG91Y2hjYW5jZWxcIltzcGxpdF0oUyksXG4gICAgICAgIHRvdWNoTWFwID0ge1xuICAgICAgICAgICAgbW91c2Vkb3duOiBcInRvdWNoc3RhcnRcIixcbiAgICAgICAgICAgIG1vdXNlbW92ZTogXCJ0b3VjaG1vdmVcIixcbiAgICAgICAgICAgIG1vdXNldXA6IFwidG91Y2hlbmRcIlxuICAgICAgICB9LFxuICAgICAgICBsb3dlckNhc2UgPSBTdHIucHJvdG90eXBlLnRvTG93ZXJDYXNlLFxuICAgICAgICBtYXRoID0gTWF0aCxcbiAgICAgICAgbW1heCA9IG1hdGgubWF4LFxuICAgICAgICBtbWluID0gbWF0aC5taW4sXG4gICAgICAgIGFicyA9IG1hdGguYWJzLFxuICAgICAgICBwb3cgPSBtYXRoLnBvdyxcbiAgICAgICAgUEkgPSBtYXRoLlBJLFxuICAgICAgICBudSA9IFwibnVtYmVyXCIsXG4gICAgICAgIHN0cmluZyA9IFwic3RyaW5nXCIsXG4gICAgICAgIGFycmF5ID0gXCJhcnJheVwiLFxuICAgICAgICB0b1N0cmluZyA9IFwidG9TdHJpbmdcIixcbiAgICAgICAgZmlsbFN0cmluZyA9IFwiZmlsbFwiLFxuICAgICAgICBvYmplY3RUb1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsXG4gICAgICAgIHBhcGVyID0ge30sXG4gICAgICAgIHB1c2ggPSBcInB1c2hcIixcbiAgICAgICAgSVNVUkwgPSBSLl9JU1VSTCA9IC9edXJsXFwoWydcIl0/KC4rPylbJ1wiXT9cXCkkL2ksXG4gICAgICAgIGNvbG91clJlZ0V4cCA9IC9eXFxzKigoI1thLWZcXGRdezZ9KXwoI1thLWZcXGRdezN9KXxyZ2JhP1xcKFxccyooW1xcZFxcLl0rJT9cXHMqLFxccypbXFxkXFwuXSslP1xccyosXFxzKltcXGRcXC5dKyU/KD86XFxzKixcXHMqW1xcZFxcLl0rJT8pPylcXHMqXFwpfGhzYmE/XFwoXFxzKihbXFxkXFwuXSsoPzpkZWd8XFx4YjB8JSk/XFxzKixcXHMqW1xcZFxcLl0rJT9cXHMqLFxccypbXFxkXFwuXSsoPzolP1xccyosXFxzKltcXGRcXC5dKyk/KSU/XFxzKlxcKXxoc2xhP1xcKFxccyooW1xcZFxcLl0rKD86ZGVnfFxceGIwfCUpP1xccyosXFxzKltcXGRcXC5dKyU/XFxzKixcXHMqW1xcZFxcLl0rKD86JT9cXHMqLFxccypbXFxkXFwuXSspPyklP1xccypcXCkpXFxzKiQvaSxcbiAgICAgICAgaXNuYW4gPSB7XCJOYU5cIjogMSwgXCJJbmZpbml0eVwiOiAxLCBcIi1JbmZpbml0eVwiOiAxfSxcbiAgICAgICAgYmV6aWVycmcgPSAvXig/OmN1YmljLSk/YmV6aWVyXFwoKFteLF0rKSwoW14sXSspLChbXixdKyksKFteXFwpXSspXFwpLyxcbiAgICAgICAgcm91bmQgPSBtYXRoLnJvdW5kLFxuICAgICAgICBzZXRBdHRyaWJ1dGUgPSBcInNldEF0dHJpYnV0ZVwiLFxuICAgICAgICB0b0Zsb2F0ID0gcGFyc2VGbG9hdCxcbiAgICAgICAgdG9JbnQgPSBwYXJzZUludCxcbiAgICAgICAgdXBwZXJDYXNlID0gU3RyLnByb3RvdHlwZS50b1VwcGVyQ2FzZSxcbiAgICAgICAgYXZhaWxhYmxlQXR0cnMgPSBSLl9hdmFpbGFibGVBdHRycyA9IHtcbiAgICAgICAgICAgIFwiYXJyb3ctZW5kXCI6IFwibm9uZVwiLFxuICAgICAgICAgICAgXCJhcnJvdy1zdGFydFwiOiBcIm5vbmVcIixcbiAgICAgICAgICAgIGJsdXI6IDAsXG4gICAgICAgICAgICBcImNsaXAtcmVjdFwiOiBcIjAgMCAxZTkgMWU5XCIsXG4gICAgICAgICAgICBjdXJzb3I6IFwiZGVmYXVsdFwiLFxuICAgICAgICAgICAgY3g6IDAsXG4gICAgICAgICAgICBjeTogMCxcbiAgICAgICAgICAgIGZpbGw6IFwiI2ZmZlwiLFxuICAgICAgICAgICAgXCJmaWxsLW9wYWNpdHlcIjogMSxcbiAgICAgICAgICAgIGZvbnQ6ICcxMHB4IFwiQXJpYWxcIicsXG4gICAgICAgICAgICBcImZvbnQtZmFtaWx5XCI6ICdcIkFyaWFsXCInLFxuICAgICAgICAgICAgXCJmb250LXNpemVcIjogXCIxMFwiLFxuICAgICAgICAgICAgXCJmb250LXN0eWxlXCI6IFwibm9ybWFsXCIsXG4gICAgICAgICAgICBcImZvbnQtd2VpZ2h0XCI6IDQwMCxcbiAgICAgICAgICAgIGdyYWRpZW50OiAwLFxuICAgICAgICAgICAgaGVpZ2h0OiAwLFxuICAgICAgICAgICAgaHJlZjogXCJodHRwOi8vcmFwaGFlbGpzLmNvbS9cIixcbiAgICAgICAgICAgIFwibGV0dGVyLXNwYWNpbmdcIjogMCxcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICBwYXRoOiBcIk0wLDBcIixcbiAgICAgICAgICAgIHI6IDAsXG4gICAgICAgICAgICByeDogMCxcbiAgICAgICAgICAgIHJ5OiAwLFxuICAgICAgICAgICAgc3JjOiBcIlwiLFxuICAgICAgICAgICAgc3Ryb2tlOiBcIiMwMDBcIixcbiAgICAgICAgICAgIFwic3Ryb2tlLWRhc2hhcnJheVwiOiBcIlwiLFxuICAgICAgICAgICAgXCJzdHJva2UtbGluZWNhcFwiOiBcImJ1dHRcIixcbiAgICAgICAgICAgIFwic3Ryb2tlLWxpbmVqb2luXCI6IFwiYnV0dFwiLFxuICAgICAgICAgICAgXCJzdHJva2UtbWl0ZXJsaW1pdFwiOiAwLFxuICAgICAgICAgICAgXCJzdHJva2Utb3BhY2l0eVwiOiAxLFxuICAgICAgICAgICAgXCJzdHJva2Utd2lkdGhcIjogMSxcbiAgICAgICAgICAgIHRhcmdldDogXCJfYmxhbmtcIixcbiAgICAgICAgICAgIFwidGV4dC1hbmNob3JcIjogXCJtaWRkbGVcIixcbiAgICAgICAgICAgIHRpdGxlOiBcIlJhcGhhZWxcIixcbiAgICAgICAgICAgIHRyYW5zZm9ybTogXCJcIixcbiAgICAgICAgICAgIHdpZHRoOiAwLFxuICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICBcImNsYXNzXCI6IFwiXCJcbiAgICAgICAgfSxcbiAgICAgICAgYXZhaWxhYmxlQW5pbUF0dHJzID0gUi5fYXZhaWxhYmxlQW5pbUF0dHJzID0ge1xuICAgICAgICAgICAgYmx1cjogbnUsXG4gICAgICAgICAgICBcImNsaXAtcmVjdFwiOiBcImNzdlwiLFxuICAgICAgICAgICAgY3g6IG51LFxuICAgICAgICAgICAgY3k6IG51LFxuICAgICAgICAgICAgZmlsbDogXCJjb2xvdXJcIixcbiAgICAgICAgICAgIFwiZmlsbC1vcGFjaXR5XCI6IG51LFxuICAgICAgICAgICAgXCJmb250LXNpemVcIjogbnUsXG4gICAgICAgICAgICBoZWlnaHQ6IG51LFxuICAgICAgICAgICAgb3BhY2l0eTogbnUsXG4gICAgICAgICAgICBwYXRoOiBcInBhdGhcIixcbiAgICAgICAgICAgIHI6IG51LFxuICAgICAgICAgICAgcng6IG51LFxuICAgICAgICAgICAgcnk6IG51LFxuICAgICAgICAgICAgc3Ryb2tlOiBcImNvbG91clwiLFxuICAgICAgICAgICAgXCJzdHJva2Utb3BhY2l0eVwiOiBudSxcbiAgICAgICAgICAgIFwic3Ryb2tlLXdpZHRoXCI6IG51LFxuICAgICAgICAgICAgdHJhbnNmb3JtOiBcInRyYW5zZm9ybVwiLFxuICAgICAgICAgICAgd2lkdGg6IG51LFxuICAgICAgICAgICAgeDogbnUsXG4gICAgICAgICAgICB5OiBudVxuICAgICAgICB9LFxuICAgICAgICB3aGl0ZXNwYWNlID0gL1tcXHgwOVxceDBhXFx4MGJcXHgwY1xceDBkXFx4MjBcXHhhMFxcdTE2ODBcXHUxODBlXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwM1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMGFcXHUyMDJmXFx1MjA1ZlxcdTMwMDBcXHUyMDI4XFx1MjAyOV0vZyxcbiAgICAgICAgY29tbWFTcGFjZXMgPSAvW1xceDA5XFx4MGFcXHgwYlxceDBjXFx4MGRcXHgyMFxceGEwXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwYVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdTIwMjhcXHUyMDI5XSosW1xceDA5XFx4MGFcXHgwYlxceDBjXFx4MGRcXHgyMFxceGEwXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwYVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdTIwMjhcXHUyMDI5XSovLFxuICAgICAgICBoc3JnID0ge2hzOiAxLCByZzogMX0sXG4gICAgICAgIHAycyA9IC8sPyhbYWNobG1xcnN0dnh6XSksPy9naSxcbiAgICAgICAgcGF0aENvbW1hbmQgPSAvKFthY2hsbXJxc3R2el0pW1xceDA5XFx4MGFcXHgwYlxceDBjXFx4MGRcXHgyMFxceGEwXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwYVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdTIwMjhcXHUyMDI5LF0qKCgtP1xcZCpcXC4/XFxkKig/OmVbXFwtK10/XFxkKyk/W1xceDA5XFx4MGFcXHgwYlxceDBjXFx4MGRcXHgyMFxceGEwXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwYVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdTIwMjhcXHUyMDI5XSosP1tcXHgwOVxceDBhXFx4MGJcXHgwY1xceDBkXFx4MjBcXHhhMFxcdTE2ODBcXHUxODBlXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwM1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMGFcXHUyMDJmXFx1MjA1ZlxcdTMwMDBcXHUyMDI4XFx1MjAyOV0qKSspL2lnLFxuICAgICAgICB0Q29tbWFuZCA9IC8oW3JzdG1dKVtcXHgwOVxceDBhXFx4MGJcXHgwY1xceDBkXFx4MjBcXHhhMFxcdTE2ODBcXHUxODBlXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwM1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMGFcXHUyMDJmXFx1MjA1ZlxcdTMwMDBcXHUyMDI4XFx1MjAyOSxdKigoLT9cXGQqXFwuP1xcZCooPzplW1xcLStdP1xcZCspP1tcXHgwOVxceDBhXFx4MGJcXHgwY1xceDBkXFx4MjBcXHhhMFxcdTE2ODBcXHUxODBlXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwM1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMGFcXHUyMDJmXFx1MjA1ZlxcdTMwMDBcXHUyMDI4XFx1MjAyOV0qLD9bXFx4MDlcXHgwYVxceDBiXFx4MGNcXHgwZFxceDIwXFx4YTBcXHUxNjgwXFx1MTgwZVxcdTIwMDBcXHUyMDAxXFx1MjAwMlxcdTIwMDNcXHUyMDA0XFx1MjAwNVxcdTIwMDZcXHUyMDA3XFx1MjAwOFxcdTIwMDlcXHUyMDBhXFx1MjAyZlxcdTIwNWZcXHUzMDAwXFx1MjAyOFxcdTIwMjldKikrKS9pZyxcbiAgICAgICAgcGF0aFZhbHVlcyA9IC8oLT9cXGQqXFwuP1xcZCooPzplW1xcLStdP1xcZCspPylbXFx4MDlcXHgwYVxceDBiXFx4MGNcXHgwZFxceDIwXFx4YTBcXHUxNjgwXFx1MTgwZVxcdTIwMDBcXHUyMDAxXFx1MjAwMlxcdTIwMDNcXHUyMDA0XFx1MjAwNVxcdTIwMDZcXHUyMDA3XFx1MjAwOFxcdTIwMDlcXHUyMDBhXFx1MjAyZlxcdTIwNWZcXHUzMDAwXFx1MjAyOFxcdTIwMjldKiw/W1xceDA5XFx4MGFcXHgwYlxceDBjXFx4MGRcXHgyMFxceGEwXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwYVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdTIwMjhcXHUyMDI5XSovaWcsXG4gICAgICAgIHJhZGlhbF9ncmFkaWVudCA9IFIuX3JhZGlhbF9ncmFkaWVudCA9IC9ecig/OlxcKChbXixdKz8pW1xceDA5XFx4MGFcXHgwYlxceDBjXFx4MGRcXHgyMFxceGEwXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwYVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdTIwMjhcXHUyMDI5XSosW1xceDA5XFx4MGFcXHgwYlxceDBjXFx4MGRcXHgyMFxceGEwXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwYVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdTIwMjhcXHUyMDI5XSooW15cXCldKz8pXFwpKT8vLFxuICAgICAgICBlbGRhdGEgPSB7fSxcbiAgICAgICAgc29ydEJ5S2V5ID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBhLmtleSAtIGIua2V5O1xuICAgICAgICB9LFxuICAgICAgICBzb3J0QnlOdW1iZXIgPSBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIHRvRmxvYXQoYSkgLSB0b0Zsb2F0KGIpO1xuICAgICAgICB9LFxuICAgICAgICBmdW4gPSBmdW5jdGlvbiAoKSB7fSxcbiAgICAgICAgcGlwZSA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICByZXR1cm4geDtcbiAgICAgICAgfSxcbiAgICAgICAgcmVjdFBhdGggPSBSLl9yZWN0UGF0aCA9IGZ1bmN0aW9uICh4LCB5LCB3LCBoLCByKSB7XG4gICAgICAgICAgICBpZiAocikge1xuICAgICAgICAgICAgICAgIHJldHVybiBbW1wiTVwiLCB4ICsgciwgeV0sIFtcImxcIiwgdyAtIHIgKiAyLCAwXSwgW1wiYVwiLCByLCByLCAwLCAwLCAxLCByLCByXSwgW1wibFwiLCAwLCBoIC0gciAqIDJdLCBbXCJhXCIsIHIsIHIsIDAsIDAsIDEsIC1yLCByXSwgW1wibFwiLCByICogMiAtIHcsIDBdLCBbXCJhXCIsIHIsIHIsIDAsIDAsIDEsIC1yLCAtcl0sIFtcImxcIiwgMCwgciAqIDIgLSBoXSwgW1wiYVwiLCByLCByLCAwLCAwLCAxLCByLCAtcl0sIFtcInpcIl1dO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFtbXCJNXCIsIHgsIHldLCBbXCJsXCIsIHcsIDBdLCBbXCJsXCIsIDAsIGhdLCBbXCJsXCIsIC13LCAwXSwgW1wielwiXV07XG4gICAgICAgIH0sXG4gICAgICAgIGVsbGlwc2VQYXRoID0gZnVuY3Rpb24gKHgsIHksIHJ4LCByeSkge1xuICAgICAgICAgICAgaWYgKHJ5ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByeSA9IHJ4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFtbXCJNXCIsIHgsIHldLCBbXCJtXCIsIDAsIC1yeV0sIFtcImFcIiwgcngsIHJ5LCAwLCAxLCAxLCAwLCAyICogcnldLCBbXCJhXCIsIHJ4LCByeSwgMCwgMSwgMSwgMCwgLTIgKiByeV0sIFtcInpcIl1dO1xuICAgICAgICB9LFxuICAgICAgICBnZXRQYXRoID0gUi5fZ2V0UGF0aCA9IHtcbiAgICAgICAgICAgIHBhdGg6IGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbC5hdHRyKFwicGF0aFwiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjaXJjbGU6IGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgIHZhciBhID0gZWwuYXR0cnM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsbGlwc2VQYXRoKGEuY3gsIGEuY3ksIGEucik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZWxsaXBzZTogZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgdmFyIGEgPSBlbC5hdHRycztcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxsaXBzZVBhdGgoYS5jeCwgYS5jeSwgYS5yeCwgYS5yeSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVjdDogZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgdmFyIGEgPSBlbC5hdHRycztcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVjdFBhdGgoYS54LCBhLnksIGEud2lkdGgsIGEuaGVpZ2h0LCBhLnIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGltYWdlOiBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICB2YXIgYSA9IGVsLmF0dHJzO1xuICAgICAgICAgICAgICAgIHJldHVybiByZWN0UGF0aChhLngsIGEueSwgYS53aWR0aCwgYS5oZWlnaHQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRleHQ6IGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgIHZhciBiYm94ID0gZWwuX2dldEJCb3goKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVjdFBhdGgoYmJveC54LCBiYm94LnksIGJib3gud2lkdGgsIGJib3guaGVpZ2h0KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQgOiBmdW5jdGlvbihlbCkge1xuICAgICAgICAgICAgICAgIHZhciBiYm94ID0gZWwuX2dldEJCb3goKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVjdFBhdGgoYmJveC54LCBiYm94LnksIGJib3gud2lkdGgsIGJib3guaGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgLypcXFxuICAgICAgICAgKiBSYXBoYWVsLm1hcFBhdGhcbiAgICAgICAgIFsgbWV0aG9kIF1cbiAgICAgICAgICoqXG4gICAgICAgICAqIFRyYW5zZm9ybSB0aGUgcGF0aCBzdHJpbmcgd2l0aCBnaXZlbiBtYXRyaXguXG4gICAgICAgICA+IFBhcmFtZXRlcnNcbiAgICAgICAgIC0gcGF0aCAoc3RyaW5nKSBwYXRoIHN0cmluZ1xuICAgICAgICAgLSBtYXRyaXggKG9iamVjdCkgc2VlIEBNYXRyaXhcbiAgICAgICAgID0gKHN0cmluZykgdHJhbnNmb3JtZWQgcGF0aCBzdHJpbmdcbiAgICAgICAgXFwqL1xuICAgICAgICBtYXBQYXRoID0gUi5tYXBQYXRoID0gZnVuY3Rpb24gKHBhdGgsIG1hdHJpeCkge1xuICAgICAgICAgICAgaWYgKCFtYXRyaXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGF0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB4LCB5LCBpLCBqLCBpaSwgamosIHBhdGhpO1xuICAgICAgICAgICAgcGF0aCA9IHBhdGgyY3VydmUocGF0aCk7XG4gICAgICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IHBhdGgubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIHBhdGhpID0gcGF0aFtpXTtcbiAgICAgICAgICAgICAgICBmb3IgKGogPSAxLCBqaiA9IHBhdGhpLmxlbmd0aDsgaiA8IGpqOyBqICs9IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgeCA9IG1hdHJpeC54KHBhdGhpW2pdLCBwYXRoaVtqICsgMV0pO1xuICAgICAgICAgICAgICAgICAgICB5ID0gbWF0cml4LnkocGF0aGlbal0sIHBhdGhpW2ogKyAxXSk7XG4gICAgICAgICAgICAgICAgICAgIHBhdGhpW2pdID0geDtcbiAgICAgICAgICAgICAgICAgICAgcGF0aGlbaiArIDFdID0geTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcGF0aDtcbiAgICAgICAgfTtcblxuICAgIFIuX2cgPSBnO1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLnR5cGVcbiAgICAgWyBwcm9wZXJ0eSAoc3RyaW5nKSBdXG4gICAgICoqXG4gICAgICogQ2FuIGJlIOKAnFNWR+KAnSwg4oCcVk1M4oCdIG9yIGVtcHR5LCBkZXBlbmRpbmcgb24gYnJvd3NlciBzdXBwb3J0LlxuICAgIFxcKi9cbiAgICBSLnR5cGUgPSAoZy53aW4uU1ZHQW5nbGUgfHwgZy5kb2MuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZShcImh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjQmFzaWNTdHJ1Y3R1cmVcIiwgXCIxLjFcIikgPyBcIlNWR1wiIDogXCJWTUxcIik7XG4gICAgaWYgKFIudHlwZSA9PSBcIlZNTFwiKSB7XG4gICAgICAgIHZhciBkID0gZy5kb2MuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgICAgIGI7XG4gICAgICAgIGQuaW5uZXJIVE1MID0gJzx2OnNoYXBlIGFkaj1cIjFcIi8+JztcbiAgICAgICAgYiA9IGQuZmlyc3RDaGlsZDtcbiAgICAgICAgYi5zdHlsZS5iZWhhdmlvciA9IFwidXJsKCNkZWZhdWx0I1ZNTClcIjtcbiAgICAgICAgaWYgKCEoYiAmJiB0eXBlb2YgYi5hZGogPT0gXCJvYmplY3RcIikpIHtcbiAgICAgICAgICAgIHJldHVybiAoUi50eXBlID0gRSk7XG4gICAgICAgIH1cbiAgICAgICAgZCA9IG51bGw7XG4gICAgfVxuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLnN2Z1xuICAgICBbIHByb3BlcnR5IChib29sZWFuKSBdXG4gICAgICoqXG4gICAgICogYHRydWVgIGlmIGJyb3dzZXIgc3VwcG9ydHMgU1ZHLlxuICAgIFxcKi9cbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC52bWxcbiAgICAgWyBwcm9wZXJ0eSAoYm9vbGVhbikgXVxuICAgICAqKlxuICAgICAqIGB0cnVlYCBpZiBicm93c2VyIHN1cHBvcnRzIFZNTC5cbiAgICBcXCovXG4gICAgUi5zdmcgPSAhKFIudm1sID0gUi50eXBlID09IFwiVk1MXCIpO1xuICAgIFIuX1BhcGVyID0gUGFwZXI7XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuZm5cbiAgICAgWyBwcm9wZXJ0eSAob2JqZWN0KSBdXG4gICAgICoqXG4gICAgICogWW91IGNhbiBhZGQgeW91ciBvd24gbWV0aG9kIHRvIHRoZSBjYW52YXMuIEZvciBleGFtcGxlIGlmIHlvdSB3YW50IHRvIGRyYXcgYSBwaWUgY2hhcnQsXG4gICAgICogeW91IGNhbiBjcmVhdGUgeW91ciBvd24gcGllIGNoYXJ0IGZ1bmN0aW9uIGFuZCBzaGlwIGl0IGFzIGEgUmFwaGHDq2wgcGx1Z2luLiBUbyBkbyB0aGlzXG4gICAgICogeW91IG5lZWQgdG8gZXh0ZW5kIHRoZSBgUmFwaGFlbC5mbmAgb2JqZWN0LiBZb3Ugc2hvdWxkIG1vZGlmeSB0aGUgYGZuYCBvYmplY3QgYmVmb3JlIGFcbiAgICAgKiBSYXBoYcOrbCBpbnN0YW5jZSBpcyBjcmVhdGVkLCBvdGhlcndpc2UgaXQgd2lsbCB0YWtlIG5vIGVmZmVjdC4gUGxlYXNlIG5vdGUgdGhhdCB0aGVcbiAgICAgKiBhYmlsaXR5IGZvciBuYW1lc3BhY2VkIHBsdWdpbnMgd2FzIHJlbW92ZWQgaW4gUmFwaGFlbCAyLjAuIEl0IGlzIHVwIHRvIHRoZSBwbHVnaW4gdG9cbiAgICAgKiBlbnN1cmUgYW55IG5hbWVzcGFjaW5nIGVuc3VyZXMgcHJvcGVyIGNvbnRleHQuXG4gICAgID4gVXNhZ2VcbiAgICAgfCBSYXBoYWVsLmZuLmFycm93ID0gZnVuY3Rpb24gKHgxLCB5MSwgeDIsIHkyLCBzaXplKSB7XG4gICAgIHwgICAgIHJldHVybiB0aGlzLnBhdGgoIC4uLiApO1xuICAgICB8IH07XG4gICAgIHwgLy8gb3IgY3JlYXRlIG5hbWVzcGFjZVxuICAgICB8IFJhcGhhZWwuZm4ubXlzdHVmZiA9IHtcbiAgICAgfCAgICAgYXJyb3c6IGZ1bmN0aW9uICgpIHvigKZ9LFxuICAgICB8ICAgICBzdGFyOiBmdW5jdGlvbiAoKSB74oCmfSxcbiAgICAgfCAgICAgLy8gZXRj4oCmXG4gICAgIHwgfTtcbiAgICAgfCB2YXIgcGFwZXIgPSBSYXBoYWVsKDEwLCAxMCwgNjMwLCA0ODApO1xuICAgICB8IC8vIHRoZW4gdXNlIGl0XG4gICAgIHwgcGFwZXIuYXJyb3coMTAsIDEwLCAzMCwgMzAsIDUpLmF0dHIoe2ZpbGw6IFwiI2YwMFwifSk7XG4gICAgIHwgcGFwZXIubXlzdHVmZi5hcnJvdygpO1xuICAgICB8IHBhcGVyLm15c3R1ZmYuc3RhcigpO1xuICAgIFxcKi9cbiAgICBSLmZuID0gcGFwZXJwcm90byA9IFBhcGVyLnByb3RvdHlwZSA9IFIucHJvdG90eXBlO1xuICAgIFIuX2lkID0gMDtcbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5pc1xuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogSGFuZGZ1bCBvZiByZXBsYWNlbWVudHMgZm9yIGB0eXBlb2ZgIG9wZXJhdG9yLlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBvICjigKYpIGFueSBvYmplY3Qgb3IgcHJpbWl0aXZlXG4gICAgIC0gdHlwZSAoc3RyaW5nKSBuYW1lIG9mIHRoZSB0eXBlLCBpLmUuIOKAnHN0cmluZ+KAnSwg4oCcZnVuY3Rpb27igJ0sIOKAnG51bWJlcuKAnSwgZXRjLlxuICAgICA9IChib29sZWFuKSBpcyBnaXZlbiB2YWx1ZSBpcyBvZiBnaXZlbiB0eXBlXG4gICAgXFwqL1xuICAgIFIuaXMgPSBmdW5jdGlvbiAobywgdHlwZSkge1xuICAgICAgICB0eXBlID0gbG93ZXJDYXNlLmNhbGwodHlwZSk7XG4gICAgICAgIGlmICh0eXBlID09IFwiZmluaXRlXCIpIHtcbiAgICAgICAgICAgIHJldHVybiAhaXNuYW5baGFzXSgrbyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGUgPT0gXCJhcnJheVwiKSB7XG4gICAgICAgICAgICByZXR1cm4gbyBpbnN0YW5jZW9mIEFycmF5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAgKHR5cGUgPT0gXCJudWxsXCIgJiYgbyA9PT0gbnVsbCkgfHxcbiAgICAgICAgICAgICAgICAodHlwZSA9PSB0eXBlb2YgbyAmJiBvICE9PSBudWxsKSB8fFxuICAgICAgICAgICAgICAgICh0eXBlID09IFwib2JqZWN0XCIgJiYgbyA9PT0gT2JqZWN0KG8pKSB8fFxuICAgICAgICAgICAgICAgICh0eXBlID09IFwiYXJyYXlcIiAmJiBBcnJheS5pc0FycmF5ICYmIEFycmF5LmlzQXJyYXkobykpIHx8XG4gICAgICAgICAgICAgICAgb2JqZWN0VG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSkudG9Mb3dlckNhc2UoKSA9PSB0eXBlO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBjbG9uZShvYmopIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvYmogPT0gXCJmdW5jdGlvblwiIHx8IE9iamVjdChvYmopICE9PSBvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlcyA9IG5ldyBvYmouY29uc3RydWN0b3I7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIGlmIChvYmpbaGFzXShrZXkpKSB7XG4gICAgICAgICAgICByZXNba2V5XSA9IGNsb25lKG9ialtrZXldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cblxuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLmFuZ2xlXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZXR1cm5zIGFuZ2xlIGJldHdlZW4gdHdvIG9yIHRocmVlIHBvaW50c1xuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSB4MSAobnVtYmVyKSB4IGNvb3JkIG9mIGZpcnN0IHBvaW50XG4gICAgIC0geTEgKG51bWJlcikgeSBjb29yZCBvZiBmaXJzdCBwb2ludFxuICAgICAtIHgyIChudW1iZXIpIHggY29vcmQgb2Ygc2Vjb25kIHBvaW50XG4gICAgIC0geTIgKG51bWJlcikgeSBjb29yZCBvZiBzZWNvbmQgcG9pbnRcbiAgICAgLSB4MyAobnVtYmVyKSAjb3B0aW9uYWwgeCBjb29yZCBvZiB0aGlyZCBwb2ludFxuICAgICAtIHkzIChudW1iZXIpICNvcHRpb25hbCB5IGNvb3JkIG9mIHRoaXJkIHBvaW50XG4gICAgID0gKG51bWJlcikgYW5nbGUgaW4gZGVncmVlcy5cbiAgICBcXCovXG4gICAgUi5hbmdsZSA9IGZ1bmN0aW9uICh4MSwgeTEsIHgyLCB5MiwgeDMsIHkzKSB7XG4gICAgICAgIGlmICh4MyA9PSBudWxsKSB7XG4gICAgICAgICAgICB2YXIgeCA9IHgxIC0geDIsXG4gICAgICAgICAgICAgICAgeSA9IHkxIC0geTI7XG4gICAgICAgICAgICBpZiAoIXggJiYgIXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAoMTgwICsgbWF0aC5hdGFuMigteSwgLXgpICogMTgwIC8gUEkgKyAzNjApICUgMzYwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFIuYW5nbGUoeDEsIHkxLCB4MywgeTMpIC0gUi5hbmdsZSh4MiwgeTIsIHgzLCB5Myk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLnJhZFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogVHJhbnNmb3JtIGFuZ2xlIHRvIHJhZGlhbnNcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gZGVnIChudW1iZXIpIGFuZ2xlIGluIGRlZ3JlZXNcbiAgICAgPSAobnVtYmVyKSBhbmdsZSBpbiByYWRpYW5zLlxuICAgIFxcKi9cbiAgICBSLnJhZCA9IGZ1bmN0aW9uIChkZWcpIHtcbiAgICAgICAgcmV0dXJuIGRlZyAlIDM2MCAqIFBJIC8gMTgwO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuZGVnXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBUcmFuc2Zvcm0gYW5nbGUgdG8gZGVncmVlc1xuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSByYWQgKG51bWJlcikgYW5nbGUgaW4gcmFkaWFuc1xuICAgICA9IChudW1iZXIpIGFuZ2xlIGluIGRlZ3JlZXMuXG4gICAgXFwqL1xuICAgIFIuZGVnID0gZnVuY3Rpb24gKHJhZCkge1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCAoKHJhZCAqIDE4MCAvIFBJJSAzNjApKiAxMDAwKSAvIDEwMDA7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5zbmFwVG9cbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFNuYXBzIGdpdmVuIHZhbHVlIHRvIGdpdmVuIGdyaWQuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIHZhbHVlcyAoYXJyYXl8bnVtYmVyKSBnaXZlbiBhcnJheSBvZiB2YWx1ZXMgb3Igc3RlcCBvZiB0aGUgZ3JpZFxuICAgICAtIHZhbHVlIChudW1iZXIpIHZhbHVlIHRvIGFkanVzdFxuICAgICAtIHRvbGVyYW5jZSAobnVtYmVyKSAjb3B0aW9uYWwgdG9sZXJhbmNlIGZvciBzbmFwcGluZy4gRGVmYXVsdCBpcyBgMTBgLlxuICAgICA9IChudW1iZXIpIGFkanVzdGVkIHZhbHVlLlxuICAgIFxcKi9cbiAgICBSLnNuYXBUbyA9IGZ1bmN0aW9uICh2YWx1ZXMsIHZhbHVlLCB0b2xlcmFuY2UpIHtcbiAgICAgICAgdG9sZXJhbmNlID0gUi5pcyh0b2xlcmFuY2UsIFwiZmluaXRlXCIpID8gdG9sZXJhbmNlIDogMTA7XG4gICAgICAgIGlmIChSLmlzKHZhbHVlcywgYXJyYXkpKSB7XG4gICAgICAgICAgICB2YXIgaSA9IHZhbHVlcy5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAoaS0tKSBpZiAoYWJzKHZhbHVlc1tpXSAtIHZhbHVlKSA8PSB0b2xlcmFuY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFsdWVzID0gK3ZhbHVlcztcbiAgICAgICAgICAgIHZhciByZW0gPSB2YWx1ZSAlIHZhbHVlcztcbiAgICAgICAgICAgIGlmIChyZW0gPCB0b2xlcmFuY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgLSByZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVtID4gdmFsdWVzIC0gdG9sZXJhbmNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlIC0gcmVtICsgdmFsdWVzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xuXG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuY3JlYXRlVVVJRFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmV0dXJucyBSRkM0MTIyLCB2ZXJzaW9uIDQgSURcbiAgICBcXCovXG4gICAgdmFyIGNyZWF0ZVVVSUQgPSBSLmNyZWF0ZVVVSUQgPSAoZnVuY3Rpb24gKHV1aWRSZWdFeCwgdXVpZFJlcGxhY2VyKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJ4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHhcIi5yZXBsYWNlKHV1aWRSZWdFeCwgdXVpZFJlcGxhY2VyKS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICB9O1xuICAgIH0pKC9beHldL2csIGZ1bmN0aW9uIChjKSB7XG4gICAgICAgIHZhciByID0gbWF0aC5yYW5kb20oKSAqIDE2IHwgMCxcbiAgICAgICAgICAgIHYgPSBjID09IFwieFwiID8gciA6IChyICYgMyB8IDgpO1xuICAgICAgICByZXR1cm4gdi50b1N0cmluZygxNik7XG4gICAgfSk7XG5cbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5zZXRXaW5kb3dcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFVzZWQgd2hlbiB5b3UgbmVlZCB0byBkcmF3IGluIGAmbHQ7aWZyYW1lPmAuIFN3aXRjaGVkIHdpbmRvdyB0byB0aGUgaWZyYW1lIG9uZS5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gbmV3d2luICh3aW5kb3cpIG5ldyB3aW5kb3cgb2JqZWN0XG4gICAgXFwqL1xuICAgIFIuc2V0V2luZG93ID0gZnVuY3Rpb24gKG5ld3dpbikge1xuICAgICAgICBldmUoXCJyYXBoYWVsLnNldFdpbmRvd1wiLCBSLCBnLndpbiwgbmV3d2luKTtcbiAgICAgICAgZy53aW4gPSBuZXd3aW47XG4gICAgICAgIGcuZG9jID0gZy53aW4uZG9jdW1lbnQ7XG4gICAgICAgIGlmIChSLl9lbmdpbmUuaW5pdFdpbikge1xuICAgICAgICAgICAgUi5fZW5naW5lLmluaXRXaW4oZy53aW4pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICB2YXIgdG9IZXggPSBmdW5jdGlvbiAoY29sb3IpIHtcbiAgICAgICAgaWYgKFIudm1sKSB7XG4gICAgICAgICAgICAvLyBodHRwOi8vZGVhbi5lZHdhcmRzLm5hbWUvd2VibG9nLzIwMDkvMTAvY29udmVydC1hbnktY29sb3VyLXZhbHVlLXRvLWhleC1pbi1tc2llL1xuICAgICAgICAgICAgdmFyIHRyaW0gPSAvXlxccyt8XFxzKyQvZztcbiAgICAgICAgICAgIHZhciBib2Q7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciBkb2N1bSA9IG5ldyBBY3RpdmVYT2JqZWN0KFwiaHRtbGZpbGVcIik7XG4gICAgICAgICAgICAgICAgZG9jdW0ud3JpdGUoXCI8Ym9keT5cIik7XG4gICAgICAgICAgICAgICAgZG9jdW0uY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBib2QgPSBkb2N1bS5ib2R5O1xuICAgICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICAgICAgYm9kID0gY3JlYXRlUG9wdXAoKS5kb2N1bWVudC5ib2R5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJhbmdlID0gYm9kLmNyZWF0ZVRleHRSYW5nZSgpO1xuICAgICAgICAgICAgdG9IZXggPSBjYWNoZXIoZnVuY3Rpb24gKGNvbG9yKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYm9kLnN0eWxlLmNvbG9yID0gU3RyKGNvbG9yKS5yZXBsYWNlKHRyaW0sIEUpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSByYW5nZS5xdWVyeUNvbW1hbmRWYWx1ZShcIkZvcmVDb2xvclwiKTtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAoKHZhbHVlICYgMjU1KSA8PCAxNikgfCAodmFsdWUgJiA2NTI4MCkgfCAoKHZhbHVlICYgMTY3MTE2ODApID4+PiAxNik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIiNcIiArIChcIjAwMDAwMFwiICsgdmFsdWUudG9TdHJpbmcoMTYpKS5zbGljZSgtNik7XG4gICAgICAgICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBpID0gZy5kb2MuY3JlYXRlRWxlbWVudChcImlcIik7XG4gICAgICAgICAgICBpLnRpdGxlID0gXCJSYXBoYVxceGVibCBDb2xvdXIgUGlja2VyXCI7XG4gICAgICAgICAgICBpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIGcuZG9jLmJvZHkuYXBwZW5kQ2hpbGQoaSk7XG4gICAgICAgICAgICB0b0hleCA9IGNhY2hlcihmdW5jdGlvbiAoY29sb3IpIHtcbiAgICAgICAgICAgICAgICBpLnN0eWxlLmNvbG9yID0gY29sb3I7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGcuZG9jLmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoaSwgRSkuZ2V0UHJvcGVydHlWYWx1ZShcImNvbG9yXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRvSGV4KGNvbG9yKTtcbiAgICB9LFxuICAgIGhzYnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCJoc2IoXCIgKyBbdGhpcy5oLCB0aGlzLnMsIHRoaXMuYl0gKyBcIilcIjtcbiAgICB9LFxuICAgIGhzbHRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCJoc2woXCIgKyBbdGhpcy5oLCB0aGlzLnMsIHRoaXMubF0gKyBcIilcIjtcbiAgICB9LFxuICAgIHJnYnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oZXg7XG4gICAgfSxcbiAgICBwcmVwYXJlUkdCID0gZnVuY3Rpb24gKHIsIGcsIGIpIHtcbiAgICAgICAgaWYgKGcgPT0gbnVsbCAmJiBSLmlzKHIsIFwib2JqZWN0XCIpICYmIFwiclwiIGluIHIgJiYgXCJnXCIgaW4gciAmJiBcImJcIiBpbiByKSB7XG4gICAgICAgICAgICBiID0gci5iO1xuICAgICAgICAgICAgZyA9IHIuZztcbiAgICAgICAgICAgIHIgPSByLnI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGcgPT0gbnVsbCAmJiBSLmlzKHIsIHN0cmluZykpIHtcbiAgICAgICAgICAgIHZhciBjbHIgPSBSLmdldFJHQihyKTtcbiAgICAgICAgICAgIHIgPSBjbHIucjtcbiAgICAgICAgICAgIGcgPSBjbHIuZztcbiAgICAgICAgICAgIGIgPSBjbHIuYjtcbiAgICAgICAgfVxuICAgICAgICBpZiAociA+IDEgfHwgZyA+IDEgfHwgYiA+IDEpIHtcbiAgICAgICAgICAgIHIgLz0gMjU1O1xuICAgICAgICAgICAgZyAvPSAyNTU7XG4gICAgICAgICAgICBiIC89IDI1NTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBbciwgZywgYl07XG4gICAgfSxcbiAgICBwYWNrYWdlUkdCID0gZnVuY3Rpb24gKHIsIGcsIGIsIG8pIHtcbiAgICAgICAgciAqPSAyNTU7XG4gICAgICAgIGcgKj0gMjU1O1xuICAgICAgICBiICo9IDI1NTtcbiAgICAgICAgdmFyIHJnYiA9IHtcbiAgICAgICAgICAgIHI6IHIsXG4gICAgICAgICAgICBnOiBnLFxuICAgICAgICAgICAgYjogYixcbiAgICAgICAgICAgIGhleDogUi5yZ2IociwgZywgYiksXG4gICAgICAgICAgICB0b1N0cmluZzogcmdidG9TdHJpbmdcbiAgICAgICAgfTtcbiAgICAgICAgUi5pcyhvLCBcImZpbml0ZVwiKSAmJiAocmdiLm9wYWNpdHkgPSBvKTtcbiAgICAgICAgcmV0dXJuIHJnYjtcbiAgICB9O1xuXG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuY29sb3JcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFBhcnNlcyB0aGUgY29sb3Igc3RyaW5nIGFuZCByZXR1cm5zIG9iamVjdCB3aXRoIGFsbCB2YWx1ZXMgZm9yIHRoZSBnaXZlbiBjb2xvci5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gY2xyIChzdHJpbmcpIGNvbG9yIHN0cmluZyBpbiBvbmUgb2YgdGhlIHN1cHBvcnRlZCBmb3JtYXRzIChzZWUgQFJhcGhhZWwuZ2V0UkdCKVxuICAgICA9IChvYmplY3QpIENvbWJpbmVkIFJHQiAmIEhTQiBvYmplY3QgaW4gZm9ybWF0OlxuICAgICBvIHtcbiAgICAgbyAgICAgciAobnVtYmVyKSByZWQsXG4gICAgIG8gICAgIGcgKG51bWJlcikgZ3JlZW4sXG4gICAgIG8gICAgIGIgKG51bWJlcikgYmx1ZSxcbiAgICAgbyAgICAgaGV4IChzdHJpbmcpIGNvbG9yIGluIEhUTUwvQ1NTIGZvcm1hdDogI+KAouKAouKAouKAouKAouKAoixcbiAgICAgbyAgICAgZXJyb3IgKGJvb2xlYW4pIGB0cnVlYCBpZiBzdHJpbmcgY2Fu4oCZdCBiZSBwYXJzZWQsXG4gICAgIG8gICAgIGggKG51bWJlcikgaHVlLFxuICAgICBvICAgICBzIChudW1iZXIpIHNhdHVyYXRpb24sXG4gICAgIG8gICAgIHYgKG51bWJlcikgdmFsdWUgKGJyaWdodG5lc3MpLFxuICAgICBvICAgICBsIChudW1iZXIpIGxpZ2h0bmVzc1xuICAgICBvIH1cbiAgICBcXCovXG4gICAgUi5jb2xvciA9IGZ1bmN0aW9uIChjbHIpIHtcbiAgICAgICAgdmFyIHJnYjtcbiAgICAgICAgaWYgKFIuaXMoY2xyLCBcIm9iamVjdFwiKSAmJiBcImhcIiBpbiBjbHIgJiYgXCJzXCIgaW4gY2xyICYmIFwiYlwiIGluIGNscikge1xuICAgICAgICAgICAgcmdiID0gUi5oc2IycmdiKGNscik7XG4gICAgICAgICAgICBjbHIuciA9IHJnYi5yO1xuICAgICAgICAgICAgY2xyLmcgPSByZ2IuZztcbiAgICAgICAgICAgIGNsci5iID0gcmdiLmI7XG4gICAgICAgICAgICBjbHIuaGV4ID0gcmdiLmhleDtcbiAgICAgICAgfSBlbHNlIGlmIChSLmlzKGNsciwgXCJvYmplY3RcIikgJiYgXCJoXCIgaW4gY2xyICYmIFwic1wiIGluIGNsciAmJiBcImxcIiBpbiBjbHIpIHtcbiAgICAgICAgICAgIHJnYiA9IFIuaHNsMnJnYihjbHIpO1xuICAgICAgICAgICAgY2xyLnIgPSByZ2IucjtcbiAgICAgICAgICAgIGNsci5nID0gcmdiLmc7XG4gICAgICAgICAgICBjbHIuYiA9IHJnYi5iO1xuICAgICAgICAgICAgY2xyLmhleCA9IHJnYi5oZXg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoUi5pcyhjbHIsIFwic3RyaW5nXCIpKSB7XG4gICAgICAgICAgICAgICAgY2xyID0gUi5nZXRSR0IoY2xyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChSLmlzKGNsciwgXCJvYmplY3RcIikgJiYgXCJyXCIgaW4gY2xyICYmIFwiZ1wiIGluIGNsciAmJiBcImJcIiBpbiBjbHIpIHtcbiAgICAgICAgICAgICAgICByZ2IgPSBSLnJnYjJoc2woY2xyKTtcbiAgICAgICAgICAgICAgICBjbHIuaCA9IHJnYi5oO1xuICAgICAgICAgICAgICAgIGNsci5zID0gcmdiLnM7XG4gICAgICAgICAgICAgICAgY2xyLmwgPSByZ2IubDtcbiAgICAgICAgICAgICAgICByZ2IgPSBSLnJnYjJoc2IoY2xyKTtcbiAgICAgICAgICAgICAgICBjbHIudiA9IHJnYi5iO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjbHIgPSB7aGV4OiBcIm5vbmVcIn07XG4gICAgICAgICAgICAgICAgY2xyLnIgPSBjbHIuZyA9IGNsci5iID0gY2xyLmggPSBjbHIucyA9IGNsci52ID0gY2xyLmwgPSAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjbHIudG9TdHJpbmcgPSByZ2J0b1N0cmluZztcbiAgICAgICAgcmV0dXJuIGNscjtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLmhzYjJyZ2JcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIENvbnZlcnRzIEhTQiB2YWx1ZXMgdG8gUkdCIG9iamVjdC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaCAobnVtYmVyKSBodWVcbiAgICAgLSBzIChudW1iZXIpIHNhdHVyYXRpb25cbiAgICAgLSB2IChudW1iZXIpIHZhbHVlIG9yIGJyaWdodG5lc3NcbiAgICAgPSAob2JqZWN0KSBSR0Igb2JqZWN0IGluIGZvcm1hdDpcbiAgICAgbyB7XG4gICAgIG8gICAgIHIgKG51bWJlcikgcmVkLFxuICAgICBvICAgICBnIChudW1iZXIpIGdyZWVuLFxuICAgICBvICAgICBiIChudW1iZXIpIGJsdWUsXG4gICAgIG8gICAgIGhleCAoc3RyaW5nKSBjb2xvciBpbiBIVE1ML0NTUyBmb3JtYXQ6ICPigKLigKLigKLigKLigKLigKJcbiAgICAgbyB9XG4gICAgXFwqL1xuICAgIFIuaHNiMnJnYiA9IGZ1bmN0aW9uIChoLCBzLCB2LCBvKSB7XG4gICAgICAgIGlmICh0aGlzLmlzKGgsIFwib2JqZWN0XCIpICYmIFwiaFwiIGluIGggJiYgXCJzXCIgaW4gaCAmJiBcImJcIiBpbiBoKSB7XG4gICAgICAgICAgICB2ID0gaC5iO1xuICAgICAgICAgICAgcyA9IGgucztcbiAgICAgICAgICAgIG8gPSBoLm87XG4gICAgICAgICAgICBoID0gaC5oO1xuICAgICAgICB9XG4gICAgICAgIGggKj0gMzYwO1xuICAgICAgICB2YXIgUiwgRywgQiwgWCwgQztcbiAgICAgICAgaCA9IChoICUgMzYwKSAvIDYwO1xuICAgICAgICBDID0gdiAqIHM7XG4gICAgICAgIFggPSBDICogKDEgLSBhYnMoaCAlIDIgLSAxKSk7XG4gICAgICAgIFIgPSBHID0gQiA9IHYgLSBDO1xuXG4gICAgICAgIGggPSB+fmg7XG4gICAgICAgIFIgKz0gW0MsIFgsIDAsIDAsIFgsIENdW2hdO1xuICAgICAgICBHICs9IFtYLCBDLCBDLCBYLCAwLCAwXVtoXTtcbiAgICAgICAgQiArPSBbMCwgMCwgWCwgQywgQywgWF1baF07XG4gICAgICAgIHJldHVybiBwYWNrYWdlUkdCKFIsIEcsIEIsIG8pO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuaHNsMnJnYlxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQ29udmVydHMgSFNMIHZhbHVlcyB0byBSR0Igb2JqZWN0LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBoIChudW1iZXIpIGh1ZVxuICAgICAtIHMgKG51bWJlcikgc2F0dXJhdGlvblxuICAgICAtIGwgKG51bWJlcikgbHVtaW5vc2l0eVxuICAgICA9IChvYmplY3QpIFJHQiBvYmplY3QgaW4gZm9ybWF0OlxuICAgICBvIHtcbiAgICAgbyAgICAgciAobnVtYmVyKSByZWQsXG4gICAgIG8gICAgIGcgKG51bWJlcikgZ3JlZW4sXG4gICAgIG8gICAgIGIgKG51bWJlcikgYmx1ZSxcbiAgICAgbyAgICAgaGV4IChzdHJpbmcpIGNvbG9yIGluIEhUTUwvQ1NTIGZvcm1hdDogI+KAouKAouKAouKAouKAouKAolxuICAgICBvIH1cbiAgICBcXCovXG4gICAgUi5oc2wycmdiID0gZnVuY3Rpb24gKGgsIHMsIGwsIG8pIHtcbiAgICAgICAgaWYgKHRoaXMuaXMoaCwgXCJvYmplY3RcIikgJiYgXCJoXCIgaW4gaCAmJiBcInNcIiBpbiBoICYmIFwibFwiIGluIGgpIHtcbiAgICAgICAgICAgIGwgPSBoLmw7XG4gICAgICAgICAgICBzID0gaC5zO1xuICAgICAgICAgICAgaCA9IGguaDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaCA+IDEgfHwgcyA+IDEgfHwgbCA+IDEpIHtcbiAgICAgICAgICAgIGggLz0gMzYwO1xuICAgICAgICAgICAgcyAvPSAxMDA7XG4gICAgICAgICAgICBsIC89IDEwMDtcbiAgICAgICAgfVxuICAgICAgICBoICo9IDM2MDtcbiAgICAgICAgdmFyIFIsIEcsIEIsIFgsIEM7XG4gICAgICAgIGggPSAoaCAlIDM2MCkgLyA2MDtcbiAgICAgICAgQyA9IDIgKiBzICogKGwgPCAuNSA/IGwgOiAxIC0gbCk7XG4gICAgICAgIFggPSBDICogKDEgLSBhYnMoaCAlIDIgLSAxKSk7XG4gICAgICAgIFIgPSBHID0gQiA9IGwgLSBDIC8gMjtcblxuICAgICAgICBoID0gfn5oO1xuICAgICAgICBSICs9IFtDLCBYLCAwLCAwLCBYLCBDXVtoXTtcbiAgICAgICAgRyArPSBbWCwgQywgQywgWCwgMCwgMF1baF07XG4gICAgICAgIEIgKz0gWzAsIDAsIFgsIEMsIEMsIFhdW2hdO1xuICAgICAgICByZXR1cm4gcGFja2FnZVJHQihSLCBHLCBCLCBvKTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLnJnYjJoc2JcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIENvbnZlcnRzIFJHQiB2YWx1ZXMgdG8gSFNCIG9iamVjdC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gciAobnVtYmVyKSByZWRcbiAgICAgLSBnIChudW1iZXIpIGdyZWVuXG4gICAgIC0gYiAobnVtYmVyKSBibHVlXG4gICAgID0gKG9iamVjdCkgSFNCIG9iamVjdCBpbiBmb3JtYXQ6XG4gICAgIG8ge1xuICAgICBvICAgICBoIChudW1iZXIpIGh1ZVxuICAgICBvICAgICBzIChudW1iZXIpIHNhdHVyYXRpb25cbiAgICAgbyAgICAgYiAobnVtYmVyKSBicmlnaHRuZXNzXG4gICAgIG8gfVxuICAgIFxcKi9cbiAgICBSLnJnYjJoc2IgPSBmdW5jdGlvbiAociwgZywgYikge1xuICAgICAgICBiID0gcHJlcGFyZVJHQihyLCBnLCBiKTtcbiAgICAgICAgciA9IGJbMF07XG4gICAgICAgIGcgPSBiWzFdO1xuICAgICAgICBiID0gYlsyXTtcblxuICAgICAgICB2YXIgSCwgUywgViwgQztcbiAgICAgICAgViA9IG1tYXgociwgZywgYik7XG4gICAgICAgIEMgPSBWIC0gbW1pbihyLCBnLCBiKTtcbiAgICAgICAgSCA9IChDID09IDAgPyBudWxsIDpcbiAgICAgICAgICAgICBWID09IHIgPyAoZyAtIGIpIC8gQyA6XG4gICAgICAgICAgICAgViA9PSBnID8gKGIgLSByKSAvIEMgKyAyIDpcbiAgICAgICAgICAgICAgICAgICAgICAociAtIGcpIC8gQyArIDRcbiAgICAgICAgICAgICk7XG4gICAgICAgIEggPSAoKEggKyAzNjApICUgNikgKiA2MCAvIDM2MDtcbiAgICAgICAgUyA9IEMgPT0gMCA/IDAgOiBDIC8gVjtcbiAgICAgICAgcmV0dXJuIHtoOiBILCBzOiBTLCBiOiBWLCB0b1N0cmluZzogaHNidG9TdHJpbmd9O1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwucmdiMmhzbFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQ29udmVydHMgUkdCIHZhbHVlcyB0byBIU0wgb2JqZWN0LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSByIChudW1iZXIpIHJlZFxuICAgICAtIGcgKG51bWJlcikgZ3JlZW5cbiAgICAgLSBiIChudW1iZXIpIGJsdWVcbiAgICAgPSAob2JqZWN0KSBIU0wgb2JqZWN0IGluIGZvcm1hdDpcbiAgICAgbyB7XG4gICAgIG8gICAgIGggKG51bWJlcikgaHVlXG4gICAgIG8gICAgIHMgKG51bWJlcikgc2F0dXJhdGlvblxuICAgICBvICAgICBsIChudW1iZXIpIGx1bWlub3NpdHlcbiAgICAgbyB9XG4gICAgXFwqL1xuICAgIFIucmdiMmhzbCA9IGZ1bmN0aW9uIChyLCBnLCBiKSB7XG4gICAgICAgIGIgPSBwcmVwYXJlUkdCKHIsIGcsIGIpO1xuICAgICAgICByID0gYlswXTtcbiAgICAgICAgZyA9IGJbMV07XG4gICAgICAgIGIgPSBiWzJdO1xuXG4gICAgICAgIHZhciBILCBTLCBMLCBNLCBtLCBDO1xuICAgICAgICBNID0gbW1heChyLCBnLCBiKTtcbiAgICAgICAgbSA9IG1taW4ociwgZywgYik7XG4gICAgICAgIEMgPSBNIC0gbTtcbiAgICAgICAgSCA9IChDID09IDAgPyBudWxsIDpcbiAgICAgICAgICAgICBNID09IHIgPyAoZyAtIGIpIC8gQyA6XG4gICAgICAgICAgICAgTSA9PSBnID8gKGIgLSByKSAvIEMgKyAyIDpcbiAgICAgICAgICAgICAgICAgICAgICAociAtIGcpIC8gQyArIDQpO1xuICAgICAgICBIID0gKChIICsgMzYwKSAlIDYpICogNjAgLyAzNjA7XG4gICAgICAgIEwgPSAoTSArIG0pIC8gMjtcbiAgICAgICAgUyA9IChDID09IDAgPyAwIDpcbiAgICAgICAgICAgICBMIDwgLjUgPyBDIC8gKDIgKiBMKSA6XG4gICAgICAgICAgICAgICAgICAgICAgQyAvICgyIC0gMiAqIEwpKTtcbiAgICAgICAgcmV0dXJuIHtoOiBILCBzOiBTLCBsOiBMLCB0b1N0cmluZzogaHNsdG9TdHJpbmd9O1xuICAgIH07XG4gICAgUi5fcGF0aDJzdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmpvaW4oXCIsXCIpLnJlcGxhY2UocDJzLCBcIiQxXCIpO1xuICAgIH07XG4gICAgZnVuY3Rpb24gcmVwdXNoKGFycmF5LCBpdGVtKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGFycmF5Lmxlbmd0aDsgaSA8IGlpOyBpKyspIGlmIChhcnJheVtpXSA9PT0gaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIGFycmF5LnB1c2goYXJyYXkuc3BsaWNlKGksIDEpWzBdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBjYWNoZXIoZiwgc2NvcGUsIHBvc3Rwcm9jZXNzb3IpIHtcbiAgICAgICAgZnVuY3Rpb24gbmV3ZigpIHtcbiAgICAgICAgICAgIHZhciBhcmcgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApLFxuICAgICAgICAgICAgICAgIGFyZ3MgPSBhcmcuam9pbihcIlxcdTI0MDBcIiksXG4gICAgICAgICAgICAgICAgY2FjaGUgPSBuZXdmLmNhY2hlID0gbmV3Zi5jYWNoZSB8fCB7fSxcbiAgICAgICAgICAgICAgICBjb3VudCA9IG5ld2YuY291bnQgPSBuZXdmLmNvdW50IHx8IFtdO1xuICAgICAgICAgICAgaWYgKGNhY2hlW2hhc10oYXJncykpIHtcbiAgICAgICAgICAgICAgICByZXB1c2goY291bnQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIHJldHVybiBwb3N0cHJvY2Vzc29yID8gcG9zdHByb2Nlc3NvcihjYWNoZVthcmdzXSkgOiBjYWNoZVthcmdzXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvdW50Lmxlbmd0aCA+PSAxZTMgJiYgZGVsZXRlIGNhY2hlW2NvdW50LnNoaWZ0KCldO1xuICAgICAgICAgICAgY291bnQucHVzaChhcmdzKTtcbiAgICAgICAgICAgIGNhY2hlW2FyZ3NdID0gZlthcHBseV0oc2NvcGUsIGFyZyk7XG4gICAgICAgICAgICByZXR1cm4gcG9zdHByb2Nlc3NvciA/IHBvc3Rwcm9jZXNzb3IoY2FjaGVbYXJnc10pIDogY2FjaGVbYXJnc107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld2Y7XG4gICAgfVxuXG4gICAgdmFyIHByZWxvYWQgPSBSLl9wcmVsb2FkID0gZnVuY3Rpb24gKHNyYywgZikge1xuICAgICAgICB2YXIgaW1nID0gZy5kb2MuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICAgICAgaW1nLnN0eWxlLmNzc1RleHQgPSBcInBvc2l0aW9uOmFic29sdXRlO2xlZnQ6LTk5OTllbTt0b3A6LTk5OTllbVwiO1xuICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZi5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5vbmxvYWQgPSBudWxsO1xuICAgICAgICAgICAgZy5kb2MuYm9keS5yZW1vdmVDaGlsZCh0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgaW1nLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBnLmRvYy5ib2R5LnJlbW92ZUNoaWxkKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBnLmRvYy5ib2R5LmFwcGVuZENoaWxkKGltZyk7XG4gICAgICAgIGltZy5zcmMgPSBzcmM7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGNsclRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oZXg7XG4gICAgfVxuXG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuZ2V0UkdCXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBQYXJzZXMgY29sb3VyIHN0cmluZyBhcyBSR0Igb2JqZWN0XG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIGNvbG91ciAoc3RyaW5nKSBjb2xvdXIgc3RyaW5nIGluIG9uZSBvZiBmb3JtYXRzOlxuICAgICAjIDx1bD5cbiAgICAgIyAgICAgPGxpPkNvbG91ciBuYW1lICjigJw8Y29kZT5yZWQ8L2NvZGU+4oCdLCDigJw8Y29kZT5ncmVlbjwvY29kZT7igJ0sIOKAnDxjb2RlPmNvcm5mbG93ZXJibHVlPC9jb2RlPuKAnSwgZXRjKTwvbGk+XG4gICAgICMgICAgIDxsaT4j4oCi4oCi4oCiIOKAlCBzaG9ydGVuZWQgSFRNTCBjb2xvdXI6ICjigJw8Y29kZT4jMDAwPC9jb2RlPuKAnSwg4oCcPGNvZGU+I2ZjMDwvY29kZT7igJ0sIGV0Yyk8L2xpPlxuICAgICAjICAgICA8bGk+I+KAouKAouKAouKAouKAouKAoiDigJQgZnVsbCBsZW5ndGggSFRNTCBjb2xvdXI6ICjigJw8Y29kZT4jMDAwMDAwPC9jb2RlPuKAnSwg4oCcPGNvZGU+I2JkMjMwMDwvY29kZT7igJ0pPC9saT5cbiAgICAgIyAgICAgPGxpPnJnYijigKLigKLigKIsIOKAouKAouKAoiwg4oCi4oCi4oCiKSDigJQgcmVkLCBncmVlbiBhbmQgYmx1ZSBjaGFubmVsc+KAmSB2YWx1ZXM6ICjigJw8Y29kZT5yZ2IoMjAwLCZuYnNwOzEwMCwmbmJzcDswKTwvY29kZT7igJ0pPC9saT5cbiAgICAgIyAgICAgPGxpPnJnYijigKLigKLigKIlLCDigKLigKLigKIlLCDigKLigKLigKIlKSDigJQgc2FtZSBhcyBhYm92ZSwgYnV0IGluICU6ICjigJw8Y29kZT5yZ2IoMTAwJSwmbmJzcDsxNzUlLCZuYnNwOzAlKTwvY29kZT7igJ0pPC9saT5cbiAgICAgIyAgICAgPGxpPmhzYijigKLigKLigKIsIOKAouKAouKAoiwg4oCi4oCi4oCiKSDigJQgaHVlLCBzYXR1cmF0aW9uIGFuZCBicmlnaHRuZXNzIHZhbHVlczogKOKAnDxjb2RlPmhzYigwLjUsJm5ic3A7MC4yNSwmbmJzcDsxKTwvY29kZT7igJ0pPC9saT5cbiAgICAgIyAgICAgPGxpPmhzYijigKLigKLigKIlLCDigKLigKLigKIlLCDigKLigKLigKIlKSDigJQgc2FtZSBhcyBhYm92ZSwgYnV0IGluICU8L2xpPlxuICAgICAjICAgICA8bGk+aHNsKOKAouKAouKAoiwg4oCi4oCi4oCiLCDigKLigKLigKIpIOKAlCBzYW1lIGFzIGhzYjwvbGk+XG4gICAgICMgICAgIDxsaT5oc2wo4oCi4oCi4oCiJSwg4oCi4oCi4oCiJSwg4oCi4oCi4oCiJSkg4oCUIHNhbWUgYXMgaHNiPC9saT5cbiAgICAgIyA8L3VsPlxuICAgICA9IChvYmplY3QpIFJHQiBvYmplY3QgaW4gZm9ybWF0OlxuICAgICBvIHtcbiAgICAgbyAgICAgciAobnVtYmVyKSByZWQsXG4gICAgIG8gICAgIGcgKG51bWJlcikgZ3JlZW4sXG4gICAgIG8gICAgIGIgKG51bWJlcikgYmx1ZVxuICAgICBvICAgICBoZXggKHN0cmluZykgY29sb3IgaW4gSFRNTC9DU1MgZm9ybWF0OiAj4oCi4oCi4oCi4oCi4oCi4oCiLFxuICAgICBvICAgICBlcnJvciAoYm9vbGVhbikgdHJ1ZSBpZiBzdHJpbmcgY2Fu4oCZdCBiZSBwYXJzZWRcbiAgICAgbyB9XG4gICAgXFwqL1xuICAgIFIuZ2V0UkdCID0gY2FjaGVyKGZ1bmN0aW9uIChjb2xvdXIpIHtcbiAgICAgICAgaWYgKCFjb2xvdXIgfHwgISEoKGNvbG91ciA9IFN0cihjb2xvdXIpKS5pbmRleE9mKFwiLVwiKSArIDEpKSB7XG4gICAgICAgICAgICByZXR1cm4ge3I6IC0xLCBnOiAtMSwgYjogLTEsIGhleDogXCJub25lXCIsIGVycm9yOiAxLCB0b1N0cmluZzogY2xyVG9TdHJpbmd9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb2xvdXIgPT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7cjogLTEsIGc6IC0xLCBiOiAtMSwgaGV4OiBcIm5vbmVcIiwgdG9TdHJpbmc6IGNsclRvU3RyaW5nfTtcbiAgICAgICAgfVxuICAgICAgICAhKGhzcmdbaGFzXShjb2xvdXIudG9Mb3dlckNhc2UoKS5zdWJzdHJpbmcoMCwgMikpIHx8IGNvbG91ci5jaGFyQXQoKSA9PSBcIiNcIikgJiYgKGNvbG91ciA9IHRvSGV4KGNvbG91cikpO1xuICAgICAgICB2YXIgcmVzLFxuICAgICAgICAgICAgcmVkLFxuICAgICAgICAgICAgZ3JlZW4sXG4gICAgICAgICAgICBibHVlLFxuICAgICAgICAgICAgb3BhY2l0eSxcbiAgICAgICAgICAgIHQsXG4gICAgICAgICAgICB2YWx1ZXMsXG4gICAgICAgICAgICByZ2IgPSBjb2xvdXIubWF0Y2goY29sb3VyUmVnRXhwKTtcbiAgICAgICAgaWYgKHJnYikge1xuICAgICAgICAgICAgaWYgKHJnYlsyXSkge1xuICAgICAgICAgICAgICAgIGJsdWUgPSB0b0ludChyZ2JbMl0uc3Vic3RyaW5nKDUpLCAxNik7XG4gICAgICAgICAgICAgICAgZ3JlZW4gPSB0b0ludChyZ2JbMl0uc3Vic3RyaW5nKDMsIDUpLCAxNik7XG4gICAgICAgICAgICAgICAgcmVkID0gdG9JbnQocmdiWzJdLnN1YnN0cmluZygxLCAzKSwgMTYpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJnYlszXSkge1xuICAgICAgICAgICAgICAgIGJsdWUgPSB0b0ludCgodCA9IHJnYlszXS5jaGFyQXQoMykpICsgdCwgMTYpO1xuICAgICAgICAgICAgICAgIGdyZWVuID0gdG9JbnQoKHQgPSByZ2JbM10uY2hhckF0KDIpKSArIHQsIDE2KTtcbiAgICAgICAgICAgICAgICByZWQgPSB0b0ludCgodCA9IHJnYlszXS5jaGFyQXQoMSkpICsgdCwgMTYpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJnYls0XSkge1xuICAgICAgICAgICAgICAgIHZhbHVlcyA9IHJnYls0XVtzcGxpdF0oY29tbWFTcGFjZXMpO1xuICAgICAgICAgICAgICAgIHJlZCA9IHRvRmxvYXQodmFsdWVzWzBdKTtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbMF0uc2xpY2UoLTEpID09IFwiJVwiICYmIChyZWQgKj0gMi41NSk7XG4gICAgICAgICAgICAgICAgZ3JlZW4gPSB0b0Zsb2F0KHZhbHVlc1sxXSk7XG4gICAgICAgICAgICAgICAgdmFsdWVzWzFdLnNsaWNlKC0xKSA9PSBcIiVcIiAmJiAoZ3JlZW4gKj0gMi41NSk7XG4gICAgICAgICAgICAgICAgYmx1ZSA9IHRvRmxvYXQodmFsdWVzWzJdKTtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbMl0uc2xpY2UoLTEpID09IFwiJVwiICYmIChibHVlICo9IDIuNTUpO1xuICAgICAgICAgICAgICAgIHJnYlsxXS50b0xvd2VyQ2FzZSgpLnNsaWNlKDAsIDQpID09IFwicmdiYVwiICYmIChvcGFjaXR5ID0gdG9GbG9hdCh2YWx1ZXNbM10pKTtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbM10gJiYgdmFsdWVzWzNdLnNsaWNlKC0xKSA9PSBcIiVcIiAmJiAob3BhY2l0eSAvPSAxMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJnYls1XSkge1xuICAgICAgICAgICAgICAgIHZhbHVlcyA9IHJnYls1XVtzcGxpdF0oY29tbWFTcGFjZXMpO1xuICAgICAgICAgICAgICAgIHJlZCA9IHRvRmxvYXQodmFsdWVzWzBdKTtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbMF0uc2xpY2UoLTEpID09IFwiJVwiICYmIChyZWQgKj0gMi41NSk7XG4gICAgICAgICAgICAgICAgZ3JlZW4gPSB0b0Zsb2F0KHZhbHVlc1sxXSk7XG4gICAgICAgICAgICAgICAgdmFsdWVzWzFdLnNsaWNlKC0xKSA9PSBcIiVcIiAmJiAoZ3JlZW4gKj0gMi41NSk7XG4gICAgICAgICAgICAgICAgYmx1ZSA9IHRvRmxvYXQodmFsdWVzWzJdKTtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbMl0uc2xpY2UoLTEpID09IFwiJVwiICYmIChibHVlICo9IDIuNTUpO1xuICAgICAgICAgICAgICAgICh2YWx1ZXNbMF0uc2xpY2UoLTMpID09IFwiZGVnXCIgfHwgdmFsdWVzWzBdLnNsaWNlKC0xKSA9PSBcIlxceGIwXCIpICYmIChyZWQgLz0gMzYwKTtcbiAgICAgICAgICAgICAgICByZ2JbMV0udG9Mb3dlckNhc2UoKS5zbGljZSgwLCA0KSA9PSBcImhzYmFcIiAmJiAob3BhY2l0eSA9IHRvRmxvYXQodmFsdWVzWzNdKSk7XG4gICAgICAgICAgICAgICAgdmFsdWVzWzNdICYmIHZhbHVlc1szXS5zbGljZSgtMSkgPT0gXCIlXCIgJiYgKG9wYWNpdHkgLz0gMTAwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUi5oc2IycmdiKHJlZCwgZ3JlZW4sIGJsdWUsIG9wYWNpdHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJnYls2XSkge1xuICAgICAgICAgICAgICAgIHZhbHVlcyA9IHJnYls2XVtzcGxpdF0oY29tbWFTcGFjZXMpO1xuICAgICAgICAgICAgICAgIHJlZCA9IHRvRmxvYXQodmFsdWVzWzBdKTtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbMF0uc2xpY2UoLTEpID09IFwiJVwiICYmIChyZWQgKj0gMi41NSk7XG4gICAgICAgICAgICAgICAgZ3JlZW4gPSB0b0Zsb2F0KHZhbHVlc1sxXSk7XG4gICAgICAgICAgICAgICAgdmFsdWVzWzFdLnNsaWNlKC0xKSA9PSBcIiVcIiAmJiAoZ3JlZW4gKj0gMi41NSk7XG4gICAgICAgICAgICAgICAgYmx1ZSA9IHRvRmxvYXQodmFsdWVzWzJdKTtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbMl0uc2xpY2UoLTEpID09IFwiJVwiICYmIChibHVlICo9IDIuNTUpO1xuICAgICAgICAgICAgICAgICh2YWx1ZXNbMF0uc2xpY2UoLTMpID09IFwiZGVnXCIgfHwgdmFsdWVzWzBdLnNsaWNlKC0xKSA9PSBcIlxceGIwXCIpICYmIChyZWQgLz0gMzYwKTtcbiAgICAgICAgICAgICAgICByZ2JbMV0udG9Mb3dlckNhc2UoKS5zbGljZSgwLCA0KSA9PSBcImhzbGFcIiAmJiAob3BhY2l0eSA9IHRvRmxvYXQodmFsdWVzWzNdKSk7XG4gICAgICAgICAgICAgICAgdmFsdWVzWzNdICYmIHZhbHVlc1szXS5zbGljZSgtMSkgPT0gXCIlXCIgJiYgKG9wYWNpdHkgLz0gMTAwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUi5oc2wycmdiKHJlZCwgZ3JlZW4sIGJsdWUsIG9wYWNpdHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmdiID0ge3I6IHJlZCwgZzogZ3JlZW4sIGI6IGJsdWUsIHRvU3RyaW5nOiBjbHJUb1N0cmluZ307XG4gICAgICAgICAgICByZ2IuaGV4ID0gXCIjXCIgKyAoMTY3NzcyMTYgfCBibHVlIHwgKGdyZWVuIDw8IDgpIHwgKHJlZCA8PCAxNikpLnRvU3RyaW5nKDE2KS5zbGljZSgxKTtcbiAgICAgICAgICAgIFIuaXMob3BhY2l0eSwgXCJmaW5pdGVcIikgJiYgKHJnYi5vcGFjaXR5ID0gb3BhY2l0eSk7XG4gICAgICAgICAgICByZXR1cm4gcmdiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7cjogLTEsIGc6IC0xLCBiOiAtMSwgaGV4OiBcIm5vbmVcIiwgZXJyb3I6IDEsIHRvU3RyaW5nOiBjbHJUb1N0cmluZ307XG4gICAgfSwgUik7XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuaHNiXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBDb252ZXJ0cyBIU0IgdmFsdWVzIHRvIGhleCByZXByZXNlbnRhdGlvbiBvZiB0aGUgY29sb3VyLlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBoIChudW1iZXIpIGh1ZVxuICAgICAtIHMgKG51bWJlcikgc2F0dXJhdGlvblxuICAgICAtIGIgKG51bWJlcikgdmFsdWUgb3IgYnJpZ2h0bmVzc1xuICAgICA9IChzdHJpbmcpIGhleCByZXByZXNlbnRhdGlvbiBvZiB0aGUgY29sb3VyLlxuICAgIFxcKi9cbiAgICBSLmhzYiA9IGNhY2hlcihmdW5jdGlvbiAoaCwgcywgYikge1xuICAgICAgICByZXR1cm4gUi5oc2IycmdiKGgsIHMsIGIpLmhleDtcbiAgICB9KTtcbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5oc2xcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIENvbnZlcnRzIEhTTCB2YWx1ZXMgdG8gaGV4IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjb2xvdXIuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIGggKG51bWJlcikgaHVlXG4gICAgIC0gcyAobnVtYmVyKSBzYXR1cmF0aW9uXG4gICAgIC0gbCAobnVtYmVyKSBsdW1pbm9zaXR5XG4gICAgID0gKHN0cmluZykgaGV4IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjb2xvdXIuXG4gICAgXFwqL1xuICAgIFIuaHNsID0gY2FjaGVyKGZ1bmN0aW9uIChoLCBzLCBsKSB7XG4gICAgICAgIHJldHVybiBSLmhzbDJyZ2IoaCwgcywgbCkuaGV4O1xuICAgIH0pO1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLnJnYlxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQ29udmVydHMgUkdCIHZhbHVlcyB0byBoZXggcmVwcmVzZW50YXRpb24gb2YgdGhlIGNvbG91ci5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gciAobnVtYmVyKSByZWRcbiAgICAgLSBnIChudW1iZXIpIGdyZWVuXG4gICAgIC0gYiAobnVtYmVyKSBibHVlXG4gICAgID0gKHN0cmluZykgaGV4IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjb2xvdXIuXG4gICAgXFwqL1xuICAgIFIucmdiID0gY2FjaGVyKGZ1bmN0aW9uIChyLCBnLCBiKSB7XG4gICAgICAgIGZ1bmN0aW9uIHJvdW5kKHgpIHsgcmV0dXJuICh4ICsgMC41KSB8IDA7IH1cbiAgICAgICAgcmV0dXJuIFwiI1wiICsgKDE2Nzc3MjE2IHwgcm91bmQoYikgfCAocm91bmQoZykgPDwgOCkgfCAocm91bmQocikgPDwgMTYpKS50b1N0cmluZygxNikuc2xpY2UoMSk7XG4gICAgfSk7XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuZ2V0Q29sb3JcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIE9uIGVhY2ggY2FsbCByZXR1cm5zIG5leHQgY29sb3VyIGluIHRoZSBzcGVjdHJ1bS4gVG8gcmVzZXQgaXQgYmFjayB0byByZWQgY2FsbCBAUmFwaGFlbC5nZXRDb2xvci5yZXNldFxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSB2YWx1ZSAobnVtYmVyKSAjb3B0aW9uYWwgYnJpZ2h0bmVzcywgZGVmYXVsdCBpcyBgMC43NWBcbiAgICAgPSAoc3RyaW5nKSBoZXggcmVwcmVzZW50YXRpb24gb2YgdGhlIGNvbG91ci5cbiAgICBcXCovXG4gICAgUi5nZXRDb2xvciA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgc3RhcnQgPSB0aGlzLmdldENvbG9yLnN0YXJ0ID0gdGhpcy5nZXRDb2xvci5zdGFydCB8fCB7aDogMCwgczogMSwgYjogdmFsdWUgfHwgLjc1fSxcbiAgICAgICAgICAgIHJnYiA9IHRoaXMuaHNiMnJnYihzdGFydC5oLCBzdGFydC5zLCBzdGFydC5iKTtcbiAgICAgICAgc3RhcnQuaCArPSAuMDc1O1xuICAgICAgICBpZiAoc3RhcnQuaCA+IDEpIHtcbiAgICAgICAgICAgIHN0YXJ0LmggPSAwO1xuICAgICAgICAgICAgc3RhcnQucyAtPSAuMjtcbiAgICAgICAgICAgIHN0YXJ0LnMgPD0gMCAmJiAodGhpcy5nZXRDb2xvci5zdGFydCA9IHtoOiAwLCBzOiAxLCBiOiBzdGFydC5ifSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJnYi5oZXg7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5nZXRDb2xvci5yZXNldFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVzZXRzIHNwZWN0cnVtIHBvc2l0aW9uIGZvciBAUmFwaGFlbC5nZXRDb2xvciBiYWNrIHRvIHJlZC5cbiAgICBcXCovXG4gICAgUi5nZXRDb2xvci5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuc3RhcnQ7XG4gICAgfTtcblxuICAgIC8vIGh0dHA6Ly9zY2hlcGVycy5jYy9nZXR0aW5nLXRvLXRoZS1wb2ludFxuICAgIGZ1bmN0aW9uIGNhdG11bGxSb20yYmV6aWVyKGNycCwgeikge1xuICAgICAgICB2YXIgZCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaUxlbiA9IGNycC5sZW5ndGg7IGlMZW4gLSAyICogIXogPiBpOyBpICs9IDIpIHtcbiAgICAgICAgICAgIHZhciBwID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAge3g6ICtjcnBbaSAtIDJdLCB5OiArY3JwW2kgLSAxXX0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7eDogK2NycFtpXSwgICAgIHk6ICtjcnBbaSArIDFdfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHt4OiArY3JwW2kgKyAyXSwgeTogK2NycFtpICsgM119LFxuICAgICAgICAgICAgICAgICAgICAgICAge3g6ICtjcnBbaSArIDRdLCB5OiArY3JwW2kgKyA1XX1cbiAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGlmICh6KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBbMF0gPSB7eDogK2NycFtpTGVuIC0gMl0sIHk6ICtjcnBbaUxlbiAtIDFdfTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlMZW4gLSA0ID09IGkpIHtcbiAgICAgICAgICAgICAgICAgICAgcFszXSA9IHt4OiArY3JwWzBdLCB5OiArY3JwWzFdfTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlMZW4gLSAyID09IGkpIHtcbiAgICAgICAgICAgICAgICAgICAgcFsyXSA9IHt4OiArY3JwWzBdLCB5OiArY3JwWzFdfTtcbiAgICAgICAgICAgICAgICAgICAgcFszXSA9IHt4OiArY3JwWzJdLCB5OiArY3JwWzNdfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChpTGVuIC0gNCA9PSBpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBbM10gPSBwWzJdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWkpIHtcbiAgICAgICAgICAgICAgICAgICAgcFswXSA9IHt4OiArY3JwW2ldLCB5OiArY3JwW2kgKyAxXX07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZC5wdXNoKFtcIkNcIixcbiAgICAgICAgICAgICAgICAgICgtcFswXS54ICsgNiAqIHBbMV0ueCArIHBbMl0ueCkgLyA2LFxuICAgICAgICAgICAgICAgICAgKC1wWzBdLnkgKyA2ICogcFsxXS55ICsgcFsyXS55KSAvIDYsXG4gICAgICAgICAgICAgICAgICAocFsxXS54ICsgNiAqIHBbMl0ueCAtIHBbM10ueCkgLyA2LFxuICAgICAgICAgICAgICAgICAgKHBbMV0ueSArIDYqcFsyXS55IC0gcFszXS55KSAvIDYsXG4gICAgICAgICAgICAgICAgICBwWzJdLngsXG4gICAgICAgICAgICAgICAgICBwWzJdLnlcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGQ7XG4gICAgfVxuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLnBhcnNlUGF0aFN0cmluZ1xuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogVXRpbGl0eSBtZXRob2RcbiAgICAgKipcbiAgICAgKiBQYXJzZXMgZ2l2ZW4gcGF0aCBzdHJpbmcgaW50byBhbiBhcnJheSBvZiBhcnJheXMgb2YgcGF0aCBzZWdtZW50cy5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gcGF0aFN0cmluZyAoc3RyaW5nfGFycmF5KSBwYXRoIHN0cmluZyBvciBhcnJheSBvZiBzZWdtZW50cyAoaW4gdGhlIGxhc3QgY2FzZSBpdCB3aWxsIGJlIHJldHVybmVkIHN0cmFpZ2h0IGF3YXkpXG4gICAgID0gKGFycmF5KSBhcnJheSBvZiBzZWdtZW50cy5cbiAgICBcXCovXG4gICAgUi5wYXJzZVBhdGhTdHJpbmcgPSBmdW5jdGlvbiAocGF0aFN0cmluZykge1xuICAgICAgICBpZiAoIXBhdGhTdHJpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwdGggPSBwYXRocyhwYXRoU3RyaW5nKTtcbiAgICAgICAgaWYgKHB0aC5hcnIpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXRoQ2xvbmUocHRoLmFycik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcGFyYW1Db3VudHMgPSB7YTogNywgYzogNiwgaDogMSwgbDogMiwgbTogMiwgcjogNCwgcTogNCwgczogNCwgdDogMiwgdjogMSwgejogMH0sXG4gICAgICAgICAgICBkYXRhID0gW107XG4gICAgICAgIGlmIChSLmlzKHBhdGhTdHJpbmcsIGFycmF5KSAmJiBSLmlzKHBhdGhTdHJpbmdbMF0sIGFycmF5KSkgeyAvLyByb3VnaCBhc3N1bXB0aW9uXG4gICAgICAgICAgICBkYXRhID0gcGF0aENsb25lKHBhdGhTdHJpbmcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICAgIFN0cihwYXRoU3RyaW5nKS5yZXBsYWNlKHBhdGhDb21tYW5kLCBmdW5jdGlvbiAoYSwgYiwgYykge1xuICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IGIudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBjLnJlcGxhY2UocGF0aFZhbHVlcywgZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICAgICAgYiAmJiBwYXJhbXMucHVzaCgrYik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKG5hbWUgPT0gXCJtXCIgJiYgcGFyYW1zLmxlbmd0aCA+IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5wdXNoKFtiXVtjb25jYXRdKHBhcmFtcy5zcGxpY2UoMCwgMikpKTtcbiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IFwibFwiO1xuICAgICAgICAgICAgICAgICAgICBiID0gYiA9PSBcIm1cIiA/IFwibFwiIDogXCJMXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChuYW1lID09IFwiclwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEucHVzaChbYl1bY29uY2F0XShwYXJhbXMpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Ugd2hpbGUgKHBhcmFtcy5sZW5ndGggPj0gcGFyYW1Db3VudHNbbmFtZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5wdXNoKFtiXVtjb25jYXRdKHBhcmFtcy5zcGxpY2UoMCwgcGFyYW1Db3VudHNbbmFtZV0pKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcGFyYW1Db3VudHNbbmFtZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZGF0YS50b1N0cmluZyA9IFIuX3BhdGgyc3RyaW5nO1xuICAgICAgICBwdGguYXJyID0gcGF0aENsb25lKGRhdGEpO1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLnBhcnNlVHJhbnNmb3JtU3RyaW5nXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBVdGlsaXR5IG1ldGhvZFxuICAgICAqKlxuICAgICAqIFBhcnNlcyBnaXZlbiBwYXRoIHN0cmluZyBpbnRvIGFuIGFycmF5IG9mIHRyYW5zZm9ybWF0aW9ucy5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gVFN0cmluZyAoc3RyaW5nfGFycmF5KSB0cmFuc2Zvcm0gc3RyaW5nIG9yIGFycmF5IG9mIHRyYW5zZm9ybWF0aW9ucyAoaW4gdGhlIGxhc3QgY2FzZSBpdCB3aWxsIGJlIHJldHVybmVkIHN0cmFpZ2h0IGF3YXkpXG4gICAgID0gKGFycmF5KSBhcnJheSBvZiB0cmFuc2Zvcm1hdGlvbnMuXG4gICAgXFwqL1xuICAgIFIucGFyc2VUcmFuc2Zvcm1TdHJpbmcgPSBjYWNoZXIoZnVuY3Rpb24gKFRTdHJpbmcpIHtcbiAgICAgICAgaWYgKCFUU3RyaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGFyYW1Db3VudHMgPSB7cjogMywgczogNCwgdDogMiwgbTogNn0sXG4gICAgICAgICAgICBkYXRhID0gW107XG4gICAgICAgIGlmIChSLmlzKFRTdHJpbmcsIGFycmF5KSAmJiBSLmlzKFRTdHJpbmdbMF0sIGFycmF5KSkgeyAvLyByb3VnaCBhc3N1bXB0aW9uXG4gICAgICAgICAgICBkYXRhID0gcGF0aENsb25lKFRTdHJpbmcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICAgIFN0cihUU3RyaW5nKS5yZXBsYWNlKHRDb21tYW5kLCBmdW5jdGlvbiAoYSwgYiwgYykge1xuICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IGxvd2VyQ2FzZS5jYWxsKGIpO1xuICAgICAgICAgICAgICAgIGMucmVwbGFjZShwYXRoVmFsdWVzLCBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgICAgICAgICBiICYmIHBhcmFtcy5wdXNoKCtiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkYXRhLnB1c2goW2JdW2NvbmNhdF0ocGFyYW1zKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBkYXRhLnRvU3RyaW5nID0gUi5fcGF0aDJzdHJpbmc7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH0pO1xuICAgIC8vIFBBVEhTXG4gICAgdmFyIHBhdGhzID0gZnVuY3Rpb24gKHBzKSB7XG4gICAgICAgIHZhciBwID0gcGF0aHMucHMgPSBwYXRocy5wcyB8fCB7fTtcbiAgICAgICAgaWYgKHBbcHNdKSB7XG4gICAgICAgICAgICBwW3BzXS5zbGVlcCA9IDEwMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBbcHNdID0ge1xuICAgICAgICAgICAgICAgIHNsZWVwOiAxMDBcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gcCkgaWYgKHBbaGFzXShrZXkpICYmIGtleSAhPSBwcykge1xuICAgICAgICAgICAgICAgIHBba2V5XS5zbGVlcC0tO1xuICAgICAgICAgICAgICAgICFwW2tleV0uc2xlZXAgJiYgZGVsZXRlIHBba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwW3BzXTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLmZpbmREb3RzQXRTZWdtZW50XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBVdGlsaXR5IG1ldGhvZFxuICAgICAqKlxuICAgICAqIEZpbmQgZG90IGNvb3JkaW5hdGVzIG9uIHRoZSBnaXZlbiBjdWJpYyBiZXppZXIgY3VydmUgYXQgdGhlIGdpdmVuIHQuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIHAxeCAobnVtYmVyKSB4IG9mIHRoZSBmaXJzdCBwb2ludCBvZiB0aGUgY3VydmVcbiAgICAgLSBwMXkgKG51bWJlcikgeSBvZiB0aGUgZmlyc3QgcG9pbnQgb2YgdGhlIGN1cnZlXG4gICAgIC0gYzF4IChudW1iZXIpIHggb2YgdGhlIGZpcnN0IGFuY2hvciBvZiB0aGUgY3VydmVcbiAgICAgLSBjMXkgKG51bWJlcikgeSBvZiB0aGUgZmlyc3QgYW5jaG9yIG9mIHRoZSBjdXJ2ZVxuICAgICAtIGMyeCAobnVtYmVyKSB4IG9mIHRoZSBzZWNvbmQgYW5jaG9yIG9mIHRoZSBjdXJ2ZVxuICAgICAtIGMyeSAobnVtYmVyKSB5IG9mIHRoZSBzZWNvbmQgYW5jaG9yIG9mIHRoZSBjdXJ2ZVxuICAgICAtIHAyeCAobnVtYmVyKSB4IG9mIHRoZSBzZWNvbmQgcG9pbnQgb2YgdGhlIGN1cnZlXG4gICAgIC0gcDJ5IChudW1iZXIpIHkgb2YgdGhlIHNlY29uZCBwb2ludCBvZiB0aGUgY3VydmVcbiAgICAgLSB0IChudW1iZXIpIHBvc2l0aW9uIG9uIHRoZSBjdXJ2ZSAoMC4uMSlcbiAgICAgPSAob2JqZWN0KSBwb2ludCBpbmZvcm1hdGlvbiBpbiBmb3JtYXQ6XG4gICAgIG8ge1xuICAgICBvICAgICB4OiAobnVtYmVyKSB4IGNvb3JkaW5hdGUgb2YgdGhlIHBvaW50XG4gICAgIG8gICAgIHk6IChudW1iZXIpIHkgY29vcmRpbmF0ZSBvZiB0aGUgcG9pbnRcbiAgICAgbyAgICAgbToge1xuICAgICBvICAgICAgICAgeDogKG51bWJlcikgeCBjb29yZGluYXRlIG9mIHRoZSBsZWZ0IGFuY2hvclxuICAgICBvICAgICAgICAgeTogKG51bWJlcikgeSBjb29yZGluYXRlIG9mIHRoZSBsZWZ0IGFuY2hvclxuICAgICBvICAgICB9XG4gICAgIG8gICAgIG46IHtcbiAgICAgbyAgICAgICAgIHg6IChudW1iZXIpIHggY29vcmRpbmF0ZSBvZiB0aGUgcmlnaHQgYW5jaG9yXG4gICAgIG8gICAgICAgICB5OiAobnVtYmVyKSB5IGNvb3JkaW5hdGUgb2YgdGhlIHJpZ2h0IGFuY2hvclxuICAgICBvICAgICB9XG4gICAgIG8gICAgIHN0YXJ0OiB7XG4gICAgIG8gICAgICAgICB4OiAobnVtYmVyKSB4IGNvb3JkaW5hdGUgb2YgdGhlIHN0YXJ0IG9mIHRoZSBjdXJ2ZVxuICAgICBvICAgICAgICAgeTogKG51bWJlcikgeSBjb29yZGluYXRlIG9mIHRoZSBzdGFydCBvZiB0aGUgY3VydmVcbiAgICAgbyAgICAgfVxuICAgICBvICAgICBlbmQ6IHtcbiAgICAgbyAgICAgICAgIHg6IChudW1iZXIpIHggY29vcmRpbmF0ZSBvZiB0aGUgZW5kIG9mIHRoZSBjdXJ2ZVxuICAgICBvICAgICAgICAgeTogKG51bWJlcikgeSBjb29yZGluYXRlIG9mIHRoZSBlbmQgb2YgdGhlIGN1cnZlXG4gICAgIG8gICAgIH1cbiAgICAgbyAgICAgYWxwaGE6IChudW1iZXIpIGFuZ2xlIG9mIHRoZSBjdXJ2ZSBkZXJpdmF0aXZlIGF0IHRoZSBwb2ludFxuICAgICBvIH1cbiAgICBcXCovXG4gICAgUi5maW5kRG90c0F0U2VnbWVudCA9IGZ1bmN0aW9uIChwMXgsIHAxeSwgYzF4LCBjMXksIGMyeCwgYzJ5LCBwMngsIHAyeSwgdCkge1xuICAgICAgICB2YXIgdDEgPSAxIC0gdCxcbiAgICAgICAgICAgIHQxMyA9IHBvdyh0MSwgMyksXG4gICAgICAgICAgICB0MTIgPSBwb3codDEsIDIpLFxuICAgICAgICAgICAgdDIgPSB0ICogdCxcbiAgICAgICAgICAgIHQzID0gdDIgKiB0LFxuICAgICAgICAgICAgeCA9IHQxMyAqIHAxeCArIHQxMiAqIDMgKiB0ICogYzF4ICsgdDEgKiAzICogdCAqIHQgKiBjMnggKyB0MyAqIHAyeCxcbiAgICAgICAgICAgIHkgPSB0MTMgKiBwMXkgKyB0MTIgKiAzICogdCAqIGMxeSArIHQxICogMyAqIHQgKiB0ICogYzJ5ICsgdDMgKiBwMnksXG4gICAgICAgICAgICBteCA9IHAxeCArIDIgKiB0ICogKGMxeCAtIHAxeCkgKyB0MiAqIChjMnggLSAyICogYzF4ICsgcDF4KSxcbiAgICAgICAgICAgIG15ID0gcDF5ICsgMiAqIHQgKiAoYzF5IC0gcDF5KSArIHQyICogKGMyeSAtIDIgKiBjMXkgKyBwMXkpLFxuICAgICAgICAgICAgbnggPSBjMXggKyAyICogdCAqIChjMnggLSBjMXgpICsgdDIgKiAocDJ4IC0gMiAqIGMyeCArIGMxeCksXG4gICAgICAgICAgICBueSA9IGMxeSArIDIgKiB0ICogKGMyeSAtIGMxeSkgKyB0MiAqIChwMnkgLSAyICogYzJ5ICsgYzF5KSxcbiAgICAgICAgICAgIGF4ID0gdDEgKiBwMXggKyB0ICogYzF4LFxuICAgICAgICAgICAgYXkgPSB0MSAqIHAxeSArIHQgKiBjMXksXG4gICAgICAgICAgICBjeCA9IHQxICogYzJ4ICsgdCAqIHAyeCxcbiAgICAgICAgICAgIGN5ID0gdDEgKiBjMnkgKyB0ICogcDJ5LFxuICAgICAgICAgICAgYWxwaGEgPSAoOTAgLSBtYXRoLmF0YW4yKG14IC0gbngsIG15IC0gbnkpICogMTgwIC8gUEkpO1xuICAgICAgICAobXggPiBueCB8fCBteSA8IG55KSAmJiAoYWxwaGEgKz0gMTgwKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IHgsXG4gICAgICAgICAgICB5OiB5LFxuICAgICAgICAgICAgbToge3g6IG14LCB5OiBteX0sXG4gICAgICAgICAgICBuOiB7eDogbngsIHk6IG55fSxcbiAgICAgICAgICAgIHN0YXJ0OiB7eDogYXgsIHk6IGF5fSxcbiAgICAgICAgICAgIGVuZDoge3g6IGN4LCB5OiBjeX0sXG4gICAgICAgICAgICBhbHBoYTogYWxwaGFcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLmJlemllckJCb3hcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFV0aWxpdHkgbWV0aG9kXG4gICAgICoqXG4gICAgICogUmV0dXJuIGJvdW5kaW5nIGJveCBvZiBhIGdpdmVuIGN1YmljIGJlemllciBjdXJ2ZVxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBwMXggKG51bWJlcikgeCBvZiB0aGUgZmlyc3QgcG9pbnQgb2YgdGhlIGN1cnZlXG4gICAgIC0gcDF5IChudW1iZXIpIHkgb2YgdGhlIGZpcnN0IHBvaW50IG9mIHRoZSBjdXJ2ZVxuICAgICAtIGMxeCAobnVtYmVyKSB4IG9mIHRoZSBmaXJzdCBhbmNob3Igb2YgdGhlIGN1cnZlXG4gICAgIC0gYzF5IChudW1iZXIpIHkgb2YgdGhlIGZpcnN0IGFuY2hvciBvZiB0aGUgY3VydmVcbiAgICAgLSBjMnggKG51bWJlcikgeCBvZiB0aGUgc2Vjb25kIGFuY2hvciBvZiB0aGUgY3VydmVcbiAgICAgLSBjMnkgKG51bWJlcikgeSBvZiB0aGUgc2Vjb25kIGFuY2hvciBvZiB0aGUgY3VydmVcbiAgICAgLSBwMnggKG51bWJlcikgeCBvZiB0aGUgc2Vjb25kIHBvaW50IG9mIHRoZSBjdXJ2ZVxuICAgICAtIHAyeSAobnVtYmVyKSB5IG9mIHRoZSBzZWNvbmQgcG9pbnQgb2YgdGhlIGN1cnZlXG4gICAgICogb3JcbiAgICAgLSBiZXogKGFycmF5KSBhcnJheSBvZiBzaXggcG9pbnRzIGZvciBiZXppZXIgY3VydmVcbiAgICAgPSAob2JqZWN0KSBwb2ludCBpbmZvcm1hdGlvbiBpbiBmb3JtYXQ6XG4gICAgIG8ge1xuICAgICBvICAgICBtaW46IHtcbiAgICAgbyAgICAgICAgIHg6IChudW1iZXIpIHggY29vcmRpbmF0ZSBvZiB0aGUgbGVmdCBwb2ludFxuICAgICBvICAgICAgICAgeTogKG51bWJlcikgeSBjb29yZGluYXRlIG9mIHRoZSB0b3AgcG9pbnRcbiAgICAgbyAgICAgfVxuICAgICBvICAgICBtYXg6IHtcbiAgICAgbyAgICAgICAgIHg6IChudW1iZXIpIHggY29vcmRpbmF0ZSBvZiB0aGUgcmlnaHQgcG9pbnRcbiAgICAgbyAgICAgICAgIHk6IChudW1iZXIpIHkgY29vcmRpbmF0ZSBvZiB0aGUgYm90dG9tIHBvaW50XG4gICAgIG8gICAgIH1cbiAgICAgbyB9XG4gICAgXFwqL1xuICAgIFIuYmV6aWVyQkJveCA9IGZ1bmN0aW9uIChwMXgsIHAxeSwgYzF4LCBjMXksIGMyeCwgYzJ5LCBwMngsIHAyeSkge1xuICAgICAgICBpZiAoIVIuaXMocDF4LCBcImFycmF5XCIpKSB7XG4gICAgICAgICAgICBwMXggPSBbcDF4LCBwMXksIGMxeCwgYzF5LCBjMngsIGMyeSwgcDJ4LCBwMnldO1xuICAgICAgICB9XG4gICAgICAgIHZhciBiYm94ID0gY3VydmVEaW0uYXBwbHkobnVsbCwgcDF4KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IGJib3gubWluLngsXG4gICAgICAgICAgICB5OiBiYm94Lm1pbi55LFxuICAgICAgICAgICAgeDI6IGJib3gubWF4LngsXG4gICAgICAgICAgICB5MjogYmJveC5tYXgueSxcbiAgICAgICAgICAgIHdpZHRoOiBiYm94Lm1heC54IC0gYmJveC5taW4ueCxcbiAgICAgICAgICAgIGhlaWdodDogYmJveC5tYXgueSAtIGJib3gubWluLnlcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLmlzUG9pbnRJbnNpZGVCQm94XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBVdGlsaXR5IG1ldGhvZFxuICAgICAqKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIGdpdmVuIHBvaW50IGlzIGluc2lkZSBib3VuZGluZyBib3hlcy5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gYmJveCAoc3RyaW5nKSBib3VuZGluZyBib3hcbiAgICAgLSB4IChzdHJpbmcpIHggY29vcmRpbmF0ZSBvZiB0aGUgcG9pbnRcbiAgICAgLSB5IChzdHJpbmcpIHkgY29vcmRpbmF0ZSBvZiB0aGUgcG9pbnRcbiAgICAgPSAoYm9vbGVhbikgYHRydWVgIGlmIHBvaW50IGluc2lkZVxuICAgIFxcKi9cbiAgICBSLmlzUG9pbnRJbnNpZGVCQm94ID0gZnVuY3Rpb24gKGJib3gsIHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIHggPj0gYmJveC54ICYmIHggPD0gYmJveC54MiAmJiB5ID49IGJib3gueSAmJiB5IDw9IGJib3gueTI7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5pc0JCb3hJbnRlcnNlY3RcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFV0aWxpdHkgbWV0aG9kXG4gICAgICoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdHdvIGJvdW5kaW5nIGJveGVzIGludGVyc2VjdFxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBiYm94MSAoc3RyaW5nKSBmaXJzdCBib3VuZGluZyBib3hcbiAgICAgLSBiYm94MiAoc3RyaW5nKSBzZWNvbmQgYm91bmRpbmcgYm94XG4gICAgID0gKGJvb2xlYW4pIGB0cnVlYCBpZiB0aGV5IGludGVyc2VjdFxuICAgIFxcKi9cbiAgICBSLmlzQkJveEludGVyc2VjdCA9IGZ1bmN0aW9uIChiYm94MSwgYmJveDIpIHtcbiAgICAgICAgdmFyIGkgPSBSLmlzUG9pbnRJbnNpZGVCQm94O1xuICAgICAgICByZXR1cm4gaShiYm94MiwgYmJveDEueCwgYmJveDEueSlcbiAgICAgICAgICAgIHx8IGkoYmJveDIsIGJib3gxLngyLCBiYm94MS55KVxuICAgICAgICAgICAgfHwgaShiYm94MiwgYmJveDEueCwgYmJveDEueTIpXG4gICAgICAgICAgICB8fCBpKGJib3gyLCBiYm94MS54MiwgYmJveDEueTIpXG4gICAgICAgICAgICB8fCBpKGJib3gxLCBiYm94Mi54LCBiYm94Mi55KVxuICAgICAgICAgICAgfHwgaShiYm94MSwgYmJveDIueDIsIGJib3gyLnkpXG4gICAgICAgICAgICB8fCBpKGJib3gxLCBiYm94Mi54LCBiYm94Mi55MilcbiAgICAgICAgICAgIHx8IGkoYmJveDEsIGJib3gyLngyLCBiYm94Mi55MilcbiAgICAgICAgICAgIHx8IChiYm94MS54IDwgYmJveDIueDIgJiYgYmJveDEueCA+IGJib3gyLnggfHwgYmJveDIueCA8IGJib3gxLngyICYmIGJib3gyLnggPiBiYm94MS54KVxuICAgICAgICAgICAgJiYgKGJib3gxLnkgPCBiYm94Mi55MiAmJiBiYm94MS55ID4gYmJveDIueSB8fCBiYm94Mi55IDwgYmJveDEueTIgJiYgYmJveDIueSA+IGJib3gxLnkpO1xuICAgIH07XG4gICAgZnVuY3Rpb24gYmFzZTModCwgcDEsIHAyLCBwMywgcDQpIHtcbiAgICAgICAgdmFyIHQxID0gLTMgKiBwMSArIDkgKiBwMiAtIDkgKiBwMyArIDMgKiBwNCxcbiAgICAgICAgICAgIHQyID0gdCAqIHQxICsgNiAqIHAxIC0gMTIgKiBwMiArIDYgKiBwMztcbiAgICAgICAgcmV0dXJuIHQgKiB0MiAtIDMgKiBwMSArIDMgKiBwMjtcbiAgICB9XG4gICAgZnVuY3Rpb24gYmV6bGVuKHgxLCB5MSwgeDIsIHkyLCB4MywgeTMsIHg0LCB5NCwgeikge1xuICAgICAgICBpZiAoeiA9PSBudWxsKSB7XG4gICAgICAgICAgICB6ID0gMTtcbiAgICAgICAgfVxuICAgICAgICB6ID0geiA+IDEgPyAxIDogeiA8IDAgPyAwIDogejtcbiAgICAgICAgdmFyIHoyID0geiAvIDIsXG4gICAgICAgICAgICBuID0gMTIsXG4gICAgICAgICAgICBUdmFsdWVzID0gWy0wLjEyNTIsMC4xMjUyLC0wLjM2NzgsMC4zNjc4LC0wLjU4NzMsMC41ODczLC0wLjc2OTksMC43Njk5LC0wLjkwNDEsMC45MDQxLC0wLjk4MTYsMC45ODE2XSxcbiAgICAgICAgICAgIEN2YWx1ZXMgPSBbMC4yNDkxLDAuMjQ5MSwwLjIzMzUsMC4yMzM1LDAuMjAzMiwwLjIwMzIsMC4xNjAxLDAuMTYwMSwwLjEwNjksMC4xMDY5LDAuMDQ3MiwwLjA0NzJdLFxuICAgICAgICAgICAgc3VtID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBjdCA9IHoyICogVHZhbHVlc1tpXSArIHoyLFxuICAgICAgICAgICAgICAgIHhiYXNlID0gYmFzZTMoY3QsIHgxLCB4MiwgeDMsIHg0KSxcbiAgICAgICAgICAgICAgICB5YmFzZSA9IGJhc2UzKGN0LCB5MSwgeTIsIHkzLCB5NCksXG4gICAgICAgICAgICAgICAgY29tYiA9IHhiYXNlICogeGJhc2UgKyB5YmFzZSAqIHliYXNlO1xuICAgICAgICAgICAgc3VtICs9IEN2YWx1ZXNbaV0gKiBtYXRoLnNxcnQoY29tYik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHoyICogc3VtO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRUYXRMZW4oeDEsIHkxLCB4MiwgeTIsIHgzLCB5MywgeDQsIHk0LCBsbCkge1xuICAgICAgICBpZiAobGwgPCAwIHx8IGJlemxlbih4MSwgeTEsIHgyLCB5MiwgeDMsIHkzLCB4NCwgeTQpIDwgbGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdCA9IDEsXG4gICAgICAgICAgICBzdGVwID0gdCAvIDIsXG4gICAgICAgICAgICB0MiA9IHQgLSBzdGVwLFxuICAgICAgICAgICAgbCxcbiAgICAgICAgICAgIGUgPSAuMDE7XG4gICAgICAgIGwgPSBiZXpsZW4oeDEsIHkxLCB4MiwgeTIsIHgzLCB5MywgeDQsIHk0LCB0Mik7XG4gICAgICAgIHdoaWxlIChhYnMobCAtIGxsKSA+IGUpIHtcbiAgICAgICAgICAgIHN0ZXAgLz0gMjtcbiAgICAgICAgICAgIHQyICs9IChsIDwgbGwgPyAxIDogLTEpICogc3RlcDtcbiAgICAgICAgICAgIGwgPSBiZXpsZW4oeDEsIHkxLCB4MiwgeTIsIHgzLCB5MywgeDQsIHk0LCB0Mik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQyO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpbnRlcnNlY3QoeDEsIHkxLCB4MiwgeTIsIHgzLCB5MywgeDQsIHk0KSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIG1tYXgoeDEsIHgyKSA8IG1taW4oeDMsIHg0KSB8fFxuICAgICAgICAgICAgbW1pbih4MSwgeDIpID4gbW1heCh4MywgeDQpIHx8XG4gICAgICAgICAgICBtbWF4KHkxLCB5MikgPCBtbWluKHkzLCB5NCkgfHxcbiAgICAgICAgICAgIG1taW4oeTEsIHkyKSA+IG1tYXgoeTMsIHk0KVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbnggPSAoeDEgKiB5MiAtIHkxICogeDIpICogKHgzIC0geDQpIC0gKHgxIC0geDIpICogKHgzICogeTQgLSB5MyAqIHg0KSxcbiAgICAgICAgICAgIG55ID0gKHgxICogeTIgLSB5MSAqIHgyKSAqICh5MyAtIHk0KSAtICh5MSAtIHkyKSAqICh4MyAqIHk0IC0geTMgKiB4NCksXG4gICAgICAgICAgICBkZW5vbWluYXRvciA9ICh4MSAtIHgyKSAqICh5MyAtIHk0KSAtICh5MSAtIHkyKSAqICh4MyAtIHg0KTtcblxuICAgICAgICBpZiAoIWRlbm9taW5hdG9yKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHB4ID0gbnggLyBkZW5vbWluYXRvcixcbiAgICAgICAgICAgIHB5ID0gbnkgLyBkZW5vbWluYXRvcixcbiAgICAgICAgICAgIHB4MiA9ICtweC50b0ZpeGVkKDIpLFxuICAgICAgICAgICAgcHkyID0gK3B5LnRvRml4ZWQoMik7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHB4MiA8ICttbWluKHgxLCB4MikudG9GaXhlZCgyKSB8fFxuICAgICAgICAgICAgcHgyID4gK21tYXgoeDEsIHgyKS50b0ZpeGVkKDIpIHx8XG4gICAgICAgICAgICBweDIgPCArbW1pbih4MywgeDQpLnRvRml4ZWQoMikgfHxcbiAgICAgICAgICAgIHB4MiA+ICttbWF4KHgzLCB4NCkudG9GaXhlZCgyKSB8fFxuICAgICAgICAgICAgcHkyIDwgK21taW4oeTEsIHkyKS50b0ZpeGVkKDIpIHx8XG4gICAgICAgICAgICBweTIgPiArbW1heCh5MSwgeTIpLnRvRml4ZWQoMikgfHxcbiAgICAgICAgICAgIHB5MiA8ICttbWluKHkzLCB5NCkudG9GaXhlZCgyKSB8fFxuICAgICAgICAgICAgcHkyID4gK21tYXgoeTMsIHk0KS50b0ZpeGVkKDIpXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7eDogcHgsIHk6IHB5fTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaW50ZXIoYmV6MSwgYmV6Mikge1xuICAgICAgICByZXR1cm4gaW50ZXJIZWxwZXIoYmV6MSwgYmV6Mik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGludGVyQ291bnQoYmV6MSwgYmV6Mikge1xuICAgICAgICByZXR1cm4gaW50ZXJIZWxwZXIoYmV6MSwgYmV6MiwgMSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGludGVySGVscGVyKGJlejEsIGJlejIsIGp1c3RDb3VudCkge1xuICAgICAgICB2YXIgYmJveDEgPSBSLmJlemllckJCb3goYmV6MSksXG4gICAgICAgICAgICBiYm94MiA9IFIuYmV6aWVyQkJveChiZXoyKTtcbiAgICAgICAgaWYgKCFSLmlzQkJveEludGVyc2VjdChiYm94MSwgYmJveDIpKSB7XG4gICAgICAgICAgICByZXR1cm4ganVzdENvdW50ID8gMCA6IFtdO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsMSA9IGJlemxlbi5hcHBseSgwLCBiZXoxKSxcbiAgICAgICAgICAgIGwyID0gYmV6bGVuLmFwcGx5KDAsIGJlejIpLFxuICAgICAgICAgICAgbjEgPSBtbWF4KH5+KGwxIC8gNSksIDEpLFxuICAgICAgICAgICAgbjIgPSBtbWF4KH5+KGwyIC8gNSksIDEpLFxuICAgICAgICAgICAgZG90czEgPSBbXSxcbiAgICAgICAgICAgIGRvdHMyID0gW10sXG4gICAgICAgICAgICB4eSA9IHt9LFxuICAgICAgICAgICAgcmVzID0ganVzdENvdW50ID8gMCA6IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG4xICsgMTsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgcCA9IFIuZmluZERvdHNBdFNlZ21lbnQuYXBwbHkoUiwgYmV6MS5jb25jYXQoaSAvIG4xKSk7XG4gICAgICAgICAgICBkb3RzMS5wdXNoKHt4OiBwLngsIHk6IHAueSwgdDogaSAvIG4xfSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IG4yICsgMTsgaSsrKSB7XG4gICAgICAgICAgICBwID0gUi5maW5kRG90c0F0U2VnbWVudC5hcHBseShSLCBiZXoyLmNvbmNhdChpIC8gbjIpKTtcbiAgICAgICAgICAgIGRvdHMyLnB1c2goe3g6IHAueCwgeTogcC55LCB0OiBpIC8gbjJ9KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbjE7IGkrKykge1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBuMjsgaisrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpID0gZG90czFbaV0sXG4gICAgICAgICAgICAgICAgICAgIGRpMSA9IGRvdHMxW2kgKyAxXSxcbiAgICAgICAgICAgICAgICAgICAgZGogPSBkb3RzMltqXSxcbiAgICAgICAgICAgICAgICAgICAgZGoxID0gZG90czJbaiArIDFdLFxuICAgICAgICAgICAgICAgICAgICBjaSA9IGFicyhkaTEueCAtIGRpLngpIDwgLjAwMSA/IFwieVwiIDogXCJ4XCIsXG4gICAgICAgICAgICAgICAgICAgIGNqID0gYWJzKGRqMS54IC0gZGoueCkgPCAuMDAxID8gXCJ5XCIgOiBcInhcIixcbiAgICAgICAgICAgICAgICAgICAgaXMgPSBpbnRlcnNlY3QoZGkueCwgZGkueSwgZGkxLngsIGRpMS55LCBkai54LCBkai55LCBkajEueCwgZGoxLnkpO1xuICAgICAgICAgICAgICAgIGlmIChpcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoeHlbaXMueC50b0ZpeGVkKDQpXSA9PSBpcy55LnRvRml4ZWQoNCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHh5W2lzLngudG9GaXhlZCg0KV0gPSBpcy55LnRvRml4ZWQoNCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0MSA9IGRpLnQgKyBhYnMoKGlzW2NpXSAtIGRpW2NpXSkgLyAoZGkxW2NpXSAtIGRpW2NpXSkpICogKGRpMS50IC0gZGkudCksXG4gICAgICAgICAgICAgICAgICAgICAgICB0MiA9IGRqLnQgKyBhYnMoKGlzW2NqXSAtIGRqW2NqXSkgLyAoZGoxW2NqXSAtIGRqW2NqXSkpICogKGRqMS50IC0gZGoudCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0MSA+PSAwICYmIHQxIDw9IDEuMDAxICYmIHQyID49IDAgJiYgdDIgPD0gMS4wMDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqdXN0Q291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBpcy54LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBpcy55LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0MTogbW1pbih0MSwgMSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQyOiBtbWluKHQyLCAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLnBhdGhJbnRlcnNlY3Rpb25cbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFV0aWxpdHkgbWV0aG9kXG4gICAgICoqXG4gICAgICogRmluZHMgaW50ZXJzZWN0aW9ucyBvZiB0d28gcGF0aHNcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gcGF0aDEgKHN0cmluZykgcGF0aCBzdHJpbmdcbiAgICAgLSBwYXRoMiAoc3RyaW5nKSBwYXRoIHN0cmluZ1xuICAgICA9IChhcnJheSkgZG90cyBvZiBpbnRlcnNlY3Rpb25cbiAgICAgbyBbXG4gICAgIG8gICAgIHtcbiAgICAgbyAgICAgICAgIHg6IChudW1iZXIpIHggY29vcmRpbmF0ZSBvZiB0aGUgcG9pbnRcbiAgICAgbyAgICAgICAgIHk6IChudW1iZXIpIHkgY29vcmRpbmF0ZSBvZiB0aGUgcG9pbnRcbiAgICAgbyAgICAgICAgIHQxOiAobnVtYmVyKSB0IHZhbHVlIGZvciBzZWdtZW50IG9mIHBhdGgxXG4gICAgIG8gICAgICAgICB0MjogKG51bWJlcikgdCB2YWx1ZSBmb3Igc2VnbWVudCBvZiBwYXRoMlxuICAgICBvICAgICAgICAgc2VnbWVudDE6IChudW1iZXIpIG9yZGVyIG51bWJlciBmb3Igc2VnbWVudCBvZiBwYXRoMVxuICAgICBvICAgICAgICAgc2VnbWVudDI6IChudW1iZXIpIG9yZGVyIG51bWJlciBmb3Igc2VnbWVudCBvZiBwYXRoMlxuICAgICBvICAgICAgICAgYmV6MTogKGFycmF5KSBlaWdodCBjb29yZGluYXRlcyByZXByZXNlbnRpbmcgYmV6acOpciBjdXJ2ZSBmb3IgdGhlIHNlZ21lbnQgb2YgcGF0aDFcbiAgICAgbyAgICAgICAgIGJlejI6IChhcnJheSkgZWlnaHQgY29vcmRpbmF0ZXMgcmVwcmVzZW50aW5nIGJlemnDqXIgY3VydmUgZm9yIHRoZSBzZWdtZW50IG9mIHBhdGgyXG4gICAgIG8gICAgIH1cbiAgICAgbyBdXG4gICAgXFwqL1xuICAgIFIucGF0aEludGVyc2VjdGlvbiA9IGZ1bmN0aW9uIChwYXRoMSwgcGF0aDIpIHtcbiAgICAgICAgcmV0dXJuIGludGVyUGF0aEhlbHBlcihwYXRoMSwgcGF0aDIpO1xuICAgIH07XG4gICAgUi5wYXRoSW50ZXJzZWN0aW9uTnVtYmVyID0gZnVuY3Rpb24gKHBhdGgxLCBwYXRoMikge1xuICAgICAgICByZXR1cm4gaW50ZXJQYXRoSGVscGVyKHBhdGgxLCBwYXRoMiwgMSk7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBpbnRlclBhdGhIZWxwZXIocGF0aDEsIHBhdGgyLCBqdXN0Q291bnQpIHtcbiAgICAgICAgcGF0aDEgPSBSLl9wYXRoMmN1cnZlKHBhdGgxKTtcbiAgICAgICAgcGF0aDIgPSBSLl9wYXRoMmN1cnZlKHBhdGgyKTtcbiAgICAgICAgdmFyIHgxLCB5MSwgeDIsIHkyLCB4MW0sIHkxbSwgeDJtLCB5Mm0sIGJlejEsIGJlejIsXG4gICAgICAgICAgICByZXMgPSBqdXN0Q291bnQgPyAwIDogW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHBhdGgxLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBwaSA9IHBhdGgxW2ldO1xuICAgICAgICAgICAgaWYgKHBpWzBdID09IFwiTVwiKSB7XG4gICAgICAgICAgICAgICAgeDEgPSB4MW0gPSBwaVsxXTtcbiAgICAgICAgICAgICAgICB5MSA9IHkxbSA9IHBpWzJdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAocGlbMF0gPT0gXCJDXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgYmV6MSA9IFt4MSwgeTFdLmNvbmNhdChwaS5zbGljZSgxKSk7XG4gICAgICAgICAgICAgICAgICAgIHgxID0gYmV6MVs2XTtcbiAgICAgICAgICAgICAgICAgICAgeTEgPSBiZXoxWzddO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJlejEgPSBbeDEsIHkxLCB4MSwgeTEsIHgxbSwgeTFtLCB4MW0sIHkxbV07XG4gICAgICAgICAgICAgICAgICAgIHgxID0geDFtO1xuICAgICAgICAgICAgICAgICAgICB5MSA9IHkxbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpqID0gcGF0aDIubGVuZ3RoOyBqIDwgamo7IGorKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGogPSBwYXRoMltqXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBqWzBdID09IFwiTVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4MiA9IHgybSA9IHBqWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgeTIgPSB5Mm0gPSBwalsyXTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwalswXSA9PSBcIkNcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlejIgPSBbeDIsIHkyXS5jb25jYXQocGouc2xpY2UoMSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHgyID0gYmV6Mls2XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5MiA9IGJlejJbN107XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlejIgPSBbeDIsIHkyLCB4MiwgeTIsIHgybSwgeTJtLCB4Mm0sIHkybV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeDIgPSB4Mm07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeTIgPSB5Mm07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW50ciA9IGludGVySGVscGVyKGJlejEsIGJlejIsIGp1c3RDb3VudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoanVzdENvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzICs9IGludHI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwLCBrayA9IGludHIubGVuZ3RoOyBrIDwga2s7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRyW2tdLnNlZ21lbnQxID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50cltrXS5zZWdtZW50MiA9IGo7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludHJba10uYmV6MSA9IGJlejE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludHJba10uYmV6MiA9IGJlejI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IHJlcy5jb25jYXQoaW50cik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuaXNQb2ludEluc2lkZVBhdGhcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFV0aWxpdHkgbWV0aG9kXG4gICAgICoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgZ2l2ZW4gcG9pbnQgaXMgaW5zaWRlIGEgZ2l2ZW4gY2xvc2VkIHBhdGguXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIHBhdGggKHN0cmluZykgcGF0aCBzdHJpbmdcbiAgICAgLSB4IChudW1iZXIpIHggb2YgdGhlIHBvaW50XG4gICAgIC0geSAobnVtYmVyKSB5IG9mIHRoZSBwb2ludFxuICAgICA9IChib29sZWFuKSB0cnVlLCBpZiBwb2ludCBpcyBpbnNpZGUgdGhlIHBhdGhcbiAgICBcXCovXG4gICAgUi5pc1BvaW50SW5zaWRlUGF0aCA9IGZ1bmN0aW9uIChwYXRoLCB4LCB5KSB7XG4gICAgICAgIHZhciBiYm94ID0gUi5wYXRoQkJveChwYXRoKTtcbiAgICAgICAgcmV0dXJuIFIuaXNQb2ludEluc2lkZUJCb3goYmJveCwgeCwgeSkgJiZcbiAgICAgICAgICAgICAgIGludGVyUGF0aEhlbHBlcihwYXRoLCBbW1wiTVwiLCB4LCB5XSwgW1wiSFwiLCBiYm94LngyICsgMTBdXSwgMSkgJSAyID09IDE7XG4gICAgfTtcbiAgICBSLl9yZW1vdmVkRmFjdG9yeSA9IGZ1bmN0aW9uIChtZXRob2RuYW1lKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBldmUoXCJyYXBoYWVsLmxvZ1wiLCBudWxsLCBcIlJhcGhhXFx4ZWJsOiB5b3UgYXJlIGNhbGxpbmcgdG8gbWV0aG9kIFxcdTIwMWNcIiArIG1ldGhvZG5hbWUgKyBcIlxcdTIwMWQgb2YgcmVtb3ZlZCBvYmplY3RcIiwgbWV0aG9kbmFtZSk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5wYXRoQkJveFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogVXRpbGl0eSBtZXRob2RcbiAgICAgKipcbiAgICAgKiBSZXR1cm4gYm91bmRpbmcgYm94IG9mIGEgZ2l2ZW4gcGF0aFxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBwYXRoIChzdHJpbmcpIHBhdGggc3RyaW5nXG4gICAgID0gKG9iamVjdCkgYm91bmRpbmcgYm94XG4gICAgIG8ge1xuICAgICBvICAgICB4OiAobnVtYmVyKSB4IGNvb3JkaW5hdGUgb2YgdGhlIGxlZnQgdG9wIHBvaW50IG9mIHRoZSBib3hcbiAgICAgbyAgICAgeTogKG51bWJlcikgeSBjb29yZGluYXRlIG9mIHRoZSBsZWZ0IHRvcCBwb2ludCBvZiB0aGUgYm94XG4gICAgIG8gICAgIHgyOiAobnVtYmVyKSB4IGNvb3JkaW5hdGUgb2YgdGhlIHJpZ2h0IGJvdHRvbSBwb2ludCBvZiB0aGUgYm94XG4gICAgIG8gICAgIHkyOiAobnVtYmVyKSB5IGNvb3JkaW5hdGUgb2YgdGhlIHJpZ2h0IGJvdHRvbSBwb2ludCBvZiB0aGUgYm94XG4gICAgIG8gICAgIHdpZHRoOiAobnVtYmVyKSB3aWR0aCBvZiB0aGUgYm94XG4gICAgIG8gICAgIGhlaWdodDogKG51bWJlcikgaGVpZ2h0IG9mIHRoZSBib3hcbiAgICAgbyAgICAgY3g6IChudW1iZXIpIHggY29vcmRpbmF0ZSBvZiB0aGUgY2VudGVyIG9mIHRoZSBib3hcbiAgICAgbyAgICAgY3k6IChudW1iZXIpIHkgY29vcmRpbmF0ZSBvZiB0aGUgY2VudGVyIG9mIHRoZSBib3hcbiAgICAgbyB9XG4gICAgXFwqL1xuICAgIHZhciBwYXRoRGltZW5zaW9ucyA9IFIucGF0aEJCb3ggPSBmdW5jdGlvbiAocGF0aCkge1xuICAgICAgICB2YXIgcHRoID0gcGF0aHMocGF0aCk7XG4gICAgICAgIGlmIChwdGguYmJveCkge1xuICAgICAgICAgICAgcmV0dXJuIGNsb25lKHB0aC5iYm94KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXBhdGgpIHtcbiAgICAgICAgICAgIHJldHVybiB7eDogMCwgeTogMCwgd2lkdGg6IDAsIGhlaWdodDogMCwgeDI6IDAsIHkyOiAwfTtcbiAgICAgICAgfVxuICAgICAgICBwYXRoID0gcGF0aDJjdXJ2ZShwYXRoKTtcbiAgICAgICAgdmFyIHggPSAwLFxuICAgICAgICAgICAgeSA9IDAsXG4gICAgICAgICAgICBYID0gW10sXG4gICAgICAgICAgICBZID0gW10sXG4gICAgICAgICAgICBwO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBwYXRoLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgIHAgPSBwYXRoW2ldO1xuICAgICAgICAgICAgaWYgKHBbMF0gPT0gXCJNXCIpIHtcbiAgICAgICAgICAgICAgICB4ID0gcFsxXTtcbiAgICAgICAgICAgICAgICB5ID0gcFsyXTtcbiAgICAgICAgICAgICAgICBYLnB1c2goeCk7XG4gICAgICAgICAgICAgICAgWS5wdXNoKHkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgZGltID0gY3VydmVEaW0oeCwgeSwgcFsxXSwgcFsyXSwgcFszXSwgcFs0XSwgcFs1XSwgcFs2XSk7XG4gICAgICAgICAgICAgICAgWCA9IFhbY29uY2F0XShkaW0ubWluLngsIGRpbS5tYXgueCk7XG4gICAgICAgICAgICAgICAgWSA9IFlbY29uY2F0XShkaW0ubWluLnksIGRpbS5tYXgueSk7XG4gICAgICAgICAgICAgICAgeCA9IHBbNV07XG4gICAgICAgICAgICAgICAgeSA9IHBbNl07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHhtaW4gPSBtbWluW2FwcGx5XSgwLCBYKSxcbiAgICAgICAgICAgIHltaW4gPSBtbWluW2FwcGx5XSgwLCBZKSxcbiAgICAgICAgICAgIHhtYXggPSBtbWF4W2FwcGx5XSgwLCBYKSxcbiAgICAgICAgICAgIHltYXggPSBtbWF4W2FwcGx5XSgwLCBZKSxcbiAgICAgICAgICAgIHdpZHRoID0geG1heCAtIHhtaW4sXG4gICAgICAgICAgICBoZWlnaHQgPSB5bWF4IC0geW1pbixcbiAgICAgICAgICAgICAgICBiYiA9IHtcbiAgICAgICAgICAgICAgICB4OiB4bWluLFxuICAgICAgICAgICAgICAgIHk6IHltaW4sXG4gICAgICAgICAgICAgICAgeDI6IHhtYXgsXG4gICAgICAgICAgICAgICAgeTI6IHltYXgsXG4gICAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0LFxuICAgICAgICAgICAgICAgIGN4OiB4bWluICsgd2lkdGggLyAyLFxuICAgICAgICAgICAgICAgIGN5OiB5bWluICsgaGVpZ2h0IC8gMlxuICAgICAgICAgICAgfTtcbiAgICAgICAgcHRoLmJib3ggPSBjbG9uZShiYik7XG4gICAgICAgIHJldHVybiBiYjtcbiAgICB9LFxuICAgICAgICBwYXRoQ2xvbmUgPSBmdW5jdGlvbiAocGF0aEFycmF5KSB7XG4gICAgICAgICAgICB2YXIgcmVzID0gY2xvbmUocGF0aEFycmF5KTtcbiAgICAgICAgICAgIHJlcy50b1N0cmluZyA9IFIuX3BhdGgyc3RyaW5nO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSxcbiAgICAgICAgcGF0aFRvUmVsYXRpdmUgPSBSLl9wYXRoVG9SZWxhdGl2ZSA9IGZ1bmN0aW9uIChwYXRoQXJyYXkpIHtcbiAgICAgICAgICAgIHZhciBwdGggPSBwYXRocyhwYXRoQXJyYXkpO1xuICAgICAgICAgICAgaWYgKHB0aC5yZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGF0aENsb25lKHB0aC5yZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFSLmlzKHBhdGhBcnJheSwgYXJyYXkpIHx8ICFSLmlzKHBhdGhBcnJheSAmJiBwYXRoQXJyYXlbMF0sIGFycmF5KSkgeyAvLyByb3VnaCBhc3N1bXB0aW9uXG4gICAgICAgICAgICAgICAgcGF0aEFycmF5ID0gUi5wYXJzZVBhdGhTdHJpbmcocGF0aEFycmF5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciByZXMgPSBbXSxcbiAgICAgICAgICAgICAgICB4ID0gMCxcbiAgICAgICAgICAgICAgICB5ID0gMCxcbiAgICAgICAgICAgICAgICBteCA9IDAsXG4gICAgICAgICAgICAgICAgbXkgPSAwLFxuICAgICAgICAgICAgICAgIHN0YXJ0ID0gMDtcbiAgICAgICAgICAgIGlmIChwYXRoQXJyYXlbMF1bMF0gPT0gXCJNXCIpIHtcbiAgICAgICAgICAgICAgICB4ID0gcGF0aEFycmF5WzBdWzFdO1xuICAgICAgICAgICAgICAgIHkgPSBwYXRoQXJyYXlbMF1bMl07XG4gICAgICAgICAgICAgICAgbXggPSB4O1xuICAgICAgICAgICAgICAgIG15ID0geTtcbiAgICAgICAgICAgICAgICBzdGFydCsrO1xuICAgICAgICAgICAgICAgIHJlcy5wdXNoKFtcIk1cIiwgeCwgeV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0LCBpaSA9IHBhdGhBcnJheS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHIgPSByZXNbaV0gPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgcGEgPSBwYXRoQXJyYXlbaV07XG4gICAgICAgICAgICAgICAgaWYgKHBhWzBdICE9IGxvd2VyQ2FzZS5jYWxsKHBhWzBdKSkge1xuICAgICAgICAgICAgICAgICAgICByWzBdID0gbG93ZXJDYXNlLmNhbGwocGFbMF0pO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgclsxXSA9IHBhWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbMl0gPSBwYVsyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByWzNdID0gcGFbM107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcls0XSA9IHBhWzRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbNV0gPSBwYVs1XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByWzZdID0gKyhwYVs2XSAtIHgpLnRvRml4ZWQoMyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcls3XSA9ICsocGFbN10gLSB5KS50b0ZpeGVkKDMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByWzFdID0gKyhwYVsxXSAtIHkpLnRvRml4ZWQoMyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG14ID0gcGFbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXkgPSBwYVsyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDEsIGpqID0gcGEubGVuZ3RoOyBqIDwgamo7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByW2pdID0gKyhwYVtqXSAtICgoaiAlIDIpID8geCA6IHkpKS50b0ZpeGVkKDMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHIgPSByZXNbaV0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhWzBdID09IFwibVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBteCA9IHBhWzFdICsgeDtcbiAgICAgICAgICAgICAgICAgICAgICAgIG15ID0gcGFbMl0gKyB5O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwLCBrayA9IHBhLmxlbmd0aDsgayA8IGtrOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc1tpXVtrXSA9IHBhW2tdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBsZW4gPSByZXNbaV0ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocmVzW2ldWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ6XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICB4ID0gbXg7XG4gICAgICAgICAgICAgICAgICAgICAgICB5ID0gbXk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImhcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHggKz0gK3Jlc1tpXVtsZW4gLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgeSArPSArcmVzW2ldW2xlbiAtIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB4ICs9ICtyZXNbaV1bbGVuIC0gMl07XG4gICAgICAgICAgICAgICAgICAgICAgICB5ICs9ICtyZXNbaV1bbGVuIC0gMV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzLnRvU3RyaW5nID0gUi5fcGF0aDJzdHJpbmc7XG4gICAgICAgICAgICBwdGgucmVsID0gcGF0aENsb25lKHJlcyk7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9LFxuICAgICAgICBwYXRoVG9BYnNvbHV0ZSA9IFIuX3BhdGhUb0Fic29sdXRlID0gZnVuY3Rpb24gKHBhdGhBcnJheSkge1xuICAgICAgICAgICAgdmFyIHB0aCA9IHBhdGhzKHBhdGhBcnJheSk7XG4gICAgICAgICAgICBpZiAocHRoLmFicykge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXRoQ2xvbmUocHRoLmFicyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIVIuaXMocGF0aEFycmF5LCBhcnJheSkgfHwgIVIuaXMocGF0aEFycmF5ICYmIHBhdGhBcnJheVswXSwgYXJyYXkpKSB7IC8vIHJvdWdoIGFzc3VtcHRpb25cbiAgICAgICAgICAgICAgICBwYXRoQXJyYXkgPSBSLnBhcnNlUGF0aFN0cmluZyhwYXRoQXJyYXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFwYXRoQXJyYXkgfHwgIXBhdGhBcnJheS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW1tcIk1cIiwgMCwgMF1dO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJlcyA9IFtdLFxuICAgICAgICAgICAgICAgIHggPSAwLFxuICAgICAgICAgICAgICAgIHkgPSAwLFxuICAgICAgICAgICAgICAgIG14ID0gMCxcbiAgICAgICAgICAgICAgICBteSA9IDAsXG4gICAgICAgICAgICAgICAgc3RhcnQgPSAwO1xuICAgICAgICAgICAgaWYgKHBhdGhBcnJheVswXVswXSA9PSBcIk1cIikge1xuICAgICAgICAgICAgICAgIHggPSArcGF0aEFycmF5WzBdWzFdO1xuICAgICAgICAgICAgICAgIHkgPSArcGF0aEFycmF5WzBdWzJdO1xuICAgICAgICAgICAgICAgIG14ID0geDtcbiAgICAgICAgICAgICAgICBteSA9IHk7XG4gICAgICAgICAgICAgICAgc3RhcnQrKztcbiAgICAgICAgICAgICAgICByZXNbMF0gPSBbXCJNXCIsIHgsIHldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNyeiA9IHBhdGhBcnJheS5sZW5ndGggPT0gMyAmJiBwYXRoQXJyYXlbMF1bMF0gPT0gXCJNXCIgJiYgcGF0aEFycmF5WzFdWzBdLnRvVXBwZXJDYXNlKCkgPT0gXCJSXCIgJiYgcGF0aEFycmF5WzJdWzBdLnRvVXBwZXJDYXNlKCkgPT0gXCJaXCI7XG4gICAgICAgICAgICBmb3IgKHZhciByLCBwYSwgaSA9IHN0YXJ0LCBpaSA9IHBhdGhBcnJheS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcmVzLnB1c2gociA9IFtdKTtcbiAgICAgICAgICAgICAgICBwYSA9IHBhdGhBcnJheVtpXTtcbiAgICAgICAgICAgICAgICBpZiAocGFbMF0gIT0gdXBwZXJDYXNlLmNhbGwocGFbMF0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHJbMF0gPSB1cHBlckNhc2UuY2FsbChwYVswXSk7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoclswXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkFcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByWzFdID0gcGFbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgclsyXSA9IHBhWzJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbM10gPSBwYVszXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByWzRdID0gcGFbNF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcls1XSA9IHBhWzVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbNl0gPSArKHBhWzZdICsgeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcls3XSA9ICsocGFbN10gKyB5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJWXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgclsxXSA9ICtwYVsxXSArIHk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiSFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbMV0gPSArcGFbMV0gKyB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlJcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZG90cyA9IFt4LCB5XVtjb25jYXRdKHBhLnNsaWNlKDEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMiwgamogPSBkb3RzLmxlbmd0aDsgaiA8IGpqOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG90c1tqXSA9ICtkb3RzW2pdICsgeDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG90c1srK2pdID0gK2RvdHNbal0gKyB5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gcmVzW2NvbmNhdF0oY2F0bXVsbFJvbTJiZXppZXIoZG90cywgY3J6KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiTVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG14ID0gK3BhWzFdICsgeDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBteSA9ICtwYVsyXSArIHk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaiA9IDEsIGpqID0gcGEubGVuZ3RoOyBqIDwgamo7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByW2pdID0gK3BhW2pdICsgKChqICUgMikgPyB4IDogeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYVswXSA9PSBcIlJcIikge1xuICAgICAgICAgICAgICAgICAgICBkb3RzID0gW3gsIHldW2NvbmNhdF0ocGEuc2xpY2UoMSkpO1xuICAgICAgICAgICAgICAgICAgICByZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIHJlcyA9IHJlc1tjb25jYXRdKGNhdG11bGxSb20yYmV6aWVyKGRvdHMsIGNyeikpO1xuICAgICAgICAgICAgICAgICAgICByID0gW1wiUlwiXVtjb25jYXRdKHBhLnNsaWNlKC0yKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDAsIGtrID0gcGEubGVuZ3RoOyBrIDwga2s7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcltrXSA9IHBhW2tdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN3aXRjaCAoclswXSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiWlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgeCA9IG14O1xuICAgICAgICAgICAgICAgICAgICAgICAgeSA9IG15O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJIXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICB4ID0gclsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiVlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgeSA9IHJbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIk1cIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIG14ID0gcltyLmxlbmd0aCAtIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbXkgPSByW3IubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB4ID0gcltyLmxlbmd0aCAtIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgeSA9IHJbci5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXMudG9TdHJpbmcgPSBSLl9wYXRoMnN0cmluZztcbiAgICAgICAgICAgIHB0aC5hYnMgPSBwYXRoQ2xvbmUocmVzKTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0sXG4gICAgICAgIGwyYyA9IGZ1bmN0aW9uICh4MSwgeTEsIHgyLCB5Mikge1xuICAgICAgICAgICAgcmV0dXJuIFt4MSwgeTEsIHgyLCB5MiwgeDIsIHkyXTtcbiAgICAgICAgfSxcbiAgICAgICAgcTJjID0gZnVuY3Rpb24gKHgxLCB5MSwgYXgsIGF5LCB4MiwgeTIpIHtcbiAgICAgICAgICAgIHZhciBfMTMgPSAxIC8gMyxcbiAgICAgICAgICAgICAgICBfMjMgPSAyIC8gMztcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgIF8xMyAqIHgxICsgXzIzICogYXgsXG4gICAgICAgICAgICAgICAgICAgIF8xMyAqIHkxICsgXzIzICogYXksXG4gICAgICAgICAgICAgICAgICAgIF8xMyAqIHgyICsgXzIzICogYXgsXG4gICAgICAgICAgICAgICAgICAgIF8xMyAqIHkyICsgXzIzICogYXksXG4gICAgICAgICAgICAgICAgICAgIHgyLFxuICAgICAgICAgICAgICAgICAgICB5MlxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgIH0sXG4gICAgICAgIGEyYyA9IGZ1bmN0aW9uICh4MSwgeTEsIHJ4LCByeSwgYW5nbGUsIGxhcmdlX2FyY19mbGFnLCBzd2VlcF9mbGFnLCB4MiwgeTIsIHJlY3Vyc2l2ZSkge1xuICAgICAgICAgICAgLy8gZm9yIG1vcmUgaW5mb3JtYXRpb24gb2Ygd2hlcmUgdGhpcyBtYXRoIGNhbWUgZnJvbSB2aXNpdDpcbiAgICAgICAgICAgIC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ltcGxub3RlLmh0bWwjQXJjSW1wbGVtZW50YXRpb25Ob3Rlc1xuICAgICAgICAgICAgdmFyIF8xMjAgPSBQSSAqIDEyMCAvIDE4MCxcbiAgICAgICAgICAgICAgICByYWQgPSBQSSAvIDE4MCAqICgrYW5nbGUgfHwgMCksXG4gICAgICAgICAgICAgICAgcmVzID0gW10sXG4gICAgICAgICAgICAgICAgeHksXG4gICAgICAgICAgICAgICAgcm90YXRlID0gY2FjaGVyKGZ1bmN0aW9uICh4LCB5LCByYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIFggPSB4ICogbWF0aC5jb3MocmFkKSAtIHkgKiBtYXRoLnNpbihyYWQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgWSA9IHggKiBtYXRoLnNpbihyYWQpICsgeSAqIG1hdGguY29zKHJhZCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7eDogWCwgeTogWX07XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIXJlY3Vyc2l2ZSkge1xuICAgICAgICAgICAgICAgIHh5ID0gcm90YXRlKHgxLCB5MSwgLXJhZCk7XG4gICAgICAgICAgICAgICAgeDEgPSB4eS54O1xuICAgICAgICAgICAgICAgIHkxID0geHkueTtcbiAgICAgICAgICAgICAgICB4eSA9IHJvdGF0ZSh4MiwgeTIsIC1yYWQpO1xuICAgICAgICAgICAgICAgIHgyID0geHkueDtcbiAgICAgICAgICAgICAgICB5MiA9IHh5Lnk7XG4gICAgICAgICAgICAgICAgdmFyIGNvcyA9IG1hdGguY29zKFBJIC8gMTgwICogYW5nbGUpLFxuICAgICAgICAgICAgICAgICAgICBzaW4gPSBtYXRoLnNpbihQSSAvIDE4MCAqIGFuZ2xlKSxcbiAgICAgICAgICAgICAgICAgICAgeCA9ICh4MSAtIHgyKSAvIDIsXG4gICAgICAgICAgICAgICAgICAgIHkgPSAoeTEgLSB5MikgLyAyO1xuICAgICAgICAgICAgICAgIHZhciBoID0gKHggKiB4KSAvIChyeCAqIHJ4KSArICh5ICogeSkgLyAocnkgKiByeSk7XG4gICAgICAgICAgICAgICAgaWYgKGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGggPSBtYXRoLnNxcnQoaCk7XG4gICAgICAgICAgICAgICAgICAgIHJ4ID0gaCAqIHJ4O1xuICAgICAgICAgICAgICAgICAgICByeSA9IGggKiByeTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHJ4MiA9IHJ4ICogcngsXG4gICAgICAgICAgICAgICAgICAgIHJ5MiA9IHJ5ICogcnksXG4gICAgICAgICAgICAgICAgICAgIGsgPSAobGFyZ2VfYXJjX2ZsYWcgPT0gc3dlZXBfZmxhZyA/IC0xIDogMSkgKlxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0aC5zcXJ0KGFicygocngyICogcnkyIC0gcngyICogeSAqIHkgLSByeTIgKiB4ICogeCkgLyAocngyICogeSAqIHkgKyByeTIgKiB4ICogeCkpKSxcbiAgICAgICAgICAgICAgICAgICAgY3ggPSBrICogcnggKiB5IC8gcnkgKyAoeDEgKyB4MikgLyAyLFxuICAgICAgICAgICAgICAgICAgICBjeSA9IGsgKiAtcnkgKiB4IC8gcnggKyAoeTEgKyB5MikgLyAyLFxuICAgICAgICAgICAgICAgICAgICBmMSA9IG1hdGguYXNpbigoKHkxIC0gY3kpIC8gcnkpLnRvRml4ZWQoOSkpLFxuICAgICAgICAgICAgICAgICAgICBmMiA9IG1hdGguYXNpbigoKHkyIC0gY3kpIC8gcnkpLnRvRml4ZWQoOSkpO1xuXG4gICAgICAgICAgICAgICAgZjEgPSB4MSA8IGN4ID8gUEkgLSBmMSA6IGYxO1xuICAgICAgICAgICAgICAgIGYyID0geDIgPCBjeCA/IFBJIC0gZjIgOiBmMjtcbiAgICAgICAgICAgICAgICBmMSA8IDAgJiYgKGYxID0gUEkgKiAyICsgZjEpO1xuICAgICAgICAgICAgICAgIGYyIDwgMCAmJiAoZjIgPSBQSSAqIDIgKyBmMik7XG4gICAgICAgICAgICAgICAgaWYgKHN3ZWVwX2ZsYWcgJiYgZjEgPiBmMikge1xuICAgICAgICAgICAgICAgICAgICBmMSA9IGYxIC0gUEkgKiAyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIXN3ZWVwX2ZsYWcgJiYgZjIgPiBmMSkge1xuICAgICAgICAgICAgICAgICAgICBmMiA9IGYyIC0gUEkgKiAyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZjEgPSByZWN1cnNpdmVbMF07XG4gICAgICAgICAgICAgICAgZjIgPSByZWN1cnNpdmVbMV07XG4gICAgICAgICAgICAgICAgY3ggPSByZWN1cnNpdmVbMl07XG4gICAgICAgICAgICAgICAgY3kgPSByZWN1cnNpdmVbM107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZGYgPSBmMiAtIGYxO1xuICAgICAgICAgICAgaWYgKGFicyhkZikgPiBfMTIwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGYyb2xkID0gZjIsXG4gICAgICAgICAgICAgICAgICAgIHgyb2xkID0geDIsXG4gICAgICAgICAgICAgICAgICAgIHkyb2xkID0geTI7XG4gICAgICAgICAgICAgICAgZjIgPSBmMSArIF8xMjAgKiAoc3dlZXBfZmxhZyAmJiBmMiA+IGYxID8gMSA6IC0xKTtcbiAgICAgICAgICAgICAgICB4MiA9IGN4ICsgcnggKiBtYXRoLmNvcyhmMik7XG4gICAgICAgICAgICAgICAgeTIgPSBjeSArIHJ5ICogbWF0aC5zaW4oZjIpO1xuICAgICAgICAgICAgICAgIHJlcyA9IGEyYyh4MiwgeTIsIHJ4LCByeSwgYW5nbGUsIDAsIHN3ZWVwX2ZsYWcsIHgyb2xkLCB5Mm9sZCwgW2YyLCBmMm9sZCwgY3gsIGN5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZiA9IGYyIC0gZjE7XG4gICAgICAgICAgICB2YXIgYzEgPSBtYXRoLmNvcyhmMSksXG4gICAgICAgICAgICAgICAgczEgPSBtYXRoLnNpbihmMSksXG4gICAgICAgICAgICAgICAgYzIgPSBtYXRoLmNvcyhmMiksXG4gICAgICAgICAgICAgICAgczIgPSBtYXRoLnNpbihmMiksXG4gICAgICAgICAgICAgICAgdCA9IG1hdGgudGFuKGRmIC8gNCksXG4gICAgICAgICAgICAgICAgaHggPSA0IC8gMyAqIHJ4ICogdCxcbiAgICAgICAgICAgICAgICBoeSA9IDQgLyAzICogcnkgKiB0LFxuICAgICAgICAgICAgICAgIG0xID0gW3gxLCB5MV0sXG4gICAgICAgICAgICAgICAgbTIgPSBbeDEgKyBoeCAqIHMxLCB5MSAtIGh5ICogYzFdLFxuICAgICAgICAgICAgICAgIG0zID0gW3gyICsgaHggKiBzMiwgeTIgLSBoeSAqIGMyXSxcbiAgICAgICAgICAgICAgICBtNCA9IFt4MiwgeTJdO1xuICAgICAgICAgICAgbTJbMF0gPSAyICogbTFbMF0gLSBtMlswXTtcbiAgICAgICAgICAgIG0yWzFdID0gMiAqIG0xWzFdIC0gbTJbMV07XG4gICAgICAgICAgICBpZiAocmVjdXJzaXZlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFttMiwgbTMsIG00XVtjb25jYXRdKHJlcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlcyA9IFttMiwgbTMsIG00XVtjb25jYXRdKHJlcykuam9pbigpW3NwbGl0XShcIixcIik7XG4gICAgICAgICAgICAgICAgdmFyIG5ld3JlcyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHJlcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld3Jlc1tpXSA9IGkgJSAyID8gcm90YXRlKHJlc1tpIC0gMV0sIHJlc1tpXSwgcmFkKS55IDogcm90YXRlKHJlc1tpXSwgcmVzW2kgKyAxXSwgcmFkKS54O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3cmVzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBmaW5kRG90QXRTZWdtZW50ID0gZnVuY3Rpb24gKHAxeCwgcDF5LCBjMXgsIGMxeSwgYzJ4LCBjMnksIHAyeCwgcDJ5LCB0KSB7XG4gICAgICAgICAgICB2YXIgdDEgPSAxIC0gdDtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgeDogcG93KHQxLCAzKSAqIHAxeCArIHBvdyh0MSwgMikgKiAzICogdCAqIGMxeCArIHQxICogMyAqIHQgKiB0ICogYzJ4ICsgcG93KHQsIDMpICogcDJ4LFxuICAgICAgICAgICAgICAgIHk6IHBvdyh0MSwgMykgKiBwMXkgKyBwb3codDEsIDIpICogMyAqIHQgKiBjMXkgKyB0MSAqIDMgKiB0ICogdCAqIGMyeSArIHBvdyh0LCAzKSAqIHAyeVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgY3VydmVEaW0gPSBjYWNoZXIoZnVuY3Rpb24gKHAxeCwgcDF5LCBjMXgsIGMxeSwgYzJ4LCBjMnksIHAyeCwgcDJ5KSB7XG4gICAgICAgICAgICB2YXIgYSA9IChjMnggLSAyICogYzF4ICsgcDF4KSAtIChwMnggLSAyICogYzJ4ICsgYzF4KSxcbiAgICAgICAgICAgICAgICBiID0gMiAqIChjMXggLSBwMXgpIC0gMiAqIChjMnggLSBjMXgpLFxuICAgICAgICAgICAgICAgIGMgPSBwMXggLSBjMXgsXG4gICAgICAgICAgICAgICAgdDEgPSAoLWIgKyBtYXRoLnNxcnQoYiAqIGIgLSA0ICogYSAqIGMpKSAvIDIgLyBhLFxuICAgICAgICAgICAgICAgIHQyID0gKC1iIC0gbWF0aC5zcXJ0KGIgKiBiIC0gNCAqIGEgKiBjKSkgLyAyIC8gYSxcbiAgICAgICAgICAgICAgICB5ID0gW3AxeSwgcDJ5XSxcbiAgICAgICAgICAgICAgICB4ID0gW3AxeCwgcDJ4XSxcbiAgICAgICAgICAgICAgICBkb3Q7XG4gICAgICAgICAgICBhYnModDEpID4gXCIxZTEyXCIgJiYgKHQxID0gLjUpO1xuICAgICAgICAgICAgYWJzKHQyKSA+IFwiMWUxMlwiICYmICh0MiA9IC41KTtcbiAgICAgICAgICAgIGlmICh0MSA+IDAgJiYgdDEgPCAxKSB7XG4gICAgICAgICAgICAgICAgZG90ID0gZmluZERvdEF0U2VnbWVudChwMXgsIHAxeSwgYzF4LCBjMXksIGMyeCwgYzJ5LCBwMngsIHAyeSwgdDEpO1xuICAgICAgICAgICAgICAgIHgucHVzaChkb3QueCk7XG4gICAgICAgICAgICAgICAgeS5wdXNoKGRvdC55KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0MiA+IDAgJiYgdDIgPCAxKSB7XG4gICAgICAgICAgICAgICAgZG90ID0gZmluZERvdEF0U2VnbWVudChwMXgsIHAxeSwgYzF4LCBjMXksIGMyeCwgYzJ5LCBwMngsIHAyeSwgdDIpO1xuICAgICAgICAgICAgICAgIHgucHVzaChkb3QueCk7XG4gICAgICAgICAgICAgICAgeS5wdXNoKGRvdC55KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGEgPSAoYzJ5IC0gMiAqIGMxeSArIHAxeSkgLSAocDJ5IC0gMiAqIGMyeSArIGMxeSk7XG4gICAgICAgICAgICBiID0gMiAqIChjMXkgLSBwMXkpIC0gMiAqIChjMnkgLSBjMXkpO1xuICAgICAgICAgICAgYyA9IHAxeSAtIGMxeTtcbiAgICAgICAgICAgIHQxID0gKC1iICsgbWF0aC5zcXJ0KGIgKiBiIC0gNCAqIGEgKiBjKSkgLyAyIC8gYTtcbiAgICAgICAgICAgIHQyID0gKC1iIC0gbWF0aC5zcXJ0KGIgKiBiIC0gNCAqIGEgKiBjKSkgLyAyIC8gYTtcbiAgICAgICAgICAgIGFicyh0MSkgPiBcIjFlMTJcIiAmJiAodDEgPSAuNSk7XG4gICAgICAgICAgICBhYnModDIpID4gXCIxZTEyXCIgJiYgKHQyID0gLjUpO1xuICAgICAgICAgICAgaWYgKHQxID4gMCAmJiB0MSA8IDEpIHtcbiAgICAgICAgICAgICAgICBkb3QgPSBmaW5kRG90QXRTZWdtZW50KHAxeCwgcDF5LCBjMXgsIGMxeSwgYzJ4LCBjMnksIHAyeCwgcDJ5LCB0MSk7XG4gICAgICAgICAgICAgICAgeC5wdXNoKGRvdC54KTtcbiAgICAgICAgICAgICAgICB5LnB1c2goZG90LnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHQyID4gMCAmJiB0MiA8IDEpIHtcbiAgICAgICAgICAgICAgICBkb3QgPSBmaW5kRG90QXRTZWdtZW50KHAxeCwgcDF5LCBjMXgsIGMxeSwgYzJ4LCBjMnksIHAyeCwgcDJ5LCB0Mik7XG4gICAgICAgICAgICAgICAgeC5wdXNoKGRvdC54KTtcbiAgICAgICAgICAgICAgICB5LnB1c2goZG90LnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtaW46IHt4OiBtbWluW2FwcGx5XSgwLCB4KSwgeTogbW1pblthcHBseV0oMCwgeSl9LFxuICAgICAgICAgICAgICAgIG1heDoge3g6IG1tYXhbYXBwbHldKDAsIHgpLCB5OiBtbWF4W2FwcGx5XSgwLCB5KX1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICBwYXRoMmN1cnZlID0gUi5fcGF0aDJjdXJ2ZSA9IGNhY2hlcihmdW5jdGlvbiAocGF0aCwgcGF0aDIpIHtcbiAgICAgICAgICAgIHZhciBwdGggPSAhcGF0aDIgJiYgcGF0aHMocGF0aCk7XG4gICAgICAgICAgICBpZiAoIXBhdGgyICYmIHB0aC5jdXJ2ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXRoQ2xvbmUocHRoLmN1cnZlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwID0gcGF0aFRvQWJzb2x1dGUocGF0aCksXG4gICAgICAgICAgICAgICAgcDIgPSBwYXRoMiAmJiBwYXRoVG9BYnNvbHV0ZShwYXRoMiksXG4gICAgICAgICAgICAgICAgYXR0cnMgPSB7eDogMCwgeTogMCwgYng6IDAsIGJ5OiAwLCBYOiAwLCBZOiAwLCBxeDogbnVsbCwgcXk6IG51bGx9LFxuICAgICAgICAgICAgICAgIGF0dHJzMiA9IHt4OiAwLCB5OiAwLCBieDogMCwgYnk6IDAsIFg6IDAsIFk6IDAsIHF4OiBudWxsLCBxeTogbnVsbH0sXG4gICAgICAgICAgICAgICAgcHJvY2Vzc1BhdGggPSBmdW5jdGlvbiAocGF0aCwgZCwgcGNvbSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbngsIG55LCB0cSA9IHtUOjEsIFE6MX07XG4gICAgICAgICAgICAgICAgICAgIGlmICghcGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcIkNcIiwgZC54LCBkLnksIGQueCwgZC55LCBkLngsIGQueV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgIShwYXRoWzBdIGluIHRxKSAmJiAoZC5xeCA9IGQucXkgPSBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChwYXRoWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiTVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQuWCA9IHBhdGhbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5ZID0gcGF0aFsyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJBXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCA9IFtcIkNcIl1bY29uY2F0XShhMmNbYXBwbHldKDAsIFtkLngsIGQueV1bY29uY2F0XShwYXRoLnNsaWNlKDEpKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlNcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGNvbSA9PSBcIkNcIiB8fCBwY29tID09IFwiU1wiKSB7IC8vIEluIFwiU1wiIGNhc2Ugd2UgaGF2ZSB0byB0YWtlIGludG8gYWNjb3VudCwgaWYgdGhlIHByZXZpb3VzIGNvbW1hbmQgaXMgQy9TLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBueCA9IGQueCAqIDIgLSBkLmJ4OyAgICAgICAgICAvLyBBbmQgcmVmbGVjdCB0aGUgcHJldmlvdXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnkgPSBkLnkgKiAyIC0gZC5ieTsgICAgICAgICAgLy8gY29tbWFuZCdzIGNvbnRyb2wgcG9pbnQgcmVsYXRpdmUgdG8gdGhlIGN1cnJlbnQgcG9pbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvciBzb21lIGVsc2Ugb3Igbm90aGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBueCA9IGQueDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnkgPSBkLnk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGggPSBbXCJDXCIsIG54LCBueV1bY29uY2F0XShwYXRoLnNsaWNlKDEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJUXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBjb20gPT0gXCJRXCIgfHwgcGNvbSA9PSBcIlRcIikgeyAvLyBJbiBcIlRcIiBjYXNlIHdlIGhhdmUgdG8gdGFrZSBpbnRvIGFjY291bnQsIGlmIHRoZSBwcmV2aW91cyBjb21tYW5kIGlzIFEvVC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5xeCA9IGQueCAqIDIgLSBkLnF4OyAgICAgICAgLy8gQW5kIG1ha2UgYSByZWZsZWN0aW9uIHNpbWlsYXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5xeSA9IGQueSAqIDIgLSBkLnF5OyAgICAgICAgLy8gdG8gY2FzZSBcIlNcIi5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9yIHNvbWV0aGluZyBlbHNlIG9yIG5vdGhpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5xeCA9IGQueDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5xeSA9IGQueTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCA9IFtcIkNcIl1bY29uY2F0XShxMmMoZC54LCBkLnksIGQucXgsIGQucXksIHBhdGhbMV0sIHBhdGhbMl0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJRXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5xeCA9IHBhdGhbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5xeSA9IHBhdGhbMl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCA9IFtcIkNcIl1bY29uY2F0XShxMmMoZC54LCBkLnksIHBhdGhbMV0sIHBhdGhbMl0sIHBhdGhbM10sIHBhdGhbNF0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJMXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCA9IFtcIkNcIl1bY29uY2F0XShsMmMoZC54LCBkLnksIHBhdGhbMV0sIHBhdGhbMl0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJIXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCA9IFtcIkNcIl1bY29uY2F0XShsMmMoZC54LCBkLnksIHBhdGhbMV0sIGQueSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoID0gW1wiQ1wiXVtjb25jYXRdKGwyYyhkLngsIGQueSwgZC54LCBwYXRoWzFdKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiWlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGggPSBbXCJDXCJdW2NvbmNhdF0obDJjKGQueCwgZC55LCBkLlgsIGQuWSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXRoO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZml4QXJjID0gZnVuY3Rpb24gKHBwLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcFtpXS5sZW5ndGggPiA3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcFtpXS5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBpID0gcHBbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAocGkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNvbXMxW2ldPVwiQVwiOyAvLyBpZiBjcmVhdGVkIG11bHRpcGxlIEM6cywgdGhlaXIgb3JpZ2luYWwgc2VnIGlzIHNhdmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcDIgJiYgKHBjb21zMltpXT1cIkFcIik7IC8vIHRoZSBzYW1lIGFzIGFib3ZlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHAuc3BsaWNlKGkrKywgMCwgW1wiQ1wiXVtjb25jYXRdKHBpLnNwbGljZSgwLCA2KSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcHAuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWkgPSBtbWF4KHAubGVuZ3RoLCBwMiAmJiBwMi5sZW5ndGggfHwgMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZpeE0gPSBmdW5jdGlvbiAocGF0aDEsIHBhdGgyLCBhMSwgYTIsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhdGgxICYmIHBhdGgyICYmIHBhdGgxW2ldWzBdID09IFwiTVwiICYmIHBhdGgyW2ldWzBdICE9IFwiTVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoMi5zcGxpY2UoaSwgMCwgW1wiTVwiLCBhMi54LCBhMi55XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhMS5ieCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBhMS5ieSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBhMS54ID0gcGF0aDFbaV1bMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBhMS55ID0gcGF0aDFbaV1bMl07XG4gICAgICAgICAgICAgICAgICAgICAgICBpaSA9IG1tYXgocC5sZW5ndGgsIHAyICYmIHAyLmxlbmd0aCB8fCAwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcGNvbXMxID0gW10sIC8vIHBhdGggY29tbWFuZHMgb2Ygb3JpZ2luYWwgcGF0aCBwXG4gICAgICAgICAgICAgICAgcGNvbXMyID0gW10sIC8vIHBhdGggY29tbWFuZHMgb2Ygb3JpZ2luYWwgcGF0aCBwMlxuICAgICAgICAgICAgICAgIHBmaXJzdCA9IFwiXCIsIC8vIHRlbXBvcmFyeSBob2xkZXIgZm9yIG9yaWdpbmFsIHBhdGggY29tbWFuZFxuICAgICAgICAgICAgICAgIHBjb20gPSBcIlwiOyAvLyBob2xkZXIgZm9yIHByZXZpb3VzIHBhdGggY29tbWFuZCBvZiBvcmlnaW5hbCBwYXRoXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBtbWF4KHAubGVuZ3RoLCBwMiAmJiBwMi5sZW5ndGggfHwgMCk7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcFtpXSAmJiAocGZpcnN0ID0gcFtpXVswXSk7IC8vIHNhdmUgY3VycmVudCBwYXRoIGNvbW1hbmRcblxuICAgICAgICAgICAgICAgIGlmIChwZmlyc3QgIT0gXCJDXCIpIC8vIEMgaXMgbm90IHNhdmVkIHlldCwgYmVjYXVzZSBpdCBtYXkgYmUgcmVzdWx0IG9mIGNvbnZlcnNpb25cbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHBjb21zMVtpXSA9IHBmaXJzdDsgLy8gU2F2ZSBjdXJyZW50IHBhdGggY29tbWFuZFxuICAgICAgICAgICAgICAgICAgICBpICYmICggcGNvbSA9IHBjb21zMVtpLTFdKTsgLy8gR2V0IHByZXZpb3VzIHBhdGggY29tbWFuZCBwY29tXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBbaV0gPSBwcm9jZXNzUGF0aChwW2ldLCBhdHRycywgcGNvbSk7IC8vIFByZXZpb3VzIHBhdGggY29tbWFuZCBpcyBpbnB1dHRlZCB0byBwcm9jZXNzUGF0aFxuXG4gICAgICAgICAgICAgICAgaWYgKHBjb21zMVtpXSAhPSBcIkFcIiAmJiBwZmlyc3QgPT0gXCJDXCIpIHBjb21zMVtpXSA9IFwiQ1wiOyAvLyBBIGlzIHRoZSBvbmx5IGNvbW1hbmRcbiAgICAgICAgICAgICAgICAvLyB3aGljaCBtYXkgcHJvZHVjZSBtdWx0aXBsZSBDOnNcbiAgICAgICAgICAgICAgICAvLyBzbyB3ZSBoYXZlIHRvIG1ha2Ugc3VyZSB0aGF0IEMgaXMgYWxzbyBDIGluIG9yaWdpbmFsIHBhdGhcblxuICAgICAgICAgICAgICAgIGZpeEFyYyhwLCBpKTsgLy8gZml4QXJjIGFkZHMgYWxzbyB0aGUgcmlnaHQgYW1vdW50IG9mIEE6cyB0byBwY29tczFcblxuICAgICAgICAgICAgICAgIGlmIChwMikgeyAvLyB0aGUgc2FtZSBwcm9jZWR1cmVzIGlzIGRvbmUgdG8gcDJcbiAgICAgICAgICAgICAgICAgICAgcDJbaV0gJiYgKHBmaXJzdCA9IHAyW2ldWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBmaXJzdCAhPSBcIkNcIilcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGNvbXMyW2ldID0gcGZpcnN0O1xuICAgICAgICAgICAgICAgICAgICAgICAgaSAmJiAocGNvbSA9IHBjb21zMltpLTFdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwMltpXSA9IHByb2Nlc3NQYXRoKHAyW2ldLCBhdHRyczIsIHBjb20pO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChwY29tczJbaV0hPVwiQVwiICYmIHBmaXJzdD09XCJDXCIpIHBjb21zMltpXT1cIkNcIjtcblxuICAgICAgICAgICAgICAgICAgICBmaXhBcmMocDIsIGkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaXhNKHAsIHAyLCBhdHRycywgYXR0cnMyLCBpKTtcbiAgICAgICAgICAgICAgICBmaXhNKHAyLCBwLCBhdHRyczIsIGF0dHJzLCBpKTtcbiAgICAgICAgICAgICAgICB2YXIgc2VnID0gcFtpXSxcbiAgICAgICAgICAgICAgICAgICAgc2VnMiA9IHAyICYmIHAyW2ldLFxuICAgICAgICAgICAgICAgICAgICBzZWdsZW4gPSBzZWcubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICBzZWcybGVuID0gcDIgJiYgc2VnMi5sZW5ndGg7XG4gICAgICAgICAgICAgICAgYXR0cnMueCA9IHNlZ1tzZWdsZW4gLSAyXTtcbiAgICAgICAgICAgICAgICBhdHRycy55ID0gc2VnW3NlZ2xlbiAtIDFdO1xuICAgICAgICAgICAgICAgIGF0dHJzLmJ4ID0gdG9GbG9hdChzZWdbc2VnbGVuIC0gNF0pIHx8IGF0dHJzLng7XG4gICAgICAgICAgICAgICAgYXR0cnMuYnkgPSB0b0Zsb2F0KHNlZ1tzZWdsZW4gLSAzXSkgfHwgYXR0cnMueTtcbiAgICAgICAgICAgICAgICBhdHRyczIuYnggPSBwMiAmJiAodG9GbG9hdChzZWcyW3NlZzJsZW4gLSA0XSkgfHwgYXR0cnMyLngpO1xuICAgICAgICAgICAgICAgIGF0dHJzMi5ieSA9IHAyICYmICh0b0Zsb2F0KHNlZzJbc2VnMmxlbiAtIDNdKSB8fCBhdHRyczIueSk7XG4gICAgICAgICAgICAgICAgYXR0cnMyLnggPSBwMiAmJiBzZWcyW3NlZzJsZW4gLSAyXTtcbiAgICAgICAgICAgICAgICBhdHRyczIueSA9IHAyICYmIHNlZzJbc2VnMmxlbiAtIDFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFwMikge1xuICAgICAgICAgICAgICAgIHB0aC5jdXJ2ZSA9IHBhdGhDbG9uZShwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwMiA/IFtwLCBwMl0gOiBwO1xuICAgICAgICB9LCBudWxsLCBwYXRoQ2xvbmUpLFxuICAgICAgICBwYXJzZURvdHMgPSBSLl9wYXJzZURvdHMgPSBjYWNoZXIoZnVuY3Rpb24gKGdyYWRpZW50KSB7XG4gICAgICAgICAgICB2YXIgZG90cyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZ3JhZGllbnQubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBkb3QgPSB7fSxcbiAgICAgICAgICAgICAgICAgICAgcGFyID0gZ3JhZGllbnRbaV0ubWF0Y2goL14oW146XSopOj8oW1xcZFxcLl0qKS8pO1xuICAgICAgICAgICAgICAgIGRvdC5jb2xvciA9IFIuZ2V0UkdCKHBhclsxXSk7XG4gICAgICAgICAgICAgICAgaWYgKGRvdC5jb2xvci5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZG90Lm9wYWNpdHkgPSBkb3QuY29sb3Iub3BhY2l0eTtcbiAgICAgICAgICAgICAgICBkb3QuY29sb3IgPSBkb3QuY29sb3IuaGV4O1xuICAgICAgICAgICAgICAgIHBhclsyXSAmJiAoZG90Lm9mZnNldCA9IHBhclsyXSArIFwiJVwiKTtcbiAgICAgICAgICAgICAgICBkb3RzLnB1c2goZG90KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoaSA9IDEsIGlpID0gZG90cy5sZW5ndGggLSAxOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICghZG90c1tpXS5vZmZzZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXJ0ID0gdG9GbG9hdChkb3RzW2kgLSAxXS5vZmZzZXQgfHwgMCksXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmQgPSAwO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gaSArIDE7IGogPCBpaTsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG90c1tqXS5vZmZzZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQgPSBkb3RzW2pdLm9mZnNldDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5kID0gMTAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgaiA9IGlpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVuZCA9IHRvRmxvYXQoZW5kKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSAoZW5kIC0gc3RhcnQpIC8gKGogLSBpICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydCArPSBkO1xuICAgICAgICAgICAgICAgICAgICAgICAgZG90c1tpXS5vZmZzZXQgPSBzdGFydCArIFwiJVwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRvdHM7XG4gICAgICAgIH0pLFxuICAgICAgICB0ZWFyID0gUi5fdGVhciA9IGZ1bmN0aW9uIChlbCwgcGFwZXIpIHtcbiAgICAgICAgICAgIGVsID09IHBhcGVyLnRvcCAmJiAocGFwZXIudG9wID0gZWwucHJldik7XG4gICAgICAgICAgICBlbCA9PSBwYXBlci5ib3R0b20gJiYgKHBhcGVyLmJvdHRvbSA9IGVsLm5leHQpO1xuICAgICAgICAgICAgZWwubmV4dCAmJiAoZWwubmV4dC5wcmV2ID0gZWwucHJldik7XG4gICAgICAgICAgICBlbC5wcmV2ICYmIChlbC5wcmV2Lm5leHQgPSBlbC5uZXh0KTtcbiAgICAgICAgfSxcbiAgICAgICAgdG9mcm9udCA9IFIuX3RvZnJvbnQgPSBmdW5jdGlvbiAoZWwsIHBhcGVyKSB7XG4gICAgICAgICAgICBpZiAocGFwZXIudG9wID09PSBlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRlYXIoZWwsIHBhcGVyKTtcbiAgICAgICAgICAgIGVsLm5leHQgPSBudWxsO1xuICAgICAgICAgICAgZWwucHJldiA9IHBhcGVyLnRvcDtcbiAgICAgICAgICAgIHBhcGVyLnRvcC5uZXh0ID0gZWw7XG4gICAgICAgICAgICBwYXBlci50b3AgPSBlbDtcbiAgICAgICAgfSxcbiAgICAgICAgdG9iYWNrID0gUi5fdG9iYWNrID0gZnVuY3Rpb24gKGVsLCBwYXBlcikge1xuICAgICAgICAgICAgaWYgKHBhcGVyLmJvdHRvbSA9PT0gZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ZWFyKGVsLCBwYXBlcik7XG4gICAgICAgICAgICBlbC5uZXh0ID0gcGFwZXIuYm90dG9tO1xuICAgICAgICAgICAgZWwucHJldiA9IG51bGw7XG4gICAgICAgICAgICBwYXBlci5ib3R0b20ucHJldiA9IGVsO1xuICAgICAgICAgICAgcGFwZXIuYm90dG9tID0gZWw7XG4gICAgICAgIH0sXG4gICAgICAgIGluc2VydGFmdGVyID0gUi5faW5zZXJ0YWZ0ZXIgPSBmdW5jdGlvbiAoZWwsIGVsMiwgcGFwZXIpIHtcbiAgICAgICAgICAgIHRlYXIoZWwsIHBhcGVyKTtcbiAgICAgICAgICAgIGVsMiA9PSBwYXBlci50b3AgJiYgKHBhcGVyLnRvcCA9IGVsKTtcbiAgICAgICAgICAgIGVsMi5uZXh0ICYmIChlbDIubmV4dC5wcmV2ID0gZWwpO1xuICAgICAgICAgICAgZWwubmV4dCA9IGVsMi5uZXh0O1xuICAgICAgICAgICAgZWwucHJldiA9IGVsMjtcbiAgICAgICAgICAgIGVsMi5uZXh0ID0gZWw7XG4gICAgICAgIH0sXG4gICAgICAgIGluc2VydGJlZm9yZSA9IFIuX2luc2VydGJlZm9yZSA9IGZ1bmN0aW9uIChlbCwgZWwyLCBwYXBlcikge1xuICAgICAgICAgICAgdGVhcihlbCwgcGFwZXIpO1xuICAgICAgICAgICAgZWwyID09IHBhcGVyLmJvdHRvbSAmJiAocGFwZXIuYm90dG9tID0gZWwpO1xuICAgICAgICAgICAgZWwyLnByZXYgJiYgKGVsMi5wcmV2Lm5leHQgPSBlbCk7XG4gICAgICAgICAgICBlbC5wcmV2ID0gZWwyLnByZXY7XG4gICAgICAgICAgICBlbDIucHJldiA9IGVsO1xuICAgICAgICAgICAgZWwubmV4dCA9IGVsMjtcbiAgICAgICAgfSxcbiAgICAgICAgLypcXFxuICAgICAgICAgKiBSYXBoYWVsLnRvTWF0cml4XG4gICAgICAgICBbIG1ldGhvZCBdXG4gICAgICAgICAqKlxuICAgICAgICAgKiBVdGlsaXR5IG1ldGhvZFxuICAgICAgICAgKipcbiAgICAgICAgICogUmV0dXJucyBtYXRyaXggb2YgdHJhbnNmb3JtYXRpb25zIGFwcGxpZWQgdG8gYSBnaXZlbiBwYXRoXG4gICAgICAgICA+IFBhcmFtZXRlcnNcbiAgICAgICAgIC0gcGF0aCAoc3RyaW5nKSBwYXRoIHN0cmluZ1xuICAgICAgICAgLSB0cmFuc2Zvcm0gKHN0cmluZ3xhcnJheSkgdHJhbnNmb3JtYXRpb24gc3RyaW5nXG4gICAgICAgICA9IChvYmplY3QpIEBNYXRyaXhcbiAgICAgICAgXFwqL1xuICAgICAgICB0b01hdHJpeCA9IFIudG9NYXRyaXggPSBmdW5jdGlvbiAocGF0aCwgdHJhbnNmb3JtKSB7XG4gICAgICAgICAgICB2YXIgYmIgPSBwYXRoRGltZW5zaW9ucyhwYXRoKSxcbiAgICAgICAgICAgICAgICBlbCA9IHtcbiAgICAgICAgICAgICAgICAgICAgXzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBFXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGdldEJCb3g6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBiYjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICBleHRyYWN0VHJhbnNmb3JtKGVsLCB0cmFuc2Zvcm0pO1xuICAgICAgICAgICAgcmV0dXJuIGVsLm1hdHJpeDtcbiAgICAgICAgfSxcbiAgICAgICAgLypcXFxuICAgICAgICAgKiBSYXBoYWVsLnRyYW5zZm9ybVBhdGhcbiAgICAgICAgIFsgbWV0aG9kIF1cbiAgICAgICAgICoqXG4gICAgICAgICAqIFV0aWxpdHkgbWV0aG9kXG4gICAgICAgICAqKlxuICAgICAgICAgKiBSZXR1cm5zIHBhdGggdHJhbnNmb3JtZWQgYnkgYSBnaXZlbiB0cmFuc2Zvcm1hdGlvblxuICAgICAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICAgICAtIHBhdGggKHN0cmluZykgcGF0aCBzdHJpbmdcbiAgICAgICAgIC0gdHJhbnNmb3JtIChzdHJpbmd8YXJyYXkpIHRyYW5zZm9ybWF0aW9uIHN0cmluZ1xuICAgICAgICAgPSAoc3RyaW5nKSBwYXRoXG4gICAgICAgIFxcKi9cbiAgICAgICAgdHJhbnNmb3JtUGF0aCA9IFIudHJhbnNmb3JtUGF0aCA9IGZ1bmN0aW9uIChwYXRoLCB0cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIHJldHVybiBtYXBQYXRoKHBhdGgsIHRvTWF0cml4KHBhdGgsIHRyYW5zZm9ybSkpO1xuICAgICAgICB9LFxuICAgICAgICBleHRyYWN0VHJhbnNmb3JtID0gUi5fZXh0cmFjdFRyYW5zZm9ybSA9IGZ1bmN0aW9uIChlbCwgdHN0cikge1xuICAgICAgICAgICAgaWYgKHRzdHIgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbC5fLnRyYW5zZm9ybTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRzdHIgPSBTdHIodHN0cikucmVwbGFjZSgvXFwuezN9fFxcdTIwMjYvZywgZWwuXy50cmFuc2Zvcm0gfHwgRSk7XG4gICAgICAgICAgICB2YXIgdGRhdGEgPSBSLnBhcnNlVHJhbnNmb3JtU3RyaW5nKHRzdHIpLFxuICAgICAgICAgICAgICAgIGRlZyA9IDAsXG4gICAgICAgICAgICAgICAgZHggPSAwLFxuICAgICAgICAgICAgICAgIGR5ID0gMCxcbiAgICAgICAgICAgICAgICBzeCA9IDEsXG4gICAgICAgICAgICAgICAgc3kgPSAxLFxuICAgICAgICAgICAgICAgIF8gPSBlbC5fLFxuICAgICAgICAgICAgICAgIG0gPSBuZXcgTWF0cml4O1xuICAgICAgICAgICAgXy50cmFuc2Zvcm0gPSB0ZGF0YSB8fCBbXTtcbiAgICAgICAgICAgIGlmICh0ZGF0YSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRkYXRhLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0ZGF0YVtpXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRsZW4gPSB0Lmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1hbmQgPSBTdHIodFswXSkudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFic29sdXRlID0gdFswXSAhPSBjb21tYW5kLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW52ZXIgPSBhYnNvbHV0ZSA/IG0uaW52ZXJ0KCkgOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgeDEsXG4gICAgICAgICAgICAgICAgICAgICAgICB5MSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHgyLFxuICAgICAgICAgICAgICAgICAgICAgICAgeTIsXG4gICAgICAgICAgICAgICAgICAgICAgICBiYjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbW1hbmQgPT0gXCJ0XCIgJiYgdGxlbiA9PSAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWJzb2x1dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4MSA9IGludmVyLngoMCwgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeTEgPSBpbnZlci55KDAsIDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHgyID0gaW52ZXIueCh0WzFdLCB0WzJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5MiA9IGludmVyLnkodFsxXSwgdFsyXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbS50cmFuc2xhdGUoeDIgLSB4MSwgeTIgLSB5MSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0udHJhbnNsYXRlKHRbMV0sIHRbMl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbW1hbmQgPT0gXCJyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0bGVuID09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYiA9IGJiIHx8IGVsLmdldEJCb3goMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5yb3RhdGUodFsxXSwgYmIueCArIGJiLndpZHRoIC8gMiwgYmIueSArIGJiLmhlaWdodCAvIDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZyArPSB0WzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0bGVuID09IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWJzb2x1dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDIgPSBpbnZlci54KHRbMl0sIHRbM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5MiA9IGludmVyLnkodFsyXSwgdFszXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0ucm90YXRlKHRbMV0sIHgyLCB5Mik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5yb3RhdGUodFsxXSwgdFsyXSwgdFszXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZyArPSB0WzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbW1hbmQgPT0gXCJzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0bGVuID09IDIgfHwgdGxlbiA9PSAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmIgPSBiYiB8fCBlbC5nZXRCQm94KDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0uc2NhbGUodFsxXSwgdFt0bGVuIC0gMV0sIGJiLnggKyBiYi53aWR0aCAvIDIsIGJiLnkgKyBiYi5oZWlnaHQgLyAyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeCAqPSB0WzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5ICo9IHRbdGxlbiAtIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0bGVuID09IDUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWJzb2x1dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDIgPSBpbnZlci54KHRbM10sIHRbNF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5MiA9IGludmVyLnkodFszXSwgdFs0XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0uc2NhbGUodFsxXSwgdFsyXSwgeDIsIHkyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtLnNjYWxlKHRbMV0sIHRbMl0sIHRbM10sIHRbNF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeCAqPSB0WzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5ICo9IHRbMl07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29tbWFuZCA9PSBcIm1cIiAmJiB0bGVuID09IDcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG0uYWRkKHRbMV0sIHRbMl0sIHRbM10sIHRbNF0sIHRbNV0sIHRbNl0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF8uZGlydHlUID0gMTtcbiAgICAgICAgICAgICAgICAgICAgZWwubWF0cml4ID0gbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qXFxcbiAgICAgICAgICAgICAqIEVsZW1lbnQubWF0cml4XG4gICAgICAgICAgICAgWyBwcm9wZXJ0eSAob2JqZWN0KSBdXG4gICAgICAgICAgICAgKipcbiAgICAgICAgICAgICAqIEtlZXBzIEBNYXRyaXggb2JqZWN0LCB3aGljaCByZXByZXNlbnRzIGVsZW1lbnQgdHJhbnNmb3JtYXRpb25cbiAgICAgICAgICAgIFxcKi9cbiAgICAgICAgICAgIGVsLm1hdHJpeCA9IG07XG5cbiAgICAgICAgICAgIF8uc3ggPSBzeDtcbiAgICAgICAgICAgIF8uc3kgPSBzeTtcbiAgICAgICAgICAgIF8uZGVnID0gZGVnO1xuICAgICAgICAgICAgXy5keCA9IGR4ID0gbS5lO1xuICAgICAgICAgICAgXy5keSA9IGR5ID0gbS5mO1xuXG4gICAgICAgICAgICBpZiAoc3ggPT0gMSAmJiBzeSA9PSAxICYmICFkZWcgJiYgXy5iYm94KSB7XG4gICAgICAgICAgICAgICAgXy5iYm94LnggKz0gK2R4O1xuICAgICAgICAgICAgICAgIF8uYmJveC55ICs9ICtkeTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgXy5kaXJ0eVQgPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBnZXRFbXB0eSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICB2YXIgbCA9IGl0ZW1bMF07XG4gICAgICAgICAgICBzd2l0Y2ggKGwudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJ0XCI6IHJldHVybiBbbCwgMCwgMF07XG4gICAgICAgICAgICAgICAgY2FzZSBcIm1cIjogcmV0dXJuIFtsLCAxLCAwLCAwLCAxLCAwLCAwXTtcbiAgICAgICAgICAgICAgICBjYXNlIFwiclwiOiBpZiAoaXRlbS5sZW5ndGggPT0gNCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW2wsIDAsIGl0ZW1bMl0sIGl0ZW1bM11dO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbbCwgMF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgXCJzXCI6IGlmIChpdGVtLmxlbmd0aCA9PSA1KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbbCwgMSwgMSwgaXRlbVszXSwgaXRlbVs0XV07XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmxlbmd0aCA9PSAzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbbCwgMSwgMV07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtsLCAxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVxdWFsaXNlVHJhbnNmb3JtID0gUi5fZXF1YWxpc2VUcmFuc2Zvcm0gPSBmdW5jdGlvbiAodDEsIHQyKSB7XG4gICAgICAgICAgICB0MiA9IFN0cih0MikucmVwbGFjZSgvXFwuezN9fFxcdTIwMjYvZywgdDEpO1xuICAgICAgICAgICAgdDEgPSBSLnBhcnNlVHJhbnNmb3JtU3RyaW5nKHQxKSB8fCBbXTtcbiAgICAgICAgICAgIHQyID0gUi5wYXJzZVRyYW5zZm9ybVN0cmluZyh0MikgfHwgW107XG4gICAgICAgICAgICB2YXIgbWF4bGVuZ3RoID0gbW1heCh0MS5sZW5ndGgsIHQyLmxlbmd0aCksXG4gICAgICAgICAgICAgICAgZnJvbSA9IFtdLFxuICAgICAgICAgICAgICAgIHRvID0gW10sXG4gICAgICAgICAgICAgICAgaSA9IDAsIGosIGpqLFxuICAgICAgICAgICAgICAgIHR0MSwgdHQyO1xuICAgICAgICAgICAgZm9yICg7IGkgPCBtYXhsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHR0MSA9IHQxW2ldIHx8IGdldEVtcHR5KHQyW2ldKTtcbiAgICAgICAgICAgICAgICB0dDIgPSB0MltpXSB8fCBnZXRFbXB0eSh0dDEpO1xuICAgICAgICAgICAgICAgIGlmICgodHQxWzBdICE9IHR0MlswXSkgfHxcbiAgICAgICAgICAgICAgICAgICAgKHR0MVswXS50b0xvd2VyQ2FzZSgpID09IFwiclwiICYmICh0dDFbMl0gIT0gdHQyWzJdIHx8IHR0MVszXSAhPSB0dDJbM10pKSB8fFxuICAgICAgICAgICAgICAgICAgICAodHQxWzBdLnRvTG93ZXJDYXNlKCkgPT0gXCJzXCIgJiYgKHR0MVszXSAhPSB0dDJbM10gfHwgdHQxWzRdICE9IHR0Mls0XSkpXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZyb21baV0gPSBbXTtcbiAgICAgICAgICAgICAgICB0b1tpXSA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAoaiA9IDAsIGpqID0gbW1heCh0dDEubGVuZ3RoLCB0dDIubGVuZ3RoKTsgaiA8IGpqOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaiBpbiB0dDEgJiYgKGZyb21baV1bal0gPSB0dDFbal0pO1xuICAgICAgICAgICAgICAgICAgICBqIGluIHR0MiAmJiAodG9baV1bal0gPSB0dDJbal0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZnJvbTogZnJvbSxcbiAgICAgICAgICAgICAgICB0bzogdG9cbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgUi5fZ2V0Q29udGFpbmVyID0gZnVuY3Rpb24gKHgsIHksIHcsIGgpIHtcbiAgICAgICAgdmFyIGNvbnRhaW5lcjtcbiAgICAgICAgY29udGFpbmVyID0gaCA9PSBudWxsICYmICFSLmlzKHgsIFwib2JqZWN0XCIpID8gZy5kb2MuZ2V0RWxlbWVudEJ5SWQoeCkgOiB4O1xuICAgICAgICBpZiAoY29udGFpbmVyID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udGFpbmVyLnRhZ05hbWUpIHtcbiAgICAgICAgICAgIGlmICh5ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXI6IGNvbnRhaW5lcixcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGNvbnRhaW5lci5zdHlsZS5waXhlbFdpZHRoIHx8IGNvbnRhaW5lci5vZmZzZXRXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBjb250YWluZXIuc3R5bGUucGl4ZWxIZWlnaHQgfHwgY29udGFpbmVyLm9mZnNldEhlaWdodFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogY29udGFpbmVyLFxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogeSxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiB3XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29udGFpbmVyOiAxLFxuICAgICAgICAgICAgeDogeCxcbiAgICAgICAgICAgIHk6IHksXG4gICAgICAgICAgICB3aWR0aDogdyxcbiAgICAgICAgICAgIGhlaWdodDogaFxuICAgICAgICB9O1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwucGF0aFRvUmVsYXRpdmVcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFV0aWxpdHkgbWV0aG9kXG4gICAgICoqXG4gICAgICogQ29udmVydHMgcGF0aCB0byByZWxhdGl2ZSBmb3JtXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIHBhdGhTdHJpbmcgKHN0cmluZ3xhcnJheSkgcGF0aCBzdHJpbmcgb3IgYXJyYXkgb2Ygc2VnbWVudHNcbiAgICAgPSAoYXJyYXkpIGFycmF5IG9mIHNlZ21lbnRzLlxuICAgIFxcKi9cbiAgICBSLnBhdGhUb1JlbGF0aXZlID0gcGF0aFRvUmVsYXRpdmU7XG4gICAgUi5fZW5naW5lID0ge307XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwucGF0aDJjdXJ2ZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogVXRpbGl0eSBtZXRob2RcbiAgICAgKipcbiAgICAgKiBDb252ZXJ0cyBwYXRoIHRvIGEgbmV3IHBhdGggd2hlcmUgYWxsIHNlZ21lbnRzIGFyZSBjdWJpYyBiZXppZXIgY3VydmVzLlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBwYXRoU3RyaW5nIChzdHJpbmd8YXJyYXkpIHBhdGggc3RyaW5nIG9yIGFycmF5IG9mIHNlZ21lbnRzXG4gICAgID0gKGFycmF5KSBhcnJheSBvZiBzZWdtZW50cy5cbiAgICBcXCovXG4gICAgUi5wYXRoMmN1cnZlID0gcGF0aDJjdXJ2ZTtcbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5tYXRyaXhcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFV0aWxpdHkgbWV0aG9kXG4gICAgICoqXG4gICAgICogUmV0dXJucyBtYXRyaXggYmFzZWQgb24gZ2l2ZW4gcGFyYW1ldGVycy5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gYSAobnVtYmVyKVxuICAgICAtIGIgKG51bWJlcilcbiAgICAgLSBjIChudW1iZXIpXG4gICAgIC0gZCAobnVtYmVyKVxuICAgICAtIGUgKG51bWJlcilcbiAgICAgLSBmIChudW1iZXIpXG4gICAgID0gKG9iamVjdCkgQE1hdHJpeFxuICAgIFxcKi9cbiAgICBSLm1hdHJpeCA9IGZ1bmN0aW9uIChhLCBiLCBjLCBkLCBlLCBmKSB7XG4gICAgICAgIHJldHVybiBuZXcgTWF0cml4KGEsIGIsIGMsIGQsIGUsIGYpO1xuICAgIH07XG4gICAgZnVuY3Rpb24gTWF0cml4KGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgICAgICAgaWYgKGEgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5hID0gK2E7XG4gICAgICAgICAgICB0aGlzLmIgPSArYjtcbiAgICAgICAgICAgIHRoaXMuYyA9ICtjO1xuICAgICAgICAgICAgdGhpcy5kID0gK2Q7XG4gICAgICAgICAgICB0aGlzLmUgPSArZTtcbiAgICAgICAgICAgIHRoaXMuZiA9ICtmO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hID0gMTtcbiAgICAgICAgICAgIHRoaXMuYiA9IDA7XG4gICAgICAgICAgICB0aGlzLmMgPSAwO1xuICAgICAgICAgICAgdGhpcy5kID0gMTtcbiAgICAgICAgICAgIHRoaXMuZSA9IDA7XG4gICAgICAgICAgICB0aGlzLmYgPSAwO1xuICAgICAgICB9XG4gICAgfVxuICAgIChmdW5jdGlvbiAobWF0cml4cHJvdG8pIHtcbiAgICAgICAgLypcXFxuICAgICAgICAgKiBNYXRyaXguYWRkXG4gICAgICAgICBbIG1ldGhvZCBdXG4gICAgICAgICAqKlxuICAgICAgICAgKiBBZGRzIGdpdmVuIG1hdHJpeCB0byBleGlzdGluZyBvbmUuXG4gICAgICAgICA+IFBhcmFtZXRlcnNcbiAgICAgICAgIC0gYSAobnVtYmVyKVxuICAgICAgICAgLSBiIChudW1iZXIpXG4gICAgICAgICAtIGMgKG51bWJlcilcbiAgICAgICAgIC0gZCAobnVtYmVyKVxuICAgICAgICAgLSBlIChudW1iZXIpXG4gICAgICAgICAtIGYgKG51bWJlcilcbiAgICAgICAgIG9yXG4gICAgICAgICAtIG1hdHJpeCAob2JqZWN0KSBATWF0cml4XG4gICAgICAgIFxcKi9cbiAgICAgICAgbWF0cml4cHJvdG8uYWRkID0gZnVuY3Rpb24gKGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgICAgICAgICAgIHZhciBvdXQgPSBbW10sIFtdLCBbXV0sXG4gICAgICAgICAgICAgICAgbSA9IFtbdGhpcy5hLCB0aGlzLmMsIHRoaXMuZV0sIFt0aGlzLmIsIHRoaXMuZCwgdGhpcy5mXSwgWzAsIDAsIDFdXSxcbiAgICAgICAgICAgICAgICBtYXRyaXggPSBbW2EsIGMsIGVdLCBbYiwgZCwgZl0sIFswLCAwLCAxXV0sXG4gICAgICAgICAgICAgICAgeCwgeSwgeiwgcmVzO1xuXG4gICAgICAgICAgICBpZiAoYSAmJiBhIGluc3RhbmNlb2YgTWF0cml4KSB7XG4gICAgICAgICAgICAgICAgbWF0cml4ID0gW1thLmEsIGEuYywgYS5lXSwgW2EuYiwgYS5kLCBhLmZdLCBbMCwgMCwgMV1dO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHggPSAwOyB4IDwgMzsgeCsrKSB7XG4gICAgICAgICAgICAgICAgZm9yICh5ID0gMDsgeSA8IDM7IHkrKykge1xuICAgICAgICAgICAgICAgICAgICByZXMgPSAwO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHogPSAwOyB6IDwgMzsgeisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMgKz0gbVt4XVt6XSAqIG1hdHJpeFt6XVt5XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvdXRbeF1beV0gPSByZXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hID0gb3V0WzBdWzBdO1xuICAgICAgICAgICAgdGhpcy5iID0gb3V0WzFdWzBdO1xuICAgICAgICAgICAgdGhpcy5jID0gb3V0WzBdWzFdO1xuICAgICAgICAgICAgdGhpcy5kID0gb3V0WzFdWzFdO1xuICAgICAgICAgICAgdGhpcy5lID0gb3V0WzBdWzJdO1xuICAgICAgICAgICAgdGhpcy5mID0gb3V0WzFdWzJdO1xuICAgICAgICB9O1xuICAgICAgICAvKlxcXG4gICAgICAgICAqIE1hdHJpeC5pbnZlcnRcbiAgICAgICAgIFsgbWV0aG9kIF1cbiAgICAgICAgICoqXG4gICAgICAgICAqIFJldHVybnMgaW52ZXJ0ZWQgdmVyc2lvbiBvZiB0aGUgbWF0cml4XG4gICAgICAgICA9IChvYmplY3QpIEBNYXRyaXhcbiAgICAgICAgXFwqL1xuICAgICAgICBtYXRyaXhwcm90by5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbWUgPSB0aGlzLFxuICAgICAgICAgICAgICAgIHggPSBtZS5hICogbWUuZCAtIG1lLmIgKiBtZS5jO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBNYXRyaXgobWUuZCAvIHgsIC1tZS5iIC8geCwgLW1lLmMgLyB4LCBtZS5hIC8geCwgKG1lLmMgKiBtZS5mIC0gbWUuZCAqIG1lLmUpIC8geCwgKG1lLmIgKiBtZS5lIC0gbWUuYSAqIG1lLmYpIC8geCk7XG4gICAgICAgIH07XG4gICAgICAgIC8qXFxcbiAgICAgICAgICogTWF0cml4LmNsb25lXG4gICAgICAgICBbIG1ldGhvZCBdXG4gICAgICAgICAqKlxuICAgICAgICAgKiBSZXR1cm5zIGNvcHkgb2YgdGhlIG1hdHJpeFxuICAgICAgICAgPSAob2JqZWN0KSBATWF0cml4XG4gICAgICAgIFxcKi9cbiAgICAgICAgbWF0cml4cHJvdG8uY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE1hdHJpeCh0aGlzLmEsIHRoaXMuYiwgdGhpcy5jLCB0aGlzLmQsIHRoaXMuZSwgdGhpcy5mKTtcbiAgICAgICAgfTtcbiAgICAgICAgLypcXFxuICAgICAgICAgKiBNYXRyaXgudHJhbnNsYXRlXG4gICAgICAgICBbIG1ldGhvZCBdXG4gICAgICAgICAqKlxuICAgICAgICAgKiBUcmFuc2xhdGUgdGhlIG1hdHJpeFxuICAgICAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICAgICAtIHggKG51bWJlcilcbiAgICAgICAgIC0geSAobnVtYmVyKVxuICAgICAgICBcXCovXG4gICAgICAgIG1hdHJpeHByb3RvLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgICAgICB0aGlzLmFkZCgxLCAwLCAwLCAxLCB4LCB5KTtcbiAgICAgICAgfTtcbiAgICAgICAgLypcXFxuICAgICAgICAgKiBNYXRyaXguc2NhbGVcbiAgICAgICAgIFsgbWV0aG9kIF1cbiAgICAgICAgICoqXG4gICAgICAgICAqIFNjYWxlcyB0aGUgbWF0cml4XG4gICAgICAgICA+IFBhcmFtZXRlcnNcbiAgICAgICAgIC0geCAobnVtYmVyKVxuICAgICAgICAgLSB5IChudW1iZXIpICNvcHRpb25hbFxuICAgICAgICAgLSBjeCAobnVtYmVyKSAjb3B0aW9uYWxcbiAgICAgICAgIC0gY3kgKG51bWJlcikgI29wdGlvbmFsXG4gICAgICAgIFxcKi9cbiAgICAgICAgbWF0cml4cHJvdG8uc2NhbGUgPSBmdW5jdGlvbiAoeCwgeSwgY3gsIGN5KSB7XG4gICAgICAgICAgICB5ID09IG51bGwgJiYgKHkgPSB4KTtcbiAgICAgICAgICAgIChjeCB8fCBjeSkgJiYgdGhpcy5hZGQoMSwgMCwgMCwgMSwgY3gsIGN5KTtcbiAgICAgICAgICAgIHRoaXMuYWRkKHgsIDAsIDAsIHksIDAsIDApO1xuICAgICAgICAgICAgKGN4IHx8IGN5KSAmJiB0aGlzLmFkZCgxLCAwLCAwLCAxLCAtY3gsIC1jeSk7XG4gICAgICAgIH07XG4gICAgICAgIC8qXFxcbiAgICAgICAgICogTWF0cml4LnJvdGF0ZVxuICAgICAgICAgWyBtZXRob2QgXVxuICAgICAgICAgKipcbiAgICAgICAgICogUm90YXRlcyB0aGUgbWF0cml4XG4gICAgICAgICA+IFBhcmFtZXRlcnNcbiAgICAgICAgIC0gYSAobnVtYmVyKVxuICAgICAgICAgLSB4IChudW1iZXIpXG4gICAgICAgICAtIHkgKG51bWJlcilcbiAgICAgICAgXFwqL1xuICAgICAgICBtYXRyaXhwcm90by5yb3RhdGUgPSBmdW5jdGlvbiAoYSwgeCwgeSkge1xuICAgICAgICAgICAgYSA9IFIucmFkKGEpO1xuICAgICAgICAgICAgeCA9IHggfHwgMDtcbiAgICAgICAgICAgIHkgPSB5IHx8IDA7XG4gICAgICAgICAgICB2YXIgY29zID0gK21hdGguY29zKGEpLnRvRml4ZWQoOSksXG4gICAgICAgICAgICAgICAgc2luID0gK21hdGguc2luKGEpLnRvRml4ZWQoOSk7XG4gICAgICAgICAgICB0aGlzLmFkZChjb3MsIHNpbiwgLXNpbiwgY29zLCB4LCB5KTtcbiAgICAgICAgICAgIHRoaXMuYWRkKDEsIDAsIDAsIDEsIC14LCAteSk7XG4gICAgICAgIH07XG4gICAgICAgIC8qXFxcbiAgICAgICAgICogTWF0cml4LnhcbiAgICAgICAgIFsgbWV0aG9kIF1cbiAgICAgICAgICoqXG4gICAgICAgICAqIFJldHVybiB4IGNvb3JkaW5hdGUgZm9yIGdpdmVuIHBvaW50IGFmdGVyIHRyYW5zZm9ybWF0aW9uIGRlc2NyaWJlZCBieSB0aGUgbWF0cml4LiBTZWUgYWxzbyBATWF0cml4LnlcbiAgICAgICAgID4gUGFyYW1ldGVyc1xuICAgICAgICAgLSB4IChudW1iZXIpXG4gICAgICAgICAtIHkgKG51bWJlcilcbiAgICAgICAgID0gKG51bWJlcikgeFxuICAgICAgICBcXCovXG4gICAgICAgIG1hdHJpeHByb3RvLnggPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICAgICAgcmV0dXJuIHggKiB0aGlzLmEgKyB5ICogdGhpcy5jICsgdGhpcy5lO1xuICAgICAgICB9O1xuICAgICAgICAvKlxcXG4gICAgICAgICAqIE1hdHJpeC55XG4gICAgICAgICBbIG1ldGhvZCBdXG4gICAgICAgICAqKlxuICAgICAgICAgKiBSZXR1cm4geSBjb29yZGluYXRlIGZvciBnaXZlbiBwb2ludCBhZnRlciB0cmFuc2Zvcm1hdGlvbiBkZXNjcmliZWQgYnkgdGhlIG1hdHJpeC4gU2VlIGFsc28gQE1hdHJpeC54XG4gICAgICAgICA+IFBhcmFtZXRlcnNcbiAgICAgICAgIC0geCAobnVtYmVyKVxuICAgICAgICAgLSB5IChudW1iZXIpXG4gICAgICAgICA9IChudW1iZXIpIHlcbiAgICAgICAgXFwqL1xuICAgICAgICBtYXRyaXhwcm90by55ID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgICAgIHJldHVybiB4ICogdGhpcy5iICsgeSAqIHRoaXMuZCArIHRoaXMuZjtcbiAgICAgICAgfTtcbiAgICAgICAgbWF0cml4cHJvdG8uZ2V0ID0gZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgICAgIHJldHVybiArdGhpc1tTdHIuZnJvbUNoYXJDb2RlKDk3ICsgaSldLnRvRml4ZWQoNCk7XG4gICAgICAgIH07XG4gICAgICAgIG1hdHJpeHByb3RvLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIFIuc3ZnID9cbiAgICAgICAgICAgICAgICBcIm1hdHJpeChcIiArIFt0aGlzLmdldCgwKSwgdGhpcy5nZXQoMSksIHRoaXMuZ2V0KDIpLCB0aGlzLmdldCgzKSwgdGhpcy5nZXQoNCksIHRoaXMuZ2V0KDUpXS5qb2luKCkgKyBcIilcIiA6XG4gICAgICAgICAgICAgICAgW3RoaXMuZ2V0KDApLCB0aGlzLmdldCgyKSwgdGhpcy5nZXQoMSksIHRoaXMuZ2V0KDMpLCAwLCAwXS5qb2luKCk7XG4gICAgICAgIH07XG4gICAgICAgIG1hdHJpeHByb3RvLnRvRmlsdGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIFwicHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0Lk1hdHJpeChNMTE9XCIgKyB0aGlzLmdldCgwKSArXG4gICAgICAgICAgICAgICAgXCIsIE0xMj1cIiArIHRoaXMuZ2V0KDIpICsgXCIsIE0yMT1cIiArIHRoaXMuZ2V0KDEpICsgXCIsIE0yMj1cIiArIHRoaXMuZ2V0KDMpICtcbiAgICAgICAgICAgICAgICBcIiwgRHg9XCIgKyB0aGlzLmdldCg0KSArIFwiLCBEeT1cIiArIHRoaXMuZ2V0KDUpICsgXCIsIHNpemluZ21ldGhvZD0nYXV0byBleHBhbmQnKVwiO1xuICAgICAgICB9O1xuICAgICAgICBtYXRyaXhwcm90by5vZmZzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gW3RoaXMuZS50b0ZpeGVkKDQpLCB0aGlzLmYudG9GaXhlZCg0KV07XG4gICAgICAgIH07XG4gICAgICAgIGZ1bmN0aW9uIG5vcm0oYSkge1xuICAgICAgICAgICAgcmV0dXJuIGFbMF0gKiBhWzBdICsgYVsxXSAqIGFbMV07XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gbm9ybWFsaXplKGEpIHtcbiAgICAgICAgICAgIHZhciBtYWcgPSBtYXRoLnNxcnQobm9ybShhKSk7XG4gICAgICAgICAgICBhWzBdICYmIChhWzBdIC89IG1hZyk7XG4gICAgICAgICAgICBhWzFdICYmIChhWzFdIC89IG1hZyk7XG4gICAgICAgIH1cbiAgICAgICAgLypcXFxuICAgICAgICAgKiBNYXRyaXguc3BsaXRcbiAgICAgICAgIFsgbWV0aG9kIF1cbiAgICAgICAgICoqXG4gICAgICAgICAqIFNwbGl0cyBtYXRyaXggaW50byBwcmltaXRpdmUgdHJhbnNmb3JtYXRpb25zXG4gICAgICAgICA9IChvYmplY3QpIGluIGZvcm1hdDpcbiAgICAgICAgIG8gZHggKG51bWJlcikgdHJhbnNsYXRpb24gYnkgeFxuICAgICAgICAgbyBkeSAobnVtYmVyKSB0cmFuc2xhdGlvbiBieSB5XG4gICAgICAgICBvIHNjYWxleCAobnVtYmVyKSBzY2FsZSBieSB4XG4gICAgICAgICBvIHNjYWxleSAobnVtYmVyKSBzY2FsZSBieSB5XG4gICAgICAgICBvIHNoZWFyIChudW1iZXIpIHNoZWFyXG4gICAgICAgICBvIHJvdGF0ZSAobnVtYmVyKSByb3RhdGlvbiBpbiBkZWdcbiAgICAgICAgIG8gaXNTaW1wbGUgKGJvb2xlYW4pIGNvdWxkIGl0IGJlIHJlcHJlc2VudGVkIHZpYSBzaW1wbGUgdHJhbnNmb3JtYXRpb25zXG4gICAgICAgIFxcKi9cbiAgICAgICAgbWF0cml4cHJvdG8uc3BsaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgb3V0ID0ge307XG4gICAgICAgICAgICAvLyB0cmFuc2xhdGlvblxuICAgICAgICAgICAgb3V0LmR4ID0gdGhpcy5lO1xuICAgICAgICAgICAgb3V0LmR5ID0gdGhpcy5mO1xuXG4gICAgICAgICAgICAvLyBzY2FsZSBhbmQgc2hlYXJcbiAgICAgICAgICAgIHZhciByb3cgPSBbW3RoaXMuYSwgdGhpcy5jXSwgW3RoaXMuYiwgdGhpcy5kXV07XG4gICAgICAgICAgICBvdXQuc2NhbGV4ID0gbWF0aC5zcXJ0KG5vcm0ocm93WzBdKSk7XG4gICAgICAgICAgICBub3JtYWxpemUocm93WzBdKTtcblxuICAgICAgICAgICAgb3V0LnNoZWFyID0gcm93WzBdWzBdICogcm93WzFdWzBdICsgcm93WzBdWzFdICogcm93WzFdWzFdO1xuICAgICAgICAgICAgcm93WzFdID0gW3Jvd1sxXVswXSAtIHJvd1swXVswXSAqIG91dC5zaGVhciwgcm93WzFdWzFdIC0gcm93WzBdWzFdICogb3V0LnNoZWFyXTtcblxuICAgICAgICAgICAgb3V0LnNjYWxleSA9IG1hdGguc3FydChub3JtKHJvd1sxXSkpO1xuICAgICAgICAgICAgbm9ybWFsaXplKHJvd1sxXSk7XG4gICAgICAgICAgICBvdXQuc2hlYXIgLz0gb3V0LnNjYWxleTtcblxuICAgICAgICAgICAgLy8gcm90YXRpb25cbiAgICAgICAgICAgIHZhciBzaW4gPSAtcm93WzBdWzFdLFxuICAgICAgICAgICAgICAgIGNvcyA9IHJvd1sxXVsxXTtcbiAgICAgICAgICAgIGlmIChjb3MgPCAwKSB7XG4gICAgICAgICAgICAgICAgb3V0LnJvdGF0ZSA9IFIuZGVnKG1hdGguYWNvcyhjb3MpKTtcbiAgICAgICAgICAgICAgICBpZiAoc2luIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBvdXQucm90YXRlID0gMzYwIC0gb3V0LnJvdGF0ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dC5yb3RhdGUgPSBSLmRlZyhtYXRoLmFzaW4oc2luKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG91dC5pc1NpbXBsZSA9ICErb3V0LnNoZWFyLnRvRml4ZWQoOSkgJiYgKG91dC5zY2FsZXgudG9GaXhlZCg5KSA9PSBvdXQuc2NhbGV5LnRvRml4ZWQoOSkgfHwgIW91dC5yb3RhdGUpO1xuICAgICAgICAgICAgb3V0LmlzU3VwZXJTaW1wbGUgPSAhK291dC5zaGVhci50b0ZpeGVkKDkpICYmIG91dC5zY2FsZXgudG9GaXhlZCg5KSA9PSBvdXQuc2NhbGV5LnRvRml4ZWQoOSkgJiYgIW91dC5yb3RhdGU7XG4gICAgICAgICAgICBvdXQubm9Sb3RhdGlvbiA9ICErb3V0LnNoZWFyLnRvRml4ZWQoOSkgJiYgIW91dC5yb3RhdGU7XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9O1xuICAgICAgICAvKlxcXG4gICAgICAgICAqIE1hdHJpeC50b1RyYW5zZm9ybVN0cmluZ1xuICAgICAgICAgWyBtZXRob2QgXVxuICAgICAgICAgKipcbiAgICAgICAgICogUmV0dXJuIHRyYW5zZm9ybSBzdHJpbmcgdGhhdCByZXByZXNlbnRzIGdpdmVuIG1hdHJpeFxuICAgICAgICAgPSAoc3RyaW5nKSB0cmFuc2Zvcm0gc3RyaW5nXG4gICAgICAgIFxcKi9cbiAgICAgICAgbWF0cml4cHJvdG8udG9UcmFuc2Zvcm1TdHJpbmcgPSBmdW5jdGlvbiAoc2hvcnRlcikge1xuICAgICAgICAgICAgdmFyIHMgPSBzaG9ydGVyIHx8IHRoaXNbc3BsaXRdKCk7XG4gICAgICAgICAgICBpZiAocy5pc1NpbXBsZSkge1xuICAgICAgICAgICAgICAgIHMuc2NhbGV4ID0gK3Muc2NhbGV4LnRvRml4ZWQoNCk7XG4gICAgICAgICAgICAgICAgcy5zY2FsZXkgPSArcy5zY2FsZXkudG9GaXhlZCg0KTtcbiAgICAgICAgICAgICAgICBzLnJvdGF0ZSA9ICtzLnJvdGF0ZS50b0ZpeGVkKDQpO1xuICAgICAgICAgICAgICAgIHJldHVybiAgKHMuZHggfHwgcy5keSA/IFwidFwiICsgW3MuZHgsIHMuZHldIDogRSkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgKHMuc2NhbGV4ICE9IDEgfHwgcy5zY2FsZXkgIT0gMSA/IFwic1wiICsgW3Muc2NhbGV4LCBzLnNjYWxleSwgMCwgMF0gOiBFKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAocy5yb3RhdGUgPyBcInJcIiArIFtzLnJvdGF0ZSwgMCwgMF0gOiBFKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwibVwiICsgW3RoaXMuZ2V0KDApLCB0aGlzLmdldCgxKSwgdGhpcy5nZXQoMiksIHRoaXMuZ2V0KDMpLCB0aGlzLmdldCg0KSwgdGhpcy5nZXQoNSldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pKE1hdHJpeC5wcm90b3R5cGUpO1xuXG4gICAgdmFyIHByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJldHVyblZhbHVlID0gZmFsc2U7XG4gICAgfSxcbiAgICBwcmV2ZW50VG91Y2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9yaWdpbmFsRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9LFxuICAgIHN0b3BQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jYW5jZWxCdWJibGUgPSB0cnVlO1xuICAgIH0sXG4gICAgc3RvcFRvdWNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcmlnaW5hbEV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0sXG4gICAgZ2V0RXZlbnRQb3NpdGlvbiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBzY3JvbGxZID0gZy5kb2MuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBnLmRvYy5ib2R5LnNjcm9sbFRvcCxcbiAgICAgICAgICAgIHNjcm9sbFggPSBnLmRvYy5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCB8fCBnLmRvYy5ib2R5LnNjcm9sbExlZnQ7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IGUuY2xpZW50WCArIHNjcm9sbFgsXG4gICAgICAgICAgICB5OiBlLmNsaWVudFkgKyBzY3JvbGxZXG4gICAgICAgIH07XG4gICAgfSxcbiAgICBhZGRFdmVudCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChnLmRvYy5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG9iaiwgdHlwZSwgZm4sIGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBnZXRFdmVudFBvc2l0aW9uKGUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm4uY2FsbChlbGVtZW50LCBlLCBwb3MueCwgcG9zLnkpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgb2JqLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZiwgZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHN1cHBvcnRzVG91Y2ggJiYgdG91Y2hNYXBbdHlwZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9mID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBnZXRFdmVudFBvc2l0aW9uKGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZGUgPSBlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlLnRhcmdldFRvdWNoZXMgJiYgZS50YXJnZXRUb3VjaGVzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXRUb3VjaGVzW2ldLnRhcmdldCA9PSBvYmopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGUudGFyZ2V0VG91Y2hlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5vcmlnaW5hbEV2ZW50ID0gb2xkZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCA9IHByZXZlbnRUb3VjaDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24gPSBzdG9wVG91Y2g7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZuLmNhbGwoZWxlbWVudCwgZSwgcG9zLngsIHBvcy55KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgb2JqLmFkZEV2ZW50TGlzdGVuZXIodG91Y2hNYXBbdHlwZV0sIF9mLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgZiwgZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdXBwb3J0c1RvdWNoICYmIHRvdWNoTWFwW3R5cGVdKVxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIodG91Y2hNYXBbdHlwZV0sIF9mLCBmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSBpZiAoZy5kb2MuYXR0YWNoRXZlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAob2JqLCB0eXBlLCBmbiwgZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHZhciBmID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZSA9IGUgfHwgZy53aW4uZXZlbnQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzY3JvbGxZID0gZy5kb2MuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBnLmRvYy5ib2R5LnNjcm9sbFRvcCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFggPSBnLmRvYy5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCB8fCBnLmRvYy5ib2R5LnNjcm9sbExlZnQsXG4gICAgICAgICAgICAgICAgICAgICAgICB4ID0gZS5jbGllbnRYICsgc2Nyb2xsWCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBlLmNsaWVudFkgKyBzY3JvbGxZO1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0ID0gZS5wcmV2ZW50RGVmYXVsdCB8fCBwcmV2ZW50RGVmYXVsdDtcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24gPSBlLnN0b3BQcm9wYWdhdGlvbiB8fCBzdG9wUHJvcGFnYXRpb247XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKGVsZW1lbnQsIGUsIHgsIHkpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgb2JqLmF0dGFjaEV2ZW50KFwib25cIiArIHR5cGUsIGYpO1xuICAgICAgICAgICAgICAgIHZhciBkZXRhY2hlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqLmRldGFjaEV2ZW50KFwib25cIiArIHR5cGUsIGYpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBkZXRhY2hlcjtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9KSgpLFxuICAgIGRyYWcgPSBbXSxcbiAgICBkcmFnTW92ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciB4ID0gZS5jbGllbnRYLFxuICAgICAgICAgICAgeSA9IGUuY2xpZW50WSxcbiAgICAgICAgICAgIHNjcm9sbFkgPSBnLmRvYy5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGcuZG9jLmJvZHkuc2Nyb2xsVG9wLFxuICAgICAgICAgICAgc2Nyb2xsWCA9IGcuZG9jLmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IHx8IGcuZG9jLmJvZHkuc2Nyb2xsTGVmdCxcbiAgICAgICAgICAgIGRyYWdpLFxuICAgICAgICAgICAgaiA9IGRyYWcubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoai0tKSB7XG4gICAgICAgICAgICBkcmFnaSA9IGRyYWdbal07XG4gICAgICAgICAgICBpZiAoc3VwcG9ydHNUb3VjaCAmJiBlLnRvdWNoZXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgaSA9IGUudG91Y2hlcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgIHRvdWNoO1xuICAgICAgICAgICAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgdG91Y2ggPSBlLnRvdWNoZXNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0b3VjaC5pZGVudGlmaWVyID09IGRyYWdpLmVsLl9kcmFnLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4ID0gdG91Y2guY2xpZW50WDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHkgPSB0b3VjaC5jbGllbnRZO1xuICAgICAgICAgICAgICAgICAgICAgICAgKGUub3JpZ2luYWxFdmVudCA/IGUub3JpZ2luYWxFdmVudCA6IGUpLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG5vZGUgPSBkcmFnaS5lbC5ub2RlLFxuICAgICAgICAgICAgICAgIG8sXG4gICAgICAgICAgICAgICAgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmcsXG4gICAgICAgICAgICAgICAgcGFyZW50ID0gbm9kZS5wYXJlbnROb2RlLFxuICAgICAgICAgICAgICAgIGRpc3BsYXkgPSBub2RlLnN0eWxlLmRpc3BsYXk7XG4gICAgICAgICAgICBnLndpbi5vcGVyYSAmJiBwYXJlbnQucmVtb3ZlQ2hpbGQobm9kZSk7XG4gICAgICAgICAgICBub2RlLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIG8gPSBkcmFnaS5lbC5wYXBlci5nZXRFbGVtZW50QnlQb2ludCh4LCB5KTtcbiAgICAgICAgICAgIG5vZGUuc3R5bGUuZGlzcGxheSA9IGRpc3BsYXk7XG4gICAgICAgICAgICBnLndpbi5vcGVyYSAmJiAobmV4dCA/IHBhcmVudC5pbnNlcnRCZWZvcmUobm9kZSwgbmV4dCkgOiBwYXJlbnQuYXBwZW5kQ2hpbGQobm9kZSkpO1xuICAgICAgICAgICAgbyAmJiBldmUoXCJyYXBoYWVsLmRyYWcub3Zlci5cIiArIGRyYWdpLmVsLmlkLCBkcmFnaS5lbCwgbyk7XG4gICAgICAgICAgICB4ICs9IHNjcm9sbFg7XG4gICAgICAgICAgICB5ICs9IHNjcm9sbFk7XG4gICAgICAgICAgICBldmUoXCJyYXBoYWVsLmRyYWcubW92ZS5cIiArIGRyYWdpLmVsLmlkLCBkcmFnaS5tb3ZlX3Njb3BlIHx8IGRyYWdpLmVsLCB4IC0gZHJhZ2kuZWwuX2RyYWcueCwgeSAtIGRyYWdpLmVsLl9kcmFnLnksIHgsIHksIGUpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBkcmFnVXAgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBSLnVubW91c2Vtb3ZlKGRyYWdNb3ZlKS51bm1vdXNldXAoZHJhZ1VwKTtcbiAgICAgICAgdmFyIGkgPSBkcmFnLmxlbmd0aCxcbiAgICAgICAgICAgIGRyYWdpO1xuICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgICBkcmFnaSA9IGRyYWdbaV07XG4gICAgICAgICAgICBkcmFnaS5lbC5fZHJhZyA9IHt9O1xuICAgICAgICAgICAgZXZlKFwicmFwaGFlbC5kcmFnLmVuZC5cIiArIGRyYWdpLmVsLmlkLCBkcmFnaS5lbmRfc2NvcGUgfHwgZHJhZ2kuc3RhcnRfc2NvcGUgfHwgZHJhZ2kubW92ZV9zY29wZSB8fCBkcmFnaS5lbCwgZSk7XG4gICAgICAgIH1cbiAgICAgICAgZHJhZyA9IFtdO1xuICAgIH0sXG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuZWxcbiAgICAgWyBwcm9wZXJ0eSAob2JqZWN0KSBdXG4gICAgICoqXG4gICAgICogWW91IGNhbiBhZGQgeW91ciBvd24gbWV0aG9kIHRvIGVsZW1lbnRzLiBUaGlzIGlzIHVzZWZ1bCB3aGVuIHlvdSB3YW50IHRvIGhhY2sgZGVmYXVsdCBmdW5jdGlvbmFsaXR5IG9yXG4gICAgICogd2FudCB0byB3cmFwIHNvbWUgY29tbW9uIHRyYW5zZm9ybWF0aW9uIG9yIGF0dHJpYnV0ZXMgaW4gb25lIG1ldGhvZC4gSW4gZGlmZmVyZW5jZSB0byBjYW52YXMgbWV0aG9kcyxcbiAgICAgKiB5b3UgY2FuIHJlZGVmaW5lIGVsZW1lbnQgbWV0aG9kIGF0IGFueSB0aW1lLiBFeHBlbmRpbmcgZWxlbWVudCBtZXRob2RzIHdvdWxkbuKAmXQgYWZmZWN0IHNldC5cbiAgICAgPiBVc2FnZVxuICAgICB8IFJhcGhhZWwuZWwucmVkID0gZnVuY3Rpb24gKCkge1xuICAgICB8ICAgICB0aGlzLmF0dHIoe2ZpbGw6IFwiI2YwMFwifSk7XG4gICAgIHwgfTtcbiAgICAgfCAvLyB0aGVuIHVzZSBpdFxuICAgICB8IHBhcGVyLmNpcmNsZSgxMDAsIDEwMCwgMjApLnJlZCgpO1xuICAgIFxcKi9cbiAgICBlbHByb3RvID0gUi5lbCA9IHt9O1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LmNsaWNrXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBBZGRzIGV2ZW50IGhhbmRsZXIgZm9yIGNsaWNrIGZvciB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaGFuZGxlciAoZnVuY3Rpb24pIGhhbmRsZXIgZm9yIHRoZSBldmVudFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnVuY2xpY2tcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJlbW92ZXMgZXZlbnQgaGFuZGxlciBmb3IgY2xpY2sgZm9yIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBoYW5kbGVyIChmdW5jdGlvbikgI29wdGlvbmFsIGhhbmRsZXIgZm9yIHRoZSBldmVudFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuXG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuZGJsY2xpY2tcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEFkZHMgZXZlbnQgaGFuZGxlciBmb3IgZG91YmxlIGNsaWNrIGZvciB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaGFuZGxlciAoZnVuY3Rpb24pIGhhbmRsZXIgZm9yIHRoZSBldmVudFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnVuZGJsY2xpY2tcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJlbW92ZXMgZXZlbnQgaGFuZGxlciBmb3IgZG91YmxlIGNsaWNrIGZvciB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaGFuZGxlciAoZnVuY3Rpb24pICNvcHRpb25hbCBoYW5kbGVyIGZvciB0aGUgZXZlbnRcbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cblxuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50Lm1vdXNlZG93blxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQWRkcyBldmVudCBoYW5kbGVyIGZvciBtb3VzZWRvd24gZm9yIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBoYW5kbGVyIChmdW5jdGlvbikgaGFuZGxlciBmb3IgdGhlIGV2ZW50XG4gICAgID0gKG9iamVjdCkgQEVsZW1lbnRcbiAgICBcXCovXG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQudW5tb3VzZWRvd25cbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJlbW92ZXMgZXZlbnQgaGFuZGxlciBmb3IgbW91c2Vkb3duIGZvciB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaGFuZGxlciAoZnVuY3Rpb24pICNvcHRpb25hbCBoYW5kbGVyIGZvciB0aGUgZXZlbnRcbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cblxuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50Lm1vdXNlbW92ZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQWRkcyBldmVudCBoYW5kbGVyIGZvciBtb3VzZW1vdmUgZm9yIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBoYW5kbGVyIChmdW5jdGlvbikgaGFuZGxlciBmb3IgdGhlIGV2ZW50XG4gICAgID0gKG9iamVjdCkgQEVsZW1lbnRcbiAgICBcXCovXG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQudW5tb3VzZW1vdmVcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJlbW92ZXMgZXZlbnQgaGFuZGxlciBmb3IgbW91c2Vtb3ZlIGZvciB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaGFuZGxlciAoZnVuY3Rpb24pICNvcHRpb25hbCBoYW5kbGVyIGZvciB0aGUgZXZlbnRcbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cblxuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50Lm1vdXNlb3V0XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBBZGRzIGV2ZW50IGhhbmRsZXIgZm9yIG1vdXNlb3V0IGZvciB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaGFuZGxlciAoZnVuY3Rpb24pIGhhbmRsZXIgZm9yIHRoZSBldmVudFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnVubW91c2VvdXRcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJlbW92ZXMgZXZlbnQgaGFuZGxlciBmb3IgbW91c2VvdXQgZm9yIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBoYW5kbGVyIChmdW5jdGlvbikgI29wdGlvbmFsIGhhbmRsZXIgZm9yIHRoZSBldmVudFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuXG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQubW91c2VvdmVyXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBBZGRzIGV2ZW50IGhhbmRsZXIgZm9yIG1vdXNlb3ZlciBmb3IgdGhlIGVsZW1lbnQuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIGhhbmRsZXIgKGZ1bmN0aW9uKSBoYW5kbGVyIGZvciB0aGUgZXZlbnRcbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cbiAgICAvKlxcXG4gICAgICogRWxlbWVudC51bm1vdXNlb3ZlclxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVtb3ZlcyBldmVudCBoYW5kbGVyIGZvciBtb3VzZW92ZXIgZm9yIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBoYW5kbGVyIChmdW5jdGlvbikgI29wdGlvbmFsIGhhbmRsZXIgZm9yIHRoZSBldmVudFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuXG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQubW91c2V1cFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQWRkcyBldmVudCBoYW5kbGVyIGZvciBtb3VzZXVwIGZvciB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaGFuZGxlciAoZnVuY3Rpb24pIGhhbmRsZXIgZm9yIHRoZSBldmVudFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnVubW91c2V1cFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVtb3ZlcyBldmVudCBoYW5kbGVyIGZvciBtb3VzZXVwIGZvciB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaGFuZGxlciAoZnVuY3Rpb24pICNvcHRpb25hbCBoYW5kbGVyIGZvciB0aGUgZXZlbnRcbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cblxuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnRvdWNoc3RhcnRcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEFkZHMgZXZlbnQgaGFuZGxlciBmb3IgdG91Y2hzdGFydCBmb3IgdGhlIGVsZW1lbnQuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIGhhbmRsZXIgKGZ1bmN0aW9uKSBoYW5kbGVyIGZvciB0aGUgZXZlbnRcbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cbiAgICAvKlxcXG4gICAgICogRWxlbWVudC51bnRvdWNoc3RhcnRcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJlbW92ZXMgZXZlbnQgaGFuZGxlciBmb3IgdG91Y2hzdGFydCBmb3IgdGhlIGVsZW1lbnQuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIGhhbmRsZXIgKGZ1bmN0aW9uKSAjb3B0aW9uYWwgaGFuZGxlciBmb3IgdGhlIGV2ZW50XG4gICAgID0gKG9iamVjdCkgQEVsZW1lbnRcbiAgICBcXCovXG5cbiAgICAvKlxcXG4gICAgICogRWxlbWVudC50b3VjaG1vdmVcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEFkZHMgZXZlbnQgaGFuZGxlciBmb3IgdG91Y2htb3ZlIGZvciB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaGFuZGxlciAoZnVuY3Rpb24pIGhhbmRsZXIgZm9yIHRoZSBldmVudFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnVudG91Y2htb3ZlXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZW1vdmVzIGV2ZW50IGhhbmRsZXIgZm9yIHRvdWNobW92ZSBmb3IgdGhlIGVsZW1lbnQuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIGhhbmRsZXIgKGZ1bmN0aW9uKSAjb3B0aW9uYWwgaGFuZGxlciBmb3IgdGhlIGV2ZW50XG4gICAgID0gKG9iamVjdCkgQEVsZW1lbnRcbiAgICBcXCovXG5cbiAgICAvKlxcXG4gICAgICogRWxlbWVudC50b3VjaGVuZFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQWRkcyBldmVudCBoYW5kbGVyIGZvciB0b3VjaGVuZCBmb3IgdGhlIGVsZW1lbnQuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIGhhbmRsZXIgKGZ1bmN0aW9uKSBoYW5kbGVyIGZvciB0aGUgZXZlbnRcbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cbiAgICAvKlxcXG4gICAgICogRWxlbWVudC51bnRvdWNoZW5kXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZW1vdmVzIGV2ZW50IGhhbmRsZXIgZm9yIHRvdWNoZW5kIGZvciB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaGFuZGxlciAoZnVuY3Rpb24pICNvcHRpb25hbCBoYW5kbGVyIGZvciB0aGUgZXZlbnRcbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cblxuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnRvdWNoY2FuY2VsXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBBZGRzIGV2ZW50IGhhbmRsZXIgZm9yIHRvdWNoY2FuY2VsIGZvciB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaGFuZGxlciAoZnVuY3Rpb24pIGhhbmRsZXIgZm9yIHRoZSBldmVudFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnVudG91Y2hjYW5jZWxcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJlbW92ZXMgZXZlbnQgaGFuZGxlciBmb3IgdG91Y2hjYW5jZWwgZm9yIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBoYW5kbGVyIChmdW5jdGlvbikgI29wdGlvbmFsIGhhbmRsZXIgZm9yIHRoZSBldmVudFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIGZvciAodmFyIGkgPSBldmVudHMubGVuZ3RoOyBpLS07KSB7XG4gICAgICAgIChmdW5jdGlvbiAoZXZlbnROYW1lKSB7XG4gICAgICAgICAgICBSW2V2ZW50TmFtZV0gPSBlbHByb3RvW2V2ZW50TmFtZV0gPSBmdW5jdGlvbiAoZm4sIHNjb3BlKSB7XG4gICAgICAgICAgICAgICAgaWYgKFIuaXMoZm4sIFwiZnVuY3Rpb25cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudHMgPSB0aGlzLmV2ZW50cyB8fCBbXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudHMucHVzaCh7bmFtZTogZXZlbnROYW1lLCBmOiBmbiwgdW5iaW5kOiBhZGRFdmVudCh0aGlzLnNoYXBlIHx8IHRoaXMubm9kZSB8fCBnLmRvYywgZXZlbnROYW1lLCBmbiwgc2NvcGUgfHwgdGhpcyl9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgUltcInVuXCIgKyBldmVudE5hbWVdID0gZWxwcm90b1tcInVuXCIgKyBldmVudE5hbWVdID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICAgICAgdmFyIGV2ZW50cyA9IHRoaXMuZXZlbnRzIHx8IFtdLFxuICAgICAgICAgICAgICAgICAgICBsID0gZXZlbnRzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB3aGlsZSAobC0tKXtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50c1tsXS5uYW1lID09IGV2ZW50TmFtZSAmJiAoUi5pcyhmbiwgXCJ1bmRlZmluZWRcIikgfHwgZXZlbnRzW2xdLmYgPT0gZm4pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudHNbbF0udW5iaW5kKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudHMuc3BsaWNlKGwsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgIWV2ZW50cy5sZW5ndGggJiYgZGVsZXRlIHRoaXMuZXZlbnRzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkoZXZlbnRzW2ldKTtcbiAgICB9XG5cbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5kYXRhXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBBZGRzIG9yIHJldHJpZXZlcyBnaXZlbiB2YWx1ZSBhc3NvY2lhdGVkIHdpdGggZ2l2ZW4ga2V5LlxuICAgICAqKlxuICAgICAqIFNlZSBhbHNvIEBFbGVtZW50LnJlbW92ZURhdGFcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0ga2V5IChzdHJpbmcpIGtleSB0byBzdG9yZSBkYXRhXG4gICAgIC0gdmFsdWUgKGFueSkgI29wdGlvbmFsIHZhbHVlIHRvIHN0b3JlXG4gICAgID0gKG9iamVjdCkgQEVsZW1lbnRcbiAgICAgKiBvciwgaWYgdmFsdWUgaXMgbm90IHNwZWNpZmllZDpcbiAgICAgPSAoYW55KSB2YWx1ZVxuICAgICAqIG9yLCBpZiBrZXkgYW5kIHZhbHVlIGFyZSBub3Qgc3BlY2lmaWVkOlxuICAgICA9IChvYmplY3QpIEtleS92YWx1ZSBwYWlycyBmb3IgYWxsIHRoZSBkYXRhIGFzc29jaWF0ZWQgd2l0aCB0aGUgZWxlbWVudC5cbiAgICAgPiBVc2FnZVxuICAgICB8IGZvciAodmFyIGkgPSAwLCBpIDwgNSwgaSsrKSB7XG4gICAgIHwgICAgIHBhcGVyLmNpcmNsZSgxMCArIDE1ICogaSwgMTAsIDEwKVxuICAgICB8ICAgICAgICAgIC5hdHRyKHtmaWxsOiBcIiMwMDBcIn0pXG4gICAgIHwgICAgICAgICAgLmRhdGEoXCJpXCIsIGkpXG4gICAgIHwgICAgICAgICAgLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgfCAgICAgICAgICAgICBhbGVydCh0aGlzLmRhdGEoXCJpXCIpKTtcbiAgICAgfCAgICAgICAgICB9KTtcbiAgICAgfCB9XG4gICAgXFwqL1xuICAgIGVscHJvdG8uZGF0YSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgIHZhciBkYXRhID0gZWxkYXRhW3RoaXMuaWRdID0gZWxkYXRhW3RoaXMuaWRdIHx8IHt9O1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICBpZiAoUi5pcyhrZXksIFwib2JqZWN0XCIpKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBrZXkpIGlmIChrZXlbaGFzXShpKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGEoaSwga2V5W2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBldmUoXCJyYXBoYWVsLmRhdGEuZ2V0LlwiICsgdGhpcy5pZCwgdGhpcywgZGF0YVtrZXldLCBrZXkpO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGFba2V5XTtcbiAgICAgICAgfVxuICAgICAgICBkYXRhW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgZXZlKFwicmFwaGFlbC5kYXRhLnNldC5cIiArIHRoaXMuaWQsIHRoaXMsIHZhbHVlLCBrZXkpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnJlbW92ZURhdGFcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJlbW92ZXMgdmFsdWUgYXNzb2NpYXRlZCB3aXRoIGFuIGVsZW1lbnQgYnkgZ2l2ZW4ga2V5LlxuICAgICAqIElmIGtleSBpcyBub3QgcHJvdmlkZWQsIHJlbW92ZXMgYWxsIHRoZSBkYXRhIG9mIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBrZXkgKHN0cmluZykgI29wdGlvbmFsIGtleVxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIGVscHJvdG8ucmVtb3ZlRGF0YSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgaWYgKGtleSA9PSBudWxsKSB7XG4gICAgICAgICAgICBlbGRhdGFbdGhpcy5pZF0gPSB7fTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsZGF0YVt0aGlzLmlkXSAmJiBkZWxldGUgZWxkYXRhW3RoaXMuaWRdW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAgLypcXFxuICAgICAqIEVsZW1lbnQuZ2V0RGF0YVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmV0cmlldmVzIHRoZSBlbGVtZW50IGRhdGFcbiAgICAgPSAob2JqZWN0KSBkYXRhXG4gICAgXFwqL1xuICAgIGVscHJvdG8uZ2V0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGNsb25lKGVsZGF0YVt0aGlzLmlkXSB8fCB7fSk7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5ob3ZlclxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQWRkcyBldmVudCBoYW5kbGVycyBmb3IgaG92ZXIgZm9yIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBmX2luIChmdW5jdGlvbikgaGFuZGxlciBmb3IgaG92ZXIgaW5cbiAgICAgLSBmX291dCAoZnVuY3Rpb24pIGhhbmRsZXIgZm9yIGhvdmVyIG91dFxuICAgICAtIGljb250ZXh0IChvYmplY3QpICNvcHRpb25hbCBjb250ZXh0IGZvciBob3ZlciBpbiBoYW5kbGVyXG4gICAgIC0gb2NvbnRleHQgKG9iamVjdCkgI29wdGlvbmFsIGNvbnRleHQgZm9yIGhvdmVyIG91dCBoYW5kbGVyXG4gICAgID0gKG9iamVjdCkgQEVsZW1lbnRcbiAgICBcXCovXG4gICAgZWxwcm90by5ob3ZlciA9IGZ1bmN0aW9uIChmX2luLCBmX291dCwgc2NvcGVfaW4sIHNjb3BlX291dCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tb3VzZW92ZXIoZl9pbiwgc2NvcGVfaW4pLm1vdXNlb3V0KGZfb3V0LCBzY29wZV9vdXQgfHwgc2NvcGVfaW4pO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQudW5ob3ZlclxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVtb3ZlcyBldmVudCBoYW5kbGVycyBmb3IgaG92ZXIgZm9yIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBmX2luIChmdW5jdGlvbikgaGFuZGxlciBmb3IgaG92ZXIgaW5cbiAgICAgLSBmX291dCAoZnVuY3Rpb24pIGhhbmRsZXIgZm9yIGhvdmVyIG91dFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIGVscHJvdG8udW5ob3ZlciA9IGZ1bmN0aW9uIChmX2luLCBmX291dCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bm1vdXNlb3ZlcihmX2luKS51bm1vdXNlb3V0KGZfb3V0KTtcbiAgICB9O1xuICAgIHZhciBkcmFnZ2FibGUgPSBbXTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5kcmFnXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBBZGRzIGV2ZW50IGhhbmRsZXJzIGZvciBkcmFnIG9mIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBvbm1vdmUgKGZ1bmN0aW9uKSBoYW5kbGVyIGZvciBtb3ZpbmdcbiAgICAgLSBvbnN0YXJ0IChmdW5jdGlvbikgaGFuZGxlciBmb3IgZHJhZyBzdGFydFxuICAgICAtIG9uZW5kIChmdW5jdGlvbikgaGFuZGxlciBmb3IgZHJhZyBlbmRcbiAgICAgLSBtY29udGV4dCAob2JqZWN0KSAjb3B0aW9uYWwgY29udGV4dCBmb3IgbW92aW5nIGhhbmRsZXJcbiAgICAgLSBzY29udGV4dCAob2JqZWN0KSAjb3B0aW9uYWwgY29udGV4dCBmb3IgZHJhZyBzdGFydCBoYW5kbGVyXG4gICAgIC0gZWNvbnRleHQgKG9iamVjdCkgI29wdGlvbmFsIGNvbnRleHQgZm9yIGRyYWcgZW5kIGhhbmRsZXJcbiAgICAgKiBBZGRpdGlvbmFsbHkgZm9sbG93aW5nIGBkcmFnYCBldmVudHMgd2lsbCBiZSB0cmlnZ2VyZWQ6IGBkcmFnLnN0YXJ0LjxpZD5gIG9uIHN0YXJ0LFxuICAgICAqIGBkcmFnLmVuZC48aWQ+YCBvbiBlbmQgYW5kIGBkcmFnLm1vdmUuPGlkPmAgb24gZXZlcnkgbW92ZS4gV2hlbiBlbGVtZW50IHdpbGwgYmUgZHJhZ2dlZCBvdmVyIGFub3RoZXIgZWxlbWVudFxuICAgICAqIGBkcmFnLm92ZXIuPGlkPmAgd2lsbCBiZSBmaXJlZCBhcyB3ZWxsLlxuICAgICAqXG4gICAgICogU3RhcnQgZXZlbnQgYW5kIHN0YXJ0IGhhbmRsZXIgd2lsbCBiZSBjYWxsZWQgaW4gc3BlY2lmaWVkIGNvbnRleHQgb3IgaW4gY29udGV4dCBvZiB0aGUgZWxlbWVudCB3aXRoIGZvbGxvd2luZyBwYXJhbWV0ZXJzOlxuICAgICBvIHggKG51bWJlcikgeCBwb3NpdGlvbiBvZiB0aGUgbW91c2VcbiAgICAgbyB5IChudW1iZXIpIHkgcG9zaXRpb24gb2YgdGhlIG1vdXNlXG4gICAgIG8gZXZlbnQgKG9iamVjdCkgRE9NIGV2ZW50IG9iamVjdFxuICAgICAqIE1vdmUgZXZlbnQgYW5kIG1vdmUgaGFuZGxlciB3aWxsIGJlIGNhbGxlZCBpbiBzcGVjaWZpZWQgY29udGV4dCBvciBpbiBjb250ZXh0IG9mIHRoZSBlbGVtZW50IHdpdGggZm9sbG93aW5nIHBhcmFtZXRlcnM6XG4gICAgIG8gZHggKG51bWJlcikgc2hpZnQgYnkgeCBmcm9tIHRoZSBzdGFydCBwb2ludFxuICAgICBvIGR5IChudW1iZXIpIHNoaWZ0IGJ5IHkgZnJvbSB0aGUgc3RhcnQgcG9pbnRcbiAgICAgbyB4IChudW1iZXIpIHggcG9zaXRpb24gb2YgdGhlIG1vdXNlXG4gICAgIG8geSAobnVtYmVyKSB5IHBvc2l0aW9uIG9mIHRoZSBtb3VzZVxuICAgICBvIGV2ZW50IChvYmplY3QpIERPTSBldmVudCBvYmplY3RcbiAgICAgKiBFbmQgZXZlbnQgYW5kIGVuZCBoYW5kbGVyIHdpbGwgYmUgY2FsbGVkIGluIHNwZWNpZmllZCBjb250ZXh0IG9yIGluIGNvbnRleHQgb2YgdGhlIGVsZW1lbnQgd2l0aCBmb2xsb3dpbmcgcGFyYW1ldGVyczpcbiAgICAgbyBldmVudCAob2JqZWN0KSBET00gZXZlbnQgb2JqZWN0XG4gICAgID0gKG9iamVjdCkgQEVsZW1lbnRcbiAgICBcXCovXG4gICAgZWxwcm90by5kcmFnID0gZnVuY3Rpb24gKG9ubW92ZSwgb25zdGFydCwgb25lbmQsIG1vdmVfc2NvcGUsIHN0YXJ0X3Njb3BlLCBlbmRfc2NvcGUpIHtcbiAgICAgICAgZnVuY3Rpb24gc3RhcnQoZSkge1xuICAgICAgICAgICAgKGUub3JpZ2luYWxFdmVudCB8fCBlKS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIHggPSBlLmNsaWVudFgsXG4gICAgICAgICAgICAgICAgeSA9IGUuY2xpZW50WSxcbiAgICAgICAgICAgICAgICBzY3JvbGxZID0gZy5kb2MuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBnLmRvYy5ib2R5LnNjcm9sbFRvcCxcbiAgICAgICAgICAgICAgICBzY3JvbGxYID0gZy5kb2MuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgfHwgZy5kb2MuYm9keS5zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgdGhpcy5fZHJhZy5pZCA9IGUuaWRlbnRpZmllcjtcbiAgICAgICAgICAgIGlmIChzdXBwb3J0c1RvdWNoICYmIGUudG91Y2hlcykge1xuICAgICAgICAgICAgICAgIHZhciBpID0gZS50b3VjaGVzLmxlbmd0aCwgdG91Y2g7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgICAgICAgICAgICB0b3VjaCA9IGUudG91Y2hlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZHJhZy5pZCA9IHRvdWNoLmlkZW50aWZpZXI7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0b3VjaC5pZGVudGlmaWVyID09IHRoaXMuX2RyYWcuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHggPSB0b3VjaC5jbGllbnRYO1xuICAgICAgICAgICAgICAgICAgICAgICAgeSA9IHRvdWNoLmNsaWVudFk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2RyYWcueCA9IHggKyBzY3JvbGxYO1xuICAgICAgICAgICAgdGhpcy5fZHJhZy55ID0geSArIHNjcm9sbFk7XG4gICAgICAgICAgICAhZHJhZy5sZW5ndGggJiYgUi5tb3VzZW1vdmUoZHJhZ01vdmUpLm1vdXNldXAoZHJhZ1VwKTtcbiAgICAgICAgICAgIGRyYWcucHVzaCh7ZWw6IHRoaXMsIG1vdmVfc2NvcGU6IG1vdmVfc2NvcGUsIHN0YXJ0X3Njb3BlOiBzdGFydF9zY29wZSwgZW5kX3Njb3BlOiBlbmRfc2NvcGV9KTtcbiAgICAgICAgICAgIG9uc3RhcnQgJiYgZXZlLm9uKFwicmFwaGFlbC5kcmFnLnN0YXJ0LlwiICsgdGhpcy5pZCwgb25zdGFydCk7XG4gICAgICAgICAgICBvbm1vdmUgJiYgZXZlLm9uKFwicmFwaGFlbC5kcmFnLm1vdmUuXCIgKyB0aGlzLmlkLCBvbm1vdmUpO1xuICAgICAgICAgICAgb25lbmQgJiYgZXZlLm9uKFwicmFwaGFlbC5kcmFnLmVuZC5cIiArIHRoaXMuaWQsIG9uZW5kKTtcbiAgICAgICAgICAgIGV2ZShcInJhcGhhZWwuZHJhZy5zdGFydC5cIiArIHRoaXMuaWQsIHN0YXJ0X3Njb3BlIHx8IG1vdmVfc2NvcGUgfHwgdGhpcywgZS5jbGllbnRYICsgc2Nyb2xsWCwgZS5jbGllbnRZICsgc2Nyb2xsWSwgZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZHJhZyA9IHt9O1xuICAgICAgICBkcmFnZ2FibGUucHVzaCh7ZWw6IHRoaXMsIHN0YXJ0OiBzdGFydH0pO1xuICAgICAgICB0aGlzLm1vdXNlZG93bihzdGFydCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQub25EcmFnT3ZlclxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogU2hvcnRjdXQgZm9yIGFzc2lnbmluZyBldmVudCBoYW5kbGVyIGZvciBgZHJhZy5vdmVyLjxpZD5gIGV2ZW50LCB3aGVyZSBpZCBpcyBpZCBvZiB0aGUgZWxlbWVudCAoc2VlIEBFbGVtZW50LmlkKS5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gZiAoZnVuY3Rpb24pIGhhbmRsZXIgZm9yIGV2ZW50LCBmaXJzdCBhcmd1bWVudCB3b3VsZCBiZSB0aGUgZWxlbWVudCB5b3UgYXJlIGRyYWdnaW5nIG92ZXJcbiAgICBcXCovXG4gICAgZWxwcm90by5vbkRyYWdPdmVyID0gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgZiA/IGV2ZS5vbihcInJhcGhhZWwuZHJhZy5vdmVyLlwiICsgdGhpcy5pZCwgZikgOiBldmUudW5iaW5kKFwicmFwaGFlbC5kcmFnLm92ZXIuXCIgKyB0aGlzLmlkKTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnVuZHJhZ1xuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVtb3ZlcyBhbGwgZHJhZyBldmVudCBoYW5kbGVycyBmcm9tIGdpdmVuIGVsZW1lbnQuXG4gICAgXFwqL1xuICAgIGVscHJvdG8udW5kcmFnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaSA9IGRyYWdnYWJsZS5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChpLS0pIGlmIChkcmFnZ2FibGVbaV0uZWwgPT0gdGhpcykge1xuICAgICAgICAgICAgdGhpcy51bm1vdXNlZG93bihkcmFnZ2FibGVbaV0uc3RhcnQpO1xuICAgICAgICAgICAgZHJhZ2dhYmxlLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIGV2ZS51bmJpbmQoXCJyYXBoYWVsLmRyYWcuKi5cIiArIHRoaXMuaWQpO1xuICAgICAgICB9XG4gICAgICAgICFkcmFnZ2FibGUubGVuZ3RoICYmIFIudW5tb3VzZW1vdmUoZHJhZ01vdmUpLnVubW91c2V1cChkcmFnVXApO1xuICAgICAgICBkcmFnID0gW107XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogUGFwZXIuY2lyY2xlXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBEcmF3cyBhIGNpcmNsZS5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0geCAobnVtYmVyKSB4IGNvb3JkaW5hdGUgb2YgdGhlIGNlbnRyZVxuICAgICAtIHkgKG51bWJlcikgeSBjb29yZGluYXRlIG9mIHRoZSBjZW50cmVcbiAgICAgLSByIChudW1iZXIpIHJhZGl1c1xuICAgICA9IChvYmplY3QpIFJhcGhhw6tsIGVsZW1lbnQgb2JqZWN0IHdpdGggdHlwZSDigJxjaXJjbGXigJ1cbiAgICAgKipcbiAgICAgPiBVc2FnZVxuICAgICB8IHZhciBjID0gcGFwZXIuY2lyY2xlKDUwLCA1MCwgNDApO1xuICAgIFxcKi9cbiAgICBwYXBlcnByb3RvLmNpcmNsZSA9IGZ1bmN0aW9uICh4LCB5LCByKSB7XG4gICAgICAgIHZhciBvdXQgPSBSLl9lbmdpbmUuY2lyY2xlKHRoaXMsIHggfHwgMCwgeSB8fCAwLCByIHx8IDApO1xuICAgICAgICB0aGlzLl9fc2V0X18gJiYgdGhpcy5fX3NldF9fLnB1c2gob3V0KTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBQYXBlci5yZWN0XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKlxuICAgICAqIERyYXdzIGEgcmVjdGFuZ2xlLlxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSB4IChudW1iZXIpIHggY29vcmRpbmF0ZSBvZiB0aGUgdG9wIGxlZnQgY29ybmVyXG4gICAgIC0geSAobnVtYmVyKSB5IGNvb3JkaW5hdGUgb2YgdGhlIHRvcCBsZWZ0IGNvcm5lclxuICAgICAtIHdpZHRoIChudW1iZXIpIHdpZHRoXG4gICAgIC0gaGVpZ2h0IChudW1iZXIpIGhlaWdodFxuICAgICAtIHIgKG51bWJlcikgI29wdGlvbmFsIHJhZGl1cyBmb3Igcm91bmRlZCBjb3JuZXJzLCBkZWZhdWx0IGlzIDBcbiAgICAgPSAob2JqZWN0KSBSYXBoYcOrbCBlbGVtZW50IG9iamVjdCB3aXRoIHR5cGUg4oCccmVjdOKAnVxuICAgICAqKlxuICAgICA+IFVzYWdlXG4gICAgIHwgLy8gcmVndWxhciByZWN0YW5nbGVcbiAgICAgfCB2YXIgYyA9IHBhcGVyLnJlY3QoMTAsIDEwLCA1MCwgNTApO1xuICAgICB8IC8vIHJlY3RhbmdsZSB3aXRoIHJvdW5kZWQgY29ybmVyc1xuICAgICB8IHZhciBjID0gcGFwZXIucmVjdCg0MCwgNDAsIDUwLCA1MCwgMTApO1xuICAgIFxcKi9cbiAgICBwYXBlcnByb3RvLnJlY3QgPSBmdW5jdGlvbiAoeCwgeSwgdywgaCwgcikge1xuICAgICAgICB2YXIgb3V0ID0gUi5fZW5naW5lLnJlY3QodGhpcywgeCB8fCAwLCB5IHx8IDAsIHcgfHwgMCwgaCB8fCAwLCByIHx8IDApO1xuICAgICAgICB0aGlzLl9fc2V0X18gJiYgdGhpcy5fX3NldF9fLnB1c2gob3V0KTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBQYXBlci5lbGxpcHNlXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBEcmF3cyBhbiBlbGxpcHNlLlxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSB4IChudW1iZXIpIHggY29vcmRpbmF0ZSBvZiB0aGUgY2VudHJlXG4gICAgIC0geSAobnVtYmVyKSB5IGNvb3JkaW5hdGUgb2YgdGhlIGNlbnRyZVxuICAgICAtIHJ4IChudW1iZXIpIGhvcml6b250YWwgcmFkaXVzXG4gICAgIC0gcnkgKG51bWJlcikgdmVydGljYWwgcmFkaXVzXG4gICAgID0gKG9iamVjdCkgUmFwaGHDq2wgZWxlbWVudCBvYmplY3Qgd2l0aCB0eXBlIOKAnGVsbGlwc2XigJ1cbiAgICAgKipcbiAgICAgPiBVc2FnZVxuICAgICB8IHZhciBjID0gcGFwZXIuZWxsaXBzZSg1MCwgNTAsIDQwLCAyMCk7XG4gICAgXFwqL1xuICAgIHBhcGVycHJvdG8uZWxsaXBzZSA9IGZ1bmN0aW9uICh4LCB5LCByeCwgcnkpIHtcbiAgICAgICAgdmFyIG91dCA9IFIuX2VuZ2luZS5lbGxpcHNlKHRoaXMsIHggfHwgMCwgeSB8fCAwLCByeCB8fCAwLCByeSB8fCAwKTtcbiAgICAgICAgdGhpcy5fX3NldF9fICYmIHRoaXMuX19zZXRfXy5wdXNoKG91dCk7XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogUGFwZXIucGF0aFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQ3JlYXRlcyBhIHBhdGggZWxlbWVudCBieSBnaXZlbiBwYXRoIGRhdGEgc3RyaW5nLlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBwYXRoU3RyaW5nIChzdHJpbmcpICNvcHRpb25hbCBwYXRoIHN0cmluZyBpbiBTVkcgZm9ybWF0LlxuICAgICAqIFBhdGggc3RyaW5nIGNvbnNpc3RzIG9mIG9uZS1sZXR0ZXIgY29tbWFuZHMsIGZvbGxvd2VkIGJ5IGNvbW1hIHNlcHJhcmF0ZWQgYXJndW1lbnRzIGluIG51bWVyY2FsIGZvcm0uIEV4YW1wbGU6XG4gICAgIHwgXCJNMTAsMjBMMzAsNDBcIlxuICAgICAqIEhlcmUgd2UgY2FuIHNlZSB0d28gY29tbWFuZHM6IOKAnE3igJ0sIHdpdGggYXJndW1lbnRzIGAoMTAsIDIwKWAgYW5kIOKAnEzigJ0gd2l0aCBhcmd1bWVudHMgYCgzMCwgNDApYC4gVXBwZXIgY2FzZSBsZXR0ZXIgbWVhbiBjb21tYW5kIGlzIGFic29sdXRlLCBsb3dlciBjYXNl4oCUcmVsYXRpdmUuXG4gICAgICpcbiAgICAgIyA8cD5IZXJlIGlzIHNob3J0IGxpc3Qgb2YgY29tbWFuZHMgYXZhaWxhYmxlLCBmb3IgbW9yZSBkZXRhaWxzIHNlZSA8YSBocmVmPVwiaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHL3BhdGhzLmh0bWwjUGF0aERhdGFcIiB0aXRsZT1cIkRldGFpbHMgb2YgYSBwYXRoJ3MgZGF0YSBhdHRyaWJ1dGUncyBmb3JtYXQgYXJlIGRlc2NyaWJlZCBpbiB0aGUgU1ZHIHNwZWNpZmljYXRpb24uXCI+U1ZHIHBhdGggc3RyaW5nIGZvcm1hdDwvYT4uPC9wPlxuICAgICAjIDx0YWJsZT48dGhlYWQ+PHRyPjx0aD5Db21tYW5kPC90aD48dGg+TmFtZTwvdGg+PHRoPlBhcmFtZXRlcnM8L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+XG4gICAgICMgPHRyPjx0ZD5NPC90ZD48dGQ+bW92ZXRvPC90ZD48dGQ+KHggeSkrPC90ZD48L3RyPlxuICAgICAjIDx0cj48dGQ+WjwvdGQ+PHRkPmNsb3NlcGF0aDwvdGQ+PHRkPihub25lKTwvdGQ+PC90cj5cbiAgICAgIyA8dHI+PHRkPkw8L3RkPjx0ZD5saW5ldG88L3RkPjx0ZD4oeCB5KSs8L3RkPjwvdHI+XG4gICAgICMgPHRyPjx0ZD5IPC90ZD48dGQ+aG9yaXpvbnRhbCBsaW5ldG88L3RkPjx0ZD54KzwvdGQ+PC90cj5cbiAgICAgIyA8dHI+PHRkPlY8L3RkPjx0ZD52ZXJ0aWNhbCBsaW5ldG88L3RkPjx0ZD55KzwvdGQ+PC90cj5cbiAgICAgIyA8dHI+PHRkPkM8L3RkPjx0ZD5jdXJ2ZXRvPC90ZD48dGQ+KHgxIHkxIHgyIHkyIHggeSkrPC90ZD48L3RyPlxuICAgICAjIDx0cj48dGQ+UzwvdGQ+PHRkPnNtb290aCBjdXJ2ZXRvPC90ZD48dGQ+KHgyIHkyIHggeSkrPC90ZD48L3RyPlxuICAgICAjIDx0cj48dGQ+UTwvdGQ+PHRkPnF1YWRyYXRpYyBCw6l6aWVyIGN1cnZldG88L3RkPjx0ZD4oeDEgeTEgeCB5KSs8L3RkPjwvdHI+XG4gICAgICMgPHRyPjx0ZD5UPC90ZD48dGQ+c21vb3RoIHF1YWRyYXRpYyBCw6l6aWVyIGN1cnZldG88L3RkPjx0ZD4oeCB5KSs8L3RkPjwvdHI+XG4gICAgICMgPHRyPjx0ZD5BPC90ZD48dGQ+ZWxsaXB0aWNhbCBhcmM8L3RkPjx0ZD4ocnggcnkgeC1heGlzLXJvdGF0aW9uIGxhcmdlLWFyYy1mbGFnIHN3ZWVwLWZsYWcgeCB5KSs8L3RkPjwvdHI+XG4gICAgICMgPHRyPjx0ZD5SPC90ZD48dGQ+PGEgaHJlZj1cImh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ2F0bXVsbOKAk1JvbV9zcGxpbmUjQ2F0bXVsbC5FMi44MC45M1JvbV9zcGxpbmVcIj5DYXRtdWxsLVJvbSBjdXJ2ZXRvPC9hPio8L3RkPjx0ZD54MSB5MSAoeCB5KSs8L3RkPjwvdHI+PC90Ym9keT48L3RhYmxlPlxuICAgICAqICog4oCcQ2F0bXVsbC1Sb20gY3VydmV0b+KAnSBpcyBhIG5vdCBzdGFuZGFyZCBTVkcgY29tbWFuZCBhbmQgYWRkZWQgaW4gMi4wIHRvIG1ha2UgbGlmZSBlYXNpZXIuXG4gICAgICogTm90ZTogdGhlcmUgaXMgYSBzcGVjaWFsIGNhc2Ugd2hlbiBwYXRoIGNvbnNpc3Qgb2YganVzdCB0aHJlZSBjb21tYW5kczog4oCcTTEwLDEwUuKApnrigJ0uIEluIHRoaXMgY2FzZSBwYXRoIHdpbGwgc21vb3RobHkgY29ubmVjdHMgdG8gaXRzIGJlZ2lubmluZy5cbiAgICAgPiBVc2FnZVxuICAgICB8IHZhciBjID0gcGFwZXIucGF0aChcIk0xMCAxMEw5MCA5MFwiKTtcbiAgICAgfCAvLyBkcmF3IGEgZGlhZ29uYWwgbGluZTpcbiAgICAgfCAvLyBtb3ZlIHRvIDEwLDEwLCBsaW5lIHRvIDkwLDkwXG4gICAgICogRm9yIGV4YW1wbGUgb2YgcGF0aCBzdHJpbmdzLCBjaGVjayBvdXQgdGhlc2UgaWNvbnM6IGh0dHA6Ly9yYXBoYWVsanMuY29tL2ljb25zL1xuICAgIFxcKi9cbiAgICBwYXBlcnByb3RvLnBhdGggPSBmdW5jdGlvbiAocGF0aFN0cmluZykge1xuICAgICAgICBwYXRoU3RyaW5nICYmICFSLmlzKHBhdGhTdHJpbmcsIHN0cmluZykgJiYgIVIuaXMocGF0aFN0cmluZ1swXSwgYXJyYXkpICYmIChwYXRoU3RyaW5nICs9IEUpO1xuICAgICAgICB2YXIgb3V0ID0gUi5fZW5naW5lLnBhdGgoUi5mb3JtYXRbYXBwbHldKFIsIGFyZ3VtZW50cyksIHRoaXMpO1xuICAgICAgICB0aGlzLl9fc2V0X18gJiYgdGhpcy5fX3NldF9fLnB1c2gob3V0KTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBQYXBlci5pbWFnZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogRW1iZWRzIGFuIGltYWdlIGludG8gdGhlIHN1cmZhY2UuXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIHNyYyAoc3RyaW5nKSBVUkkgb2YgdGhlIHNvdXJjZSBpbWFnZVxuICAgICAtIHggKG51bWJlcikgeCBjb29yZGluYXRlIHBvc2l0aW9uXG4gICAgIC0geSAobnVtYmVyKSB5IGNvb3JkaW5hdGUgcG9zaXRpb25cbiAgICAgLSB3aWR0aCAobnVtYmVyKSB3aWR0aCBvZiB0aGUgaW1hZ2VcbiAgICAgLSBoZWlnaHQgKG51bWJlcikgaGVpZ2h0IG9mIHRoZSBpbWFnZVxuICAgICA9IChvYmplY3QpIFJhcGhhw6tsIGVsZW1lbnQgb2JqZWN0IHdpdGggdHlwZSDigJxpbWFnZeKAnVxuICAgICAqKlxuICAgICA+IFVzYWdlXG4gICAgIHwgdmFyIGMgPSBwYXBlci5pbWFnZShcImFwcGxlLnBuZ1wiLCAxMCwgMTAsIDgwLCA4MCk7XG4gICAgXFwqL1xuICAgIHBhcGVycHJvdG8uaW1hZ2UgPSBmdW5jdGlvbiAoc3JjLCB4LCB5LCB3LCBoKSB7XG4gICAgICAgIHZhciBvdXQgPSBSLl9lbmdpbmUuaW1hZ2UodGhpcywgc3JjIHx8IFwiYWJvdXQ6YmxhbmtcIiwgeCB8fCAwLCB5IHx8IDAsIHcgfHwgMCwgaCB8fCAwKTtcbiAgICAgICAgdGhpcy5fX3NldF9fICYmIHRoaXMuX19zZXRfXy5wdXNoKG91dCk7XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogUGFwZXIudGV4dFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogRHJhd3MgYSB0ZXh0IHN0cmluZy4gSWYgeW91IG5lZWQgbGluZSBicmVha3MsIHB1dCDigJxcXG7igJ0gaW4gdGhlIHN0cmluZy5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0geCAobnVtYmVyKSB4IGNvb3JkaW5hdGUgcG9zaXRpb25cbiAgICAgLSB5IChudW1iZXIpIHkgY29vcmRpbmF0ZSBwb3NpdGlvblxuICAgICAtIHRleHQgKHN0cmluZykgVGhlIHRleHQgc3RyaW5nIHRvIGRyYXdcbiAgICAgPSAob2JqZWN0KSBSYXBoYcOrbCBlbGVtZW50IG9iamVjdCB3aXRoIHR5cGUg4oCcdGV4dOKAnVxuICAgICAqKlxuICAgICA+IFVzYWdlXG4gICAgIHwgdmFyIHQgPSBwYXBlci50ZXh0KDUwLCA1MCwgXCJSYXBoYcOrbFxcbmtpY2tzXFxuYnV0dCFcIik7XG4gICAgXFwqL1xuICAgIHBhcGVycHJvdG8udGV4dCA9IGZ1bmN0aW9uICh4LCB5LCB0ZXh0KSB7XG4gICAgICAgIHZhciBvdXQgPSBSLl9lbmdpbmUudGV4dCh0aGlzLCB4IHx8IDAsIHkgfHwgMCwgU3RyKHRleHQpKTtcbiAgICAgICAgdGhpcy5fX3NldF9fICYmIHRoaXMuX19zZXRfXy5wdXNoKG91dCk7XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogUGFwZXIuc2V0XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBDcmVhdGVzIGFycmF5LWxpa2Ugb2JqZWN0IHRvIGtlZXAgYW5kIG9wZXJhdGUgc2V2ZXJhbCBlbGVtZW50cyBhdCBvbmNlLlxuICAgICAqIFdhcm5pbmc6IGl0IGRvZXNu4oCZdCBjcmVhdGUgYW55IGVsZW1lbnRzIGZvciBpdHNlbGYgaW4gdGhlIHBhZ2UsIGl0IGp1c3QgZ3JvdXBzIGV4aXN0aW5nIGVsZW1lbnRzLlxuICAgICAqIFNldHMgYWN0IGFzIHBzZXVkbyBlbGVtZW50cyDigJQgYWxsIG1ldGhvZHMgYXZhaWxhYmxlIHRvIGFuIGVsZW1lbnQgY2FuIGJlIHVzZWQgb24gYSBzZXQuXG4gICAgID0gKG9iamVjdCkgYXJyYXktbGlrZSBvYmplY3QgdGhhdCByZXByZXNlbnRzIHNldCBvZiBlbGVtZW50c1xuICAgICAqKlxuICAgICA+IFVzYWdlXG4gICAgIHwgdmFyIHN0ID0gcGFwZXIuc2V0KCk7XG4gICAgIHwgc3QucHVzaChcbiAgICAgfCAgICAgcGFwZXIuY2lyY2xlKDEwLCAxMCwgNSksXG4gICAgIHwgICAgIHBhcGVyLmNpcmNsZSgzMCwgMTAsIDUpXG4gICAgIHwgKTtcbiAgICAgfCBzdC5hdHRyKHtmaWxsOiBcInJlZFwifSk7IC8vIGNoYW5nZXMgdGhlIGZpbGwgb2YgYm90aCBjaXJjbGVzXG4gICAgXFwqL1xuICAgIHBhcGVycHJvdG8uc2V0ID0gZnVuY3Rpb24gKGl0ZW1zQXJyYXkpIHtcbiAgICAgICAgIVIuaXMoaXRlbXNBcnJheSwgXCJhcnJheVwiKSAmJiAoaXRlbXNBcnJheSA9IEFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChhcmd1bWVudHMsIDAsIGFyZ3VtZW50cy5sZW5ndGgpKTtcbiAgICAgICAgdmFyIG91dCA9IG5ldyBTZXQoaXRlbXNBcnJheSk7XG4gICAgICAgIHRoaXMuX19zZXRfXyAmJiB0aGlzLl9fc2V0X18ucHVzaChvdXQpO1xuICAgICAgICBvdXRbXCJwYXBlclwiXSA9IHRoaXM7XG4gICAgICAgIG91dFtcInR5cGVcIl0gPSBcInNldFwiO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFBhcGVyLnNldFN0YXJ0XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBDcmVhdGVzIEBQYXBlci5zZXQuIEFsbCBlbGVtZW50cyB0aGF0IHdpbGwgYmUgY3JlYXRlZCBhZnRlciBjYWxsaW5nIHRoaXMgbWV0aG9kIGFuZCBiZWZvcmUgY2FsbGluZ1xuICAgICAqIEBQYXBlci5zZXRGaW5pc2ggd2lsbCBiZSBhZGRlZCB0byB0aGUgc2V0LlxuICAgICAqKlxuICAgICA+IFVzYWdlXG4gICAgIHwgcGFwZXIuc2V0U3RhcnQoKTtcbiAgICAgfCBwYXBlci5jaXJjbGUoMTAsIDEwLCA1KSxcbiAgICAgfCBwYXBlci5jaXJjbGUoMzAsIDEwLCA1KVxuICAgICB8IHZhciBzdCA9IHBhcGVyLnNldEZpbmlzaCgpO1xuICAgICB8IHN0LmF0dHIoe2ZpbGw6IFwicmVkXCJ9KTsgLy8gY2hhbmdlcyB0aGUgZmlsbCBvZiBib3RoIGNpcmNsZXNcbiAgICBcXCovXG4gICAgcGFwZXJwcm90by5zZXRTdGFydCA9IGZ1bmN0aW9uIChzZXQpIHtcbiAgICAgICAgdGhpcy5fX3NldF9fID0gc2V0IHx8IHRoaXMuc2V0KCk7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogUGFwZXIuc2V0RmluaXNoXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBTZWUgQFBhcGVyLnNldFN0YXJ0LiBUaGlzIG1ldGhvZCBmaW5pc2hlcyBjYXRjaGluZyBhbmQgcmV0dXJucyByZXN1bHRpbmcgc2V0LlxuICAgICAqKlxuICAgICA9IChvYmplY3QpIHNldFxuICAgIFxcKi9cbiAgICBwYXBlcnByb3RvLnNldEZpbmlzaCA9IGZ1bmN0aW9uIChzZXQpIHtcbiAgICAgICAgdmFyIG91dCA9IHRoaXMuX19zZXRfXztcbiAgICAgICAgZGVsZXRlIHRoaXMuX19zZXRfXztcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBQYXBlci5nZXRTaXplXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBPYnRhaW5zIGN1cnJlbnQgcGFwZXIgYWN0dWFsIHNpemUuXG4gICAgICoqXG4gICAgID0gKG9iamVjdClcbiAgICAgXFwqL1xuICAgIHBhcGVycHJvdG8uZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuY2FudmFzLnBhcmVudE5vZGU7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB3aWR0aDogY29udGFpbmVyLm9mZnNldFdpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBjb250YWluZXIub2Zmc2V0SGVpZ2h0XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAvKlxcXG4gICAgICogUGFwZXIuc2V0U2l6ZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogSWYgeW91IG5lZWQgdG8gY2hhbmdlIGRpbWVuc2lvbnMgb2YgdGhlIGNhbnZhcyBjYWxsIHRoaXMgbWV0aG9kXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIHdpZHRoIChudW1iZXIpIG5ldyB3aWR0aCBvZiB0aGUgY2FudmFzXG4gICAgIC0gaGVpZ2h0IChudW1iZXIpIG5ldyBoZWlnaHQgb2YgdGhlIGNhbnZhc1xuICAgIFxcKi9cbiAgICBwYXBlcnByb3RvLnNldFNpemUgPSBmdW5jdGlvbiAod2lkdGgsIGhlaWdodCkge1xuICAgICAgICByZXR1cm4gUi5fZW5naW5lLnNldFNpemUuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBQYXBlci5zZXRWaWV3Qm94XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBTZXRzIHRoZSB2aWV3IGJveCBvZiB0aGUgcGFwZXIuIFByYWN0aWNhbGx5IGl0IGdpdmVzIHlvdSBhYmlsaXR5IHRvIHpvb20gYW5kIHBhbiB3aG9sZSBwYXBlciBzdXJmYWNlIGJ5XG4gICAgICogc3BlY2lmeWluZyBuZXcgYm91bmRhcmllcy5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0geCAobnVtYmVyKSBuZXcgeCBwb3NpdGlvbiwgZGVmYXVsdCBpcyBgMGBcbiAgICAgLSB5IChudW1iZXIpIG5ldyB5IHBvc2l0aW9uLCBkZWZhdWx0IGlzIGAwYFxuICAgICAtIHcgKG51bWJlcikgbmV3IHdpZHRoIG9mIHRoZSBjYW52YXNcbiAgICAgLSBoIChudW1iZXIpIG5ldyBoZWlnaHQgb2YgdGhlIGNhbnZhc1xuICAgICAtIGZpdCAoYm9vbGVhbikgYHRydWVgIGlmIHlvdSB3YW50IGdyYXBoaWNzIHRvIGZpdCBpbnRvIG5ldyBib3VuZGFyeSBib3hcbiAgICBcXCovXG4gICAgcGFwZXJwcm90by5zZXRWaWV3Qm94ID0gZnVuY3Rpb24gKHgsIHksIHcsIGgsIGZpdCkge1xuICAgICAgICByZXR1cm4gUi5fZW5naW5lLnNldFZpZXdCb3guY2FsbCh0aGlzLCB4LCB5LCB3LCBoLCBmaXQpO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFBhcGVyLnRvcFxuICAgICBbIHByb3BlcnR5IF1cbiAgICAgKipcbiAgICAgKiBQb2ludHMgdG8gdGhlIHRvcG1vc3QgZWxlbWVudCBvbiB0aGUgcGFwZXJcbiAgICBcXCovXG4gICAgLypcXFxuICAgICAqIFBhcGVyLmJvdHRvbVxuICAgICBbIHByb3BlcnR5IF1cbiAgICAgKipcbiAgICAgKiBQb2ludHMgdG8gdGhlIGJvdHRvbSBlbGVtZW50IG9uIHRoZSBwYXBlclxuICAgIFxcKi9cbiAgICBwYXBlcnByb3RvLnRvcCA9IHBhcGVycHJvdG8uYm90dG9tID0gbnVsbDtcbiAgICAvKlxcXG4gICAgICogUGFwZXIucmFwaGFlbFxuICAgICBbIHByb3BlcnR5IF1cbiAgICAgKipcbiAgICAgKiBQb2ludHMgdG8gdGhlIEBSYXBoYWVsIG9iamVjdC9mdW5jdGlvblxuICAgIFxcKi9cbiAgICBwYXBlcnByb3RvLnJhcGhhZWwgPSBSO1xuICAgIHZhciBnZXRPZmZzZXQgPSBmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICB2YXIgYm94ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgICAgIGRvYyA9IGVsZW0ub3duZXJEb2N1bWVudCxcbiAgICAgICAgICAgIGJvZHkgPSBkb2MuYm9keSxcbiAgICAgICAgICAgIGRvY0VsZW0gPSBkb2MuZG9jdW1lbnRFbGVtZW50LFxuICAgICAgICAgICAgY2xpZW50VG9wID0gZG9jRWxlbS5jbGllbnRUb3AgfHwgYm9keS5jbGllbnRUb3AgfHwgMCwgY2xpZW50TGVmdCA9IGRvY0VsZW0uY2xpZW50TGVmdCB8fCBib2R5LmNsaWVudExlZnQgfHwgMCxcbiAgICAgICAgICAgIHRvcCAgPSBib3gudG9wICArIChnLndpbi5wYWdlWU9mZnNldCB8fCBkb2NFbGVtLnNjcm9sbFRvcCB8fCBib2R5LnNjcm9sbFRvcCApIC0gY2xpZW50VG9wLFxuICAgICAgICAgICAgbGVmdCA9IGJveC5sZWZ0ICsgKGcud2luLnBhZ2VYT2Zmc2V0IHx8IGRvY0VsZW0uc2Nyb2xsTGVmdCB8fCBib2R5LnNjcm9sbExlZnQpIC0gY2xpZW50TGVmdDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHk6IHRvcCxcbiAgICAgICAgICAgIHg6IGxlZnRcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBQYXBlci5nZXRFbGVtZW50QnlQb2ludFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmV0dXJucyB5b3UgdG9wbW9zdCBlbGVtZW50IHVuZGVyIGdpdmVuIHBvaW50LlxuICAgICAqKlxuICAgICA9IChvYmplY3QpIFJhcGhhw6tsIGVsZW1lbnQgb2JqZWN0XG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIHggKG51bWJlcikgeCBjb29yZGluYXRlIGZyb20gdGhlIHRvcCBsZWZ0IGNvcm5lciBvZiB0aGUgd2luZG93XG4gICAgIC0geSAobnVtYmVyKSB5IGNvb3JkaW5hdGUgZnJvbSB0aGUgdG9wIGxlZnQgY29ybmVyIG9mIHRoZSB3aW5kb3dcbiAgICAgPiBVc2FnZVxuICAgICB8IHBhcGVyLmdldEVsZW1lbnRCeVBvaW50KG1vdXNlWCwgbW91c2VZKS5hdHRyKHtzdHJva2U6IFwiI2YwMFwifSk7XG4gICAgXFwqL1xuICAgIHBhcGVycHJvdG8uZ2V0RWxlbWVudEJ5UG9pbnQgPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICB2YXIgcGFwZXIgPSB0aGlzLFxuICAgICAgICAgICAgc3ZnID0gcGFwZXIuY2FudmFzLFxuICAgICAgICAgICAgdGFyZ2V0ID0gZy5kb2MuZWxlbWVudEZyb21Qb2ludCh4LCB5KTtcbiAgICAgICAgaWYgKGcud2luLm9wZXJhICYmIHRhcmdldC50YWdOYW1lID09IFwic3ZnXCIpIHtcbiAgICAgICAgICAgIHZhciBzbyA9IGdldE9mZnNldChzdmcpLFxuICAgICAgICAgICAgICAgIHNyID0gc3ZnLmNyZWF0ZVNWR1JlY3QoKTtcbiAgICAgICAgICAgIHNyLnggPSB4IC0gc28ueDtcbiAgICAgICAgICAgIHNyLnkgPSB5IC0gc28ueTtcbiAgICAgICAgICAgIHNyLndpZHRoID0gc3IuaGVpZ2h0ID0gMTtcbiAgICAgICAgICAgIHZhciBoaXRzID0gc3ZnLmdldEludGVyc2VjdGlvbkxpc3Qoc3IsIG51bGwpO1xuICAgICAgICAgICAgaWYgKGhpdHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gaGl0c1toaXRzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAodGFyZ2V0LnBhcmVudE5vZGUgJiYgdGFyZ2V0ICE9IHN2Zy5wYXJlbnROb2RlICYmICF0YXJnZXQucmFwaGFlbCkge1xuICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7XG4gICAgICAgIH1cbiAgICAgICAgdGFyZ2V0ID09IHBhcGVyLmNhbnZhcy5wYXJlbnROb2RlICYmICh0YXJnZXQgPSBzdmcpO1xuICAgICAgICB0YXJnZXQgPSB0YXJnZXQgJiYgdGFyZ2V0LnJhcGhhZWwgPyBwYXBlci5nZXRCeUlkKHRhcmdldC5yYXBoYWVsaWQpIDogbnVsbDtcbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9O1xuXG4gICAgLypcXFxuICAgICAqIFBhcGVyLmdldEVsZW1lbnRzQnlCQm94XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZXR1cm5zIHNldCBvZiBlbGVtZW50cyB0aGF0IGhhdmUgYW4gaW50ZXJzZWN0aW5nIGJvdW5kaW5nIGJveFxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSBiYm94IChvYmplY3QpIGJib3ggdG8gY2hlY2sgd2l0aFxuICAgICA9IChvYmplY3QpIEBTZXRcbiAgICAgXFwqL1xuICAgIHBhcGVycHJvdG8uZ2V0RWxlbWVudHNCeUJCb3ggPSBmdW5jdGlvbiAoYmJveCkge1xuICAgICAgICB2YXIgc2V0ID0gdGhpcy5zZXQoKTtcbiAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgaWYgKFIuaXNCQm94SW50ZXJzZWN0KGVsLmdldEJCb3goKSwgYmJveCkpIHtcbiAgICAgICAgICAgICAgICBzZXQucHVzaChlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gc2V0O1xuICAgIH07XG5cbiAgICAvKlxcXG4gICAgICogUGFwZXIuZ2V0QnlJZFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmV0dXJucyB5b3UgZWxlbWVudCBieSBpdHMgaW50ZXJuYWwgSUQuXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIGlkIChudW1iZXIpIGlkXG4gICAgID0gKG9iamVjdCkgUmFwaGHDq2wgZWxlbWVudCBvYmplY3RcbiAgICBcXCovXG4gICAgcGFwZXJwcm90by5nZXRCeUlkID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHZhciBib3QgPSB0aGlzLmJvdHRvbTtcbiAgICAgICAgd2hpbGUgKGJvdCkge1xuICAgICAgICAgICAgaWYgKGJvdC5pZCA9PSBpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBib3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBib3QgPSBib3QubmV4dDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBQYXBlci5mb3JFYWNoXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBFeGVjdXRlcyBnaXZlbiBmdW5jdGlvbiBmb3IgZWFjaCBlbGVtZW50IG9uIHRoZSBwYXBlclxuICAgICAqXG4gICAgICogSWYgY2FsbGJhY2sgZnVuY3Rpb24gcmV0dXJucyBgZmFsc2VgIGl0IHdpbGwgc3RvcCBsb29wIHJ1bm5pbmcuXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIGNhbGxiYWNrIChmdW5jdGlvbikgZnVuY3Rpb24gdG8gcnVuXG4gICAgIC0gdGhpc0FyZyAob2JqZWN0KSBjb250ZXh0IG9iamVjdCBmb3IgdGhlIGNhbGxiYWNrXG4gICAgID0gKG9iamVjdCkgUGFwZXIgb2JqZWN0XG4gICAgID4gVXNhZ2VcbiAgICAgfCBwYXBlci5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICB8ICAgICBlbC5hdHRyKHsgc3Ryb2tlOiBcImJsdWVcIiB9KTtcbiAgICAgfCB9KTtcbiAgICBcXCovXG4gICAgcGFwZXJwcm90by5mb3JFYWNoID0gZnVuY3Rpb24gKGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICAgIHZhciBib3QgPSB0aGlzLmJvdHRvbTtcbiAgICAgICAgd2hpbGUgKGJvdCkge1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrLmNhbGwodGhpc0FyZywgYm90KSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJvdCA9IGJvdC5uZXh0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFBhcGVyLmdldEVsZW1lbnRzQnlQb2ludFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmV0dXJucyBzZXQgb2YgZWxlbWVudHMgdGhhdCBoYXZlIGNvbW1vbiBwb2ludCBpbnNpZGVcbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0geCAobnVtYmVyKSB4IGNvb3JkaW5hdGUgb2YgdGhlIHBvaW50XG4gICAgIC0geSAobnVtYmVyKSB5IGNvb3JkaW5hdGUgb2YgdGhlIHBvaW50XG4gICAgID0gKG9iamVjdCkgQFNldFxuICAgIFxcKi9cbiAgICBwYXBlcnByb3RvLmdldEVsZW1lbnRzQnlQb2ludCA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHZhciBzZXQgPSB0aGlzLnNldCgpO1xuICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICBpZiAoZWwuaXNQb2ludEluc2lkZSh4LCB5KSkge1xuICAgICAgICAgICAgICAgIHNldC5wdXNoKGVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzZXQ7XG4gICAgfTtcbiAgICBmdW5jdGlvbiB4X3koKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnggKyBTICsgdGhpcy55O1xuICAgIH1cbiAgICBmdW5jdGlvbiB4X3lfd19oKCkge1xuICAgICAgICByZXR1cm4gdGhpcy54ICsgUyArIHRoaXMueSArIFMgKyB0aGlzLndpZHRoICsgXCIgXFx4ZDcgXCIgKyB0aGlzLmhlaWdodDtcbiAgICB9XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuaXNQb2ludEluc2lkZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogRGV0ZXJtaW5lIGlmIGdpdmVuIHBvaW50IGlzIGluc2lkZSB0aGlzIGVsZW1lbnTigJlzIHNoYXBlXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIHggKG51bWJlcikgeCBjb29yZGluYXRlIG9mIHRoZSBwb2ludFxuICAgICAtIHkgKG51bWJlcikgeSBjb29yZGluYXRlIG9mIHRoZSBwb2ludFxuICAgICA9IChib29sZWFuKSBgdHJ1ZWAgaWYgcG9pbnQgaW5zaWRlIHRoZSBzaGFwZVxuICAgIFxcKi9cbiAgICBlbHByb3RvLmlzUG9pbnRJbnNpZGUgPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICB2YXIgcnAgPSB0aGlzLnJlYWxQYXRoID0gZ2V0UGF0aFt0aGlzLnR5cGVdKHRoaXMpO1xuICAgICAgICBpZiAodGhpcy5hdHRyKCd0cmFuc2Zvcm0nKSAmJiB0aGlzLmF0dHIoJ3RyYW5zZm9ybScpLmxlbmd0aCkge1xuICAgICAgICAgICAgcnAgPSBSLnRyYW5zZm9ybVBhdGgocnAsIHRoaXMuYXR0cigndHJhbnNmb3JtJykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBSLmlzUG9pbnRJbnNpZGVQYXRoKHJwLCB4LCB5KTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LmdldEJCb3hcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJldHVybiBib3VuZGluZyBib3ggZm9yIGEgZ2l2ZW4gZWxlbWVudFxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSBpc1dpdGhvdXRUcmFuc2Zvcm0gKGJvb2xlYW4pIGZsYWcsIGB0cnVlYCBpZiB5b3Ugd2FudCB0byBoYXZlIGJvdW5kaW5nIGJveCBiZWZvcmUgdHJhbnNmb3JtYXRpb25zLiBEZWZhdWx0IGlzIGBmYWxzZWAuXG4gICAgID0gKG9iamVjdCkgQm91bmRpbmcgYm94IG9iamVjdDpcbiAgICAgbyB7XG4gICAgIG8gICAgIHg6IChudW1iZXIpIHRvcCBsZWZ0IGNvcm5lciB4XG4gICAgIG8gICAgIHk6IChudW1iZXIpIHRvcCBsZWZ0IGNvcm5lciB5XG4gICAgIG8gICAgIHgyOiAobnVtYmVyKSBib3R0b20gcmlnaHQgY29ybmVyIHhcbiAgICAgbyAgICAgeTI6IChudW1iZXIpIGJvdHRvbSByaWdodCBjb3JuZXIgeVxuICAgICBvICAgICB3aWR0aDogKG51bWJlcikgd2lkdGhcbiAgICAgbyAgICAgaGVpZ2h0OiAobnVtYmVyKSBoZWlnaHRcbiAgICAgbyB9XG4gICAgXFwqL1xuICAgIGVscHJvdG8uZ2V0QkJveCA9IGZ1bmN0aW9uIChpc1dpdGhvdXRUcmFuc2Zvcm0pIHtcbiAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9XG4gICAgICAgIHZhciBfID0gdGhpcy5fO1xuICAgICAgICBpZiAoaXNXaXRob3V0VHJhbnNmb3JtKSB7XG4gICAgICAgICAgICBpZiAoXy5kaXJ0eSB8fCAhXy5iYm94d3QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlYWxQYXRoID0gZ2V0UGF0aFt0aGlzLnR5cGVdKHRoaXMpO1xuICAgICAgICAgICAgICAgIF8uYmJveHd0ID0gcGF0aERpbWVuc2lvbnModGhpcy5yZWFsUGF0aCk7XG4gICAgICAgICAgICAgICAgXy5iYm94d3QudG9TdHJpbmcgPSB4X3lfd19oO1xuICAgICAgICAgICAgICAgIF8uZGlydHkgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF8uYmJveHd0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChfLmRpcnR5IHx8IF8uZGlydHlUIHx8ICFfLmJib3gpIHtcbiAgICAgICAgICAgIGlmIChfLmRpcnR5IHx8ICF0aGlzLnJlYWxQYXRoKSB7XG4gICAgICAgICAgICAgICAgXy5iYm94d3QgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMucmVhbFBhdGggPSBnZXRQYXRoW3RoaXMudHlwZV0odGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfLmJib3ggPSBwYXRoRGltZW5zaW9ucyhtYXBQYXRoKHRoaXMucmVhbFBhdGgsIHRoaXMubWF0cml4KSk7XG4gICAgICAgICAgICBfLmJib3gudG9TdHJpbmcgPSB4X3lfd19oO1xuICAgICAgICAgICAgXy5kaXJ0eSA9IF8uZGlydHlUID0gMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXy5iYm94O1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuY2xvbmVcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICA9IChvYmplY3QpIGNsb25lIG9mIGEgZ2l2ZW4gZWxlbWVudFxuICAgICAqKlxuICAgIFxcKi9cbiAgICBlbHByb3RvLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5yZW1vdmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3V0ID0gdGhpcy5wYXBlclt0aGlzLnR5cGVdKCkuYXR0cih0aGlzLmF0dHIoKSk7XG4gICAgICAgIHRoaXMuX19zZXRfXyAmJiB0aGlzLl9fc2V0X18ucHVzaChvdXQpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuZ2xvd1xuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmV0dXJuIHNldCBvZiBlbGVtZW50cyB0aGF0IGNyZWF0ZSBnbG93LWxpa2UgZWZmZWN0IGFyb3VuZCBnaXZlbiBlbGVtZW50LiBTZWUgQFBhcGVyLnNldC5cbiAgICAgKlxuICAgICAqIE5vdGU6IEdsb3cgaXMgbm90IGNvbm5lY3RlZCB0byB0aGUgZWxlbWVudC4gSWYgeW91IGNoYW5nZSBlbGVtZW50IGF0dHJpYnV0ZXMgaXQgd29u4oCZdCBhZGp1c3QgaXRzZWxmLlxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSBnbG93IChvYmplY3QpICNvcHRpb25hbCBwYXJhbWV0ZXJzIG9iamVjdCB3aXRoIGFsbCBwcm9wZXJ0aWVzIG9wdGlvbmFsOlxuICAgICBvIHtcbiAgICAgbyAgICAgd2lkdGggKG51bWJlcikgc2l6ZSBvZiB0aGUgZ2xvdywgZGVmYXVsdCBpcyBgMTBgXG4gICAgIG8gICAgIGZpbGwgKGJvb2xlYW4pIHdpbGwgaXQgYmUgZmlsbGVkLCBkZWZhdWx0IGlzIGBmYWxzZWBcbiAgICAgbyAgICAgb3BhY2l0eSAobnVtYmVyKSBvcGFjaXR5LCBkZWZhdWx0IGlzIGAwLjVgXG4gICAgIG8gICAgIG9mZnNldHggKG51bWJlcikgaG9yaXpvbnRhbCBvZmZzZXQsIGRlZmF1bHQgaXMgYDBgXG4gICAgIG8gICAgIG9mZnNldHkgKG51bWJlcikgdmVydGljYWwgb2Zmc2V0LCBkZWZhdWx0IGlzIGAwYFxuICAgICBvICAgICBjb2xvciAoc3RyaW5nKSBnbG93IGNvbG91ciwgZGVmYXVsdCBpcyBgYmxhY2tgXG4gICAgIG8gfVxuICAgICA9IChvYmplY3QpIEBQYXBlci5zZXQgb2YgZWxlbWVudHMgdGhhdCByZXByZXNlbnRzIGdsb3dcbiAgICBcXCovXG4gICAgZWxwcm90by5nbG93ID0gZnVuY3Rpb24gKGdsb3cpIHtcbiAgICAgICAgaWYgKHRoaXMudHlwZSA9PSBcInRleHRcIikge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZ2xvdyA9IGdsb3cgfHwge307XG4gICAgICAgIHZhciBzID0ge1xuICAgICAgICAgICAgd2lkdGg6IChnbG93LndpZHRoIHx8IDEwKSArICgrdGhpcy5hdHRyKFwic3Ryb2tlLXdpZHRoXCIpIHx8IDEpLFxuICAgICAgICAgICAgZmlsbDogZ2xvdy5maWxsIHx8IGZhbHNlLFxuICAgICAgICAgICAgb3BhY2l0eTogZ2xvdy5vcGFjaXR5ID09IG51bGwgPyAuNSA6IGdsb3cub3BhY2l0eSxcbiAgICAgICAgICAgIG9mZnNldHg6IGdsb3cub2Zmc2V0eCB8fCAwLFxuICAgICAgICAgICAgb2Zmc2V0eTogZ2xvdy5vZmZzZXR5IHx8IDAsXG4gICAgICAgICAgICBjb2xvcjogZ2xvdy5jb2xvciB8fCBcIiMwMDBcIlxuICAgICAgICB9LFxuICAgICAgICAgICAgYyA9IHMud2lkdGggLyAyLFxuICAgICAgICAgICAgciA9IHRoaXMucGFwZXIsXG4gICAgICAgICAgICBvdXQgPSByLnNldCgpLFxuICAgICAgICAgICAgcGF0aCA9IHRoaXMucmVhbFBhdGggfHwgZ2V0UGF0aFt0aGlzLnR5cGVdKHRoaXMpO1xuICAgICAgICBwYXRoID0gdGhpcy5tYXRyaXggPyBtYXBQYXRoKHBhdGgsIHRoaXMubWF0cml4KSA6IHBhdGg7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYyArIDE7IGkrKykge1xuICAgICAgICAgICAgb3V0LnB1c2goci5wYXRoKHBhdGgpLmF0dHIoe1xuICAgICAgICAgICAgICAgIHN0cm9rZTogcy5jb2xvcixcbiAgICAgICAgICAgICAgICBmaWxsOiBzLmZpbGwgPyBzLmNvbG9yIDogXCJub25lXCIsXG4gICAgICAgICAgICAgICAgXCJzdHJva2UtbGluZWpvaW5cIjogXCJyb3VuZFwiLFxuICAgICAgICAgICAgICAgIFwic3Ryb2tlLWxpbmVjYXBcIjogXCJyb3VuZFwiLFxuICAgICAgICAgICAgICAgIFwic3Ryb2tlLXdpZHRoXCI6ICsocy53aWR0aCAvIGMgKiBpKS50b0ZpeGVkKDMpLFxuICAgICAgICAgICAgICAgIG9wYWNpdHk6ICsocy5vcGFjaXR5IC8gYykudG9GaXhlZCgzKVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQuaW5zZXJ0QmVmb3JlKHRoaXMpLnRyYW5zbGF0ZShzLm9mZnNldHgsIHMub2Zmc2V0eSk7XG4gICAgfTtcbiAgICB2YXIgY3VydmVzbGVuZ3RocyA9IHt9LFxuICAgIGdldFBvaW50QXRTZWdtZW50TGVuZ3RoID0gZnVuY3Rpb24gKHAxeCwgcDF5LCBjMXgsIGMxeSwgYzJ4LCBjMnksIHAyeCwgcDJ5LCBsZW5ndGgpIHtcbiAgICAgICAgaWYgKGxlbmd0aCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gYmV6bGVuKHAxeCwgcDF5LCBjMXgsIGMxeSwgYzJ4LCBjMnksIHAyeCwgcDJ5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBSLmZpbmREb3RzQXRTZWdtZW50KHAxeCwgcDF5LCBjMXgsIGMxeSwgYzJ4LCBjMnksIHAyeCwgcDJ5LCBnZXRUYXRMZW4ocDF4LCBwMXksIGMxeCwgYzF5LCBjMngsIGMyeSwgcDJ4LCBwMnksIGxlbmd0aCkpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBnZXRMZW5ndGhGYWN0b3J5ID0gZnVuY3Rpb24gKGlzdG90YWwsIHN1YnBhdGgpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChwYXRoLCBsZW5ndGgsIG9ubHlzdGFydCkge1xuICAgICAgICAgICAgcGF0aCA9IHBhdGgyY3VydmUocGF0aCk7XG4gICAgICAgICAgICB2YXIgeCwgeSwgcCwgbCwgc3AgPSBcIlwiLCBzdWJwYXRocyA9IHt9LCBwb2ludCxcbiAgICAgICAgICAgICAgICBsZW4gPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gcGF0aC5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcCA9IHBhdGhbaV07XG4gICAgICAgICAgICAgICAgaWYgKHBbMF0gPT0gXCJNXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgeCA9ICtwWzFdO1xuICAgICAgICAgICAgICAgICAgICB5ID0gK3BbMl07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbCA9IGdldFBvaW50QXRTZWdtZW50TGVuZ3RoKHgsIHksIHBbMV0sIHBbMl0sIHBbM10sIHBbNF0sIHBbNV0sIHBbNl0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGVuICsgbCA+IGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnBhdGggJiYgIXN1YnBhdGhzLnN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnQgPSBnZXRQb2ludEF0U2VnbWVudExlbmd0aCh4LCB5LCBwWzFdLCBwWzJdLCBwWzNdLCBwWzRdLCBwWzVdLCBwWzZdLCBsZW5ndGggLSBsZW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwICs9IFtcIkNcIiArIHBvaW50LnN0YXJ0LngsIHBvaW50LnN0YXJ0LnksIHBvaW50Lm0ueCwgcG9pbnQubS55LCBwb2ludC54LCBwb2ludC55XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25seXN0YXJ0KSB7cmV0dXJuIHNwO31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJwYXRocy5zdGFydCA9IHNwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwID0gW1wiTVwiICsgcG9pbnQueCwgcG9pbnQueSArIFwiQ1wiICsgcG9pbnQubi54LCBwb2ludC5uLnksIHBvaW50LmVuZC54LCBwb2ludC5lbmQueSwgcFs1XSwgcFs2XV0uam9pbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlbiArPSBsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggPSArcFs1XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gK3BbNl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzdG90YWwgJiYgIXN1YnBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludCA9IGdldFBvaW50QXRTZWdtZW50TGVuZ3RoKHgsIHksIHBbMV0sIHBbMl0sIHBbM10sIHBbNF0sIHBbNV0sIHBbNl0sIGxlbmd0aCAtIGxlbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHt4OiBwb2ludC54LCB5OiBwb2ludC55LCBhbHBoYTogcG9pbnQuYWxwaGF9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxlbiArPSBsO1xuICAgICAgICAgICAgICAgICAgICB4ID0gK3BbNV07XG4gICAgICAgICAgICAgICAgICAgIHkgPSArcFs2XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3AgKz0gcC5zaGlmdCgpICsgcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN1YnBhdGhzLmVuZCA9IHNwO1xuICAgICAgICAgICAgcG9pbnQgPSBpc3RvdGFsID8gbGVuIDogc3VicGF0aCA/IHN1YnBhdGhzIDogUi5maW5kRG90c0F0U2VnbWVudCh4LCB5LCBwWzBdLCBwWzFdLCBwWzJdLCBwWzNdLCBwWzRdLCBwWzVdLCAxKTtcbiAgICAgICAgICAgIHBvaW50LmFscGhhICYmIChwb2ludCA9IHt4OiBwb2ludC54LCB5OiBwb2ludC55LCBhbHBoYTogcG9pbnQuYWxwaGF9KTtcbiAgICAgICAgICAgIHJldHVybiBwb2ludDtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIHZhciBnZXRUb3RhbExlbmd0aCA9IGdldExlbmd0aEZhY3RvcnkoMSksXG4gICAgICAgIGdldFBvaW50QXRMZW5ndGggPSBnZXRMZW5ndGhGYWN0b3J5KCksXG4gICAgICAgIGdldFN1YnBhdGhzQXRMZW5ndGggPSBnZXRMZW5ndGhGYWN0b3J5KDAsIDEpO1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLmdldFRvdGFsTGVuZ3RoXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZXR1cm5zIGxlbmd0aCBvZiB0aGUgZ2l2ZW4gcGF0aCBpbiBwaXhlbHMuXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIHBhdGggKHN0cmluZykgU1ZHIHBhdGggc3RyaW5nLlxuICAgICAqKlxuICAgICA9IChudW1iZXIpIGxlbmd0aC5cbiAgICBcXCovXG4gICAgUi5nZXRUb3RhbExlbmd0aCA9IGdldFRvdGFsTGVuZ3RoO1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLmdldFBvaW50QXRMZW5ndGhcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJldHVybiBjb29yZGluYXRlcyBvZiB0aGUgcG9pbnQgbG9jYXRlZCBhdCB0aGUgZ2l2ZW4gbGVuZ3RoIG9uIHRoZSBnaXZlbiBwYXRoLlxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSBwYXRoIChzdHJpbmcpIFNWRyBwYXRoIHN0cmluZ1xuICAgICAtIGxlbmd0aCAobnVtYmVyKVxuICAgICAqKlxuICAgICA9IChvYmplY3QpIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBwb2ludDpcbiAgICAgbyB7XG4gICAgIG8gICAgIHg6IChudW1iZXIpIHggY29vcmRpbmF0ZVxuICAgICBvICAgICB5OiAobnVtYmVyKSB5IGNvb3JkaW5hdGVcbiAgICAgbyAgICAgYWxwaGE6IChudW1iZXIpIGFuZ2xlIG9mIGRlcml2YXRpdmVcbiAgICAgbyB9XG4gICAgXFwqL1xuICAgIFIuZ2V0UG9pbnRBdExlbmd0aCA9IGdldFBvaW50QXRMZW5ndGg7XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuZ2V0U3VicGF0aFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmV0dXJuIHN1YnBhdGggb2YgYSBnaXZlbiBwYXRoIGZyb20gZ2l2ZW4gbGVuZ3RoIHRvIGdpdmVuIGxlbmd0aC5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gcGF0aCAoc3RyaW5nKSBTVkcgcGF0aCBzdHJpbmdcbiAgICAgLSBmcm9tIChudW1iZXIpIHBvc2l0aW9uIG9mIHRoZSBzdGFydCBvZiB0aGUgc2VnbWVudFxuICAgICAtIHRvIChudW1iZXIpIHBvc2l0aW9uIG9mIHRoZSBlbmQgb2YgdGhlIHNlZ21lbnRcbiAgICAgKipcbiAgICAgPSAoc3RyaW5nKSBwYXRoc3RyaW5nIGZvciB0aGUgc2VnbWVudFxuICAgIFxcKi9cbiAgICBSLmdldFN1YnBhdGggPSBmdW5jdGlvbiAocGF0aCwgZnJvbSwgdG8pIHtcbiAgICAgICAgaWYgKHRoaXMuZ2V0VG90YWxMZW5ndGgocGF0aCkgLSB0byA8IDFlLTYpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRTdWJwYXRoc0F0TGVuZ3RoKHBhdGgsIGZyb20pLmVuZDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYSA9IGdldFN1YnBhdGhzQXRMZW5ndGgocGF0aCwgdG8sIDEpO1xuICAgICAgICByZXR1cm4gZnJvbSA/IGdldFN1YnBhdGhzQXRMZW5ndGgoYSwgZnJvbSkuZW5kIDogYTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LmdldFRvdGFsTGVuZ3RoXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZXR1cm5zIGxlbmd0aCBvZiB0aGUgcGF0aCBpbiBwaXhlbHMuIE9ubHkgd29ya3MgZm9yIGVsZW1lbnQgb2Yg4oCccGF0aOKAnSB0eXBlLlxuICAgICA9IChudW1iZXIpIGxlbmd0aC5cbiAgICBcXCovXG4gICAgZWxwcm90by5nZXRUb3RhbExlbmd0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBhdGggPSB0aGlzLmdldFBhdGgoKTtcbiAgICAgICAgaWYgKCFwYXRoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5ub2RlLmdldFRvdGFsTGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub2RlLmdldFRvdGFsTGVuZ3RoKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZ2V0VG90YWxMZW5ndGgocGF0aCk7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5nZXRQb2ludEF0TGVuZ3RoXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZXR1cm4gY29vcmRpbmF0ZXMgb2YgdGhlIHBvaW50IGxvY2F0ZWQgYXQgdGhlIGdpdmVuIGxlbmd0aCBvbiB0aGUgZ2l2ZW4gcGF0aC4gT25seSB3b3JrcyBmb3IgZWxlbWVudCBvZiDigJxwYXRo4oCdIHR5cGUuXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIGxlbmd0aCAobnVtYmVyKVxuICAgICAqKlxuICAgICA9IChvYmplY3QpIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBwb2ludDpcbiAgICAgbyB7XG4gICAgIG8gICAgIHg6IChudW1iZXIpIHggY29vcmRpbmF0ZVxuICAgICBvICAgICB5OiAobnVtYmVyKSB5IGNvb3JkaW5hdGVcbiAgICAgbyAgICAgYWxwaGE6IChudW1iZXIpIGFuZ2xlIG9mIGRlcml2YXRpdmVcbiAgICAgbyB9XG4gICAgXFwqL1xuICAgIGVscHJvdG8uZ2V0UG9pbnRBdExlbmd0aCA9IGZ1bmN0aW9uIChsZW5ndGgpIHtcbiAgICAgICAgdmFyIHBhdGggPSB0aGlzLmdldFBhdGgoKTtcbiAgICAgICAgaWYgKCFwYXRoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZ2V0UG9pbnRBdExlbmd0aChwYXRoLCBsZW5ndGgpO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuZ2V0UGF0aFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmV0dXJucyBwYXRoIG9mIHRoZSBlbGVtZW50LiBPbmx5IHdvcmtzIGZvciBlbGVtZW50cyBvZiDigJxwYXRo4oCdIHR5cGUgYW5kIHNpbXBsZSBlbGVtZW50cyBsaWtlIGNpcmNsZS5cbiAgICAgPSAob2JqZWN0KSBwYXRoXG4gICAgICoqXG4gICAgXFwqL1xuICAgIGVscHJvdG8uZ2V0UGF0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBhdGgsXG4gICAgICAgICAgICBnZXRQYXRoID0gUi5fZ2V0UGF0aFt0aGlzLnR5cGVdO1xuXG4gICAgICAgIGlmICh0aGlzLnR5cGUgPT0gXCJ0ZXh0XCIgfHwgdGhpcy50eXBlID09IFwic2V0XCIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChnZXRQYXRoKSB7XG4gICAgICAgICAgICBwYXRoID0gZ2V0UGF0aCh0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwYXRoO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuZ2V0U3VicGF0aFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmV0dXJuIHN1YnBhdGggb2YgYSBnaXZlbiBlbGVtZW50IGZyb20gZ2l2ZW4gbGVuZ3RoIHRvIGdpdmVuIGxlbmd0aC4gT25seSB3b3JrcyBmb3IgZWxlbWVudCBvZiDigJxwYXRo4oCdIHR5cGUuXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIGZyb20gKG51bWJlcikgcG9zaXRpb24gb2YgdGhlIHN0YXJ0IG9mIHRoZSBzZWdtZW50XG4gICAgIC0gdG8gKG51bWJlcikgcG9zaXRpb24gb2YgdGhlIGVuZCBvZiB0aGUgc2VnbWVudFxuICAgICAqKlxuICAgICA9IChzdHJpbmcpIHBhdGhzdHJpbmcgZm9yIHRoZSBzZWdtZW50XG4gICAgXFwqL1xuICAgIGVscHJvdG8uZ2V0U3VicGF0aCA9IGZ1bmN0aW9uIChmcm9tLCB0bykge1xuICAgICAgICB2YXIgcGF0aCA9IHRoaXMuZ2V0UGF0aCgpO1xuICAgICAgICBpZiAoIXBhdGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBSLmdldFN1YnBhdGgocGF0aCwgZnJvbSwgdG8pO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuZWFzaW5nX2Zvcm11bGFzXG4gICAgIFsgcHJvcGVydHkgXVxuICAgICAqKlxuICAgICAqIE9iamVjdCB0aGF0IGNvbnRhaW5zIGVhc2luZyBmb3JtdWxhcyBmb3IgYW5pbWF0aW9uLiBZb3UgY291bGQgZXh0ZW5kIGl0IHdpdGggeW91ciBvd24uIEJ5IGRlZmF1bHQgaXQgaGFzIGZvbGxvd2luZyBsaXN0IG9mIGVhc2luZzpcbiAgICAgIyA8dWw+XG4gICAgICMgICAgIDxsaT7igJxsaW5lYXLigJ08L2xpPlxuICAgICAjICAgICA8bGk+4oCcJmx0O+KAnSBvciDigJxlYXNlSW7igJ0gb3Ig4oCcZWFzZS1pbuKAnTwvbGk+XG4gICAgICMgICAgIDxsaT7igJw+4oCdIG9yIOKAnGVhc2VPdXTigJ0gb3Ig4oCcZWFzZS1vdXTigJ08L2xpPlxuICAgICAjICAgICA8bGk+4oCcJmx0Oz7igJ0gb3Ig4oCcZWFzZUluT3V04oCdIG9yIOKAnGVhc2UtaW4tb3V04oCdPC9saT5cbiAgICAgIyAgICAgPGxpPuKAnGJhY2tJbuKAnSBvciDigJxiYWNrLWlu4oCdPC9saT5cbiAgICAgIyAgICAgPGxpPuKAnGJhY2tPdXTigJ0gb3Ig4oCcYmFjay1vdXTigJ08L2xpPlxuICAgICAjICAgICA8bGk+4oCcZWxhc3RpY+KAnTwvbGk+XG4gICAgICMgICAgIDxsaT7igJxib3VuY2XigJ08L2xpPlxuICAgICAjIDwvdWw+XG4gICAgICMgPHA+U2VlIGFsc28gPGEgaHJlZj1cImh0dHA6Ly9yYXBoYWVsanMuY29tL2Vhc2luZy5odG1sXCI+RWFzaW5nIGRlbW88L2E+LjwvcD5cbiAgICBcXCovXG4gICAgdmFyIGVmID0gUi5lYXNpbmdfZm9ybXVsYXMgPSB7XG4gICAgICAgIGxpbmVhcjogZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICB9LFxuICAgICAgICBcIjxcIjogZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgIHJldHVybiBwb3cobiwgMS43KTtcbiAgICAgICAgfSxcbiAgICAgICAgXCI+XCI6IGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICByZXR1cm4gcG93KG4sIC40OCk7XG4gICAgICAgIH0sXG4gICAgICAgIFwiPD5cIjogZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgIHZhciBxID0gLjQ4IC0gbiAvIDEuMDQsXG4gICAgICAgICAgICAgICAgUSA9IG1hdGguc3FydCguMTczNCArIHEgKiBxKSxcbiAgICAgICAgICAgICAgICB4ID0gUSAtIHEsXG4gICAgICAgICAgICAgICAgWCA9IHBvdyhhYnMoeCksIDEgLyAzKSAqICh4IDwgMCA/IC0xIDogMSksXG4gICAgICAgICAgICAgICAgeSA9IC1RIC0gcSxcbiAgICAgICAgICAgICAgICBZID0gcG93KGFicyh5KSwgMSAvIDMpICogKHkgPCAwID8gLTEgOiAxKSxcbiAgICAgICAgICAgICAgICB0ID0gWCArIFkgKyAuNTtcbiAgICAgICAgICAgIHJldHVybiAoMSAtIHQpICogMyAqIHQgKiB0ICsgdCAqIHQgKiB0O1xuICAgICAgICB9LFxuICAgICAgICBiYWNrSW46IGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICB2YXIgcyA9IDEuNzAxNTg7XG4gICAgICAgICAgICByZXR1cm4gbiAqIG4gKiAoKHMgKyAxKSAqIG4gLSBzKTtcbiAgICAgICAgfSxcbiAgICAgICAgYmFja091dDogZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgIG4gPSBuIC0gMTtcbiAgICAgICAgICAgIHZhciBzID0gMS43MDE1ODtcbiAgICAgICAgICAgIHJldHVybiBuICogbiAqICgocyArIDEpICogbiArIHMpICsgMTtcbiAgICAgICAgfSxcbiAgICAgICAgZWxhc3RpYzogZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgIGlmIChuID09ICEhbikge1xuICAgICAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBvdygyLCAtMTAgKiBuKSAqIG1hdGguc2luKChuIC0gLjA3NSkgKiAoMiAqIFBJKSAvIC4zKSArIDE7XG4gICAgICAgIH0sXG4gICAgICAgIGJvdW5jZTogZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgIHZhciBzID0gNy41NjI1LFxuICAgICAgICAgICAgICAgIHAgPSAyLjc1LFxuICAgICAgICAgICAgICAgIGw7XG4gICAgICAgICAgICBpZiAobiA8ICgxIC8gcCkpIHtcbiAgICAgICAgICAgICAgICBsID0gcyAqIG4gKiBuO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAobiA8ICgyIC8gcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbiAtPSAoMS41IC8gcCk7XG4gICAgICAgICAgICAgICAgICAgIGwgPSBzICogbiAqIG4gKyAuNzU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG4gPCAoMi41IC8gcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG4gLT0gKDIuMjUgLyBwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBzICogbiAqIG4gKyAuOTM3NTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG4gLT0gKDIuNjI1IC8gcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsID0gcyAqIG4gKiBuICsgLjk4NDM3NTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBlZi5lYXNlSW4gPSBlZltcImVhc2UtaW5cIl0gPSBlZltcIjxcIl07XG4gICAgZWYuZWFzZU91dCA9IGVmW1wiZWFzZS1vdXRcIl0gPSBlZltcIj5cIl07XG4gICAgZWYuZWFzZUluT3V0ID0gZWZbXCJlYXNlLWluLW91dFwiXSA9IGVmW1wiPD5cIl07XG4gICAgZWZbXCJiYWNrLWluXCJdID0gZWYuYmFja0luO1xuICAgIGVmW1wiYmFjay1vdXRcIl0gPSBlZi5iYWNrT3V0O1xuXG4gICAgdmFyIGFuaW1hdGlvbkVsZW1lbnRzID0gW10sXG4gICAgICAgIHJlcXVlc3RBbmltRnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lICAgICAgIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lICAgIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cub1JlcXVlc3RBbmltYXRpb25GcmFtZSAgICAgIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgICAgIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGNhbGxiYWNrLCAxNik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICBhbmltYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgTm93ID0gK25ldyBEYXRlLFxuICAgICAgICAgICAgICAgIGwgPSAwO1xuICAgICAgICAgICAgZm9yICg7IGwgPCBhbmltYXRpb25FbGVtZW50cy5sZW5ndGg7IGwrKykge1xuICAgICAgICAgICAgICAgIHZhciBlID0gYW5pbWF0aW9uRWxlbWVudHNbbF07XG4gICAgICAgICAgICAgICAgaWYgKGUuZWwucmVtb3ZlZCB8fCBlLnBhdXNlZCkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHRpbWUgPSBOb3cgLSBlLnN0YXJ0LFxuICAgICAgICAgICAgICAgICAgICBtcyA9IGUubXMsXG4gICAgICAgICAgICAgICAgICAgIGVhc2luZyA9IGUuZWFzaW5nLFxuICAgICAgICAgICAgICAgICAgICBmcm9tID0gZS5mcm9tLFxuICAgICAgICAgICAgICAgICAgICBkaWZmID0gZS5kaWZmLFxuICAgICAgICAgICAgICAgICAgICB0byA9IGUudG8sXG4gICAgICAgICAgICAgICAgICAgIHQgPSBlLnQsXG4gICAgICAgICAgICAgICAgICAgIHRoYXQgPSBlLmVsLFxuICAgICAgICAgICAgICAgICAgICBzZXQgPSB7fSxcbiAgICAgICAgICAgICAgICAgICAgbm93LFxuICAgICAgICAgICAgICAgICAgICBpbml0ID0ge30sXG4gICAgICAgICAgICAgICAgICAgIGtleTtcbiAgICAgICAgICAgICAgICBpZiAoZS5pbml0c3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWUgPSAoZS5pbml0c3RhdHVzICogZS5hbmltLnRvcCAtIGUucHJldikgLyAoZS5wZXJjZW50IC0gZS5wcmV2KSAqIG1zO1xuICAgICAgICAgICAgICAgICAgICBlLnN0YXR1cyA9IGUuaW5pdHN0YXR1cztcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGUuaW5pdHN0YXR1cztcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wICYmIGFuaW1hdGlvbkVsZW1lbnRzLnNwbGljZShsLS0sIDEpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGUuc3RhdHVzID0gKGUucHJldiArIChlLnBlcmNlbnQgLSBlLnByZXYpICogKHRpbWUgLyBtcykpIC8gZS5hbmltLnRvcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRpbWUgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGltZSA8IG1zKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBlYXNpbmcodGltZSAvIG1zKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYXR0ciBpbiBmcm9tKSBpZiAoZnJvbVtoYXNdKGF0dHIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGF2YWlsYWJsZUFuaW1BdHRyc1thdHRyXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgbnU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdyA9ICtmcm9tW2F0dHJdICsgcG9zICogbXMgKiBkaWZmW2F0dHJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY29sb3VyXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdyA9IFwicmdiKFwiICsgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXB0bzI1NShyb3VuZChmcm9tW2F0dHJdLnIgKyBwb3MgKiBtcyAqIGRpZmZbYXR0cl0ucikpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXB0bzI1NShyb3VuZChmcm9tW2F0dHJdLmcgKyBwb3MgKiBtcyAqIGRpZmZbYXR0cl0uZykpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXB0bzI1NShyb3VuZChmcm9tW2F0dHJdLmIgKyBwb3MgKiBtcyAqIGRpZmZbYXR0cl0uYikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbihcIixcIikgKyBcIilcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInBhdGhcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm93ID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGZyb21bYXR0cl0ubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm93W2ldID0gW2Zyb21bYXR0cl1baV1bMF1dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDEsIGpqID0gZnJvbVthdHRyXVtpXS5sZW5ndGg7IGogPCBqajsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm93W2ldW2pdID0gK2Zyb21bYXR0cl1baV1bal0gKyBwb3MgKiBtcyAqIGRpZmZbYXR0cl1baV1bal07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3dbaV0gPSBub3dbaV0uam9pbihTKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3cgPSBub3cuam9pbihTKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInRyYW5zZm9ybVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlmZlthdHRyXS5yZWFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3cgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDAsIGlpID0gZnJvbVthdHRyXS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm93W2ldID0gW2Zyb21bYXR0cl1baV1bMF1dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaiA9IDEsIGpqID0gZnJvbVthdHRyXVtpXS5sZW5ndGg7IGogPCBqajsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vd1tpXVtqXSA9IGZyb21bYXR0cl1baV1bal0gKyBwb3MgKiBtcyAqIGRpZmZbYXR0cl1baV1bal07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdldCA9IGZ1bmN0aW9uIChpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICtmcm9tW2F0dHJdW2ldICsgcG9zICogbXMgKiBkaWZmW2F0dHJdW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vdyA9IFtbXCJyXCIsIGdldCgyKSwgMCwgMF0sIFtcInRcIiwgZ2V0KDMpLCBnZXQoNCldLCBbXCJzXCIsIGdldCgwKSwgZ2V0KDEpLCAwLCAwXV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3cgPSBbW1wibVwiLCBnZXQoMCksIGdldCgxKSwgZ2V0KDIpLCBnZXQoMyksIGdldCg0KSwgZ2V0KDUpXV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNzdlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0ciA9PSBcImNsaXAtcmVjdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3cgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSA0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vd1tpXSA9ICtmcm9tW2F0dHJdW2ldICsgcG9zICogbXMgKiBkaWZmW2F0dHJdW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmcm9tMiA9IFtdW2NvbmNhdF0oZnJvbVthdHRyXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gdGhhdC5wYXBlci5jdXN0b21BdHRyaWJ1dGVzW2F0dHJdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm93W2ldID0gK2Zyb20yW2ldICsgcG9zICogbXMgKiBkaWZmW2F0dHJdW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0W2F0dHJdID0gbm93O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuYXR0cihzZXQpO1xuICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24gKGlkLCB0aGF0LCBhbmltKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmUoXCJyYXBoYWVsLmFuaW0uZnJhbWUuXCIgKyBpZCwgdGhhdCwgYW5pbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSkodGhhdC5pZCwgdGhhdCwgZS5hbmltKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24oZiwgZWwsIGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlKFwicmFwaGFlbC5hbmltLmZyYW1lLlwiICsgZWwuaWQsIGVsLCBhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmUoXCJyYXBoYWVsLmFuaW0uZmluaXNoLlwiICsgZWwuaWQsIGVsLCBhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSLmlzKGYsIFwiZnVuY3Rpb25cIikgJiYgZi5jYWxsKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KShlLmNhbGxiYWNrLCB0aGF0LCBlLmFuaW0pO1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmF0dHIodG8pO1xuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25FbGVtZW50cy5zcGxpY2UobC0tLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUucmVwZWF0ID4gMSAmJiAhZS5uZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGtleSBpbiB0bykgaWYgKHRvW2hhc10oa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRba2V5XSA9IGUudG90YWxPcmlnaW5ba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGUuZWwuYXR0cihpbml0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bkFuaW1hdGlvbihlLmFuaW0sIGUuZWwsIGUuYW5pbS5wZXJjZW50c1swXSwgbnVsbCwgZS50b3RhbE9yaWdpbiwgZS5yZXBlYXQgLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5uZXh0ICYmICFlLnN0b3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bkFuaW1hdGlvbihlLmFuaW0sIGUuZWwsIGUubmV4dCwgbnVsbCwgZS50b3RhbE9yaWdpbiwgZS5yZXBlYXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYW5pbWF0aW9uRWxlbWVudHMubGVuZ3RoICYmIHJlcXVlc3RBbmltRnJhbWUoYW5pbWF0aW9uKTtcbiAgICAgICAgfSxcbiAgICAgICAgdXB0bzI1NSA9IGZ1bmN0aW9uIChjb2xvcikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbG9yID4gMjU1ID8gMjU1IDogY29sb3IgPCAwID8gMCA6IGNvbG9yO1xuICAgICAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LmFuaW1hdGVXaXRoXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBBY3RzIHNpbWlsYXIgdG8gQEVsZW1lbnQuYW5pbWF0ZSwgYnV0IGVuc3VyZSB0aGF0IGdpdmVuIGFuaW1hdGlvbiBydW5zIGluIHN5bmMgd2l0aCBhbm90aGVyIGdpdmVuIGVsZW1lbnQuXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIGVsIChvYmplY3QpIGVsZW1lbnQgdG8gc3luYyB3aXRoXG4gICAgIC0gYW5pbSAob2JqZWN0KSBhbmltYXRpb24gdG8gc3luYyB3aXRoXG4gICAgIC0gcGFyYW1zIChvYmplY3QpICNvcHRpb25hbCBmaW5hbCBhdHRyaWJ1dGVzIGZvciB0aGUgZWxlbWVudCwgc2VlIGFsc28gQEVsZW1lbnQuYXR0clxuICAgICAtIG1zIChudW1iZXIpICNvcHRpb25hbCBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGZvciBhbmltYXRpb24gdG8gcnVuXG4gICAgIC0gZWFzaW5nIChzdHJpbmcpICNvcHRpb25hbCBlYXNpbmcgdHlwZS4gQWNjZXB0IG9uIG9mIEBSYXBoYWVsLmVhc2luZ19mb3JtdWxhcyBvciBDU1MgZm9ybWF0OiBgY3ViaWMmI3gyMDEwO2JlemllcihYWCwmIzE2MDtYWCwmIzE2MDtYWCwmIzE2MDtYWClgXG4gICAgIC0gY2FsbGJhY2sgKGZ1bmN0aW9uKSAjb3B0aW9uYWwgY2FsbGJhY2sgZnVuY3Rpb24uIFdpbGwgYmUgY2FsbGVkIGF0IHRoZSBlbmQgb2YgYW5pbWF0aW9uLlxuICAgICAqIG9yXG4gICAgIC0gZWxlbWVudCAob2JqZWN0KSBlbGVtZW50IHRvIHN5bmMgd2l0aFxuICAgICAtIGFuaW0gKG9iamVjdCkgYW5pbWF0aW9uIHRvIHN5bmMgd2l0aFxuICAgICAtIGFuaW1hdGlvbiAob2JqZWN0KSAjb3B0aW9uYWwgYW5pbWF0aW9uIG9iamVjdCwgc2VlIEBSYXBoYWVsLmFuaW1hdGlvblxuICAgICAqKlxuICAgICA9IChvYmplY3QpIG9yaWdpbmFsIGVsZW1lbnRcbiAgICBcXCovXG4gICAgZWxwcm90by5hbmltYXRlV2l0aCA9IGZ1bmN0aW9uIChlbCwgYW5pbSwgcGFyYW1zLCBtcywgZWFzaW5nLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXM7XG4gICAgICAgIGlmIChlbGVtZW50LnJlbW92ZWQpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrLmNhbGwoZWxlbWVudCk7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYSA9IHBhcmFtcyBpbnN0YW5jZW9mIEFuaW1hdGlvbiA/IHBhcmFtcyA6IFIuYW5pbWF0aW9uKHBhcmFtcywgbXMsIGVhc2luZywgY2FsbGJhY2spLFxuICAgICAgICAgICAgeCwgeTtcbiAgICAgICAgcnVuQW5pbWF0aW9uKGEsIGVsZW1lbnQsIGEucGVyY2VudHNbMF0sIG51bGwsIGVsZW1lbnQuYXR0cigpKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gYW5pbWF0aW9uRWxlbWVudHMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgaWYgKGFuaW1hdGlvbkVsZW1lbnRzW2ldLmFuaW0gPT0gYW5pbSAmJiBhbmltYXRpb25FbGVtZW50c1tpXS5lbCA9PSBlbCkge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbkVsZW1lbnRzW2lpIC0gMV0uc3RhcnQgPSBhbmltYXRpb25FbGVtZW50c1tpXS5zdGFydDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICAgICAgLy9cbiAgICAgICAgLy9cbiAgICAgICAgLy8gdmFyIGEgPSBwYXJhbXMgPyBSLmFuaW1hdGlvbihwYXJhbXMsIG1zLCBlYXNpbmcsIGNhbGxiYWNrKSA6IGFuaW0sXG4gICAgICAgIC8vICAgICBzdGF0dXMgPSBlbGVtZW50LnN0YXR1cyhhbmltKTtcbiAgICAgICAgLy8gcmV0dXJuIHRoaXMuYW5pbWF0ZShhKS5zdGF0dXMoYSwgc3RhdHVzICogYW5pbS5tcyAvIGEubXMpO1xuICAgIH07XG4gICAgZnVuY3Rpb24gQ3ViaWNCZXppZXJBdFRpbWUodCwgcDF4LCBwMXksIHAyeCwgcDJ5LCBkdXJhdGlvbikge1xuICAgICAgICB2YXIgY3ggPSAzICogcDF4LFxuICAgICAgICAgICAgYnggPSAzICogKHAyeCAtIHAxeCkgLSBjeCxcbiAgICAgICAgICAgIGF4ID0gMSAtIGN4IC0gYngsXG4gICAgICAgICAgICBjeSA9IDMgKiBwMXksXG4gICAgICAgICAgICBieSA9IDMgKiAocDJ5IC0gcDF5KSAtIGN5LFxuICAgICAgICAgICAgYXkgPSAxIC0gY3kgLSBieTtcbiAgICAgICAgZnVuY3Rpb24gc2FtcGxlQ3VydmVYKHQpIHtcbiAgICAgICAgICAgIHJldHVybiAoKGF4ICogdCArIGJ4KSAqIHQgKyBjeCkgKiB0O1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHNvbHZlKHgsIGVwc2lsb24pIHtcbiAgICAgICAgICAgIHZhciB0ID0gc29sdmVDdXJ2ZVgoeCwgZXBzaWxvbik7XG4gICAgICAgICAgICByZXR1cm4gKChheSAqIHQgKyBieSkgKiB0ICsgY3kpICogdDtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBzb2x2ZUN1cnZlWCh4LCBlcHNpbG9uKSB7XG4gICAgICAgICAgICB2YXIgdDAsIHQxLCB0MiwgeDIsIGQyLCBpO1xuICAgICAgICAgICAgZm9yKHQyID0geCwgaSA9IDA7IGkgPCA4OyBpKyspIHtcbiAgICAgICAgICAgICAgICB4MiA9IHNhbXBsZUN1cnZlWCh0MikgLSB4O1xuICAgICAgICAgICAgICAgIGlmIChhYnMoeDIpIDwgZXBzaWxvbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGQyID0gKDMgKiBheCAqIHQyICsgMiAqIGJ4KSAqIHQyICsgY3g7XG4gICAgICAgICAgICAgICAgaWYgKGFicyhkMikgPCAxZS02KSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0MiA9IHQyIC0geDIgLyBkMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHQwID0gMDtcbiAgICAgICAgICAgIHQxID0gMTtcbiAgICAgICAgICAgIHQyID0geDtcbiAgICAgICAgICAgIGlmICh0MiA8IHQwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHQyID4gdDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAodDAgPCB0MSkge1xuICAgICAgICAgICAgICAgIHgyID0gc2FtcGxlQ3VydmVYKHQyKTtcbiAgICAgICAgICAgICAgICBpZiAoYWJzKHgyIC0geCkgPCBlcHNpbG9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0MjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHggPiB4Mikge1xuICAgICAgICAgICAgICAgICAgICB0MCA9IHQyO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHQxID0gdDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHQyID0gKHQxIC0gdDApIC8gMiArIHQwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHQyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzb2x2ZSh0LCAxIC8gKDIwMCAqIGR1cmF0aW9uKSk7XG4gICAgfVxuICAgIGVscHJvdG8ub25BbmltYXRpb24gPSBmdW5jdGlvbiAoZikge1xuICAgICAgICBmID8gZXZlLm9uKFwicmFwaGFlbC5hbmltLmZyYW1lLlwiICsgdGhpcy5pZCwgZikgOiBldmUudW5iaW5kKFwicmFwaGFlbC5hbmltLmZyYW1lLlwiICsgdGhpcy5pZCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgZnVuY3Rpb24gQW5pbWF0aW9uKGFuaW0sIG1zKSB7XG4gICAgICAgIHZhciBwZXJjZW50cyA9IFtdLFxuICAgICAgICAgICAgbmV3QW5pbSA9IHt9O1xuICAgICAgICB0aGlzLm1zID0gbXM7XG4gICAgICAgIHRoaXMudGltZXMgPSAxO1xuICAgICAgICBpZiAoYW5pbSkge1xuICAgICAgICAgICAgZm9yICh2YXIgYXR0ciBpbiBhbmltKSBpZiAoYW5pbVtoYXNdKGF0dHIpKSB7XG4gICAgICAgICAgICAgICAgbmV3QW5pbVt0b0Zsb2F0KGF0dHIpXSA9IGFuaW1bYXR0cl07XG4gICAgICAgICAgICAgICAgcGVyY2VudHMucHVzaCh0b0Zsb2F0KGF0dHIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBlcmNlbnRzLnNvcnQoc29ydEJ5TnVtYmVyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFuaW0gPSBuZXdBbmltO1xuICAgICAgICB0aGlzLnRvcCA9IHBlcmNlbnRzW3BlcmNlbnRzLmxlbmd0aCAtIDFdO1xuICAgICAgICB0aGlzLnBlcmNlbnRzID0gcGVyY2VudHM7XG4gICAgfVxuICAgIC8qXFxcbiAgICAgKiBBbmltYXRpb24uZGVsYXlcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIENyZWF0ZXMgYSBjb3B5IG9mIGV4aXN0aW5nIGFuaW1hdGlvbiBvYmplY3Qgd2l0aCBnaXZlbiBkZWxheS5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gZGVsYXkgKG51bWJlcikgbnVtYmVyIG9mIG1zIHRvIHBhc3MgYmV0d2VlbiBhbmltYXRpb24gc3RhcnQgYW5kIGFjdHVhbCBhbmltYXRpb25cbiAgICAgKipcbiAgICAgPSAob2JqZWN0KSBuZXcgYWx0ZXJlZCBBbmltYXRpb24gb2JqZWN0XG4gICAgIHwgdmFyIGFuaW0gPSBSYXBoYWVsLmFuaW1hdGlvbih7Y3g6IDEwLCBjeTogMjB9LCAyZTMpO1xuICAgICB8IGNpcmNsZTEuYW5pbWF0ZShhbmltKTsgLy8gcnVuIHRoZSBnaXZlbiBhbmltYXRpb24gaW1tZWRpYXRlbHlcbiAgICAgfCBjaXJjbGUyLmFuaW1hdGUoYW5pbS5kZWxheSg1MDApKTsgLy8gcnVuIHRoZSBnaXZlbiBhbmltYXRpb24gYWZ0ZXIgNTAwIG1zXG4gICAgXFwqL1xuICAgIEFuaW1hdGlvbi5wcm90b3R5cGUuZGVsYXkgPSBmdW5jdGlvbiAoZGVsYXkpIHtcbiAgICAgICAgdmFyIGEgPSBuZXcgQW5pbWF0aW9uKHRoaXMuYW5pbSwgdGhpcy5tcyk7XG4gICAgICAgIGEudGltZXMgPSB0aGlzLnRpbWVzO1xuICAgICAgICBhLmRlbCA9ICtkZWxheSB8fCAwO1xuICAgICAgICByZXR1cm4gYTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBBbmltYXRpb24ucmVwZWF0XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBDcmVhdGVzIGEgY29weSBvZiBleGlzdGluZyBhbmltYXRpb24gb2JqZWN0IHdpdGggZ2l2ZW4gcmVwZXRpdGlvbi5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gcmVwZWF0IChudW1iZXIpIG51bWJlciBpdGVyYXRpb25zIG9mIGFuaW1hdGlvbi4gRm9yIGluZmluaXRlIGFuaW1hdGlvbiBwYXNzIGBJbmZpbml0eWBcbiAgICAgKipcbiAgICAgPSAob2JqZWN0KSBuZXcgYWx0ZXJlZCBBbmltYXRpb24gb2JqZWN0XG4gICAgXFwqL1xuICAgIEFuaW1hdGlvbi5wcm90b3R5cGUucmVwZWF0ID0gZnVuY3Rpb24gKHRpbWVzKSB7XG4gICAgICAgIHZhciBhID0gbmV3IEFuaW1hdGlvbih0aGlzLmFuaW0sIHRoaXMubXMpO1xuICAgICAgICBhLmRlbCA9IHRoaXMuZGVsO1xuICAgICAgICBhLnRpbWVzID0gbWF0aC5mbG9vcihtbWF4KHRpbWVzLCAwKSkgfHwgMTtcbiAgICAgICAgcmV0dXJuIGE7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBydW5BbmltYXRpb24oYW5pbSwgZWxlbWVudCwgcGVyY2VudCwgc3RhdHVzLCB0b3RhbE9yaWdpbiwgdGltZXMpIHtcbiAgICAgICAgcGVyY2VudCA9IHRvRmxvYXQocGVyY2VudCk7XG4gICAgICAgIHZhciBwYXJhbXMsXG4gICAgICAgICAgICBpc0luQW5pbSxcbiAgICAgICAgICAgIGlzSW5BbmltU2V0LFxuICAgICAgICAgICAgcGVyY2VudHMgPSBbXSxcbiAgICAgICAgICAgIG5leHQsXG4gICAgICAgICAgICBwcmV2LFxuICAgICAgICAgICAgdGltZXN0YW1wLFxuICAgICAgICAgICAgbXMgPSBhbmltLm1zLFxuICAgICAgICAgICAgZnJvbSA9IHt9LFxuICAgICAgICAgICAgdG8gPSB7fSxcbiAgICAgICAgICAgIGRpZmYgPSB7fTtcbiAgICAgICAgaWYgKHN0YXR1cykge1xuICAgICAgICAgICAgZm9yIChpID0gMCwgaWkgPSBhbmltYXRpb25FbGVtZW50cy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGUgPSBhbmltYXRpb25FbGVtZW50c1tpXTtcbiAgICAgICAgICAgICAgICBpZiAoZS5lbC5pZCA9PSBlbGVtZW50LmlkICYmIGUuYW5pbSA9PSBhbmltKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLnBlcmNlbnQgIT0gcGVyY2VudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uRWxlbWVudHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNJbkFuaW1TZXQgPSAxO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNJbkFuaW0gPSBlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYXR0cihlLnRvdGFsT3JpZ2luKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RhdHVzID0gK3RvOyAvLyBOYU5cbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBhbmltLnBlcmNlbnRzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChhbmltLnBlcmNlbnRzW2ldID09IHBlcmNlbnQgfHwgYW5pbS5wZXJjZW50c1tpXSA+IHN0YXR1cyAqIGFuaW0udG9wKSB7XG4gICAgICAgICAgICAgICAgcGVyY2VudCA9IGFuaW0ucGVyY2VudHNbaV07XG4gICAgICAgICAgICAgICAgcHJldiA9IGFuaW0ucGVyY2VudHNbaSAtIDFdIHx8IDA7XG4gICAgICAgICAgICAgICAgbXMgPSBtcyAvIGFuaW0udG9wICogKHBlcmNlbnQgLSBwcmV2KTtcbiAgICAgICAgICAgICAgICBuZXh0ID0gYW5pbS5wZXJjZW50c1tpICsgMV07XG4gICAgICAgICAgICAgICAgcGFyYW1zID0gYW5pbS5hbmltW3BlcmNlbnRdO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzdGF0dXMpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmF0dHIoYW5pbS5hbmltW2FuaW0ucGVyY2VudHNbaV1dKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXBhcmFtcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNJbkFuaW0pIHtcbiAgICAgICAgICAgIGZvciAodmFyIGF0dHIgaW4gcGFyYW1zKSBpZiAocGFyYW1zW2hhc10oYXR0cikpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXZhaWxhYmxlQW5pbUF0dHJzW2hhc10oYXR0cikgfHwgZWxlbWVudC5wYXBlci5jdXN0b21BdHRyaWJ1dGVzW2hhc10oYXR0cikpIHtcbiAgICAgICAgICAgICAgICAgICAgZnJvbVthdHRyXSA9IGVsZW1lbnQuYXR0cihhdHRyKTtcbiAgICAgICAgICAgICAgICAgICAgKGZyb21bYXR0cl0gPT0gbnVsbCkgJiYgKGZyb21bYXR0cl0gPSBhdmFpbGFibGVBdHRyc1thdHRyXSk7XG4gICAgICAgICAgICAgICAgICAgIHRvW2F0dHJdID0gcGFyYW1zW2F0dHJdO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGF2YWlsYWJsZUFuaW1BdHRyc1thdHRyXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBudTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmW2F0dHJdID0gKHRvW2F0dHJdIC0gZnJvbVthdHRyXSkgLyBtcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjb2xvdXJcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tW2F0dHJdID0gUi5nZXRSR0IoZnJvbVthdHRyXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvQ29sb3VyID0gUi5nZXRSR0IodG9bYXR0cl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZbYXR0cl0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHI6ICh0b0NvbG91ci5yIC0gZnJvbVthdHRyXS5yKSAvIG1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnOiAodG9Db2xvdXIuZyAtIGZyb21bYXR0cl0uZykgLyBtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYjogKHRvQ29sb3VyLmIgLSBmcm9tW2F0dHJdLmIpIC8gbXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInBhdGhcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGF0aGVzID0gcGF0aDJjdXJ2ZShmcm9tW2F0dHJdLCB0b1thdHRyXSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvUGF0aCA9IHBhdGhlc1sxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tW2F0dHJdID0gcGF0aGVzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZbYXR0cl0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGZyb21bYXR0cl0ubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmW2F0dHJdW2ldID0gWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMSwgamogPSBmcm9tW2F0dHJdW2ldLmxlbmd0aDsgaiA8IGpqOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZbYXR0cl1baV1bal0gPSAodG9QYXRoW2ldW2pdIC0gZnJvbVthdHRyXVtpXVtqXSkgLyBtcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0cmFuc2Zvcm1cIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgXyA9IGVsZW1lbnQuXyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXEgPSBlcXVhbGlzZVRyYW5zZm9ybShfW2F0dHJdLCB0b1thdHRyXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb21bYXR0cl0gPSBlcS5mcm9tO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b1thdHRyXSA9IGVxLnRvO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmW2F0dHJdID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZbYXR0cl0ucmVhbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDAsIGlpID0gZnJvbVthdHRyXS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmW2F0dHJdW2ldID0gW2Zyb21bYXR0cl1baV1bMF1dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChqID0gMSwgamogPSBmcm9tW2F0dHJdW2ldLmxlbmd0aDsgaiA8IGpqOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmW2F0dHJdW2ldW2pdID0gKHRvW2F0dHJdW2ldW2pdIC0gZnJvbVthdHRyXVtpXVtqXSkgLyBtcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtID0gKGVsZW1lbnQubWF0cml4IHx8IG5ldyBNYXRyaXgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8yID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF86IHt0cmFuc2Zvcm06IF8udHJhbnNmb3JtfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRCQm94OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmdldEJCb3goMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbVthdHRyXSA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0uYSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0uYixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0uYyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0uZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0uZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0uZlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYWN0VHJhbnNmb3JtKHRvMiwgdG9bYXR0cl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b1thdHRyXSA9IHRvMi5fLnRyYW5zZm9ybTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZlthdHRyXSA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0bzIubWF0cml4LmEgLSBtLmEpIC8gbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodG8yLm1hdHJpeC5iIC0gbS5iKSAvIG1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRvMi5tYXRyaXguYyAtIG0uYykgLyBtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0bzIubWF0cml4LmQgLSBtLmQpIC8gbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodG8yLm1hdHJpeC5lIC0gbS5lKSAvIG1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRvMi5tYXRyaXguZiAtIG0uZikgLyBtc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmcm9tW2F0dHJdID0gW18uc3gsIF8uc3ksIF8uZGVnLCBfLmR4LCBfLmR5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIHRvMiA9IHtfOnt9LCBnZXRCQm94OiBmdW5jdGlvbiAoKSB7IHJldHVybiBlbGVtZW50LmdldEJCb3goKTsgfX07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV4dHJhY3RUcmFuc2Zvcm0odG8yLCB0b1thdHRyXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZbYXR0cl0gPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAodG8yLl8uc3ggLSBfLnN4KSAvIG1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgKHRvMi5fLnN5IC0gXy5zeSkgLyBtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICh0bzIuXy5kZWcgLSBfLmRlZykgLyBtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICh0bzIuXy5keCAtIF8uZHgpIC8gbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAodG8yLl8uZHkgLSBfLmR5KSAvIG1zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNzdlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBTdHIocGFyYW1zW2F0dHJdKVtzcGxpdF0oc2VwYXJhdG9yKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbTIgPSBTdHIoZnJvbVthdHRyXSlbc3BsaXRdKHNlcGFyYXRvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHIgPT0gXCJjbGlwLXJlY3RcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tW2F0dHJdID0gZnJvbTI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZbYXR0cl0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGZyb20yLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZlthdHRyXVtpXSA9ICh2YWx1ZXNbaV0gLSBmcm9tW2F0dHJdW2ldKSAvIG1zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvW2F0dHJdID0gdmFsdWVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXMgPSBbXVtjb25jYXRdKHBhcmFtc1thdHRyXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbTIgPSBbXVtjb25jYXRdKGZyb21bYXR0cl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZbYXR0cl0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gZWxlbWVudC5wYXBlci5jdXN0b21BdHRyaWJ1dGVzW2F0dHJdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZbYXR0cl1baV0gPSAoKHZhbHVlc1tpXSB8fCAwKSAtIChmcm9tMltpXSB8fCAwKSkgLyBtcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZWFzaW5nID0gcGFyYW1zLmVhc2luZyxcbiAgICAgICAgICAgICAgICBlYXN5ZWFzeSA9IFIuZWFzaW5nX2Zvcm11bGFzW2Vhc2luZ107XG4gICAgICAgICAgICBpZiAoIWVhc3llYXN5KSB7XG4gICAgICAgICAgICAgICAgZWFzeWVhc3kgPSBTdHIoZWFzaW5nKS5tYXRjaChiZXppZXJyZyk7XG4gICAgICAgICAgICAgICAgaWYgKGVhc3llYXN5ICYmIGVhc3llYXN5Lmxlbmd0aCA9PSA1KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJ2ZSA9IGVhc3llYXN5O1xuICAgICAgICAgICAgICAgICAgICBlYXN5ZWFzeSA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQ3ViaWNCZXppZXJBdFRpbWUodCwgK2N1cnZlWzFdLCArY3VydmVbMl0sICtjdXJ2ZVszXSwgK2N1cnZlWzRdLCBtcyk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWFzeWVhc3kgPSBwaXBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRpbWVzdGFtcCA9IHBhcmFtcy5zdGFydCB8fCBhbmltLnN0YXJ0IHx8ICtuZXcgRGF0ZTtcbiAgICAgICAgICAgIGUgPSB7XG4gICAgICAgICAgICAgICAgYW5pbTogYW5pbSxcbiAgICAgICAgICAgICAgICBwZXJjZW50OiBwZXJjZW50LFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogdGltZXN0YW1wLFxuICAgICAgICAgICAgICAgIHN0YXJ0OiB0aW1lc3RhbXAgKyAoYW5pbS5kZWwgfHwgMCksXG4gICAgICAgICAgICAgICAgc3RhdHVzOiAwLFxuICAgICAgICAgICAgICAgIGluaXRzdGF0dXM6IHN0YXR1cyB8fCAwLFxuICAgICAgICAgICAgICAgIHN0b3A6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1zOiBtcyxcbiAgICAgICAgICAgICAgICBlYXNpbmc6IGVhc3llYXN5LFxuICAgICAgICAgICAgICAgIGZyb206IGZyb20sXG4gICAgICAgICAgICAgICAgZGlmZjogZGlmZixcbiAgICAgICAgICAgICAgICB0bzogdG8sXG4gICAgICAgICAgICAgICAgZWw6IGVsZW1lbnQsXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IHBhcmFtcy5jYWxsYmFjayxcbiAgICAgICAgICAgICAgICBwcmV2OiBwcmV2LFxuICAgICAgICAgICAgICAgIG5leHQ6IG5leHQsXG4gICAgICAgICAgICAgICAgcmVwZWF0OiB0aW1lcyB8fCBhbmltLnRpbWVzLFxuICAgICAgICAgICAgICAgIG9yaWdpbjogZWxlbWVudC5hdHRyKCksXG4gICAgICAgICAgICAgICAgdG90YWxPcmlnaW46IHRvdGFsT3JpZ2luXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYW5pbWF0aW9uRWxlbWVudHMucHVzaChlKTtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgJiYgIWlzSW5BbmltICYmICFpc0luQW5pbVNldCkge1xuICAgICAgICAgICAgICAgIGUuc3RvcCA9IHRydWU7XG4gICAgICAgICAgICAgICAgZS5zdGFydCA9IG5ldyBEYXRlIC0gbXMgKiBzdGF0dXM7XG4gICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbkVsZW1lbnRzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhbmltYXRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNJbkFuaW1TZXQpIHtcbiAgICAgICAgICAgICAgICBlLnN0YXJ0ID0gbmV3IERhdGUgLSBlLm1zICogc3RhdHVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYW5pbWF0aW9uRWxlbWVudHMubGVuZ3RoID09IDEgJiYgcmVxdWVzdEFuaW1GcmFtZShhbmltYXRpb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaXNJbkFuaW0uaW5pdHN0YXR1cyA9IHN0YXR1cztcbiAgICAgICAgICAgIGlzSW5BbmltLnN0YXJ0ID0gbmV3IERhdGUgLSBpc0luQW5pbS5tcyAqIHN0YXR1cztcbiAgICAgICAgfVxuICAgICAgICBldmUoXCJyYXBoYWVsLmFuaW0uc3RhcnQuXCIgKyBlbGVtZW50LmlkLCBlbGVtZW50LCBhbmltKTtcbiAgICB9XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuYW5pbWF0aW9uXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBDcmVhdGVzIGFuIGFuaW1hdGlvbiBvYmplY3QgdGhhdCBjYW4gYmUgcGFzc2VkIHRvIHRoZSBARWxlbWVudC5hbmltYXRlIG9yIEBFbGVtZW50LmFuaW1hdGVXaXRoIG1ldGhvZHMuXG4gICAgICogU2VlIGFsc28gQEFuaW1hdGlvbi5kZWxheSBhbmQgQEFuaW1hdGlvbi5yZXBlYXQgbWV0aG9kcy5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gcGFyYW1zIChvYmplY3QpIGZpbmFsIGF0dHJpYnV0ZXMgZm9yIHRoZSBlbGVtZW50LCBzZWUgYWxzbyBARWxlbWVudC5hdHRyXG4gICAgIC0gbXMgKG51bWJlcikgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBmb3IgYW5pbWF0aW9uIHRvIHJ1blxuICAgICAtIGVhc2luZyAoc3RyaW5nKSAjb3B0aW9uYWwgZWFzaW5nIHR5cGUuIEFjY2VwdCBvbmUgb2YgQFJhcGhhZWwuZWFzaW5nX2Zvcm11bGFzIG9yIENTUyBmb3JtYXQ6IGBjdWJpYyYjeDIwMTA7YmV6aWVyKFhYLCYjMTYwO1hYLCYjMTYwO1hYLCYjMTYwO1hYKWBcbiAgICAgLSBjYWxsYmFjayAoZnVuY3Rpb24pICNvcHRpb25hbCBjYWxsYmFjayBmdW5jdGlvbi4gV2lsbCBiZSBjYWxsZWQgYXQgdGhlIGVuZCBvZiBhbmltYXRpb24uXG4gICAgICoqXG4gICAgID0gKG9iamVjdCkgQEFuaW1hdGlvblxuICAgIFxcKi9cbiAgICBSLmFuaW1hdGlvbiA9IGZ1bmN0aW9uIChwYXJhbXMsIG1zLCBlYXNpbmcsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChwYXJhbXMgaW5zdGFuY2VvZiBBbmltYXRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJhbXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFIuaXMoZWFzaW5nLCBcImZ1bmN0aW9uXCIpIHx8ICFlYXNpbmcpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgZWFzaW5nIHx8IG51bGw7XG4gICAgICAgICAgICBlYXNpbmcgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHBhcmFtcyA9IE9iamVjdChwYXJhbXMpO1xuICAgICAgICBtcyA9ICttcyB8fCAwO1xuICAgICAgICB2YXIgcCA9IHt9LFxuICAgICAgICAgICAganNvbixcbiAgICAgICAgICAgIGF0dHI7XG4gICAgICAgIGZvciAoYXR0ciBpbiBwYXJhbXMpIGlmIChwYXJhbXNbaGFzXShhdHRyKSAmJiB0b0Zsb2F0KGF0dHIpICE9IGF0dHIgJiYgdG9GbG9hdChhdHRyKSArIFwiJVwiICE9IGF0dHIpIHtcbiAgICAgICAgICAgIGpzb24gPSB0cnVlO1xuICAgICAgICAgICAgcFthdHRyXSA9IHBhcmFtc1thdHRyXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWpzb24pIHtcbiAgICAgICAgICAgIC8vIGlmIHBlcmNlbnQtbGlrZSBzeW50YXggaXMgdXNlZCBhbmQgZW5kLW9mLWFsbCBhbmltYXRpb24gY2FsbGJhY2sgdXNlZFxuICAgICAgICAgICAgaWYoY2FsbGJhY2spe1xuICAgICAgICAgICAgICAgIC8vIGZpbmQgdGhlIGxhc3Qgb25lXG4gICAgICAgICAgICAgICAgdmFyIGxhc3RLZXkgPSAwO1xuICAgICAgICAgICAgICAgIGZvcih2YXIgaSBpbiBwYXJhbXMpe1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGVyY2VudCA9IHRvSW50KGkpO1xuICAgICAgICAgICAgICAgICAgICBpZihwYXJhbXNbaGFzXShpKSAmJiBwZXJjZW50ID4gbGFzdEtleSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0S2V5ID0gcGVyY2VudDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsYXN0S2V5ICs9ICclJztcbiAgICAgICAgICAgICAgICAvLyBpZiBhbHJlYWR5IGRlZmluZWQgY2FsbGJhY2sgaW4gdGhlIGxhc3Qga2V5ZnJhbWUsIHNraXBcbiAgICAgICAgICAgICAgICAhcGFyYW1zW2xhc3RLZXldLmNhbGxiYWNrICYmIChwYXJhbXNbbGFzdEtleV0uY2FsbGJhY2sgPSBjYWxsYmFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG5ldyBBbmltYXRpb24ocGFyYW1zLCBtcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlYXNpbmcgJiYgKHAuZWFzaW5nID0gZWFzaW5nKTtcbiAgICAgICAgICAgIGNhbGxiYWNrICYmIChwLmNhbGxiYWNrID0gY2FsbGJhY2spO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBBbmltYXRpb24oezEwMDogcH0sIG1zKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuYW5pbWF0ZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQ3JlYXRlcyBhbmQgc3RhcnRzIGFuaW1hdGlvbiBmb3IgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gcGFyYW1zIChvYmplY3QpIGZpbmFsIGF0dHJpYnV0ZXMgZm9yIHRoZSBlbGVtZW50LCBzZWUgYWxzbyBARWxlbWVudC5hdHRyXG4gICAgIC0gbXMgKG51bWJlcikgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBmb3IgYW5pbWF0aW9uIHRvIHJ1blxuICAgICAtIGVhc2luZyAoc3RyaW5nKSAjb3B0aW9uYWwgZWFzaW5nIHR5cGUuIEFjY2VwdCBvbmUgb2YgQFJhcGhhZWwuZWFzaW5nX2Zvcm11bGFzIG9yIENTUyBmb3JtYXQ6IGBjdWJpYyYjeDIwMTA7YmV6aWVyKFhYLCYjMTYwO1hYLCYjMTYwO1hYLCYjMTYwO1hYKWBcbiAgICAgLSBjYWxsYmFjayAoZnVuY3Rpb24pICNvcHRpb25hbCBjYWxsYmFjayBmdW5jdGlvbi4gV2lsbCBiZSBjYWxsZWQgYXQgdGhlIGVuZCBvZiBhbmltYXRpb24uXG4gICAgICogb3JcbiAgICAgLSBhbmltYXRpb24gKG9iamVjdCkgYW5pbWF0aW9uIG9iamVjdCwgc2VlIEBSYXBoYWVsLmFuaW1hdGlvblxuICAgICAqKlxuICAgICA9IChvYmplY3QpIG9yaWdpbmFsIGVsZW1lbnRcbiAgICBcXCovXG4gICAgZWxwcm90by5hbmltYXRlID0gZnVuY3Rpb24gKHBhcmFtcywgbXMsIGVhc2luZywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzO1xuICAgICAgICBpZiAoZWxlbWVudC5yZW1vdmVkKSB7XG4gICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjay5jYWxsKGVsZW1lbnQpO1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFuaW0gPSBwYXJhbXMgaW5zdGFuY2VvZiBBbmltYXRpb24gPyBwYXJhbXMgOiBSLmFuaW1hdGlvbihwYXJhbXMsIG1zLCBlYXNpbmcsIGNhbGxiYWNrKTtcbiAgICAgICAgcnVuQW5pbWF0aW9uKGFuaW0sIGVsZW1lbnQsIGFuaW0ucGVyY2VudHNbMF0sIG51bGwsIGVsZW1lbnQuYXR0cigpKTtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5zZXRUaW1lXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBTZXRzIHRoZSBzdGF0dXMgb2YgYW5pbWF0aW9uIG9mIHRoZSBlbGVtZW50IGluIG1pbGxpc2Vjb25kcy4gU2ltaWxhciB0byBARWxlbWVudC5zdGF0dXMgbWV0aG9kLlxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSBhbmltIChvYmplY3QpIGFuaW1hdGlvbiBvYmplY3RcbiAgICAgLSB2YWx1ZSAobnVtYmVyKSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGZyb20gdGhlIGJlZ2lubmluZyBvZiB0aGUgYW5pbWF0aW9uXG4gICAgICoqXG4gICAgID0gKG9iamVjdCkgb3JpZ2luYWwgZWxlbWVudCBpZiBgdmFsdWVgIGlzIHNwZWNpZmllZFxuICAgICAqIE5vdGUsIHRoYXQgZHVyaW5nIGFuaW1hdGlvbiBmb2xsb3dpbmcgZXZlbnRzIGFyZSB0cmlnZ2VyZWQ6XG4gICAgICpcbiAgICAgKiBPbiBlYWNoIGFuaW1hdGlvbiBmcmFtZSBldmVudCBgYW5pbS5mcmFtZS48aWQ+YCwgb24gc3RhcnQgYGFuaW0uc3RhcnQuPGlkPmAgYW5kIG9uIGVuZCBgYW5pbS5maW5pc2guPGlkPmAuXG4gICAgXFwqL1xuICAgIGVscHJvdG8uc2V0VGltZSA9IGZ1bmN0aW9uIChhbmltLCB2YWx1ZSkge1xuICAgICAgICBpZiAoYW5pbSAmJiB2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXR1cyhhbmltLCBtbWluKHZhbHVlLCBhbmltLm1zKSAvIGFuaW0ubXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuc3RhdHVzXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBHZXRzIG9yIHNldHMgdGhlIHN0YXR1cyBvZiBhbmltYXRpb24gb2YgdGhlIGVsZW1lbnQuXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIGFuaW0gKG9iamVjdCkgI29wdGlvbmFsIGFuaW1hdGlvbiBvYmplY3RcbiAgICAgLSB2YWx1ZSAobnVtYmVyKSAjb3B0aW9uYWwgMCDigJMgMS4gSWYgc3BlY2lmaWVkLCBtZXRob2Qgd29ya3MgbGlrZSBhIHNldHRlciBhbmQgc2V0cyB0aGUgc3RhdHVzIG9mIGEgZ2l2ZW4gYW5pbWF0aW9uIHRvIHRoZSB2YWx1ZS4gVGhpcyB3aWxsIGNhdXNlIGFuaW1hdGlvbiB0byBqdW1wIHRvIHRoZSBnaXZlbiBwb3NpdGlvbi5cbiAgICAgKipcbiAgICAgPSAobnVtYmVyKSBzdGF0dXNcbiAgICAgKiBvclxuICAgICA9IChhcnJheSkgc3RhdHVzIGlmIGBhbmltYCBpcyBub3Qgc3BlY2lmaWVkLiBBcnJheSBvZiBvYmplY3RzIGluIGZvcm1hdDpcbiAgICAgbyB7XG4gICAgIG8gICAgIGFuaW06IChvYmplY3QpIGFuaW1hdGlvbiBvYmplY3RcbiAgICAgbyAgICAgc3RhdHVzOiAobnVtYmVyKSBzdGF0dXNcbiAgICAgbyB9XG4gICAgICogb3JcbiAgICAgPSAob2JqZWN0KSBvcmlnaW5hbCBlbGVtZW50IGlmIGB2YWx1ZWAgaXMgc3BlY2lmaWVkXG4gICAgXFwqL1xuICAgIGVscHJvdG8uc3RhdHVzID0gZnVuY3Rpb24gKGFuaW0sIHZhbHVlKSB7XG4gICAgICAgIHZhciBvdXQgPSBbXSxcbiAgICAgICAgICAgIGkgPSAwLFxuICAgICAgICAgICAgbGVuLFxuICAgICAgICAgICAgZTtcbiAgICAgICAgaWYgKHZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJ1bkFuaW1hdGlvbihhbmltLCB0aGlzLCAtMSwgbW1pbih2YWx1ZSwgMSkpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZW4gPSBhbmltYXRpb25FbGVtZW50cy5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZSA9IGFuaW1hdGlvbkVsZW1lbnRzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChlLmVsLmlkID09IHRoaXMuaWQgJiYgKCFhbmltIHx8IGUuYW5pbSA9PSBhbmltKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYW5pbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuc3RhdHVzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG91dC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW06IGUuYW5pbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogZS5zdGF0dXNcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFuaW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnBhdXNlXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBTdG9wcyBhbmltYXRpb24gb2YgdGhlIGVsZW1lbnQgd2l0aCBhYmlsaXR5IHRvIHJlc3VtZSBpdCBsYXRlciBvbi5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gYW5pbSAob2JqZWN0KSAjb3B0aW9uYWwgYW5pbWF0aW9uIG9iamVjdFxuICAgICAqKlxuICAgICA9IChvYmplY3QpIG9yaWdpbmFsIGVsZW1lbnRcbiAgICBcXCovXG4gICAgZWxwcm90by5wYXVzZSA9IGZ1bmN0aW9uIChhbmltKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW5pbWF0aW9uRWxlbWVudHMubGVuZ3RoOyBpKyspIGlmIChhbmltYXRpb25FbGVtZW50c1tpXS5lbC5pZCA9PSB0aGlzLmlkICYmICghYW5pbSB8fCBhbmltYXRpb25FbGVtZW50c1tpXS5hbmltID09IGFuaW0pKSB7XG4gICAgICAgICAgICBpZiAoZXZlKFwicmFwaGFlbC5hbmltLnBhdXNlLlwiICsgdGhpcy5pZCwgdGhpcywgYW5pbWF0aW9uRWxlbWVudHNbaV0uYW5pbSkgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uRWxlbWVudHNbaV0ucGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnJlc3VtZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVzdW1lcyBhbmltYXRpb24gaWYgaXQgd2FzIHBhdXNlZCB3aXRoIEBFbGVtZW50LnBhdXNlIG1ldGhvZC5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gYW5pbSAob2JqZWN0KSAjb3B0aW9uYWwgYW5pbWF0aW9uIG9iamVjdFxuICAgICAqKlxuICAgICA9IChvYmplY3QpIG9yaWdpbmFsIGVsZW1lbnRcbiAgICBcXCovXG4gICAgZWxwcm90by5yZXN1bWUgPSBmdW5jdGlvbiAoYW5pbSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFuaW1hdGlvbkVsZW1lbnRzLmxlbmd0aDsgaSsrKSBpZiAoYW5pbWF0aW9uRWxlbWVudHNbaV0uZWwuaWQgPT0gdGhpcy5pZCAmJiAoIWFuaW0gfHwgYW5pbWF0aW9uRWxlbWVudHNbaV0uYW5pbSA9PSBhbmltKSkge1xuICAgICAgICAgICAgdmFyIGUgPSBhbmltYXRpb25FbGVtZW50c1tpXTtcbiAgICAgICAgICAgIGlmIChldmUoXCJyYXBoYWVsLmFuaW0ucmVzdW1lLlwiICsgdGhpcy5pZCwgdGhpcywgZS5hbmltKSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgZS5wYXVzZWQ7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0dXMoZS5hbmltLCBlLnN0YXR1cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5zdG9wXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBTdG9wcyBhbmltYXRpb24gb2YgdGhlIGVsZW1lbnQuXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIGFuaW0gKG9iamVjdCkgI29wdGlvbmFsIGFuaW1hdGlvbiBvYmplY3RcbiAgICAgKipcbiAgICAgPSAob2JqZWN0KSBvcmlnaW5hbCBlbGVtZW50XG4gICAgXFwqL1xuICAgIGVscHJvdG8uc3RvcCA9IGZ1bmN0aW9uIChhbmltKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW5pbWF0aW9uRWxlbWVudHMubGVuZ3RoOyBpKyspIGlmIChhbmltYXRpb25FbGVtZW50c1tpXS5lbC5pZCA9PSB0aGlzLmlkICYmICghYW5pbSB8fCBhbmltYXRpb25FbGVtZW50c1tpXS5hbmltID09IGFuaW0pKSB7XG4gICAgICAgICAgICBpZiAoZXZlKFwicmFwaGFlbC5hbmltLnN0b3AuXCIgKyB0aGlzLmlkLCB0aGlzLCBhbmltYXRpb25FbGVtZW50c1tpXS5hbmltKSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb25FbGVtZW50cy5zcGxpY2UoaS0tLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIGZ1bmN0aW9uIHN0b3BBbmltYXRpb24ocGFwZXIpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbmltYXRpb25FbGVtZW50cy5sZW5ndGg7IGkrKykgaWYgKGFuaW1hdGlvbkVsZW1lbnRzW2ldLmVsLnBhcGVyID09IHBhcGVyKSB7XG4gICAgICAgICAgICBhbmltYXRpb25FbGVtZW50cy5zcGxpY2UoaS0tLCAxKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBldmUub24oXCJyYXBoYWVsLnJlbW92ZVwiLCBzdG9wQW5pbWF0aW9uKTtcbiAgICBldmUub24oXCJyYXBoYWVsLmNsZWFyXCIsIHN0b3BBbmltYXRpb24pO1xuICAgIGVscHJvdG8udG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIlJhcGhhXFx4ZWJsXFx1MjAxOXMgb2JqZWN0XCI7XG4gICAgfTtcblxuICAgIC8vIFNldFxuICAgIHZhciBTZXQgPSBmdW5jdGlvbiAoaXRlbXMpIHtcbiAgICAgICAgdGhpcy5pdGVtcyA9IFtdO1xuICAgICAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMudHlwZSA9IFwic2V0XCI7XG4gICAgICAgIGlmIChpdGVtcykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gaXRlbXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtc1tpXSAmJiAoaXRlbXNbaV0uY29uc3RydWN0b3IgPT0gZWxwcm90by5jb25zdHJ1Y3RvciB8fCBpdGVtc1tpXS5jb25zdHJ1Y3RvciA9PSBTZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbdGhpcy5pdGVtcy5sZW5ndGhdID0gdGhpcy5pdGVtc1t0aGlzLml0ZW1zLmxlbmd0aF0gPSBpdGVtc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sZW5ndGgrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHNldHByb3RvID0gU2V0LnByb3RvdHlwZTtcbiAgICAvKlxcXG4gICAgICogU2V0LnB1c2hcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEFkZHMgZWFjaCBhcmd1bWVudCB0byB0aGUgY3VycmVudCBzZXQuXG4gICAgID0gKG9iamVjdCkgb3JpZ2luYWwgZWxlbWVudFxuICAgIFxcKi9cbiAgICBzZXRwcm90by5wdXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaXRlbSxcbiAgICAgICAgICAgIGxlbjtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgIGl0ZW0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICBpZiAoaXRlbSAmJiAoaXRlbS5jb25zdHJ1Y3RvciA9PSBlbHByb3RvLmNvbnN0cnVjdG9yIHx8IGl0ZW0uY29uc3RydWN0b3IgPT0gU2V0KSkge1xuICAgICAgICAgICAgICAgIGxlbiA9IHRoaXMuaXRlbXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHRoaXNbbGVuXSA9IHRoaXMuaXRlbXNbbGVuXSA9IGl0ZW07XG4gICAgICAgICAgICAgICAgdGhpcy5sZW5ndGgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBTZXQucG9wXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZW1vdmVzIGxhc3QgZWxlbWVudCBhbmQgcmV0dXJucyBpdC5cbiAgICAgPSAob2JqZWN0KSBlbGVtZW50XG4gICAgXFwqL1xuICAgIHNldHByb3RvLnBvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5sZW5ndGggJiYgZGVsZXRlIHRoaXNbdGhpcy5sZW5ndGgtLV07XG4gICAgICAgIHJldHVybiB0aGlzLml0ZW1zLnBvcCgpO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFNldC5mb3JFYWNoXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBFeGVjdXRlcyBnaXZlbiBmdW5jdGlvbiBmb3IgZWFjaCBlbGVtZW50IGluIHRoZSBzZXQuXG4gICAgICpcbiAgICAgKiBJZiBmdW5jdGlvbiByZXR1cm5zIGBmYWxzZWAgaXQgd2lsbCBzdG9wIGxvb3AgcnVubmluZy5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gY2FsbGJhY2sgKGZ1bmN0aW9uKSBmdW5jdGlvbiB0byBydW5cbiAgICAgLSB0aGlzQXJnIChvYmplY3QpIGNvbnRleHQgb2JqZWN0IGZvciB0aGUgY2FsbGJhY2tcbiAgICAgPSAob2JqZWN0KSBTZXQgb2JqZWN0XG4gICAgXFwqL1xuICAgIHNldHByb3RvLmZvckVhY2ggPSBmdW5jdGlvbiAoY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy5pdGVtcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2suY2FsbCh0aGlzQXJnLCB0aGlzLml0ZW1zW2ldLCBpKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIGZvciAodmFyIG1ldGhvZCBpbiBlbHByb3RvKSBpZiAoZWxwcm90b1toYXNdKG1ldGhvZCkpIHtcbiAgICAgICAgc2V0cHJvdG9bbWV0aG9kXSA9IChmdW5jdGlvbiAobWV0aG9kbmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJnID0gYXJndW1lbnRzO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsW21ldGhvZG5hbWVdW2FwcGx5XShlbCwgYXJnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKG1ldGhvZCk7XG4gICAgfVxuICAgIHNldHByb3RvLmF0dHIgPSBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKG5hbWUgJiYgUi5pcyhuYW1lLCBhcnJheSkgJiYgUi5pcyhuYW1lWzBdLCBcIm9iamVjdFwiKSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpqID0gbmFtZS5sZW5ndGg7IGogPCBqajsgaisrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pdGVtc1tqXS5hdHRyKG5hbWVbal0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy5pdGVtcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pdGVtc1tpXS5hdHRyKG5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBTZXQuY2xlYXJcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJlbW92ZXMgYWxsIGVsZW1lbnRzIGZyb20gdGhlIHNldFxuICAgIFxcKi9cbiAgICBzZXRwcm90by5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnBvcCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogU2V0LnNwbGljZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVtb3ZlcyBnaXZlbiBlbGVtZW50IGZyb20gdGhlIHNldFxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSBpbmRleCAobnVtYmVyKSBwb3NpdGlvbiBvZiB0aGUgZGVsZXRpb25cbiAgICAgLSBjb3VudCAobnVtYmVyKSBudW1iZXIgb2YgZWxlbWVudCB0byByZW1vdmVcbiAgICAgLSBpbnNlcnRpb27igKYgKG9iamVjdCkgI29wdGlvbmFsIGVsZW1lbnRzIHRvIGluc2VydFxuICAgICA9IChvYmplY3QpIHNldCBlbGVtZW50cyB0aGF0IHdlcmUgZGVsZXRlZFxuICAgIFxcKi9cbiAgICBzZXRwcm90by5zcGxpY2UgPSBmdW5jdGlvbiAoaW5kZXgsIGNvdW50LCBpbnNlcnRpb24pIHtcbiAgICAgICAgaW5kZXggPSBpbmRleCA8IDAgPyBtbWF4KHRoaXMubGVuZ3RoICsgaW5kZXgsIDApIDogaW5kZXg7XG4gICAgICAgIGNvdW50ID0gbW1heCgwLCBtbWluKHRoaXMubGVuZ3RoIC0gaW5kZXgsIGNvdW50KSk7XG4gICAgICAgIHZhciB0YWlsID0gW10sXG4gICAgICAgICAgICB0b2RlbCA9IFtdLFxuICAgICAgICAgICAgYXJncyA9IFtdLFxuICAgICAgICAgICAgaTtcbiAgICAgICAgZm9yIChpID0gMjsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgICAgICAgIHRvZGVsLnB1c2godGhpc1tpbmRleCArIGldKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKDsgaSA8IHRoaXMubGVuZ3RoIC0gaW5kZXg7IGkrKykge1xuICAgICAgICAgICAgdGFpbC5wdXNoKHRoaXNbaW5kZXggKyBpXSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFyZ2xlbiA9IGFyZ3MubGVuZ3RoO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgYXJnbGVuICsgdGFpbC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5pdGVtc1tpbmRleCArIGldID0gdGhpc1tpbmRleCArIGldID0gaSA8IGFyZ2xlbiA/IGFyZ3NbaV0gOiB0YWlsW2kgLSBhcmdsZW5dO1xuICAgICAgICB9XG4gICAgICAgIGkgPSB0aGlzLml0ZW1zLmxlbmd0aCA9IHRoaXMubGVuZ3RoIC09IGNvdW50IC0gYXJnbGVuO1xuICAgICAgICB3aGlsZSAodGhpc1tpXSkge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXNbaSsrXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFNldCh0b2RlbCk7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogU2V0LmV4Y2x1ZGVcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJlbW92ZXMgZ2l2ZW4gZWxlbWVudCBmcm9tIHRoZSBzZXRcbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gZWxlbWVudCAob2JqZWN0KSBlbGVtZW50IHRvIHJlbW92ZVxuICAgICA9IChib29sZWFuKSBgdHJ1ZWAgaWYgb2JqZWN0IHdhcyBmb3VuZCAmIHJlbW92ZWQgZnJvbSB0aGUgc2V0XG4gICAgXFwqL1xuICAgIHNldHByb3RvLmV4Y2x1ZGUgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSBpZiAodGhpc1tpXSA9PSBlbCkge1xuICAgICAgICAgICAgdGhpcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgc2V0cHJvdG8uYW5pbWF0ZSA9IGZ1bmN0aW9uIChwYXJhbXMsIG1zLCBlYXNpbmcsIGNhbGxiYWNrKSB7XG4gICAgICAgIChSLmlzKGVhc2luZywgXCJmdW5jdGlvblwiKSB8fCAhZWFzaW5nKSAmJiAoY2FsbGJhY2sgPSBlYXNpbmcgfHwgbnVsbCk7XG4gICAgICAgIHZhciBsZW4gPSB0aGlzLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgIGkgPSBsZW4sXG4gICAgICAgICAgICBpdGVtLFxuICAgICAgICAgICAgc2V0ID0gdGhpcyxcbiAgICAgICAgICAgIGNvbGxlY3RvcjtcbiAgICAgICAgaWYgKCFsZW4pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGNhbGxiYWNrICYmIChjb2xsZWN0b3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAhLS1sZW4gJiYgY2FsbGJhY2suY2FsbChzZXQpO1xuICAgICAgICB9KTtcbiAgICAgICAgZWFzaW5nID0gUi5pcyhlYXNpbmcsIHN0cmluZykgPyBlYXNpbmcgOiBjb2xsZWN0b3I7XG4gICAgICAgIHZhciBhbmltID0gUi5hbmltYXRpb24ocGFyYW1zLCBtcywgZWFzaW5nLCBjb2xsZWN0b3IpO1xuICAgICAgICBpdGVtID0gdGhpcy5pdGVtc1stLWldLmFuaW1hdGUoYW5pbSk7XG4gICAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgICAgIHRoaXMuaXRlbXNbaV0gJiYgIXRoaXMuaXRlbXNbaV0ucmVtb3ZlZCAmJiB0aGlzLml0ZW1zW2ldLmFuaW1hdGVXaXRoKGl0ZW0sIGFuaW0sIGFuaW0pO1xuICAgICAgICAgICAgKHRoaXMuaXRlbXNbaV0gJiYgIXRoaXMuaXRlbXNbaV0ucmVtb3ZlZCkgfHwgbGVuLS07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBzZXRwcm90by5pbnNlcnRBZnRlciA9IGZ1bmN0aW9uIChlbCkge1xuICAgICAgICB2YXIgaSA9IHRoaXMuaXRlbXMubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgICB0aGlzLml0ZW1zW2ldLmluc2VydEFmdGVyKGVsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIHNldHByb3RvLmdldEJCb3ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB4ID0gW10sXG4gICAgICAgICAgICB5ID0gW10sXG4gICAgICAgICAgICB4MiA9IFtdLFxuICAgICAgICAgICAgeTIgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMuaXRlbXMubGVuZ3RoOyBpLS07KSBpZiAoIXRoaXMuaXRlbXNbaV0ucmVtb3ZlZCkge1xuICAgICAgICAgICAgdmFyIGJveCA9IHRoaXMuaXRlbXNbaV0uZ2V0QkJveCgpO1xuICAgICAgICAgICAgeC5wdXNoKGJveC54KTtcbiAgICAgICAgICAgIHkucHVzaChib3gueSk7XG4gICAgICAgICAgICB4Mi5wdXNoKGJveC54ICsgYm94LndpZHRoKTtcbiAgICAgICAgICAgIHkyLnB1c2goYm94LnkgKyBib3guaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICB4ID0gbW1pblthcHBseV0oMCwgeCk7XG4gICAgICAgIHkgPSBtbWluW2FwcGx5XSgwLCB5KTtcbiAgICAgICAgeDIgPSBtbWF4W2FwcGx5XSgwLCB4Mik7XG4gICAgICAgIHkyID0gbW1heFthcHBseV0oMCwgeTIpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogeCxcbiAgICAgICAgICAgIHk6IHksXG4gICAgICAgICAgICB4MjogeDIsXG4gICAgICAgICAgICB5MjogeTIsXG4gICAgICAgICAgICB3aWR0aDogeDIgLSB4LFxuICAgICAgICAgICAgaGVpZ2h0OiB5MiAtIHlcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIHNldHByb3RvLmNsb25lID0gZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgcyA9IHRoaXMucGFwZXIuc2V0KCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRoaXMuaXRlbXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgcy5wdXNoKHRoaXMuaXRlbXNbaV0uY2xvbmUoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHM7XG4gICAgfTtcbiAgICBzZXRwcm90by50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFwiUmFwaGFcXHhlYmxcXHUyMDE4cyBzZXRcIjtcbiAgICB9O1xuXG4gICAgc2V0cHJvdG8uZ2xvdyA9IGZ1bmN0aW9uKGdsb3dDb25maWcpIHtcbiAgICAgICAgdmFyIHJldCA9IHRoaXMucGFwZXIuc2V0KCk7XG4gICAgICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbihzaGFwZSwgaW5kZXgpe1xuICAgICAgICAgICAgdmFyIGcgPSBzaGFwZS5nbG93KGdsb3dDb25maWcpO1xuICAgICAgICAgICAgaWYoZyAhPSBudWxsKXtcbiAgICAgICAgICAgICAgICBnLmZvckVhY2goZnVuY3Rpb24oc2hhcGUyLCBpbmRleDIpe1xuICAgICAgICAgICAgICAgICAgICByZXQucHVzaChzaGFwZTIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xuXG5cbiAgICAvKlxcXG4gICAgICogU2V0LmlzUG9pbnRJbnNpZGVcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIERldGVybWluZSBpZiBnaXZlbiBwb2ludCBpcyBpbnNpZGUgdGhpcyBzZXTigJlzIGVsZW1lbnRzXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIHggKG51bWJlcikgeCBjb29yZGluYXRlIG9mIHRoZSBwb2ludFxuICAgICAtIHkgKG51bWJlcikgeSBjb29yZGluYXRlIG9mIHRoZSBwb2ludFxuICAgICA9IChib29sZWFuKSBgdHJ1ZWAgaWYgcG9pbnQgaXMgaW5zaWRlIGFueSBvZiB0aGUgc2V0J3MgZWxlbWVudHNcbiAgICAgXFwqL1xuICAgIHNldHByb3RvLmlzUG9pbnRJbnNpZGUgPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICB2YXIgaXNQb2ludEluc2lkZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICBpZiAoZWwuaXNQb2ludEluc2lkZSh4LCB5KSkge1xuICAgICAgICAgICAgICAgIGlzUG9pbnRJbnNpZGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gc3RvcCBsb29wXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gaXNQb2ludEluc2lkZTtcbiAgICB9O1xuXG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwucmVnaXN0ZXJGb250XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBBZGRzIGdpdmVuIGZvbnQgdG8gdGhlIHJlZ2lzdGVyZWQgc2V0IG9mIGZvbnRzIGZvciBSYXBoYcOrbC4gU2hvdWxkIGJlIHVzZWQgYXMgYW4gaW50ZXJuYWwgY2FsbCBmcm9tIHdpdGhpbiBDdWbDs27igJlzIGZvbnQgZmlsZS5cbiAgICAgKiBSZXR1cm5zIG9yaWdpbmFsIHBhcmFtZXRlciwgc28gaXQgY291bGQgYmUgdXNlZCB3aXRoIGNoYWluaW5nLlxuICAgICAjIDxhIGhyZWY9XCJodHRwOi8vd2lraS5naXRodWIuY29tL3NvcmNjdS9jdWZvbi9hYm91dFwiPk1vcmUgYWJvdXQgQ3Vmw7NuIGFuZCBob3cgdG8gY29udmVydCB5b3VyIGZvbnQgZm9ybSBUVEYsIE9URiwgZXRjIHRvIEphdmFTY3JpcHQgZmlsZS48L2E+XG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIGZvbnQgKG9iamVjdCkgdGhlIGZvbnQgdG8gcmVnaXN0ZXJcbiAgICAgPSAob2JqZWN0KSB0aGUgZm9udCB5b3UgcGFzc2VkIGluXG4gICAgID4gVXNhZ2VcbiAgICAgfCBDdWZvbi5yZWdpc3RlckZvbnQoUmFwaGFlbC5yZWdpc3RlckZvbnQoe+KApn0pKTtcbiAgICBcXCovXG4gICAgUi5yZWdpc3RlckZvbnQgPSBmdW5jdGlvbiAoZm9udCkge1xuICAgICAgICBpZiAoIWZvbnQuZmFjZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZvbnQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mb250cyA9IHRoaXMuZm9udHMgfHwge307XG4gICAgICAgIHZhciBmb250Y29weSA9IHtcbiAgICAgICAgICAgICAgICB3OiBmb250LncsXG4gICAgICAgICAgICAgICAgZmFjZToge30sXG4gICAgICAgICAgICAgICAgZ2x5cGhzOiB7fVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZhbWlseSA9IGZvbnQuZmFjZVtcImZvbnQtZmFtaWx5XCJdO1xuICAgICAgICBmb3IgKHZhciBwcm9wIGluIGZvbnQuZmFjZSkgaWYgKGZvbnQuZmFjZVtoYXNdKHByb3ApKSB7XG4gICAgICAgICAgICBmb250Y29weS5mYWNlW3Byb3BdID0gZm9udC5mYWNlW3Byb3BdO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmZvbnRzW2ZhbWlseV0pIHtcbiAgICAgICAgICAgIHRoaXMuZm9udHNbZmFtaWx5XS5wdXNoKGZvbnRjb3B5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZm9udHNbZmFtaWx5XSA9IFtmb250Y29weV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFmb250LnN2Zykge1xuICAgICAgICAgICAgZm9udGNvcHkuZmFjZVtcInVuaXRzLXBlci1lbVwiXSA9IHRvSW50KGZvbnQuZmFjZVtcInVuaXRzLXBlci1lbVwiXSwgMTApO1xuICAgICAgICAgICAgZm9yICh2YXIgZ2x5cGggaW4gZm9udC5nbHlwaHMpIGlmIChmb250LmdseXBoc1toYXNdKGdseXBoKSkge1xuICAgICAgICAgICAgICAgIHZhciBwYXRoID0gZm9udC5nbHlwaHNbZ2x5cGhdO1xuICAgICAgICAgICAgICAgIGZvbnRjb3B5LmdseXBoc1tnbHlwaF0gPSB7XG4gICAgICAgICAgICAgICAgICAgIHc6IHBhdGgudyxcbiAgICAgICAgICAgICAgICAgICAgazoge30sXG4gICAgICAgICAgICAgICAgICAgIGQ6IHBhdGguZCAmJiBcIk1cIiArIHBhdGguZC5yZXBsYWNlKC9bbWxjeHRydl0vZywgZnVuY3Rpb24gKGNvbW1hbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge2w6IFwiTFwiLCBjOiBcIkNcIiwgeDogXCJ6XCIsIHQ6IFwibVwiLCByOiBcImxcIiwgdjogXCJjXCJ9W2NvbW1hbmRdIHx8IFwiTVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkgKyBcInpcIlxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKHBhdGguaykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrIGluIHBhdGguaykgaWYgKHBhdGhbaGFzXShrKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9udGNvcHkuZ2x5cGhzW2dseXBoXS5rW2tdID0gcGF0aC5rW2tdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmb250O1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFBhcGVyLmdldEZvbnRcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEZpbmRzIGZvbnQgb2JqZWN0IGluIHRoZSByZWdpc3RlcmVkIGZvbnRzIGJ5IGdpdmVuIHBhcmFtZXRlcnMuIFlvdSBjb3VsZCBzcGVjaWZ5IG9ubHkgb25lIHdvcmQgZnJvbSB0aGUgZm9udCBuYW1lLCBsaWtlIOKAnE15cmlhZOKAnSBmb3Ig4oCcTXlyaWFkIFByb+KAnS5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gZmFtaWx5IChzdHJpbmcpIGZvbnQgZmFtaWx5IG5hbWUgb3IgYW55IHdvcmQgZnJvbSBpdFxuICAgICAtIHdlaWdodCAoc3RyaW5nKSAjb3B0aW9uYWwgZm9udCB3ZWlnaHRcbiAgICAgLSBzdHlsZSAoc3RyaW5nKSAjb3B0aW9uYWwgZm9udCBzdHlsZVxuICAgICAtIHN0cmV0Y2ggKHN0cmluZykgI29wdGlvbmFsIGZvbnQgc3RyZXRjaFxuICAgICA9IChvYmplY3QpIHRoZSBmb250IG9iamVjdFxuICAgICA+IFVzYWdlXG4gICAgIHwgcGFwZXIucHJpbnQoMTAwLCAxMDAsIFwiVGVzdCBzdHJpbmdcIiwgcGFwZXIuZ2V0Rm9udChcIlRpbWVzXCIsIDgwMCksIDMwKTtcbiAgICBcXCovXG4gICAgcGFwZXJwcm90by5nZXRGb250ID0gZnVuY3Rpb24gKGZhbWlseSwgd2VpZ2h0LCBzdHlsZSwgc3RyZXRjaCkge1xuICAgICAgICBzdHJldGNoID0gc3RyZXRjaCB8fCBcIm5vcm1hbFwiO1xuICAgICAgICBzdHlsZSA9IHN0eWxlIHx8IFwibm9ybWFsXCI7XG4gICAgICAgIHdlaWdodCA9ICt3ZWlnaHQgfHwge25vcm1hbDogNDAwLCBib2xkOiA3MDAsIGxpZ2h0ZXI6IDMwMCwgYm9sZGVyOiA4MDB9W3dlaWdodF0gfHwgNDAwO1xuICAgICAgICBpZiAoIVIuZm9udHMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZm9udCA9IFIuZm9udHNbZmFtaWx5XTtcbiAgICAgICAgaWYgKCFmb250KSB7XG4gICAgICAgICAgICB2YXIgbmFtZSA9IG5ldyBSZWdFeHAoXCIoXnxcXFxccylcIiArIGZhbWlseS5yZXBsYWNlKC9bXlxcd1xcZFxccyshfi46Xy1dL2csIEUpICsgXCIoXFxcXHN8JClcIiwgXCJpXCIpO1xuICAgICAgICAgICAgZm9yICh2YXIgZm9udE5hbWUgaW4gUi5mb250cykgaWYgKFIuZm9udHNbaGFzXShmb250TmFtZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAobmFtZS50ZXN0KGZvbnROYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBmb250ID0gUi5mb250c1tmb250TmFtZV07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgdGhlZm9udDtcbiAgICAgICAgaWYgKGZvbnQpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGZvbnQubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoZWZvbnQgPSBmb250W2ldO1xuICAgICAgICAgICAgICAgIGlmICh0aGVmb250LmZhY2VbXCJmb250LXdlaWdodFwiXSA9PSB3ZWlnaHQgJiYgKHRoZWZvbnQuZmFjZVtcImZvbnQtc3R5bGVcIl0gPT0gc3R5bGUgfHwgIXRoZWZvbnQuZmFjZVtcImZvbnQtc3R5bGVcIl0pICYmIHRoZWZvbnQuZmFjZVtcImZvbnQtc3RyZXRjaFwiXSA9PSBzdHJldGNoKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhlZm9udDtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBQYXBlci5wcmludFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQ3JlYXRlcyBwYXRoIHRoYXQgcmVwcmVzZW50IGdpdmVuIHRleHQgd3JpdHRlbiB1c2luZyBnaXZlbiBmb250IGF0IGdpdmVuIHBvc2l0aW9uIHdpdGggZ2l2ZW4gc2l6ZS5cbiAgICAgKiBSZXN1bHQgb2YgdGhlIG1ldGhvZCBpcyBwYXRoIGVsZW1lbnQgdGhhdCBjb250YWlucyB3aG9sZSB0ZXh0IGFzIGEgc2VwYXJhdGUgcGF0aC5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0geCAobnVtYmVyKSB4IHBvc2l0aW9uIG9mIHRoZSB0ZXh0XG4gICAgIC0geSAobnVtYmVyKSB5IHBvc2l0aW9uIG9mIHRoZSB0ZXh0XG4gICAgIC0gc3RyaW5nIChzdHJpbmcpIHRleHQgdG8gcHJpbnRcbiAgICAgLSBmb250IChvYmplY3QpIGZvbnQgb2JqZWN0LCBzZWUgQFBhcGVyLmdldEZvbnRcbiAgICAgLSBzaXplIChudW1iZXIpICNvcHRpb25hbCBzaXplIG9mIHRoZSBmb250LCBkZWZhdWx0IGlzIGAxNmBcbiAgICAgLSBvcmlnaW4gKHN0cmluZykgI29wdGlvbmFsIGNvdWxkIGJlIGBcImJhc2VsaW5lXCJgIG9yIGBcIm1pZGRsZVwiYCwgZGVmYXVsdCBpcyBgXCJtaWRkbGVcImBcbiAgICAgLSBsZXR0ZXJfc3BhY2luZyAobnVtYmVyKSAjb3B0aW9uYWwgbnVtYmVyIGluIHJhbmdlIGAtMS4uMWAsIGRlZmF1bHQgaXMgYDBgXG4gICAgIC0gbGluZV9zcGFjaW5nIChudW1iZXIpICNvcHRpb25hbCBudW1iZXIgaW4gcmFuZ2UgYDEuLjNgLCBkZWZhdWx0IGlzIGAxYFxuICAgICA9IChvYmplY3QpIHJlc3VsdGluZyBwYXRoIGVsZW1lbnQsIHdoaWNoIGNvbnNpc3Qgb2YgYWxsIGxldHRlcnNcbiAgICAgPiBVc2FnZVxuICAgICB8IHZhciB0eHQgPSByLnByaW50KDEwLCA1MCwgXCJwcmludFwiLCByLmdldEZvbnQoXCJNdXNlb1wiKSwgMzApLmF0dHIoe2ZpbGw6IFwiI2ZmZlwifSk7XG4gICAgXFwqL1xuICAgIHBhcGVycHJvdG8ucHJpbnQgPSBmdW5jdGlvbiAoeCwgeSwgc3RyaW5nLCBmb250LCBzaXplLCBvcmlnaW4sIGxldHRlcl9zcGFjaW5nLCBsaW5lX3NwYWNpbmcpIHtcbiAgICAgICAgb3JpZ2luID0gb3JpZ2luIHx8IFwibWlkZGxlXCI7IC8vIGJhc2VsaW5lfG1pZGRsZVxuICAgICAgICBsZXR0ZXJfc3BhY2luZyA9IG1tYXgobW1pbihsZXR0ZXJfc3BhY2luZyB8fCAwLCAxKSwgLTEpO1xuICAgICAgICBsaW5lX3NwYWNpbmcgPSBtbWF4KG1taW4obGluZV9zcGFjaW5nIHx8IDEsIDMpLCAxKTtcbiAgICAgICAgdmFyIGxldHRlcnMgPSBTdHIoc3RyaW5nKVtzcGxpdF0oRSksXG4gICAgICAgICAgICBzaGlmdCA9IDAsXG4gICAgICAgICAgICBub3RmaXJzdCA9IDAsXG4gICAgICAgICAgICBwYXRoID0gRSxcbiAgICAgICAgICAgIHNjYWxlO1xuICAgICAgICBSLmlzKGZvbnQsIFwic3RyaW5nXCIpICYmIChmb250ID0gdGhpcy5nZXRGb250KGZvbnQpKTtcbiAgICAgICAgaWYgKGZvbnQpIHtcbiAgICAgICAgICAgIHNjYWxlID0gKHNpemUgfHwgMTYpIC8gZm9udC5mYWNlW1widW5pdHMtcGVyLWVtXCJdO1xuICAgICAgICAgICAgdmFyIGJiID0gZm9udC5mYWNlLmJib3hbc3BsaXRdKHNlcGFyYXRvciksXG4gICAgICAgICAgICAgICAgdG9wID0gK2JiWzBdLFxuICAgICAgICAgICAgICAgIGxpbmVIZWlnaHQgPSBiYlszXSAtIGJiWzFdLFxuICAgICAgICAgICAgICAgIHNoaWZ0eSA9IDAsXG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gK2JiWzFdICsgKG9yaWdpbiA9PSBcImJhc2VsaW5lXCIgPyBsaW5lSGVpZ2h0ICsgKCtmb250LmZhY2UuZGVzY2VudCkgOiBsaW5lSGVpZ2h0IC8gMik7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBsZXR0ZXJzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAobGV0dGVyc1tpXSA9PSBcIlxcblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHNoaWZ0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgY3VyciA9IDA7XG4gICAgICAgICAgICAgICAgICAgIG5vdGZpcnN0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgc2hpZnR5ICs9IGxpbmVIZWlnaHQgKiBsaW5lX3NwYWNpbmc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByZXYgPSBub3RmaXJzdCAmJiBmb250LmdseXBoc1tsZXR0ZXJzW2kgLSAxXV0gfHwge30sXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyID0gZm9udC5nbHlwaHNbbGV0dGVyc1tpXV07XG4gICAgICAgICAgICAgICAgICAgIHNoaWZ0ICs9IG5vdGZpcnN0ID8gKHByZXYudyB8fCBmb250LncpICsgKHByZXYuayAmJiBwcmV2LmtbbGV0dGVyc1tpXV0gfHwgMCkgKyAoZm9udC53ICogbGV0dGVyX3NwYWNpbmcpIDogMDtcbiAgICAgICAgICAgICAgICAgICAgbm90Zmlyc3QgPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY3VyciAmJiBjdXJyLmQpIHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aCArPSBSLnRyYW5zZm9ybVBhdGgoY3Vyci5kLCBbXCJ0XCIsIHNoaWZ0ICogc2NhbGUsIHNoaWZ0eSAqIHNjYWxlLCBcInNcIiwgc2NhbGUsIHNjYWxlLCB0b3AsIGhlaWdodCwgXCJ0XCIsICh4IC0gdG9wKSAvIHNjYWxlLCAoeSAtIGhlaWdodCkgLyBzY2FsZV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wYXRoKHBhdGgpLmF0dHIoe1xuICAgICAgICAgICAgZmlsbDogXCIjMDAwXCIsXG4gICAgICAgICAgICBzdHJva2U6IFwibm9uZVwiXG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvKlxcXG4gICAgICogUGFwZXIuYWRkXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBJbXBvcnRzIGVsZW1lbnRzIGluIEpTT04gYXJyYXkgaW4gZm9ybWF0IGB7dHlwZTogdHlwZSwgPGF0dHJpYnV0ZXM+fWBcbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0ganNvbiAoYXJyYXkpXG4gICAgID0gKG9iamVjdCkgcmVzdWx0aW5nIHNldCBvZiBpbXBvcnRlZCBlbGVtZW50c1xuICAgICA+IFVzYWdlXG4gICAgIHwgcGFwZXIuYWRkKFtcbiAgICAgfCAgICAge1xuICAgICB8ICAgICAgICAgdHlwZTogXCJjaXJjbGVcIixcbiAgICAgfCAgICAgICAgIGN4OiAxMCxcbiAgICAgfCAgICAgICAgIGN5OiAxMCxcbiAgICAgfCAgICAgICAgIHI6IDVcbiAgICAgfCAgICAgfSxcbiAgICAgfCAgICAge1xuICAgICB8ICAgICAgICAgdHlwZTogXCJyZWN0XCIsXG4gICAgIHwgICAgICAgICB4OiAxMCxcbiAgICAgfCAgICAgICAgIHk6IDEwLFxuICAgICB8ICAgICAgICAgd2lkdGg6IDEwLFxuICAgICB8ICAgICAgICAgaGVpZ2h0OiAxMCxcbiAgICAgfCAgICAgICAgIGZpbGw6IFwiI2ZjMFwiXG4gICAgIHwgICAgIH1cbiAgICAgfCBdKTtcbiAgICBcXCovXG4gICAgcGFwZXJwcm90by5hZGQgPSBmdW5jdGlvbiAoanNvbikge1xuICAgICAgICBpZiAoUi5pcyhqc29uLCBcImFycmF5XCIpKSB7XG4gICAgICAgICAgICB2YXIgcmVzID0gdGhpcy5zZXQoKSxcbiAgICAgICAgICAgICAgICBpID0gMCxcbiAgICAgICAgICAgICAgICBpaSA9IGpzb24ubGVuZ3RoLFxuICAgICAgICAgICAgICAgIGo7XG4gICAgICAgICAgICBmb3IgKDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICBqID0ganNvbltpXSB8fCB7fTtcbiAgICAgICAgICAgICAgICBlbGVtZW50c1toYXNdKGoudHlwZSkgJiYgcmVzLnB1c2godGhpc1tqLnR5cGVdKCkuYXR0cihqKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuXG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuZm9ybWF0XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBTaW1wbGUgZm9ybWF0IGZ1bmN0aW9uLiBSZXBsYWNlcyBjb25zdHJ1Y3Rpb24gb2YgdHlwZSDigJxgezxudW1iZXI+fWDigJ0gdG8gdGhlIGNvcnJlc3BvbmRpbmcgYXJndW1lbnQuXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIHRva2VuIChzdHJpbmcpIHN0cmluZyB0byBmb3JtYXRcbiAgICAgLSDigKYgKHN0cmluZykgcmVzdCBvZiBhcmd1bWVudHMgd2lsbCBiZSB0cmVhdGVkIGFzIHBhcmFtZXRlcnMgZm9yIHJlcGxhY2VtZW50XG4gICAgID0gKHN0cmluZykgZm9ybWF0ZWQgc3RyaW5nXG4gICAgID4gVXNhZ2VcbiAgICAgfCB2YXIgeCA9IDEwLFxuICAgICB8ICAgICB5ID0gMjAsXG4gICAgIHwgICAgIHdpZHRoID0gNDAsXG4gICAgIHwgICAgIGhlaWdodCA9IDUwO1xuICAgICB8IC8vIHRoaXMgd2lsbCBkcmF3IGEgcmVjdGFuZ3VsYXIgc2hhcGUgZXF1aXZhbGVudCB0byBcIk0xMCwyMGg0MHY1MGgtNDB6XCJcbiAgICAgfCBwYXBlci5wYXRoKFJhcGhhZWwuZm9ybWF0KFwiTXswfSx7MX1oezJ9dnszfWh7NH16XCIsIHgsIHksIHdpZHRoLCBoZWlnaHQsIC13aWR0aCkpO1xuICAgIFxcKi9cbiAgICBSLmZvcm1hdCA9IGZ1bmN0aW9uICh0b2tlbiwgcGFyYW1zKSB7XG4gICAgICAgIHZhciBhcmdzID0gUi5pcyhwYXJhbXMsIGFycmF5KSA/IFswXVtjb25jYXRdKHBhcmFtcykgOiBhcmd1bWVudHM7XG4gICAgICAgIHRva2VuICYmIFIuaXModG9rZW4sIHN0cmluZykgJiYgYXJncy5sZW5ndGggLSAxICYmICh0b2tlbiA9IHRva2VuLnJlcGxhY2UoZm9ybWF0cmcsIGZ1bmN0aW9uIChzdHIsIGkpIHtcbiAgICAgICAgICAgIHJldHVybiBhcmdzWysraV0gPT0gbnVsbCA/IEUgOiBhcmdzW2ldO1xuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiB0b2tlbiB8fCBFO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuZnVsbGZpbGxcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEEgbGl0dGxlIGJpdCBtb3JlIGFkdmFuY2VkIGZvcm1hdCBmdW5jdGlvbiB0aGFuIEBSYXBoYWVsLmZvcm1hdC4gUmVwbGFjZXMgY29uc3RydWN0aW9uIG9mIHR5cGUg4oCcYHs8bmFtZT59YOKAnSB0byB0aGUgY29ycmVzcG9uZGluZyBhcmd1bWVudC5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gdG9rZW4gKHN0cmluZykgc3RyaW5nIHRvIGZvcm1hdFxuICAgICAtIGpzb24gKG9iamVjdCkgb2JqZWN0IHdoaWNoIHByb3BlcnRpZXMgd2lsbCBiZSB1c2VkIGFzIGEgcmVwbGFjZW1lbnRcbiAgICAgPSAoc3RyaW5nKSBmb3JtYXRlZCBzdHJpbmdcbiAgICAgPiBVc2FnZVxuICAgICB8IC8vIHRoaXMgd2lsbCBkcmF3IGEgcmVjdGFuZ3VsYXIgc2hhcGUgZXF1aXZhbGVudCB0byBcIk0xMCwyMGg0MHY1MGgtNDB6XCJcbiAgICAgfCBwYXBlci5wYXRoKFJhcGhhZWwuZnVsbGZpbGwoXCJNe3h9LHt5fWh7ZGltLndpZHRofXZ7ZGltLmhlaWdodH1oe2RpbVsnbmVnYXRpdmUgd2lkdGgnXX16XCIsIHtcbiAgICAgfCAgICAgeDogMTAsXG4gICAgIHwgICAgIHk6IDIwLFxuICAgICB8ICAgICBkaW06IHtcbiAgICAgfCAgICAgICAgIHdpZHRoOiA0MCxcbiAgICAgfCAgICAgICAgIGhlaWdodDogNTAsXG4gICAgIHwgICAgICAgICBcIm5lZ2F0aXZlIHdpZHRoXCI6IC00MFxuICAgICB8ICAgICB9XG4gICAgIHwgfSkpO1xuICAgIFxcKi9cbiAgICBSLmZ1bGxmaWxsID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRva2VuUmVnZXggPSAvXFx7KFteXFx9XSspXFx9L2csXG4gICAgICAgICAgICBvYmpOb3RhdGlvblJlZ2V4ID0gLyg/Oig/Ol58XFwuKSguKz8pKD89XFxbfFxcLnwkfFxcKCl8XFxbKCd8XCIpKC4rPylcXDJcXF0pKFxcKFxcKSk/L2csIC8vIG1hdGNoZXMgLnh4eHh4IG9yIFtcInh4eHh4XCJdIHRvIHJ1biBvdmVyIG9iamVjdCBwcm9wZXJ0aWVzXG4gICAgICAgICAgICByZXBsYWNlciA9IGZ1bmN0aW9uIChhbGwsIGtleSwgb2JqKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlcyA9IG9iajtcbiAgICAgICAgICAgICAgICBrZXkucmVwbGFjZShvYmpOb3RhdGlvblJlZ2V4LCBmdW5jdGlvbiAoYWxsLCBuYW1lLCBxdW90ZSwgcXVvdGVkTmFtZSwgaXNGdW5jKSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lIHx8IHF1b3RlZE5hbWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuYW1lIGluIHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IHJlc1tuYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiByZXMgPT0gXCJmdW5jdGlvblwiICYmIGlzRnVuYyAmJiAocmVzID0gcmVzKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmVzID0gKHJlcyA9PSBudWxsIHx8IHJlcyA9PSBvYmogPyBhbGwgOiByZXMpICsgXCJcIjtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzdHIsIG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIFN0cmluZyhzdHIpLnJlcGxhY2UodG9rZW5SZWdleCwgZnVuY3Rpb24gKGFsbCwga2V5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcGxhY2VyKGFsbCwga2V5LCBvYmopO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgfSkoKTtcbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5uaW5qYVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogSWYgeW91IHdhbnQgdG8gbGVhdmUgbm8gdHJhY2Ugb2YgUmFwaGHDq2wgKFdlbGwsIFJhcGhhw6tsIGNyZWF0ZXMgb25seSBvbmUgZ2xvYmFsIHZhcmlhYmxlIGBSYXBoYWVsYCwgYnV0IGFueXdheS4pIFlvdSBjYW4gdXNlIGBuaW5qYWAgbWV0aG9kLlxuICAgICAqIEJld2FyZSwgdGhhdCBpbiB0aGlzIGNhc2UgcGx1Z2lucyBjb3VsZCBzdG9wIHdvcmtpbmcsIGJlY2F1c2UgdGhleSBhcmUgZGVwZW5kaW5nIG9uIGdsb2JhbCB2YXJpYWJsZSBleGlzdGVuY2UuXG4gICAgICoqXG4gICAgID0gKG9iamVjdCkgUmFwaGFlbCBvYmplY3RcbiAgICAgPiBVc2FnZVxuICAgICB8IChmdW5jdGlvbiAobG9jYWxfcmFwaGFlbCkge1xuICAgICB8ICAgICB2YXIgcGFwZXIgPSBsb2NhbF9yYXBoYWVsKDEwLCAxMCwgMzIwLCAyMDApO1xuICAgICB8ICAgICDigKZcbiAgICAgfCB9KShSYXBoYWVsLm5pbmphKCkpO1xuICAgIFxcKi9cbiAgICBSLm5pbmphID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAob2xkUmFwaGFlbC53YXMpIHtcbiAgICAgICAgICAgIGcud2luLlJhcGhhZWwgPSBvbGRSYXBoYWVsLmlzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gSUU4IHJhaXNlcyBhbiBlcnJvciB3aGVuIGRlbGV0aW5nIHdpbmRvdyBwcm9wZXJ0eVxuICAgICAgICAgICAgd2luZG93LlJhcGhhZWwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB3aW5kb3cuUmFwaGFlbDtcbiAgICAgICAgICAgIH0gY2F0Y2goZSkge31cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUjtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLnN0XG4gICAgIFsgcHJvcGVydHkgKG9iamVjdCkgXVxuICAgICAqKlxuICAgICAqIFlvdSBjYW4gYWRkIHlvdXIgb3duIG1ldGhvZCB0byBlbGVtZW50cyBhbmQgc2V0cy4gSXQgaXMgd2lzZSB0byBhZGQgYSBzZXQgbWV0aG9kIGZvciBlYWNoIGVsZW1lbnQgbWV0aG9kXG4gICAgICogeW91IGFkZGVkLCBzbyB5b3Ugd2lsbCBiZSBhYmxlIHRvIGNhbGwgdGhlIHNhbWUgbWV0aG9kIG9uIHNldHMgdG9vLlxuICAgICAqKlxuICAgICAqIFNlZSBhbHNvIEBSYXBoYWVsLmVsLlxuICAgICA+IFVzYWdlXG4gICAgIHwgUmFwaGFlbC5lbC5yZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgIHwgICAgIHRoaXMuYXR0cih7ZmlsbDogXCIjZjAwXCJ9KTtcbiAgICAgfCB9O1xuICAgICB8IFJhcGhhZWwuc3QucmVkID0gZnVuY3Rpb24gKCkge1xuICAgICB8ICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgIHwgICAgICAgICBlbC5yZWQoKTtcbiAgICAgfCAgICAgfSk7XG4gICAgIHwgfTtcbiAgICAgfCAvLyB0aGVuIHVzZSBpdFxuICAgICB8IHBhcGVyLnNldChwYXBlci5jaXJjbGUoMTAwLCAxMDAsIDIwKSwgcGFwZXIuY2lyY2xlKDExMCwgMTAwLCAyMCkpLnJlZCgpO1xuICAgIFxcKi9cbiAgICBSLnN0ID0gc2V0cHJvdG87XG5cbiAgICBldmUub24oXCJyYXBoYWVsLkRPTWxvYWRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBsb2FkZWQgPSB0cnVlO1xuICAgIH0pO1xuXG4gICAgLy8gRmlyZWZveCA8My42IGZpeDogaHR0cDovL3dlYnJlZmxlY3Rpb24uYmxvZ3Nwb3QuY29tLzIwMDkvMTEvMTk1LWNoYXJzLXRvLWhlbHAtbGF6eS1sb2FkaW5nLmh0bWxcbiAgICAoZnVuY3Rpb24gKGRvYywgbG9hZGVkLCBmKSB7XG4gICAgICAgIGlmIChkb2MucmVhZHlTdGF0ZSA9PSBudWxsICYmIGRvYy5hZGRFdmVudExpc3RlbmVyKXtcbiAgICAgICAgICAgIGRvYy5hZGRFdmVudExpc3RlbmVyKGxvYWRlZCwgZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcihsb2FkZWQsIGYsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBkb2MucmVhZHlTdGF0ZSA9IFwiY29tcGxldGVcIjtcbiAgICAgICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgICAgIGRvYy5yZWFkeVN0YXRlID0gXCJsb2FkaW5nXCI7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gaXNMb2FkZWQoKSB7XG4gICAgICAgICAgICAoL2luLykudGVzdChkb2MucmVhZHlTdGF0ZSkgPyBzZXRUaW1lb3V0KGlzTG9hZGVkLCA5KSA6IFIuZXZlKFwicmFwaGFlbC5ET01sb2FkXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlzTG9hZGVkKCk7XG4gICAgfSkoZG9jdW1lbnQsIFwiRE9NQ29udGVudExvYWRlZFwiKTtcblxuICAgIHJldHVybiBSO1xufSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./dev/raphael.core.js\n");/***/},/***/"./dev/raphael.svg.js":/*!****************************!*\
  !*** ./dev/raphael.svg.js ***!
  \****************************/ /*! no static exports found */ /***/function devRaphaelSvgJs(module,exports,__webpack_require__){eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! ./raphael.core */ \"./dev/raphael.core.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(R) {\n    if (R && !R.svg) {\n        return;\n    }\n\n    var has = \"hasOwnProperty\",\n        Str = String,\n        toFloat = parseFloat,\n        toInt = parseInt,\n        math = Math,\n        mmax = math.max,\n        abs = math.abs,\n        pow = math.pow,\n        separator = /[, ]+/,\n        eve = R.eve,\n        E = \"\",\n        S = \" \";\n    var xlink = \"http://www.w3.org/1999/xlink\",\n        markers = {\n            block: \"M5,0 0,2.5 5,5z\",\n            classic: \"M5,0 0,2.5 5,5 3.5,3 3.5,2z\",\n            diamond: \"M2.5,0 5,2.5 2.5,5 0,2.5z\",\n            open: \"M6,1 1,3.5 6,6\",\n            oval: \"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z\"\n        },\n        markerCounter = {};\n    R.toString = function () {\n        return  \"Your browser supports SVG.\\nYou are running Rapha\\xebl \" + this.version;\n    };\n    var $ = function (el, attr) {\n        if (attr) {\n            if (typeof el == \"string\") {\n                el = $(el);\n            }\n            for (var key in attr) if (attr[has](key)) {\n                if (key.substring(0, 6) == \"xlink:\") {\n                    el.setAttributeNS(xlink, key.substring(6), Str(attr[key]));\n                } else {\n                    el.setAttribute(key, Str(attr[key]));\n                }\n            }\n        } else {\n            el = R._g.doc.createElementNS(\"http://www.w3.org/2000/svg\", el);\n            el.style && (el.style.webkitTapHighlightColor = \"rgba(0,0,0,0)\");\n        }\n        return el;\n    },\n    addGradientFill = function (element, gradient) {\n        var type = \"linear\",\n            id = element.id + gradient,\n            fx = .5, fy = .5,\n            o = element.node,\n            SVG = element.paper,\n            s = o.style,\n            el = R._g.doc.getElementById(id);\n        if (!el) {\n            gradient = Str(gradient).replace(R._radial_gradient, function (all, _fx, _fy) {\n                type = \"radial\";\n                if (_fx && _fy) {\n                    fx = toFloat(_fx);\n                    fy = toFloat(_fy);\n                    var dir = ((fy > .5) * 2 - 1);\n                    pow(fx - .5, 2) + pow(fy - .5, 2) > .25 &&\n                        (fy = math.sqrt(.25 - pow(fx - .5, 2)) * dir + .5) &&\n                        fy != .5 &&\n                        (fy = fy.toFixed(5) - 1e-5 * dir);\n                }\n                return E;\n            });\n            gradient = gradient.split(/\\s*\\-\\s*/);\n            if (type == \"linear\") {\n                var angle = gradient.shift();\n                angle = -toFloat(angle);\n                if (isNaN(angle)) {\n                    return null;\n                }\n                var vector = [0, 0, math.cos(R.rad(angle)), math.sin(R.rad(angle))],\n                    max = 1 / (mmax(abs(vector[2]), abs(vector[3])) || 1);\n                vector[2] *= max;\n                vector[3] *= max;\n                if (vector[2] < 0) {\n                    vector[0] = -vector[2];\n                    vector[2] = 0;\n                }\n                if (vector[3] < 0) {\n                    vector[1] = -vector[3];\n                    vector[3] = 0;\n                }\n            }\n            var dots = R._parseDots(gradient);\n            if (!dots) {\n                return null;\n            }\n            id = id.replace(/[\\(\\)\\s,\\xb0#]/g, \"_\");\n\n            if (element.gradient && id != element.gradient.id) {\n                SVG.defs.removeChild(element.gradient);\n                delete element.gradient;\n            }\n\n            if (!element.gradient) {\n                el = $(type + \"Gradient\", {id: id});\n                element.gradient = el;\n                $(el, type == \"radial\" ? {\n                    fx: fx,\n                    fy: fy\n                } : {\n                    x1: vector[0],\n                    y1: vector[1],\n                    x2: vector[2],\n                    y2: vector[3],\n                    gradientTransform: element.matrix.invert()\n                });\n                SVG.defs.appendChild(el);\n                for (var i = 0, ii = dots.length; i < ii; i++) {\n                    el.appendChild($(\"stop\", {\n                        offset: dots[i].offset ? dots[i].offset : i ? \"100%\" : \"0%\",\n                        \"stop-color\": dots[i].color || \"#fff\",\n                        \"stop-opacity\": isFinite(dots[i].opacity) ? dots[i].opacity : 1\n                    }));\n                }\n            }\n        }\n        $(o, {\n            fill: fillurl(id),\n            opacity: 1,\n            \"fill-opacity\": 1\n        });\n        s.fill = E;\n        s.opacity = 1;\n        s.fillOpacity = 1;\n        return 1;\n    },\n    isIE9or10 = function () {\n      var mode = document.documentMode;\n      return mode && (mode === 9 || mode === 10);\n    },\n    fillurl = function (id) {\n      if (isIE9or10()) {\n          return \"url('#\" + id + \"')\";\n      }\n      var location = document.location;\n      var locationString = (\n          location.protocol + '//' +\n          location.host +\n          location.pathname +\n          location.search\n      );\n      return \"url('\" + locationString + \"#\" + id + \"')\";\n    },\n    updatePosition = function (o) {\n        var bbox = o.getBBox(1);\n        $(o.pattern, {patternTransform: o.matrix.invert() + \" translate(\" + bbox.x + \",\" + bbox.y + \")\"});\n    },\n    addArrow = function (o, value, isEnd) {\n        if (o.type == \"path\") {\n            var values = Str(value).toLowerCase().split(\"-\"),\n                p = o.paper,\n                se = isEnd ? \"end\" : \"start\",\n                node = o.node,\n                attrs = o.attrs,\n                stroke = attrs[\"stroke-width\"],\n                i = values.length,\n                type = \"classic\",\n                from,\n                to,\n                dx,\n                refX,\n                attr,\n                w = 3,\n                h = 3,\n                t = 5;\n            while (i--) {\n                switch (values[i]) {\n                    case \"block\":\n                    case \"classic\":\n                    case \"oval\":\n                    case \"diamond\":\n                    case \"open\":\n                    case \"none\":\n                        type = values[i];\n                        break;\n                    case \"wide\": h = 5; break;\n                    case \"narrow\": h = 2; break;\n                    case \"long\": w = 5; break;\n                    case \"short\": w = 2; break;\n                }\n            }\n            if (type == \"open\") {\n                w += 2;\n                h += 2;\n                t += 2;\n                dx = 1;\n                refX = isEnd ? 4 : 1;\n                attr = {\n                    fill: \"none\",\n                    stroke: attrs.stroke\n                };\n            } else {\n                refX = dx = w / 2;\n                attr = {\n                    fill: attrs.stroke,\n                    stroke: \"none\"\n                };\n            }\n            if (o._.arrows) {\n                if (isEnd) {\n                    o._.arrows.endPath && markerCounter[o._.arrows.endPath]--;\n                    o._.arrows.endMarker && markerCounter[o._.arrows.endMarker]--;\n                } else {\n                    o._.arrows.startPath && markerCounter[o._.arrows.startPath]--;\n                    o._.arrows.startMarker && markerCounter[o._.arrows.startMarker]--;\n                }\n            } else {\n                o._.arrows = {};\n            }\n            if (type != \"none\") {\n                var pathId = \"raphael-marker-\" + type,\n                    markerId = \"raphael-marker-\" + se + type + w + h + \"-obj\" + o.id;\n                if (!R._g.doc.getElementById(pathId)) {\n                    p.defs.appendChild($($(\"path\"), {\n                        \"stroke-linecap\": \"round\",\n                        d: markers[type],\n                        id: pathId\n                    }));\n                    markerCounter[pathId] = 1;\n                } else {\n                    markerCounter[pathId]++;\n                }\n                var marker = R._g.doc.getElementById(markerId),\n                    use;\n                if (!marker) {\n                    marker = $($(\"marker\"), {\n                        id: markerId,\n                        markerHeight: h,\n                        markerWidth: w,\n                        orient: \"auto\",\n                        refX: refX,\n                        refY: h / 2\n                    });\n                    use = $($(\"use\"), {\n                        \"xlink:href\": \"#\" + pathId,\n                        transform: (isEnd ? \"rotate(180 \" + w / 2 + \" \" + h / 2 + \") \" : E) + \"scale(\" + w / t + \",\" + h / t + \")\",\n                        \"stroke-width\": (1 / ((w / t + h / t) / 2)).toFixed(4)\n                    });\n                    marker.appendChild(use);\n                    p.defs.appendChild(marker);\n                    markerCounter[markerId] = 1;\n                } else {\n                    markerCounter[markerId]++;\n                    use = marker.getElementsByTagName(\"use\")[0];\n                }\n                $(use, attr);\n                var delta = dx * (type != \"diamond\" && type != \"oval\");\n                if (isEnd) {\n                    from = o._.arrows.startdx * stroke || 0;\n                    to = R.getTotalLength(attrs.path) - delta * stroke;\n                } else {\n                    from = delta * stroke;\n                    to = R.getTotalLength(attrs.path) - (o._.arrows.enddx * stroke || 0);\n                }\n                attr = {};\n                attr[\"marker-\" + se] = \"url(#\" + markerId + \")\";\n                if (to || from) {\n                    attr.d = R.getSubpath(attrs.path, from, to);\n                }\n                $(node, attr);\n                o._.arrows[se + \"Path\"] = pathId;\n                o._.arrows[se + \"Marker\"] = markerId;\n                o._.arrows[se + \"dx\"] = delta;\n                o._.arrows[se + \"Type\"] = type;\n                o._.arrows[se + \"String\"] = value;\n            } else {\n                if (isEnd) {\n                    from = o._.arrows.startdx * stroke || 0;\n                    to = R.getTotalLength(attrs.path) - from;\n                } else {\n                    from = 0;\n                    to = R.getTotalLength(attrs.path) - (o._.arrows.enddx * stroke || 0);\n                }\n                o._.arrows[se + \"Path\"] && $(node, {d: R.getSubpath(attrs.path, from, to)});\n                delete o._.arrows[se + \"Path\"];\n                delete o._.arrows[se + \"Marker\"];\n                delete o._.arrows[se + \"dx\"];\n                delete o._.arrows[se + \"Type\"];\n                delete o._.arrows[se + \"String\"];\n            }\n            for (attr in markerCounter) if (markerCounter[has](attr) && !markerCounter[attr]) {\n                var item = R._g.doc.getElementById(attr);\n                item && item.parentNode.removeChild(item);\n            }\n        }\n    },\n    dasharray = {\n        \"-\": [3, 1],\n        \".\": [1, 1],\n        \"-.\": [3, 1, 1, 1],\n        \"-..\": [3, 1, 1, 1, 1, 1],\n        \". \": [1, 3],\n        \"- \": [4, 3],\n        \"--\": [8, 3],\n        \"- .\": [4, 3, 1, 3],\n        \"--.\": [8, 3, 1, 3],\n        \"--..\": [8, 3, 1, 3, 1, 3]\n    },\n    addDashes = function (o, value, params) {\n        value = dasharray[Str(value).toLowerCase()];\n        if (value) {\n            var width = o.attrs[\"stroke-width\"] || \"1\",\n                butt = {round: width, square: width, butt: 0}[o.attrs[\"stroke-linecap\"] || params[\"stroke-linecap\"]] || 0,\n                dashes = [],\n                i = value.length;\n            while (i--) {\n                dashes[i] = value[i] * width + ((i % 2) ? 1 : -1) * butt;\n            }\n            $(o.node, {\"stroke-dasharray\": dashes.join(\",\")});\n        }\n        else {\n          $(o.node, {\"stroke-dasharray\": \"none\"});\n        }\n    },\n    setFillAndStroke = function (o, params) {\n        var node = o.node,\n            attrs = o.attrs,\n            vis = node.style.visibility;\n        node.style.visibility = \"hidden\";\n        for (var att in params) {\n            if (params[has](att)) {\n                if (!R._availableAttrs[has](att)) {\n                    continue;\n                }\n                var value = params[att];\n                attrs[att] = value;\n                switch (att) {\n                    case \"blur\":\n                        o.blur(value);\n                        break;\n                    case \"title\":\n                        var title = node.getElementsByTagName(\"title\");\n\n                        // Use the existing <title>.\n                        if (title.length && (title = title[0])) {\n                          title.firstChild.nodeValue = value;\n                        } else {\n                          title = $(\"title\");\n                          var val = R._g.doc.createTextNode(value);\n                          title.appendChild(val);\n                          node.appendChild(title);\n                        }\n                        break;\n                    case \"href\":\n                    case \"target\":\n                        var pn = node.parentNode;\n                        if (pn.tagName.toLowerCase() != \"a\") {\n                            var hl = $(\"a\");\n                            pn.insertBefore(hl, node);\n                            hl.appendChild(node);\n                            pn = hl;\n                        }\n                        if (att == \"target\") {\n                            pn.setAttributeNS(xlink, \"show\", value == \"blank\" ? \"new\" : value);\n                        } else {\n                            pn.setAttributeNS(xlink, att, value);\n                        }\n                        break;\n                    case \"cursor\":\n                        node.style.cursor = value;\n                        break;\n                    case \"transform\":\n                        o.transform(value);\n                        break;\n                    case \"arrow-start\":\n                        addArrow(o, value);\n                        break;\n                    case \"arrow-end\":\n                        addArrow(o, value, 1);\n                        break;\n                    case \"clip-rect\":\n                        var rect = Str(value).split(separator);\n                        if (rect.length == 4) {\n                            o.clip && o.clip.parentNode.parentNode.removeChild(o.clip.parentNode);\n                            var el = $(\"clipPath\"),\n                                rc = $(\"rect\");\n                            el.id = R.createUUID();\n                            $(rc, {\n                                x: rect[0],\n                                y: rect[1],\n                                width: rect[2],\n                                height: rect[3]\n                            });\n                            el.appendChild(rc);\n                            o.paper.defs.appendChild(el);\n                            $(node, {\"clip-path\": \"url(#\" + el.id + \")\"});\n                            o.clip = rc;\n                        }\n                        if (!value) {\n                            var path = node.getAttribute(\"clip-path\");\n                            if (path) {\n                                var clip = R._g.doc.getElementById(path.replace(/(^url\\(#|\\)$)/g, E));\n                                clip && clip.parentNode.removeChild(clip);\n                                $(node, {\"clip-path\": E});\n                                delete o.clip;\n                            }\n                        }\n                    break;\n                    case \"path\":\n                        if (o.type == \"path\") {\n                            $(node, {d: value ? attrs.path = R._pathToAbsolute(value) : \"M0,0\"});\n                            o._.dirty = 1;\n                            if (o._.arrows) {\n                                \"startString\" in o._.arrows && addArrow(o, o._.arrows.startString);\n                                \"endString\" in o._.arrows && addArrow(o, o._.arrows.endString, 1);\n                            }\n                        }\n                        break;\n                    case \"width\":\n                        node.setAttribute(att, value);\n                        o._.dirty = 1;\n                        if (attrs.fx) {\n                            att = \"x\";\n                            value = attrs.x;\n                        } else {\n                            break;\n                        }\n                    case \"x\":\n                        if (attrs.fx) {\n                            value = -attrs.x - (attrs.width || 0);\n                        }\n                    case \"rx\":\n                        if (att == \"rx\" && o.type == \"rect\") {\n                            break;\n                        }\n                    case \"cx\":\n                        node.setAttribute(att, value);\n                        o.pattern && updatePosition(o);\n                        o._.dirty = 1;\n                        break;\n                    case \"height\":\n                        node.setAttribute(att, value);\n                        o._.dirty = 1;\n                        if (attrs.fy) {\n                            att = \"y\";\n                            value = attrs.y;\n                        } else {\n                            break;\n                        }\n                    case \"y\":\n                        if (attrs.fy) {\n                            value = -attrs.y - (attrs.height || 0);\n                        }\n                    case \"ry\":\n                        if (att == \"ry\" && o.type == \"rect\") {\n                            break;\n                        }\n                    case \"cy\":\n                        node.setAttribute(att, value);\n                        o.pattern && updatePosition(o);\n                        o._.dirty = 1;\n                        break;\n                    case \"r\":\n                        if (o.type == \"rect\") {\n                            $(node, {rx: value, ry: value});\n                        } else {\n                            node.setAttribute(att, value);\n                        }\n                        o._.dirty = 1;\n                        break;\n                    case \"src\":\n                        if (o.type == \"image\") {\n                            node.setAttributeNS(xlink, \"href\", value);\n                        }\n                        break;\n                    case \"stroke-width\":\n                        if (o._.sx != 1 || o._.sy != 1) {\n                            value /= mmax(abs(o._.sx), abs(o._.sy)) || 1;\n                        }\n                        node.setAttribute(att, value);\n                        if (attrs[\"stroke-dasharray\"]) {\n                            addDashes(o, attrs[\"stroke-dasharray\"], params);\n                        }\n                        if (o._.arrows) {\n                            \"startString\" in o._.arrows && addArrow(o, o._.arrows.startString);\n                            \"endString\" in o._.arrows && addArrow(o, o._.arrows.endString, 1);\n                        }\n                        break;\n                    case \"stroke-dasharray\":\n                        addDashes(o, value, params);\n                        break;\n                    case \"fill\":\n                        var isURL = Str(value).match(R._ISURL);\n                        if (isURL) {\n                            el = $(\"pattern\");\n                            var ig = $(\"image\");\n                            el.id = R.createUUID();\n                            $(el, {x: 0, y: 0, patternUnits: \"userSpaceOnUse\", height: 1, width: 1});\n                            $(ig, {x: 0, y: 0, \"xlink:href\": isURL[1]});\n                            el.appendChild(ig);\n\n                            (function (el) {\n                                R._preload(isURL[1], function () {\n                                    var w = this.offsetWidth,\n                                        h = this.offsetHeight;\n                                    $(el, {width: w, height: h});\n                                    $(ig, {width: w, height: h});\n                                });\n                            })(el);\n                            o.paper.defs.appendChild(el);\n                            $(node, {fill: \"url(#\" + el.id + \")\"});\n                            o.pattern = el;\n                            o.pattern && updatePosition(o);\n                            break;\n                        }\n                        var clr = R.getRGB(value);\n                        if (!clr.error) {\n                            delete params.gradient;\n                            delete attrs.gradient;\n                            !R.is(attrs.opacity, \"undefined\") &&\n                                R.is(params.opacity, \"undefined\") &&\n                                $(node, {opacity: attrs.opacity});\n                            !R.is(attrs[\"fill-opacity\"], \"undefined\") &&\n                                R.is(params[\"fill-opacity\"], \"undefined\") &&\n                                $(node, {\"fill-opacity\": attrs[\"fill-opacity\"]});\n                        } else if ((o.type == \"circle\" || o.type == \"ellipse\" || Str(value).charAt() != \"r\") && addGradientFill(o, value)) {\n                            if (\"opacity\" in attrs || \"fill-opacity\" in attrs) {\n                                var gradient = R._g.doc.getElementById(node.getAttribute(\"fill\").replace(/^url\\(#|\\)$/g, E));\n                                if (gradient) {\n                                    var stops = gradient.getElementsByTagName(\"stop\");\n                                    $(stops[stops.length - 1], {\"stop-opacity\": (\"opacity\" in attrs ? attrs.opacity : 1) * (\"fill-opacity\" in attrs ? attrs[\"fill-opacity\"] : 1)});\n                                }\n                            }\n                            attrs.gradient = value;\n                            attrs.fill = \"none\";\n                            break;\n                        }\n                        clr[has](\"opacity\") && $(node, {\"fill-opacity\": clr.opacity > 1 ? clr.opacity / 100 : clr.opacity});\n                    case \"stroke\":\n                        clr = R.getRGB(value);\n                        node.setAttribute(att, clr.hex);\n                        att == \"stroke\" && clr[has](\"opacity\") && $(node, {\"stroke-opacity\": clr.opacity > 1 ? clr.opacity / 100 : clr.opacity});\n                        if (att == \"stroke\" && o._.arrows) {\n                            \"startString\" in o._.arrows && addArrow(o, o._.arrows.startString);\n                            \"endString\" in o._.arrows && addArrow(o, o._.arrows.endString, 1);\n                        }\n                        break;\n                    case \"gradient\":\n                        (o.type == \"circle\" || o.type == \"ellipse\" || Str(value).charAt() != \"r\") && addGradientFill(o, value);\n                        break;\n                    case \"opacity\":\n                        if (attrs.gradient && !attrs[has](\"stroke-opacity\")) {\n                            $(node, {\"stroke-opacity\": value > 1 ? value / 100 : value});\n                        }\n                        // fall\n                    case \"fill-opacity\":\n                        if (attrs.gradient) {\n                            gradient = R._g.doc.getElementById(node.getAttribute(\"fill\").replace(/^url\\(#|\\)$/g, E));\n                            if (gradient) {\n                                stops = gradient.getElementsByTagName(\"stop\");\n                                $(stops[stops.length - 1], {\"stop-opacity\": value});\n                            }\n                            break;\n                        }\n                    default:\n                        att == \"font-size\" && (value = toInt(value, 10) + \"px\");\n                        var cssrule = att.replace(/(\\-.)/g, function (w) {\n                            return w.substring(1).toUpperCase();\n                        });\n                        node.style[cssrule] = value;\n                        o._.dirty = 1;\n                        node.setAttribute(att, value);\n                        break;\n                }\n            }\n        }\n\n        tuneText(o, params);\n        node.style.visibility = vis;\n    },\n    leading = 1.2,\n    tuneText = function (el, params) {\n        if (el.type != \"text\" || !(params[has](\"text\") || params[has](\"font\") || params[has](\"font-size\") || params[has](\"x\") || params[has](\"y\"))) {\n            return;\n        }\n        var a = el.attrs,\n            node = el.node,\n            fontSize = node.firstChild ? toInt(R._g.doc.defaultView.getComputedStyle(node.firstChild, E).getPropertyValue(\"font-size\"), 10) : 10;\n\n        if (params[has](\"text\")) {\n            a.text = params.text;\n            while (node.firstChild) {\n                node.removeChild(node.firstChild);\n            }\n            var texts = Str(params.text).split(\"\\n\"),\n                tspans = [],\n                tspan;\n            for (var i = 0, ii = texts.length; i < ii; i++) {\n                tspan = $(\"tspan\");\n                i && $(tspan, {dy: fontSize * leading, x: a.x});\n                tspan.appendChild(R._g.doc.createTextNode(texts[i]));\n                node.appendChild(tspan);\n                tspans[i] = tspan;\n            }\n        } else {\n            tspans = node.getElementsByTagName(\"tspan\");\n            for (i = 0, ii = tspans.length; i < ii; i++) if (i) {\n                $(tspans[i], {dy: fontSize * leading, x: a.x});\n            } else {\n                $(tspans[0], {dy: 0});\n            }\n        }\n        $(node, {x: a.x, y: a.y});\n        el._.dirty = 1;\n        var bb = el._getBBox(),\n            dif = a.y - (bb.y + bb.height / 2);\n        dif && R.is(dif, \"finite\") && $(tspans[0], {dy: dif});\n    },\n    getRealNode = function (node) {\n        if (node.parentNode && node.parentNode.tagName.toLowerCase() === \"a\") {\n            return node.parentNode;\n        } else {\n            return node;\n        }\n    },\n    Element = function (node, svg) {\n        var X = 0,\n            Y = 0;\n        /*\\\n         * Element.node\n         [ property (object) ]\n         **\n         * Gives you a reference to the DOM object, so you can assign event handlers or just mess around.\n         **\n         * Note: Don’t mess with it.\n         > Usage\n         | // draw a circle at coordinate 10,10 with radius of 10\n         | var c = paper.circle(10, 10, 10);\n         | c.node.onclick = function () {\n         |     c.attr(\"fill\", \"red\");\n         | };\n        \\*/\n        this[0] = this.node = node;\n        /*\\\n         * Element.raphael\n         [ property (object) ]\n         **\n         * Internal reference to @Raphael object. In case it is not available.\n         > Usage\n         | Raphael.el.red = function () {\n         |     var hsb = this.paper.raphael.rgb2hsb(this.attr(\"fill\"));\n         |     hsb.h = 1;\n         |     this.attr({fill: this.paper.raphael.hsb2rgb(hsb).hex});\n         | }\n        \\*/\n        node.raphael = true;\n        /*\\\n         * Element.id\n         [ property (number) ]\n         **\n         * Unique id of the element. Especially useful when you want to listen to events of the element,\n         * because all events are fired in format `<module>.<action>.<id>`. Also useful for @Paper.getById method.\n        \\*/\n        this.id = guid();\n        node.raphaelid = this.id;\n\n        /**\n        * Method that returns a 5 letter/digit id, enough for 36^5 = 60466176 elements\n        * @returns {string} id\n        */\n        function guid() {\n            return (\"0000\" + (Math.random()*Math.pow(36,5) << 0).toString(36)).slice(-5);\n        }\n\n        this.matrix = R.matrix();\n        this.realPath = null;\n        /*\\\n         * Element.paper\n         [ property (object) ]\n         **\n         * Internal reference to “paper” where object drawn. Mainly for use in plugins and element extensions.\n         > Usage\n         | Raphael.el.cross = function () {\n         |     this.attr({fill: \"red\"});\n         |     this.paper.path(\"M10,10L50,50M50,10L10,50\")\n         |         .attr({stroke: \"red\"});\n         | }\n        \\*/\n        this.paper = svg;\n        this.attrs = this.attrs || {};\n        this._ = {\n            transform: [],\n            sx: 1,\n            sy: 1,\n            deg: 0,\n            dx: 0,\n            dy: 0,\n            dirty: 1\n        };\n        !svg.bottom && (svg.bottom = this);\n        /*\\\n         * Element.prev\n         [ property (object) ]\n         **\n         * Reference to the previous element in the hierarchy.\n        \\*/\n        this.prev = svg.top;\n        svg.top && (svg.top.next = this);\n        svg.top = this;\n        /*\\\n         * Element.next\n         [ property (object) ]\n         **\n         * Reference to the next element in the hierarchy.\n        \\*/\n        this.next = null;\n    },\n    elproto = R.el;\n\n    Element.prototype = elproto;\n    elproto.constructor = Element;\n\n    R._engine.path = function (pathString, SVG) {\n        var el = $(\"path\");\n        SVG.canvas && SVG.canvas.appendChild(el);\n        var p = new Element(el, SVG);\n        p.type = \"path\";\n        setFillAndStroke(p, {\n            fill: \"none\",\n            stroke: \"#000\",\n            path: pathString\n        });\n        return p;\n    };\n    /*\\\n     * Element.rotate\n     [ method ]\n     **\n     * Deprecated! Use @Element.transform instead.\n     * Adds rotation by given angle around given point to the list of\n     * transformations of the element.\n     > Parameters\n     - deg (number) angle in degrees\n     - cx (number) #optional x coordinate of the centre of rotation\n     - cy (number) #optional y coordinate of the centre of rotation\n     * If cx & cy aren’t specified centre of the shape is used as a point of rotation.\n     = (object) @Element\n    \\*/\n    elproto.rotate = function (deg, cx, cy) {\n        if (this.removed) {\n            return this;\n        }\n        deg = Str(deg).split(separator);\n        if (deg.length - 1) {\n            cx = toFloat(deg[1]);\n            cy = toFloat(deg[2]);\n        }\n        deg = toFloat(deg[0]);\n        (cy == null) && (cx = cy);\n        if (cx == null || cy == null) {\n            var bbox = this.getBBox(1);\n            cx = bbox.x + bbox.width / 2;\n            cy = bbox.y + bbox.height / 2;\n        }\n        this.transform(this._.transform.concat([[\"r\", deg, cx, cy]]));\n        return this;\n    };\n    /*\\\n     * Element.scale\n     [ method ]\n     **\n     * Deprecated! Use @Element.transform instead.\n     * Adds scale by given amount relative to given point to the list of\n     * transformations of the element.\n     > Parameters\n     - sx (number) horisontal scale amount\n     - sy (number) vertical scale amount\n     - cx (number) #optional x coordinate of the centre of scale\n     - cy (number) #optional y coordinate of the centre of scale\n     * If cx & cy aren’t specified centre of the shape is used instead.\n     = (object) @Element\n    \\*/\n    elproto.scale = function (sx, sy, cx, cy) {\n        if (this.removed) {\n            return this;\n        }\n        sx = Str(sx).split(separator);\n        if (sx.length - 1) {\n            sy = toFloat(sx[1]);\n            cx = toFloat(sx[2]);\n            cy = toFloat(sx[3]);\n        }\n        sx = toFloat(sx[0]);\n        (sy == null) && (sy = sx);\n        (cy == null) && (cx = cy);\n        if (cx == null || cy == null) {\n            var bbox = this.getBBox(1);\n        }\n        cx = cx == null ? bbox.x + bbox.width / 2 : cx;\n        cy = cy == null ? bbox.y + bbox.height / 2 : cy;\n        this.transform(this._.transform.concat([[\"s\", sx, sy, cx, cy]]));\n        return this;\n    };\n    /*\\\n     * Element.translate\n     [ method ]\n     **\n     * Deprecated! Use @Element.transform instead.\n     * Adds translation by given amount to the list of transformations of the element.\n     > Parameters\n     - dx (number) horisontal shift\n     - dy (number) vertical shift\n     = (object) @Element\n    \\*/\n    elproto.translate = function (dx, dy) {\n        if (this.removed) {\n            return this;\n        }\n        dx = Str(dx).split(separator);\n        if (dx.length - 1) {\n            dy = toFloat(dx[1]);\n        }\n        dx = toFloat(dx[0]) || 0;\n        dy = +dy || 0;\n        this.transform(this._.transform.concat([[\"t\", dx, dy]]));\n        return this;\n    };\n    /*\\\n     * Element.transform\n     [ method ]\n     **\n     * Adds transformation to the element which is separate to other attributes,\n     * i.e. translation doesn’t change `x` or `y` of the rectange. The format\n     * of transformation string is similar to the path string syntax:\n     | \"t100,100r30,100,100s2,2,100,100r45s1.5\"\n     * Each letter is a command. There are four commands: `t` is for translate, `r` is for rotate, `s` is for\n     * scale and `m` is for matrix.\n     *\n     * There are also alternative “absolute” translation, rotation and scale: `T`, `R` and `S`. They will not take previous transformation into account. For example, `...T100,0` will always move element 100 px horisontally, while `...t100,0` could move it vertically if there is `r90` before. Just compare results of `r90t100,0` and `r90T100,0`.\n     *\n     * So, the example line above could be read like “translate by 100, 100; rotate 30° around 100, 100; scale twice around 100, 100;\n     * rotate 45° around centre; scale 1.5 times relative to centre”. As you can see rotate and scale commands have origin\n     * coordinates as optional parameters, the default is the centre point of the element.\n     * Matrix accepts six parameters.\n     > Usage\n     | var el = paper.rect(10, 20, 300, 200);\n     | // translate 100, 100, rotate 45°, translate -100, 0\n     | el.transform(\"t100,100r45t-100,0\");\n     | // if you want you can append or prepend transformations\n     | el.transform(\"...t50,50\");\n     | el.transform(\"s2...\");\n     | // or even wrap\n     | el.transform(\"t50,50...t-50-50\");\n     | // to reset transformation call method with empty string\n     | el.transform(\"\");\n     | // to get current value call it without parameters\n     | console.log(el.transform());\n     > Parameters\n     - tstr (string) #optional transformation string\n     * If tstr isn’t specified\n     = (string) current transformation string\n     * else\n     = (object) @Element\n    \\*/\n    elproto.transform = function (tstr) {\n        var _ = this._;\n        if (tstr == null) {\n            return _.transform;\n        }\n        R._extractTransform(this, tstr);\n\n        this.clip && $(this.clip, {transform: this.matrix.invert()});\n        this.pattern && updatePosition(this);\n        this.node && $(this.node, {transform: this.matrix});\n\n        if (_.sx != 1 || _.sy != 1) {\n            var sw = this.attrs[has](\"stroke-width\") ? this.attrs[\"stroke-width\"] : 1;\n            this.attr({\"stroke-width\": sw});\n        }\n\n        return this;\n    };\n    /*\\\n     * Element.hide\n     [ method ]\n     **\n     * Makes element invisible. See @Element.show.\n     = (object) @Element\n    \\*/\n    elproto.hide = function () {\n        if(!this.removed) this.node.style.display = \"none\";\n        return this;\n    };\n    /*\\\n     * Element.show\n     [ method ]\n     **\n     * Makes element visible. See @Element.hide.\n     = (object) @Element\n    \\*/\n    elproto.show = function () {\n        if(!this.removed) this.node.style.display = \"\";\n        return this;\n    };\n    /*\\\n     * Element.remove\n     [ method ]\n     **\n     * Removes element from the paper.\n    \\*/\n    elproto.remove = function () {\n        var node = getRealNode(this.node);\n        if (this.removed || !node.parentNode) {\n            return;\n        }\n        var paper = this.paper;\n        paper.__set__ && paper.__set__.exclude(this);\n        eve.unbind(\"raphael.*.*.\" + this.id);\n        if (this.gradient) {\n            paper.defs.removeChild(this.gradient);\n        }\n        R._tear(this, paper);\n\n        node.parentNode.removeChild(node);\n\n        // Remove custom data for element\n        this.removeData();\n\n        for (var i in this) {\n            this[i] = typeof this[i] == \"function\" ? R._removedFactory(i) : null;\n        }\n        this.removed = true;\n    };\n    elproto._getBBox = function () {\n        if (this.node.style.display == \"none\") {\n            this.show();\n            var hide = true;\n        }\n        var canvasHidden = false,\n            containerStyle;\n        if (this.paper.canvas.parentElement) {\n          containerStyle = this.paper.canvas.parentElement.style;\n        } //IE10+ can't find parentElement\n        else if (this.paper.canvas.parentNode) {\n          containerStyle = this.paper.canvas.parentNode.style;\n        }\n\n        if(containerStyle && containerStyle.display == \"none\") {\n          canvasHidden = true;\n          containerStyle.display = \"\";\n        }\n        var bbox = {};\n        try {\n            bbox = this.node.getBBox();\n        } catch(e) {\n            // Firefox 3.0.x, 25.0.1 (probably more versions affected) play badly here - possible fix\n            bbox = {\n                x: this.node.clientLeft,\n                y: this.node.clientTop,\n                width: this.node.clientWidth,\n                height: this.node.clientHeight\n            }\n        } finally {\n            bbox = bbox || {};\n            if(canvasHidden){\n              containerStyle.display = \"none\";\n            }\n        }\n        hide && this.hide();\n        return bbox;\n    };\n    /*\\\n     * Element.attr\n     [ method ]\n     **\n     * Sets the attributes of the element.\n     > Parameters\n     - attrName (string) attribute’s name\n     - value (string) value\n     * or\n     - params (object) object of name/value pairs\n     * or\n     - attrName (string) attribute’s name\n     * or\n     - attrNames (array) in this case method returns array of current values for given attribute names\n     = (object) @Element if attrsName & value or params are passed in.\n     = (...) value of the attribute if only attrsName is passed in.\n     = (array) array of values of the attribute if attrsNames is passed in.\n     = (object) object of attributes if nothing is passed in.\n     > Possible parameters\n     # <p>Please refer to the <a href=\"http://www.w3.org/TR/SVG/\" title=\"The W3C Recommendation for the SVG language describes these properties in detail.\">SVG specification</a> for an explanation of these parameters.</p>\n     o arrow-end (string) arrowhead on the end of the path. The format for string is `<type>[-<width>[-<length>]]`. Possible types: `classic`, `block`, `open`, `oval`, `diamond`, `none`, width: `wide`, `narrow`, `medium`, length: `long`, `short`, `midium`.\n     o clip-rect (string) comma or space separated values: x, y, width and height\n     o cursor (string) CSS type of the cursor\n     o cx (number) the x-axis coordinate of the center of the circle, or ellipse\n     o cy (number) the y-axis coordinate of the center of the circle, or ellipse\n     o fill (string) colour, gradient or image\n     o fill-opacity (number)\n     o font (string)\n     o font-family (string)\n     o font-size (number) font size in pixels\n     o font-weight (string)\n     o height (number)\n     o href (string) URL, if specified element behaves as hyperlink\n     o opacity (number)\n     o path (string) SVG path string format\n     o r (number) radius of the circle, ellipse or rounded corner on the rect\n     o rx (number) horisontal radius of the ellipse\n     o ry (number) vertical radius of the ellipse\n     o src (string) image URL, only works for @Element.image element\n     o stroke (string) stroke colour\n     o stroke-dasharray (string) [“”, “none”, “`-`”, “`.`”, “`-.`”, “`-..`”, “`. `”, “`- `”, “`--`”, “`- .`”, “`--.`”, “`--..`”]\n     o stroke-linecap (string) [“`butt`”, “`square`”, “`round`”]\n     o stroke-linejoin (string) [“`bevel`”, “`round`”, “`miter`”]\n     o stroke-miterlimit (number)\n     o stroke-opacity (number)\n     o stroke-width (number) stroke width in pixels, default is '1'\n     o target (string) used with href\n     o text (string) contents of the text element. Use `\\n` for multiline text\n     o text-anchor (string) [“`start`”, “`middle`”, “`end`”], default is “`middle`”\n     o title (string) will create tooltip with a given text\n     o transform (string) see @Element.transform\n     o width (number)\n     o x (number)\n     o y (number)\n     > Gradients\n     * Linear gradient format: “`‹angle›-‹colour›[-‹colour›[:‹offset›]]*-‹colour›`”, example: “`90-#fff-#000`” – 90°\n     * gradient from white to black or “`0-#fff-#f00:20-#000`” – 0° gradient from white via red (at 20%) to black.\n     *\n     * radial gradient: “`r[(‹fx›, ‹fy›)]‹colour›[-‹colour›[:‹offset›]]*-‹colour›`”, example: “`r#fff-#000`” –\n     * gradient from white to black or “`r(0.25, 0.75)#fff-#000`” – gradient from white to black with focus point\n     * at 0.25, 0.75. Focus point coordinates are in 0..1 range. Radial gradients can only be applied to circles and ellipses.\n     > Path String\n     # <p>Please refer to <a href=\"http://www.w3.org/TR/SVG/paths.html#PathData\" title=\"Details of a path’s data attribute’s format are described in the SVG specification.\">SVG documentation regarding path string</a>. Raphaël fully supports it.</p>\n     > Colour Parsing\n     # <ul>\n     #     <li>Colour name (“<code>red</code>”, “<code>green</code>”, “<code>cornflowerblue</code>”, etc)</li>\n     #     <li>#••• — shortened HTML colour: (“<code>#000</code>”, “<code>#fc0</code>”, etc)</li>\n     #     <li>#•••••• — full length HTML colour: (“<code>#000000</code>”, “<code>#bd2300</code>”)</li>\n     #     <li>rgb(•••, •••, •••) — red, green and blue channels’ values: (“<code>rgb(200,&nbsp;100,&nbsp;0)</code>”)</li>\n     #     <li>rgb(•••%, •••%, •••%) — same as above, but in %: (“<code>rgb(100%,&nbsp;175%,&nbsp;0%)</code>”)</li>\n     #     <li>rgba(•••, •••, •••, •••) — red, green and blue channels’ values: (“<code>rgba(200,&nbsp;100,&nbsp;0, .5)</code>”)</li>\n     #     <li>rgba(•••%, •••%, •••%, •••%) — same as above, but in %: (“<code>rgba(100%,&nbsp;175%,&nbsp;0%, 50%)</code>”)</li>\n     #     <li>hsb(•••, •••, •••) — hue, saturation and brightness values: (“<code>hsb(0.5,&nbsp;0.25,&nbsp;1)</code>”)</li>\n     #     <li>hsb(•••%, •••%, •••%) — same as above, but in %</li>\n     #     <li>hsba(•••, •••, •••, •••) — same as above, but with opacity</li>\n     #     <li>hsl(•••, •••, •••) — almost the same as hsb, see <a href=\"http://en.wikipedia.org/wiki/HSL_and_HSV\" title=\"HSL and HSV - Wikipedia, the free encyclopedia\">Wikipedia page</a></li>\n     #     <li>hsl(•••%, •••%, •••%) — same as above, but in %</li>\n     #     <li>hsla(•••, •••, •••, •••) — same as above, but with opacity</li>\n     #     <li>Optionally for hsb and hsl you could specify hue as a degree: “<code>hsl(240deg,&nbsp;1,&nbsp;.5)</code>” or, if you want to go fancy, “<code>hsl(240°,&nbsp;1,&nbsp;.5)</code>”</li>\n     # </ul>\n    \\*/\n    elproto.attr = function (name, value) {\n        if (this.removed) {\n            return this;\n        }\n        if (name == null) {\n            var res = {};\n            for (var a in this.attrs) if (this.attrs[has](a)) {\n                res[a] = this.attrs[a];\n            }\n            res.gradient && res.fill == \"none\" && (res.fill = res.gradient) && delete res.gradient;\n            res.transform = this._.transform;\n            return res;\n        }\n        if (value == null && R.is(name, \"string\")) {\n            if (name == \"fill\" && this.attrs.fill == \"none\" && this.attrs.gradient) {\n                return this.attrs.gradient;\n            }\n            if (name == \"transform\") {\n                return this._.transform;\n            }\n            var names = name.split(separator),\n                out = {};\n            for (var i = 0, ii = names.length; i < ii; i++) {\n                name = names[i];\n                if (name in this.attrs) {\n                    out[name] = this.attrs[name];\n                } else if (R.is(this.paper.customAttributes[name], \"function\")) {\n                    out[name] = this.paper.customAttributes[name].def;\n                } else {\n                    out[name] = R._availableAttrs[name];\n                }\n            }\n            return ii - 1 ? out : out[names[0]];\n        }\n        if (value == null && R.is(name, \"array\")) {\n            out = {};\n            for (i = 0, ii = name.length; i < ii; i++) {\n                out[name[i]] = this.attr(name[i]);\n            }\n            return out;\n        }\n        if (value != null) {\n            var params = {};\n            params[name] = value;\n        } else if (name != null && R.is(name, \"object\")) {\n            params = name;\n        }\n        for (var key in params) {\n            eve(\"raphael.attr.\" + key + \".\" + this.id, this, params[key]);\n        }\n        for (key in this.paper.customAttributes) if (this.paper.customAttributes[has](key) && params[has](key) && R.is(this.paper.customAttributes[key], \"function\")) {\n            var par = this.paper.customAttributes[key].apply(this, [].concat(params[key]));\n            this.attrs[key] = params[key];\n            for (var subkey in par) if (par[has](subkey)) {\n                params[subkey] = par[subkey];\n            }\n        }\n        setFillAndStroke(this, params);\n        return this;\n    };\n    /*\\\n     * Element.toFront\n     [ method ]\n     **\n     * Moves the element so it is the closest to the viewer’s eyes, on top of other elements.\n     = (object) @Element\n    \\*/\n    elproto.toFront = function () {\n        if (this.removed) {\n            return this;\n        }\n        var node = getRealNode(this.node);\n        node.parentNode.appendChild(node);\n        var svg = this.paper;\n        svg.top != this && R._tofront(this, svg);\n        return this;\n    };\n    /*\\\n     * Element.toBack\n     [ method ]\n     **\n     * Moves the element so it is the furthest from the viewer’s eyes, behind other elements.\n     = (object) @Element\n    \\*/\n    elproto.toBack = function () {\n        if (this.removed) {\n            return this;\n        }\n        var node = getRealNode(this.node);\n        var parentNode = node.parentNode;\n        parentNode.insertBefore(node, parentNode.firstChild);\n        R._toback(this, this.paper);\n        var svg = this.paper;\n        return this;\n    };\n    /*\\\n     * Element.insertAfter\n     [ method ]\n     **\n     * Inserts current object after the given one.\n     = (object) @Element\n    \\*/\n    elproto.insertAfter = function (element) {\n        if (this.removed || !element) {\n            return this;\n        }\n\n        var node = getRealNode(this.node);\n        var afterNode = getRealNode(element.node || element[element.length - 1].node);\n        if (afterNode.nextSibling) {\n            afterNode.parentNode.insertBefore(node, afterNode.nextSibling);\n        } else {\n            afterNode.parentNode.appendChild(node);\n        }\n        R._insertafter(this, element, this.paper);\n        return this;\n    };\n    /*\\\n     * Element.insertBefore\n     [ method ]\n     **\n     * Inserts current object before the given one.\n     = (object) @Element\n    \\*/\n    elproto.insertBefore = function (element) {\n        if (this.removed || !element) {\n            return this;\n        }\n\n        var node = getRealNode(this.node);\n        var beforeNode = getRealNode(element.node || element[0].node);\n        beforeNode.parentNode.insertBefore(node, beforeNode);\n        R._insertbefore(this, element, this.paper);\n        return this;\n    };\n    elproto.blur = function (size) {\n        // Experimental. No Safari support. Use it on your own risk.\n        var t = this;\n        if (+size !== 0) {\n            var fltr = $(\"filter\"),\n                blur = $(\"feGaussianBlur\");\n            t.attrs.blur = size;\n            fltr.id = R.createUUID();\n            $(blur, {stdDeviation: +size || 1.5});\n            fltr.appendChild(blur);\n            t.paper.defs.appendChild(fltr);\n            t._blur = fltr;\n            $(t.node, {filter: \"url(#\" + fltr.id + \")\"});\n        } else {\n            if (t._blur) {\n                t._blur.parentNode.removeChild(t._blur);\n                delete t._blur;\n                delete t.attrs.blur;\n            }\n            t.node.removeAttribute(\"filter\");\n        }\n        return t;\n    };\n    R._engine.circle = function (svg, x, y, r) {\n        var el = $(\"circle\");\n        svg.canvas && svg.canvas.appendChild(el);\n        var res = new Element(el, svg);\n        res.attrs = {cx: x, cy: y, r: r, fill: \"none\", stroke: \"#000\"};\n        res.type = \"circle\";\n        $(el, res.attrs);\n        return res;\n    };\n    R._engine.rect = function (svg, x, y, w, h, r) {\n        var el = $(\"rect\");\n        svg.canvas && svg.canvas.appendChild(el);\n        var res = new Element(el, svg);\n        res.attrs = {x: x, y: y, width: w, height: h, rx: r || 0, ry: r || 0, fill: \"none\", stroke: \"#000\"};\n        res.type = \"rect\";\n        $(el, res.attrs);\n        return res;\n    };\n    R._engine.ellipse = function (svg, x, y, rx, ry) {\n        var el = $(\"ellipse\");\n        svg.canvas && svg.canvas.appendChild(el);\n        var res = new Element(el, svg);\n        res.attrs = {cx: x, cy: y, rx: rx, ry: ry, fill: \"none\", stroke: \"#000\"};\n        res.type = \"ellipse\";\n        $(el, res.attrs);\n        return res;\n    };\n    R._engine.image = function (svg, src, x, y, w, h) {\n        var el = $(\"image\");\n        $(el, {x: x, y: y, width: w, height: h, preserveAspectRatio: \"none\"});\n        el.setAttributeNS(xlink, \"href\", src);\n        svg.canvas && svg.canvas.appendChild(el);\n        var res = new Element(el, svg);\n        res.attrs = {x: x, y: y, width: w, height: h, src: src};\n        res.type = \"image\";\n        return res;\n    };\n    R._engine.text = function (svg, x, y, text) {\n        var el = $(\"text\");\n        svg.canvas && svg.canvas.appendChild(el);\n        var res = new Element(el, svg);\n        res.attrs = {\n            x: x,\n            y: y,\n            \"text-anchor\": \"middle\",\n            text: text,\n            \"font-family\": R._availableAttrs[\"font-family\"],\n            \"font-size\": R._availableAttrs[\"font-size\"],\n            stroke: \"none\",\n            fill: \"#000\"\n        };\n        res.type = \"text\";\n        setFillAndStroke(res, res.attrs);\n        return res;\n    };\n    R._engine.setSize = function (width, height) {\n        this.width = width || this.width;\n        this.height = height || this.height;\n        this.canvas.setAttribute(\"width\", this.width);\n        this.canvas.setAttribute(\"height\", this.height);\n        if (this._viewBox) {\n            this.setViewBox.apply(this, this._viewBox);\n        }\n        return this;\n    };\n    R._engine.create = function () {\n        var con = R._getContainer.apply(0, arguments),\n            container = con && con.container,\n            x = con.x,\n            y = con.y,\n            width = con.width,\n            height = con.height;\n        if (!container) {\n            throw new Error(\"SVG container not found.\");\n        }\n        var cnvs = $(\"svg\"),\n            css = \"overflow:hidden;\",\n            isFloating;\n        x = x || 0;\n        y = y || 0;\n        width = width || 512;\n        height = height || 342;\n        $(cnvs, {\n            height: height,\n            version: 1.1,\n            width: width,\n            xmlns: \"http://www.w3.org/2000/svg\",\n            \"xmlns:xlink\": \"http://www.w3.org/1999/xlink\"\n        });\n        if (container == 1) {\n            cnvs.style.cssText = css + \"position:absolute;left:\" + x + \"px;top:\" + y + \"px\";\n            R._g.doc.body.appendChild(cnvs);\n            isFloating = 1;\n        } else {\n            cnvs.style.cssText = css + \"position:relative\";\n            if (container.firstChild) {\n                container.insertBefore(cnvs, container.firstChild);\n            } else {\n                container.appendChild(cnvs);\n            }\n        }\n        container = new R._Paper;\n        container.width = width;\n        container.height = height;\n        container.canvas = cnvs;\n        container.clear();\n        container._left = container._top = 0;\n        isFloating && (container.renderfix = function () {});\n        container.renderfix();\n        return container;\n    };\n    R._engine.setViewBox = function (x, y, w, h, fit) {\n        eve(\"raphael.setViewBox\", this, this._viewBox, [x, y, w, h, fit]);\n        var paperSize = this.getSize(),\n            size = mmax(w / paperSize.width, h / paperSize.height),\n            top = this.top,\n            aspectRatio = fit ? \"xMidYMid meet\" : \"xMinYMin\",\n            vb,\n            sw;\n        if (x == null) {\n            if (this._vbSize) {\n                size = 1;\n            }\n            delete this._vbSize;\n            vb = \"0 0 \" + this.width + S + this.height;\n        } else {\n            this._vbSize = size;\n            vb = x + S + y + S + w + S + h;\n        }\n        $(this.canvas, {\n            viewBox: vb,\n            preserveAspectRatio: aspectRatio\n        });\n        while (size && top) {\n            sw = \"stroke-width\" in top.attrs ? top.attrs[\"stroke-width\"] : 1;\n            top.attr({\"stroke-width\": sw});\n            top._.dirty = 1;\n            top._.dirtyT = 1;\n            top = top.prev;\n        }\n        this._viewBox = [x, y, w, h, !!fit];\n        return this;\n    };\n    /*\\\n     * Paper.renderfix\n     [ method ]\n     **\n     * Fixes the issue of Firefox and IE9 regarding subpixel rendering. If paper is dependent\n     * on other elements after reflow it could shift half pixel which cause for lines to lost their crispness.\n     * This method fixes the issue.\n     **\n       Special thanks to Mariusz Nowak (http://www.medikoo.com/) for this method.\n    \\*/\n    R.prototype.renderfix = function () {\n        var cnvs = this.canvas,\n            s = cnvs.style,\n            pos;\n        try {\n            pos = cnvs.getScreenCTM() || cnvs.createSVGMatrix();\n        } catch (e) {\n            pos = cnvs.createSVGMatrix();\n        }\n        var left = -pos.e % 1,\n            top = -pos.f % 1;\n        if (left || top) {\n            if (left) {\n                this._left = (this._left + left) % 1;\n                s.left = this._left + \"px\";\n            }\n            if (top) {\n                this._top = (this._top + top) % 1;\n                s.top = this._top + \"px\";\n            }\n        }\n    };\n    /*\\\n     * Paper.clear\n     [ method ]\n     **\n     * Clears the paper, i.e. removes all the elements.\n    \\*/\n    R.prototype.clear = function () {\n        R.eve(\"raphael.clear\", this);\n        var c = this.canvas;\n        while (c.firstChild) {\n            c.removeChild(c.firstChild);\n        }\n        this.bottom = this.top = null;\n        (this.desc = $(\"desc\")).appendChild(R._g.doc.createTextNode(\"Created with Rapha\\xebl \" + R.version));\n        c.appendChild(this.desc);\n        c.appendChild(this.defs = $(\"defs\"));\n    };\n    /*\\\n     * Paper.remove\n     [ method ]\n     **\n     * Removes the paper from the DOM.\n    \\*/\n    R.prototype.remove = function () {\n        eve(\"raphael.remove\", this);\n        this.canvas.parentNode && this.canvas.parentNode.removeChild(this.canvas);\n        for (var i in this) {\n            this[i] = typeof this[i] == \"function\" ? R._removedFactory(i) : null;\n        }\n    };\n    var setproto = R.st;\n    for (var method in elproto) if (elproto[has](method) && !setproto[has](method)) {\n        setproto[method] = (function (methodname) {\n            return function () {\n                var arg = arguments;\n                return this.forEach(function (el) {\n                    el[methodname].apply(el, arg);\n                });\n            };\n        })(method);\n    }\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9kZXYvcmFwaGFlbC5zdmcuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9SYXBoYWVsLy4vZGV2L3JhcGhhZWwuc3ZnLmpzP2Q4YzciXSwic291cmNlc0NvbnRlbnQiOlsiZGVmaW5lKFtcIi4vcmFwaGFlbC5jb3JlXCJdLCBmdW5jdGlvbihSKSB7XG4gICAgaWYgKFIgJiYgIVIuc3ZnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgaGFzID0gXCJoYXNPd25Qcm9wZXJ0eVwiLFxuICAgICAgICBTdHIgPSBTdHJpbmcsXG4gICAgICAgIHRvRmxvYXQgPSBwYXJzZUZsb2F0LFxuICAgICAgICB0b0ludCA9IHBhcnNlSW50LFxuICAgICAgICBtYXRoID0gTWF0aCxcbiAgICAgICAgbW1heCA9IG1hdGgubWF4LFxuICAgICAgICBhYnMgPSBtYXRoLmFicyxcbiAgICAgICAgcG93ID0gbWF0aC5wb3csXG4gICAgICAgIHNlcGFyYXRvciA9IC9bLCBdKy8sXG4gICAgICAgIGV2ZSA9IFIuZXZlLFxuICAgICAgICBFID0gXCJcIixcbiAgICAgICAgUyA9IFwiIFwiO1xuICAgIHZhciB4bGluayA9IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiLFxuICAgICAgICBtYXJrZXJzID0ge1xuICAgICAgICAgICAgYmxvY2s6IFwiTTUsMCAwLDIuNSA1LDV6XCIsXG4gICAgICAgICAgICBjbGFzc2ljOiBcIk01LDAgMCwyLjUgNSw1IDMuNSwzIDMuNSwyelwiLFxuICAgICAgICAgICAgZGlhbW9uZDogXCJNMi41LDAgNSwyLjUgMi41LDUgMCwyLjV6XCIsXG4gICAgICAgICAgICBvcGVuOiBcIk02LDEgMSwzLjUgNiw2XCIsXG4gICAgICAgICAgICBvdmFsOiBcIk0yLjUsMEEyLjUsMi41LDAsMCwxLDIuNSw1IDIuNSwyLjUsMCwwLDEsMi41LDB6XCJcbiAgICAgICAgfSxcbiAgICAgICAgbWFya2VyQ291bnRlciA9IHt9O1xuICAgIFIudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAgXCJZb3VyIGJyb3dzZXIgc3VwcG9ydHMgU1ZHLlxcbllvdSBhcmUgcnVubmluZyBSYXBoYVxceGVibCBcIiArIHRoaXMudmVyc2lvbjtcbiAgICB9O1xuICAgIHZhciAkID0gZnVuY3Rpb24gKGVsLCBhdHRyKSB7XG4gICAgICAgIGlmIChhdHRyKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGVsID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBlbCA9ICQoZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGF0dHIpIGlmIChhdHRyW2hhc10oa2V5KSkge1xuICAgICAgICAgICAgICAgIGlmIChrZXkuc3Vic3RyaW5nKDAsIDYpID09IFwieGxpbms6XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlTlMoeGxpbmssIGtleS5zdWJzdHJpbmcoNiksIFN0cihhdHRyW2tleV0pKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoa2V5LCBTdHIoYXR0cltrZXldKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWwgPSBSLl9nLmRvYy5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBlbCk7XG4gICAgICAgICAgICBlbC5zdHlsZSAmJiAoZWwuc3R5bGUud2Via2l0VGFwSGlnaGxpZ2h0Q29sb3IgPSBcInJnYmEoMCwwLDAsMClcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVsO1xuICAgIH0sXG4gICAgYWRkR3JhZGllbnRGaWxsID0gZnVuY3Rpb24gKGVsZW1lbnQsIGdyYWRpZW50KSB7XG4gICAgICAgIHZhciB0eXBlID0gXCJsaW5lYXJcIixcbiAgICAgICAgICAgIGlkID0gZWxlbWVudC5pZCArIGdyYWRpZW50LFxuICAgICAgICAgICAgZnggPSAuNSwgZnkgPSAuNSxcbiAgICAgICAgICAgIG8gPSBlbGVtZW50Lm5vZGUsXG4gICAgICAgICAgICBTVkcgPSBlbGVtZW50LnBhcGVyLFxuICAgICAgICAgICAgcyA9IG8uc3R5bGUsXG4gICAgICAgICAgICBlbCA9IFIuX2cuZG9jLmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICAgICAgaWYgKCFlbCkge1xuICAgICAgICAgICAgZ3JhZGllbnQgPSBTdHIoZ3JhZGllbnQpLnJlcGxhY2UoUi5fcmFkaWFsX2dyYWRpZW50LCBmdW5jdGlvbiAoYWxsLCBfZngsIF9meSkge1xuICAgICAgICAgICAgICAgIHR5cGUgPSBcInJhZGlhbFwiO1xuICAgICAgICAgICAgICAgIGlmIChfZnggJiYgX2Z5KSB7XG4gICAgICAgICAgICAgICAgICAgIGZ4ID0gdG9GbG9hdChfZngpO1xuICAgICAgICAgICAgICAgICAgICBmeSA9IHRvRmxvYXQoX2Z5KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRpciA9ICgoZnkgPiAuNSkgKiAyIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgIHBvdyhmeCAtIC41LCAyKSArIHBvdyhmeSAtIC41LCAyKSA+IC4yNSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKGZ5ID0gbWF0aC5zcXJ0KC4yNSAtIHBvdyhmeCAtIC41LCAyKSkgKiBkaXIgKyAuNSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ5ICE9IC41ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAoZnkgPSBmeS50b0ZpeGVkKDUpIC0gMWUtNSAqIGRpcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBFO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBncmFkaWVudCA9IGdyYWRpZW50LnNwbGl0KC9cXHMqXFwtXFxzKi8pO1xuICAgICAgICAgICAgaWYgKHR5cGUgPT0gXCJsaW5lYXJcIikge1xuICAgICAgICAgICAgICAgIHZhciBhbmdsZSA9IGdyYWRpZW50LnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgYW5nbGUgPSAtdG9GbG9hdChhbmdsZSk7XG4gICAgICAgICAgICAgICAgaWYgKGlzTmFOKGFuZ2xlKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHZlY3RvciA9IFswLCAwLCBtYXRoLmNvcyhSLnJhZChhbmdsZSkpLCBtYXRoLnNpbihSLnJhZChhbmdsZSkpXSxcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gMSAvIChtbWF4KGFicyh2ZWN0b3JbMl0pLCBhYnModmVjdG9yWzNdKSkgfHwgMSk7XG4gICAgICAgICAgICAgICAgdmVjdG9yWzJdICo9IG1heDtcbiAgICAgICAgICAgICAgICB2ZWN0b3JbM10gKj0gbWF4O1xuICAgICAgICAgICAgICAgIGlmICh2ZWN0b3JbMl0gPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZlY3RvclswXSA9IC12ZWN0b3JbMl07XG4gICAgICAgICAgICAgICAgICAgIHZlY3RvclsyXSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh2ZWN0b3JbM10gPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZlY3RvclsxXSA9IC12ZWN0b3JbM107XG4gICAgICAgICAgICAgICAgICAgIHZlY3RvclszXSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGRvdHMgPSBSLl9wYXJzZURvdHMoZ3JhZGllbnQpO1xuICAgICAgICAgICAgaWYgKCFkb3RzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZCA9IGlkLnJlcGxhY2UoL1tcXChcXClcXHMsXFx4YjAjXS9nLCBcIl9cIik7XG5cbiAgICAgICAgICAgIGlmIChlbGVtZW50LmdyYWRpZW50ICYmIGlkICE9IGVsZW1lbnQuZ3JhZGllbnQuaWQpIHtcbiAgICAgICAgICAgICAgICBTVkcuZGVmcy5yZW1vdmVDaGlsZChlbGVtZW50LmdyYWRpZW50KTtcbiAgICAgICAgICAgICAgICBkZWxldGUgZWxlbWVudC5ncmFkaWVudDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFlbGVtZW50LmdyYWRpZW50KSB7XG4gICAgICAgICAgICAgICAgZWwgPSAkKHR5cGUgKyBcIkdyYWRpZW50XCIsIHtpZDogaWR9KTtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmdyYWRpZW50ID0gZWw7XG4gICAgICAgICAgICAgICAgJChlbCwgdHlwZSA9PSBcInJhZGlhbFwiID8ge1xuICAgICAgICAgICAgICAgICAgICBmeDogZngsXG4gICAgICAgICAgICAgICAgICAgIGZ5OiBmeVxuICAgICAgICAgICAgICAgIH0gOiB7XG4gICAgICAgICAgICAgICAgICAgIHgxOiB2ZWN0b3JbMF0sXG4gICAgICAgICAgICAgICAgICAgIHkxOiB2ZWN0b3JbMV0sXG4gICAgICAgICAgICAgICAgICAgIHgyOiB2ZWN0b3JbMl0sXG4gICAgICAgICAgICAgICAgICAgIHkyOiB2ZWN0b3JbM10sXG4gICAgICAgICAgICAgICAgICAgIGdyYWRpZW50VHJhbnNmb3JtOiBlbGVtZW50Lm1hdHJpeC5pbnZlcnQoKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFNWRy5kZWZzLmFwcGVuZENoaWxkKGVsKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBkb3RzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZWwuYXBwZW5kQ2hpbGQoJChcInN0b3BcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiBkb3RzW2ldLm9mZnNldCA/IGRvdHNbaV0ub2Zmc2V0IDogaSA/IFwiMTAwJVwiIDogXCIwJVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzdG9wLWNvbG9yXCI6IGRvdHNbaV0uY29sb3IgfHwgXCIjZmZmXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInN0b3Atb3BhY2l0eVwiOiBpc0Zpbml0ZShkb3RzW2ldLm9wYWNpdHkpID8gZG90c1tpXS5vcGFjaXR5IDogMVxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICQobywge1xuICAgICAgICAgICAgZmlsbDogZmlsbHVybChpZCksXG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgXCJmaWxsLW9wYWNpdHlcIjogMVxuICAgICAgICB9KTtcbiAgICAgICAgcy5maWxsID0gRTtcbiAgICAgICAgcy5vcGFjaXR5ID0gMTtcbiAgICAgICAgcy5maWxsT3BhY2l0eSA9IDE7XG4gICAgICAgIHJldHVybiAxO1xuICAgIH0sXG4gICAgaXNJRTlvcjEwID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIG1vZGUgPSBkb2N1bWVudC5kb2N1bWVudE1vZGU7XG4gICAgICByZXR1cm4gbW9kZSAmJiAobW9kZSA9PT0gOSB8fCBtb2RlID09PSAxMCk7XG4gICAgfSxcbiAgICBmaWxsdXJsID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICBpZiAoaXNJRTlvcjEwKCkpIHtcbiAgICAgICAgICByZXR1cm4gXCJ1cmwoJyNcIiArIGlkICsgXCInKVwiO1xuICAgICAgfVxuICAgICAgdmFyIGxvY2F0aW9uID0gZG9jdW1lbnQubG9jYXRpb247XG4gICAgICB2YXIgbG9jYXRpb25TdHJpbmcgPSAoXG4gICAgICAgICAgbG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICtcbiAgICAgICAgICBsb2NhdGlvbi5ob3N0ICtcbiAgICAgICAgICBsb2NhdGlvbi5wYXRobmFtZSArXG4gICAgICAgICAgbG9jYXRpb24uc2VhcmNoXG4gICAgICApO1xuICAgICAgcmV0dXJuIFwidXJsKCdcIiArIGxvY2F0aW9uU3RyaW5nICsgXCIjXCIgKyBpZCArIFwiJylcIjtcbiAgICB9LFxuICAgIHVwZGF0ZVBvc2l0aW9uID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgdmFyIGJib3ggPSBvLmdldEJCb3goMSk7XG4gICAgICAgICQoby5wYXR0ZXJuLCB7cGF0dGVyblRyYW5zZm9ybTogby5tYXRyaXguaW52ZXJ0KCkgKyBcIiB0cmFuc2xhdGUoXCIgKyBiYm94LnggKyBcIixcIiArIGJib3gueSArIFwiKVwifSk7XG4gICAgfSxcbiAgICBhZGRBcnJvdyA9IGZ1bmN0aW9uIChvLCB2YWx1ZSwgaXNFbmQpIHtcbiAgICAgICAgaWYgKG8udHlwZSA9PSBcInBhdGhcIikge1xuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IFN0cih2YWx1ZSkudG9Mb3dlckNhc2UoKS5zcGxpdChcIi1cIiksXG4gICAgICAgICAgICAgICAgcCA9IG8ucGFwZXIsXG4gICAgICAgICAgICAgICAgc2UgPSBpc0VuZCA/IFwiZW5kXCIgOiBcInN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgbm9kZSA9IG8ubm9kZSxcbiAgICAgICAgICAgICAgICBhdHRycyA9IG8uYXR0cnMsXG4gICAgICAgICAgICAgICAgc3Ryb2tlID0gYXR0cnNbXCJzdHJva2Utd2lkdGhcIl0sXG4gICAgICAgICAgICAgICAgaSA9IHZhbHVlcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgdHlwZSA9IFwiY2xhc3NpY1wiLFxuICAgICAgICAgICAgICAgIGZyb20sXG4gICAgICAgICAgICAgICAgdG8sXG4gICAgICAgICAgICAgICAgZHgsXG4gICAgICAgICAgICAgICAgcmVmWCxcbiAgICAgICAgICAgICAgICBhdHRyLFxuICAgICAgICAgICAgICAgIHcgPSAzLFxuICAgICAgICAgICAgICAgIGggPSAzLFxuICAgICAgICAgICAgICAgIHQgPSA1O1xuICAgICAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodmFsdWVzW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJibG9ja1wiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY2xhc3NpY1wiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwib3ZhbFwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZGlhbW9uZFwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwib3BlblwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibm9uZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9IHZhbHVlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwid2lkZVwiOiBoID0gNTsgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJuYXJyb3dcIjogaCA9IDI7IGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibG9uZ1wiOiB3ID0gNTsgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzaG9ydFwiOiB3ID0gMjsgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGUgPT0gXCJvcGVuXCIpIHtcbiAgICAgICAgICAgICAgICB3ICs9IDI7XG4gICAgICAgICAgICAgICAgaCArPSAyO1xuICAgICAgICAgICAgICAgIHQgKz0gMjtcbiAgICAgICAgICAgICAgICBkeCA9IDE7XG4gICAgICAgICAgICAgICAgcmVmWCA9IGlzRW5kID8gNCA6IDE7XG4gICAgICAgICAgICAgICAgYXR0ciA9IHtcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogXCJub25lXCIsXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZTogYXR0cnMuc3Ryb2tlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVmWCA9IGR4ID0gdyAvIDI7XG4gICAgICAgICAgICAgICAgYXR0ciA9IHtcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogYXR0cnMuc3Ryb2tlLFxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6IFwibm9uZVwiXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvLl8uYXJyb3dzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzRW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIG8uXy5hcnJvd3MuZW5kUGF0aCAmJiBtYXJrZXJDb3VudGVyW28uXy5hcnJvd3MuZW5kUGF0aF0tLTtcbiAgICAgICAgICAgICAgICAgICAgby5fLmFycm93cy5lbmRNYXJrZXIgJiYgbWFya2VyQ291bnRlcltvLl8uYXJyb3dzLmVuZE1hcmtlcl0tLTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvLl8uYXJyb3dzLnN0YXJ0UGF0aCAmJiBtYXJrZXJDb3VudGVyW28uXy5hcnJvd3Muc3RhcnRQYXRoXS0tO1xuICAgICAgICAgICAgICAgICAgICBvLl8uYXJyb3dzLnN0YXJ0TWFya2VyICYmIG1hcmtlckNvdW50ZXJbby5fLmFycm93cy5zdGFydE1hcmtlcl0tLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG8uXy5hcnJvd3MgPSB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlICE9IFwibm9uZVwiKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhdGhJZCA9IFwicmFwaGFlbC1tYXJrZXItXCIgKyB0eXBlLFxuICAgICAgICAgICAgICAgICAgICBtYXJrZXJJZCA9IFwicmFwaGFlbC1tYXJrZXItXCIgKyBzZSArIHR5cGUgKyB3ICsgaCArIFwiLW9ialwiICsgby5pZDtcbiAgICAgICAgICAgICAgICBpZiAoIVIuX2cuZG9jLmdldEVsZW1lbnRCeUlkKHBhdGhJZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcC5kZWZzLmFwcGVuZENoaWxkKCQoJChcInBhdGhcIiksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3Ryb2tlLWxpbmVjYXBcIjogXCJyb3VuZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZDogbWFya2Vyc1t0eXBlXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBwYXRoSWRcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb3VudGVyW3BhdGhJZF0gPSAxO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtlckNvdW50ZXJbcGF0aElkXSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbWFya2VyID0gUi5fZy5kb2MuZ2V0RWxlbWVudEJ5SWQobWFya2VySWQpLFxuICAgICAgICAgICAgICAgICAgICB1c2U7XG4gICAgICAgICAgICAgICAgaWYgKCFtYXJrZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgbWFya2VyID0gJCgkKFwibWFya2VyXCIpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogbWFya2VySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJIZWlnaHQ6IGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJXaWR0aDogdyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWVudDogXCJhdXRvXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWZYOiByZWZYLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmWTogaCAvIDJcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHVzZSA9ICQoJChcInVzZVwiKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJ4bGluazpocmVmXCI6IFwiI1wiICsgcGF0aElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAoaXNFbmQgPyBcInJvdGF0ZSgxODAgXCIgKyB3IC8gMiArIFwiIFwiICsgaCAvIDIgKyBcIikgXCIgOiBFKSArIFwic2NhbGUoXCIgKyB3IC8gdCArIFwiLFwiICsgaCAvIHQgKyBcIilcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3Ryb2tlLXdpZHRoXCI6ICgxIC8gKCh3IC8gdCArIGggLyB0KSAvIDIpKS50b0ZpeGVkKDQpXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBtYXJrZXIuYXBwZW5kQ2hpbGQodXNlKTtcbiAgICAgICAgICAgICAgICAgICAgcC5kZWZzLmFwcGVuZENoaWxkKG1hcmtlcik7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtlckNvdW50ZXJbbWFya2VySWRdID0gMTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb3VudGVyW21hcmtlcklkXSsrO1xuICAgICAgICAgICAgICAgICAgICB1c2UgPSBtYXJrZXIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ1c2VcIilbMF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICQodXNlLCBhdHRyKTtcbiAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBkeCAqICh0eXBlICE9IFwiZGlhbW9uZFwiICYmIHR5cGUgIT0gXCJvdmFsXCIpO1xuICAgICAgICAgICAgICAgIGlmIChpc0VuZCkge1xuICAgICAgICAgICAgICAgICAgICBmcm9tID0gby5fLmFycm93cy5zdGFydGR4ICogc3Ryb2tlIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgIHRvID0gUi5nZXRUb3RhbExlbmd0aChhdHRycy5wYXRoKSAtIGRlbHRhICogc3Ryb2tlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZyb20gPSBkZWx0YSAqIHN0cm9rZTtcbiAgICAgICAgICAgICAgICAgICAgdG8gPSBSLmdldFRvdGFsTGVuZ3RoKGF0dHJzLnBhdGgpIC0gKG8uXy5hcnJvd3MuZW5kZHggKiBzdHJva2UgfHwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGF0dHIgPSB7fTtcbiAgICAgICAgICAgICAgICBhdHRyW1wibWFya2VyLVwiICsgc2VdID0gXCJ1cmwoI1wiICsgbWFya2VySWQgKyBcIilcIjtcbiAgICAgICAgICAgICAgICBpZiAodG8gfHwgZnJvbSkge1xuICAgICAgICAgICAgICAgICAgICBhdHRyLmQgPSBSLmdldFN1YnBhdGgoYXR0cnMucGF0aCwgZnJvbSwgdG8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkKG5vZGUsIGF0dHIpO1xuICAgICAgICAgICAgICAgIG8uXy5hcnJvd3Nbc2UgKyBcIlBhdGhcIl0gPSBwYXRoSWQ7XG4gICAgICAgICAgICAgICAgby5fLmFycm93c1tzZSArIFwiTWFya2VyXCJdID0gbWFya2VySWQ7XG4gICAgICAgICAgICAgICAgby5fLmFycm93c1tzZSArIFwiZHhcIl0gPSBkZWx0YTtcbiAgICAgICAgICAgICAgICBvLl8uYXJyb3dzW3NlICsgXCJUeXBlXCJdID0gdHlwZTtcbiAgICAgICAgICAgICAgICBvLl8uYXJyb3dzW3NlICsgXCJTdHJpbmdcIl0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzRW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIGZyb20gPSBvLl8uYXJyb3dzLnN0YXJ0ZHggKiBzdHJva2UgfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgdG8gPSBSLmdldFRvdGFsTGVuZ3RoKGF0dHJzLnBhdGgpIC0gZnJvbTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmcm9tID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdG8gPSBSLmdldFRvdGFsTGVuZ3RoKGF0dHJzLnBhdGgpIC0gKG8uXy5hcnJvd3MuZW5kZHggKiBzdHJva2UgfHwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG8uXy5hcnJvd3Nbc2UgKyBcIlBhdGhcIl0gJiYgJChub2RlLCB7ZDogUi5nZXRTdWJwYXRoKGF0dHJzLnBhdGgsIGZyb20sIHRvKX0pO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvLl8uYXJyb3dzW3NlICsgXCJQYXRoXCJdO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvLl8uYXJyb3dzW3NlICsgXCJNYXJrZXJcIl07XG4gICAgICAgICAgICAgICAgZGVsZXRlIG8uXy5hcnJvd3Nbc2UgKyBcImR4XCJdO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvLl8uYXJyb3dzW3NlICsgXCJUeXBlXCJdO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvLl8uYXJyb3dzW3NlICsgXCJTdHJpbmdcIl07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGF0dHIgaW4gbWFya2VyQ291bnRlcikgaWYgKG1hcmtlckNvdW50ZXJbaGFzXShhdHRyKSAmJiAhbWFya2VyQ291bnRlclthdHRyXSkge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gUi5fZy5kb2MuZ2V0RWxlbWVudEJ5SWQoYXR0cik7XG4gICAgICAgICAgICAgICAgaXRlbSAmJiBpdGVtLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGRhc2hhcnJheSA9IHtcbiAgICAgICAgXCItXCI6IFszLCAxXSxcbiAgICAgICAgXCIuXCI6IFsxLCAxXSxcbiAgICAgICAgXCItLlwiOiBbMywgMSwgMSwgMV0sXG4gICAgICAgIFwiLS4uXCI6IFszLCAxLCAxLCAxLCAxLCAxXSxcbiAgICAgICAgXCIuIFwiOiBbMSwgM10sXG4gICAgICAgIFwiLSBcIjogWzQsIDNdLFxuICAgICAgICBcIi0tXCI6IFs4LCAzXSxcbiAgICAgICAgXCItIC5cIjogWzQsIDMsIDEsIDNdLFxuICAgICAgICBcIi0tLlwiOiBbOCwgMywgMSwgM10sXG4gICAgICAgIFwiLS0uLlwiOiBbOCwgMywgMSwgMywgMSwgM11cbiAgICB9LFxuICAgIGFkZERhc2hlcyA9IGZ1bmN0aW9uIChvLCB2YWx1ZSwgcGFyYW1zKSB7XG4gICAgICAgIHZhbHVlID0gZGFzaGFycmF5W1N0cih2YWx1ZSkudG9Mb3dlckNhc2UoKV07XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gby5hdHRyc1tcInN0cm9rZS13aWR0aFwiXSB8fCBcIjFcIixcbiAgICAgICAgICAgICAgICBidXR0ID0ge3JvdW5kOiB3aWR0aCwgc3F1YXJlOiB3aWR0aCwgYnV0dDogMH1bby5hdHRyc1tcInN0cm9rZS1saW5lY2FwXCJdIHx8IHBhcmFtc1tcInN0cm9rZS1saW5lY2FwXCJdXSB8fCAwLFxuICAgICAgICAgICAgICAgIGRhc2hlcyA9IFtdLFxuICAgICAgICAgICAgICAgIGkgPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgICAgICAgZGFzaGVzW2ldID0gdmFsdWVbaV0gKiB3aWR0aCArICgoaSAlIDIpID8gMSA6IC0xKSAqIGJ1dHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkKG8ubm9kZSwge1wic3Ryb2tlLWRhc2hhcnJheVwiOiBkYXNoZXMuam9pbihcIixcIil9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAkKG8ubm9kZSwge1wic3Ryb2tlLWRhc2hhcnJheVwiOiBcIm5vbmVcIn0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBzZXRGaWxsQW5kU3Ryb2tlID0gZnVuY3Rpb24gKG8sIHBhcmFtcykge1xuICAgICAgICB2YXIgbm9kZSA9IG8ubm9kZSxcbiAgICAgICAgICAgIGF0dHJzID0gby5hdHRycyxcbiAgICAgICAgICAgIHZpcyA9IG5vZGUuc3R5bGUudmlzaWJpbGl0eTtcbiAgICAgICAgbm9kZS5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcbiAgICAgICAgZm9yICh2YXIgYXR0IGluIHBhcmFtcykge1xuICAgICAgICAgICAgaWYgKHBhcmFtc1toYXNdKGF0dCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIVIuX2F2YWlsYWJsZUF0dHJzW2hhc10oYXR0KSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gcGFyYW1zW2F0dF07XG4gICAgICAgICAgICAgICAgYXR0cnNbYXR0XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoYXR0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJibHVyXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBvLmJsdXIodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0aXRsZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRpdGxlID0gbm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRpdGxlXCIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2UgdGhlIGV4aXN0aW5nIDx0aXRsZT4uXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGl0bGUubGVuZ3RoICYmICh0aXRsZSA9IHRpdGxlWzBdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZS5maXJzdENoaWxkLm5vZGVWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSAkKFwidGl0bGVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWwgPSBSLl9nLmRvYy5jcmVhdGVUZXh0Tm9kZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlLmFwcGVuZENoaWxkKHZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQodGl0bGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJocmVmXCI6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0YXJnZXRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwbiA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwbi50YWdOYW1lLnRvTG93ZXJDYXNlKCkgIT0gXCJhXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGwgPSAkKFwiYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbi5pbnNlcnRCZWZvcmUoaGwsIG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhsLmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBuID0gaGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0ID09IFwidGFyZ2V0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbi5zZXRBdHRyaWJ1dGVOUyh4bGluaywgXCJzaG93XCIsIHZhbHVlID09IFwiYmxhbmtcIiA/IFwibmV3XCIgOiB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBuLnNldEF0dHJpYnV0ZU5TKHhsaW5rLCBhdHQsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY3Vyc29yXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLnN0eWxlLmN1cnNvciA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0cmFuc2Zvcm1cIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIG8udHJhbnNmb3JtKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXJyb3ctc3RhcnRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEFycm93KG8sIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXJyb3ctZW5kXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRBcnJvdyhvLCB2YWx1ZSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNsaXAtcmVjdFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlY3QgPSBTdHIodmFsdWUpLnNwbGl0KHNlcGFyYXRvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVjdC5sZW5ndGggPT0gNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8uY2xpcCAmJiBvLmNsaXAucGFyZW50Tm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG8uY2xpcC5wYXJlbnROb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWwgPSAkKFwiY2xpcFBhdGhcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJjID0gJChcInJlY3RcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuaWQgPSBSLmNyZWF0ZVVVSUQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHJjLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IHJlY3RbMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IHJlY3RbMV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiByZWN0WzJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHJlY3RbM11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5hcHBlbmRDaGlsZChyYyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgby5wYXBlci5kZWZzLmFwcGVuZENoaWxkKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKG5vZGUsIHtcImNsaXAtcGF0aFwiOiBcInVybCgjXCIgKyBlbC5pZCArIFwiKVwifSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgby5jbGlwID0gcmM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhdGggPSBub2RlLmdldEF0dHJpYnV0ZShcImNsaXAtcGF0aFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2xpcCA9IFIuX2cuZG9jLmdldEVsZW1lbnRCeUlkKHBhdGgucmVwbGFjZSgvKF51cmxcXCgjfFxcKSQpL2csIEUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpcCAmJiBjbGlwLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoY2xpcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQobm9kZSwge1wiY2xpcC1wYXRoXCI6IEV9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG8uY2xpcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicGF0aFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8udHlwZSA9PSBcInBhdGhcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQobm9kZSwge2Q6IHZhbHVlID8gYXR0cnMucGF0aCA9IFIuX3BhdGhUb0Fic29sdXRlKHZhbHVlKSA6IFwiTTAsMFwifSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgby5fLmRpcnR5ID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoby5fLmFycm93cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInN0YXJ0U3RyaW5nXCIgaW4gby5fLmFycm93cyAmJiBhZGRBcnJvdyhvLCBvLl8uYXJyb3dzLnN0YXJ0U3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlbmRTdHJpbmdcIiBpbiBvLl8uYXJyb3dzICYmIGFkZEFycm93KG8sIG8uXy5hcnJvd3MuZW5kU3RyaW5nLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIndpZHRoXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShhdHQsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG8uXy5kaXJ0eSA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0cnMuZngpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHQgPSBcInhcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGF0dHJzLng7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwieFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJzLmZ4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAtYXR0cnMueCAtIChhdHRycy53aWR0aCB8fCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInJ4XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0ID09IFwicnhcIiAmJiBvLnR5cGUgPT0gXCJyZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImN4XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShhdHQsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG8ucGF0dGVybiAmJiB1cGRhdGVQb3NpdGlvbihvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG8uXy5kaXJ0eSA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImhlaWdodFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoYXR0LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvLl8uZGlydHkgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJzLmZ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ID0gXCJ5XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBhdHRycy55O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInlcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHRycy5meSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gLWF0dHJzLnkgLSAoYXR0cnMuaGVpZ2h0IHx8IDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicnlcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHQgPT0gXCJyeVwiICYmIG8udHlwZSA9PSBcInJlY3RcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY3lcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKGF0dCwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgby5wYXR0ZXJuICYmIHVwZGF0ZVBvc2l0aW9uKG8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgby5fLmRpcnR5ID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiclwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8udHlwZSA9PSBcInJlY3RcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQobm9kZSwge3J4OiB2YWx1ZSwgcnk6IHZhbHVlfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKGF0dCwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgby5fLmRpcnR5ID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwic3JjXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoby50eXBlID09IFwiaW1hZ2VcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlTlMoeGxpbmssIFwiaHJlZlwiLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInN0cm9rZS13aWR0aFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8uXy5zeCAhPSAxIHx8IG8uXy5zeSAhPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgLz0gbW1heChhYnMoby5fLnN4KSwgYWJzKG8uXy5zeSkpIHx8IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShhdHQsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHRyc1tcInN0cm9rZS1kYXNoYXJyYXlcIl0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGREYXNoZXMobywgYXR0cnNbXCJzdHJva2UtZGFzaGFycmF5XCJdLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8uXy5hcnJvd3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInN0YXJ0U3RyaW5nXCIgaW4gby5fLmFycm93cyAmJiBhZGRBcnJvdyhvLCBvLl8uYXJyb3dzLnN0YXJ0U3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVuZFN0cmluZ1wiIGluIG8uXy5hcnJvd3MgJiYgYWRkQXJyb3cobywgby5fLmFycm93cy5lbmRTdHJpbmcsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzdHJva2UtZGFzaGFycmF5XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGREYXNoZXMobywgdmFsdWUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImZpbGxcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc1VSTCA9IFN0cih2YWx1ZSkubWF0Y2goUi5fSVNVUkwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzVVJMKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwgPSAkKFwicGF0dGVyblwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWcgPSAkKFwiaW1hZ2VcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuaWQgPSBSLmNyZWF0ZVVVSUQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGVsLCB7eDogMCwgeTogMCwgcGF0dGVyblVuaXRzOiBcInVzZXJTcGFjZU9uVXNlXCIsIGhlaWdodDogMSwgd2lkdGg6IDF9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGlnLCB7eDogMCwgeTogMCwgXCJ4bGluazpocmVmXCI6IGlzVVJMWzFdfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuYXBwZW5kQ2hpbGQoaWcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSLl9wcmVsb2FkKGlzVVJMWzFdLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdyA9IHRoaXMub2Zmc2V0V2lkdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IHRoaXMub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChlbCwge3dpZHRoOiB3LCBoZWlnaHQ6IGh9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoaWcsIHt3aWR0aDogdywgaGVpZ2h0OiBofSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLnBhcGVyLmRlZnMuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQobm9kZSwge2ZpbGw6IFwidXJsKCNcIiArIGVsLmlkICsgXCIpXCJ9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLnBhdHRlcm4gPSBlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLnBhdHRlcm4gJiYgdXBkYXRlUG9zaXRpb24obyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2xyID0gUi5nZXRSR0IodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjbHIuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgcGFyYW1zLmdyYWRpZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdHRycy5ncmFkaWVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhUi5pcyhhdHRycy5vcGFjaXR5LCBcInVuZGVmaW5lZFwiKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSLmlzKHBhcmFtcy5vcGFjaXR5LCBcInVuZGVmaW5lZFwiKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKG5vZGUsIHtvcGFjaXR5OiBhdHRycy5vcGFjaXR5fSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIVIuaXMoYXR0cnNbXCJmaWxsLW9wYWNpdHlcIl0sIFwidW5kZWZpbmVkXCIpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFIuaXMocGFyYW1zW1wiZmlsbC1vcGFjaXR5XCJdLCBcInVuZGVmaW5lZFwiKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKG5vZGUsIHtcImZpbGwtb3BhY2l0eVwiOiBhdHRyc1tcImZpbGwtb3BhY2l0eVwiXX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgoby50eXBlID09IFwiY2lyY2xlXCIgfHwgby50eXBlID09IFwiZWxsaXBzZVwiIHx8IFN0cih2YWx1ZSkuY2hhckF0KCkgIT0gXCJyXCIpICYmIGFkZEdyYWRpZW50RmlsbChvLCB2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJvcGFjaXR5XCIgaW4gYXR0cnMgfHwgXCJmaWxsLW9wYWNpdHlcIiBpbiBhdHRycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ3JhZGllbnQgPSBSLl9nLmRvYy5nZXRFbGVtZW50QnlJZChub2RlLmdldEF0dHJpYnV0ZShcImZpbGxcIikucmVwbGFjZSgvXnVybFxcKCN8XFwpJC9nLCBFKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChncmFkaWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3BzID0gZ3JhZGllbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzdG9wXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChzdG9wc1tzdG9wcy5sZW5ndGggLSAxXSwge1wic3RvcC1vcGFjaXR5XCI6IChcIm9wYWNpdHlcIiBpbiBhdHRycyA/IGF0dHJzLm9wYWNpdHkgOiAxKSAqIChcImZpbGwtb3BhY2l0eVwiIGluIGF0dHJzID8gYXR0cnNbXCJmaWxsLW9wYWNpdHlcIl0gOiAxKX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzLmdyYWRpZW50ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnMuZmlsbCA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xyW2hhc10oXCJvcGFjaXR5XCIpICYmICQobm9kZSwge1wiZmlsbC1vcGFjaXR5XCI6IGNsci5vcGFjaXR5ID4gMSA/IGNsci5vcGFjaXR5IC8gMTAwIDogY2xyLm9wYWNpdHl9KTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInN0cm9rZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xyID0gUi5nZXRSR0IodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoYXR0LCBjbHIuaGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dCA9PSBcInN0cm9rZVwiICYmIGNscltoYXNdKFwib3BhY2l0eVwiKSAmJiAkKG5vZGUsIHtcInN0cm9rZS1vcGFjaXR5XCI6IGNsci5vcGFjaXR5ID4gMSA/IGNsci5vcGFjaXR5IC8gMTAwIDogY2xyLm9wYWNpdHl9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHQgPT0gXCJzdHJva2VcIiAmJiBvLl8uYXJyb3dzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzdGFydFN0cmluZ1wiIGluIG8uXy5hcnJvd3MgJiYgYWRkQXJyb3cobywgby5fLmFycm93cy5zdGFydFN0cmluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlbmRTdHJpbmdcIiBpbiBvLl8uYXJyb3dzICYmIGFkZEFycm93KG8sIG8uXy5hcnJvd3MuZW5kU3RyaW5nLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZ3JhZGllbnRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIChvLnR5cGUgPT0gXCJjaXJjbGVcIiB8fCBvLnR5cGUgPT0gXCJlbGxpcHNlXCIgfHwgU3RyKHZhbHVlKS5jaGFyQXQoKSAhPSBcInJcIikgJiYgYWRkR3JhZGllbnRGaWxsKG8sIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwib3BhY2l0eVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJzLmdyYWRpZW50ICYmICFhdHRyc1toYXNdKFwic3Ryb2tlLW9wYWNpdHlcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKG5vZGUsIHtcInN0cm9rZS1vcGFjaXR5XCI6IHZhbHVlID4gMSA/IHZhbHVlIC8gMTAwIDogdmFsdWV9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZhbGxcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImZpbGwtb3BhY2l0eVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJzLmdyYWRpZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JhZGllbnQgPSBSLl9nLmRvYy5nZXRFbGVtZW50QnlJZChub2RlLmdldEF0dHJpYnV0ZShcImZpbGxcIikucmVwbGFjZSgvXnVybFxcKCN8XFwpJC9nLCBFKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdyYWRpZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3BzID0gZ3JhZGllbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzdG9wXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHN0b3BzW3N0b3BzLmxlbmd0aCAtIDFdLCB7XCJzdG9wLW9wYWNpdHlcIjogdmFsdWV9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBhdHQgPT0gXCJmb250LXNpemVcIiAmJiAodmFsdWUgPSB0b0ludCh2YWx1ZSwgMTApICsgXCJweFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjc3NydWxlID0gYXR0LnJlcGxhY2UoLyhcXC0uKS9nLCBmdW5jdGlvbiAodykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3LnN1YnN0cmluZygxKS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLnN0eWxlW2Nzc3J1bGVdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBvLl8uZGlydHkgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoYXR0LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0dW5lVGV4dChvLCBwYXJhbXMpO1xuICAgICAgICBub2RlLnN0eWxlLnZpc2liaWxpdHkgPSB2aXM7XG4gICAgfSxcbiAgICBsZWFkaW5nID0gMS4yLFxuICAgIHR1bmVUZXh0ID0gZnVuY3Rpb24gKGVsLCBwYXJhbXMpIHtcbiAgICAgICAgaWYgKGVsLnR5cGUgIT0gXCJ0ZXh0XCIgfHwgIShwYXJhbXNbaGFzXShcInRleHRcIikgfHwgcGFyYW1zW2hhc10oXCJmb250XCIpIHx8IHBhcmFtc1toYXNdKFwiZm9udC1zaXplXCIpIHx8IHBhcmFtc1toYXNdKFwieFwiKSB8fCBwYXJhbXNbaGFzXShcInlcIikpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGEgPSBlbC5hdHRycyxcbiAgICAgICAgICAgIG5vZGUgPSBlbC5ub2RlLFxuICAgICAgICAgICAgZm9udFNpemUgPSBub2RlLmZpcnN0Q2hpbGQgPyB0b0ludChSLl9nLmRvYy5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKG5vZGUuZmlyc3RDaGlsZCwgRSkuZ2V0UHJvcGVydHlWYWx1ZShcImZvbnQtc2l6ZVwiKSwgMTApIDogMTA7XG5cbiAgICAgICAgaWYgKHBhcmFtc1toYXNdKFwidGV4dFwiKSkge1xuICAgICAgICAgICAgYS50ZXh0ID0gcGFyYW1zLnRleHQ7XG4gICAgICAgICAgICB3aGlsZSAobm9kZS5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5yZW1vdmVDaGlsZChub2RlLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRleHRzID0gU3RyKHBhcmFtcy50ZXh0KS5zcGxpdChcIlxcblwiKSxcbiAgICAgICAgICAgICAgICB0c3BhbnMgPSBbXSxcbiAgICAgICAgICAgICAgICB0c3BhbjtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRleHRzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0c3BhbiA9ICQoXCJ0c3BhblwiKTtcbiAgICAgICAgICAgICAgICBpICYmICQodHNwYW4sIHtkeTogZm9udFNpemUgKiBsZWFkaW5nLCB4OiBhLnh9KTtcbiAgICAgICAgICAgICAgICB0c3Bhbi5hcHBlbmRDaGlsZChSLl9nLmRvYy5jcmVhdGVUZXh0Tm9kZSh0ZXh0c1tpXSkpO1xuICAgICAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQodHNwYW4pO1xuICAgICAgICAgICAgICAgIHRzcGFuc1tpXSA9IHRzcGFuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdHNwYW5zID0gbm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRzcGFuXCIpO1xuICAgICAgICAgICAgZm9yIChpID0gMCwgaWkgPSB0c3BhbnMubGVuZ3RoOyBpIDwgaWk7IGkrKykgaWYgKGkpIHtcbiAgICAgICAgICAgICAgICAkKHRzcGFuc1tpXSwge2R5OiBmb250U2l6ZSAqIGxlYWRpbmcsIHg6IGEueH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKHRzcGFuc1swXSwge2R5OiAwfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgJChub2RlLCB7eDogYS54LCB5OiBhLnl9KTtcbiAgICAgICAgZWwuXy5kaXJ0eSA9IDE7XG4gICAgICAgIHZhciBiYiA9IGVsLl9nZXRCQm94KCksXG4gICAgICAgICAgICBkaWYgPSBhLnkgLSAoYmIueSArIGJiLmhlaWdodCAvIDIpO1xuICAgICAgICBkaWYgJiYgUi5pcyhkaWYsIFwiZmluaXRlXCIpICYmICQodHNwYW5zWzBdLCB7ZHk6IGRpZn0pO1xuICAgIH0sXG4gICAgZ2V0UmVhbE5vZGUgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICBpZiAobm9kZS5wYXJlbnROb2RlICYmIG5vZGUucGFyZW50Tm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiYVwiKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIEVsZW1lbnQgPSBmdW5jdGlvbiAobm9kZSwgc3ZnKSB7XG4gICAgICAgIHZhciBYID0gMCxcbiAgICAgICAgICAgIFkgPSAwO1xuICAgICAgICAvKlxcXG4gICAgICAgICAqIEVsZW1lbnQubm9kZVxuICAgICAgICAgWyBwcm9wZXJ0eSAob2JqZWN0KSBdXG4gICAgICAgICAqKlxuICAgICAgICAgKiBHaXZlcyB5b3UgYSByZWZlcmVuY2UgdG8gdGhlIERPTSBvYmplY3QsIHNvIHlvdSBjYW4gYXNzaWduIGV2ZW50IGhhbmRsZXJzIG9yIGp1c3QgbWVzcyBhcm91bmQuXG4gICAgICAgICAqKlxuICAgICAgICAgKiBOb3RlOiBEb27igJl0IG1lc3Mgd2l0aCBpdC5cbiAgICAgICAgID4gVXNhZ2VcbiAgICAgICAgIHwgLy8gZHJhdyBhIGNpcmNsZSBhdCBjb29yZGluYXRlIDEwLDEwIHdpdGggcmFkaXVzIG9mIDEwXG4gICAgICAgICB8IHZhciBjID0gcGFwZXIuY2lyY2xlKDEwLCAxMCwgMTApO1xuICAgICAgICAgfCBjLm5vZGUub25jbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgIHwgICAgIGMuYXR0cihcImZpbGxcIiwgXCJyZWRcIik7XG4gICAgICAgICB8IH07XG4gICAgICAgIFxcKi9cbiAgICAgICAgdGhpc1swXSA9IHRoaXMubm9kZSA9IG5vZGU7XG4gICAgICAgIC8qXFxcbiAgICAgICAgICogRWxlbWVudC5yYXBoYWVsXG4gICAgICAgICBbIHByb3BlcnR5IChvYmplY3QpIF1cbiAgICAgICAgICoqXG4gICAgICAgICAqIEludGVybmFsIHJlZmVyZW5jZSB0byBAUmFwaGFlbCBvYmplY3QuIEluIGNhc2UgaXQgaXMgbm90IGF2YWlsYWJsZS5cbiAgICAgICAgID4gVXNhZ2VcbiAgICAgICAgIHwgUmFwaGFlbC5lbC5yZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICB8ICAgICB2YXIgaHNiID0gdGhpcy5wYXBlci5yYXBoYWVsLnJnYjJoc2IodGhpcy5hdHRyKFwiZmlsbFwiKSk7XG4gICAgICAgICB8ICAgICBoc2IuaCA9IDE7XG4gICAgICAgICB8ICAgICB0aGlzLmF0dHIoe2ZpbGw6IHRoaXMucGFwZXIucmFwaGFlbC5oc2IycmdiKGhzYikuaGV4fSk7XG4gICAgICAgICB8IH1cbiAgICAgICAgXFwqL1xuICAgICAgICBub2RlLnJhcGhhZWwgPSB0cnVlO1xuICAgICAgICAvKlxcXG4gICAgICAgICAqIEVsZW1lbnQuaWRcbiAgICAgICAgIFsgcHJvcGVydHkgKG51bWJlcikgXVxuICAgICAgICAgKipcbiAgICAgICAgICogVW5pcXVlIGlkIG9mIHRoZSBlbGVtZW50LiBFc3BlY2lhbGx5IHVzZWZ1bCB3aGVuIHlvdSB3YW50IHRvIGxpc3RlbiB0byBldmVudHMgb2YgdGhlIGVsZW1lbnQsXG4gICAgICAgICAqIGJlY2F1c2UgYWxsIGV2ZW50cyBhcmUgZmlyZWQgaW4gZm9ybWF0IGA8bW9kdWxlPi48YWN0aW9uPi48aWQ+YC4gQWxzbyB1c2VmdWwgZm9yIEBQYXBlci5nZXRCeUlkIG1ldGhvZC5cbiAgICAgICAgXFwqL1xuICAgICAgICB0aGlzLmlkID0gZ3VpZCgpO1xuICAgICAgICBub2RlLnJhcGhhZWxpZCA9IHRoaXMuaWQ7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICogTWV0aG9kIHRoYXQgcmV0dXJucyBhIDUgbGV0dGVyL2RpZ2l0IGlkLCBlbm91Z2ggZm9yIDM2XjUgPSA2MDQ2NjE3NiBlbGVtZW50c1xuICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IGlkXG4gICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGd1aWQoKSB7XG4gICAgICAgICAgICByZXR1cm4gKFwiMDAwMFwiICsgKE1hdGgucmFuZG9tKCkqTWF0aC5wb3coMzYsNSkgPDwgMCkudG9TdHJpbmcoMzYpKS5zbGljZSgtNSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm1hdHJpeCA9IFIubWF0cml4KCk7XG4gICAgICAgIHRoaXMucmVhbFBhdGggPSBudWxsO1xuICAgICAgICAvKlxcXG4gICAgICAgICAqIEVsZW1lbnQucGFwZXJcbiAgICAgICAgIFsgcHJvcGVydHkgKG9iamVjdCkgXVxuICAgICAgICAgKipcbiAgICAgICAgICogSW50ZXJuYWwgcmVmZXJlbmNlIHRvIOKAnHBhcGVy4oCdIHdoZXJlIG9iamVjdCBkcmF3bi4gTWFpbmx5IGZvciB1c2UgaW4gcGx1Z2lucyBhbmQgZWxlbWVudCBleHRlbnNpb25zLlxuICAgICAgICAgPiBVc2FnZVxuICAgICAgICAgfCBSYXBoYWVsLmVsLmNyb3NzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgfCAgICAgdGhpcy5hdHRyKHtmaWxsOiBcInJlZFwifSk7XG4gICAgICAgICB8ICAgICB0aGlzLnBhcGVyLnBhdGgoXCJNMTAsMTBMNTAsNTBNNTAsMTBMMTAsNTBcIilcbiAgICAgICAgIHwgICAgICAgICAuYXR0cih7c3Ryb2tlOiBcInJlZFwifSk7XG4gICAgICAgICB8IH1cbiAgICAgICAgXFwqL1xuICAgICAgICB0aGlzLnBhcGVyID0gc3ZnO1xuICAgICAgICB0aGlzLmF0dHJzID0gdGhpcy5hdHRycyB8fCB7fTtcbiAgICAgICAgdGhpcy5fID0ge1xuICAgICAgICAgICAgdHJhbnNmb3JtOiBbXSxcbiAgICAgICAgICAgIHN4OiAxLFxuICAgICAgICAgICAgc3k6IDEsXG4gICAgICAgICAgICBkZWc6IDAsXG4gICAgICAgICAgICBkeDogMCxcbiAgICAgICAgICAgIGR5OiAwLFxuICAgICAgICAgICAgZGlydHk6IDFcbiAgICAgICAgfTtcbiAgICAgICAgIXN2Zy5ib3R0b20gJiYgKHN2Zy5ib3R0b20gPSB0aGlzKTtcbiAgICAgICAgLypcXFxuICAgICAgICAgKiBFbGVtZW50LnByZXZcbiAgICAgICAgIFsgcHJvcGVydHkgKG9iamVjdCkgXVxuICAgICAgICAgKipcbiAgICAgICAgICogUmVmZXJlbmNlIHRvIHRoZSBwcmV2aW91cyBlbGVtZW50IGluIHRoZSBoaWVyYXJjaHkuXG4gICAgICAgIFxcKi9cbiAgICAgICAgdGhpcy5wcmV2ID0gc3ZnLnRvcDtcbiAgICAgICAgc3ZnLnRvcCAmJiAoc3ZnLnRvcC5uZXh0ID0gdGhpcyk7XG4gICAgICAgIHN2Zy50b3AgPSB0aGlzO1xuICAgICAgICAvKlxcXG4gICAgICAgICAqIEVsZW1lbnQubmV4dFxuICAgICAgICAgWyBwcm9wZXJ0eSAob2JqZWN0KSBdXG4gICAgICAgICAqKlxuICAgICAgICAgKiBSZWZlcmVuY2UgdG8gdGhlIG5leHQgZWxlbWVudCBpbiB0aGUgaGllcmFyY2h5LlxuICAgICAgICBcXCovXG4gICAgICAgIHRoaXMubmV4dCA9IG51bGw7XG4gICAgfSxcbiAgICBlbHByb3RvID0gUi5lbDtcblxuICAgIEVsZW1lbnQucHJvdG90eXBlID0gZWxwcm90bztcbiAgICBlbHByb3RvLmNvbnN0cnVjdG9yID0gRWxlbWVudDtcblxuICAgIFIuX2VuZ2luZS5wYXRoID0gZnVuY3Rpb24gKHBhdGhTdHJpbmcsIFNWRykge1xuICAgICAgICB2YXIgZWwgPSAkKFwicGF0aFwiKTtcbiAgICAgICAgU1ZHLmNhbnZhcyAmJiBTVkcuY2FudmFzLmFwcGVuZENoaWxkKGVsKTtcbiAgICAgICAgdmFyIHAgPSBuZXcgRWxlbWVudChlbCwgU1ZHKTtcbiAgICAgICAgcC50eXBlID0gXCJwYXRoXCI7XG4gICAgICAgIHNldEZpbGxBbmRTdHJva2UocCwge1xuICAgICAgICAgICAgZmlsbDogXCJub25lXCIsXG4gICAgICAgICAgICBzdHJva2U6IFwiIzAwMFwiLFxuICAgICAgICAgICAgcGF0aDogcGF0aFN0cmluZ1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHA7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5yb3RhdGVcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIERlcHJlY2F0ZWQhIFVzZSBARWxlbWVudC50cmFuc2Zvcm0gaW5zdGVhZC5cbiAgICAgKiBBZGRzIHJvdGF0aW9uIGJ5IGdpdmVuIGFuZ2xlIGFyb3VuZCBnaXZlbiBwb2ludCB0byB0aGUgbGlzdCBvZlxuICAgICAqIHRyYW5zZm9ybWF0aW9ucyBvZiB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gZGVnIChudW1iZXIpIGFuZ2xlIGluIGRlZ3JlZXNcbiAgICAgLSBjeCAobnVtYmVyKSAjb3B0aW9uYWwgeCBjb29yZGluYXRlIG9mIHRoZSBjZW50cmUgb2Ygcm90YXRpb25cbiAgICAgLSBjeSAobnVtYmVyKSAjb3B0aW9uYWwgeSBjb29yZGluYXRlIG9mIHRoZSBjZW50cmUgb2Ygcm90YXRpb25cbiAgICAgKiBJZiBjeCAmIGN5IGFyZW7igJl0IHNwZWNpZmllZCBjZW50cmUgb2YgdGhlIHNoYXBlIGlzIHVzZWQgYXMgYSBwb2ludCBvZiByb3RhdGlvbi5cbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cbiAgICBlbHByb3RvLnJvdGF0ZSA9IGZ1bmN0aW9uIChkZWcsIGN4LCBjeSkge1xuICAgICAgICBpZiAodGhpcy5yZW1vdmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBkZWcgPSBTdHIoZGVnKS5zcGxpdChzZXBhcmF0b3IpO1xuICAgICAgICBpZiAoZGVnLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIGN4ID0gdG9GbG9hdChkZWdbMV0pO1xuICAgICAgICAgICAgY3kgPSB0b0Zsb2F0KGRlZ1syXSk7XG4gICAgICAgIH1cbiAgICAgICAgZGVnID0gdG9GbG9hdChkZWdbMF0pO1xuICAgICAgICAoY3kgPT0gbnVsbCkgJiYgKGN4ID0gY3kpO1xuICAgICAgICBpZiAoY3ggPT0gbnVsbCB8fCBjeSA9PSBudWxsKSB7XG4gICAgICAgICAgICB2YXIgYmJveCA9IHRoaXMuZ2V0QkJveCgxKTtcbiAgICAgICAgICAgIGN4ID0gYmJveC54ICsgYmJveC53aWR0aCAvIDI7XG4gICAgICAgICAgICBjeSA9IGJib3gueSArIGJib3guaGVpZ2h0IC8gMjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRyYW5zZm9ybSh0aGlzLl8udHJhbnNmb3JtLmNvbmNhdChbW1wiclwiLCBkZWcsIGN4LCBjeV1dKSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuc2NhbGVcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIERlcHJlY2F0ZWQhIFVzZSBARWxlbWVudC50cmFuc2Zvcm0gaW5zdGVhZC5cbiAgICAgKiBBZGRzIHNjYWxlIGJ5IGdpdmVuIGFtb3VudCByZWxhdGl2ZSB0byBnaXZlbiBwb2ludCB0byB0aGUgbGlzdCBvZlxuICAgICAqIHRyYW5zZm9ybWF0aW9ucyBvZiB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gc3ggKG51bWJlcikgaG9yaXNvbnRhbCBzY2FsZSBhbW91bnRcbiAgICAgLSBzeSAobnVtYmVyKSB2ZXJ0aWNhbCBzY2FsZSBhbW91bnRcbiAgICAgLSBjeCAobnVtYmVyKSAjb3B0aW9uYWwgeCBjb29yZGluYXRlIG9mIHRoZSBjZW50cmUgb2Ygc2NhbGVcbiAgICAgLSBjeSAobnVtYmVyKSAjb3B0aW9uYWwgeSBjb29yZGluYXRlIG9mIHRoZSBjZW50cmUgb2Ygc2NhbGVcbiAgICAgKiBJZiBjeCAmIGN5IGFyZW7igJl0IHNwZWNpZmllZCBjZW50cmUgb2YgdGhlIHNoYXBlIGlzIHVzZWQgaW5zdGVhZC5cbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cbiAgICBlbHByb3RvLnNjYWxlID0gZnVuY3Rpb24gKHN4LCBzeSwgY3gsIGN5KSB7XG4gICAgICAgIGlmICh0aGlzLnJlbW92ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHN4ID0gU3RyKHN4KS5zcGxpdChzZXBhcmF0b3IpO1xuICAgICAgICBpZiAoc3gubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgc3kgPSB0b0Zsb2F0KHN4WzFdKTtcbiAgICAgICAgICAgIGN4ID0gdG9GbG9hdChzeFsyXSk7XG4gICAgICAgICAgICBjeSA9IHRvRmxvYXQoc3hbM10pO1xuICAgICAgICB9XG4gICAgICAgIHN4ID0gdG9GbG9hdChzeFswXSk7XG4gICAgICAgIChzeSA9PSBudWxsKSAmJiAoc3kgPSBzeCk7XG4gICAgICAgIChjeSA9PSBudWxsKSAmJiAoY3ggPSBjeSk7XG4gICAgICAgIGlmIChjeCA9PSBudWxsIHx8IGN5ID09IG51bGwpIHtcbiAgICAgICAgICAgIHZhciBiYm94ID0gdGhpcy5nZXRCQm94KDEpO1xuICAgICAgICB9XG4gICAgICAgIGN4ID0gY3ggPT0gbnVsbCA/IGJib3gueCArIGJib3gud2lkdGggLyAyIDogY3g7XG4gICAgICAgIGN5ID0gY3kgPT0gbnVsbCA/IGJib3gueSArIGJib3guaGVpZ2h0IC8gMiA6IGN5O1xuICAgICAgICB0aGlzLnRyYW5zZm9ybSh0aGlzLl8udHJhbnNmb3JtLmNvbmNhdChbW1wic1wiLCBzeCwgc3ksIGN4LCBjeV1dKSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQudHJhbnNsYXRlXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBEZXByZWNhdGVkISBVc2UgQEVsZW1lbnQudHJhbnNmb3JtIGluc3RlYWQuXG4gICAgICogQWRkcyB0cmFuc2xhdGlvbiBieSBnaXZlbiBhbW91bnQgdG8gdGhlIGxpc3Qgb2YgdHJhbnNmb3JtYXRpb25zIG9mIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBkeCAobnVtYmVyKSBob3Jpc29udGFsIHNoaWZ0XG4gICAgIC0gZHkgKG51bWJlcikgdmVydGljYWwgc2hpZnRcbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cbiAgICBlbHByb3RvLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uIChkeCwgZHkpIHtcbiAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgZHggPSBTdHIoZHgpLnNwbGl0KHNlcGFyYXRvcik7XG4gICAgICAgIGlmIChkeC5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBkeSA9IHRvRmxvYXQoZHhbMV0pO1xuICAgICAgICB9XG4gICAgICAgIGR4ID0gdG9GbG9hdChkeFswXSkgfHwgMDtcbiAgICAgICAgZHkgPSArZHkgfHwgMDtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0odGhpcy5fLnRyYW5zZm9ybS5jb25jYXQoW1tcInRcIiwgZHgsIGR5XV0pKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC50cmFuc2Zvcm1cbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEFkZHMgdHJhbnNmb3JtYXRpb24gdG8gdGhlIGVsZW1lbnQgd2hpY2ggaXMgc2VwYXJhdGUgdG8gb3RoZXIgYXR0cmlidXRlcyxcbiAgICAgKiBpLmUuIHRyYW5zbGF0aW9uIGRvZXNu4oCZdCBjaGFuZ2UgYHhgIG9yIGB5YCBvZiB0aGUgcmVjdGFuZ2UuIFRoZSBmb3JtYXRcbiAgICAgKiBvZiB0cmFuc2Zvcm1hdGlvbiBzdHJpbmcgaXMgc2ltaWxhciB0byB0aGUgcGF0aCBzdHJpbmcgc3ludGF4OlxuICAgICB8IFwidDEwMCwxMDByMzAsMTAwLDEwMHMyLDIsMTAwLDEwMHI0NXMxLjVcIlxuICAgICAqIEVhY2ggbGV0dGVyIGlzIGEgY29tbWFuZC4gVGhlcmUgYXJlIGZvdXIgY29tbWFuZHM6IGB0YCBpcyBmb3IgdHJhbnNsYXRlLCBgcmAgaXMgZm9yIHJvdGF0ZSwgYHNgIGlzIGZvclxuICAgICAqIHNjYWxlIGFuZCBgbWAgaXMgZm9yIG1hdHJpeC5cbiAgICAgKlxuICAgICAqIFRoZXJlIGFyZSBhbHNvIGFsdGVybmF0aXZlIOKAnGFic29sdXRl4oCdIHRyYW5zbGF0aW9uLCByb3RhdGlvbiBhbmQgc2NhbGU6IGBUYCwgYFJgIGFuZCBgU2AuIFRoZXkgd2lsbCBub3QgdGFrZSBwcmV2aW91cyB0cmFuc2Zvcm1hdGlvbiBpbnRvIGFjY291bnQuIEZvciBleGFtcGxlLCBgLi4uVDEwMCwwYCB3aWxsIGFsd2F5cyBtb3ZlIGVsZW1lbnQgMTAwIHB4IGhvcmlzb250YWxseSwgd2hpbGUgYC4uLnQxMDAsMGAgY291bGQgbW92ZSBpdCB2ZXJ0aWNhbGx5IGlmIHRoZXJlIGlzIGByOTBgIGJlZm9yZS4gSnVzdCBjb21wYXJlIHJlc3VsdHMgb2YgYHI5MHQxMDAsMGAgYW5kIGByOTBUMTAwLDBgLlxuICAgICAqXG4gICAgICogU28sIHRoZSBleGFtcGxlIGxpbmUgYWJvdmUgY291bGQgYmUgcmVhZCBsaWtlIOKAnHRyYW5zbGF0ZSBieSAxMDAsIDEwMDsgcm90YXRlIDMwwrAgYXJvdW5kIDEwMCwgMTAwOyBzY2FsZSB0d2ljZSBhcm91bmQgMTAwLCAxMDA7XG4gICAgICogcm90YXRlIDQ1wrAgYXJvdW5kIGNlbnRyZTsgc2NhbGUgMS41IHRpbWVzIHJlbGF0aXZlIHRvIGNlbnRyZeKAnS4gQXMgeW91IGNhbiBzZWUgcm90YXRlIGFuZCBzY2FsZSBjb21tYW5kcyBoYXZlIG9yaWdpblxuICAgICAqIGNvb3JkaW5hdGVzIGFzIG9wdGlvbmFsIHBhcmFtZXRlcnMsIHRoZSBkZWZhdWx0IGlzIHRoZSBjZW50cmUgcG9pbnQgb2YgdGhlIGVsZW1lbnQuXG4gICAgICogTWF0cml4IGFjY2VwdHMgc2l4IHBhcmFtZXRlcnMuXG4gICAgID4gVXNhZ2VcbiAgICAgfCB2YXIgZWwgPSBwYXBlci5yZWN0KDEwLCAyMCwgMzAwLCAyMDApO1xuICAgICB8IC8vIHRyYW5zbGF0ZSAxMDAsIDEwMCwgcm90YXRlIDQ1wrAsIHRyYW5zbGF0ZSAtMTAwLCAwXG4gICAgIHwgZWwudHJhbnNmb3JtKFwidDEwMCwxMDByNDV0LTEwMCwwXCIpO1xuICAgICB8IC8vIGlmIHlvdSB3YW50IHlvdSBjYW4gYXBwZW5kIG9yIHByZXBlbmQgdHJhbnNmb3JtYXRpb25zXG4gICAgIHwgZWwudHJhbnNmb3JtKFwiLi4udDUwLDUwXCIpO1xuICAgICB8IGVsLnRyYW5zZm9ybShcInMyLi4uXCIpO1xuICAgICB8IC8vIG9yIGV2ZW4gd3JhcFxuICAgICB8IGVsLnRyYW5zZm9ybShcInQ1MCw1MC4uLnQtNTAtNTBcIik7XG4gICAgIHwgLy8gdG8gcmVzZXQgdHJhbnNmb3JtYXRpb24gY2FsbCBtZXRob2Qgd2l0aCBlbXB0eSBzdHJpbmdcbiAgICAgfCBlbC50cmFuc2Zvcm0oXCJcIik7XG4gICAgIHwgLy8gdG8gZ2V0IGN1cnJlbnQgdmFsdWUgY2FsbCBpdCB3aXRob3V0IHBhcmFtZXRlcnNcbiAgICAgfCBjb25zb2xlLmxvZyhlbC50cmFuc2Zvcm0oKSk7XG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIHRzdHIgKHN0cmluZykgI29wdGlvbmFsIHRyYW5zZm9ybWF0aW9uIHN0cmluZ1xuICAgICAqIElmIHRzdHIgaXNu4oCZdCBzcGVjaWZpZWRcbiAgICAgPSAoc3RyaW5nKSBjdXJyZW50IHRyYW5zZm9ybWF0aW9uIHN0cmluZ1xuICAgICAqIGVsc2VcbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cbiAgICBlbHByb3RvLnRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0c3RyKSB7XG4gICAgICAgIHZhciBfID0gdGhpcy5fO1xuICAgICAgICBpZiAodHN0ciA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gXy50cmFuc2Zvcm07XG4gICAgICAgIH1cbiAgICAgICAgUi5fZXh0cmFjdFRyYW5zZm9ybSh0aGlzLCB0c3RyKTtcblxuICAgICAgICB0aGlzLmNsaXAgJiYgJCh0aGlzLmNsaXAsIHt0cmFuc2Zvcm06IHRoaXMubWF0cml4LmludmVydCgpfSk7XG4gICAgICAgIHRoaXMucGF0dGVybiAmJiB1cGRhdGVQb3NpdGlvbih0aGlzKTtcbiAgICAgICAgdGhpcy5ub2RlICYmICQodGhpcy5ub2RlLCB7dHJhbnNmb3JtOiB0aGlzLm1hdHJpeH0pO1xuXG4gICAgICAgIGlmIChfLnN4ICE9IDEgfHwgXy5zeSAhPSAxKSB7XG4gICAgICAgICAgICB2YXIgc3cgPSB0aGlzLmF0dHJzW2hhc10oXCJzdHJva2Utd2lkdGhcIikgPyB0aGlzLmF0dHJzW1wic3Ryb2tlLXdpZHRoXCJdIDogMTtcbiAgICAgICAgICAgIHRoaXMuYXR0cih7XCJzdHJva2Utd2lkdGhcIjogc3d9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuaGlkZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogTWFrZXMgZWxlbWVudCBpbnZpc2libGUuIFNlZSBARWxlbWVudC5zaG93LlxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIGVscHJvdG8uaGlkZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYoIXRoaXMucmVtb3ZlZCkgdGhpcy5ub2RlLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5zaG93XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBNYWtlcyBlbGVtZW50IHZpc2libGUuIFNlZSBARWxlbWVudC5oaWRlLlxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIGVscHJvdG8uc2hvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYoIXRoaXMucmVtb3ZlZCkgdGhpcy5ub2RlLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnJlbW92ZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVtb3ZlcyBlbGVtZW50IGZyb20gdGhlIHBhcGVyLlxuICAgIFxcKi9cbiAgICBlbHByb3RvLnJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG5vZGUgPSBnZXRSZWFsTm9kZSh0aGlzLm5vZGUpO1xuICAgICAgICBpZiAodGhpcy5yZW1vdmVkIHx8ICFub2RlLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGFwZXIgPSB0aGlzLnBhcGVyO1xuICAgICAgICBwYXBlci5fX3NldF9fICYmIHBhcGVyLl9fc2V0X18uZXhjbHVkZSh0aGlzKTtcbiAgICAgICAgZXZlLnVuYmluZChcInJhcGhhZWwuKi4qLlwiICsgdGhpcy5pZCk7XG4gICAgICAgIGlmICh0aGlzLmdyYWRpZW50KSB7XG4gICAgICAgICAgICBwYXBlci5kZWZzLnJlbW92ZUNoaWxkKHRoaXMuZ3JhZGllbnQpO1xuICAgICAgICB9XG4gICAgICAgIFIuX3RlYXIodGhpcywgcGFwZXIpO1xuXG4gICAgICAgIG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcblxuICAgICAgICAvLyBSZW1vdmUgY3VzdG9tIGRhdGEgZm9yIGVsZW1lbnRcbiAgICAgICAgdGhpcy5yZW1vdmVEYXRhKCk7XG5cbiAgICAgICAgZm9yICh2YXIgaSBpbiB0aGlzKSB7XG4gICAgICAgICAgICB0aGlzW2ldID0gdHlwZW9mIHRoaXNbaV0gPT0gXCJmdW5jdGlvblwiID8gUi5fcmVtb3ZlZEZhY3RvcnkoaSkgOiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVtb3ZlZCA9IHRydWU7XG4gICAgfTtcbiAgICBlbHByb3RvLl9nZXRCQm94ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5ub2RlLnN0eWxlLmRpc3BsYXkgPT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgICAgICAgdmFyIGhpZGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjYW52YXNIaWRkZW4gPSBmYWxzZSxcbiAgICAgICAgICAgIGNvbnRhaW5lclN0eWxlO1xuICAgICAgICBpZiAodGhpcy5wYXBlci5jYW52YXMucGFyZW50RWxlbWVudCkge1xuICAgICAgICAgIGNvbnRhaW5lclN0eWxlID0gdGhpcy5wYXBlci5jYW52YXMucGFyZW50RWxlbWVudC5zdHlsZTtcbiAgICAgICAgfSAvL0lFMTArIGNhbid0IGZpbmQgcGFyZW50RWxlbWVudFxuICAgICAgICBlbHNlIGlmICh0aGlzLnBhcGVyLmNhbnZhcy5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgY29udGFpbmVyU3R5bGUgPSB0aGlzLnBhcGVyLmNhbnZhcy5wYXJlbnROb2RlLnN0eWxlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoY29udGFpbmVyU3R5bGUgJiYgY29udGFpbmVyU3R5bGUuZGlzcGxheSA9PSBcIm5vbmVcIikge1xuICAgICAgICAgIGNhbnZhc0hpZGRlbiA9IHRydWU7XG4gICAgICAgICAgY29udGFpbmVyU3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGJib3ggPSB7fTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGJib3ggPSB0aGlzLm5vZGUuZ2V0QkJveCgpO1xuICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgIC8vIEZpcmVmb3ggMy4wLngsIDI1LjAuMSAocHJvYmFibHkgbW9yZSB2ZXJzaW9ucyBhZmZlY3RlZCkgcGxheSBiYWRseSBoZXJlIC0gcG9zc2libGUgZml4XG4gICAgICAgICAgICBiYm94ID0ge1xuICAgICAgICAgICAgICAgIHg6IHRoaXMubm9kZS5jbGllbnRMZWZ0LFxuICAgICAgICAgICAgICAgIHk6IHRoaXMubm9kZS5jbGllbnRUb3AsXG4gICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMubm9kZS5jbGllbnRXaWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMubm9kZS5jbGllbnRIZWlnaHRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIGJib3ggPSBiYm94IHx8IHt9O1xuICAgICAgICAgICAgaWYoY2FudmFzSGlkZGVuKXtcbiAgICAgICAgICAgICAgY29udGFpbmVyU3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGhpZGUgJiYgdGhpcy5oaWRlKCk7XG4gICAgICAgIHJldHVybiBiYm94O1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuYXR0clxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogU2V0cyB0aGUgYXR0cmlidXRlcyBvZiB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gYXR0ck5hbWUgKHN0cmluZykgYXR0cmlidXRl4oCZcyBuYW1lXG4gICAgIC0gdmFsdWUgKHN0cmluZykgdmFsdWVcbiAgICAgKiBvclxuICAgICAtIHBhcmFtcyAob2JqZWN0KSBvYmplY3Qgb2YgbmFtZS92YWx1ZSBwYWlyc1xuICAgICAqIG9yXG4gICAgIC0gYXR0ck5hbWUgKHN0cmluZykgYXR0cmlidXRl4oCZcyBuYW1lXG4gICAgICogb3JcbiAgICAgLSBhdHRyTmFtZXMgKGFycmF5KSBpbiB0aGlzIGNhc2UgbWV0aG9kIHJldHVybnMgYXJyYXkgb2YgY3VycmVudCB2YWx1ZXMgZm9yIGdpdmVuIGF0dHJpYnV0ZSBuYW1lc1xuICAgICA9IChvYmplY3QpIEBFbGVtZW50IGlmIGF0dHJzTmFtZSAmIHZhbHVlIG9yIHBhcmFtcyBhcmUgcGFzc2VkIGluLlxuICAgICA9ICguLi4pIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGUgaWYgb25seSBhdHRyc05hbWUgaXMgcGFzc2VkIGluLlxuICAgICA9IChhcnJheSkgYXJyYXkgb2YgdmFsdWVzIG9mIHRoZSBhdHRyaWJ1dGUgaWYgYXR0cnNOYW1lcyBpcyBwYXNzZWQgaW4uXG4gICAgID0gKG9iamVjdCkgb2JqZWN0IG9mIGF0dHJpYnV0ZXMgaWYgbm90aGluZyBpcyBwYXNzZWQgaW4uXG4gICAgID4gUG9zc2libGUgcGFyYW1ldGVyc1xuICAgICAjIDxwPlBsZWFzZSByZWZlciB0byB0aGUgPGEgaHJlZj1cImh0dHA6Ly93d3cudzMub3JnL1RSL1NWRy9cIiB0aXRsZT1cIlRoZSBXM0MgUmVjb21tZW5kYXRpb24gZm9yIHRoZSBTVkcgbGFuZ3VhZ2UgZGVzY3JpYmVzIHRoZXNlIHByb3BlcnRpZXMgaW4gZGV0YWlsLlwiPlNWRyBzcGVjaWZpY2F0aW9uPC9hPiBmb3IgYW4gZXhwbGFuYXRpb24gb2YgdGhlc2UgcGFyYW1ldGVycy48L3A+XG4gICAgIG8gYXJyb3ctZW5kIChzdHJpbmcpIGFycm93aGVhZCBvbiB0aGUgZW5kIG9mIHRoZSBwYXRoLiBUaGUgZm9ybWF0IGZvciBzdHJpbmcgaXMgYDx0eXBlPlstPHdpZHRoPlstPGxlbmd0aD5dXWAuIFBvc3NpYmxlIHR5cGVzOiBgY2xhc3NpY2AsIGBibG9ja2AsIGBvcGVuYCwgYG92YWxgLCBgZGlhbW9uZGAsIGBub25lYCwgd2lkdGg6IGB3aWRlYCwgYG5hcnJvd2AsIGBtZWRpdW1gLCBsZW5ndGg6IGBsb25nYCwgYHNob3J0YCwgYG1pZGl1bWAuXG4gICAgIG8gY2xpcC1yZWN0IChzdHJpbmcpIGNvbW1hIG9yIHNwYWNlIHNlcGFyYXRlZCB2YWx1ZXM6IHgsIHksIHdpZHRoIGFuZCBoZWlnaHRcbiAgICAgbyBjdXJzb3IgKHN0cmluZykgQ1NTIHR5cGUgb2YgdGhlIGN1cnNvclxuICAgICBvIGN4IChudW1iZXIpIHRoZSB4LWF4aXMgY29vcmRpbmF0ZSBvZiB0aGUgY2VudGVyIG9mIHRoZSBjaXJjbGUsIG9yIGVsbGlwc2VcbiAgICAgbyBjeSAobnVtYmVyKSB0aGUgeS1heGlzIGNvb3JkaW5hdGUgb2YgdGhlIGNlbnRlciBvZiB0aGUgY2lyY2xlLCBvciBlbGxpcHNlXG4gICAgIG8gZmlsbCAoc3RyaW5nKSBjb2xvdXIsIGdyYWRpZW50IG9yIGltYWdlXG4gICAgIG8gZmlsbC1vcGFjaXR5IChudW1iZXIpXG4gICAgIG8gZm9udCAoc3RyaW5nKVxuICAgICBvIGZvbnQtZmFtaWx5IChzdHJpbmcpXG4gICAgIG8gZm9udC1zaXplIChudW1iZXIpIGZvbnQgc2l6ZSBpbiBwaXhlbHNcbiAgICAgbyBmb250LXdlaWdodCAoc3RyaW5nKVxuICAgICBvIGhlaWdodCAobnVtYmVyKVxuICAgICBvIGhyZWYgKHN0cmluZykgVVJMLCBpZiBzcGVjaWZpZWQgZWxlbWVudCBiZWhhdmVzIGFzIGh5cGVybGlua1xuICAgICBvIG9wYWNpdHkgKG51bWJlcilcbiAgICAgbyBwYXRoIChzdHJpbmcpIFNWRyBwYXRoIHN0cmluZyBmb3JtYXRcbiAgICAgbyByIChudW1iZXIpIHJhZGl1cyBvZiB0aGUgY2lyY2xlLCBlbGxpcHNlIG9yIHJvdW5kZWQgY29ybmVyIG9uIHRoZSByZWN0XG4gICAgIG8gcnggKG51bWJlcikgaG9yaXNvbnRhbCByYWRpdXMgb2YgdGhlIGVsbGlwc2VcbiAgICAgbyByeSAobnVtYmVyKSB2ZXJ0aWNhbCByYWRpdXMgb2YgdGhlIGVsbGlwc2VcbiAgICAgbyBzcmMgKHN0cmluZykgaW1hZ2UgVVJMLCBvbmx5IHdvcmtzIGZvciBARWxlbWVudC5pbWFnZSBlbGVtZW50XG4gICAgIG8gc3Ryb2tlIChzdHJpbmcpIHN0cm9rZSBjb2xvdXJcbiAgICAgbyBzdHJva2UtZGFzaGFycmF5IChzdHJpbmcpIFvigJzigJ0sIOKAnG5vbmXigJ0sIOKAnGAtYOKAnSwg4oCcYC5g4oCdLCDigJxgLS5g4oCdLCDigJxgLS4uYOKAnSwg4oCcYC4gYOKAnSwg4oCcYC0gYOKAnSwg4oCcYC0tYOKAnSwg4oCcYC0gLmDigJ0sIOKAnGAtLS5g4oCdLCDigJxgLS0uLmDigJ1dXG4gICAgIG8gc3Ryb2tlLWxpbmVjYXAgKHN0cmluZykgW+KAnGBidXR0YOKAnSwg4oCcYHNxdWFyZWDigJ0sIOKAnGByb3VuZGDigJ1dXG4gICAgIG8gc3Ryb2tlLWxpbmVqb2luIChzdHJpbmcpIFvigJxgYmV2ZWxg4oCdLCDigJxgcm91bmRg4oCdLCDigJxgbWl0ZXJg4oCdXVxuICAgICBvIHN0cm9rZS1taXRlcmxpbWl0IChudW1iZXIpXG4gICAgIG8gc3Ryb2tlLW9wYWNpdHkgKG51bWJlcilcbiAgICAgbyBzdHJva2Utd2lkdGggKG51bWJlcikgc3Ryb2tlIHdpZHRoIGluIHBpeGVscywgZGVmYXVsdCBpcyAnMSdcbiAgICAgbyB0YXJnZXQgKHN0cmluZykgdXNlZCB3aXRoIGhyZWZcbiAgICAgbyB0ZXh0IChzdHJpbmcpIGNvbnRlbnRzIG9mIHRoZSB0ZXh0IGVsZW1lbnQuIFVzZSBgXFxuYCBmb3IgbXVsdGlsaW5lIHRleHRcbiAgICAgbyB0ZXh0LWFuY2hvciAoc3RyaW5nKSBb4oCcYHN0YXJ0YOKAnSwg4oCcYG1pZGRsZWDigJ0sIOKAnGBlbmRg4oCdXSwgZGVmYXVsdCBpcyDigJxgbWlkZGxlYOKAnVxuICAgICBvIHRpdGxlIChzdHJpbmcpIHdpbGwgY3JlYXRlIHRvb2x0aXAgd2l0aCBhIGdpdmVuIHRleHRcbiAgICAgbyB0cmFuc2Zvcm0gKHN0cmluZykgc2VlIEBFbGVtZW50LnRyYW5zZm9ybVxuICAgICBvIHdpZHRoIChudW1iZXIpXG4gICAgIG8geCAobnVtYmVyKVxuICAgICBvIHkgKG51bWJlcilcbiAgICAgPiBHcmFkaWVudHNcbiAgICAgKiBMaW5lYXIgZ3JhZGllbnQgZm9ybWF0OiDigJxg4oC5YW5nbGXigLot4oC5Y29sb3Vy4oC6Wy3igLljb2xvdXLigLpbOuKAuW9mZnNldOKAul1dKi3igLljb2xvdXLigLpg4oCdLCBleGFtcGxlOiDigJxgOTAtI2ZmZi0jMDAwYOKAnSDigJMgOTDCsFxuICAgICAqIGdyYWRpZW50IGZyb20gd2hpdGUgdG8gYmxhY2sgb3Ig4oCcYDAtI2ZmZi0jZjAwOjIwLSMwMDBg4oCdIOKAkyAwwrAgZ3JhZGllbnQgZnJvbSB3aGl0ZSB2aWEgcmVkIChhdCAyMCUpIHRvIGJsYWNrLlxuICAgICAqXG4gICAgICogcmFkaWFsIGdyYWRpZW50OiDigJxgclso4oC5ZnjigLosIOKAuWZ54oC6KV3igLljb2xvdXLigLpbLeKAuWNvbG91cuKAuls64oC5b2Zmc2V04oC6XV0qLeKAuWNvbG91cuKAumDigJ0sIGV4YW1wbGU6IOKAnGByI2ZmZi0jMDAwYOKAnSDigJNcbiAgICAgKiBncmFkaWVudCBmcm9tIHdoaXRlIHRvIGJsYWNrIG9yIOKAnGByKDAuMjUsIDAuNzUpI2ZmZi0jMDAwYOKAnSDigJMgZ3JhZGllbnQgZnJvbSB3aGl0ZSB0byBibGFjayB3aXRoIGZvY3VzIHBvaW50XG4gICAgICogYXQgMC4yNSwgMC43NS4gRm9jdXMgcG9pbnQgY29vcmRpbmF0ZXMgYXJlIGluIDAuLjEgcmFuZ2UuIFJhZGlhbCBncmFkaWVudHMgY2FuIG9ubHkgYmUgYXBwbGllZCB0byBjaXJjbGVzIGFuZCBlbGxpcHNlcy5cbiAgICAgPiBQYXRoIFN0cmluZ1xuICAgICAjIDxwPlBsZWFzZSByZWZlciB0byA8YSBocmVmPVwiaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHL3BhdGhzLmh0bWwjUGF0aERhdGFcIiB0aXRsZT1cIkRldGFpbHMgb2YgYSBwYXRo4oCZcyBkYXRhIGF0dHJpYnV0ZeKAmXMgZm9ybWF0IGFyZSBkZXNjcmliZWQgaW4gdGhlIFNWRyBzcGVjaWZpY2F0aW9uLlwiPlNWRyBkb2N1bWVudGF0aW9uIHJlZ2FyZGluZyBwYXRoIHN0cmluZzwvYT4uIFJhcGhhw6tsIGZ1bGx5IHN1cHBvcnRzIGl0LjwvcD5cbiAgICAgPiBDb2xvdXIgUGFyc2luZ1xuICAgICAjIDx1bD5cbiAgICAgIyAgICAgPGxpPkNvbG91ciBuYW1lICjigJw8Y29kZT5yZWQ8L2NvZGU+4oCdLCDigJw8Y29kZT5ncmVlbjwvY29kZT7igJ0sIOKAnDxjb2RlPmNvcm5mbG93ZXJibHVlPC9jb2RlPuKAnSwgZXRjKTwvbGk+XG4gICAgICMgICAgIDxsaT4j4oCi4oCi4oCiIOKAlCBzaG9ydGVuZWQgSFRNTCBjb2xvdXI6ICjigJw8Y29kZT4jMDAwPC9jb2RlPuKAnSwg4oCcPGNvZGU+I2ZjMDwvY29kZT7igJ0sIGV0Yyk8L2xpPlxuICAgICAjICAgICA8bGk+I+KAouKAouKAouKAouKAouKAoiDigJQgZnVsbCBsZW5ndGggSFRNTCBjb2xvdXI6ICjigJw8Y29kZT4jMDAwMDAwPC9jb2RlPuKAnSwg4oCcPGNvZGU+I2JkMjMwMDwvY29kZT7igJ0pPC9saT5cbiAgICAgIyAgICAgPGxpPnJnYijigKLigKLigKIsIOKAouKAouKAoiwg4oCi4oCi4oCiKSDigJQgcmVkLCBncmVlbiBhbmQgYmx1ZSBjaGFubmVsc+KAmSB2YWx1ZXM6ICjigJw8Y29kZT5yZ2IoMjAwLCZuYnNwOzEwMCwmbmJzcDswKTwvY29kZT7igJ0pPC9saT5cbiAgICAgIyAgICAgPGxpPnJnYijigKLigKLigKIlLCDigKLigKLigKIlLCDigKLigKLigKIlKSDigJQgc2FtZSBhcyBhYm92ZSwgYnV0IGluICU6ICjigJw8Y29kZT5yZ2IoMTAwJSwmbmJzcDsxNzUlLCZuYnNwOzAlKTwvY29kZT7igJ0pPC9saT5cbiAgICAgIyAgICAgPGxpPnJnYmEo4oCi4oCi4oCiLCDigKLigKLigKIsIOKAouKAouKAoiwg4oCi4oCi4oCiKSDigJQgcmVkLCBncmVlbiBhbmQgYmx1ZSBjaGFubmVsc+KAmSB2YWx1ZXM6ICjigJw8Y29kZT5yZ2JhKDIwMCwmbmJzcDsxMDAsJm5ic3A7MCwgLjUpPC9jb2RlPuKAnSk8L2xpPlxuICAgICAjICAgICA8bGk+cmdiYSjigKLigKLigKIlLCDigKLigKLigKIlLCDigKLigKLigKIlLCDigKLigKLigKIlKSDigJQgc2FtZSBhcyBhYm92ZSwgYnV0IGluICU6ICjigJw8Y29kZT5yZ2JhKDEwMCUsJm5ic3A7MTc1JSwmbmJzcDswJSwgNTAlKTwvY29kZT7igJ0pPC9saT5cbiAgICAgIyAgICAgPGxpPmhzYijigKLigKLigKIsIOKAouKAouKAoiwg4oCi4oCi4oCiKSDigJQgaHVlLCBzYXR1cmF0aW9uIGFuZCBicmlnaHRuZXNzIHZhbHVlczogKOKAnDxjb2RlPmhzYigwLjUsJm5ic3A7MC4yNSwmbmJzcDsxKTwvY29kZT7igJ0pPC9saT5cbiAgICAgIyAgICAgPGxpPmhzYijigKLigKLigKIlLCDigKLigKLigKIlLCDigKLigKLigKIlKSDigJQgc2FtZSBhcyBhYm92ZSwgYnV0IGluICU8L2xpPlxuICAgICAjICAgICA8bGk+aHNiYSjigKLigKLigKIsIOKAouKAouKAoiwg4oCi4oCi4oCiLCDigKLigKLigKIpIOKAlCBzYW1lIGFzIGFib3ZlLCBidXQgd2l0aCBvcGFjaXR5PC9saT5cbiAgICAgIyAgICAgPGxpPmhzbCjigKLigKLigKIsIOKAouKAouKAoiwg4oCi4oCi4oCiKSDigJQgYWxtb3N0IHRoZSBzYW1lIGFzIGhzYiwgc2VlIDxhIGhyZWY9XCJodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0hTTF9hbmRfSFNWXCIgdGl0bGU9XCJIU0wgYW5kIEhTViAtIFdpa2lwZWRpYSwgdGhlIGZyZWUgZW5jeWNsb3BlZGlhXCI+V2lraXBlZGlhIHBhZ2U8L2E+PC9saT5cbiAgICAgIyAgICAgPGxpPmhzbCjigKLigKLigKIlLCDigKLigKLigKIlLCDigKLigKLigKIlKSDigJQgc2FtZSBhcyBhYm92ZSwgYnV0IGluICU8L2xpPlxuICAgICAjICAgICA8bGk+aHNsYSjigKLigKLigKIsIOKAouKAouKAoiwg4oCi4oCi4oCiLCDigKLigKLigKIpIOKAlCBzYW1lIGFzIGFib3ZlLCBidXQgd2l0aCBvcGFjaXR5PC9saT5cbiAgICAgIyAgICAgPGxpPk9wdGlvbmFsbHkgZm9yIGhzYiBhbmQgaHNsIHlvdSBjb3VsZCBzcGVjaWZ5IGh1ZSBhcyBhIGRlZ3JlZTog4oCcPGNvZGU+aHNsKDI0MGRlZywmbmJzcDsxLCZuYnNwOy41KTwvY29kZT7igJ0gb3IsIGlmIHlvdSB3YW50IHRvIGdvIGZhbmN5LCDigJw8Y29kZT5oc2woMjQwwrAsJm5ic3A7MSwmbmJzcDsuNSk8L2NvZGU+4oCdPC9saT5cbiAgICAgIyA8L3VsPlxuICAgIFxcKi9cbiAgICBlbHByb3RvLmF0dHIgPSBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5hbWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyIHJlcyA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgYSBpbiB0aGlzLmF0dHJzKSBpZiAodGhpcy5hdHRyc1toYXNdKGEpKSB7XG4gICAgICAgICAgICAgICAgcmVzW2FdID0gdGhpcy5hdHRyc1thXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcy5ncmFkaWVudCAmJiByZXMuZmlsbCA9PSBcIm5vbmVcIiAmJiAocmVzLmZpbGwgPSByZXMuZ3JhZGllbnQpICYmIGRlbGV0ZSByZXMuZ3JhZGllbnQ7XG4gICAgICAgICAgICByZXMudHJhbnNmb3JtID0gdGhpcy5fLnRyYW5zZm9ybTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwgJiYgUi5pcyhuYW1lLCBcInN0cmluZ1wiKSkge1xuICAgICAgICAgICAgaWYgKG5hbWUgPT0gXCJmaWxsXCIgJiYgdGhpcy5hdHRycy5maWxsID09IFwibm9uZVwiICYmIHRoaXMuYXR0cnMuZ3JhZGllbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hdHRycy5ncmFkaWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuYW1lID09IFwidHJhbnNmb3JtXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fLnRyYW5zZm9ybTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBuYW1lcyA9IG5hbWUuc3BsaXQoc2VwYXJhdG9yKSxcbiAgICAgICAgICAgICAgICBvdXQgPSB7fTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IG5hbWVzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICBuYW1lID0gbmFtZXNbaV07XG4gICAgICAgICAgICAgICAgaWYgKG5hbWUgaW4gdGhpcy5hdHRycykge1xuICAgICAgICAgICAgICAgICAgICBvdXRbbmFtZV0gPSB0aGlzLmF0dHJzW25hbWVdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoUi5pcyh0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNbbmFtZV0sIFwiZnVuY3Rpb25cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0W25hbWVdID0gdGhpcy5wYXBlci5jdXN0b21BdHRyaWJ1dGVzW25hbWVdLmRlZjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvdXRbbmFtZV0gPSBSLl9hdmFpbGFibGVBdHRyc1tuYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaWkgLSAxID8gb3V0IDogb3V0W25hbWVzWzBdXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCAmJiBSLmlzKG5hbWUsIFwiYXJyYXlcIikpIHtcbiAgICAgICAgICAgIG91dCA9IHt9O1xuICAgICAgICAgICAgZm9yIChpID0gMCwgaWkgPSBuYW1lLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICBvdXRbbmFtZVtpXV0gPSB0aGlzLmF0dHIobmFtZVtpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0ge307XG4gICAgICAgICAgICBwYXJhbXNbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChuYW1lICE9IG51bGwgJiYgUi5pcyhuYW1lLCBcIm9iamVjdFwiKSkge1xuICAgICAgICAgICAgcGFyYW1zID0gbmFtZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gcGFyYW1zKSB7XG4gICAgICAgICAgICBldmUoXCJyYXBoYWVsLmF0dHIuXCIgKyBrZXkgKyBcIi5cIiArIHRoaXMuaWQsIHRoaXMsIHBhcmFtc1trZXldKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGtleSBpbiB0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXMpIGlmICh0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNbaGFzXShrZXkpICYmIHBhcmFtc1toYXNdKGtleSkgJiYgUi5pcyh0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNba2V5XSwgXCJmdW5jdGlvblwiKSkge1xuICAgICAgICAgICAgdmFyIHBhciA9IHRoaXMucGFwZXIuY3VzdG9tQXR0cmlidXRlc1trZXldLmFwcGx5KHRoaXMsIFtdLmNvbmNhdChwYXJhbXNba2V5XSkpO1xuICAgICAgICAgICAgdGhpcy5hdHRyc1trZXldID0gcGFyYW1zW2tleV07XG4gICAgICAgICAgICBmb3IgKHZhciBzdWJrZXkgaW4gcGFyKSBpZiAocGFyW2hhc10oc3Via2V5KSkge1xuICAgICAgICAgICAgICAgIHBhcmFtc1tzdWJrZXldID0gcGFyW3N1YmtleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2V0RmlsbEFuZFN0cm9rZSh0aGlzLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnRvRnJvbnRcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIE1vdmVzIHRoZSBlbGVtZW50IHNvIGl0IGlzIHRoZSBjbG9zZXN0IHRvIHRoZSB2aWV3ZXLigJlzIGV5ZXMsIG9uIHRvcCBvZiBvdGhlciBlbGVtZW50cy5cbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cbiAgICBlbHByb3RvLnRvRnJvbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbW92ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBub2RlID0gZ2V0UmVhbE5vZGUodGhpcy5ub2RlKTtcbiAgICAgICAgbm9kZS5wYXJlbnROb2RlLmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgICB2YXIgc3ZnID0gdGhpcy5wYXBlcjtcbiAgICAgICAgc3ZnLnRvcCAhPSB0aGlzICYmIFIuX3RvZnJvbnQodGhpcywgc3ZnKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC50b0JhY2tcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIE1vdmVzIHRoZSBlbGVtZW50IHNvIGl0IGlzIHRoZSBmdXJ0aGVzdCBmcm9tIHRoZSB2aWV3ZXLigJlzIGV5ZXMsIGJlaGluZCBvdGhlciBlbGVtZW50cy5cbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cbiAgICBlbHByb3RvLnRvQmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5vZGUgPSBnZXRSZWFsTm9kZSh0aGlzLm5vZGUpO1xuICAgICAgICB2YXIgcGFyZW50Tm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgcGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgcGFyZW50Tm9kZS5maXJzdENoaWxkKTtcbiAgICAgICAgUi5fdG9iYWNrKHRoaXMsIHRoaXMucGFwZXIpO1xuICAgICAgICB2YXIgc3ZnID0gdGhpcy5wYXBlcjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5pbnNlcnRBZnRlclxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogSW5zZXJ0cyBjdXJyZW50IG9iamVjdCBhZnRlciB0aGUgZ2l2ZW4gb25lLlxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIGVscHJvdG8uaW5zZXJ0QWZ0ZXIgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICBpZiAodGhpcy5yZW1vdmVkIHx8ICFlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBub2RlID0gZ2V0UmVhbE5vZGUodGhpcy5ub2RlKTtcbiAgICAgICAgdmFyIGFmdGVyTm9kZSA9IGdldFJlYWxOb2RlKGVsZW1lbnQubm9kZSB8fCBlbGVtZW50W2VsZW1lbnQubGVuZ3RoIC0gMV0ubm9kZSk7XG4gICAgICAgIGlmIChhZnRlck5vZGUubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgICAgIGFmdGVyTm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBhZnRlck5vZGUubmV4dFNpYmxpbmcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYWZ0ZXJOb2RlLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgUi5faW5zZXJ0YWZ0ZXIodGhpcywgZWxlbWVudCwgdGhpcy5wYXBlcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuaW5zZXJ0QmVmb3JlXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBJbnNlcnRzIGN1cnJlbnQgb2JqZWN0IGJlZm9yZSB0aGUgZ2l2ZW4gb25lLlxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIGVscHJvdG8uaW5zZXJ0QmVmb3JlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCB8fCAhZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbm9kZSA9IGdldFJlYWxOb2RlKHRoaXMubm9kZSk7XG4gICAgICAgIHZhciBiZWZvcmVOb2RlID0gZ2V0UmVhbE5vZGUoZWxlbWVudC5ub2RlIHx8IGVsZW1lbnRbMF0ubm9kZSk7XG4gICAgICAgIGJlZm9yZU5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgYmVmb3JlTm9kZSk7XG4gICAgICAgIFIuX2luc2VydGJlZm9yZSh0aGlzLCBlbGVtZW50LCB0aGlzLnBhcGVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBlbHByb3RvLmJsdXIgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICAgICAgICAvLyBFeHBlcmltZW50YWwuIE5vIFNhZmFyaSBzdXBwb3J0LiBVc2UgaXQgb24geW91ciBvd24gcmlzay5cbiAgICAgICAgdmFyIHQgPSB0aGlzO1xuICAgICAgICBpZiAoK3NpemUgIT09IDApIHtcbiAgICAgICAgICAgIHZhciBmbHRyID0gJChcImZpbHRlclwiKSxcbiAgICAgICAgICAgICAgICBibHVyID0gJChcImZlR2F1c3NpYW5CbHVyXCIpO1xuICAgICAgICAgICAgdC5hdHRycy5ibHVyID0gc2l6ZTtcbiAgICAgICAgICAgIGZsdHIuaWQgPSBSLmNyZWF0ZVVVSUQoKTtcbiAgICAgICAgICAgICQoYmx1ciwge3N0ZERldmlhdGlvbjogK3NpemUgfHwgMS41fSk7XG4gICAgICAgICAgICBmbHRyLmFwcGVuZENoaWxkKGJsdXIpO1xuICAgICAgICAgICAgdC5wYXBlci5kZWZzLmFwcGVuZENoaWxkKGZsdHIpO1xuICAgICAgICAgICAgdC5fYmx1ciA9IGZsdHI7XG4gICAgICAgICAgICAkKHQubm9kZSwge2ZpbHRlcjogXCJ1cmwoI1wiICsgZmx0ci5pZCArIFwiKVwifSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodC5fYmx1cikge1xuICAgICAgICAgICAgICAgIHQuX2JsdXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0Ll9ibHVyKTtcbiAgICAgICAgICAgICAgICBkZWxldGUgdC5fYmx1cjtcbiAgICAgICAgICAgICAgICBkZWxldGUgdC5hdHRycy5ibHVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdC5ub2RlLnJlbW92ZUF0dHJpYnV0ZShcImZpbHRlclwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xuICAgIFIuX2VuZ2luZS5jaXJjbGUgPSBmdW5jdGlvbiAoc3ZnLCB4LCB5LCByKSB7XG4gICAgICAgIHZhciBlbCA9ICQoXCJjaXJjbGVcIik7XG4gICAgICAgIHN2Zy5jYW52YXMgJiYgc3ZnLmNhbnZhcy5hcHBlbmRDaGlsZChlbCk7XG4gICAgICAgIHZhciByZXMgPSBuZXcgRWxlbWVudChlbCwgc3ZnKTtcbiAgICAgICAgcmVzLmF0dHJzID0ge2N4OiB4LCBjeTogeSwgcjogciwgZmlsbDogXCJub25lXCIsIHN0cm9rZTogXCIjMDAwXCJ9O1xuICAgICAgICByZXMudHlwZSA9IFwiY2lyY2xlXCI7XG4gICAgICAgICQoZWwsIHJlcy5hdHRycyk7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgICBSLl9lbmdpbmUucmVjdCA9IGZ1bmN0aW9uIChzdmcsIHgsIHksIHcsIGgsIHIpIHtcbiAgICAgICAgdmFyIGVsID0gJChcInJlY3RcIik7XG4gICAgICAgIHN2Zy5jYW52YXMgJiYgc3ZnLmNhbnZhcy5hcHBlbmRDaGlsZChlbCk7XG4gICAgICAgIHZhciByZXMgPSBuZXcgRWxlbWVudChlbCwgc3ZnKTtcbiAgICAgICAgcmVzLmF0dHJzID0ge3g6IHgsIHk6IHksIHdpZHRoOiB3LCBoZWlnaHQ6IGgsIHJ4OiByIHx8IDAsIHJ5OiByIHx8IDAsIGZpbGw6IFwibm9uZVwiLCBzdHJva2U6IFwiIzAwMFwifTtcbiAgICAgICAgcmVzLnR5cGUgPSBcInJlY3RcIjtcbiAgICAgICAgJChlbCwgcmVzLmF0dHJzKTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuICAgIFIuX2VuZ2luZS5lbGxpcHNlID0gZnVuY3Rpb24gKHN2ZywgeCwgeSwgcngsIHJ5KSB7XG4gICAgICAgIHZhciBlbCA9ICQoXCJlbGxpcHNlXCIpO1xuICAgICAgICBzdmcuY2FudmFzICYmIHN2Zy5jYW52YXMuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICB2YXIgcmVzID0gbmV3IEVsZW1lbnQoZWwsIHN2Zyk7XG4gICAgICAgIHJlcy5hdHRycyA9IHtjeDogeCwgY3k6IHksIHJ4OiByeCwgcnk6IHJ5LCBmaWxsOiBcIm5vbmVcIiwgc3Ryb2tlOiBcIiMwMDBcIn07XG4gICAgICAgIHJlcy50eXBlID0gXCJlbGxpcHNlXCI7XG4gICAgICAgICQoZWwsIHJlcy5hdHRycyk7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgICBSLl9lbmdpbmUuaW1hZ2UgPSBmdW5jdGlvbiAoc3ZnLCBzcmMsIHgsIHksIHcsIGgpIHtcbiAgICAgICAgdmFyIGVsID0gJChcImltYWdlXCIpO1xuICAgICAgICAkKGVsLCB7eDogeCwgeTogeSwgd2lkdGg6IHcsIGhlaWdodDogaCwgcHJlc2VydmVBc3BlY3RSYXRpbzogXCJub25lXCJ9KTtcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlTlMoeGxpbmssIFwiaHJlZlwiLCBzcmMpO1xuICAgICAgICBzdmcuY2FudmFzICYmIHN2Zy5jYW52YXMuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICB2YXIgcmVzID0gbmV3IEVsZW1lbnQoZWwsIHN2Zyk7XG4gICAgICAgIHJlcy5hdHRycyA9IHt4OiB4LCB5OiB5LCB3aWR0aDogdywgaGVpZ2h0OiBoLCBzcmM6IHNyY307XG4gICAgICAgIHJlcy50eXBlID0gXCJpbWFnZVwiO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgUi5fZW5naW5lLnRleHQgPSBmdW5jdGlvbiAoc3ZnLCB4LCB5LCB0ZXh0KSB7XG4gICAgICAgIHZhciBlbCA9ICQoXCJ0ZXh0XCIpO1xuICAgICAgICBzdmcuY2FudmFzICYmIHN2Zy5jYW52YXMuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICB2YXIgcmVzID0gbmV3IEVsZW1lbnQoZWwsIHN2Zyk7XG4gICAgICAgIHJlcy5hdHRycyA9IHtcbiAgICAgICAgICAgIHg6IHgsXG4gICAgICAgICAgICB5OiB5LFxuICAgICAgICAgICAgXCJ0ZXh0LWFuY2hvclwiOiBcIm1pZGRsZVwiLFxuICAgICAgICAgICAgdGV4dDogdGV4dCxcbiAgICAgICAgICAgIFwiZm9udC1mYW1pbHlcIjogUi5fYXZhaWxhYmxlQXR0cnNbXCJmb250LWZhbWlseVwiXSxcbiAgICAgICAgICAgIFwiZm9udC1zaXplXCI6IFIuX2F2YWlsYWJsZUF0dHJzW1wiZm9udC1zaXplXCJdLFxuICAgICAgICAgICAgc3Ryb2tlOiBcIm5vbmVcIixcbiAgICAgICAgICAgIGZpbGw6IFwiIzAwMFwiXG4gICAgICAgIH07XG4gICAgICAgIHJlcy50eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgIHNldEZpbGxBbmRTdHJva2UocmVzLCByZXMuYXR0cnMpO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgUi5fZW5naW5lLnNldFNpemUgPSBmdW5jdGlvbiAod2lkdGgsIGhlaWdodCkge1xuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGggfHwgdGhpcy53aWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQgfHwgdGhpcy5oZWlnaHQ7XG4gICAgICAgIHRoaXMuY2FudmFzLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIHRoaXMud2lkdGgpO1xuICAgICAgICB0aGlzLmNhbnZhcy5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgdGhpcy5oZWlnaHQpO1xuICAgICAgICBpZiAodGhpcy5fdmlld0JveCkge1xuICAgICAgICAgICAgdGhpcy5zZXRWaWV3Qm94LmFwcGx5KHRoaXMsIHRoaXMuX3ZpZXdCb3gpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgUi5fZW5naW5lLmNyZWF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbiA9IFIuX2dldENvbnRhaW5lci5hcHBseSgwLCBhcmd1bWVudHMpLFxuICAgICAgICAgICAgY29udGFpbmVyID0gY29uICYmIGNvbi5jb250YWluZXIsXG4gICAgICAgICAgICB4ID0gY29uLngsXG4gICAgICAgICAgICB5ID0gY29uLnksXG4gICAgICAgICAgICB3aWR0aCA9IGNvbi53aWR0aCxcbiAgICAgICAgICAgIGhlaWdodCA9IGNvbi5oZWlnaHQ7XG4gICAgICAgIGlmICghY29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTVkcgY29udGFpbmVyIG5vdCBmb3VuZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNudnMgPSAkKFwic3ZnXCIpLFxuICAgICAgICAgICAgY3NzID0gXCJvdmVyZmxvdzpoaWRkZW47XCIsXG4gICAgICAgICAgICBpc0Zsb2F0aW5nO1xuICAgICAgICB4ID0geCB8fCAwO1xuICAgICAgICB5ID0geSB8fCAwO1xuICAgICAgICB3aWR0aCA9IHdpZHRoIHx8IDUxMjtcbiAgICAgICAgaGVpZ2h0ID0gaGVpZ2h0IHx8IDM0MjtcbiAgICAgICAgJChjbnZzLCB7XG4gICAgICAgICAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICAgICAgICAgIHZlcnNpb246IDEuMSxcbiAgICAgICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgICAgIHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXG4gICAgICAgICAgICBcInhtbG5zOnhsaW5rXCI6IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY29udGFpbmVyID09IDEpIHtcbiAgICAgICAgICAgIGNudnMuc3R5bGUuY3NzVGV4dCA9IGNzcyArIFwicG9zaXRpb246YWJzb2x1dGU7bGVmdDpcIiArIHggKyBcInB4O3RvcDpcIiArIHkgKyBcInB4XCI7XG4gICAgICAgICAgICBSLl9nLmRvYy5ib2R5LmFwcGVuZENoaWxkKGNudnMpO1xuICAgICAgICAgICAgaXNGbG9hdGluZyA9IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjbnZzLnN0eWxlLmNzc1RleHQgPSBjc3MgKyBcInBvc2l0aW9uOnJlbGF0aXZlXCI7XG4gICAgICAgICAgICBpZiAoY29udGFpbmVyLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICBjb250YWluZXIuaW5zZXJ0QmVmb3JlKGNudnMsIGNvbnRhaW5lci5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNudnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnRhaW5lciA9IG5ldyBSLl9QYXBlcjtcbiAgICAgICAgY29udGFpbmVyLndpZHRoID0gd2lkdGg7XG4gICAgICAgIGNvbnRhaW5lci5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIGNvbnRhaW5lci5jYW52YXMgPSBjbnZzO1xuICAgICAgICBjb250YWluZXIuY2xlYXIoKTtcbiAgICAgICAgY29udGFpbmVyLl9sZWZ0ID0gY29udGFpbmVyLl90b3AgPSAwO1xuICAgICAgICBpc0Zsb2F0aW5nICYmIChjb250YWluZXIucmVuZGVyZml4ID0gZnVuY3Rpb24gKCkge30pO1xuICAgICAgICBjb250YWluZXIucmVuZGVyZml4KCk7XG4gICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgfTtcbiAgICBSLl9lbmdpbmUuc2V0Vmlld0JveCA9IGZ1bmN0aW9uICh4LCB5LCB3LCBoLCBmaXQpIHtcbiAgICAgICAgZXZlKFwicmFwaGFlbC5zZXRWaWV3Qm94XCIsIHRoaXMsIHRoaXMuX3ZpZXdCb3gsIFt4LCB5LCB3LCBoLCBmaXRdKTtcbiAgICAgICAgdmFyIHBhcGVyU2l6ZSA9IHRoaXMuZ2V0U2l6ZSgpLFxuICAgICAgICAgICAgc2l6ZSA9IG1tYXgodyAvIHBhcGVyU2l6ZS53aWR0aCwgaCAvIHBhcGVyU2l6ZS5oZWlnaHQpLFxuICAgICAgICAgICAgdG9wID0gdGhpcy50b3AsXG4gICAgICAgICAgICBhc3BlY3RSYXRpbyA9IGZpdCA/IFwieE1pZFlNaWQgbWVldFwiIDogXCJ4TWluWU1pblwiLFxuICAgICAgICAgICAgdmIsXG4gICAgICAgICAgICBzdztcbiAgICAgICAgaWYgKHggPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3ZiU2l6ZSkge1xuICAgICAgICAgICAgICAgIHNpemUgPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuX3ZiU2l6ZTtcbiAgICAgICAgICAgIHZiID0gXCIwIDAgXCIgKyB0aGlzLndpZHRoICsgUyArIHRoaXMuaGVpZ2h0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fdmJTaXplID0gc2l6ZTtcbiAgICAgICAgICAgIHZiID0geCArIFMgKyB5ICsgUyArIHcgKyBTICsgaDtcbiAgICAgICAgfVxuICAgICAgICAkKHRoaXMuY2FudmFzLCB7XG4gICAgICAgICAgICB2aWV3Qm94OiB2YixcbiAgICAgICAgICAgIHByZXNlcnZlQXNwZWN0UmF0aW86IGFzcGVjdFJhdGlvXG4gICAgICAgIH0pO1xuICAgICAgICB3aGlsZSAoc2l6ZSAmJiB0b3ApIHtcbiAgICAgICAgICAgIHN3ID0gXCJzdHJva2Utd2lkdGhcIiBpbiB0b3AuYXR0cnMgPyB0b3AuYXR0cnNbXCJzdHJva2Utd2lkdGhcIl0gOiAxO1xuICAgICAgICAgICAgdG9wLmF0dHIoe1wic3Ryb2tlLXdpZHRoXCI6IHN3fSk7XG4gICAgICAgICAgICB0b3AuXy5kaXJ0eSA9IDE7XG4gICAgICAgICAgICB0b3AuXy5kaXJ0eVQgPSAxO1xuICAgICAgICAgICAgdG9wID0gdG9wLnByZXY7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdmlld0JveCA9IFt4LCB5LCB3LCBoLCAhIWZpdF07XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFBhcGVyLnJlbmRlcmZpeFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogRml4ZXMgdGhlIGlzc3VlIG9mIEZpcmVmb3ggYW5kIElFOSByZWdhcmRpbmcgc3VicGl4ZWwgcmVuZGVyaW5nLiBJZiBwYXBlciBpcyBkZXBlbmRlbnRcbiAgICAgKiBvbiBvdGhlciBlbGVtZW50cyBhZnRlciByZWZsb3cgaXQgY291bGQgc2hpZnQgaGFsZiBwaXhlbCB3aGljaCBjYXVzZSBmb3IgbGluZXMgdG8gbG9zdCB0aGVpciBjcmlzcG5lc3MuXG4gICAgICogVGhpcyBtZXRob2QgZml4ZXMgdGhlIGlzc3VlLlxuICAgICAqKlxuICAgICAgIFNwZWNpYWwgdGhhbmtzIHRvIE1hcml1c3ogTm93YWsgKGh0dHA6Ly93d3cubWVkaWtvby5jb20vKSBmb3IgdGhpcyBtZXRob2QuXG4gICAgXFwqL1xuICAgIFIucHJvdG90eXBlLnJlbmRlcmZpeCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNudnMgPSB0aGlzLmNhbnZhcyxcbiAgICAgICAgICAgIHMgPSBjbnZzLnN0eWxlLFxuICAgICAgICAgICAgcG9zO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcG9zID0gY252cy5nZXRTY3JlZW5DVE0oKSB8fCBjbnZzLmNyZWF0ZVNWR01hdHJpeCgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBwb3MgPSBjbnZzLmNyZWF0ZVNWR01hdHJpeCgpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsZWZ0ID0gLXBvcy5lICUgMSxcbiAgICAgICAgICAgIHRvcCA9IC1wb3MuZiAlIDE7XG4gICAgICAgIGlmIChsZWZ0IHx8IHRvcCkge1xuICAgICAgICAgICAgaWYgKGxlZnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9sZWZ0ID0gKHRoaXMuX2xlZnQgKyBsZWZ0KSAlIDE7XG4gICAgICAgICAgICAgICAgcy5sZWZ0ID0gdGhpcy5fbGVmdCArIFwicHhcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0b3ApIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90b3AgPSAodGhpcy5fdG9wICsgdG9wKSAlIDE7XG4gICAgICAgICAgICAgICAgcy50b3AgPSB0aGlzLl90b3AgKyBcInB4XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBQYXBlci5jbGVhclxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQ2xlYXJzIHRoZSBwYXBlciwgaS5lLiByZW1vdmVzIGFsbCB0aGUgZWxlbWVudHMuXG4gICAgXFwqL1xuICAgIFIucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBSLmV2ZShcInJhcGhhZWwuY2xlYXJcIiwgdGhpcyk7XG4gICAgICAgIHZhciBjID0gdGhpcy5jYW52YXM7XG4gICAgICAgIHdoaWxlIChjLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgIGMucmVtb3ZlQ2hpbGQoYy5maXJzdENoaWxkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJvdHRvbSA9IHRoaXMudG9wID0gbnVsbDtcbiAgICAgICAgKHRoaXMuZGVzYyA9ICQoXCJkZXNjXCIpKS5hcHBlbmRDaGlsZChSLl9nLmRvYy5jcmVhdGVUZXh0Tm9kZShcIkNyZWF0ZWQgd2l0aCBSYXBoYVxceGVibCBcIiArIFIudmVyc2lvbikpO1xuICAgICAgICBjLmFwcGVuZENoaWxkKHRoaXMuZGVzYyk7XG4gICAgICAgIGMuYXBwZW5kQ2hpbGQodGhpcy5kZWZzID0gJChcImRlZnNcIikpO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFBhcGVyLnJlbW92ZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVtb3ZlcyB0aGUgcGFwZXIgZnJvbSB0aGUgRE9NLlxuICAgIFxcKi9cbiAgICBSLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGV2ZShcInJhcGhhZWwucmVtb3ZlXCIsIHRoaXMpO1xuICAgICAgICB0aGlzLmNhbnZhcy5wYXJlbnROb2RlICYmIHRoaXMuY2FudmFzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5jYW52YXMpO1xuICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMpIHtcbiAgICAgICAgICAgIHRoaXNbaV0gPSB0eXBlb2YgdGhpc1tpXSA9PSBcImZ1bmN0aW9uXCIgPyBSLl9yZW1vdmVkRmFjdG9yeShpKSA6IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHZhciBzZXRwcm90byA9IFIuc3Q7XG4gICAgZm9yICh2YXIgbWV0aG9kIGluIGVscHJvdG8pIGlmIChlbHByb3RvW2hhc10obWV0aG9kKSAmJiAhc2V0cHJvdG9baGFzXShtZXRob2QpKSB7XG4gICAgICAgIHNldHByb3RvW21ldGhvZF0gPSAoZnVuY3Rpb24gKG1ldGhvZG5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyZyA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgICAgICBlbFttZXRob2RuYW1lXS5hcHBseShlbCwgYXJnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKG1ldGhvZCk7XG4gICAgfVxufSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./dev/raphael.svg.js\n");/***/},/***/"./dev/raphael.vml.js":/*!****************************!*\
  !*** ./dev/raphael.vml.js ***!
  \****************************/ /*! no static exports found */ /***/function devRaphaelVmlJs(module,exports,__webpack_require__){eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! ./raphael.core */ \"./dev/raphael.core.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(R) {\n    if (R && !R.vml) {\n        return;\n    }\n\n    var has = \"hasOwnProperty\",\n        Str = String,\n        toFloat = parseFloat,\n        math = Math,\n        round = math.round,\n        mmax = math.max,\n        mmin = math.min,\n        abs = math.abs,\n        fillString = \"fill\",\n        separator = /[, ]+/,\n        eve = R.eve,\n        ms = \" progid:DXImageTransform.Microsoft\",\n        S = \" \",\n        E = \"\",\n        map = {M: \"m\", L: \"l\", C: \"c\", Z: \"x\", m: \"t\", l: \"r\", c: \"v\", z: \"x\"},\n        bites = /([clmz]),?([^clmz]*)/gi,\n        blurregexp = / progid:\\S+Blur\\([^\\)]+\\)/g,\n        val = /-?[^,\\s-]+/g,\n        cssDot = \"position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)\",\n        zoom = 21600,\n        pathTypes = {path: 1, rect: 1, image: 1},\n        ovalTypes = {circle: 1, ellipse: 1},\n        path2vml = function (path) {\n            var total =  /[ahqstv]/ig,\n                command = R._pathToAbsolute;\n            Str(path).match(total) && (command = R._path2curve);\n            total = /[clmz]/g;\n            if (command == R._pathToAbsolute && !Str(path).match(total)) {\n                var res = Str(path).replace(bites, function (all, command, args) {\n                    var vals = [],\n                        isMove = command.toLowerCase() == \"m\",\n                        res = map[command];\n                    args.replace(val, function (value) {\n                        if (isMove && vals.length == 2) {\n                            res += vals + map[command == \"m\" ? \"l\" : \"L\"];\n                            vals = [];\n                        }\n                        vals.push(round(value * zoom));\n                    });\n                    return res + vals;\n                });\n                return res;\n            }\n            var pa = command(path), p, r;\n            res = [];\n            for (var i = 0, ii = pa.length; i < ii; i++) {\n                p = pa[i];\n                r = pa[i][0].toLowerCase();\n                r == \"z\" && (r = \"x\");\n                for (var j = 1, jj = p.length; j < jj; j++) {\n                    r += round(p[j] * zoom) + (j != jj - 1 ? \",\" : E);\n                }\n                res.push(r);\n            }\n            return res.join(S);\n        },\n        compensation = function (deg, dx, dy) {\n            var m = R.matrix();\n            m.rotate(-deg, .5, .5);\n            return {\n                dx: m.x(dx, dy),\n                dy: m.y(dx, dy)\n            };\n        },\n        setCoords = function (p, sx, sy, dx, dy, deg) {\n            var _ = p._,\n                m = p.matrix,\n                fillpos = _.fillpos,\n                o = p.node,\n                s = o.style,\n                y = 1,\n                flip = \"\",\n                dxdy,\n                kx = zoom / sx,\n                ky = zoom / sy;\n            s.visibility = \"hidden\";\n            if (!sx || !sy) {\n                return;\n            }\n            o.coordsize = abs(kx) + S + abs(ky);\n            s.rotation = deg * (sx * sy < 0 ? -1 : 1);\n            if (deg) {\n                var c = compensation(deg, dx, dy);\n                dx = c.dx;\n                dy = c.dy;\n            }\n            sx < 0 && (flip += \"x\");\n            sy < 0 && (flip += \" y\") && (y = -1);\n            s.flip = flip;\n            o.coordorigin = (dx * -kx) + S + (dy * -ky);\n            if (fillpos || _.fillsize) {\n                var fill = o.getElementsByTagName(fillString);\n                fill = fill && fill[0];\n                o.removeChild(fill);\n                if (fillpos) {\n                    c = compensation(deg, m.x(fillpos[0], fillpos[1]), m.y(fillpos[0], fillpos[1]));\n                    fill.position = c.dx * y + S + c.dy * y;\n                }\n                if (_.fillsize) {\n                    fill.size = _.fillsize[0] * abs(sx) + S + _.fillsize[1] * abs(sy);\n                }\n                o.appendChild(fill);\n            }\n            s.visibility = \"visible\";\n        };\n    R.toString = function () {\n        return  \"Your browser doesn\\u2019t support SVG. Falling down to VML.\\nYou are running Rapha\\xebl \" + this.version;\n    };\n    var addArrow = function (o, value, isEnd) {\n        var values = Str(value).toLowerCase().split(\"-\"),\n            se = isEnd ? \"end\" : \"start\",\n            i = values.length,\n            type = \"classic\",\n            w = \"medium\",\n            h = \"medium\";\n        while (i--) {\n            switch (values[i]) {\n                case \"block\":\n                case \"classic\":\n                case \"oval\":\n                case \"diamond\":\n                case \"open\":\n                case \"none\":\n                    type = values[i];\n                    break;\n                case \"wide\":\n                case \"narrow\": h = values[i]; break;\n                case \"long\":\n                case \"short\": w = values[i]; break;\n            }\n        }\n        var stroke = o.node.getElementsByTagName(\"stroke\")[0];\n        stroke[se + \"arrow\"] = type;\n        stroke[se + \"arrowlength\"] = w;\n        stroke[se + \"arrowwidth\"] = h;\n    },\n    setFillAndStroke = function (o, params) {\n        // o.paper.canvas.style.display = \"none\";\n        o.attrs = o.attrs || {};\n        var node = o.node,\n            a = o.attrs,\n            s = node.style,\n            xy,\n            newpath = pathTypes[o.type] && (params.x != a.x || params.y != a.y || params.width != a.width || params.height != a.height || params.cx != a.cx || params.cy != a.cy || params.rx != a.rx || params.ry != a.ry || params.r != a.r),\n            isOval = ovalTypes[o.type] && (a.cx != params.cx || a.cy != params.cy || a.r != params.r || a.rx != params.rx || a.ry != params.ry),\n            res = o;\n\n\n        for (var par in params) if (params[has](par)) {\n            a[par] = params[par];\n        }\n        if (newpath) {\n            a.path = R._getPath[o.type](o);\n            o._.dirty = 1;\n        }\n        params.href && (node.href = params.href);\n        params.title && (node.title = params.title);\n        params.target && (node.target = params.target);\n        params.cursor && (s.cursor = params.cursor);\n        \"blur\" in params && o.blur(params.blur);\n        if (params.path && o.type == \"path\" || newpath) {\n            node.path = path2vml(~Str(a.path).toLowerCase().indexOf(\"r\") ? R._pathToAbsolute(a.path) : a.path);\n            o._.dirty = 1;\n            if (o.type == \"image\") {\n                o._.fillpos = [a.x, a.y];\n                o._.fillsize = [a.width, a.height];\n                setCoords(o, 1, 1, 0, 0, 0);\n            }\n        }\n        \"transform\" in params && o.transform(params.transform);\n        if (isOval) {\n            var cx = +a.cx,\n                cy = +a.cy,\n                rx = +a.rx || +a.r || 0,\n                ry = +a.ry || +a.r || 0;\n            node.path = R.format(\"ar{0},{1},{2},{3},{4},{1},{4},{1}x\", round((cx - rx) * zoom), round((cy - ry) * zoom), round((cx + rx) * zoom), round((cy + ry) * zoom), round(cx * zoom));\n            o._.dirty = 1;\n        }\n        if (\"clip-rect\" in params) {\n            var rect = Str(params[\"clip-rect\"]).split(separator);\n            if (rect.length == 4) {\n                rect[2] = +rect[2] + (+rect[0]);\n                rect[3] = +rect[3] + (+rect[1]);\n                var div = node.clipRect || R._g.doc.createElement(\"div\"),\n                    dstyle = div.style;\n                dstyle.clip = R.format(\"rect({1}px {2}px {3}px {0}px)\", rect);\n                if (!node.clipRect) {\n                    dstyle.position = \"absolute\";\n                    dstyle.top = 0;\n                    dstyle.left = 0;\n                    dstyle.width = o.paper.width + \"px\";\n                    dstyle.height = o.paper.height + \"px\";\n                    node.parentNode.insertBefore(div, node);\n                    div.appendChild(node);\n                    node.clipRect = div;\n                }\n            }\n            if (!params[\"clip-rect\"]) {\n                node.clipRect && (node.clipRect.style.clip = \"auto\");\n            }\n        }\n        if (o.textpath) {\n            var textpathStyle = o.textpath.style;\n            params.font && (textpathStyle.font = params.font);\n            params[\"font-family\"] && (textpathStyle.fontFamily = '\"' + params[\"font-family\"].split(\",\")[0].replace(/^['\"]+|['\"]+$/g, E) + '\"');\n            params[\"font-size\"] && (textpathStyle.fontSize = params[\"font-size\"]);\n            params[\"font-weight\"] && (textpathStyle.fontWeight = params[\"font-weight\"]);\n            params[\"font-style\"] && (textpathStyle.fontStyle = params[\"font-style\"]);\n        }\n        if (\"arrow-start\" in params) {\n            addArrow(res, params[\"arrow-start\"]);\n        }\n        if (\"arrow-end\" in params) {\n            addArrow(res, params[\"arrow-end\"], 1);\n        }\n        if (params.opacity != null ||\n            params.fill != null ||\n            params.src != null ||\n            params.stroke != null ||\n            params[\"stroke-width\"] != null ||\n            params[\"stroke-opacity\"] != null ||\n            params[\"fill-opacity\"] != null ||\n            params[\"stroke-dasharray\"] != null ||\n            params[\"stroke-miterlimit\"] != null ||\n            params[\"stroke-linejoin\"] != null ||\n            params[\"stroke-linecap\"] != null) {\n            var fill = node.getElementsByTagName(fillString),\n                newfill = false;\n            fill = fill && fill[0];\n            !fill && (newfill = fill = createNode(fillString));\n            if (o.type == \"image\" && params.src) {\n                fill.src = params.src;\n            }\n            params.fill && (fill.on = true);\n            if (fill.on == null || params.fill == \"none\" || params.fill === null) {\n                fill.on = false;\n            }\n            if (fill.on && params.fill) {\n                var isURL = Str(params.fill).match(R._ISURL);\n                if (isURL) {\n                    fill.parentNode == node && node.removeChild(fill);\n                    fill.rotate = true;\n                    fill.src = isURL[1];\n                    fill.type = \"tile\";\n                    var bbox = o.getBBox(1);\n                    fill.position = bbox.x + S + bbox.y;\n                    o._.fillpos = [bbox.x, bbox.y];\n\n                    R._preload(isURL[1], function () {\n                        o._.fillsize = [this.offsetWidth, this.offsetHeight];\n                    });\n                } else {\n                    fill.color = R.getRGB(params.fill).hex;\n                    fill.src = E;\n                    fill.type = \"solid\";\n                    if (R.getRGB(params.fill).error && (res.type in {circle: 1, ellipse: 1} || Str(params.fill).charAt() != \"r\") && addGradientFill(res, params.fill, fill)) {\n                        a.fill = \"none\";\n                        a.gradient = params.fill;\n                        fill.rotate = false;\n                    }\n                }\n            }\n            if (\"fill-opacity\" in params || \"opacity\" in params) {\n                var opacity = ((+a[\"fill-opacity\"] + 1 || 2) - 1) * ((+a.opacity + 1 || 2) - 1) * ((+R.getRGB(params.fill).o + 1 || 2) - 1);\n                opacity = mmin(mmax(opacity, 0), 1);\n                fill.opacity = opacity;\n                if (fill.src) {\n                    fill.color = \"none\";\n                }\n            }\n            node.appendChild(fill);\n            var stroke = (node.getElementsByTagName(\"stroke\") && node.getElementsByTagName(\"stroke\")[0]),\n            newstroke = false;\n            !stroke && (newstroke = stroke = createNode(\"stroke\"));\n            if ((params.stroke && params.stroke != \"none\") ||\n                params[\"stroke-width\"] ||\n                params[\"stroke-opacity\"] != null ||\n                params[\"stroke-dasharray\"] ||\n                params[\"stroke-miterlimit\"] ||\n                params[\"stroke-linejoin\"] ||\n                params[\"stroke-linecap\"]) {\n                stroke.on = true;\n            }\n            (params.stroke == \"none\" || params.stroke === null || stroke.on == null || params.stroke == 0 || params[\"stroke-width\"] == 0) && (stroke.on = false);\n            var strokeColor = R.getRGB(params.stroke);\n            stroke.on && params.stroke && (stroke.color = strokeColor.hex);\n            opacity = ((+a[\"stroke-opacity\"] + 1 || 2) - 1) * ((+a.opacity + 1 || 2) - 1) * ((+strokeColor.o + 1 || 2) - 1);\n            var width = (toFloat(params[\"stroke-width\"]) || 1) * .75;\n            opacity = mmin(mmax(opacity, 0), 1);\n            params[\"stroke-width\"] == null && (width = a[\"stroke-width\"]);\n            params[\"stroke-width\"] && (stroke.weight = width);\n            width && width < 1 && (opacity *= width) && (stroke.weight = 1);\n            stroke.opacity = opacity;\n\n            params[\"stroke-linejoin\"] && (stroke.joinstyle = params[\"stroke-linejoin\"] || \"miter\");\n            stroke.miterlimit = params[\"stroke-miterlimit\"] || 8;\n            params[\"stroke-linecap\"] && (stroke.endcap = params[\"stroke-linecap\"] == \"butt\" ? \"flat\" : params[\"stroke-linecap\"] == \"square\" ? \"square\" : \"round\");\n            if (\"stroke-dasharray\" in params) {\n                var dasharray = {\n                    \"-\": \"shortdash\",\n                    \".\": \"shortdot\",\n                    \"-.\": \"shortdashdot\",\n                    \"-..\": \"shortdashdotdot\",\n                    \". \": \"dot\",\n                    \"- \": \"dash\",\n                    \"--\": \"longdash\",\n                    \"- .\": \"dashdot\",\n                    \"--.\": \"longdashdot\",\n                    \"--..\": \"longdashdotdot\"\n                };\n                stroke.dashstyle = dasharray[has](params[\"stroke-dasharray\"]) ? dasharray[params[\"stroke-dasharray\"]] : E;\n            }\n            newstroke && node.appendChild(stroke);\n        }\n        if (res.type == \"text\") {\n            res.paper.canvas.style.display = E;\n            var span = res.paper.span,\n                m = 100,\n                fontSize = a.font && a.font.match(/\\d+(?:\\.\\d*)?(?=px)/);\n            s = span.style;\n            a.font && (s.font = a.font);\n            a[\"font-family\"] && (s.fontFamily = a[\"font-family\"]);\n            a[\"font-weight\"] && (s.fontWeight = a[\"font-weight\"]);\n            a[\"font-style\"] && (s.fontStyle = a[\"font-style\"]);\n            fontSize = toFloat(a[\"font-size\"] || fontSize && fontSize[0]) || 10;\n            s.fontSize = fontSize * m + \"px\";\n            res.textpath.string && (span.innerHTML = Str(res.textpath.string).replace(/</g, \"&#60;\").replace(/&/g, \"&#38;\").replace(/\\n/g, \"<br>\"));\n            var brect = span.getBoundingClientRect();\n            res.W = a.w = (brect.right - brect.left) / m;\n            res.H = a.h = (brect.bottom - brect.top) / m;\n            // res.paper.canvas.style.display = \"none\";\n            res.X = a.x;\n            res.Y = a.y + res.H / 2;\n\n            (\"x\" in params || \"y\" in params) && (res.path.v = R.format(\"m{0},{1}l{2},{1}\", round(a.x * zoom), round(a.y * zoom), round(a.x * zoom) + 1));\n            var dirtyattrs = [\"x\", \"y\", \"text\", \"font\", \"font-family\", \"font-weight\", \"font-style\", \"font-size\"];\n            for (var d = 0, dd = dirtyattrs.length; d < dd; d++) if (dirtyattrs[d] in params) {\n                res._.dirty = 1;\n                break;\n            }\n\n            // text-anchor emulation\n            switch (a[\"text-anchor\"]) {\n                case \"start\":\n                    res.textpath.style[\"v-text-align\"] = \"left\";\n                    res.bbx = res.W / 2;\n                break;\n                case \"end\":\n                    res.textpath.style[\"v-text-align\"] = \"right\";\n                    res.bbx = -res.W / 2;\n                break;\n                default:\n                    res.textpath.style[\"v-text-align\"] = \"center\";\n                    res.bbx = 0;\n                break;\n            }\n            res.textpath.style[\"v-text-kern\"] = true;\n        }\n        // res.paper.canvas.style.display = E;\n    },\n    addGradientFill = function (o, gradient, fill) {\n        o.attrs = o.attrs || {};\n        var attrs = o.attrs,\n            pow = Math.pow,\n            opacity,\n            oindex,\n            type = \"linear\",\n            fxfy = \".5 .5\";\n        o.attrs.gradient = gradient;\n        gradient = Str(gradient).replace(R._radial_gradient, function (all, fx, fy) {\n            type = \"radial\";\n            if (fx && fy) {\n                fx = toFloat(fx);\n                fy = toFloat(fy);\n                pow(fx - .5, 2) + pow(fy - .5, 2) > .25 && (fy = math.sqrt(.25 - pow(fx - .5, 2)) * ((fy > .5) * 2 - 1) + .5);\n                fxfy = fx + S + fy;\n            }\n            return E;\n        });\n        gradient = gradient.split(/\\s*\\-\\s*/);\n        if (type == \"linear\") {\n            var angle = gradient.shift();\n            angle = -toFloat(angle);\n            if (isNaN(angle)) {\n                return null;\n            }\n        }\n        var dots = R._parseDots(gradient);\n        if (!dots) {\n            return null;\n        }\n        o = o.shape || o.node;\n        if (dots.length) {\n            o.removeChild(fill);\n            fill.on = true;\n            fill.method = \"none\";\n            fill.color = dots[0].color;\n            fill.color2 = dots[dots.length - 1].color;\n            var clrs = [];\n            for (var i = 0, ii = dots.length; i < ii; i++) {\n                dots[i].offset && clrs.push(dots[i].offset + S + dots[i].color);\n            }\n            fill.colors = clrs.length ? clrs.join() : \"0% \" + fill.color;\n            if (type == \"radial\") {\n                fill.type = \"gradientTitle\";\n                fill.focus = \"100%\";\n                fill.focussize = \"0 0\";\n                fill.focusposition = fxfy;\n                fill.angle = 0;\n            } else {\n                // fill.rotate= true;\n                fill.type = \"gradient\";\n                fill.angle = (270 - angle) % 360;\n            }\n            o.appendChild(fill);\n        }\n        return 1;\n    },\n    Element = function (node, vml) {\n        this[0] = this.node = node;\n        node.raphael = true;\n        this.id = R._oid++;\n        node.raphaelid = this.id;\n        this.X = 0;\n        this.Y = 0;\n        this.attrs = {};\n        this.paper = vml;\n        this.matrix = R.matrix();\n        this._ = {\n            transform: [],\n            sx: 1,\n            sy: 1,\n            dx: 0,\n            dy: 0,\n            deg: 0,\n            dirty: 1,\n            dirtyT: 1\n        };\n        !vml.bottom && (vml.bottom = this);\n        this.prev = vml.top;\n        vml.top && (vml.top.next = this);\n        vml.top = this;\n        this.next = null;\n    };\n    var elproto = R.el;\n\n    Element.prototype = elproto;\n    elproto.constructor = Element;\n    elproto.transform = function (tstr) {\n        if (tstr == null) {\n            return this._.transform;\n        }\n        var vbs = this.paper._viewBoxShift,\n            vbt = vbs ? \"s\" + [vbs.scale, vbs.scale] + \"-1-1t\" + [vbs.dx, vbs.dy] : E,\n            oldt;\n        if (vbs) {\n            oldt = tstr = Str(tstr).replace(/\\.{3}|\\u2026/g, this._.transform || E);\n        }\n        R._extractTransform(this, vbt + tstr);\n        var matrix = this.matrix.clone(),\n            skew = this.skew,\n            o = this.node,\n            split,\n            isGrad = ~Str(this.attrs.fill).indexOf(\"-\"),\n            isPatt = !Str(this.attrs.fill).indexOf(\"url(\");\n        matrix.translate(1, 1);\n        if (isPatt || isGrad || this.type == \"image\") {\n            skew.matrix = \"1 0 0 1\";\n            skew.offset = \"0 0\";\n            split = matrix.split();\n            if ((isGrad && split.noRotation) || !split.isSimple) {\n                o.style.filter = matrix.toFilter();\n                var bb = this.getBBox(),\n                    bbt = this.getBBox(1),\n                    dx = bb.x - bbt.x,\n                    dy = bb.y - bbt.y;\n                o.coordorigin = (dx * -zoom) + S + (dy * -zoom);\n                setCoords(this, 1, 1, dx, dy, 0);\n            } else {\n                o.style.filter = E;\n                setCoords(this, split.scalex, split.scaley, split.dx, split.dy, split.rotate);\n            }\n        } else {\n            o.style.filter = E;\n            skew.matrix = Str(matrix);\n            skew.offset = matrix.offset();\n        }\n        if (oldt !== null) { // empty string value is true as well\n            this._.transform = oldt;\n            R._extractTransform(this, oldt);\n        }\n        return this;\n    };\n    elproto.rotate = function (deg, cx, cy) {\n        if (this.removed) {\n            return this;\n        }\n        if (deg == null) {\n            return;\n        }\n        deg = Str(deg).split(separator);\n        if (deg.length - 1) {\n            cx = toFloat(deg[1]);\n            cy = toFloat(deg[2]);\n        }\n        deg = toFloat(deg[0]);\n        (cy == null) && (cx = cy);\n        if (cx == null || cy == null) {\n            var bbox = this.getBBox(1);\n            cx = bbox.x + bbox.width / 2;\n            cy = bbox.y + bbox.height / 2;\n        }\n        this._.dirtyT = 1;\n        this.transform(this._.transform.concat([[\"r\", deg, cx, cy]]));\n        return this;\n    };\n    elproto.translate = function (dx, dy) {\n        if (this.removed) {\n            return this;\n        }\n        dx = Str(dx).split(separator);\n        if (dx.length - 1) {\n            dy = toFloat(dx[1]);\n        }\n        dx = toFloat(dx[0]) || 0;\n        dy = +dy || 0;\n        if (this._.bbox) {\n            this._.bbox.x += dx;\n            this._.bbox.y += dy;\n        }\n        this.transform(this._.transform.concat([[\"t\", dx, dy]]));\n        return this;\n    };\n    elproto.scale = function (sx, sy, cx, cy) {\n        if (this.removed) {\n            return this;\n        }\n        sx = Str(sx).split(separator);\n        if (sx.length - 1) {\n            sy = toFloat(sx[1]);\n            cx = toFloat(sx[2]);\n            cy = toFloat(sx[3]);\n            isNaN(cx) && (cx = null);\n            isNaN(cy) && (cy = null);\n        }\n        sx = toFloat(sx[0]);\n        (sy == null) && (sy = sx);\n        (cy == null) && (cx = cy);\n        if (cx == null || cy == null) {\n            var bbox = this.getBBox(1);\n        }\n        cx = cx == null ? bbox.x + bbox.width / 2 : cx;\n        cy = cy == null ? bbox.y + bbox.height / 2 : cy;\n\n        this.transform(this._.transform.concat([[\"s\", sx, sy, cx, cy]]));\n        this._.dirtyT = 1;\n        return this;\n    };\n    elproto.hide = function () {\n        !this.removed && (this.node.style.display = \"none\");\n        return this;\n    };\n    elproto.show = function () {\n        !this.removed && (this.node.style.display = E);\n        return this;\n    };\n    // Needed to fix the vml setViewBox issues\n    elproto.auxGetBBox = R.el.getBBox;\n    elproto.getBBox = function(){\n      var b = this.auxGetBBox();\n      if (this.paper && this.paper._viewBoxShift)\n      {\n        var c = {};\n        var z = 1/this.paper._viewBoxShift.scale;\n        c.x = b.x - this.paper._viewBoxShift.dx;\n        c.x *= z;\n        c.y = b.y - this.paper._viewBoxShift.dy;\n        c.y *= z;\n        c.width  = b.width  * z;\n        c.height = b.height * z;\n        c.x2 = c.x + c.width;\n        c.y2 = c.y + c.height;\n        return c;\n      }\n      return b;\n    };\n    elproto._getBBox = function () {\n        if (this.removed) {\n            return {};\n        }\n        return {\n            x: this.X + (this.bbx || 0) - this.W / 2,\n            y: this.Y - this.H,\n            width: this.W,\n            height: this.H\n        };\n    };\n    elproto.remove = function () {\n        if (this.removed || !this.node.parentNode) {\n            return;\n        }\n        this.paper.__set__ && this.paper.__set__.exclude(this);\n        R.eve.unbind(\"raphael.*.*.\" + this.id);\n        R._tear(this, this.paper);\n        this.node.parentNode.removeChild(this.node);\n        this.shape && this.shape.parentNode.removeChild(this.shape);\n        for (var i in this) {\n            this[i] = typeof this[i] == \"function\" ? R._removedFactory(i) : null;\n        }\n        this.removed = true;\n    };\n    elproto.attr = function (name, value) {\n        if (this.removed) {\n            return this;\n        }\n        if (name == null) {\n            var res = {};\n            for (var a in this.attrs) if (this.attrs[has](a)) {\n                res[a] = this.attrs[a];\n            }\n            res.gradient && res.fill == \"none\" && (res.fill = res.gradient) && delete res.gradient;\n            res.transform = this._.transform;\n            return res;\n        }\n        if (value == null && R.is(name, \"string\")) {\n            if (name == fillString && this.attrs.fill == \"none\" && this.attrs.gradient) {\n                return this.attrs.gradient;\n            }\n            var names = name.split(separator),\n                out = {};\n            for (var i = 0, ii = names.length; i < ii; i++) {\n                name = names[i];\n                if (name in this.attrs) {\n                    out[name] = this.attrs[name];\n                } else if (R.is(this.paper.customAttributes[name], \"function\")) {\n                    out[name] = this.paper.customAttributes[name].def;\n                } else {\n                    out[name] = R._availableAttrs[name];\n                }\n            }\n            return ii - 1 ? out : out[names[0]];\n        }\n        if (this.attrs && value == null && R.is(name, \"array\")) {\n            out = {};\n            for (i = 0, ii = name.length; i < ii; i++) {\n                out[name[i]] = this.attr(name[i]);\n            }\n            return out;\n        }\n        var params;\n        if (value != null) {\n            params = {};\n            params[name] = value;\n        }\n        value == null && R.is(name, \"object\") && (params = name);\n        for (var key in params) {\n            eve(\"raphael.attr.\" + key + \".\" + this.id, this, params[key]);\n        }\n        if (params) {\n            for (key in this.paper.customAttributes) if (this.paper.customAttributes[has](key) && params[has](key) && R.is(this.paper.customAttributes[key], \"function\")) {\n                var par = this.paper.customAttributes[key].apply(this, [].concat(params[key]));\n                this.attrs[key] = params[key];\n                for (var subkey in par) if (par[has](subkey)) {\n                    params[subkey] = par[subkey];\n                }\n            }\n            // this.paper.canvas.style.display = \"none\";\n            if (params.text && this.type == \"text\") {\n                this.textpath.string = params.text;\n            }\n            setFillAndStroke(this, params);\n            // this.paper.canvas.style.display = E;\n        }\n        return this;\n    };\n    elproto.toFront = function () {\n        !this.removed && this.node.parentNode.appendChild(this.node);\n        this.paper && this.paper.top != this && R._tofront(this, this.paper);\n        return this;\n    };\n    elproto.toBack = function () {\n        if (this.removed) {\n            return this;\n        }\n        if (this.node.parentNode.firstChild != this.node) {\n            this.node.parentNode.insertBefore(this.node, this.node.parentNode.firstChild);\n            R._toback(this, this.paper);\n        }\n        return this;\n    };\n    elproto.insertAfter = function (element) {\n        if (this.removed) {\n            return this;\n        }\n        if (element.constructor == R.st.constructor) {\n            element = element[element.length - 1];\n        }\n        if (element.node.nextSibling) {\n            element.node.parentNode.insertBefore(this.node, element.node.nextSibling);\n        } else {\n            element.node.parentNode.appendChild(this.node);\n        }\n        R._insertafter(this, element, this.paper);\n        return this;\n    };\n    elproto.insertBefore = function (element) {\n        if (this.removed) {\n            return this;\n        }\n        if (element.constructor == R.st.constructor) {\n            element = element[0];\n        }\n        element.node.parentNode.insertBefore(this.node, element.node);\n        R._insertbefore(this, element, this.paper);\n        return this;\n    };\n    elproto.blur = function (size) {\n        var s = this.node.runtimeStyle,\n            f = s.filter;\n        f = f.replace(blurregexp, E);\n        if (+size !== 0) {\n            this.attrs.blur = size;\n            s.filter = f + S + ms + \".Blur(pixelradius=\" + (+size || 1.5) + \")\";\n            s.margin = R.format(\"-{0}px 0 0 -{0}px\", round(+size || 1.5));\n        } else {\n            s.filter = f;\n            s.margin = 0;\n            delete this.attrs.blur;\n        }\n        return this;\n    };\n\n    R._engine.path = function (pathString, vml) {\n        var el = createNode(\"shape\");\n        el.style.cssText = cssDot;\n        el.coordsize = zoom + S + zoom;\n        el.coordorigin = vml.coordorigin;\n        var p = new Element(el, vml),\n            attr = {fill: \"none\", stroke: \"#000\"};\n        pathString && (attr.path = pathString);\n        p.type = \"path\";\n        p.path = [];\n        p.Path = E;\n        setFillAndStroke(p, attr);\n        vml.canvas && vml.canvas.appendChild(el);\n        var skew = createNode(\"skew\");\n        skew.on = true;\n        el.appendChild(skew);\n        p.skew = skew;\n        p.transform(E);\n        return p;\n    };\n    R._engine.rect = function (vml, x, y, w, h, r) {\n        var path = R._rectPath(x, y, w, h, r),\n            res = vml.path(path),\n            a = res.attrs;\n        res.X = a.x = x;\n        res.Y = a.y = y;\n        res.W = a.width = w;\n        res.H = a.height = h;\n        a.r = r;\n        a.path = path;\n        res.type = \"rect\";\n        return res;\n    };\n    R._engine.ellipse = function (vml, x, y, rx, ry) {\n        var res = vml.path(),\n            a = res.attrs;\n        res.X = x - rx;\n        res.Y = y - ry;\n        res.W = rx * 2;\n        res.H = ry * 2;\n        res.type = \"ellipse\";\n        setFillAndStroke(res, {\n            cx: x,\n            cy: y,\n            rx: rx,\n            ry: ry\n        });\n        return res;\n    };\n    R._engine.circle = function (vml, x, y, r) {\n        var res = vml.path(),\n            a = res.attrs;\n        res.X = x - r;\n        res.Y = y - r;\n        res.W = res.H = r * 2;\n        res.type = \"circle\";\n        setFillAndStroke(res, {\n            cx: x,\n            cy: y,\n            r: r\n        });\n        return res;\n    };\n    R._engine.image = function (vml, src, x, y, w, h) {\n        var path = R._rectPath(x, y, w, h),\n            res = vml.path(path).attr({stroke: \"none\"}),\n            a = res.attrs,\n            node = res.node,\n            fill = node.getElementsByTagName(fillString)[0];\n        a.src = src;\n        res.X = a.x = x;\n        res.Y = a.y = y;\n        res.W = a.width = w;\n        res.H = a.height = h;\n        a.path = path;\n        res.type = \"image\";\n        fill.parentNode == node && node.removeChild(fill);\n        fill.rotate = true;\n        fill.src = src;\n        fill.type = \"tile\";\n        res._.fillpos = [x, y];\n        res._.fillsize = [w, h];\n        node.appendChild(fill);\n        setCoords(res, 1, 1, 0, 0, 0);\n        return res;\n    };\n    R._engine.text = function (vml, x, y, text) {\n        var el = createNode(\"shape\"),\n            path = createNode(\"path\"),\n            o = createNode(\"textpath\");\n        x = x || 0;\n        y = y || 0;\n        text = text || \"\";\n        path.v = R.format(\"m{0},{1}l{2},{1}\", round(x * zoom), round(y * zoom), round(x * zoom) + 1);\n        path.textpathok = true;\n        o.string = Str(text);\n        o.on = true;\n        el.style.cssText = cssDot;\n        el.coordsize = zoom + S + zoom;\n        el.coordorigin = \"0 0\";\n        var p = new Element(el, vml),\n            attr = {\n                fill: \"#000\",\n                stroke: \"none\",\n                font: R._availableAttrs.font,\n                text: text\n            };\n        p.shape = el;\n        p.path = path;\n        p.textpath = o;\n        p.type = \"text\";\n        p.attrs.text = Str(text);\n        p.attrs.x = x;\n        p.attrs.y = y;\n        p.attrs.w = 1;\n        p.attrs.h = 1;\n        setFillAndStroke(p, attr);\n        el.appendChild(o);\n        el.appendChild(path);\n        vml.canvas.appendChild(el);\n        var skew = createNode(\"skew\");\n        skew.on = true;\n        el.appendChild(skew);\n        p.skew = skew;\n        p.transform(E);\n        return p;\n    };\n    R._engine.setSize = function (width, height) {\n        var cs = this.canvas.style;\n        this.width = width;\n        this.height = height;\n        width == +width && (width += \"px\");\n        height == +height && (height += \"px\");\n        cs.width = width;\n        cs.height = height;\n        cs.clip = \"rect(0 \" + width + \" \" + height + \" 0)\";\n        if (this._viewBox) {\n            R._engine.setViewBox.apply(this, this._viewBox);\n        }\n        return this;\n    };\n    R._engine.setViewBox = function (x, y, w, h, fit) {\n        R.eve(\"raphael.setViewBox\", this, this._viewBox, [x, y, w, h, fit]);\n        var paperSize = this.getSize(),\n            width = paperSize.width,\n            height = paperSize.height,\n            H, W;\n        if (fit) {\n            H = height / h;\n            W = width / w;\n            if (w * H < width) {\n                x -= (width - w * H) / 2 / H;\n            }\n            if (h * W < height) {\n                y -= (height - h * W) / 2 / W;\n            }\n        }\n        this._viewBox = [x, y, w, h, !!fit];\n        this._viewBoxShift = {\n            dx: -x,\n            dy: -y,\n            scale: paperSize\n        };\n        this.forEach(function (el) {\n            el.transform(\"...\");\n        });\n        return this;\n    };\n    var createNode;\n    R._engine.initWin = function (win) {\n            var doc = win.document;\n            if (doc.styleSheets.length < 31) {\n                doc.createStyleSheet().addRule(\".rvml\", \"behavior:url(#default#VML)\");\n            } else {\n                // no more room, add to the existing one\n                // http://msdn.microsoft.com/en-us/library/ms531194%28VS.85%29.aspx\n                doc.styleSheets[0].addRule(\".rvml\", \"behavior:url(#default#VML)\");\n            }\n            try {\n                !doc.namespaces.rvml && doc.namespaces.add(\"rvml\", \"urn:schemas-microsoft-com:vml\");\n                createNode = function (tagName) {\n                    return doc.createElement('<rvml:' + tagName + ' class=\"rvml\">');\n                };\n            } catch (e) {\n                createNode = function (tagName) {\n                    return doc.createElement('<' + tagName + ' xmlns=\"urn:schemas-microsoft.com:vml\" class=\"rvml\">');\n                };\n            }\n        };\n    R._engine.initWin(R._g.win);\n    R._engine.create = function () {\n        var con = R._getContainer.apply(0, arguments),\n            container = con.container,\n            height = con.height,\n            s,\n            width = con.width,\n            x = con.x,\n            y = con.y;\n        if (!container) {\n            throw new Error(\"VML container not found.\");\n        }\n        var res = new R._Paper,\n            c = res.canvas = R._g.doc.createElement(\"div\"),\n            cs = c.style;\n        x = x || 0;\n        y = y || 0;\n        width = width || 512;\n        height = height || 342;\n        res.width = width;\n        res.height = height;\n        width == +width && (width += \"px\");\n        height == +height && (height += \"px\");\n        res.coordsize = zoom * 1e3 + S + zoom * 1e3;\n        res.coordorigin = \"0 0\";\n        res.span = R._g.doc.createElement(\"span\");\n        res.span.style.cssText = \"position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;\";\n        c.appendChild(res.span);\n        cs.cssText = R.format(\"top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden\", width, height);\n        if (container == 1) {\n            R._g.doc.body.appendChild(c);\n            cs.left = x + \"px\";\n            cs.top = y + \"px\";\n            cs.position = \"absolute\";\n        } else {\n            if (container.firstChild) {\n                container.insertBefore(c, container.firstChild);\n            } else {\n                container.appendChild(c);\n            }\n        }\n        res.renderfix = function () {};\n        return res;\n    };\n    R.prototype.clear = function () {\n        R.eve(\"raphael.clear\", this);\n        this.canvas.innerHTML = E;\n        this.span = R._g.doc.createElement(\"span\");\n        this.span.style.cssText = \"position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;\";\n        this.canvas.appendChild(this.span);\n        this.bottom = this.top = null;\n    };\n    R.prototype.remove = function () {\n        R.eve(\"raphael.remove\", this);\n        this.canvas.parentNode.removeChild(this.canvas);\n        for (var i in this) {\n            this[i] = typeof this[i] == \"function\" ? R._removedFactory(i) : null;\n        }\n        return true;\n    };\n\n    var setproto = R.st;\n    for (var method in elproto) if (elproto[has](method) && !setproto[has](method)) {\n        setproto[method] = (function (methodname) {\n            return function () {\n                var arg = arguments;\n                return this.forEach(function (el) {\n                    el[methodname].apply(el, arg);\n                });\n            };\n        })(method);\n    }\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9kZXYvcmFwaGFlbC52bWwuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9SYXBoYWVsLy4vZGV2L3JhcGhhZWwudm1sLmpzP2JhZjAiXSwic291cmNlc0NvbnRlbnQiOlsiZGVmaW5lKFtcIi4vcmFwaGFlbC5jb3JlXCJdLCBmdW5jdGlvbihSKSB7XG4gICAgaWYgKFIgJiYgIVIudm1sKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgaGFzID0gXCJoYXNPd25Qcm9wZXJ0eVwiLFxuICAgICAgICBTdHIgPSBTdHJpbmcsXG4gICAgICAgIHRvRmxvYXQgPSBwYXJzZUZsb2F0LFxuICAgICAgICBtYXRoID0gTWF0aCxcbiAgICAgICAgcm91bmQgPSBtYXRoLnJvdW5kLFxuICAgICAgICBtbWF4ID0gbWF0aC5tYXgsXG4gICAgICAgIG1taW4gPSBtYXRoLm1pbixcbiAgICAgICAgYWJzID0gbWF0aC5hYnMsXG4gICAgICAgIGZpbGxTdHJpbmcgPSBcImZpbGxcIixcbiAgICAgICAgc2VwYXJhdG9yID0gL1ssIF0rLyxcbiAgICAgICAgZXZlID0gUi5ldmUsXG4gICAgICAgIG1zID0gXCIgcHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0XCIsXG4gICAgICAgIFMgPSBcIiBcIixcbiAgICAgICAgRSA9IFwiXCIsXG4gICAgICAgIG1hcCA9IHtNOiBcIm1cIiwgTDogXCJsXCIsIEM6IFwiY1wiLCBaOiBcInhcIiwgbTogXCJ0XCIsIGw6IFwiclwiLCBjOiBcInZcIiwgejogXCJ4XCJ9LFxuICAgICAgICBiaXRlcyA9IC8oW2NsbXpdKSw/KFteY2xtel0qKS9naSxcbiAgICAgICAgYmx1cnJlZ2V4cCA9IC8gcHJvZ2lkOlxcUytCbHVyXFwoW15cXCldK1xcKS9nLFxuICAgICAgICB2YWwgPSAvLT9bXixcXHMtXSsvZyxcbiAgICAgICAgY3NzRG90ID0gXCJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjA7dG9wOjA7d2lkdGg6MXB4O2hlaWdodDoxcHg7YmVoYXZpb3I6dXJsKCNkZWZhdWx0I1ZNTClcIixcbiAgICAgICAgem9vbSA9IDIxNjAwLFxuICAgICAgICBwYXRoVHlwZXMgPSB7cGF0aDogMSwgcmVjdDogMSwgaW1hZ2U6IDF9LFxuICAgICAgICBvdmFsVHlwZXMgPSB7Y2lyY2xlOiAxLCBlbGxpcHNlOiAxfSxcbiAgICAgICAgcGF0aDJ2bWwgPSBmdW5jdGlvbiAocGF0aCkge1xuICAgICAgICAgICAgdmFyIHRvdGFsID0gIC9bYWhxc3R2XS9pZyxcbiAgICAgICAgICAgICAgICBjb21tYW5kID0gUi5fcGF0aFRvQWJzb2x1dGU7XG4gICAgICAgICAgICBTdHIocGF0aCkubWF0Y2godG90YWwpICYmIChjb21tYW5kID0gUi5fcGF0aDJjdXJ2ZSk7XG4gICAgICAgICAgICB0b3RhbCA9IC9bY2xtel0vZztcbiAgICAgICAgICAgIGlmIChjb21tYW5kID09IFIuX3BhdGhUb0Fic29sdXRlICYmICFTdHIocGF0aCkubWF0Y2godG90YWwpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlcyA9IFN0cihwYXRoKS5yZXBsYWNlKGJpdGVzLCBmdW5jdGlvbiAoYWxsLCBjb21tYW5kLCBhcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWxzID0gW10sXG4gICAgICAgICAgICAgICAgICAgICAgICBpc01vdmUgPSBjb21tYW5kLnRvTG93ZXJDYXNlKCkgPT0gXCJtXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBtYXBbY29tbWFuZF07XG4gICAgICAgICAgICAgICAgICAgIGFyZ3MucmVwbGFjZSh2YWwsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTW92ZSAmJiB2YWxzLmxlbmd0aCA9PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzICs9IHZhbHMgKyBtYXBbY29tbWFuZCA9PSBcIm1cIiA/IFwibFwiIDogXCJMXCJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHMucHVzaChyb3VuZCh2YWx1ZSAqIHpvb20pKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMgKyB2YWxzO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcGEgPSBjb21tYW5kKHBhdGgpLCBwLCByO1xuICAgICAgICAgICAgcmVzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBwYS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcCA9IHBhW2ldO1xuICAgICAgICAgICAgICAgIHIgPSBwYVtpXVswXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIHIgPT0gXCJ6XCIgJiYgKHIgPSBcInhcIik7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDEsIGpqID0gcC5sZW5ndGg7IGogPCBqajsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHIgKz0gcm91bmQocFtqXSAqIHpvb20pICsgKGogIT0gamogLSAxID8gXCIsXCIgOiBFKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzLnB1c2gocik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpvaW4oUyk7XG4gICAgICAgIH0sXG4gICAgICAgIGNvbXBlbnNhdGlvbiA9IGZ1bmN0aW9uIChkZWcsIGR4LCBkeSkge1xuICAgICAgICAgICAgdmFyIG0gPSBSLm1hdHJpeCgpO1xuICAgICAgICAgICAgbS5yb3RhdGUoLWRlZywgLjUsIC41KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZHg6IG0ueChkeCwgZHkpLFxuICAgICAgICAgICAgICAgIGR5OiBtLnkoZHgsIGR5KVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0Q29vcmRzID0gZnVuY3Rpb24gKHAsIHN4LCBzeSwgZHgsIGR5LCBkZWcpIHtcbiAgICAgICAgICAgIHZhciBfID0gcC5fLFxuICAgICAgICAgICAgICAgIG0gPSBwLm1hdHJpeCxcbiAgICAgICAgICAgICAgICBmaWxscG9zID0gXy5maWxscG9zLFxuICAgICAgICAgICAgICAgIG8gPSBwLm5vZGUsXG4gICAgICAgICAgICAgICAgcyA9IG8uc3R5bGUsXG4gICAgICAgICAgICAgICAgeSA9IDEsXG4gICAgICAgICAgICAgICAgZmxpcCA9IFwiXCIsXG4gICAgICAgICAgICAgICAgZHhkeSxcbiAgICAgICAgICAgICAgICBreCA9IHpvb20gLyBzeCxcbiAgICAgICAgICAgICAgICBreSA9IHpvb20gLyBzeTtcbiAgICAgICAgICAgIHMudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgICAgICAgICBpZiAoIXN4IHx8ICFzeSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG8uY29vcmRzaXplID0gYWJzKGt4KSArIFMgKyBhYnMoa3kpO1xuICAgICAgICAgICAgcy5yb3RhdGlvbiA9IGRlZyAqIChzeCAqIHN5IDwgMCA/IC0xIDogMSk7XG4gICAgICAgICAgICBpZiAoZGVnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGMgPSBjb21wZW5zYXRpb24oZGVnLCBkeCwgZHkpO1xuICAgICAgICAgICAgICAgIGR4ID0gYy5keDtcbiAgICAgICAgICAgICAgICBkeSA9IGMuZHk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzeCA8IDAgJiYgKGZsaXAgKz0gXCJ4XCIpO1xuICAgICAgICAgICAgc3kgPCAwICYmIChmbGlwICs9IFwiIHlcIikgJiYgKHkgPSAtMSk7XG4gICAgICAgICAgICBzLmZsaXAgPSBmbGlwO1xuICAgICAgICAgICAgby5jb29yZG9yaWdpbiA9IChkeCAqIC1reCkgKyBTICsgKGR5ICogLWt5KTtcbiAgICAgICAgICAgIGlmIChmaWxscG9zIHx8IF8uZmlsbHNpemUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlsbCA9IG8uZ2V0RWxlbWVudHNCeVRhZ05hbWUoZmlsbFN0cmluZyk7XG4gICAgICAgICAgICAgICAgZmlsbCA9IGZpbGwgJiYgZmlsbFswXTtcbiAgICAgICAgICAgICAgICBvLnJlbW92ZUNoaWxkKGZpbGwpO1xuICAgICAgICAgICAgICAgIGlmIChmaWxscG9zKSB7XG4gICAgICAgICAgICAgICAgICAgIGMgPSBjb21wZW5zYXRpb24oZGVnLCBtLngoZmlsbHBvc1swXSwgZmlsbHBvc1sxXSksIG0ueShmaWxscG9zWzBdLCBmaWxscG9zWzFdKSk7XG4gICAgICAgICAgICAgICAgICAgIGZpbGwucG9zaXRpb24gPSBjLmR4ICogeSArIFMgKyBjLmR5ICogeTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKF8uZmlsbHNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsbC5zaXplID0gXy5maWxsc2l6ZVswXSAqIGFicyhzeCkgKyBTICsgXy5maWxsc2l6ZVsxXSAqIGFicyhzeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG8uYXBwZW5kQ2hpbGQoZmlsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcbiAgICAgICAgfTtcbiAgICBSLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gIFwiWW91ciBicm93c2VyIGRvZXNuXFx1MjAxOXQgc3VwcG9ydCBTVkcuIEZhbGxpbmcgZG93biB0byBWTUwuXFxuWW91IGFyZSBydW5uaW5nIFJhcGhhXFx4ZWJsIFwiICsgdGhpcy52ZXJzaW9uO1xuICAgIH07XG4gICAgdmFyIGFkZEFycm93ID0gZnVuY3Rpb24gKG8sIHZhbHVlLCBpc0VuZCkge1xuICAgICAgICB2YXIgdmFsdWVzID0gU3RyKHZhbHVlKS50b0xvd2VyQ2FzZSgpLnNwbGl0KFwiLVwiKSxcbiAgICAgICAgICAgIHNlID0gaXNFbmQgPyBcImVuZFwiIDogXCJzdGFydFwiLFxuICAgICAgICAgICAgaSA9IHZhbHVlcy5sZW5ndGgsXG4gICAgICAgICAgICB0eXBlID0gXCJjbGFzc2ljXCIsXG4gICAgICAgICAgICB3ID0gXCJtZWRpdW1cIixcbiAgICAgICAgICAgIGggPSBcIm1lZGl1bVwiO1xuICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHZhbHVlc1tpXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJibG9ja1wiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJjbGFzc2ljXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcIm92YWxcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwiZGlhbW9uZFwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJvcGVuXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcIm5vbmVcIjpcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA9IHZhbHVlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIndpZGVcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwibmFycm93XCI6IGggPSB2YWx1ZXNbaV07IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJsb25nXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcInNob3J0XCI6IHcgPSB2YWx1ZXNbaV07IGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBzdHJva2UgPSBvLm5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzdHJva2VcIilbMF07XG4gICAgICAgIHN0cm9rZVtzZSArIFwiYXJyb3dcIl0gPSB0eXBlO1xuICAgICAgICBzdHJva2Vbc2UgKyBcImFycm93bGVuZ3RoXCJdID0gdztcbiAgICAgICAgc3Ryb2tlW3NlICsgXCJhcnJvd3dpZHRoXCJdID0gaDtcbiAgICB9LFxuICAgIHNldEZpbGxBbmRTdHJva2UgPSBmdW5jdGlvbiAobywgcGFyYW1zKSB7XG4gICAgICAgIC8vIG8ucGFwZXIuY2FudmFzLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgby5hdHRycyA9IG8uYXR0cnMgfHwge307XG4gICAgICAgIHZhciBub2RlID0gby5ub2RlLFxuICAgICAgICAgICAgYSA9IG8uYXR0cnMsXG4gICAgICAgICAgICBzID0gbm9kZS5zdHlsZSxcbiAgICAgICAgICAgIHh5LFxuICAgICAgICAgICAgbmV3cGF0aCA9IHBhdGhUeXBlc1tvLnR5cGVdICYmIChwYXJhbXMueCAhPSBhLnggfHwgcGFyYW1zLnkgIT0gYS55IHx8IHBhcmFtcy53aWR0aCAhPSBhLndpZHRoIHx8IHBhcmFtcy5oZWlnaHQgIT0gYS5oZWlnaHQgfHwgcGFyYW1zLmN4ICE9IGEuY3ggfHwgcGFyYW1zLmN5ICE9IGEuY3kgfHwgcGFyYW1zLnJ4ICE9IGEucnggfHwgcGFyYW1zLnJ5ICE9IGEucnkgfHwgcGFyYW1zLnIgIT0gYS5yKSxcbiAgICAgICAgICAgIGlzT3ZhbCA9IG92YWxUeXBlc1tvLnR5cGVdICYmIChhLmN4ICE9IHBhcmFtcy5jeCB8fCBhLmN5ICE9IHBhcmFtcy5jeSB8fCBhLnIgIT0gcGFyYW1zLnIgfHwgYS5yeCAhPSBwYXJhbXMucnggfHwgYS5yeSAhPSBwYXJhbXMucnkpLFxuICAgICAgICAgICAgcmVzID0gbztcblxuXG4gICAgICAgIGZvciAodmFyIHBhciBpbiBwYXJhbXMpIGlmIChwYXJhbXNbaGFzXShwYXIpKSB7XG4gICAgICAgICAgICBhW3Bhcl0gPSBwYXJhbXNbcGFyXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3cGF0aCkge1xuICAgICAgICAgICAgYS5wYXRoID0gUi5fZ2V0UGF0aFtvLnR5cGVdKG8pO1xuICAgICAgICAgICAgby5fLmRpcnR5ID0gMTtcbiAgICAgICAgfVxuICAgICAgICBwYXJhbXMuaHJlZiAmJiAobm9kZS5ocmVmID0gcGFyYW1zLmhyZWYpO1xuICAgICAgICBwYXJhbXMudGl0bGUgJiYgKG5vZGUudGl0bGUgPSBwYXJhbXMudGl0bGUpO1xuICAgICAgICBwYXJhbXMudGFyZ2V0ICYmIChub2RlLnRhcmdldCA9IHBhcmFtcy50YXJnZXQpO1xuICAgICAgICBwYXJhbXMuY3Vyc29yICYmIChzLmN1cnNvciA9IHBhcmFtcy5jdXJzb3IpO1xuICAgICAgICBcImJsdXJcIiBpbiBwYXJhbXMgJiYgby5ibHVyKHBhcmFtcy5ibHVyKTtcbiAgICAgICAgaWYgKHBhcmFtcy5wYXRoICYmIG8udHlwZSA9PSBcInBhdGhcIiB8fCBuZXdwYXRoKSB7XG4gICAgICAgICAgICBub2RlLnBhdGggPSBwYXRoMnZtbCh+U3RyKGEucGF0aCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiclwiKSA/IFIuX3BhdGhUb0Fic29sdXRlKGEucGF0aCkgOiBhLnBhdGgpO1xuICAgICAgICAgICAgby5fLmRpcnR5ID0gMTtcbiAgICAgICAgICAgIGlmIChvLnR5cGUgPT0gXCJpbWFnZVwiKSB7XG4gICAgICAgICAgICAgICAgby5fLmZpbGxwb3MgPSBbYS54LCBhLnldO1xuICAgICAgICAgICAgICAgIG8uXy5maWxsc2l6ZSA9IFthLndpZHRoLCBhLmhlaWdodF07XG4gICAgICAgICAgICAgICAgc2V0Q29vcmRzKG8sIDEsIDEsIDAsIDAsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFwidHJhbnNmb3JtXCIgaW4gcGFyYW1zICYmIG8udHJhbnNmb3JtKHBhcmFtcy50cmFuc2Zvcm0pO1xuICAgICAgICBpZiAoaXNPdmFsKSB7XG4gICAgICAgICAgICB2YXIgY3ggPSArYS5jeCxcbiAgICAgICAgICAgICAgICBjeSA9ICthLmN5LFxuICAgICAgICAgICAgICAgIHJ4ID0gK2EucnggfHwgK2EuciB8fCAwLFxuICAgICAgICAgICAgICAgIHJ5ID0gK2EucnkgfHwgK2EuciB8fCAwO1xuICAgICAgICAgICAgbm9kZS5wYXRoID0gUi5mb3JtYXQoXCJhcnswfSx7MX0sezJ9LHszfSx7NH0sezF9LHs0fSx7MX14XCIsIHJvdW5kKChjeCAtIHJ4KSAqIHpvb20pLCByb3VuZCgoY3kgLSByeSkgKiB6b29tKSwgcm91bmQoKGN4ICsgcngpICogem9vbSksIHJvdW5kKChjeSArIHJ5KSAqIHpvb20pLCByb3VuZChjeCAqIHpvb20pKTtcbiAgICAgICAgICAgIG8uXy5kaXJ0eSA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFwiY2xpcC1yZWN0XCIgaW4gcGFyYW1zKSB7XG4gICAgICAgICAgICB2YXIgcmVjdCA9IFN0cihwYXJhbXNbXCJjbGlwLXJlY3RcIl0pLnNwbGl0KHNlcGFyYXRvcik7XG4gICAgICAgICAgICBpZiAocmVjdC5sZW5ndGggPT0gNCkge1xuICAgICAgICAgICAgICAgIHJlY3RbMl0gPSArcmVjdFsyXSArICgrcmVjdFswXSk7XG4gICAgICAgICAgICAgICAgcmVjdFszXSA9ICtyZWN0WzNdICsgKCtyZWN0WzFdKTtcbiAgICAgICAgICAgICAgICB2YXIgZGl2ID0gbm9kZS5jbGlwUmVjdCB8fCBSLl9nLmRvYy5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICAgICAgICAgICAgICBkc3R5bGUgPSBkaXYuc3R5bGU7XG4gICAgICAgICAgICAgICAgZHN0eWxlLmNsaXAgPSBSLmZvcm1hdChcInJlY3QoezF9cHggezJ9cHggezN9cHggezB9cHgpXCIsIHJlY3QpO1xuICAgICAgICAgICAgICAgIGlmICghbm9kZS5jbGlwUmVjdCkge1xuICAgICAgICAgICAgICAgICAgICBkc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgICAgICAgICAgICAgICAgIGRzdHlsZS50b3AgPSAwO1xuICAgICAgICAgICAgICAgICAgICBkc3R5bGUubGVmdCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGRzdHlsZS53aWR0aCA9IG8ucGFwZXIud2lkdGggKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgIGRzdHlsZS5oZWlnaHQgPSBvLnBhcGVyLmhlaWdodCArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShkaXYsIG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuY2xpcFJlY3QgPSBkaXY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFwYXJhbXNbXCJjbGlwLXJlY3RcIl0pIHtcbiAgICAgICAgICAgICAgICBub2RlLmNsaXBSZWN0ICYmIChub2RlLmNsaXBSZWN0LnN0eWxlLmNsaXAgPSBcImF1dG9cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG8udGV4dHBhdGgpIHtcbiAgICAgICAgICAgIHZhciB0ZXh0cGF0aFN0eWxlID0gby50ZXh0cGF0aC5zdHlsZTtcbiAgICAgICAgICAgIHBhcmFtcy5mb250ICYmICh0ZXh0cGF0aFN0eWxlLmZvbnQgPSBwYXJhbXMuZm9udCk7XG4gICAgICAgICAgICBwYXJhbXNbXCJmb250LWZhbWlseVwiXSAmJiAodGV4dHBhdGhTdHlsZS5mb250RmFtaWx5ID0gJ1wiJyArIHBhcmFtc1tcImZvbnQtZmFtaWx5XCJdLnNwbGl0KFwiLFwiKVswXS5yZXBsYWNlKC9eWydcIl0rfFsnXCJdKyQvZywgRSkgKyAnXCInKTtcbiAgICAgICAgICAgIHBhcmFtc1tcImZvbnQtc2l6ZVwiXSAmJiAodGV4dHBhdGhTdHlsZS5mb250U2l6ZSA9IHBhcmFtc1tcImZvbnQtc2l6ZVwiXSk7XG4gICAgICAgICAgICBwYXJhbXNbXCJmb250LXdlaWdodFwiXSAmJiAodGV4dHBhdGhTdHlsZS5mb250V2VpZ2h0ID0gcGFyYW1zW1wiZm9udC13ZWlnaHRcIl0pO1xuICAgICAgICAgICAgcGFyYW1zW1wiZm9udC1zdHlsZVwiXSAmJiAodGV4dHBhdGhTdHlsZS5mb250U3R5bGUgPSBwYXJhbXNbXCJmb250LXN0eWxlXCJdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXCJhcnJvdy1zdGFydFwiIGluIHBhcmFtcykge1xuICAgICAgICAgICAgYWRkQXJyb3cocmVzLCBwYXJhbXNbXCJhcnJvdy1zdGFydFwiXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFwiYXJyb3ctZW5kXCIgaW4gcGFyYW1zKSB7XG4gICAgICAgICAgICBhZGRBcnJvdyhyZXMsIHBhcmFtc1tcImFycm93LWVuZFwiXSwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtcy5vcGFjaXR5ICE9IG51bGwgfHxcbiAgICAgICAgICAgIHBhcmFtcy5maWxsICE9IG51bGwgfHxcbiAgICAgICAgICAgIHBhcmFtcy5zcmMgIT0gbnVsbCB8fFxuICAgICAgICAgICAgcGFyYW1zLnN0cm9rZSAhPSBudWxsIHx8XG4gICAgICAgICAgICBwYXJhbXNbXCJzdHJva2Utd2lkdGhcIl0gIT0gbnVsbCB8fFxuICAgICAgICAgICAgcGFyYW1zW1wic3Ryb2tlLW9wYWNpdHlcIl0gIT0gbnVsbCB8fFxuICAgICAgICAgICAgcGFyYW1zW1wiZmlsbC1vcGFjaXR5XCJdICE9IG51bGwgfHxcbiAgICAgICAgICAgIHBhcmFtc1tcInN0cm9rZS1kYXNoYXJyYXlcIl0gIT0gbnVsbCB8fFxuICAgICAgICAgICAgcGFyYW1zW1wic3Ryb2tlLW1pdGVybGltaXRcIl0gIT0gbnVsbCB8fFxuICAgICAgICAgICAgcGFyYW1zW1wic3Ryb2tlLWxpbmVqb2luXCJdICE9IG51bGwgfHxcbiAgICAgICAgICAgIHBhcmFtc1tcInN0cm9rZS1saW5lY2FwXCJdICE9IG51bGwpIHtcbiAgICAgICAgICAgIHZhciBmaWxsID0gbm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZShmaWxsU3RyaW5nKSxcbiAgICAgICAgICAgICAgICBuZXdmaWxsID0gZmFsc2U7XG4gICAgICAgICAgICBmaWxsID0gZmlsbCAmJiBmaWxsWzBdO1xuICAgICAgICAgICAgIWZpbGwgJiYgKG5ld2ZpbGwgPSBmaWxsID0gY3JlYXRlTm9kZShmaWxsU3RyaW5nKSk7XG4gICAgICAgICAgICBpZiAoby50eXBlID09IFwiaW1hZ2VcIiAmJiBwYXJhbXMuc3JjKSB7XG4gICAgICAgICAgICAgICAgZmlsbC5zcmMgPSBwYXJhbXMuc3JjO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyYW1zLmZpbGwgJiYgKGZpbGwub24gPSB0cnVlKTtcbiAgICAgICAgICAgIGlmIChmaWxsLm9uID09IG51bGwgfHwgcGFyYW1zLmZpbGwgPT0gXCJub25lXCIgfHwgcGFyYW1zLmZpbGwgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBmaWxsLm9uID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZmlsbC5vbiAmJiBwYXJhbXMuZmlsbCkge1xuICAgICAgICAgICAgICAgIHZhciBpc1VSTCA9IFN0cihwYXJhbXMuZmlsbCkubWF0Y2goUi5fSVNVUkwpO1xuICAgICAgICAgICAgICAgIGlmIChpc1VSTCkge1xuICAgICAgICAgICAgICAgICAgICBmaWxsLnBhcmVudE5vZGUgPT0gbm9kZSAmJiBub2RlLnJlbW92ZUNoaWxkKGZpbGwpO1xuICAgICAgICAgICAgICAgICAgICBmaWxsLnJvdGF0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGZpbGwuc3JjID0gaXNVUkxbMV07XG4gICAgICAgICAgICAgICAgICAgIGZpbGwudHlwZSA9IFwidGlsZVwiO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYmJveCA9IG8uZ2V0QkJveCgxKTtcbiAgICAgICAgICAgICAgICAgICAgZmlsbC5wb3NpdGlvbiA9IGJib3gueCArIFMgKyBiYm94Lnk7XG4gICAgICAgICAgICAgICAgICAgIG8uXy5maWxscG9zID0gW2Jib3gueCwgYmJveC55XTtcblxuICAgICAgICAgICAgICAgICAgICBSLl9wcmVsb2FkKGlzVVJMWzFdLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvLl8uZmlsbHNpemUgPSBbdGhpcy5vZmZzZXRXaWR0aCwgdGhpcy5vZmZzZXRIZWlnaHRdO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmaWxsLmNvbG9yID0gUi5nZXRSR0IocGFyYW1zLmZpbGwpLmhleDtcbiAgICAgICAgICAgICAgICAgICAgZmlsbC5zcmMgPSBFO1xuICAgICAgICAgICAgICAgICAgICBmaWxsLnR5cGUgPSBcInNvbGlkXCI7XG4gICAgICAgICAgICAgICAgICAgIGlmIChSLmdldFJHQihwYXJhbXMuZmlsbCkuZXJyb3IgJiYgKHJlcy50eXBlIGluIHtjaXJjbGU6IDEsIGVsbGlwc2U6IDF9IHx8IFN0cihwYXJhbXMuZmlsbCkuY2hhckF0KCkgIT0gXCJyXCIpICYmIGFkZEdyYWRpZW50RmlsbChyZXMsIHBhcmFtcy5maWxsLCBmaWxsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYS5maWxsID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBhLmdyYWRpZW50ID0gcGFyYW1zLmZpbGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxsLnJvdGF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFwiZmlsbC1vcGFjaXR5XCIgaW4gcGFyYW1zIHx8IFwib3BhY2l0eVwiIGluIHBhcmFtcykge1xuICAgICAgICAgICAgICAgIHZhciBvcGFjaXR5ID0gKCgrYVtcImZpbGwtb3BhY2l0eVwiXSArIDEgfHwgMikgLSAxKSAqICgoK2Eub3BhY2l0eSArIDEgfHwgMikgLSAxKSAqICgoK1IuZ2V0UkdCKHBhcmFtcy5maWxsKS5vICsgMSB8fCAyKSAtIDEpO1xuICAgICAgICAgICAgICAgIG9wYWNpdHkgPSBtbWluKG1tYXgob3BhY2l0eSwgMCksIDEpO1xuICAgICAgICAgICAgICAgIGZpbGwub3BhY2l0eSA9IG9wYWNpdHk7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGwuc3JjKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGwuY29sb3IgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGZpbGwpO1xuICAgICAgICAgICAgdmFyIHN0cm9rZSA9IChub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic3Ryb2tlXCIpICYmIG5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzdHJva2VcIilbMF0pLFxuICAgICAgICAgICAgbmV3c3Ryb2tlID0gZmFsc2U7XG4gICAgICAgICAgICAhc3Ryb2tlICYmIChuZXdzdHJva2UgPSBzdHJva2UgPSBjcmVhdGVOb2RlKFwic3Ryb2tlXCIpKTtcbiAgICAgICAgICAgIGlmICgocGFyYW1zLnN0cm9rZSAmJiBwYXJhbXMuc3Ryb2tlICE9IFwibm9uZVwiKSB8fFxuICAgICAgICAgICAgICAgIHBhcmFtc1tcInN0cm9rZS13aWR0aFwiXSB8fFxuICAgICAgICAgICAgICAgIHBhcmFtc1tcInN0cm9rZS1vcGFjaXR5XCJdICE9IG51bGwgfHxcbiAgICAgICAgICAgICAgICBwYXJhbXNbXCJzdHJva2UtZGFzaGFycmF5XCJdIHx8XG4gICAgICAgICAgICAgICAgcGFyYW1zW1wic3Ryb2tlLW1pdGVybGltaXRcIl0gfHxcbiAgICAgICAgICAgICAgICBwYXJhbXNbXCJzdHJva2UtbGluZWpvaW5cIl0gfHxcbiAgICAgICAgICAgICAgICBwYXJhbXNbXCJzdHJva2UtbGluZWNhcFwiXSkge1xuICAgICAgICAgICAgICAgIHN0cm9rZS5vbiA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAocGFyYW1zLnN0cm9rZSA9PSBcIm5vbmVcIiB8fCBwYXJhbXMuc3Ryb2tlID09PSBudWxsIHx8IHN0cm9rZS5vbiA9PSBudWxsIHx8IHBhcmFtcy5zdHJva2UgPT0gMCB8fCBwYXJhbXNbXCJzdHJva2Utd2lkdGhcIl0gPT0gMCkgJiYgKHN0cm9rZS5vbiA9IGZhbHNlKTtcbiAgICAgICAgICAgIHZhciBzdHJva2VDb2xvciA9IFIuZ2V0UkdCKHBhcmFtcy5zdHJva2UpO1xuICAgICAgICAgICAgc3Ryb2tlLm9uICYmIHBhcmFtcy5zdHJva2UgJiYgKHN0cm9rZS5jb2xvciA9IHN0cm9rZUNvbG9yLmhleCk7XG4gICAgICAgICAgICBvcGFjaXR5ID0gKCgrYVtcInN0cm9rZS1vcGFjaXR5XCJdICsgMSB8fCAyKSAtIDEpICogKCgrYS5vcGFjaXR5ICsgMSB8fCAyKSAtIDEpICogKCgrc3Ryb2tlQ29sb3IubyArIDEgfHwgMikgLSAxKTtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9ICh0b0Zsb2F0KHBhcmFtc1tcInN0cm9rZS13aWR0aFwiXSkgfHwgMSkgKiAuNzU7XG4gICAgICAgICAgICBvcGFjaXR5ID0gbW1pbihtbWF4KG9wYWNpdHksIDApLCAxKTtcbiAgICAgICAgICAgIHBhcmFtc1tcInN0cm9rZS13aWR0aFwiXSA9PSBudWxsICYmICh3aWR0aCA9IGFbXCJzdHJva2Utd2lkdGhcIl0pO1xuICAgICAgICAgICAgcGFyYW1zW1wic3Ryb2tlLXdpZHRoXCJdICYmIChzdHJva2Uud2VpZ2h0ID0gd2lkdGgpO1xuICAgICAgICAgICAgd2lkdGggJiYgd2lkdGggPCAxICYmIChvcGFjaXR5ICo9IHdpZHRoKSAmJiAoc3Ryb2tlLndlaWdodCA9IDEpO1xuICAgICAgICAgICAgc3Ryb2tlLm9wYWNpdHkgPSBvcGFjaXR5O1xuXG4gICAgICAgICAgICBwYXJhbXNbXCJzdHJva2UtbGluZWpvaW5cIl0gJiYgKHN0cm9rZS5qb2luc3R5bGUgPSBwYXJhbXNbXCJzdHJva2UtbGluZWpvaW5cIl0gfHwgXCJtaXRlclwiKTtcbiAgICAgICAgICAgIHN0cm9rZS5taXRlcmxpbWl0ID0gcGFyYW1zW1wic3Ryb2tlLW1pdGVybGltaXRcIl0gfHwgODtcbiAgICAgICAgICAgIHBhcmFtc1tcInN0cm9rZS1saW5lY2FwXCJdICYmIChzdHJva2UuZW5kY2FwID0gcGFyYW1zW1wic3Ryb2tlLWxpbmVjYXBcIl0gPT0gXCJidXR0XCIgPyBcImZsYXRcIiA6IHBhcmFtc1tcInN0cm9rZS1saW5lY2FwXCJdID09IFwic3F1YXJlXCIgPyBcInNxdWFyZVwiIDogXCJyb3VuZFwiKTtcbiAgICAgICAgICAgIGlmIChcInN0cm9rZS1kYXNoYXJyYXlcIiBpbiBwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGFzaGFycmF5ID0ge1xuICAgICAgICAgICAgICAgICAgICBcIi1cIjogXCJzaG9ydGRhc2hcIixcbiAgICAgICAgICAgICAgICAgICAgXCIuXCI6IFwic2hvcnRkb3RcIixcbiAgICAgICAgICAgICAgICAgICAgXCItLlwiOiBcInNob3J0ZGFzaGRvdFwiLFxuICAgICAgICAgICAgICAgICAgICBcIi0uLlwiOiBcInNob3J0ZGFzaGRvdGRvdFwiLFxuICAgICAgICAgICAgICAgICAgICBcIi4gXCI6IFwiZG90XCIsXG4gICAgICAgICAgICAgICAgICAgIFwiLSBcIjogXCJkYXNoXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiLS1cIjogXCJsb25nZGFzaFwiLFxuICAgICAgICAgICAgICAgICAgICBcIi0gLlwiOiBcImRhc2hkb3RcIixcbiAgICAgICAgICAgICAgICAgICAgXCItLS5cIjogXCJsb25nZGFzaGRvdFwiLFxuICAgICAgICAgICAgICAgICAgICBcIi0tLi5cIjogXCJsb25nZGFzaGRvdGRvdFwiXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBzdHJva2UuZGFzaHN0eWxlID0gZGFzaGFycmF5W2hhc10ocGFyYW1zW1wic3Ryb2tlLWRhc2hhcnJheVwiXSkgPyBkYXNoYXJyYXlbcGFyYW1zW1wic3Ryb2tlLWRhc2hhcnJheVwiXV0gOiBFO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3c3Ryb2tlICYmIG5vZGUuYXBwZW5kQ2hpbGQoc3Ryb2tlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzLnR5cGUgPT0gXCJ0ZXh0XCIpIHtcbiAgICAgICAgICAgIHJlcy5wYXBlci5jYW52YXMuc3R5bGUuZGlzcGxheSA9IEU7XG4gICAgICAgICAgICB2YXIgc3BhbiA9IHJlcy5wYXBlci5zcGFuLFxuICAgICAgICAgICAgICAgIG0gPSAxMDAsXG4gICAgICAgICAgICAgICAgZm9udFNpemUgPSBhLmZvbnQgJiYgYS5mb250Lm1hdGNoKC9cXGQrKD86XFwuXFxkKik/KD89cHgpLyk7XG4gICAgICAgICAgICBzID0gc3Bhbi5zdHlsZTtcbiAgICAgICAgICAgIGEuZm9udCAmJiAocy5mb250ID0gYS5mb250KTtcbiAgICAgICAgICAgIGFbXCJmb250LWZhbWlseVwiXSAmJiAocy5mb250RmFtaWx5ID0gYVtcImZvbnQtZmFtaWx5XCJdKTtcbiAgICAgICAgICAgIGFbXCJmb250LXdlaWdodFwiXSAmJiAocy5mb250V2VpZ2h0ID0gYVtcImZvbnQtd2VpZ2h0XCJdKTtcbiAgICAgICAgICAgIGFbXCJmb250LXN0eWxlXCJdICYmIChzLmZvbnRTdHlsZSA9IGFbXCJmb250LXN0eWxlXCJdKTtcbiAgICAgICAgICAgIGZvbnRTaXplID0gdG9GbG9hdChhW1wiZm9udC1zaXplXCJdIHx8IGZvbnRTaXplICYmIGZvbnRTaXplWzBdKSB8fCAxMDtcbiAgICAgICAgICAgIHMuZm9udFNpemUgPSBmb250U2l6ZSAqIG0gKyBcInB4XCI7XG4gICAgICAgICAgICByZXMudGV4dHBhdGguc3RyaW5nICYmIChzcGFuLmlubmVySFRNTCA9IFN0cihyZXMudGV4dHBhdGguc3RyaW5nKS5yZXBsYWNlKC88L2csIFwiJiM2MDtcIikucmVwbGFjZSgvJi9nLCBcIiYjMzg7XCIpLnJlcGxhY2UoL1xcbi9nLCBcIjxicj5cIikpO1xuICAgICAgICAgICAgdmFyIGJyZWN0ID0gc3Bhbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHJlcy5XID0gYS53ID0gKGJyZWN0LnJpZ2h0IC0gYnJlY3QubGVmdCkgLyBtO1xuICAgICAgICAgICAgcmVzLkggPSBhLmggPSAoYnJlY3QuYm90dG9tIC0gYnJlY3QudG9wKSAvIG07XG4gICAgICAgICAgICAvLyByZXMucGFwZXIuY2FudmFzLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIHJlcy5YID0gYS54O1xuICAgICAgICAgICAgcmVzLlkgPSBhLnkgKyByZXMuSCAvIDI7XG5cbiAgICAgICAgICAgIChcInhcIiBpbiBwYXJhbXMgfHwgXCJ5XCIgaW4gcGFyYW1zKSAmJiAocmVzLnBhdGgudiA9IFIuZm9ybWF0KFwibXswfSx7MX1sezJ9LHsxfVwiLCByb3VuZChhLnggKiB6b29tKSwgcm91bmQoYS55ICogem9vbSksIHJvdW5kKGEueCAqIHpvb20pICsgMSkpO1xuICAgICAgICAgICAgdmFyIGRpcnR5YXR0cnMgPSBbXCJ4XCIsIFwieVwiLCBcInRleHRcIiwgXCJmb250XCIsIFwiZm9udC1mYW1pbHlcIiwgXCJmb250LXdlaWdodFwiLCBcImZvbnQtc3R5bGVcIiwgXCJmb250LXNpemVcIl07XG4gICAgICAgICAgICBmb3IgKHZhciBkID0gMCwgZGQgPSBkaXJ0eWF0dHJzLmxlbmd0aDsgZCA8IGRkOyBkKyspIGlmIChkaXJ0eWF0dHJzW2RdIGluIHBhcmFtcykge1xuICAgICAgICAgICAgICAgIHJlcy5fLmRpcnR5ID0gMTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gdGV4dC1hbmNob3IgZW11bGF0aW9uXG4gICAgICAgICAgICBzd2l0Y2ggKGFbXCJ0ZXh0LWFuY2hvclwiXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJzdGFydFwiOlxuICAgICAgICAgICAgICAgICAgICByZXMudGV4dHBhdGguc3R5bGVbXCJ2LXRleHQtYWxpZ25cIl0gPSBcImxlZnRcIjtcbiAgICAgICAgICAgICAgICAgICAgcmVzLmJieCA9IHJlcy5XIC8gMjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgICAgICAgIHJlcy50ZXh0cGF0aC5zdHlsZVtcInYtdGV4dC1hbGlnblwiXSA9IFwicmlnaHRcIjtcbiAgICAgICAgICAgICAgICAgICAgcmVzLmJieCA9IC1yZXMuVyAvIDI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVzLnRleHRwYXRoLnN0eWxlW1widi10ZXh0LWFsaWduXCJdID0gXCJjZW50ZXJcIjtcbiAgICAgICAgICAgICAgICAgICAgcmVzLmJieCA9IDA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXMudGV4dHBhdGguc3R5bGVbXCJ2LXRleHQta2VyblwiXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVzLnBhcGVyLmNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gRTtcbiAgICB9LFxuICAgIGFkZEdyYWRpZW50RmlsbCA9IGZ1bmN0aW9uIChvLCBncmFkaWVudCwgZmlsbCkge1xuICAgICAgICBvLmF0dHJzID0gby5hdHRycyB8fCB7fTtcbiAgICAgICAgdmFyIGF0dHJzID0gby5hdHRycyxcbiAgICAgICAgICAgIHBvdyA9IE1hdGgucG93LFxuICAgICAgICAgICAgb3BhY2l0eSxcbiAgICAgICAgICAgIG9pbmRleCxcbiAgICAgICAgICAgIHR5cGUgPSBcImxpbmVhclwiLFxuICAgICAgICAgICAgZnhmeSA9IFwiLjUgLjVcIjtcbiAgICAgICAgby5hdHRycy5ncmFkaWVudCA9IGdyYWRpZW50O1xuICAgICAgICBncmFkaWVudCA9IFN0cihncmFkaWVudCkucmVwbGFjZShSLl9yYWRpYWxfZ3JhZGllbnQsIGZ1bmN0aW9uIChhbGwsIGZ4LCBmeSkge1xuICAgICAgICAgICAgdHlwZSA9IFwicmFkaWFsXCI7XG4gICAgICAgICAgICBpZiAoZnggJiYgZnkpIHtcbiAgICAgICAgICAgICAgICBmeCA9IHRvRmxvYXQoZngpO1xuICAgICAgICAgICAgICAgIGZ5ID0gdG9GbG9hdChmeSk7XG4gICAgICAgICAgICAgICAgcG93KGZ4IC0gLjUsIDIpICsgcG93KGZ5IC0gLjUsIDIpID4gLjI1ICYmIChmeSA9IG1hdGguc3FydCguMjUgLSBwb3coZnggLSAuNSwgMikpICogKChmeSA+IC41KSAqIDIgLSAxKSArIC41KTtcbiAgICAgICAgICAgICAgICBmeGZ5ID0gZnggKyBTICsgZnk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gRTtcbiAgICAgICAgfSk7XG4gICAgICAgIGdyYWRpZW50ID0gZ3JhZGllbnQuc3BsaXQoL1xccypcXC1cXHMqLyk7XG4gICAgICAgIGlmICh0eXBlID09IFwibGluZWFyXCIpIHtcbiAgICAgICAgICAgIHZhciBhbmdsZSA9IGdyYWRpZW50LnNoaWZ0KCk7XG4gICAgICAgICAgICBhbmdsZSA9IC10b0Zsb2F0KGFuZ2xlKTtcbiAgICAgICAgICAgIGlmIChpc05hTihhbmdsZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgZG90cyA9IFIuX3BhcnNlRG90cyhncmFkaWVudCk7XG4gICAgICAgIGlmICghZG90cykge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgbyA9IG8uc2hhcGUgfHwgby5ub2RlO1xuICAgICAgICBpZiAoZG90cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIG8ucmVtb3ZlQ2hpbGQoZmlsbCk7XG4gICAgICAgICAgICBmaWxsLm9uID0gdHJ1ZTtcbiAgICAgICAgICAgIGZpbGwubWV0aG9kID0gXCJub25lXCI7XG4gICAgICAgICAgICBmaWxsLmNvbG9yID0gZG90c1swXS5jb2xvcjtcbiAgICAgICAgICAgIGZpbGwuY29sb3IyID0gZG90c1tkb3RzLmxlbmd0aCAtIDFdLmNvbG9yO1xuICAgICAgICAgICAgdmFyIGNscnMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGRvdHMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIGRvdHNbaV0ub2Zmc2V0ICYmIGNscnMucHVzaChkb3RzW2ldLm9mZnNldCArIFMgKyBkb3RzW2ldLmNvbG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbGwuY29sb3JzID0gY2xycy5sZW5ndGggPyBjbHJzLmpvaW4oKSA6IFwiMCUgXCIgKyBmaWxsLmNvbG9yO1xuICAgICAgICAgICAgaWYgKHR5cGUgPT0gXCJyYWRpYWxcIikge1xuICAgICAgICAgICAgICAgIGZpbGwudHlwZSA9IFwiZ3JhZGllbnRUaXRsZVwiO1xuICAgICAgICAgICAgICAgIGZpbGwuZm9jdXMgPSBcIjEwMCVcIjtcbiAgICAgICAgICAgICAgICBmaWxsLmZvY3Vzc2l6ZSA9IFwiMCAwXCI7XG4gICAgICAgICAgICAgICAgZmlsbC5mb2N1c3Bvc2l0aW9uID0gZnhmeTtcbiAgICAgICAgICAgICAgICBmaWxsLmFuZ2xlID0gMDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gZmlsbC5yb3RhdGU9IHRydWU7XG4gICAgICAgICAgICAgICAgZmlsbC50eXBlID0gXCJncmFkaWVudFwiO1xuICAgICAgICAgICAgICAgIGZpbGwuYW5nbGUgPSAoMjcwIC0gYW5nbGUpICUgMzYwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgby5hcHBlbmRDaGlsZChmaWxsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMTtcbiAgICB9LFxuICAgIEVsZW1lbnQgPSBmdW5jdGlvbiAobm9kZSwgdm1sKSB7XG4gICAgICAgIHRoaXNbMF0gPSB0aGlzLm5vZGUgPSBub2RlO1xuICAgICAgICBub2RlLnJhcGhhZWwgPSB0cnVlO1xuICAgICAgICB0aGlzLmlkID0gUi5fb2lkKys7XG4gICAgICAgIG5vZGUucmFwaGFlbGlkID0gdGhpcy5pZDtcbiAgICAgICAgdGhpcy5YID0gMDtcbiAgICAgICAgdGhpcy5ZID0gMDtcbiAgICAgICAgdGhpcy5hdHRycyA9IHt9O1xuICAgICAgICB0aGlzLnBhcGVyID0gdm1sO1xuICAgICAgICB0aGlzLm1hdHJpeCA9IFIubWF0cml4KCk7XG4gICAgICAgIHRoaXMuXyA9IHtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogW10sXG4gICAgICAgICAgICBzeDogMSxcbiAgICAgICAgICAgIHN5OiAxLFxuICAgICAgICAgICAgZHg6IDAsXG4gICAgICAgICAgICBkeTogMCxcbiAgICAgICAgICAgIGRlZzogMCxcbiAgICAgICAgICAgIGRpcnR5OiAxLFxuICAgICAgICAgICAgZGlydHlUOiAxXG4gICAgICAgIH07XG4gICAgICAgICF2bWwuYm90dG9tICYmICh2bWwuYm90dG9tID0gdGhpcyk7XG4gICAgICAgIHRoaXMucHJldiA9IHZtbC50b3A7XG4gICAgICAgIHZtbC50b3AgJiYgKHZtbC50b3AubmV4dCA9IHRoaXMpO1xuICAgICAgICB2bWwudG9wID0gdGhpcztcbiAgICAgICAgdGhpcy5uZXh0ID0gbnVsbDtcbiAgICB9O1xuICAgIHZhciBlbHByb3RvID0gUi5lbDtcblxuICAgIEVsZW1lbnQucHJvdG90eXBlID0gZWxwcm90bztcbiAgICBlbHByb3RvLmNvbnN0cnVjdG9yID0gRWxlbWVudDtcbiAgICBlbHByb3RvLnRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0c3RyKSB7XG4gICAgICAgIGlmICh0c3RyID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl8udHJhbnNmb3JtO1xuICAgICAgICB9XG4gICAgICAgIHZhciB2YnMgPSB0aGlzLnBhcGVyLl92aWV3Qm94U2hpZnQsXG4gICAgICAgICAgICB2YnQgPSB2YnMgPyBcInNcIiArIFt2YnMuc2NhbGUsIHZicy5zY2FsZV0gKyBcIi0xLTF0XCIgKyBbdmJzLmR4LCB2YnMuZHldIDogRSxcbiAgICAgICAgICAgIG9sZHQ7XG4gICAgICAgIGlmICh2YnMpIHtcbiAgICAgICAgICAgIG9sZHQgPSB0c3RyID0gU3RyKHRzdHIpLnJlcGxhY2UoL1xcLnszfXxcXHUyMDI2L2csIHRoaXMuXy50cmFuc2Zvcm0gfHwgRSk7XG4gICAgICAgIH1cbiAgICAgICAgUi5fZXh0cmFjdFRyYW5zZm9ybSh0aGlzLCB2YnQgKyB0c3RyKTtcbiAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMubWF0cml4LmNsb25lKCksXG4gICAgICAgICAgICBza2V3ID0gdGhpcy5za2V3LFxuICAgICAgICAgICAgbyA9IHRoaXMubm9kZSxcbiAgICAgICAgICAgIHNwbGl0LFxuICAgICAgICAgICAgaXNHcmFkID0gflN0cih0aGlzLmF0dHJzLmZpbGwpLmluZGV4T2YoXCItXCIpLFxuICAgICAgICAgICAgaXNQYXR0ID0gIVN0cih0aGlzLmF0dHJzLmZpbGwpLmluZGV4T2YoXCJ1cmwoXCIpO1xuICAgICAgICBtYXRyaXgudHJhbnNsYXRlKDEsIDEpO1xuICAgICAgICBpZiAoaXNQYXR0IHx8IGlzR3JhZCB8fCB0aGlzLnR5cGUgPT0gXCJpbWFnZVwiKSB7XG4gICAgICAgICAgICBza2V3Lm1hdHJpeCA9IFwiMSAwIDAgMVwiO1xuICAgICAgICAgICAgc2tldy5vZmZzZXQgPSBcIjAgMFwiO1xuICAgICAgICAgICAgc3BsaXQgPSBtYXRyaXguc3BsaXQoKTtcbiAgICAgICAgICAgIGlmICgoaXNHcmFkICYmIHNwbGl0Lm5vUm90YXRpb24pIHx8ICFzcGxpdC5pc1NpbXBsZSkge1xuICAgICAgICAgICAgICAgIG8uc3R5bGUuZmlsdGVyID0gbWF0cml4LnRvRmlsdGVyKCk7XG4gICAgICAgICAgICAgICAgdmFyIGJiID0gdGhpcy5nZXRCQm94KCksXG4gICAgICAgICAgICAgICAgICAgIGJidCA9IHRoaXMuZ2V0QkJveCgxKSxcbiAgICAgICAgICAgICAgICAgICAgZHggPSBiYi54IC0gYmJ0LngsXG4gICAgICAgICAgICAgICAgICAgIGR5ID0gYmIueSAtIGJidC55O1xuICAgICAgICAgICAgICAgIG8uY29vcmRvcmlnaW4gPSAoZHggKiAtem9vbSkgKyBTICsgKGR5ICogLXpvb20pO1xuICAgICAgICAgICAgICAgIHNldENvb3Jkcyh0aGlzLCAxLCAxLCBkeCwgZHksIDApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvLnN0eWxlLmZpbHRlciA9IEU7XG4gICAgICAgICAgICAgICAgc2V0Q29vcmRzKHRoaXMsIHNwbGl0LnNjYWxleCwgc3BsaXQuc2NhbGV5LCBzcGxpdC5keCwgc3BsaXQuZHksIHNwbGl0LnJvdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvLnN0eWxlLmZpbHRlciA9IEU7XG4gICAgICAgICAgICBza2V3Lm1hdHJpeCA9IFN0cihtYXRyaXgpO1xuICAgICAgICAgICAgc2tldy5vZmZzZXQgPSBtYXRyaXgub2Zmc2V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9sZHQgIT09IG51bGwpIHsgLy8gZW1wdHkgc3RyaW5nIHZhbHVlIGlzIHRydWUgYXMgd2VsbFxuICAgICAgICAgICAgdGhpcy5fLnRyYW5zZm9ybSA9IG9sZHQ7XG4gICAgICAgICAgICBSLl9leHRyYWN0VHJhbnNmb3JtKHRoaXMsIG9sZHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgZWxwcm90by5yb3RhdGUgPSBmdW5jdGlvbiAoZGVnLCBjeCwgY3kpIHtcbiAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZyA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZGVnID0gU3RyKGRlZykuc3BsaXQoc2VwYXJhdG9yKTtcbiAgICAgICAgaWYgKGRlZy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBjeCA9IHRvRmxvYXQoZGVnWzFdKTtcbiAgICAgICAgICAgIGN5ID0gdG9GbG9hdChkZWdbMl0pO1xuICAgICAgICB9XG4gICAgICAgIGRlZyA9IHRvRmxvYXQoZGVnWzBdKTtcbiAgICAgICAgKGN5ID09IG51bGwpICYmIChjeCA9IGN5KTtcbiAgICAgICAgaWYgKGN4ID09IG51bGwgfHwgY3kgPT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyIGJib3ggPSB0aGlzLmdldEJCb3goMSk7XG4gICAgICAgICAgICBjeCA9IGJib3gueCArIGJib3gud2lkdGggLyAyO1xuICAgICAgICAgICAgY3kgPSBiYm94LnkgKyBiYm94LmhlaWdodCAvIDI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fLmRpcnR5VCA9IDE7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtKHRoaXMuXy50cmFuc2Zvcm0uY29uY2F0KFtbXCJyXCIsIGRlZywgY3gsIGN5XV0pKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBlbHByb3RvLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uIChkeCwgZHkpIHtcbiAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgZHggPSBTdHIoZHgpLnNwbGl0KHNlcGFyYXRvcik7XG4gICAgICAgIGlmIChkeC5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBkeSA9IHRvRmxvYXQoZHhbMV0pO1xuICAgICAgICB9XG4gICAgICAgIGR4ID0gdG9GbG9hdChkeFswXSkgfHwgMDtcbiAgICAgICAgZHkgPSArZHkgfHwgMDtcbiAgICAgICAgaWYgKHRoaXMuXy5iYm94KSB7XG4gICAgICAgICAgICB0aGlzLl8uYmJveC54ICs9IGR4O1xuICAgICAgICAgICAgdGhpcy5fLmJib3gueSArPSBkeTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRyYW5zZm9ybSh0aGlzLl8udHJhbnNmb3JtLmNvbmNhdChbW1widFwiLCBkeCwgZHldXSkpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIGVscHJvdG8uc2NhbGUgPSBmdW5jdGlvbiAoc3gsIHN5LCBjeCwgY3kpIHtcbiAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgc3ggPSBTdHIoc3gpLnNwbGl0KHNlcGFyYXRvcik7XG4gICAgICAgIGlmIChzeC5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBzeSA9IHRvRmxvYXQoc3hbMV0pO1xuICAgICAgICAgICAgY3ggPSB0b0Zsb2F0KHN4WzJdKTtcbiAgICAgICAgICAgIGN5ID0gdG9GbG9hdChzeFszXSk7XG4gICAgICAgICAgICBpc05hTihjeCkgJiYgKGN4ID0gbnVsbCk7XG4gICAgICAgICAgICBpc05hTihjeSkgJiYgKGN5ID0gbnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgc3ggPSB0b0Zsb2F0KHN4WzBdKTtcbiAgICAgICAgKHN5ID09IG51bGwpICYmIChzeSA9IHN4KTtcbiAgICAgICAgKGN5ID09IG51bGwpICYmIChjeCA9IGN5KTtcbiAgICAgICAgaWYgKGN4ID09IG51bGwgfHwgY3kgPT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyIGJib3ggPSB0aGlzLmdldEJCb3goMSk7XG4gICAgICAgIH1cbiAgICAgICAgY3ggPSBjeCA9PSBudWxsID8gYmJveC54ICsgYmJveC53aWR0aCAvIDIgOiBjeDtcbiAgICAgICAgY3kgPSBjeSA9PSBudWxsID8gYmJveC55ICsgYmJveC5oZWlnaHQgLyAyIDogY3k7XG5cbiAgICAgICAgdGhpcy50cmFuc2Zvcm0odGhpcy5fLnRyYW5zZm9ybS5jb25jYXQoW1tcInNcIiwgc3gsIHN5LCBjeCwgY3ldXSkpO1xuICAgICAgICB0aGlzLl8uZGlydHlUID0gMTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBlbHByb3RvLmhpZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICF0aGlzLnJlbW92ZWQgJiYgKHRoaXMubm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIGVscHJvdG8uc2hvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgIXRoaXMucmVtb3ZlZCAmJiAodGhpcy5ub2RlLnN0eWxlLmRpc3BsYXkgPSBFKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvLyBOZWVkZWQgdG8gZml4IHRoZSB2bWwgc2V0Vmlld0JveCBpc3N1ZXNcbiAgICBlbHByb3RvLmF1eEdldEJCb3ggPSBSLmVsLmdldEJCb3g7XG4gICAgZWxwcm90by5nZXRCQm94ID0gZnVuY3Rpb24oKXtcbiAgICAgIHZhciBiID0gdGhpcy5hdXhHZXRCQm94KCk7XG4gICAgICBpZiAodGhpcy5wYXBlciAmJiB0aGlzLnBhcGVyLl92aWV3Qm94U2hpZnQpXG4gICAgICB7XG4gICAgICAgIHZhciBjID0ge307XG4gICAgICAgIHZhciB6ID0gMS90aGlzLnBhcGVyLl92aWV3Qm94U2hpZnQuc2NhbGU7XG4gICAgICAgIGMueCA9IGIueCAtIHRoaXMucGFwZXIuX3ZpZXdCb3hTaGlmdC5keDtcbiAgICAgICAgYy54ICo9IHo7XG4gICAgICAgIGMueSA9IGIueSAtIHRoaXMucGFwZXIuX3ZpZXdCb3hTaGlmdC5keTtcbiAgICAgICAgYy55ICo9IHo7XG4gICAgICAgIGMud2lkdGggID0gYi53aWR0aCAgKiB6O1xuICAgICAgICBjLmhlaWdodCA9IGIuaGVpZ2h0ICogejtcbiAgICAgICAgYy54MiA9IGMueCArIGMud2lkdGg7XG4gICAgICAgIGMueTIgPSBjLnkgKyBjLmhlaWdodDtcbiAgICAgICAgcmV0dXJuIGM7XG4gICAgICB9XG4gICAgICByZXR1cm4gYjtcbiAgICB9O1xuICAgIGVscHJvdG8uX2dldEJCb3ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbW92ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogdGhpcy5YICsgKHRoaXMuYmJ4IHx8IDApIC0gdGhpcy5XIC8gMixcbiAgICAgICAgICAgIHk6IHRoaXMuWSAtIHRoaXMuSCxcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLlcsXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMuSFxuICAgICAgICB9O1xuICAgIH07XG4gICAgZWxwcm90by5yZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbW92ZWQgfHwgIXRoaXMubm9kZS5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXBlci5fX3NldF9fICYmIHRoaXMucGFwZXIuX19zZXRfXy5leGNsdWRlKHRoaXMpO1xuICAgICAgICBSLmV2ZS51bmJpbmQoXCJyYXBoYWVsLiouKi5cIiArIHRoaXMuaWQpO1xuICAgICAgICBSLl90ZWFyKHRoaXMsIHRoaXMucGFwZXIpO1xuICAgICAgICB0aGlzLm5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLm5vZGUpO1xuICAgICAgICB0aGlzLnNoYXBlICYmIHRoaXMuc2hhcGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnNoYXBlKTtcbiAgICAgICAgZm9yICh2YXIgaSBpbiB0aGlzKSB7XG4gICAgICAgICAgICB0aGlzW2ldID0gdHlwZW9mIHRoaXNbaV0gPT0gXCJmdW5jdGlvblwiID8gUi5fcmVtb3ZlZEZhY3RvcnkoaSkgOiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVtb3ZlZCA9IHRydWU7XG4gICAgfTtcbiAgICBlbHByb3RvLmF0dHIgPSBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5hbWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyIHJlcyA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgYSBpbiB0aGlzLmF0dHJzKSBpZiAodGhpcy5hdHRyc1toYXNdKGEpKSB7XG4gICAgICAgICAgICAgICAgcmVzW2FdID0gdGhpcy5hdHRyc1thXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcy5ncmFkaWVudCAmJiByZXMuZmlsbCA9PSBcIm5vbmVcIiAmJiAocmVzLmZpbGwgPSByZXMuZ3JhZGllbnQpICYmIGRlbGV0ZSByZXMuZ3JhZGllbnQ7XG4gICAgICAgICAgICByZXMudHJhbnNmb3JtID0gdGhpcy5fLnRyYW5zZm9ybTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwgJiYgUi5pcyhuYW1lLCBcInN0cmluZ1wiKSkge1xuICAgICAgICAgICAgaWYgKG5hbWUgPT0gZmlsbFN0cmluZyAmJiB0aGlzLmF0dHJzLmZpbGwgPT0gXCJub25lXCIgJiYgdGhpcy5hdHRycy5ncmFkaWVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmF0dHJzLmdyYWRpZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG5hbWVzID0gbmFtZS5zcGxpdChzZXBhcmF0b3IpLFxuICAgICAgICAgICAgICAgIG91dCA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbmFtZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAobmFtZSBpbiB0aGlzLmF0dHJzKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dFtuYW1lXSA9IHRoaXMuYXR0cnNbbmFtZV07XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChSLmlzKHRoaXMucGFwZXIuY3VzdG9tQXR0cmlidXRlc1tuYW1lXSwgXCJmdW5jdGlvblwiKSkge1xuICAgICAgICAgICAgICAgICAgICBvdXRbbmFtZV0gPSB0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNbbmFtZV0uZGVmO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG91dFtuYW1lXSA9IFIuX2F2YWlsYWJsZUF0dHJzW25hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpaSAtIDEgPyBvdXQgOiBvdXRbbmFtZXNbMF1dO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmF0dHJzICYmIHZhbHVlID09IG51bGwgJiYgUi5pcyhuYW1lLCBcImFycmF5XCIpKSB7XG4gICAgICAgICAgICBvdXQgPSB7fTtcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGlpID0gbmFtZS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgb3V0W25hbWVbaV1dID0gdGhpcy5hdHRyKG5hbWVbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGFyYW1zO1xuICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgcGFyYW1zID0ge307XG4gICAgICAgICAgICBwYXJhbXNbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZSA9PSBudWxsICYmIFIuaXMobmFtZSwgXCJvYmplY3RcIikgJiYgKHBhcmFtcyA9IG5hbWUpO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gcGFyYW1zKSB7XG4gICAgICAgICAgICBldmUoXCJyYXBoYWVsLmF0dHIuXCIgKyBrZXkgKyBcIi5cIiArIHRoaXMuaWQsIHRoaXMsIHBhcmFtc1trZXldKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1zKSB7XG4gICAgICAgICAgICBmb3IgKGtleSBpbiB0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXMpIGlmICh0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNbaGFzXShrZXkpICYmIHBhcmFtc1toYXNdKGtleSkgJiYgUi5pcyh0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNba2V5XSwgXCJmdW5jdGlvblwiKSkge1xuICAgICAgICAgICAgICAgIHZhciBwYXIgPSB0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNba2V5XS5hcHBseSh0aGlzLCBbXS5jb25jYXQocGFyYW1zW2tleV0pKTtcbiAgICAgICAgICAgICAgICB0aGlzLmF0dHJzW2tleV0gPSBwYXJhbXNba2V5XTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBzdWJrZXkgaW4gcGFyKSBpZiAocGFyW2hhc10oc3Via2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBwYXJhbXNbc3Via2V5XSA9IHBhcltzdWJrZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHRoaXMucGFwZXIuY2FudmFzLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIGlmIChwYXJhbXMudGV4dCAmJiB0aGlzLnR5cGUgPT0gXCJ0ZXh0XCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRleHRwYXRoLnN0cmluZyA9IHBhcmFtcy50ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0RmlsbEFuZFN0cm9rZSh0aGlzLCBwYXJhbXMpO1xuICAgICAgICAgICAgLy8gdGhpcy5wYXBlci5jYW52YXMuc3R5bGUuZGlzcGxheSA9IEU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBlbHByb3RvLnRvRnJvbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICF0aGlzLnJlbW92ZWQgJiYgdGhpcy5ub2RlLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTtcbiAgICAgICAgdGhpcy5wYXBlciAmJiB0aGlzLnBhcGVyLnRvcCAhPSB0aGlzICYmIFIuX3RvZnJvbnQodGhpcywgdGhpcy5wYXBlcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgZWxwcm90by50b0JhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbW92ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm5vZGUucGFyZW50Tm9kZS5maXJzdENoaWxkICE9IHRoaXMubm9kZSkge1xuICAgICAgICAgICAgdGhpcy5ub2RlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMubm9kZSwgdGhpcy5ub2RlLnBhcmVudE5vZGUuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICBSLl90b2JhY2sodGhpcywgdGhpcy5wYXBlcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBlbHByb3RvLmluc2VydEFmdGVyID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVsZW1lbnQuY29uc3RydWN0b3IgPT0gUi5zdC5jb25zdHJ1Y3Rvcikge1xuICAgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnRbZWxlbWVudC5sZW5ndGggLSAxXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZWxlbWVudC5ub2RlLm5leHRTaWJsaW5nKSB7XG4gICAgICAgICAgICBlbGVtZW50Lm5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5ub2RlLCBlbGVtZW50Lm5vZGUubmV4dFNpYmxpbmcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWxlbWVudC5ub2RlLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTtcbiAgICAgICAgfVxuICAgICAgICBSLl9pbnNlcnRhZnRlcih0aGlzLCBlbGVtZW50LCB0aGlzLnBhcGVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBlbHByb3RvLmluc2VydEJlZm9yZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnJlbW92ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbGVtZW50LmNvbnN0cnVjdG9yID09IFIuc3QuY29uc3RydWN0b3IpIHtcbiAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50WzBdO1xuICAgICAgICB9XG4gICAgICAgIGVsZW1lbnQubm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLm5vZGUsIGVsZW1lbnQubm9kZSk7XG4gICAgICAgIFIuX2luc2VydGJlZm9yZSh0aGlzLCBlbGVtZW50LCB0aGlzLnBhcGVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBlbHByb3RvLmJsdXIgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICAgICAgICB2YXIgcyA9IHRoaXMubm9kZS5ydW50aW1lU3R5bGUsXG4gICAgICAgICAgICBmID0gcy5maWx0ZXI7XG4gICAgICAgIGYgPSBmLnJlcGxhY2UoYmx1cnJlZ2V4cCwgRSk7XG4gICAgICAgIGlmICgrc2l6ZSAhPT0gMCkge1xuICAgICAgICAgICAgdGhpcy5hdHRycy5ibHVyID0gc2l6ZTtcbiAgICAgICAgICAgIHMuZmlsdGVyID0gZiArIFMgKyBtcyArIFwiLkJsdXIocGl4ZWxyYWRpdXM9XCIgKyAoK3NpemUgfHwgMS41KSArIFwiKVwiO1xuICAgICAgICAgICAgcy5tYXJnaW4gPSBSLmZvcm1hdChcIi17MH1weCAwIDAgLXswfXB4XCIsIHJvdW5kKCtzaXplIHx8IDEuNSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcy5maWx0ZXIgPSBmO1xuICAgICAgICAgICAgcy5tYXJnaW4gPSAwO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuYXR0cnMuYmx1cjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgUi5fZW5naW5lLnBhdGggPSBmdW5jdGlvbiAocGF0aFN0cmluZywgdm1sKSB7XG4gICAgICAgIHZhciBlbCA9IGNyZWF0ZU5vZGUoXCJzaGFwZVwiKTtcbiAgICAgICAgZWwuc3R5bGUuY3NzVGV4dCA9IGNzc0RvdDtcbiAgICAgICAgZWwuY29vcmRzaXplID0gem9vbSArIFMgKyB6b29tO1xuICAgICAgICBlbC5jb29yZG9yaWdpbiA9IHZtbC5jb29yZG9yaWdpbjtcbiAgICAgICAgdmFyIHAgPSBuZXcgRWxlbWVudChlbCwgdm1sKSxcbiAgICAgICAgICAgIGF0dHIgPSB7ZmlsbDogXCJub25lXCIsIHN0cm9rZTogXCIjMDAwXCJ9O1xuICAgICAgICBwYXRoU3RyaW5nICYmIChhdHRyLnBhdGggPSBwYXRoU3RyaW5nKTtcbiAgICAgICAgcC50eXBlID0gXCJwYXRoXCI7XG4gICAgICAgIHAucGF0aCA9IFtdO1xuICAgICAgICBwLlBhdGggPSBFO1xuICAgICAgICBzZXRGaWxsQW5kU3Ryb2tlKHAsIGF0dHIpO1xuICAgICAgICB2bWwuY2FudmFzICYmIHZtbC5jYW52YXMuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICB2YXIgc2tldyA9IGNyZWF0ZU5vZGUoXCJza2V3XCIpO1xuICAgICAgICBza2V3Lm9uID0gdHJ1ZTtcbiAgICAgICAgZWwuYXBwZW5kQ2hpbGQoc2tldyk7XG4gICAgICAgIHAuc2tldyA9IHNrZXc7XG4gICAgICAgIHAudHJhbnNmb3JtKEUpO1xuICAgICAgICByZXR1cm4gcDtcbiAgICB9O1xuICAgIFIuX2VuZ2luZS5yZWN0ID0gZnVuY3Rpb24gKHZtbCwgeCwgeSwgdywgaCwgcikge1xuICAgICAgICB2YXIgcGF0aCA9IFIuX3JlY3RQYXRoKHgsIHksIHcsIGgsIHIpLFxuICAgICAgICAgICAgcmVzID0gdm1sLnBhdGgocGF0aCksXG4gICAgICAgICAgICBhID0gcmVzLmF0dHJzO1xuICAgICAgICByZXMuWCA9IGEueCA9IHg7XG4gICAgICAgIHJlcy5ZID0gYS55ID0geTtcbiAgICAgICAgcmVzLlcgPSBhLndpZHRoID0gdztcbiAgICAgICAgcmVzLkggPSBhLmhlaWdodCA9IGg7XG4gICAgICAgIGEuciA9IHI7XG4gICAgICAgIGEucGF0aCA9IHBhdGg7XG4gICAgICAgIHJlcy50eXBlID0gXCJyZWN0XCI7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgICBSLl9lbmdpbmUuZWxsaXBzZSA9IGZ1bmN0aW9uICh2bWwsIHgsIHksIHJ4LCByeSkge1xuICAgICAgICB2YXIgcmVzID0gdm1sLnBhdGgoKSxcbiAgICAgICAgICAgIGEgPSByZXMuYXR0cnM7XG4gICAgICAgIHJlcy5YID0geCAtIHJ4O1xuICAgICAgICByZXMuWSA9IHkgLSByeTtcbiAgICAgICAgcmVzLlcgPSByeCAqIDI7XG4gICAgICAgIHJlcy5IID0gcnkgKiAyO1xuICAgICAgICByZXMudHlwZSA9IFwiZWxsaXBzZVwiO1xuICAgICAgICBzZXRGaWxsQW5kU3Ryb2tlKHJlcywge1xuICAgICAgICAgICAgY3g6IHgsXG4gICAgICAgICAgICBjeTogeSxcbiAgICAgICAgICAgIHJ4OiByeCxcbiAgICAgICAgICAgIHJ5OiByeVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuICAgIFIuX2VuZ2luZS5jaXJjbGUgPSBmdW5jdGlvbiAodm1sLCB4LCB5LCByKSB7XG4gICAgICAgIHZhciByZXMgPSB2bWwucGF0aCgpLFxuICAgICAgICAgICAgYSA9IHJlcy5hdHRycztcbiAgICAgICAgcmVzLlggPSB4IC0gcjtcbiAgICAgICAgcmVzLlkgPSB5IC0gcjtcbiAgICAgICAgcmVzLlcgPSByZXMuSCA9IHIgKiAyO1xuICAgICAgICByZXMudHlwZSA9IFwiY2lyY2xlXCI7XG4gICAgICAgIHNldEZpbGxBbmRTdHJva2UocmVzLCB7XG4gICAgICAgICAgICBjeDogeCxcbiAgICAgICAgICAgIGN5OiB5LFxuICAgICAgICAgICAgcjogclxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuICAgIFIuX2VuZ2luZS5pbWFnZSA9IGZ1bmN0aW9uICh2bWwsIHNyYywgeCwgeSwgdywgaCkge1xuICAgICAgICB2YXIgcGF0aCA9IFIuX3JlY3RQYXRoKHgsIHksIHcsIGgpLFxuICAgICAgICAgICAgcmVzID0gdm1sLnBhdGgocGF0aCkuYXR0cih7c3Ryb2tlOiBcIm5vbmVcIn0pLFxuICAgICAgICAgICAgYSA9IHJlcy5hdHRycyxcbiAgICAgICAgICAgIG5vZGUgPSByZXMubm9kZSxcbiAgICAgICAgICAgIGZpbGwgPSBub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKGZpbGxTdHJpbmcpWzBdO1xuICAgICAgICBhLnNyYyA9IHNyYztcbiAgICAgICAgcmVzLlggPSBhLnggPSB4O1xuICAgICAgICByZXMuWSA9IGEueSA9IHk7XG4gICAgICAgIHJlcy5XID0gYS53aWR0aCA9IHc7XG4gICAgICAgIHJlcy5IID0gYS5oZWlnaHQgPSBoO1xuICAgICAgICBhLnBhdGggPSBwYXRoO1xuICAgICAgICByZXMudHlwZSA9IFwiaW1hZ2VcIjtcbiAgICAgICAgZmlsbC5wYXJlbnROb2RlID09IG5vZGUgJiYgbm9kZS5yZW1vdmVDaGlsZChmaWxsKTtcbiAgICAgICAgZmlsbC5yb3RhdGUgPSB0cnVlO1xuICAgICAgICBmaWxsLnNyYyA9IHNyYztcbiAgICAgICAgZmlsbC50eXBlID0gXCJ0aWxlXCI7XG4gICAgICAgIHJlcy5fLmZpbGxwb3MgPSBbeCwgeV07XG4gICAgICAgIHJlcy5fLmZpbGxzaXplID0gW3csIGhdO1xuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGZpbGwpO1xuICAgICAgICBzZXRDb29yZHMocmVzLCAxLCAxLCAwLCAwLCAwKTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuICAgIFIuX2VuZ2luZS50ZXh0ID0gZnVuY3Rpb24gKHZtbCwgeCwgeSwgdGV4dCkge1xuICAgICAgICB2YXIgZWwgPSBjcmVhdGVOb2RlKFwic2hhcGVcIiksXG4gICAgICAgICAgICBwYXRoID0gY3JlYXRlTm9kZShcInBhdGhcIiksXG4gICAgICAgICAgICBvID0gY3JlYXRlTm9kZShcInRleHRwYXRoXCIpO1xuICAgICAgICB4ID0geCB8fCAwO1xuICAgICAgICB5ID0geSB8fCAwO1xuICAgICAgICB0ZXh0ID0gdGV4dCB8fCBcIlwiO1xuICAgICAgICBwYXRoLnYgPSBSLmZvcm1hdChcIm17MH0sezF9bHsyfSx7MX1cIiwgcm91bmQoeCAqIHpvb20pLCByb3VuZCh5ICogem9vbSksIHJvdW5kKHggKiB6b29tKSArIDEpO1xuICAgICAgICBwYXRoLnRleHRwYXRob2sgPSB0cnVlO1xuICAgICAgICBvLnN0cmluZyA9IFN0cih0ZXh0KTtcbiAgICAgICAgby5vbiA9IHRydWU7XG4gICAgICAgIGVsLnN0eWxlLmNzc1RleHQgPSBjc3NEb3Q7XG4gICAgICAgIGVsLmNvb3Jkc2l6ZSA9IHpvb20gKyBTICsgem9vbTtcbiAgICAgICAgZWwuY29vcmRvcmlnaW4gPSBcIjAgMFwiO1xuICAgICAgICB2YXIgcCA9IG5ldyBFbGVtZW50KGVsLCB2bWwpLFxuICAgICAgICAgICAgYXR0ciA9IHtcbiAgICAgICAgICAgICAgICBmaWxsOiBcIiMwMDBcIixcbiAgICAgICAgICAgICAgICBzdHJva2U6IFwibm9uZVwiLFxuICAgICAgICAgICAgICAgIGZvbnQ6IFIuX2F2YWlsYWJsZUF0dHJzLmZvbnQsXG4gICAgICAgICAgICAgICAgdGV4dDogdGV4dFxuICAgICAgICAgICAgfTtcbiAgICAgICAgcC5zaGFwZSA9IGVsO1xuICAgICAgICBwLnBhdGggPSBwYXRoO1xuICAgICAgICBwLnRleHRwYXRoID0gbztcbiAgICAgICAgcC50eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgIHAuYXR0cnMudGV4dCA9IFN0cih0ZXh0KTtcbiAgICAgICAgcC5hdHRycy54ID0geDtcbiAgICAgICAgcC5hdHRycy55ID0geTtcbiAgICAgICAgcC5hdHRycy53ID0gMTtcbiAgICAgICAgcC5hdHRycy5oID0gMTtcbiAgICAgICAgc2V0RmlsbEFuZFN0cm9rZShwLCBhdHRyKTtcbiAgICAgICAgZWwuYXBwZW5kQ2hpbGQobyk7XG4gICAgICAgIGVsLmFwcGVuZENoaWxkKHBhdGgpO1xuICAgICAgICB2bWwuY2FudmFzLmFwcGVuZENoaWxkKGVsKTtcbiAgICAgICAgdmFyIHNrZXcgPSBjcmVhdGVOb2RlKFwic2tld1wiKTtcbiAgICAgICAgc2tldy5vbiA9IHRydWU7XG4gICAgICAgIGVsLmFwcGVuZENoaWxkKHNrZXcpO1xuICAgICAgICBwLnNrZXcgPSBza2V3O1xuICAgICAgICBwLnRyYW5zZm9ybShFKTtcbiAgICAgICAgcmV0dXJuIHA7XG4gICAgfTtcbiAgICBSLl9lbmdpbmUuc2V0U2l6ZSA9IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHZhciBjcyA9IHRoaXMuY2FudmFzLnN0eWxlO1xuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB3aWR0aCA9PSArd2lkdGggJiYgKHdpZHRoICs9IFwicHhcIik7XG4gICAgICAgIGhlaWdodCA9PSAraGVpZ2h0ICYmIChoZWlnaHQgKz0gXCJweFwiKTtcbiAgICAgICAgY3Mud2lkdGggPSB3aWR0aDtcbiAgICAgICAgY3MuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICBjcy5jbGlwID0gXCJyZWN0KDAgXCIgKyB3aWR0aCArIFwiIFwiICsgaGVpZ2h0ICsgXCIgMClcIjtcbiAgICAgICAgaWYgKHRoaXMuX3ZpZXdCb3gpIHtcbiAgICAgICAgICAgIFIuX2VuZ2luZS5zZXRWaWV3Qm94LmFwcGx5KHRoaXMsIHRoaXMuX3ZpZXdCb3gpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgUi5fZW5naW5lLnNldFZpZXdCb3ggPSBmdW5jdGlvbiAoeCwgeSwgdywgaCwgZml0KSB7XG4gICAgICAgIFIuZXZlKFwicmFwaGFlbC5zZXRWaWV3Qm94XCIsIHRoaXMsIHRoaXMuX3ZpZXdCb3gsIFt4LCB5LCB3LCBoLCBmaXRdKTtcbiAgICAgICAgdmFyIHBhcGVyU2l6ZSA9IHRoaXMuZ2V0U2l6ZSgpLFxuICAgICAgICAgICAgd2lkdGggPSBwYXBlclNpemUud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQgPSBwYXBlclNpemUuaGVpZ2h0LFxuICAgICAgICAgICAgSCwgVztcbiAgICAgICAgaWYgKGZpdCkge1xuICAgICAgICAgICAgSCA9IGhlaWdodCAvIGg7XG4gICAgICAgICAgICBXID0gd2lkdGggLyB3O1xuICAgICAgICAgICAgaWYgKHcgKiBIIDwgd2lkdGgpIHtcbiAgICAgICAgICAgICAgICB4IC09ICh3aWR0aCAtIHcgKiBIKSAvIDIgLyBIO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGggKiBXIDwgaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgeSAtPSAoaGVpZ2h0IC0gaCAqIFcpIC8gMiAvIFc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdmlld0JveCA9IFt4LCB5LCB3LCBoLCAhIWZpdF07XG4gICAgICAgIHRoaXMuX3ZpZXdCb3hTaGlmdCA9IHtcbiAgICAgICAgICAgIGR4OiAteCxcbiAgICAgICAgICAgIGR5OiAteSxcbiAgICAgICAgICAgIHNjYWxlOiBwYXBlclNpemVcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgZWwudHJhbnNmb3JtKFwiLi4uXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICB2YXIgY3JlYXRlTm9kZTtcbiAgICBSLl9lbmdpbmUuaW5pdFdpbiA9IGZ1bmN0aW9uICh3aW4pIHtcbiAgICAgICAgICAgIHZhciBkb2MgPSB3aW4uZG9jdW1lbnQ7XG4gICAgICAgICAgICBpZiAoZG9jLnN0eWxlU2hlZXRzLmxlbmd0aCA8IDMxKSB7XG4gICAgICAgICAgICAgICAgZG9jLmNyZWF0ZVN0eWxlU2hlZXQoKS5hZGRSdWxlKFwiLnJ2bWxcIiwgXCJiZWhhdmlvcjp1cmwoI2RlZmF1bHQjVk1MKVwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gbm8gbW9yZSByb29tLCBhZGQgdG8gdGhlIGV4aXN0aW5nIG9uZVxuICAgICAgICAgICAgICAgIC8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9tczUzMTE5NCUyOFZTLjg1JTI5LmFzcHhcbiAgICAgICAgICAgICAgICBkb2Muc3R5bGVTaGVldHNbMF0uYWRkUnVsZShcIi5ydm1sXCIsIFwiYmVoYXZpb3I6dXJsKCNkZWZhdWx0I1ZNTClcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICFkb2MubmFtZXNwYWNlcy5ydm1sICYmIGRvYy5uYW1lc3BhY2VzLmFkZChcInJ2bWxcIiwgXCJ1cm46c2NoZW1hcy1taWNyb3NvZnQtY29tOnZtbFwiKTtcbiAgICAgICAgICAgICAgICBjcmVhdGVOb2RlID0gZnVuY3Rpb24gKHRhZ05hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvYy5jcmVhdGVFbGVtZW50KCc8cnZtbDonICsgdGFnTmFtZSArICcgY2xhc3M9XCJydm1sXCI+Jyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjcmVhdGVOb2RlID0gZnVuY3Rpb24gKHRhZ05hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvYy5jcmVhdGVFbGVtZW50KCc8JyArIHRhZ05hbWUgKyAnIHhtbG5zPVwidXJuOnNjaGVtYXMtbWljcm9zb2Z0LmNvbTp2bWxcIiBjbGFzcz1cInJ2bWxcIj4nKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIFIuX2VuZ2luZS5pbml0V2luKFIuX2cud2luKTtcbiAgICBSLl9lbmdpbmUuY3JlYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29uID0gUi5fZ2V0Q29udGFpbmVyLmFwcGx5KDAsIGFyZ3VtZW50cyksXG4gICAgICAgICAgICBjb250YWluZXIgPSBjb24uY29udGFpbmVyLFxuICAgICAgICAgICAgaGVpZ2h0ID0gY29uLmhlaWdodCxcbiAgICAgICAgICAgIHMsXG4gICAgICAgICAgICB3aWR0aCA9IGNvbi53aWR0aCxcbiAgICAgICAgICAgIHggPSBjb24ueCxcbiAgICAgICAgICAgIHkgPSBjb24ueTtcbiAgICAgICAgaWYgKCFjb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlZNTCBjb250YWluZXIgbm90IGZvdW5kLlwiKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVzID0gbmV3IFIuX1BhcGVyLFxuICAgICAgICAgICAgYyA9IHJlcy5jYW52YXMgPSBSLl9nLmRvYy5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICAgICAgY3MgPSBjLnN0eWxlO1xuICAgICAgICB4ID0geCB8fCAwO1xuICAgICAgICB5ID0geSB8fCAwO1xuICAgICAgICB3aWR0aCA9IHdpZHRoIHx8IDUxMjtcbiAgICAgICAgaGVpZ2h0ID0gaGVpZ2h0IHx8IDM0MjtcbiAgICAgICAgcmVzLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHJlcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIHdpZHRoID09ICt3aWR0aCAmJiAod2lkdGggKz0gXCJweFwiKTtcbiAgICAgICAgaGVpZ2h0ID09ICtoZWlnaHQgJiYgKGhlaWdodCArPSBcInB4XCIpO1xuICAgICAgICByZXMuY29vcmRzaXplID0gem9vbSAqIDFlMyArIFMgKyB6b29tICogMWUzO1xuICAgICAgICByZXMuY29vcmRvcmlnaW4gPSBcIjAgMFwiO1xuICAgICAgICByZXMuc3BhbiA9IFIuX2cuZG9jLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICByZXMuc3Bhbi5zdHlsZS5jc3NUZXh0ID0gXCJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi05OTk5ZW07dG9wOi05OTk5ZW07cGFkZGluZzowO21hcmdpbjowO2xpbmUtaGVpZ2h0OjE7XCI7XG4gICAgICAgIGMuYXBwZW5kQ2hpbGQocmVzLnNwYW4pO1xuICAgICAgICBjcy5jc3NUZXh0ID0gUi5mb3JtYXQoXCJ0b3A6MDtsZWZ0OjA7d2lkdGg6ezB9O2hlaWdodDp7MX07ZGlzcGxheTppbmxpbmUtYmxvY2s7cG9zaXRpb246cmVsYXRpdmU7Y2xpcDpyZWN0KDAgezB9IHsxfSAwKTtvdmVyZmxvdzpoaWRkZW5cIiwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIGlmIChjb250YWluZXIgPT0gMSkge1xuICAgICAgICAgICAgUi5fZy5kb2MuYm9keS5hcHBlbmRDaGlsZChjKTtcbiAgICAgICAgICAgIGNzLmxlZnQgPSB4ICsgXCJweFwiO1xuICAgICAgICAgICAgY3MudG9wID0geSArIFwicHhcIjtcbiAgICAgICAgICAgIGNzLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGNvbnRhaW5lci5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmluc2VydEJlZm9yZShjLCBjb250YWluZXIuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXMucmVuZGVyZml4ID0gZnVuY3Rpb24gKCkge307XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgICBSLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgUi5ldmUoXCJyYXBoYWVsLmNsZWFyXCIsIHRoaXMpO1xuICAgICAgICB0aGlzLmNhbnZhcy5pbm5lckhUTUwgPSBFO1xuICAgICAgICB0aGlzLnNwYW4gPSBSLl9nLmRvYy5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgdGhpcy5zcGFuLnN0eWxlLmNzc1RleHQgPSBcInBvc2l0aW9uOmFic29sdXRlO2xlZnQ6LTk5OTllbTt0b3A6LTk5OTllbTtwYWRkaW5nOjA7bWFyZ2luOjA7bGluZS1oZWlnaHQ6MTtkaXNwbGF5OmlubGluZTtcIjtcbiAgICAgICAgdGhpcy5jYW52YXMuYXBwZW5kQ2hpbGQodGhpcy5zcGFuKTtcbiAgICAgICAgdGhpcy5ib3R0b20gPSB0aGlzLnRvcCA9IG51bGw7XG4gICAgfTtcbiAgICBSLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIFIuZXZlKFwicmFwaGFlbC5yZW1vdmVcIiwgdGhpcyk7XG4gICAgICAgIHRoaXMuY2FudmFzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5jYW52YXMpO1xuICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMpIHtcbiAgICAgICAgICAgIHRoaXNbaV0gPSB0eXBlb2YgdGhpc1tpXSA9PSBcImZ1bmN0aW9uXCIgPyBSLl9yZW1vdmVkRmFjdG9yeShpKSA6IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIHZhciBzZXRwcm90byA9IFIuc3Q7XG4gICAgZm9yICh2YXIgbWV0aG9kIGluIGVscHJvdG8pIGlmIChlbHByb3RvW2hhc10obWV0aG9kKSAmJiAhc2V0cHJvdG9baGFzXShtZXRob2QpKSB7XG4gICAgICAgIHNldHByb3RvW21ldGhvZF0gPSAoZnVuY3Rpb24gKG1ldGhvZG5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyZyA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgICAgICBlbFttZXRob2RuYW1lXS5hcHBseShlbCwgYXJnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKG1ldGhvZCk7XG4gICAgfVxufSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./dev/raphael.vml.js\n");/***/},/***/"./node_modules/eve-raphael/eve.js":/*!*****************************************!*\
  !*** ./node_modules/eve-raphael/eve.js ***!
  \*****************************************/ /*! no static exports found */ /***/function node_modulesEveRaphaelEveJs(module,exports,__webpack_require__){eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.\n// \n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n// \n// http://www.apache.org/licenses/LICENSE-2.0\n// \n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n// ┌────────────────────────────────────────────────────────────┐ \\\\\n// │ Eve 0.5.0 - JavaScript Events Library                      │ \\\\\n// ├────────────────────────────────────────────────────────────┤ \\\\\n// │ Author Dmitry Baranovskiy (http://dmitry.baranovskiy.com/) │ \\\\\n// └────────────────────────────────────────────────────────────┘ \\\\\n\n(function (glob) {\n    var version = \"0.5.0\",\n        has = \"hasOwnProperty\",\n        separator = /[\\.\\/]/,\n        comaseparator = /\\s*,\\s*/,\n        wildcard = \"*\",\n        fun = function () {},\n        numsort = function (a, b) {\n            return a - b;\n        },\n        current_event,\n        stop,\n        events = {n: {}},\n        firstDefined = function () {\n            for (var i = 0, ii = this.length; i < ii; i++) {\n                if (typeof this[i] != \"undefined\") {\n                    return this[i];\n                }\n            }\n        },\n        lastDefined = function () {\n            var i = this.length;\n            while (--i) {\n                if (typeof this[i] != \"undefined\") {\n                    return this[i];\n                }\n            }\n        },\n        objtos = Object.prototype.toString,\n        Str = String,\n        isArray = Array.isArray || function (ar) {\n            return ar instanceof Array || objtos.call(ar) == \"[object Array]\";\n        };\n    /*\\\n     * eve\n     [ method ]\n\n     * Fires event with given `name`, given scope and other parameters.\n\n     > Arguments\n\n     - name (string) name of the *event*, dot (`.`) or slash (`/`) separated\n     - scope (object) context for the event handlers\n     - varargs (...) the rest of arguments will be sent to event handlers\n\n     = (object) array of returned values from the listeners. Array has two methods `.firstDefined()` and `.lastDefined()` to get first or last not `undefined` value.\n    \\*/\n        var eve = function (name, scope) {\n            var e = events,\n                oldstop = stop,\n                args = Array.prototype.slice.call(arguments, 2),\n                listeners = eve.listeners(name),\n                z = 0,\n                f = false,\n                l,\n                indexed = [],\n                queue = {},\n                out = [],\n                ce = current_event,\n                errors = [];\n            out.firstDefined = firstDefined;\n            out.lastDefined = lastDefined;\n            current_event = name;\n            stop = 0;\n            for (var i = 0, ii = listeners.length; i < ii; i++) if (\"zIndex\" in listeners[i]) {\n                indexed.push(listeners[i].zIndex);\n                if (listeners[i].zIndex < 0) {\n                    queue[listeners[i].zIndex] = listeners[i];\n                }\n            }\n            indexed.sort(numsort);\n            while (indexed[z] < 0) {\n                l = queue[indexed[z++]];\n                out.push(l.apply(scope, args));\n                if (stop) {\n                    stop = oldstop;\n                    return out;\n                }\n            }\n            for (i = 0; i < ii; i++) {\n                l = listeners[i];\n                if (\"zIndex\" in l) {\n                    if (l.zIndex == indexed[z]) {\n                        out.push(l.apply(scope, args));\n                        if (stop) {\n                            break;\n                        }\n                        do {\n                            z++;\n                            l = queue[indexed[z]];\n                            l && out.push(l.apply(scope, args));\n                            if (stop) {\n                                break;\n                            }\n                        } while (l)\n                    } else {\n                        queue[l.zIndex] = l;\n                    }\n                } else {\n                    out.push(l.apply(scope, args));\n                    if (stop) {\n                        break;\n                    }\n                }\n            }\n            stop = oldstop;\n            current_event = ce;\n            return out;\n        };\n        // Undocumented. Debug only.\n        eve._events = events;\n    /*\\\n     * eve.listeners\n     [ method ]\n\n     * Internal method which gives you array of all event handlers that will be triggered by the given `name`.\n\n     > Arguments\n\n     - name (string) name of the event, dot (`.`) or slash (`/`) separated\n\n     = (array) array of event handlers\n    \\*/\n    eve.listeners = function (name) {\n        var names = isArray(name) ? name : name.split(separator),\n            e = events,\n            item,\n            items,\n            k,\n            i,\n            ii,\n            j,\n            jj,\n            nes,\n            es = [e],\n            out = [];\n        for (i = 0, ii = names.length; i < ii; i++) {\n            nes = [];\n            for (j = 0, jj = es.length; j < jj; j++) {\n                e = es[j].n;\n                items = [e[names[i]], e[wildcard]];\n                k = 2;\n                while (k--) {\n                    item = items[k];\n                    if (item) {\n                        nes.push(item);\n                        out = out.concat(item.f || []);\n                    }\n                }\n            }\n            es = nes;\n        }\n        return out;\n    };\n    /*\\\n     * eve.separator\n     [ method ]\n\n     * If for some reasons you don’t like default separators (`.` or `/`) you can specify yours\n     * here. Be aware that if you pass a string longer than one character it will be treated as\n     * a list of characters.\n\n     - separator (string) new separator. Empty string resets to default: `.` or `/`.\n    \\*/\n    eve.separator = function (sep) {\n        if (sep) {\n            sep = Str(sep).replace(/(?=[\\.\\^\\]\\[\\-])/g, \"\\\\\");\n            sep = \"[\" + sep + \"]\";\n            separator = new RegExp(sep);\n        } else {\n            separator = /[\\.\\/]/;\n        }\n    };\n    /*\\\n     * eve.on\n     [ method ]\n     **\n     * Binds given event handler with a given name. You can use wildcards “`*`” for the names:\n     | eve.on(\"*.under.*\", f);\n     | eve(\"mouse.under.floor\"); // triggers f\n     * Use @eve to trigger the listener.\n     **\n     - name (string) name of the event, dot (`.`) or slash (`/`) separated, with optional wildcards\n     - f (function) event handler function\n     **\n     - name (array) if you don’t want to use separators, you can use array of strings\n     - f (function) event handler function\n     **\n     = (function) returned function accepts a single numeric parameter that represents z-index of the handler. It is an optional feature and only used when you need to ensure that some subset of handlers will be invoked in a given order, despite of the order of assignment. \n     > Example:\n     | eve.on(\"mouse\", eatIt)(2);\n     | eve.on(\"mouse\", scream);\n     | eve.on(\"mouse\", catchIt)(1);\n     * This will ensure that `catchIt` function will be called before `eatIt`.\n     *\n     * If you want to put your handler before non-indexed handlers, specify a negative value.\n     * Note: I assume most of the time you don’t need to worry about z-index, but it’s nice to have this feature “just in case”.\n    \\*/\n    eve.on = function (name, f) {\n        if (typeof f != \"function\") {\n            return function () {};\n        }\n        var names = isArray(name) ? (isArray(name[0]) ? name : [name]) : Str(name).split(comaseparator);\n        for (var i = 0, ii = names.length; i < ii; i++) {\n            (function (name) {\n                var names = isArray(name) ? name : Str(name).split(separator),\n                    e = events,\n                    exist;\n                for (var i = 0, ii = names.length; i < ii; i++) {\n                    e = e.n;\n                    e = e.hasOwnProperty(names[i]) && e[names[i]] || (e[names[i]] = {n: {}});\n                }\n                e.f = e.f || [];\n                for (i = 0, ii = e.f.length; i < ii; i++) if (e.f[i] == f) {\n                    exist = true;\n                    break;\n                }\n                !exist && e.f.push(f);\n            }(names[i]));\n        }\n        return function (zIndex) {\n            if (+zIndex == +zIndex) {\n                f.zIndex = +zIndex;\n            }\n        };\n    };\n    /*\\\n     * eve.f\n     [ method ]\n     **\n     * Returns function that will fire given event with optional arguments.\n     * Arguments that will be passed to the result function will be also\n     * concated to the list of final arguments.\n     | el.onclick = eve.f(\"click\", 1, 2);\n     | eve.on(\"click\", function (a, b, c) {\n     |     console.log(a, b, c); // 1, 2, [event object]\n     | });\n     > Arguments\n     - event (string) event name\n     - varargs (…) and any other arguments\n     = (function) possible event handler function\n    \\*/\n    eve.f = function (event) {\n        var attrs = [].slice.call(arguments, 1);\n        return function () {\n            eve.apply(null, [event, null].concat(attrs).concat([].slice.call(arguments, 0)));\n        };\n    };\n    /*\\\n     * eve.stop\n     [ method ]\n     **\n     * Is used inside an event handler to stop the event, preventing any subsequent listeners from firing.\n    \\*/\n    eve.stop = function () {\n        stop = 1;\n    };\n    /*\\\n     * eve.nt\n     [ method ]\n     **\n     * Could be used inside event handler to figure out actual name of the event.\n     **\n     > Arguments\n     **\n     - subname (string) #optional subname of the event\n     **\n     = (string) name of the event, if `subname` is not specified\n     * or\n     = (boolean) `true`, if current event’s name contains `subname`\n    \\*/\n    eve.nt = function (subname) {\n        var cur = isArray(current_event) ? current_event.join(\".\") : current_event;\n        if (subname) {\n            return new RegExp(\"(?:\\\\.|\\\\/|^)\" + subname + \"(?:\\\\.|\\\\/|$)\").test(cur);\n        }\n        return cur;\n    };\n    /*\\\n     * eve.nts\n     [ method ]\n     **\n     * Could be used inside event handler to figure out actual name of the event.\n     **\n     **\n     = (array) names of the event\n    \\*/\n    eve.nts = function () {\n        return isArray(current_event) ? current_event : current_event.split(separator);\n    };\n    /*\\\n     * eve.off\n     [ method ]\n     **\n     * Removes given function from the list of event listeners assigned to given name.\n     * If no arguments specified all the events will be cleared.\n     **\n     > Arguments\n     **\n     - name (string) name of the event, dot (`.`) or slash (`/`) separated, with optional wildcards\n     - f (function) event handler function\n    \\*/\n    /*\\\n     * eve.unbind\n     [ method ]\n     **\n     * See @eve.off\n    \\*/\n    eve.off = eve.unbind = function (name, f) {\n        if (!name) {\n            eve._events = events = {n: {}};\n            return;\n        }\n        var names = isArray(name) ? (isArray(name[0]) ? name : [name]) : Str(name).split(comaseparator);\n        if (names.length > 1) {\n            for (var i = 0, ii = names.length; i < ii; i++) {\n                eve.off(names[i], f);\n            }\n            return;\n        }\n        names = isArray(name) ? name : Str(name).split(separator);\n        var e,\n            key,\n            splice,\n            i, ii, j, jj,\n            cur = [events];\n        for (i = 0, ii = names.length; i < ii; i++) {\n            for (j = 0; j < cur.length; j += splice.length - 2) {\n                splice = [j, 1];\n                e = cur[j].n;\n                if (names[i] != wildcard) {\n                    if (e[names[i]]) {\n                        splice.push(e[names[i]]);\n                    }\n                } else {\n                    for (key in e) if (e[has](key)) {\n                        splice.push(e[key]);\n                    }\n                }\n                cur.splice.apply(cur, splice);\n            }\n        }\n        for (i = 0, ii = cur.length; i < ii; i++) {\n            e = cur[i];\n            while (e.n) {\n                if (f) {\n                    if (e.f) {\n                        for (j = 0, jj = e.f.length; j < jj; j++) if (e.f[j] == f) {\n                            e.f.splice(j, 1);\n                            break;\n                        }\n                        !e.f.length && delete e.f;\n                    }\n                    for (key in e.n) if (e.n[has](key) && e.n[key].f) {\n                        var funcs = e.n[key].f;\n                        for (j = 0, jj = funcs.length; j < jj; j++) if (funcs[j] == f) {\n                            funcs.splice(j, 1);\n                            break;\n                        }\n                        !funcs.length && delete e.n[key].f;\n                    }\n                } else {\n                    delete e.f;\n                    for (key in e.n) if (e.n[has](key) && e.n[key].f) {\n                        delete e.n[key].f;\n                    }\n                }\n                e = e.n;\n            }\n        }\n    };\n    /*\\\n     * eve.once\n     [ method ]\n     **\n     * Binds given event handler with a given name to only run once then unbind itself.\n     | eve.once(\"login\", f);\n     | eve(\"login\"); // triggers f\n     | eve(\"login\"); // no listeners\n     * Use @eve to trigger the listener.\n     **\n     > Arguments\n     **\n     - name (string) name of the event, dot (`.`) or slash (`/`) separated, with optional wildcards\n     - f (function) event handler function\n     **\n     = (function) same return function as @eve.on\n    \\*/\n    eve.once = function (name, f) {\n        var f2 = function () {\n            eve.off(name, f2);\n            return f.apply(this, arguments);\n        };\n        return eve.on(name, f2);\n    };\n    /*\\\n     * eve.version\n     [ property (string) ]\n     **\n     * Current version of the library.\n    \\*/\n    eve.version = version;\n    eve.toString = function () {\n        return \"You are running Eve \" + version;\n    };\n    (typeof module != \"undefined\" && module.exports) ? (module.exports = eve) : ( true ? (!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function() { return eve; }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))) : (undefined));\n})(this);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvZXZlLXJhcGhhZWwvZXZlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vUmFwaGFlbC8uL25vZGVfbW9kdWxlcy9ldmUtcmFwaGFlbC9ldmUuanM/ZDJiNCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTMgQWRvYmUgU3lzdGVtcyBJbmNvcnBvcmF0ZWQuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4vLyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4vLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbi8vIFxuLy8gaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4vLyBcbi8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbi8vIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4vLyDilIzilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJAgXFxcXFxuLy8g4pSCIEV2ZSAwLjUuMCAtIEphdmFTY3JpcHQgRXZlbnRzIExpYnJhcnkgICAgICAgICAgICAgICAgICAgICAg4pSCIFxcXFxcbi8vIOKUnOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUpCBcXFxcXG4vLyDilIIgQXV0aG9yIERtaXRyeSBCYXJhbm92c2tpeSAoaHR0cDovL2RtaXRyeS5iYXJhbm92c2tpeS5jb20vKSDilIIgXFxcXFxuLy8g4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSYIFxcXFxcblxuKGZ1bmN0aW9uIChnbG9iKSB7XG4gICAgdmFyIHZlcnNpb24gPSBcIjAuNS4wXCIsXG4gICAgICAgIGhhcyA9IFwiaGFzT3duUHJvcGVydHlcIixcbiAgICAgICAgc2VwYXJhdG9yID0gL1tcXC5cXC9dLyxcbiAgICAgICAgY29tYXNlcGFyYXRvciA9IC9cXHMqLFxccyovLFxuICAgICAgICB3aWxkY2FyZCA9IFwiKlwiLFxuICAgICAgICBmdW4gPSBmdW5jdGlvbiAoKSB7fSxcbiAgICAgICAgbnVtc29ydCA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gYSAtIGI7XG4gICAgICAgIH0sXG4gICAgICAgIGN1cnJlbnRfZXZlbnQsXG4gICAgICAgIHN0b3AsXG4gICAgICAgIGV2ZW50cyA9IHtuOiB7fX0sXG4gICAgICAgIGZpcnN0RGVmaW5lZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRoaXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpc1tpXSAhPSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgbGFzdERlZmluZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaSA9IHRoaXMubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKC0taSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpc1tpXSAhPSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgb2JqdG9zID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxcbiAgICAgICAgU3RyID0gU3RyaW5nLFxuICAgICAgICBpc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoYXIpIHtcbiAgICAgICAgICAgIHJldHVybiBhciBpbnN0YW5jZW9mIEFycmF5IHx8IG9ianRvcy5jYWxsKGFyKSA9PSBcIltvYmplY3QgQXJyYXldXCI7XG4gICAgICAgIH07XG4gICAgLypcXFxuICAgICAqIGV2ZVxuICAgICBbIG1ldGhvZCBdXG5cbiAgICAgKiBGaXJlcyBldmVudCB3aXRoIGdpdmVuIGBuYW1lYCwgZ2l2ZW4gc2NvcGUgYW5kIG90aGVyIHBhcmFtZXRlcnMuXG5cbiAgICAgPiBBcmd1bWVudHNcblxuICAgICAtIG5hbWUgKHN0cmluZykgbmFtZSBvZiB0aGUgKmV2ZW50KiwgZG90IChgLmApIG9yIHNsYXNoIChgL2ApIHNlcGFyYXRlZFxuICAgICAtIHNjb3BlIChvYmplY3QpIGNvbnRleHQgZm9yIHRoZSBldmVudCBoYW5kbGVyc1xuICAgICAtIHZhcmFyZ3MgKC4uLikgdGhlIHJlc3Qgb2YgYXJndW1lbnRzIHdpbGwgYmUgc2VudCB0byBldmVudCBoYW5kbGVyc1xuXG4gICAgID0gKG9iamVjdCkgYXJyYXkgb2YgcmV0dXJuZWQgdmFsdWVzIGZyb20gdGhlIGxpc3RlbmVycy4gQXJyYXkgaGFzIHR3byBtZXRob2RzIGAuZmlyc3REZWZpbmVkKClgIGFuZCBgLmxhc3REZWZpbmVkKClgIHRvIGdldCBmaXJzdCBvciBsYXN0IG5vdCBgdW5kZWZpbmVkYCB2YWx1ZS5cbiAgICBcXCovXG4gICAgICAgIHZhciBldmUgPSBmdW5jdGlvbiAobmFtZSwgc2NvcGUpIHtcbiAgICAgICAgICAgIHZhciBlID0gZXZlbnRzLFxuICAgICAgICAgICAgICAgIG9sZHN0b3AgPSBzdG9wLFxuICAgICAgICAgICAgICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpLFxuICAgICAgICAgICAgICAgIGxpc3RlbmVycyA9IGV2ZS5saXN0ZW5lcnMobmFtZSksXG4gICAgICAgICAgICAgICAgeiA9IDAsXG4gICAgICAgICAgICAgICAgZiA9IGZhbHNlLFxuICAgICAgICAgICAgICAgIGwsXG4gICAgICAgICAgICAgICAgaW5kZXhlZCA9IFtdLFxuICAgICAgICAgICAgICAgIHF1ZXVlID0ge30sXG4gICAgICAgICAgICAgICAgb3V0ID0gW10sXG4gICAgICAgICAgICAgICAgY2UgPSBjdXJyZW50X2V2ZW50LFxuICAgICAgICAgICAgICAgIGVycm9ycyA9IFtdO1xuICAgICAgICAgICAgb3V0LmZpcnN0RGVmaW5lZCA9IGZpcnN0RGVmaW5lZDtcbiAgICAgICAgICAgIG91dC5sYXN0RGVmaW5lZCA9IGxhc3REZWZpbmVkO1xuICAgICAgICAgICAgY3VycmVudF9ldmVudCA9IG5hbWU7XG4gICAgICAgICAgICBzdG9wID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGxpc3RlbmVycy5sZW5ndGg7IGkgPCBpaTsgaSsrKSBpZiAoXCJ6SW5kZXhcIiBpbiBsaXN0ZW5lcnNbaV0pIHtcbiAgICAgICAgICAgICAgICBpbmRleGVkLnB1c2gobGlzdGVuZXJzW2ldLnpJbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKGxpc3RlbmVyc1tpXS56SW5kZXggPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlW2xpc3RlbmVyc1tpXS56SW5kZXhdID0gbGlzdGVuZXJzW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluZGV4ZWQuc29ydChudW1zb3J0KTtcbiAgICAgICAgICAgIHdoaWxlIChpbmRleGVkW3pdIDwgMCkge1xuICAgICAgICAgICAgICAgIGwgPSBxdWV1ZVtpbmRleGVkW3orK11dO1xuICAgICAgICAgICAgICAgIG91dC5wdXNoKGwuYXBwbHkoc2NvcGUsIGFyZ3MpKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RvcCkge1xuICAgICAgICAgICAgICAgICAgICBzdG9wID0gb2xkc3RvcDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIGwgPSBsaXN0ZW5lcnNbaV07XG4gICAgICAgICAgICAgICAgaWYgKFwiekluZGV4XCIgaW4gbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobC56SW5kZXggPT0gaW5kZXhlZFt6XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0LnB1c2gobC5hcHBseShzY29wZSwgYXJncykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB6Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IHF1ZXVlW2luZGV4ZWRbel1dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgJiYgb3V0LnB1c2gobC5hcHBseShzY29wZSwgYXJncykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdG9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKGwpXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBxdWV1ZVtsLnpJbmRleF0gPSBsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0LnB1c2gobC5hcHBseShzY29wZSwgYXJncykpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdG9wID0gb2xkc3RvcDtcbiAgICAgICAgICAgIGN1cnJlbnRfZXZlbnQgPSBjZTtcbiAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgIH07XG4gICAgICAgIC8vIFVuZG9jdW1lbnRlZC4gRGVidWcgb25seS5cbiAgICAgICAgZXZlLl9ldmVudHMgPSBldmVudHM7XG4gICAgLypcXFxuICAgICAqIGV2ZS5saXN0ZW5lcnNcbiAgICAgWyBtZXRob2QgXVxuXG4gICAgICogSW50ZXJuYWwgbWV0aG9kIHdoaWNoIGdpdmVzIHlvdSBhcnJheSBvZiBhbGwgZXZlbnQgaGFuZGxlcnMgdGhhdCB3aWxsIGJlIHRyaWdnZXJlZCBieSB0aGUgZ2l2ZW4gYG5hbWVgLlxuXG4gICAgID4gQXJndW1lbnRzXG5cbiAgICAgLSBuYW1lIChzdHJpbmcpIG5hbWUgb2YgdGhlIGV2ZW50LCBkb3QgKGAuYCkgb3Igc2xhc2ggKGAvYCkgc2VwYXJhdGVkXG5cbiAgICAgPSAoYXJyYXkpIGFycmF5IG9mIGV2ZW50IGhhbmRsZXJzXG4gICAgXFwqL1xuICAgIGV2ZS5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB2YXIgbmFtZXMgPSBpc0FycmF5KG5hbWUpID8gbmFtZSA6IG5hbWUuc3BsaXQoc2VwYXJhdG9yKSxcbiAgICAgICAgICAgIGUgPSBldmVudHMsXG4gICAgICAgICAgICBpdGVtLFxuICAgICAgICAgICAgaXRlbXMsXG4gICAgICAgICAgICBrLFxuICAgICAgICAgICAgaSxcbiAgICAgICAgICAgIGlpLFxuICAgICAgICAgICAgaixcbiAgICAgICAgICAgIGpqLFxuICAgICAgICAgICAgbmVzLFxuICAgICAgICAgICAgZXMgPSBbZV0sXG4gICAgICAgICAgICBvdXQgPSBbXTtcbiAgICAgICAgZm9yIChpID0gMCwgaWkgPSBuYW1lcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICBuZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoaiA9IDAsIGpqID0gZXMubGVuZ3RoOyBqIDwgamo7IGorKykge1xuICAgICAgICAgICAgICAgIGUgPSBlc1tqXS5uO1xuICAgICAgICAgICAgICAgIGl0ZW1zID0gW2VbbmFtZXNbaV1dLCBlW3dpbGRjYXJkXV07XG4gICAgICAgICAgICAgICAgayA9IDI7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGstLSkge1xuICAgICAgICAgICAgICAgICAgICBpdGVtID0gaXRlbXNba107XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXMucHVzaChpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dCA9IG91dC5jb25jYXQoaXRlbS5mIHx8IFtdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVzID0gbmVzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogZXZlLnNlcGFyYXRvclxuICAgICBbIG1ldGhvZCBdXG5cbiAgICAgKiBJZiBmb3Igc29tZSByZWFzb25zIHlvdSBkb27igJl0IGxpa2UgZGVmYXVsdCBzZXBhcmF0b3JzIChgLmAgb3IgYC9gKSB5b3UgY2FuIHNwZWNpZnkgeW91cnNcbiAgICAgKiBoZXJlLiBCZSBhd2FyZSB0aGF0IGlmIHlvdSBwYXNzIGEgc3RyaW5nIGxvbmdlciB0aGFuIG9uZSBjaGFyYWN0ZXIgaXQgd2lsbCBiZSB0cmVhdGVkIGFzXG4gICAgICogYSBsaXN0IG9mIGNoYXJhY3RlcnMuXG5cbiAgICAgLSBzZXBhcmF0b3IgKHN0cmluZykgbmV3IHNlcGFyYXRvci4gRW1wdHkgc3RyaW5nIHJlc2V0cyB0byBkZWZhdWx0OiBgLmAgb3IgYC9gLlxuICAgIFxcKi9cbiAgICBldmUuc2VwYXJhdG9yID0gZnVuY3Rpb24gKHNlcCkge1xuICAgICAgICBpZiAoc2VwKSB7XG4gICAgICAgICAgICBzZXAgPSBTdHIoc2VwKS5yZXBsYWNlKC8oPz1bXFwuXFxeXFxdXFxbXFwtXSkvZywgXCJcXFxcXCIpO1xuICAgICAgICAgICAgc2VwID0gXCJbXCIgKyBzZXAgKyBcIl1cIjtcbiAgICAgICAgICAgIHNlcGFyYXRvciA9IG5ldyBSZWdFeHAoc2VwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlcGFyYXRvciA9IC9bXFwuXFwvXS87XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBldmUub25cbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEJpbmRzIGdpdmVuIGV2ZW50IGhhbmRsZXIgd2l0aCBhIGdpdmVuIG5hbWUuIFlvdSBjYW4gdXNlIHdpbGRjYXJkcyDigJxgKmDigJ0gZm9yIHRoZSBuYW1lczpcbiAgICAgfCBldmUub24oXCIqLnVuZGVyLipcIiwgZik7XG4gICAgIHwgZXZlKFwibW91c2UudW5kZXIuZmxvb3JcIik7IC8vIHRyaWdnZXJzIGZcbiAgICAgKiBVc2UgQGV2ZSB0byB0cmlnZ2VyIHRoZSBsaXN0ZW5lci5cbiAgICAgKipcbiAgICAgLSBuYW1lIChzdHJpbmcpIG5hbWUgb2YgdGhlIGV2ZW50LCBkb3QgKGAuYCkgb3Igc2xhc2ggKGAvYCkgc2VwYXJhdGVkLCB3aXRoIG9wdGlvbmFsIHdpbGRjYXJkc1xuICAgICAtIGYgKGZ1bmN0aW9uKSBldmVudCBoYW5kbGVyIGZ1bmN0aW9uXG4gICAgICoqXG4gICAgIC0gbmFtZSAoYXJyYXkpIGlmIHlvdSBkb27igJl0IHdhbnQgdG8gdXNlIHNlcGFyYXRvcnMsIHlvdSBjYW4gdXNlIGFycmF5IG9mIHN0cmluZ3NcbiAgICAgLSBmIChmdW5jdGlvbikgZXZlbnQgaGFuZGxlciBmdW5jdGlvblxuICAgICAqKlxuICAgICA9IChmdW5jdGlvbikgcmV0dXJuZWQgZnVuY3Rpb24gYWNjZXB0cyBhIHNpbmdsZSBudW1lcmljIHBhcmFtZXRlciB0aGF0IHJlcHJlc2VudHMgei1pbmRleCBvZiB0aGUgaGFuZGxlci4gSXQgaXMgYW4gb3B0aW9uYWwgZmVhdHVyZSBhbmQgb25seSB1c2VkIHdoZW4geW91IG5lZWQgdG8gZW5zdXJlIHRoYXQgc29tZSBzdWJzZXQgb2YgaGFuZGxlcnMgd2lsbCBiZSBpbnZva2VkIGluIGEgZ2l2ZW4gb3JkZXIsIGRlc3BpdGUgb2YgdGhlIG9yZGVyIG9mIGFzc2lnbm1lbnQuIFxuICAgICA+IEV4YW1wbGU6XG4gICAgIHwgZXZlLm9uKFwibW91c2VcIiwgZWF0SXQpKDIpO1xuICAgICB8IGV2ZS5vbihcIm1vdXNlXCIsIHNjcmVhbSk7XG4gICAgIHwgZXZlLm9uKFwibW91c2VcIiwgY2F0Y2hJdCkoMSk7XG4gICAgICogVGhpcyB3aWxsIGVuc3VyZSB0aGF0IGBjYXRjaEl0YCBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBiZWZvcmUgYGVhdEl0YC5cbiAgICAgKlxuICAgICAqIElmIHlvdSB3YW50IHRvIHB1dCB5b3VyIGhhbmRsZXIgYmVmb3JlIG5vbi1pbmRleGVkIGhhbmRsZXJzLCBzcGVjaWZ5IGEgbmVnYXRpdmUgdmFsdWUuXG4gICAgICogTm90ZTogSSBhc3N1bWUgbW9zdCBvZiB0aGUgdGltZSB5b3UgZG9u4oCZdCBuZWVkIHRvIHdvcnJ5IGFib3V0IHotaW5kZXgsIGJ1dCBpdOKAmXMgbmljZSB0byBoYXZlIHRoaXMgZmVhdHVyZSDigJxqdXN0IGluIGNhc2XigJ0uXG4gICAgXFwqL1xuICAgIGV2ZS5vbiA9IGZ1bmN0aW9uIChuYW1lLCBmKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZiAhPSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7fTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbmFtZXMgPSBpc0FycmF5KG5hbWUpID8gKGlzQXJyYXkobmFtZVswXSkgPyBuYW1lIDogW25hbWVdKSA6IFN0cihuYW1lKS5zcGxpdChjb21hc2VwYXJhdG9yKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbmFtZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5hbWVzID0gaXNBcnJheShuYW1lKSA/IG5hbWUgOiBTdHIobmFtZSkuc3BsaXQoc2VwYXJhdG9yKSxcbiAgICAgICAgICAgICAgICAgICAgZSA9IGV2ZW50cyxcbiAgICAgICAgICAgICAgICAgICAgZXhpc3Q7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbmFtZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBlID0gZS5uO1xuICAgICAgICAgICAgICAgICAgICBlID0gZS5oYXNPd25Qcm9wZXJ0eShuYW1lc1tpXSkgJiYgZVtuYW1lc1tpXV0gfHwgKGVbbmFtZXNbaV1dID0ge246IHt9fSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGUuZiA9IGUuZiB8fCBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGUuZi5sZW5ndGg7IGkgPCBpaTsgaSsrKSBpZiAoZS5mW2ldID09IGYpIHtcbiAgICAgICAgICAgICAgICAgICAgZXhpc3QgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgIWV4aXN0ICYmIGUuZi5wdXNoKGYpO1xuICAgICAgICAgICAgfShuYW1lc1tpXSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoekluZGV4KSB7XG4gICAgICAgICAgICBpZiAoK3pJbmRleCA9PSArekluZGV4KSB7XG4gICAgICAgICAgICAgICAgZi56SW5kZXggPSArekluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIGV2ZS5mXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZXR1cm5zIGZ1bmN0aW9uIHRoYXQgd2lsbCBmaXJlIGdpdmVuIGV2ZW50IHdpdGggb3B0aW9uYWwgYXJndW1lbnRzLlxuICAgICAqIEFyZ3VtZW50cyB0aGF0IHdpbGwgYmUgcGFzc2VkIHRvIHRoZSByZXN1bHQgZnVuY3Rpb24gd2lsbCBiZSBhbHNvXG4gICAgICogY29uY2F0ZWQgdG8gdGhlIGxpc3Qgb2YgZmluYWwgYXJndW1lbnRzLlxuICAgICB8IGVsLm9uY2xpY2sgPSBldmUuZihcImNsaWNrXCIsIDEsIDIpO1xuICAgICB8IGV2ZS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChhLCBiLCBjKSB7XG4gICAgIHwgICAgIGNvbnNvbGUubG9nKGEsIGIsIGMpOyAvLyAxLCAyLCBbZXZlbnQgb2JqZWN0XVxuICAgICB8IH0pO1xuICAgICA+IEFyZ3VtZW50c1xuICAgICAtIGV2ZW50IChzdHJpbmcpIGV2ZW50IG5hbWVcbiAgICAgLSB2YXJhcmdzICjigKYpIGFuZCBhbnkgb3RoZXIgYXJndW1lbnRzXG4gICAgID0gKGZ1bmN0aW9uKSBwb3NzaWJsZSBldmVudCBoYW5kbGVyIGZ1bmN0aW9uXG4gICAgXFwqL1xuICAgIGV2ZS5mID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciBhdHRycyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV2ZS5hcHBseShudWxsLCBbZXZlbnQsIG51bGxdLmNvbmNhdChhdHRycykuY29uY2F0KFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSkpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIGV2ZS5zdG9wXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBJcyB1c2VkIGluc2lkZSBhbiBldmVudCBoYW5kbGVyIHRvIHN0b3AgdGhlIGV2ZW50LCBwcmV2ZW50aW5nIGFueSBzdWJzZXF1ZW50IGxpc3RlbmVycyBmcm9tIGZpcmluZy5cbiAgICBcXCovXG4gICAgZXZlLnN0b3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHN0b3AgPSAxO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIGV2ZS5udFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQ291bGQgYmUgdXNlZCBpbnNpZGUgZXZlbnQgaGFuZGxlciB0byBmaWd1cmUgb3V0IGFjdHVhbCBuYW1lIG9mIHRoZSBldmVudC5cbiAgICAgKipcbiAgICAgPiBBcmd1bWVudHNcbiAgICAgKipcbiAgICAgLSBzdWJuYW1lIChzdHJpbmcpICNvcHRpb25hbCBzdWJuYW1lIG9mIHRoZSBldmVudFxuICAgICAqKlxuICAgICA9IChzdHJpbmcpIG5hbWUgb2YgdGhlIGV2ZW50LCBpZiBgc3VibmFtZWAgaXMgbm90IHNwZWNpZmllZFxuICAgICAqIG9yXG4gICAgID0gKGJvb2xlYW4pIGB0cnVlYCwgaWYgY3VycmVudCBldmVudOKAmXMgbmFtZSBjb250YWlucyBgc3VibmFtZWBcbiAgICBcXCovXG4gICAgZXZlLm50ID0gZnVuY3Rpb24gKHN1Ym5hbWUpIHtcbiAgICAgICAgdmFyIGN1ciA9IGlzQXJyYXkoY3VycmVudF9ldmVudCkgPyBjdXJyZW50X2V2ZW50LmpvaW4oXCIuXCIpIDogY3VycmVudF9ldmVudDtcbiAgICAgICAgaWYgKHN1Ym5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKFwiKD86XFxcXC58XFxcXC98XilcIiArIHN1Ym5hbWUgKyBcIig/OlxcXFwufFxcXFwvfCQpXCIpLnRlc3QoY3VyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3VyO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIGV2ZS5udHNcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIENvdWxkIGJlIHVzZWQgaW5zaWRlIGV2ZW50IGhhbmRsZXIgdG8gZmlndXJlIG91dCBhY3R1YWwgbmFtZSBvZiB0aGUgZXZlbnQuXG4gICAgICoqXG4gICAgICoqXG4gICAgID0gKGFycmF5KSBuYW1lcyBvZiB0aGUgZXZlbnRcbiAgICBcXCovXG4gICAgZXZlLm50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGlzQXJyYXkoY3VycmVudF9ldmVudCkgPyBjdXJyZW50X2V2ZW50IDogY3VycmVudF9ldmVudC5zcGxpdChzZXBhcmF0b3IpO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIGV2ZS5vZmZcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJlbW92ZXMgZ2l2ZW4gZnVuY3Rpb24gZnJvbSB0aGUgbGlzdCBvZiBldmVudCBsaXN0ZW5lcnMgYXNzaWduZWQgdG8gZ2l2ZW4gbmFtZS5cbiAgICAgKiBJZiBubyBhcmd1bWVudHMgc3BlY2lmaWVkIGFsbCB0aGUgZXZlbnRzIHdpbGwgYmUgY2xlYXJlZC5cbiAgICAgKipcbiAgICAgPiBBcmd1bWVudHNcbiAgICAgKipcbiAgICAgLSBuYW1lIChzdHJpbmcpIG5hbWUgb2YgdGhlIGV2ZW50LCBkb3QgKGAuYCkgb3Igc2xhc2ggKGAvYCkgc2VwYXJhdGVkLCB3aXRoIG9wdGlvbmFsIHdpbGRjYXJkc1xuICAgICAtIGYgKGZ1bmN0aW9uKSBldmVudCBoYW5kbGVyIGZ1bmN0aW9uXG4gICAgXFwqL1xuICAgIC8qXFxcbiAgICAgKiBldmUudW5iaW5kXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBTZWUgQGV2ZS5vZmZcbiAgICBcXCovXG4gICAgZXZlLm9mZiA9IGV2ZS51bmJpbmQgPSBmdW5jdGlvbiAobmFtZSwgZikge1xuICAgICAgICBpZiAoIW5hbWUpIHtcbiAgICAgICAgICAgIGV2ZS5fZXZlbnRzID0gZXZlbnRzID0ge246IHt9fTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbmFtZXMgPSBpc0FycmF5KG5hbWUpID8gKGlzQXJyYXkobmFtZVswXSkgPyBuYW1lIDogW25hbWVdKSA6IFN0cihuYW1lKS5zcGxpdChjb21hc2VwYXJhdG9yKTtcbiAgICAgICAgaWYgKG5hbWVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IG5hbWVzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICBldmUub2ZmKG5hbWVzW2ldLCBmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBuYW1lcyA9IGlzQXJyYXkobmFtZSkgPyBuYW1lIDogU3RyKG5hbWUpLnNwbGl0KHNlcGFyYXRvcik7XG4gICAgICAgIHZhciBlLFxuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgc3BsaWNlLFxuICAgICAgICAgICAgaSwgaWksIGosIGpqLFxuICAgICAgICAgICAgY3VyID0gW2V2ZW50c107XG4gICAgICAgIGZvciAoaSA9IDAsIGlpID0gbmFtZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGN1ci5sZW5ndGg7IGogKz0gc3BsaWNlLmxlbmd0aCAtIDIpIHtcbiAgICAgICAgICAgICAgICBzcGxpY2UgPSBbaiwgMV07XG4gICAgICAgICAgICAgICAgZSA9IGN1cltqXS5uO1xuICAgICAgICAgICAgICAgIGlmIChuYW1lc1tpXSAhPSB3aWxkY2FyZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZVtuYW1lc1tpXV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwbGljZS5wdXNoKGVbbmFtZXNbaV1dKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoa2V5IGluIGUpIGlmIChlW2hhc10oa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3BsaWNlLnB1c2goZVtrZXldKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdXIuc3BsaWNlLmFwcGx5KGN1ciwgc3BsaWNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGN1ci5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICBlID0gY3VyW2ldO1xuICAgICAgICAgICAgd2hpbGUgKGUubikge1xuICAgICAgICAgICAgICAgIGlmIChmKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLmYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaiA9IDAsIGpqID0gZS5mLmxlbmd0aDsgaiA8IGpqOyBqKyspIGlmIChlLmZbal0gPT0gZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuZi5zcGxpY2UoaiwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAhZS5mLmxlbmd0aCAmJiBkZWxldGUgZS5mO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvciAoa2V5IGluIGUubikgaWYgKGUubltoYXNdKGtleSkgJiYgZS5uW2tleV0uZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZ1bmNzID0gZS5uW2tleV0uZjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaiA9IDAsIGpqID0gZnVuY3MubGVuZ3RoOyBqIDwgamo7IGorKykgaWYgKGZ1bmNzW2pdID09IGYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jcy5zcGxpY2UoaiwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAhZnVuY3MubGVuZ3RoICYmIGRlbGV0ZSBlLm5ba2V5XS5mO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGUuZjtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChrZXkgaW4gZS5uKSBpZiAoZS5uW2hhc10oa2V5KSAmJiBlLm5ba2V5XS5mKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZS5uW2tleV0uZjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlID0gZS5uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogZXZlLm9uY2VcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEJpbmRzIGdpdmVuIGV2ZW50IGhhbmRsZXIgd2l0aCBhIGdpdmVuIG5hbWUgdG8gb25seSBydW4gb25jZSB0aGVuIHVuYmluZCBpdHNlbGYuXG4gICAgIHwgZXZlLm9uY2UoXCJsb2dpblwiLCBmKTtcbiAgICAgfCBldmUoXCJsb2dpblwiKTsgLy8gdHJpZ2dlcnMgZlxuICAgICB8IGV2ZShcImxvZ2luXCIpOyAvLyBubyBsaXN0ZW5lcnNcbiAgICAgKiBVc2UgQGV2ZSB0byB0cmlnZ2VyIHRoZSBsaXN0ZW5lci5cbiAgICAgKipcbiAgICAgPiBBcmd1bWVudHNcbiAgICAgKipcbiAgICAgLSBuYW1lIChzdHJpbmcpIG5hbWUgb2YgdGhlIGV2ZW50LCBkb3QgKGAuYCkgb3Igc2xhc2ggKGAvYCkgc2VwYXJhdGVkLCB3aXRoIG9wdGlvbmFsIHdpbGRjYXJkc1xuICAgICAtIGYgKGZ1bmN0aW9uKSBldmVudCBoYW5kbGVyIGZ1bmN0aW9uXG4gICAgICoqXG4gICAgID0gKGZ1bmN0aW9uKSBzYW1lIHJldHVybiBmdW5jdGlvbiBhcyBAZXZlLm9uXG4gICAgXFwqL1xuICAgIGV2ZS5vbmNlID0gZnVuY3Rpb24gKG5hbWUsIGYpIHtcbiAgICAgICAgdmFyIGYyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZXZlLm9mZihuYW1lLCBmMik7XG4gICAgICAgICAgICByZXR1cm4gZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZXZlLm9uKG5hbWUsIGYyKTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBldmUudmVyc2lvblxuICAgICBbIHByb3BlcnR5IChzdHJpbmcpIF1cbiAgICAgKipcbiAgICAgKiBDdXJyZW50IHZlcnNpb24gb2YgdGhlIGxpYnJhcnkuXG4gICAgXFwqL1xuICAgIGV2ZS52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICBldmUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIllvdSBhcmUgcnVubmluZyBFdmUgXCIgKyB2ZXJzaW9uO1xuICAgIH07XG4gICAgKHR5cGVvZiBtb2R1bGUgIT0gXCJ1bmRlZmluZWRcIiAmJiBtb2R1bGUuZXhwb3J0cykgPyAobW9kdWxlLmV4cG9ydHMgPSBldmUpIDogKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kID8gKGRlZmluZShcImV2ZVwiLCBbXSwgZnVuY3Rpb24oKSB7IHJldHVybiBldmU7IH0pKSA6IChnbG9iLmV2ZSA9IGV2ZSkpO1xufSkodGhpcyk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/eve-raphael/eve.js\n");/***/}/******/}));});

/***/ }),

/***/ "f7ab":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAb9JREFUWAntVc1KAzEQnkl3qRW8CK0IPoFnT76BL+KpiviDiLZsq3grCO2pr9CDR99k74LoVVDaumwbJ4srIbVsshvFagqhM935pl++TL4FcB+ngFNgsRXAPPT3T8+3JzFcIcJaHvwczD1y/7jbCUL5uScnOjHnHOsnjVsAXuNcB6FdswkQ16h6S0YwOdGJW61WmWRf1ak1rkFYVzHGBIMgGFOTNi2r+iFiTD2bKsFcMyia7J1dVyGKqmrDvHlpBR5vguA5L97hFlaBzBmsH140gEGT7MXYkkxUIU8dAWcHvc5lX8Zl3+IfICcIkadWAKddmZyIswmqiG/MiWRJbZ9NcArtD49SsbZzDshmFMycwZSFeMUNBgMWhqHAiI19ruGwQnvgTKwXWkvlCPEVKAc2ouX7nhgxhmNgb4jM97ykR0TPKGDeJEZY9p6cD6Zq/6tv7Rmcp0r9qLlD9tCnGd2YV6PzOw3xA/ngbq/TvpPrs2+xXP1VbIGcaJtskHqpf1GcoNrRcl6cIB1LcjwFiaVHXLCNgzsFrCsw44O2fM2UaXpJsn3Qkq+ZEvxDPmjJ10wVTI/YFOfqnQJOgd+uwDs2Z4QLPmiOtwAAAABJRU5ErkJggg=="

/***/ }),

/***/ "fc6d":
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAVVJREFUWAljYBgFoyEwGgJDOwQYkZ2fU9Zg8v/v39UMDH9lGRgYmZHlaM/+/5eBgfkxIzNz6JSuhjMw++AOBDmO4e+fk/8Z/jPBJAeCZmRg/MfAzGIOcyTcMaCQG2jHgQIE5AZILEKCB+5ASLQORJhhsxOUxCAAyYH0TnMwJ2CjEW5BciA2hQMvNupASuOABZcBU3tb4UUQLjXI4tnF1f+R+ZTqh5k1GsWwkCCXHg1BckMOpm/QhyA8p6LnQpgPBoqGlQKDPgRHHUhpEhmtSSgNwdE0OBqClIYApfrhNUlSZsEfTi5uOveFsTv/+7evf+dNnwAuYeCZ5N3bt4+xK6e/KLJb4A58/epF6K+fP//R3zmoNoLcAHILTBQepY8f3HsGjOJtf//+dWNlZeFlZWWDOx6mmJY0KFpfvXjx6OH9u25HD+yGD33Q0s5Rs0dDYDQE6BECAMwrajtsNqmuAAAAAElFTkSuQmCC"

/***/ })

/******/ });
//# sourceMappingURL=app.f8f1f9f8.js.map